var oo=Object.defineProperty;var lo=(o,u,f)=>u in o?oo(o,u,{enumerable:!0,configurable:!0,writable:!0,value:f}):o[u]=f;var Re=(o,u,f)=>lo(o,typeof u!="symbol"?u+"":u,f);import{r as x,a as kt,d as xe,i as tt,o as $,c as q,w as t,b as n,u as e,e as L,t as r,N as ye,_ as dn,f as Ae,L as io,g as le,h as w,F as Ce,j as Ye,B as be,k as Ut,l as Q,m as so,n as ro,p as Ee,q as Nt,s as cn,v as ke,x as uo,y as Ie,z as Lt,A as $t,C as Dt,D as Rt,E as je,G as Et,H as Ft,I as pe,T as We,J as Ve,K as pn,M as nt,O as Xe,P as xt,Q as fn,R as Fe,S as gn,U as ut,V as Ge,W as fe,X as mn,Y as co,Z as po,$ as jt,a0 as Xt,a1 as fo,a2 as vn,a3 as mt,a4 as Bt,a5 as go,a6 as mo,a7 as vo,a8 as ho,a9 as _o,aa as hn,ab as yo,ac as _n,ad as It,ae as Ue,af as wo,ag as bo,ah as ko,ai as xo,aj as yn,ak as wn,al as Zt,am as Wt,an as zo,ao as bn,ap as Ao,aq as Io,ar as _t,as as To,at as So,au as $e,av as Co,aw as Lo,ax as Ht,ay as $o,az as Eo,aA as Fo,aB as kn,aC as Mo,aD as xn,aE as zn,aF as lt,aG as it,aH as Po,aI as Oo,aJ as Uo,aK as No,aL as Do,aM as Ro,aN as jo,aO as Bo,aP as Zo,aQ as Wo,aR as Ho,aS as Vo,aT as qo,aU as Go,aV as Ko,aW as Qo,aX as Yo,aY as Xo,aZ as Jo}from"./vendor-DOHDxTpf.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function f(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(l){if(l.ep)return;l.ep=!0;const s=f(l);fetch(l.href,s)}})();const Se=x(navigator.hardwareConcurrency||0),el={imageFormat:"image/jpeg",imageQuality:90,expandExtButtons:!1,acceptTypeValue:void 0,editedAcceptTypes:"",expandAdvSettings:!1,retainExtension:!1,maxZipSizeMB:1e3,useFolderNameForZip:!1,multithread:!0,threadCount:Se.value,shrinkImage:!1,maxWidth:4096,maxHeight:4096,disableNotifyingFolderSelect:!1},st={threadCount:{min:2,max:16}},D=kt(An({}));function tl(){An(D)}function An(o){return Object.assign(o,el)}const In="avif2jpeg",Tt=JSON.parse(localStorage.getItem(In)||"{}");for(const o in D)if(Tt.hasOwnProperty(o)&&Tt[o]!==void 0){let u=Tt[o];st.hasOwnProperty(o)&&(st[o].min>u&&(u=st[o].min),st[o].max<u&&(u=st[o].max)),D[o]=u}const nl=()=>{const o={};for(const u in D)o[u]=D[u];localStorage.setItem(In,JSON.stringify(o))};window.addEventListener("beforeunload",nl);const al=xe({__name:"github",setup(o){const u=tt(Ke);return(f,a)=>{const l=ye,s=dn,i=Ae;return $(),q(i,{to:!1,"display-directive":"show",show:e(u).showTooltipsBeforeMounted.value,trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(s,{href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-size":"small","font-weight":"bolder"}},{default:t(()=>[n(l,null,{default:t(()=>[n(e(io))]),_:1}),L("GitHub")]),_:1})]),default:t(()=>[L(" "+r(f.$t("githubOpenSource")),1)]),_:1},8,["show"])}}}),ol=w("h3",null,"Used Framework and Libraries",-1),ll=["href"],il=xe({__name:"licenses",setup(o){const u=x(!1),f={Vue:"https://github.com/vuejs/core/blob/main/LICENSE",Vite:"https://github.com/vitejs/vite/blob/main/LICENSE","Vite SSG":"https://github.com/antfu/vite-ssg/blob/main/LICENSE","Naive UI":"https://github.com/TuSimple/naive-ui/blob/main/LICENSE",Ionicons:"https://github.com/ionic-team/ionicons/blob/main/LICENSE"};return(a,l)=>{const s=be;return $(),le(Ce,null,[n(s,{text:"",onClick:l[0]||(l[0]=i=>u.value=!0),style:{color:"black","font-size":"small"}},{default:t(()=>[L("Licenses")]),_:1}),n(e(Ut),{preset:"dialog",ref:"dialog",show:u.value,"onUpdate:show":l[1]||(l[1]=i=>u.value=i),"positive-text":"OK",title:"Licenses"},{default:t(()=>[ol,w("ul",null,[($(),le(Ce,null,Ye(f,(i,p)=>w("li",null,[w("a",{href:i},r(p),9,ll)])),64))])]),_:1},8,["show"])],64)}}}),sl=1,rl=8,ul=11,dl="",ht={major:sl,minor:rl,build:ul,tag:dl},cl={style:{"font-size":"x-small","user-select":"none"}},pl=xe({__name:"version",setup(o){const u=["0.0.118"],f=`${ht.major}.${ht.minor}.${ht.build}${ht.tag}`,a=u.map(p=>({label:`v${p}`,key:p,value:p}));function l(p){const{key:A,label:h}=p,I=i(A),d=Q("a",{href:I},h),b=Q("div",null,d);return Q("div",null,b)}function s(p){location.href=i(p)}function i(p){return`/avif2jpeg/old/${p}/`}return(p,A)=>{const h=so;return $(),q(h,{"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start",options:e(a),"render-label":l,"onUpdate:value":s},{header:t(()=>[w("span",cl,r(p.$t("previousVersion")),1)]),default:t(()=>[w("span",{style:{cursor:"pointer"}},"v"+r(f))]),_:1},8,["options"])}}}),fl=xe({__name:"header",setup(o){return(u,f)=>{const a=Ee,l=Nt;return $(),q(a,{vertical:"",justify:"start"},{default:t(()=>[n(a,{justify:"space-between",style:{"box-sizing":"border-box",padding:"4px",margin:"0px"}},{default:t(()=>[n(a,{align:"start"},{default:t(()=>[n(al),n(pl),n(a,{align:"center"},{default:t(()=>[n(il)]),_:1})]),_:1}),n(a,{align:"end",style:{"font-size":"x-small"}},{default:t(()=>[ro(u.$slots,"lang-switch")]),_:3})]),_:3}),n(l,{style:{margin:"0px"}})]),_:3})}}}),gl={style:{padding:"0px",margin:"0px","text-align":"center"}},ml={key:0},vl=xe({__name:"title",setup(o){const u=cn(),f=ke(()=>{const a=u.currentRoute.value.path||"";return!String(a.match(new RegExp("(?<=^\\/)[^/]+"))||"")});return(a,l)=>{const s=dn,i=uo("router-link"),p=Ee;return $(),q(p,{align:"center",justify:"center",style:{margin:"0px"}},{default:t(()=>[w("h1",gl,[e(f)?($(),le("span",ml,r(a.$t("title")),1)):($(),q(i,{key:1,to:"../",custom:""},{default:t(({navigate:A,href:h})=>[n(s,{href:h,onClick:A,style:{color:"black","word-break":"keep-all","overflow-wrap":"break-word"}},{default:t(()=>[L(r(a.$t("title")),1)]),_:2},1032,["href","onClick"])]),_:1}))])]),_:1})}}});function hl(o){return new Worker("/avif2jpeg/dist/assets/worker.canvas-geeReHlU.js",{name:o==null?void 0:o.name})}let Tn=0;class _l extends hl{constructor(f){super();Re(this,"id",Tn++);Re(this,"priority");this.priority=f||!1}release(){vt(this)}}class yl extends Promise{constructor(){super(...arguments);Re(this,"wid",-1)}}const Mt=new Set,Je=new Set,qe=new Set,dt=new Map,Sn=[];function wl(o){const u=new _l;return Mt.add(u),Cn(u,o),vt(u),o&&Sn.push(u.id),u}function Cn(o,u){const f=u?qe:Je,a=new yl(l=>{dt.set(o,()=>l([o,a,!!u]))});a.wid=o.id,f.add(a)}async function bl(o){let u;if(!o)u=new Set([...qe,...Je]);else if(typeof o=="number"){const s=Sn.slice(0,o);u=new Set([...qe].filter(i=>s.includes(i.wid)))}else u=o?qe:Je;const[f,a,l]=await Promise.any(u);return(l?qe:Je).delete(a),Cn(f,l),f}function vt(o){const u=dt.get(o);u&&(dt.delete(o),u())}function Ln(){for(const o of dt.keys())vt(o)}async function Jt(){return await Promise.all([...Je,...qe])}function Pt(){Ln();for(const o of Mt)o.terminate();Mt.clear(),Je.clear(),qe.clear(),dt.clear(),Tn=0}function kl(o){return new Worker("/avif2jpeg/dist/assets/worker.zip-D4CHLUmx.js",{name:o==null?void 0:o.name})}const xl=1e3*10,zl=1,Vt=2e3*2e3*4,Al=5,Il=3,Tl=Vt*1,en=Vt*8,Sl=300,ct=new Map,yt=new Map;let rt=0;const et=new Map,pt=new Map,ft=new Map;let qt,ee,Pe,gt,Oe,$n,En,Fn,Mn,Pn,On;function St(o){({files:Oe,completedFileIdSet:qt,ConvStats:ee,canceled:Pe,props:gt,format:$n,quality:En,outputExt:Fn,imageType:Mn,message:Pn,notification:On}=o||{}),ct.clear(),yt.clear(),et.clear(),pt.clear(),ft.clear(),et.clear(),pt.clear(),ft.clear()}async function Cl(o){St(o),qt.clear();const u=Math.min(gt.threads-1,Oe.length),f=Math.min(Al,u),a=El(ee,Pe,Pn,On,Oe);let l;try{l=await Ll(u,f,a)}catch{return St(),{exception:new Error("worker-load-error"),callbackToClearConverter:new Function,callbackToGenerateFailedZips:new Function}}const s=$l(l),i=Ie(Pe,z=>{z&&(i(),Ln())});ee.demandImage=z=>{l.postMessage({action:"request-image",index:z})};const A=Oe.length===1;let h=0,I=0,d="",b=0,m=0;for(rt=0,ct.clear();b<Oe.length&&!Pe.value;){if(rt>en){await new Promise(V=>setTimeout(V,100));continue}const z=[],U=[];let P=!1;const S=Oe.length-b,v=Math.min(b+Math.max(Math.min(Il,S/gt.threads|0),1),Oe.length);let X=0;const J=[],ae=[];let E=!1;for(;b<v&&!(X>Tl||rt>en);b++){const V=Oe[b],F=yt.get(V);E=E||!!F;const W=F?Math.max(0,100-(Date.now()-(m||F))):0;W&&await new Promise(C=>setTimeout(C,W)),E&&(m=Date.now());const ie=V._id;X+=V.size,P=b===Oe.length-1,et.has(ie)||et.set(ie,V);const R={data:{action:"file-start",path:V.webkitRelativePath||V.name,fileId:ie,index:b}};J.push(R);let oe;try{oe=await createImageBitmap(V)}catch{const k={data:{action:"file-error",path:V.webkitRelativePath||V.name,fileId:ie,index:b}};ae.push(k);continue}U.push(oe);const re=oe.width*oe.height*4;X+=re+V.size,rt+=re+V.size;let he=!1;const ue=Date.now();ue-I>Sl&&(I=ue,he=!0),z.push({index:b,bitmap:oe,file:V,fileId:ie,outputPath:d,type:$n,quality:En/100,demandThumbnail:he||P,isSingleImage:A,maxSize:D.shrinkImage?{width:D.maxWidth,height:D.maxHeight}:null,retriedTime:yt.get(V)||0,webkitRelativePath:V.webkitRelativePath}),V.webkitRelativePath||V.name,pt.has(V)||(h++,ee.index=h),he=!1}let ce;if(z.length){const V=X>Vt;ce=await bl(f>0&&(E?1:V)),ct.set(ce,X)}if(Pe.value){vt(ce);break}for(const V of J.concat(ae))V.target=ce||{id:-1},a(V);if(ce&&(ce.postMessage(z,U),U.length=0),P&&(await Jt(),Pe.value))break}if(await Jt(),!Pe.value){let z;await new Promise(U=>{z=Ie([()=>ee.done,Pe],()=>{(ee.done>=h||Pe.value)&&U(void 0)},{immediate:!0})}),z()}i(),setTimeout(()=>Pt(),500),l.postMessage({action:"squeeze"}),await s;const _={value:!1},g=()=>{_.value=!0,Pt(),l.terminate(),St()};let y=!1;return{callbackToClearConverter:g,callbackToGenerateFailedZips:async z=>{y||(y=!0,await Fl(z,l,_,ee))}}}async function Ll(o,u,f){Pt();const a=new kl;a.postMessage({action:"set-config",zipSize:gt.maxZipSizeMB*1024*1024,keepExt:gt.retainExtension,outputExt:Fn,imageType:Mn});let l;for(let i=0;i<o;i++){const p=wl(u>i);l??(l=p),p.onmessage=f;const{port1:A,port2:h}=new MessageChannel;a.postMessage({action:"set-port"},[A]),p.postMessage({},[h])}return await new Promise((i,p)=>{const A=m=>{a.removeEventListener("message",d),l.removeEventListener("message",d),clearTimeout(b),m?i(m):p(m)};let h=!1,I=!1;const d=m=>{m.target===a&&(h=!0),m.target===l&&(I=!0),h&&I&&A(!0)};let b=0;a.addEventListener("message",d),l.addEventListener("message",d),b=window.setTimeout(()=>A(!1),xl)}),a}function $l(o){return new Promise(f=>{o.onmessage=a=>{var h;const l=a.data,{action:s}=l;if(s==="add-zip-completed"){const{fileId:I}=l;ee.done++,ee.success++,qt.add(I);return}if(s==="respond-image"){const{url:I,index:d,path:b,size:m,fileId:_}=l;ee.convertedImageUrl=I,ee.convertedImageSize=m,ee.convertedImageIndex=d,ee.convertedImageName=b,ee.convertedImageFileId=_;let g="",y=0,T="";if(_>=0){const z=et.get(_);g=URL.createObjectURL(z),y=z.size,T=z.name}ee.convertedImageOrgUrl=g,ee.convertedImageOrgSize=y,ee.convertedImageOrgName=T,ee.convertedImageShrinked=(h=ft.get(_))==null?void 0:h.shrinked;return}const{size:i,count:p}=l,A="url"in a.data?a.data.url:"";switch(s){case"push-zip":ee.zips.push({url:A,size:i,count:p}),ee.zippedTotalCount+=p,ee.zippedTotalSize+=i;break;case"squeeze-zip":p>0&&(ee.zips.push({url:A,size:i,count:p}),ee.zippedTotalCount+=p,ee.zippedTotalSize+=i),f(void 0);break;case"push-filelist":ee.failedFileZippedCount++;break;case"squeeze-filelist-zip":ee.failedZipDone=!0;case"push-filelist-zip":ee.failedZips.push({url:A,size:i,count:p});break;case"zip-error":case"zip-squeeze-error":ee.zippingErrorCount+=p,s==="zip-squeeze-error"&&f(void 0);break}}})}function El(o,u,f,a,l){let s=0;const i=x(new Map),p=x(new Map);return h=>{const I=h.target,{data:d}=h,{action:b}=d;if(u.value)switch(b){case"file-canceled":o.done++;return}switch(b){case"list-start":break;case"file-start":{const{index:m,path:_,fileId:g}=d,y={key:s++,core:I.id,index:m,path:_,command:"➡️started"};i.value.set(g,y),o.logs.push(y);break}case"file-load":{const{thumbnail:m,width:_,height:g,fileId:y,shrinked:T}=d;i.value.get(y).command="🖼️loaded",m&&(o.thumbnail=m);let z=ft.get(y);z||(z={},ft.set(y,z)),z.shrinked??(z.shrinked=T);break}case"file-converted":{const{index:m,path:_,fileId:g}=d,y=i.value.get(g);y.command="🔃converted",p.value.set(g,y),o.converted++;break}case"file-completed":{const{inputsize:m,outputsize:_,fileId:g}=d;o.inputTotalSize+=m,o.outputTotalSize+=_;const y=p.value.get(g);y&&(y.command="✅completed",y.completed=!0);break}case"file-error":{const{index:m,path:_,fileId:g}=d,y=et.get(g);if(!y)throw new Error(`the file doesn't exist in the Map. "${g}":"${_}"`);const T=pt.get(y)||0,z=i.value.get(g);T<zl?(pt.set(y,T+1),l.push(y),yt.set(y,Date.now()),z.command="⚠️retrying",z.error=!0,f.warning(`retrying "${_}"`,{duration:3e3})):(o.done++,o.failure++,z.command="❗failed",z.error=!0,a.error({content:`failed to load "${_}"`,duration:5e3}));break}case"file-canceled":{const{fileId:m,path:_}=d,g=p.value.get(m);o.done++,o.failure++,g.command="❗zip-aborted",g.error=!0;break}case"list-end":{vt(I),rt-=ct.get(I)||0,ct.delete(I);break}}}}async function Fl(o,u,f,a){let l=0;for(const s of o){const i=(s.webkitRelativePath||s.name).replace(/^\//,"");if(f.value)return;l-a.failedFileZippedCount>20&&await new Promise(p=>setTimeout(p,10)),u.postMessage({action:"add-filelist",file:s,path:i}),l++}u.postMessage({action:"squeeze-filelist"})}function He(o,u=2){const f=Math.sign(o);o=Math.abs(o);const a=["Bytes","KB","MB","GB"],l=o?Math.floor(Math.log(o)/Math.log(1024)):0;return`${(o/Math.pow(1024,l)*f).toFixed(u)}${a[l]}`}function Un(o,u=100,f=!1){u=typeof u=="number"?{width:u,height:u}:u;const{width:a,height:l}=u;let{width:s,height:i}=o;const p=s/i,A=a/l;return p>=A?(s=f?Math.min(a,s):a,i=s/p|0):(i=f?Math.min(l,i):l,s=i*p|0),{width:s,height:i}}class Ml{constructor(){Re(this,"_currentFileCount",0);Re(this,"_totalFileCount",0);Re(this,"_zipLengthSumList",[]);Re(this,"_pathBank",{})}increase(u){u&&(this._pathBank[u]=[this._zipLengthSumList.length,this._currentFileCount]),this._currentFileCount++,this._totalFileCount++}split(){this._zipLengthSumList.push(this._totalFileCount),this._currentFileCount=0}get(u){if(typeof u=="number"){let f=this._zipLengthSumList.findIndex((s,i)=>u<s);f===-1&&(f=this._zipLengthSumList.length);const a=this._zipLengthSumList[f-1]||0,l=u-a;return[f,l]}else{const f=this._pathBank[String(u)];if(f)return f}return null}}async function Pl(o,u,f,a,l,s){let i="";const p=document.createElement("canvas"),A=p.getContext("2d");let h=new Lt;const I=[h],d=new Ml,b=a.format,m=a.quality/100,_=[...b.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),g=o.length,y=a.maxZipSizeMB*1024*1024;let T=0,z=null,U="",P="",S=0,v=0,X=0,J=0,ae=0,E=!1;const ce=[];s.demandImage=R=>{const[oe,re]=d.get(R),he=I[oe];s.convertedImageIndex=R,s.convertedImageName=he.getPathByIndex(re),s.convertedImageUrl=URL.createObjectURL(new Blob([he.get(re)],{type:b}));let ue="",C=0,k="";const H=ce[R];ue=URL.createObjectURL(H),C=H.size,k=H.name,s.convertedImageOrgUrl=ue,s.convertedImageOrgSize=C,s.convertedImageOrgName=k};for(const R of o){if(l.value)break;const oe=R.name;let re="";const he=R.size,ue=(R.webkitRelativePath||R.relativePath||oe).replace(/^\//,""),C=document.createElement("img");T++;const k={key:X++,core:-1,index:T,path:ue,command:"➡️start"};s.index=T,s.logs.push(k),s.logs.length-1,i&&(URL.revokeObjectURL(i),i=""),i=URL.createObjectURL(R),P=i,S=R.size,C.src=i;const H=await Nn(C).then(()=>!0).catch(()=>!1);if(!C.complete||!H||l.value){s.done++,s.failure++,k.command="❗failed";continue}const M=C.width,O=C.height;p.width=M,p.height=O,A.drawImage(C,0,0,M,O,0,0,M,O),k.command="🖼️imgload",s.thumbnail=C;const N=await new Promise(K=>{const se=de=>{z=de,K(de)};p.toBlob(se,b,m)});if(l.value)break;if(!N){s.failure++;continue}v=N.size,s.converted++;let Z="";if(ae+v>=y){try{await h.wait(),Z=h.url()}catch{E=!0,alert("memory problem occurred");break}s.zips.push({url:Z,size:ae,count:J}),s.zippedTotalCount+=J,s.zippedTotalSize+=ae,ae=0,J=0,d.split(),h=new Lt,I.push(h)}ae+=v;const Y=ue||oe;for(let K=1;K<255&&(re=Y.replace(a.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+(K>1?`(${K})`:"")+"."+_,!!h.has(re));K++);s.done++;try{J++,h.add(re,N),d.increase(),ce.push(R),s.inputTotalSize+=he,s.outputTotalSize+=v}catch{continue}U=re,s.success++,k.command="✅completed",k.completed=!0,u.add(R._id)}if(s.success>0)if(g===1)z&&(s.convertedImageIndex=0,s.convertedImageName=U.replace(/^.*\/(?=[^/]+$)/,"").replace(a.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+_,s.convertedImageUrl=URL.createObjectURL(z),s.convertedImageOrgUrl=P,s.convertedImageOrgSize=S);else try{if(E)throw new Error("terminated zipping process for memory problems");await h.wait();const R=h.url();s.zips.push({url:R,count:J,size:ae}),s.zippedTotalCount+=J,s.zippedTotalSize+=ae}catch{}const V={value:!1},F=()=>{V.value=!0,I.forEach(R=>R.clear()),I.length=0,ce.length=0};let W=!1;return{callbackToClearConverter:F,callbackToGenerateFailedZips:async R=>{W||(W=!0,Ol(R,y,s,V))}}}async function Ol(o,u,f,a){let l=0,s=0,i=new Lt;for(let p=0;p<o.length;p++){const A=o[p],h=(A.webkitRelativePath||A.name).replace(/^\//,"");if(a.value)return;if(await i.add(h,A),s+=A.size,l++,f.failedFileZippedCount++,s>=u||p===o.length-1){await i.zip();const I=i.url();f.failedZips.push({url:I,size:s,count:l}),i.clear(),s=0,l=0}}f.failedZipDone=!0}function Nn(o){if(typeof o.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((u,f)=>{o.onload=u,o.onerror=f})}const Be=(o,u)=>{const f=o.__vccOpts||o;for(const[a,l]of u)f[a]=l;return f},Ul=o=>(Dt("data-v-5dab19ad"),o=o(),Rt(),o),Nl={class:"container"},Dl=Ul(()=>w("span",{class:"text"},"ZIP",-1)),Rl={__name:"zipicon",setup(o){return(u,f)=>($(),le("span",Nl,[n(e(ye),null,{default:t(()=>[n(e($t))]),_:1}),Dl]))}},jl=Be(Rl,[["__scopeId","data-v-5dab19ad"]]),Bl=["href","download","title"],Zl=xe({__name:"thumbnail",props:{src:{},width:{},height:{},maxWidth:{default:100},maxHeight:{default:100},expand:{type:Boolean,default:!1},loading:{type:Boolean},fileName:{},allowNext:{type:Boolean},allowPrev:{type:Boolean},hidden:{type:Boolean}},emits:["load","error","next","prev"],setup(o,{expose:u,emit:f}){je();const a=o,l=f;u({download:g,openPreview:y});const s=x(),i=x(!0),p=x(""),A=x(a.width||100),h=x(a.height||100),I=x(!1),d=kt({width:A.value+"px",height:h.value+"px",minWidth:"50px",minHeight:"50px"});Ie(a,(T,z)=>{d.width=(a.width||100)+"px",d.height=(a.height||100)+"px"}),Ie(()=>a.src,()=>{_(a.src)},{immediate:!0});async function b(T){const z=T.target,U=z.naturalWidth,P=z.naturalHeight,{width:S,height:v}=Un({width:U,height:P},{width:a.maxWidth||100,height:a.maxHeight||100},a.expand);A.value=S,h.value=v,l("load",{src:z.src,width:U,height:P}),i.value=!1,await new Promise(X=>setTimeout(X,100)),!i.value&&(I.value=!0)}function m(T){const z=T.target;l("error",z.src)}async function _(T){i.value=!0,I.value=!1,await new Promise(z=>setTimeout(z,150)),p.value=T}function g(){const T=document.createElement("a");T.href=p.value,T.download=a.fileName,T.click()}function y(){var T;(T=s.value)==null||T.click()}return(T,z)=>{const U=pn,P=nt,S=Xe;return Et(($(),le("div",null,[n(e(Ae),null,{trigger:t(()=>[n(S,{show:e(i)||a.loading},{default:t(()=>[n(P,{justify:"center",align:"center",style:pe(e(d))},{default:t(()=>[w("a",{href:e(p),onClick:z[0]||(z[0]=Ve(()=>{},["left","prevent"])),target:"_blank",download:a.fileName,title:a.fileName,style:{"line-height":"0px"}},[n(We,{mode:"in-out"},{default:t(()=>[Et(n(U,{ref_key:"nImageRef",ref:s,"show-toolbar-tooltip":"",onLoad:b,onError:m,src:e(p),width:e(A),height:e(h),style:{border:"1px solid silver"}},null,8,["src","width","height"]),[[Ft,e(I)]])]),_:1})],8,Bl)]),_:1},8,["style"])]),_:1},8,["show"])]),default:t(()=>[L(" "+r(a.fileName),1)]),_:1})],512)),[[Ft,!T.hidden]])}}}),tn=Be(Zl,[["__scopeId","data-v-823a733d"]]),Wl={style:{"font-size":"smaller"}},Hl={style:{"font-family":"v-mono","font-size":"smaller"}},Vl=["href","download","title"],ql={style:{"font-weight":"bold",color:"gray"}},Gl=["href","download","title"],Kl={style:{"font-weight":"bold",color:"gray"}},Ql=["href","download"],Yl=xe({__name:"image-viewer",props:{url:{},originalUrl:{},name:{},originalName:{},size:{},originalSize:{},length:{},index:{},isSingle:{type:Boolean},variousInfo:{}},emits:["demand-image","close"],setup(o,{expose:u,emit:f}){const a=o,l=f;u({download:W});const s=x(),i=x(),p=x(),A=xt(),{t:h}=je();fn();const I=x(!0),d=x(Math.max(a.index,0)+1),b=x(1),m=x(1),_=x(""),g=x(1),y=x(1),T=x(!1),z=x(!1),U=x(!1),P=ke(()=>{var C,k;return((k=(C=p==null?void 0:p.value)==null?void 0:C.previewInstRef)==null?void 0:k.previewSrc)===_.value}),S=ke(()=>d.value<a.length),v=ke(()=>d.value>1);Fe(()=>{if(document.body.addEventListener("keydown",ce),document.body.addEventListener("keydown",E),a.url&&a.index>=0){I.value=!1,_.value=a.url;return}l("demand-image",d.value-1)});let X=-1;Ie(d,()=>{d.value<1||d.value>a.length||(clearTimeout(X),X=setTimeout(()=>{a.index!==d.value-1&&(l("demand-image",d.value-1),T.value=!0,z.value=!1,U.value=!1)},100))}),Ie(()=>a.index,()=>{var k,H;let C="";if(a.index===0&&I.value?(I.value=!1,d.value=1,C=a.url):a.index===d.value-1&&(T.value=!1,C=a.url),C){try{(H=(k=p.value)==null?void 0:k.previewInstRef)!=null&&H.displayed&&(P.value?p.value.previewInstRef.setPreviewSrc(C):p.value.previewInstRef.setPreviewSrc(a.originalUrl))}catch{}_.value=C}},{immediate:!0});let J="",ae="";Ie(()=>a.url,()=>{if(a.url!==J){const C=J,k=ae;setTimeout(()=>{URL.revokeObjectURL(C),URL.revokeObjectURL(k)},1e3),J=a.url,ae=a.originalUrl}a.isSingle&&(I.value=!1,_.value=a.url)}),gn(()=>{document.body.removeEventListener("keydown",ce),document.body.removeEventListener("keydown",E)});function E(C){var k,H,M,O;if(C.key==="Escape")try{(H=(k=p.value)==null?void 0:k.previewInstRef)!=null&&H.displayed&&(C.stopPropagation(),(O=(M=p.value)==null?void 0:M.previewInstRef)==null||O.toggleShow(!1))}catch{}}function ce(C){var k,H;switch(C.key){case"ArrowRight":case"PageDown":R(1);break;case"ArrowLeft":case"PageUp":R(-1);break;case"ArrowUp":case"Home":d.value=1;break;case"ArrowDown":case"End":d.value=a.length;break;case" ":case"Enter":re();break;default:return}C.stopPropagation(),(H=(k=p.value)==null?void 0:k.previewInstRef)!=null&&H.displayed&&C.preventDefault()}function V({width:C,height:k}){b.value=C,m.value=k,z.value=!0}function F({width:C,height:k}){g.value=C,y.value=k,U.value=!0}function W(){P.value?s.value.download():i.value.download()}async function ie(C){try{const k=await fetch(C).then(M=>M.blob()).then(M=>new Promise(O=>{const N=new FileReader;N.onload=O,N.readAsDataURL(M)})).then(M=>M.target.result);navigator.clipboard.writeText(k);const H=M=>{M.target.focus(),M.target.select()};A.info({title:h("copiedDataURLDialogTitle"),content:()=>Q("div",[Q("div",h("copiedDataURLMessage")),Q(mn,{onFocus:H,onClick:H,type:"textarea",value:k,readonly:!0,size:"small",style:{marginTop:"2em"}})]),positiveText:"OK"})}catch{A.error({title:"failed to copy Data URL",content:"could not copy Data URL",positiveText:"OK"})}}function R(C){C>0&&d.value<a.length&&d.value++,C<0&&d.value>1&&d.value--}let oe="";const re=()=>{var k,H,M,O,N,Z;oe=(M=window.getComputedStyle((H=(k=p==null?void 0:p.value)==null?void 0:k.previewInstRef)==null?void 0:H.previewRef))==null?void 0:M.transform;const C=P.value;(Z=(N=(O=p==null?void 0:p.value)==null?void 0:O.previewInstRef)==null?void 0:N.handleSwitchNext)==null||Z.call(N),ut(()=>{var Y,K,se;P.value===C&&((se=(K=(Y=p==null?void 0:p.value)==null?void 0:Y.previewInstRef)==null?void 0:K.handleSwitchNext)==null||se.call(K))})};function he(){try{ut(()=>p.value.previewInstRef.previewRef.style.transform=oe)}catch{}}function ue({nodes:C}){const k=Q(jt,{color:P.value?"green":"gray",offset:[-20,-12],value:(P.value?h("status.Converted"):h("status.Original"))+" "+d.value},()=>Q(be,{round:!0,onClick(){re()},textColor:"white",size:"small",style:{marginLeft:"4px"}},{icon:()=>Q(P.value?co:po)}));C.next=Q(be,{onClick(){R(1)},disabled:!S.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>Q(Xt)}),C.prev=Q(be,{onClick(){R(-1)},disabled:!v.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>Q(fo)});try{const H=C.download.children;H.default=()=>h("save");const M=H.trigger();M.props.onClick=W,H.trigger=()=>M}catch{}return[k,...Object.values(C)]}return(C,k)=>{const H=ye,M=nt,O=Ee,N=vn,Z=mt,Y=Bt,K=go,se=Xe;return $(),q(se,{size:"large",show:I.value,class:"body"},{default:t(()=>[n(K,{ref_key:"nImageGroupRef",ref:p,"show-toolbar-tooltip":"","render-toolbar":ue,onPreviewNext:he},{default:t(()=>[n(M,{justify:"center",align:"center",vertical:"",style:pe({visibility:I.value?"hidden":"visible"})},{default:t(()=>[n(M,{wrap:!1,align:"center"},{default:t(()=>[n(e(be),{onClick:k[0]||(k[0]=de=>R(-1)),disabled:!e(v),block:"",style:{"max-width":"1em",height:"10em"},class:Ge({pale:!e(v)}),title:C.$t("Prev")},{icon:t(()=>[n(H,{size:"30"},{default:t(()=>[n(e(mo))]),_:1})]),_:1},8,["disabled","class","title"]),n(M,{vertical:""},{default:t(()=>[n(M,{align:"center",wrap:!1},{default:t(()=>[n(M,{vertical:"",align:"center",style:{overflow:"hidden"}},{default:t(()=>[C.isSingle?fe("",!0):($(),q(M,{key:0,style:{"white-space":"nowrap"},align:"center",wrap:!1},{default:t(()=>[w("span",Wl,r(e(h)("status.index"))+":",1),w("span",Hl,r(d.value)+" / "+r(a.length),1)]),_:1})),n(M,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(M,{align:"center",justify:"center",vertical:""},{default:t(()=>[w("a",{href:C.originalUrl,onClick:k[3]||(k[3]=Ve(de=>{i.value.openPreview()},["prevent"])),download:C.originalName,title:C.originalName},[n(M,{align:"center",justify:"center",wrap:!1,style:{},class:"original-thumb"},{default:t(()=>[n(tn,{ref_key:"thumbOrgRef",ref:i,src:C.originalUrl,width:1,"max-width":1,"max-height":1,loading:T.value,"file-name":C.originalName,"allow-next":d.value<a.length,"allow-prev":d.value>1,onLoad:F,onNext:k[1]||(k[1]=de=>R(1)),onPrev:k[2]||(k[2]=de=>R(-1)),hidden:!0},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(O,{vertical:"",align:"center"},{default:t(()=>[w("span",ql,r(e(h)("status.Original")),1),n(O,{justify:"center",style:{"font-size":"smaller","white-space":"nowrap","font-family":"v-mono",width:"10em"}},{default:t(()=>[L(r(String(g.value).padStart(5," "))+" × "+r(String(y.value).padStart(5," ")),1)]),_:1}),n(O,{justify:"center"},{default:t(()=>[L(r(e(He)(a.originalSize,0)),1)]),_:1})]),_:1})]),_:1})],8,Vl)]),_:1}),n(M,{style:{margin:"1em"},class:"original-thumb"},{default:t(()=>[n(H,{size:"20",color:"silver"},{default:t(()=>[n(e(Xt))]),_:1})]),_:1}),w("a",{href:_.value,onClick:k[4]||(k[4]=Ve(de=>{s.value.openPreview()},["prevent"])),download:a.name,title:a.name},[n(M,{vertical:"",align:"center",justify:"center"},{default:t(()=>[n(M,{justify:"center",align:"center",size:0},{default:t(()=>[w("span",Kl,r(e(h)("status.Converted")),1)]),_:1}),n(M,{vertical:"",align:"center",justify:"center",size:0},{default:t(()=>[n(M,{justify:"center",style:{"font-size":"smaller","white-space":"nowrap","font-family":"v-mono",width:"10em"}},{default:t(()=>{var de;return[w("span",{style:pe((de=a.variousInfo)!=null&&de.shrinked?{color:"blue"}:{})},r(String(b.value).padStart(5," "))+" × "+r(String(m.value).padStart(5," ")),5)]}),_:1})]),_:1}),n(M,{justify:"center"},{default:t(()=>[L(r(e(He)(a.size,0)),1)]),_:1})]),_:1})],8,Gl)]),_:1}),n(M,{ref:"fileNameContainer",align:"center",class:"pathbox",title:a.name},{default:t(()=>[n(N,{"x-scrollable":!0,trigger:"hover",style:{"font-size":"smaller",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},{default:t(()=>[L(r(a.name),1)]),_:1})]),_:1},8,["title"])]),_:1}),n(M,{vertical:""},{default:t(()=>[n(tn,{ref_key:"thumbConvRef",ref:s,src:_.value,width:140,"max-width":140,"max-height":100,loading:T.value,"file-name":a.name,"allow-next":d.value<a.length,"allow-prev":d.value>1,onLoad:V,onNext:k[5]||(k[5]=de=>R(1)),onPrev:k[6]||(k[6]=de=>R(-1))},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(M,{justify:"center",wrap:!0},{default:t(()=>[a.url?($(),q(Z,{key:0,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[w("a",{href:a.url,ref:"saveImg",target:"_blank",download:a.name},[n(e(be),{round:"",size:"tiny"},{default:t(()=>[L(r(C.$t("save")),1)]),_:1})],8,Ql)]),default:t(()=>[L(" "+r(C.$t("save")),1)]),_:1})):fe("",!0),a.url?($(),q(Z,{key:1,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(e(be),{onClick:k[7]||(k[7]=de=>ie(a.url)),round:"",size:"tiny"},{default:t(()=>[L("DataURL")]),_:1})]),default:t(()=>[L(" "+r(C.$t("convertedImageDataUrlTooltip")),1)]),_:1})):fe("",!0)]),_:1})]),_:1})]),_:1}),C.isSingle?fe("",!0):($(),q(M,{key:0,align:"center",justify:"center",style:{padding:"0px 1em"}},{default:t(()=>[n(Y,{value:d.value,"onUpdate:value":k[8]||(k[8]=de=>d.value=de),tooltip:!1,step:1,min:1,max:a.length},null,8,["value","max"])]),_:1}))]),_:1}),n(e(be),{onClick:k[9]||(k[9]=de=>R(1)),disabled:!e(S),block:"",style:{"max-width":"1em",height:"9em"},class:Ge({pale:!e(S)}),title:C.$t("Next")},{icon:t(()=>[n(H,{size:"30"},{default:t(()=>[n(e(vo))]),_:1})]),_:1},8,["disabled","class","title"])]),_:1})]),_:1},8,["style"]),n(e(be),{onClick:k[10]||(k[10]=de=>{l("close")}),circle:"",size:"tiny",color:"silver",style:{position:"absolute",right:"-16px",top:"-8px",opacity:"0.7"},title:C.$t("close")},{icon:t(()=>[n(H,{size:"12"},{default:t(()=>[n(e(ho))]),_:1})]),_:1},8,["title"])]),_:1},512)]),_:1},8,["show"])}}}),Xl=Be(Yl,[["__scopeId","data-v-aa89739a"]]),Jl={key:0},ei={style:{"font-size":"smaller"}},ti={class:"log-table"},ni={class:"log-tr"},ai={class:"log-th"},oi={class:"log-th"},li={style:{"min-width":"7em"},class:"log-th"},ii={style:{"padding-left":"2em"},class:"log-th"},si={class:"log-td"},ri={class:"log-td"},ui={class:"log-td"},di={class:"log-td"},ci={style:{margin:"1px"}},pi=["href","download","onClick"],fi={key:0,style:{position:"relative"}},gi=["href","download"],mi=["href","download"],vi={key:0,style:{margin:"1px"}},hi=["href","download","onClick"],nn=99999,_i=100,yi=xe({__name:"status",props:{processing:{type:Boolean},status:{},interval:{}},emits:["all-zips-clicked","demand-zip-errors","demand-image"],setup(o,{emit:u}){const f=xt(),{t:a}=je(),l=fn(),s={W:160,H:80},i=o,p=u,A=x(!1),h=x([]),I=x(!1),d=x([]),b=x([]),m=x([0,0]),_=x([0,0]),g=x([0,0]),y=x([0,0]),T=x([0,0]),z=x([0,0]),U=x(0),P=x([0,0]),S=x(l.value.infoColor),v=x("#000000"),X=x("#000000"),J=x(0),ae=x(0),E=x(""),ce=x("00:00:00");x(""),x("");const V=x(void 0),F=x(!1),W=x(!0),ie=x(!1),R=ke(()=>F.value?he.value:re.value),oe=x("16em"),re=x(5),he=x(1e3),ue=x(!0),C=x(!1),k=kt({name:"",originalName:"",size:0,url:"",originalUrl:"",originalSize:0,dataUrl:"",index:-1,various:{shrinked:!1}}),H=x(null),M=x(null),O=x(),N=x();Fe(()=>{Ie(i.status,()=>se(),{deep:!1}),Ie([M,ue],()=>{if(!M.value||!ue.value)return;const{width:we,height:ze}=Un(M.value,{width:s.W,height:s.H});H.value.width=we,H.value.height=ze,H.value.style.width=we+"px",H.value.style.height=ze+"px",M.value instanceof HTMLImageElement?H.value.getContext("2d").drawImage(M.value,0,0,we,ze):(H.value.getContext("bitmaprenderer").transferFromImageBitmap(M.value),M.value=null,i.status.thumbnail=null)});let c=0;const B=()=>{if(c)return;const we=Date.now();ce.value="00:00:00",c=window.setInterval(()=>{const ze=(Date.now()-we)/1e3;ce.value=`${String(ze/3600|0).padStart(2,"0")}:${String(ze/60%60|0).padStart(2,"0")}:${String(ze%60|0).padStart(2,"0")}`},300)};B(),Ie(()=>i.processing,(we,ze)=>{we?(B(),h.value=[],A.value=!1,I.value=!1,d.value=[],b.value=[]):(clearInterval(c),se(),c=0),ue.value=!1,C.value=!0,i.processing||de()});const te=wo();let G;const ne=()=>{clearTimeout(G),G=setTimeout(()=>{if(!ue.value||ge)return;const we=O.value.$parent.$el.offsetHeight,ze=window.innerHeight-te.parent.parent.vnode.el.offsetHeight-8;oe.value=Math.max(we+ze,50)+"px"},100)};ne(),window.addEventListener("resize",ne);const me=new ResizeObserver(ne);me.observe(te.parent.parent.vnode.el);let ge=!1;_o(()=>{ge=!0,me.disconnect(),clearInterval(c),clearTimeout(G),clearTimeout(K),clearTimeout(Ne),window.removeEventListener("resize",ne),URL.revokeObjectURL(k.url),URL.revokeObjectURL(k.originalName)})}),Ie([()=>i.status.zips.length,()=>i.status.failedZips.length],()=>{const c=i.status;{d.value.length>c.zips.length&&(d.value.length=0);let B=0;const te=c.zips.length===1&&c.zippedTotalCount===c.length;for(let G=d.value.length;G<c.zips.length;G++){const ne=c.zips[G],me=c.baseZipName+(te?"":"-"+String(G+1).padStart(2,"0"))+".zip";B+=ne.size,d.value[G]={url:ne.url,size:ne.size,number:te?0:G+1,sizeByUnit:He(ne.size),name:me,count:ne.count,clicked:!1}}}{b.value.length>c.failedZips.length&&(b.value.length=0);let B=0;const te=c.failedZipDone&&c.failedZips.length===1;for(let G=b.value.length;G<c.failedZips.length;G++){const ne=c.failedZips[G],me=c.baseZipName+"-error"+(te?"":"-"+String(G+1).padStart(2,"0"))+".zip";B+=ne.size,b.value[G]={url:ne.url,size:ne.size,number:te?0:G+1,sizeByUnit:He(ne.size),name:me,count:ne.count,clicked:!1}}}});const Z=i.interval||100;let Y=!1,K=0;function se(){if(Y)return;if(K){Y=!0;return}K=window.setTimeout(()=>{K=0,Y&&(Y=!1,se())},Z);const c=i.status;A.value=c.length>=2,_.value[1]=_.value[0],_.value[0]=c.index,g.value[1]=g.value[0],g.value[0]=c.success,y.value[1]=y.value[0],y.value[0]=c.failure,T.value[1]=T.value[0],T.value[0]=c.done,z.value[1]=z.value[0],z.value[0]=c.converted,U.value=c.length,P.value[1]=P.value[0],P.value[0]=c.zippedTotalCount,J.value=c.inputTotalSize,ae.value=c.outputTotalSize;const B=ae.value-J.value;E.value=(B>=0?"+ ":"")+He(B);const te=ae.value/J.value,G=(256|Math.min(255,Math.max(0,te-1.5)*255|0)).toString(16).substring(1);v.value="#"+G+"0000";const ne=1024*1024,me=(256|Math.min(255,Math.max(0,B/1024/ne)*255|0)).toString(16).substring(1);if(X.value="#"+me+"0000",m.value[1]=m.value[0],m.value[0]=g.value[0]/U.value*100,ue.value||!i.processing){const ge=c.logs.slice(-nn);h.value.push(...ge);const we=h.value.length-nn;we>0&&h.value.splice(0,we),W.value&&ge.length&&Te(),h.value.length>he.value&&(he.value*=2)}c.logs.length=0,M.value=c.thumbnail,i.processing&&(S.value=y.value[0]?l.value.warningColor:l.value.infoColor),c.convertedImageUrl!==k.url&&(k.url=c.convertedImageUrl,k.name=c.convertedImageName,k.dataUrl=c.convertedImageDataUrl,k.size=c.convertedImageSize||c.outputTotalSize,k.originalSize=c.convertedImageOrgSize,k.originalName=c.convertedImageOrgName,k.index=c.convertedImageIndex,k.originalUrl=c.convertedImageOrgUrl,k.various={shrinked:c.convertedImageShrinked})}function de(){const c=i.status;S.value=i.status.success===i.status.length?l.value.successColor:l.value.errorColor,c.unconvertedFileCount>0,y.value[0]>0||(g.value[0],U.value),F.value||(F.value=!0)}const Le=ke(()=>[{key:"open",label:a("status.openFailedList"),icon:()=>Q(ye,()=>Q(hn)),onSelect(){_e()}},{key:"download",label:a("status.saveFailedList"),icon:()=>Q(ye,()=>Q(yo)),onSelect(){_e(!0)}},{key:"zip",label:`${a("status.zipFailedList")}`+(i.status.failedZipDone?`(✔${a("status.done")})`:""),icon:()=>Q(Xe,{show:I.value&&!i.status.failedZipDone,size:"small"},()=>Q(ye,()=>Q($t))),disabled:I.value,onSelect(c){return I.value=!0,p("demand-zip-errors"),!1}}]);function Me(c,B=!1){const{url:te,name:G}=c;if(B){const ne=document.createElement("a");ne.href=te,ne.download=G,ne.click()}c.clicked||(c.clicked=!0,i.processing||d.value.every(ne=>ne.clicked)&&p("all-zips-clicked"))}async function Ze(){if(A.value){if(d.value.length>=2&&!await new Promise((te,G)=>f.warning({title:a("Download"),content:a("status.confirmDownloadMessage",[d.value.length]),positiveText:"OK",negativeText:a("cancel"),onPositiveClick:()=>te(!0),onNegativeClick:()=>G()})))return;const c=d.value;for(const B of c)Me(B,!0)}else N.value.download()}function _e(c=!1){const B=new Blob([i.status.unconvertedListText],{type:"text/plain;charset=utf8"}),te=URL.createObjectURL(B),G=document.createElement("a");G.href=te,G.target="_blank",c&&(G.download=i.status.baseZipName+"-error.txt"),G.click()}let Ne=0,at=!1;function Te(c=!1){if(!at){if(Ne){at=!0;return}ut(()=>{!c&&(!F.value||!W.value)||(O.value.scrollTo({behavior:"instant",top:h.value.length*50}),Ne=window.setTimeout(()=>{Ne=0,at&&(at=!1,Te())},_i))})}}return(c,B)=>{const te=Ee,G=bo,ne=ko,me=mt,ge=nt,we=xo,ze=yn,zt=Ae,Xa=wn,Ja=Zt,eo=Wt,to=Nt,ot=be,no=jl,Qt=jt,ao=zo;return $(),q(ge,{vertical:"",justify:"center"},{default:t(()=>[n(te,{justify:"center",align:"center",wrap:!1,style:{"white-space":"nowrap"}},{default:t(()=>[n(te,{vertical:"",justify:"center",class:"left-column"},{default:t(()=>[n(G,{"tabular-nums":"",label:c.$t("status.elapsedTime")},{default:t(()=>[n(te,null,{default:t(()=>[L(r(e(ce)),1)]),_:1})]),_:1},8,["label"]),n(G,{"tabular-nums":"",label:c.$t("status.multiThreading")},{default:t(()=>[n(te,{style:pe({color:i.status.threads?"":"red",fontSize:"smaller"})},{default:t(()=>[L(r(i.status.threads?c.$rt("{n} @:threads",i.status.threads):c.$t("disabled")),1)]),_:1},8,["style"])]),_:1},8,["label"]),n(G,{"tabular-nums":"",label:c.$t("status.outputSettings")},{default:t(()=>[n(te,{vertical:"",justify:"end",style:{"font-size":"smaller","line-height":"1em"}},{default:t(()=>[w("div",null,r(c.$t("settings.imageType"))+": "+r(i.status.type),1),c.status.shrink?($(),le("div",Jl,[L(r(c.$t("status.Shrinking"))+": ",1),w("span",ei,r(c.status.shrink[0])+"×"+r(c.status.shrink[1]),1)])):fe("",!0),w("div",null,"Zip: "+r(i.status.zipSize)+"MB",1)]),_:1})]),_:1},8,["label"])]),_:1}),n(we,{type:"multiple-circle","stroke-width":1,percentage:[e(g)[0]/e(U)*100|0,e(_)[0]/e(U)*100|0],color:[e(l).successColor,e(S)],"rail-style":[{stroke:c.processing?e(l).successColor:e(S),opacity:.3},{stroke:e(S),opacity:.3}],class:"center-column"},{default:t(()=>[n(te,{vertical:"",align:"center",style:{"font-family":"v-mono","white-space":"nowrap"},wrap:!1,"wrap-item":!1},{default:t(()=>[w("span",{style:pe({color:e(y)[0]?e(S):c.processing?e(l).successColor:e(S)})},[n(ne,{duration:e(Z)*3|0,from:e(m)[1]|0,to:e(m)[0]|0,active:!0},null,8,["duration","from","to"]),L("% ")],4),n(ge,{wrap:!1,style:{border:"0px solid"}},{default:t(()=>[n(ge,{vertical:"",size:"small",justify:"end"},{default:t(()=>[n(ge,{justify:"end",wrap:!1},{default:t(()=>[e(y)[0]>0?($(),q(me,{key:0,trigger:"hover",duration:0,delay:0,style:pe({color:e(l).errorColor}),placement:"left"},{trigger:t(()=>[w("span",{style:pe({fontSize:"xx-small",color:e(l).errorColor,lineHeight:"0"})}," ("+r(e(y)[0].toLocaleString("en-us"))+") ",5)]),default:t(()=>[L(" "+r(c.$t("status.progressErrors"))+" ("+r(e(y)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):fe("",!0),n(me,{trigger:"hover",duration:0,delay:0,style:pe({color:e(l).infoColor}),placement:"left"},{trigger:t(()=>[w("span",{style:pe({fontSize:"xx-small",color:e(l).infoColor,lineHeight:"0"})},r(e(_)[0].toLocaleString("en-us")),5)]),default:t(()=>[L(" "+r(c.$t("status.progressStarted"))+" ("+r(e(_)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])]),_:1}),n(ge,{justify:"end"},{default:t(()=>[n(me,{trigger:"hover",duration:0,delay:0,style:pe({color:e(l).successColor}),placement:"bottom"},{trigger:t(()=>[w("span",{style:pe({fontSize:"medium",color:e(l).successColor})},[n(ne,{duration:e(Z)*3|0,from:e(g)[1],to:e(g)[0],active:!0,"show-separator":!0},null,8,["duration","from","to"])],4)]),default:t(()=>[L(" "+r(c.$t("status.progressSuccess"))+" ("+r(e(g)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])]),_:1})]),_:1}),n(ge,{align:"end",style:{"font-size":"medium",border:"0px solid"}},{default:t(()=>[n(me,{trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:t(()=>[L(" / "+r(e(U).toLocaleString("en-us")),1)]),default:t(()=>[L(" "+r(c.$t("status.progressTotal"))+" ("+r(e(U).toLocaleString("en-us"))+") ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["percentage","color","rail-style"]),n(te,{vertical:"",style:{height:"100%"},justify:"center"},{default:t(()=>[n(G,{"tabular-nums":"",label:c.$t("status.inputSize")},{default:t(()=>[n(te,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[L(r((e(J)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(G,{"tabular-nums":"",label:c.$t("status.outputSize")},{default:t(()=>[n(te,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[L(r((e(ae)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(G,{"tabular-nums":"",label:c.$t("status.outInRate")},{default:t(()=>[n(te,{vertical:"",align:"end",justify:"start",style:{"font-size":"xx-small","font-family":"v-mono","line-height":"50%"}},{default:t(()=>[w("span",{style:pe({color:e(v),fontSize:"larger"})},"× "+r((e(ae)/e(J)||1).toFixed(2)),5),w("span",{style:pe({color:e(X)})},"("+r(e(E))+")",5)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1}),n(eo,{"display-directive":"show","trigger-areas":["arrow","main"],"default-expanded-names":"log-collapse","expanded-names":e(ue)?["log-collapse"]:[],"onUpdate:expandedNames":B[7]||(B[7]=j=>{ue.value=!!String(j)})},{default:t(()=>[n(Ja,{title:"Log",name:"log-collapse",style:{"white-space":"nowrap"}},_n({header:t(()=>[n(ge,{align:"center",wrap:!1},{default:t(()=>[L(r(c.$t("status.log")),1),c.processing&&!e(ue)?($(),q(e(Xe),{key:0,size:16})):fe("",!0)]),_:1})]),default:t(()=>[n(ge,{wrap:!1,class:Ge({"log-container":1,"expand-log":e(F)}),align:"stretch",style:pe(e(F)?{height:e(oe),maxHeight:e(oe)}:{})},{default:t(()=>[n(e(vn),{ref_key:"scrollref",ref:O,"x-scrollable":!0,onMouseup:B[5]||(B[5]=j=>W.value=!1),onWheel:B[6]||(B[6]=j=>W.value=!1),trigger:"none",style:pe([{"z-index":"2","padding-right":"10px","min-height":"7em"},{maxHeight:e(oe)}]),size:50},{default:t(()=>[w("table",ti,[w("tr",ni,[w("th",ai,r(c.$t("status.table.core")),1),w("th",oi,r(c.$t("status.table.index")),1),w("th",li,r(c.$t("status.table.status")),1),w("th",ii,r(c.$t("status.table.details")),1)]),($(!0),le(Ce,null,Ye((e(ie)?e(h).filter(j=>!j.completed):e(h)).slice(-e(R)),({index:j,key:Qe,command:De,path:At,core:Yt})=>($(),le("tr",{key:Qe,class:"log-tr"},[w("td",si,r(Yt>=0?Yt+1:"-"),1),w("td",ri,r(j+1),1),w("td",ui,r(De),1),w("td",di,r(At),1)]))),128))])]),_:1},8,["style"]),n(ge,{style:pe([{"align-self":"center",position:"absolute","z-index":"0","margin-top":"0.5em",right:"0.1em","line-height":"0px"},{width:s.W+"px",height:s.H+"px"}]),justify:"center",align:"center"},{default:t(()=>[n(e(Xe),{size:"small",show:c.processing},{default:t(()=>[i.status.thumbnail===void 0?($(),q(Xa,{key:0,description:"EMPTY"})):fe("",!0),Et(w("canvas",{ref_key:"thumbcanvas",ref:H,width:"106",height:"80",style:pe({border:"1px solid gray",filter:c.processing?"":"opacity(0.35)"})},null,4),[[Ft,i.status.thumbnail!==void 0]])]),_:1},8,["show"])]),_:1},8,["style"])]),_:1},8,["class","style"])]),_:2},[e(ue)?{name:"header-extra",fn:t(()=>[n(ge,{align:"center",wrap:!1},{default:t(()=>[n(It,null,{default:t(()=>[n(ze,{key:"a",checked:e(ie),"onUpdate:checked":B[0]||(B[0]=j=>Ue(ie)?ie.value=j:null),size:"small",style:{"font-size":"smaller"},class:"hide-mobile"},{default:t(()=>[L(r(c.$t("status.filterSuccess")),1)]),_:1},8,["checked"]),e(F)?($(),q(ze,{key:"b",checked:e(W),"onUpdate:checked":[B[1]||(B[1]=j=>Ue(W)?W.value=j:null),B[2]||(B[2]=j=>j&&Te(!0))],size:"small",style:{"font-size":"smaller"}},{default:t(()=>[L(r(c.$t("status.autoScroll")),1)]),_:1},8,["checked"])):fe("",!0)]),_:1}),n(zt,{style:{"max-width":"30em"}},{trigger:t(()=>[n(ze,{size:"small",checked:e(F),"onUpdate:checked":[B[3]||(B[3]=j=>Ue(F)?F.value=j:null),B[4]||(B[4]=j=>{W.value=j,Te(!0)})],style:{"font-size":"smaller"}},{default:t(()=>[L(r(c.$t("status.expandLog")),1)]),_:1},8,["checked"])]),default:t(()=>[L(r(c.$t("status.expandLogTooltip")),1)]),_:1})]),_:1})]),key:"0"}:void 0]),1024)]),_:1},8,["expanded-names"]),n(to,{style:{margin:"0.2em"}}),n(ge,{wrap:!1,vertical:""},{default:t(()=>[n(ge,{justify:"center",align:"center",vertical:""},{default:t(()=>[n(We,null,{default:t(()=>[e(C)?e(C)&&c.status.success>0?($(),q(Xl,{key:1,ref_key:"imageViewer",ref:N,url:e(k).url,size:e(k).size,"original-url":e(k).originalUrl,"original-size":e(k).originalSize,name:e(k).name,originalName:e(k).originalName,length:i.status.success,index:e(k).index,"various-info":e(k).various,"is-single":!e(A),onDemandImage:B[9]||(B[9]=j=>p("demand-image",j)),onClose:B[10]||(B[10]=j=>C.value=!1)},null,8,["url","size","original-url","original-size","name","originalName","length","index","various-info","is-single"])):fe("",!0):($(),q(ot,{key:0,tertiary:"",type:"success",size:"small",disabled:!(c.status.success>0),onClick:B[8]||(B[8]=j=>C.value=!0)},{default:t(()=>[L(r(c.$t("status.browseConvertedImages")),1)]),_:1},8,["disabled"]))]),_:1})]),_:1}),n(ge,{justify:"center"},{default:t(()=>[e(A)?($(),q(ge,{key:0,vertical:"",align:"center"},{default:t(()=>[n(me,{placement:"left"},{trigger:t(()=>[n(we,{type:"line","indicator-placement":"inside",color:"lime","rail-color":"rgba(99, 255, 99, 0.5)","indicator-text-color":e(P)[0]===e(U)?"white":"green",processing:c.processing,percentage:e(P)[0]/e(U)*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[w("span",ci,r(e(P)[0]/e(U)*100|0)+"% "+r(c.$t("status.zipped"))+" ("+r(e(P)[0])+"/"+r(e(z)[0])+")",1)]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[L(" "+r(c.$t("status.zippingProgress"))+" ("+r(e(P)[0]/e(U)*100|0)+"%) ",1)]),_:1}),n(We,{name:"zipcontainer"},{default:t(()=>[e(d).length>=1||i.processing?($(),q(It,{key:0,name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[($(!0),le(Ce,null,Ye(e(d),(j,Qe)=>($(),le("span",{key:Qe},[n(me,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[w("a",{href:j.url,download:j.name,class:"in-button-anchor",onClick:De=>Me(j)},[n(ot,{class:"zip-button",size:"tiny",color:j.clicked?"#050":"lime","text-color":j.clicked?"gray":"white",onClick:Ve(De=>Me(j),["stop"]),round:""},{default:t(()=>[n(e(ye),{size:"tiny"},{default:t(()=>[n(e($t))]),_:1}),L("ZIP"+r(j.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,pi)]),default:t(()=>[w("div",{style:pe({color:e(l).successColor})},[w("div",null,"ZIP "+r(j.number||"")+" ("+r(c.$t("success"))+")",1),w("div",null,r(j.name),1),w("div",null,r(j.sizeByUnit),1),w("div",null,r(c.$rt("{n} @:files",j.count)),1)],4)]),_:2},1024)]))),128))]),_:1})):fe("",!0)]),_:1})]),_:1})):fe("",!0)]),_:1}),n(We,null,{default:t(()=>[i.processing?fe("",!0):($(),q(ge,{key:0,justify:"center",align:"center"},{default:t(()=>[n(me,{trigger:"hover",duration:0,delay:0,placement:"left",style:pe({color:"white",backgroundColor:e(l).successColor}),"arrow-style":{backgroundColor:e(l).successColor}},{trigger:t(()=>[n(We,{name:"save"},{default:t(()=>[e(g)[0]>0?($(),le("span",fi,[n(Qt,{value:e(A)?e(P)[0].toLocaleString("en-us"):i.status.type.replace(/\(.+\)/,""),color:e(l).successColorHover,offset:[-20,-3]},{default:t(()=>[n(ot,{size:"medium",onClick:Ze,color:e(l).successColor,round:""},{default:t(()=>[e(A)?($(),le(Ce,{key:0},[e(d).length?($(),le("a",{key:0,href:e(d)[0].url,download:e(d)[0].name,class:"in-button-anchor",onClick:B[11]||(B[11]=Ve(()=>{},["prevent"]))},[n(no),L(" × "+r(e(d).length)+" "+r(c.$t("save")),1)],8,gi)):fe("",!0)],64)):($(),le("a",{key:1,href:e(k).url,download:e(k).name,class:"in-button-anchor",onClick:B[12]||(B[12]=Ve(()=>{},["prevent"]))},[n(e(ye),{size:"tiny"},{default:t(()=>[n(e(bn))]),_:1}),L(" "+r(c.$t("save")),1)],8,mi))]),_:1},8,["color"])]),_:1},8,["value","color"])])):fe("",!0)]),_:1})]),default:t(()=>[c.status.length>=2?($(),le(Ce,{key:0},[w("div",null,r(e(a)("success"))+": "+r(e(P)[0].toLocaleString()),1),w("div",null,r(e(a)("status.totalSize"))+": "+r(e(He)(c.status.zippedTotalSize)),1),w("div",null,"ZIP × "+r(e(d).length),1),w("div",null,r(e(a)("status.saveAllZipsTooltip")),1)],64)):($(),le(Ce,{key:1},[L(r(c.$t("status.downloadConvertedImage",e(d).length)),1)],64))]),_:1},8,["style","arrow-style"]),!c.processing&&c.status.success!==e(U)?($(),q(ao,{key:0,options:e(Le),onSelect:B[13]||(B[13]=(j,Qe)=>{var De;return(De=e(Le).find(({key:At})=>j===At))==null?void 0:De.onSelect()}),"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start"},{default:t(()=>[n(me,{show:e(V),duration:0,delay:0,placement:"right",style:pe({color:"white",backgroundColor:e(l).errorColor}),"arrow-style":{backgroundColor:e(l).errorColor}},{trigger:t(()=>[n(Qt,{value:c.status.unconvertedFileCount.toLocaleString(),color:e(l).errorColorHover,offset:[-0,-3]},{default:t(()=>[n(ot,{size:"small",color:e(l).errorColor},{default:t(()=>[n(e(ye),{size:"medium",style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Ao))]),_:1})]),_:1},8,["color"])]),_:1},8,["value","color"])]),default:t(()=>[w("div",null,[w("div",null,r(e(a)("failed"))+": "+r(c.status.unconvertedFileCount.toLocaleString()),1),w("div",null,r(e(a)("status.totalSize"))+": "+r(e(He)(c.status.unconvertedTotalSize)),1)])]),_:1},8,["show","style","arrow-style"])]),_:1},8,["options"])):fe("",!0)]),_:1}))]),_:1}),n(We,{name:"zipcontainer"},{default:t(()=>[e(I)?($(),q(ge,{key:0,vertical:"",align:"center"},{default:t(()=>[n(me,{placement:"left"},{trigger:t(()=>[n(we,{type:"line","indicator-placement":"inside",color:"red","rail-color":"rgba(255, 0, 0, 0.5)","indicator-text-color":c.status.failedFileZippedCount===c.status.unconvertedFileCount?"white":"#500",processing:e(I)&&!c.status.failedZipDone&&!c.status.failedToCreateFailedZip,percentage:c.status.failedFileZippedCount/c.status.unconvertedFileCount*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[c.status.failedToCreateFailedZip?($(),le("div",{key:1,style:pe({color:e(l).errorColor})},r(c.$t("status.failureZippingFailedFiles")),5)):($(),le("span",vi,r(c.status.failedFileZippedCount/c.status.unconvertedFileCount*100|0)+"% "+r(c.$t("status.zipped"))+" ("+r(c.status.failedFileZippedCount)+"/"+r(c.status.unconvertedFileCount)+")",1))]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[L(" "+r(c.$t("status.zippingProgress"))+" ("+r(c.status.failedFileZippedCount/c.status.unconvertedFileCount*100|0)+"%) ",1)]),_:1}),n(It,{name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[($(!0),le(Ce,null,Ye(e(b),(j,Qe)=>($(),le("span",{key:Qe},[n(me,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[w("a",{href:j.url,download:j.name,class:"in-button-anchor",onClick:De=>Me(j)},[n(ot,{class:"zip-button",size:"tiny",color:j.clicked?"#551122":"#F00","text-color":j.clicked?"gray":"white",onClick:Ve(De=>Me(j),["stop"]),round:""},{default:t(()=>[n(e(ye),{size:"tiny"},{default:t(()=>[n(e(Io))]),_:1}),L("ZIP"+r(j.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,hi)]),default:t(()=>[w("div",{style:pe({color:e(l).errorColor})},[w("div",null,"ZIP "+r(j.number||"")+" ("+r(c.$t("failed"))+")",1),w("div",null,r(j.name),1),w("div",null,r(j.sizeByUnit),1),w("div",null,r(c.$rt("{n} @:files",j.count)),1)],4)]),_:2},1024)]))),128))]),_:1})]),_:1})):fe("",!0)]),_:1})]),_:1})]),_:1})}}}),wi=Be(yi,[["__scopeId","data-v-c1722c37"]]),bi=["innerHTML"],ki={style:{"flex-grow":"1"}},xi=xe({__name:"converter",props:_t({input:{},format:{},quality:{},retainExtension:{type:Boolean},maxZipSizeMB:{},threads:{}},{showNote:{type:Boolean},showNoteModifiers:{}}),emits:_t(["start","end"],["update:showNote"]),setup(o,{emit:u}){tt(Ke);const{t:f}=je(),a=xt(),l=To(),s=So(),i=10,p=navigator.hardwareConcurrency,A=typeof OffscreenCanvas=="function",h=100,I=16,d=o,b=$e(o,"showNote"),m=u,_=x(!1),g=x(!1),y=x(!1),T=x(0),z=x(!1),U=x(!1),P=x("initializing"),S=x("info"),v=kt(R());let X=!1,J=()=>{},ae=0,E=!1;Ie(()=>d.input,O=>{O!=null&&O.length&&re(O)}),Fe(async()=>{await H(),M()});async function ce(){let O=!0;if(ae>i*1e3&&!E&&v.success>0&&(O=!1,await new Promise(N=>{a.warning({title:f("confirmCloseDialogTitle"),autoFocus:!0,maskClosable:!1,positiveText:f("close"),negativeText:f("back"),onPositiveClick:()=>O=!0,onAfterLeave:N,content:f("confirmCloseDialog")})})),!O)return!1;s.destroyAll(),l.destroyAll(),z.value=!1,b.value=!1}function V(O){v.demandImage(O)}function F(){!g.value&&_.value?g.value=!0:ce()}function W(){re(d.input)}let ie=x(()=>{});function R(O){const N={logs:[],index:0,converted:0,success:0,failure:0,done:0,length:0,zippedTotalCount:0,zippingErrorCount:0,zippedTotalSize:0,processing:!1,zips:[],inputTotalSize:0,outputTotalSize:0,thumbnail:null,baseZipName:"testzipname",type:"image/any",startedTime:Date.now(),convertedImageDataUrl:"",convertedImageName:"",convertedImageUrl:"",convertedImageOrgUrl:"",convertedImageIndex:-1,convertedImageFileId:-1,convertedImageShrinked:!1,zipSize:d.maxZipSizeMB,shrink:D.multithread&&D.shrinkImage?[D.maxWidth,D.maxHeight]:void 0,unconvertedListText:"",failedZipDone:!1,failedZips:[],unconvertedFileCount:0,unconvertedTotalSize:0,failedFileZippedCount:0,failedToCreateFailedZip:!1,demandImage:()=>{}};return Object.assign(O||{},N)}function oe(){U.value=!1,URL.revokeObjectURL(v.convertedImageUrl),URL.revokeObjectURL(v.convertedImageOrgUrl);for(const O of v.zips)URL.revokeObjectURL(O.url);v.zips.length=0;for(const O of v.failedZips)URL.revokeObjectURL(O.url);v.failedZips.length=0,R(v),J(),J=()=>{},E=!1,y.value=!1,g.value=!1}async function re(O){if(_.value){a.error({title:"Busy",positiveText:"OK",content:f("interfered")});return}let N=C(O);R(v),oe();const Z={convertedImageBlob:null,convertedImageWidth:0,convertedImageHeight:0,convertedImageName:""};T.value++,z.value=!0,U.value=!0,_.value=!0,v.processing=!0,S.value="info",P.value=f("processing");const Y=new Set,K=d.format,se=d.quality,de=[...K.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),Le=k(K,se,N[0].webkitRelativePath);v.length=N.length,v.baseZipName=Le,v.type=K.replace(/image\//,"").toUpperCase()+(/jpe?g|webp/i.test(K)?" ("+se+")":""),v.threads=X?0:d.threads;const Me=Date.now();m("start");const Ze=N.concat();let _e,Ne;if({exception:Ne,callbackToGenerateFailedZips:_e,callbackToClearConverter:J}=!X&&d.threads>=2?await Cl({files:Ze,completedFileIdSet:Y,ConvStats:v,canceled:g,props:d,imageType:K,quality:se,outputExt:de,format:K,message:l,notification:s}):await Pl(Ze,Y,Z,d,g,v),Ne){let Te;switch(Ne.message){case"worker-load-error":Te=f("errMsgWorkerLoadError");break;default:Te="unexpected error"}a.error({title:"Error",autoFocus:!0,maskClosable:!1,closable:!1,content:()=>Q("div",[Q("p",Te),Q(be,{onClick(){location.reload()}},f("Reload"))])})}if(v.length,v.success===v.length?(S.value="success",P.value=f("completed")):(S.value="error",P.value=g.value?f("aborted"):f("incomplete")),Y.size!==N.length){const Te=he(N,Y);ie.value=()=>{!Te||!Te.length||_e(Te)}}_.value=!1,v.processing=!1,y.value=!0,ae=Date.now()-Me,m("end")}function he(O,N){const Z=[],Y=[];let K=0;for(const se of O)N.has(se._id)||(Z.push(se),Y.push(se.webkitRelativePath||se.relativePath||se.name),K+=se.size);return Y.length&&(v.unconvertedListText=Y.join(`
`),v.unconvertedFileCount=Z.length,v.unconvertedTotalSize=K),Z}let ue=0;function C(O){const N=[];for(const Z of O)Z.hasOwnProperty("_id")||Object.defineProperty(Z,"_id",{value:ue++}),N.push(Z);return N}function k(O,N,Z){var Le;const Y=new Date;O=O.replace(/^image\//,"").toLowerCase();const K=D.useFolderNameForZip&&((Le=String(Z).match(/^\/?([^/]+)\//))==null?void 0:Le[1])||"avif2jpg",se=`
    ${Y.getFullYear().toString().substring(2)}
    ${String((Y.getMonth()+1)*100+Y.getDate()).padStart(4,"0")}
    ${String(Y.getHours()*1e4+Y.getMinutes()*100+Y.getSeconds()).padStart(6,"0")}
    -
    ${O+(/jpe?g|webp/i.test(O)?N:"")}
  `.replace(/\s/g,"");return`${K}-${se}`.replace(/\s+/g," ")}async function H(){const O="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",N=document.createElement("img"),Z=Nn(N).then(()=>!0,()=>!1);N.src=O,await Z||a.warning({title:"Unsupported",positiveText:"OK",maskClosable:!1,content:f("avifUnsupported")})}function M(){(!A||p<2||!Promise.any)&&(X=!0),Se.value=X?0:Math.min(p,I)}return(O,N)=>{const Z=ye,Y=jt,K=Ae,se=Ee,de=Xe,Le=nt,Me=Ut;return $(),q(Le,{justify:"center"},{default:t(()=>{var Ze;return[!e(_)&&((Ze=d.input)!=null&&Ze.length)?($(),q(se,{key:0,justify:"center",align:"center"},{default:t(()=>[n(K,{trigger:"hover",placement:"top","keep-alive-on-hover":!1,duration:0,delay:50},{trigger:t(()=>{var _e;return[n(Y,{value:((_e=O.input)==null?void 0:_e.length)||0,offset:[-12,-5],color:"#99999966"},{default:t(()=>[n(e(be),{onClick:W,round:""},{icon:t(()=>[n(Z,{size:"1.5em",color:"#CCCCCC"},{default:t(()=>[n(e(Co))]),_:1})]),default:t(()=>[L(" "+r(e(f)("convertAgain")),1)]),_:1})]),_:1},8,["value"])]}),default:t(()=>{var _e;return[w("div",{innerHTML:e(f)("reconvertTip",(_e=d.input)==null?void 0:_e.length)},null,8,bi)]}),_:1})]),_:1})):fe("",!0),n(Me,{ref:"processingModal",show:e(z),"onUpdate:show":N[2]||(N[2]=_e=>Ue(z)?z.value=_e:null),closable:e(y),"close-on-esc":!1,preset:"dialog","display-directive":"show",onClick:N[3]||(N[3]=_e=>{e(s).destroyAll(),e(l).destroyAll()}),onMaskClick:N[4]||(N[4]=_e=>{e(s).destroyAll(),e(l).destroyAll()}),onClose:ce,onEsc:F,title:e(P),type:e(S),"mask-closable":!1,"on-after-leave":oe,class:"processing-dialog"},{default:t(()=>[n(Le,{vertical:"",style:{"flex-grow":"1"}},{default:t(()=>[w("div",ki,[e(U)?($(),q(wi,{key:e(T),processing:e(_),status:e(v),interval:h,onAllZipsClicked:N[0]||(N[0]=_e=>Ue(E)?E.value=!0:E=!0),onDemandZipErrors:e(ie),onDemandImage:V},null,8,["processing","status","onDemandZipErrors"])):fe("",!0)]),n(Le,{justify:"end"},{default:t(()=>[e(_)?($(),q(e(be),{key:0,disabled:e(g),ref:"cancelbutton",round:"",size:"large",onClick:N[1]||(N[1]=_e=>g.value=!0)},{default:t(()=>[n(de,{show:e(g)&&!e(y),size:"small"},{default:t(()=>[L(r(e(f)("cancel")),1)]),_:1},8,["show"])]),_:1},8,["disabled"])):e(y)?($(),q(e(be),{key:1,onClick:ce,round:"",size:"large",style:{"font-size":"small","margin-top":"1em"}},{default:t(()=>[L(r(e(f)("close")),1)]),_:1})):fe("",!0)]),_:1})]),_:1})]),_:1},8,["show","closable","title","type"])]}),_:1})}}}),zi="/avif2jpeg/dist/avif.png",Dn=o=>(Dt("data-v-06e4552c"),o=o(),Rt(),o),Ai={class:"container-1"},Ii=Dn(()=>w("span",null,"Drag & Drop",-1)),Ti={style:{position:"relative"}},Si={style:{position:"absolute","font-size":"0.5em",right:"-3.5em",bottom:"-1.5em","white-space":"nowrap"}},Ci={style:{color:"#666666"}},Li=Dn(()=>w("img",{src:zi,class:"avif"},null,-1)),$i=["innerHTML"],Ei={style:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","font-size":"xx-small","white-space":"nowrap"}},Fi=xe({__name:"droptarget",props:{forbidden:{type:Boolean},dropTarget:{}},emits:["drop"],setup(o,{emit:u}){tt(Ke);const f=o,a=u,l=Lo(),s=x(!1),i=x(0),p=x("");Fe(()=>{A(f.dropTarget||document)});function A(I){document.ondragstart=d=>d.preventDefault(),document.ondragover=d=>d.preventDefault(),I.ondrop=async d=>{var m;if(d.preventDefault(),s.value||f.forbidden)return;s.value=!0,i.value=0,p.value="";let b;try{const _=[...d.dataTransfer.items].map(g=>g.webkitGetAsEntry());l.start(),b=await h(_),l.finish()}catch{b=[...((m=d.dataTransfer)==null?void 0:m.files)??[]],l.error()}s.value&&(s.value=!1,a("drop",b))}}async function h(I,d){d=d||[];for(const b of I)if(b.isFile){const m=await new Promise(_=>b.file(g=>_(g)));Object.defineProperty(m,"webkitRelativePath",{value:b.fullPath}),d.push(m),i.value++}else if(b.isDirectory){p.value=b.fullPath;const m=b.createReader();do{const _=await new Promise(g=>m.readEntries(y=>g(y)));if(!_.length)break;await h(_,d)}while(!0)}return d}return(I,d)=>{const b=ye,m=mt,_=Ee,g=Ae,y=Ut;return $(),le("div",Ai,[n(g,{to:!1,"display-directive":"show",trigger:"hover",duration:0,delay:0,placement:"bottom-end"},{trigger:t(()=>[n(_,{vertical:"",class:"container-2"},{default:t(()=>[n(_,{align:"center",wrap:!1,class:"container-3"},{default:t(()=>[n(_,{vertical:"",align:"center",wrap:!1,style:{"font-weight":"bold","font-size":"1em","line-height":"90%","white-space":"nowrap"}},{default:t(()=>[Ii,w("span",Ti,[L(" AVIF Images "),w("span",Si,[L(" or "),n(m,{placement:"bottom-end"},{trigger:t(()=>[w("span",Ci,[n(b,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Ht))]),_:1}),L(" Folders ")])]),default:t(()=>[L(" You can drag and drop your local folders ")]),_:1})])])]),_:1}),n(_,null,{default:t(()=>[Li]),_:1})]),_:1})]),_:1})]),default:t(()=>[w("h3",{innerHTML:I.$t("droptarget"),style:{"max-width":"200px","text-align":"center","word-break":"keep-all","overflow-wrap":"break-word"}},null,8,$i)]),_:1}),n(y,{show:e(s),"onUpdate:show":d[0]||(d[0]=T=>Ue(s)?s.value=T:null),closable:!0,preset:"dialog",title:"Parsing dropped items.",type:"info","mask-closable":!1,"negative-text":I.$t("cancel")},{default:t(()=>[n(_,{vertical:"",align:"center"},{default:t(()=>[w("div",Ei,r(e(p)),1),w("div",null,"found "+r(e(i))+" files",1)]),_:1})]),_:1},8,["show","negative-text"])])}}}),Mi=Be(Fi,[["__scopeId","data-v-06e4552c"]]),Rn=o=>(Dt("data-v-ac519957"),o=o(),Rt(),o),Pi={class:"container-1"},Oi={class:"container-2"},Ui=["innerHTML"],Ni=["innerHTML"],Di={style:{"padding-left":"1em"}},Ri=Rn(()=>w("br",null,null,-1)),ji=Rn(()=>w("ul",null,[w("li",null,"Each extension must begin with a period. "),w("li",null,"Separate each extension with a comma. "),w("li",null,"Use alphameric characters.")],-1)),Bi=["innerHTML"],Zi=["accept"],Wi=xe({__name:"file-selector",props:_t({expanded:{type:Boolean},target:{},userExtensions:{},forbidden:{type:Boolean}},{disableNotifyingFolderSelect:{type:Boolean},disableNotifyingFolderSelectModifiers:{}}),emits:_t(["input","click","cancel","on-change-accept","update:target","update:userExtensions","update:expanded"],["update:disableNotifyingFolderSelect"]),setup(o,{emit:u}){const f=xt(),{t:a}=je(),l=tt(Ke),s=["avif_only","all_images","all_files","edit_type"],i={avif_only:"AVIF",all_images:"IMGS",all_files:"ALL",edit_type:"EDIT"},p=o,A=u,h=x(0),I=x(!1),d=x(!1),b=ke(()=>E(y.value)),m=ke(()=>T.value.split(",").every(W=>/^\s*(\.[\w\-]+)*\s*$/.test(W))?"success":"error"),_=ke(()=>!p.forbidden&&!d.value),g=ke({get:()=>p.expanded,set:F=>{A("update:expanded",F)}}),y=ke({get:()=>s.indexOf(p.target)>=0?p.target:s[0],set:F=>{A("update:target",F)}}),T=ke({get:()=>p.userExtensions,set:F=>{A("update:userExtensions",F)}}),z=$e(o,"disableNotifyingFolderSelect"),U=x(null),P=x(null),S=x(ae());Ie(y,F=>{A("on-change-accept",b.value)}),Fe(()=>{});async function v(F){if(A("click"),F===P.value&&!z.value){let W=!1;if(await new Promise(ie=>{f.info({title:a("loadfolderNotifyingTitle"),positiveText:a("Continue"),negativeText:a("Cancel"),onAfterLeave:()=>ie(W),onPositiveClick:()=>W=!0,content:()=>Q("div",[Q("p",{},a("loadfolderNotifyingMessageTerm1")),Q("div",[Q(pn,{width:250,style:{border:"3px solid gray"},src:"/avif2jpeg/dist//notification-folder.png"})]),Q("p",{},a("loadfolderNotifyingMessageTerm2")),Q("p",[Q(yn,{onUpdateChecked:R=>z.value=R,checked:z.value},()=>a("checkboxTextDontShowThis"))])])})}),!W){z.value=!1,A("cancel");return}}F.click()}function X(){A("cancel")}function J(F){const ie=[...F.target.files];U.value.value="",P.value.value="",V(ie)}function ae(){return"webkitdirectory"in document.createElement("input")}function E(F){switch(F){case"avif_only":return".avif, .webp";case"all_images":return".jpg, .jpeg, .jfif, .pjpeg, .pjp, .gif, .png, .webp, .avif, .bmp, .apng, .ico";case"edit_type":return T.value;case"all_files":default:return".*"}}async function ce(F){const W=String(b.value).toLowerCase().replace(/\s+/g,"");if(W&&b.value!==".*"){const ie=W.split(",");F=F.filter(R=>ie.includes(R.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),F.length||(await new Promise(R=>{f.error({title:"Images Not Found",positiveText:"OK",onAfterLeave:R,content:()=>Q("div",[Q(wn,{description:"NO IMAGES"}),`${a("noimage")}`,Q("br"),b.value])})}),X())}return F}async function V(F){d.value=!0,F=await ce(F),h.value=F.length,F.length>0&&A("input",F),d.value=!1}return(F,W)=>{const ie=ye,R=be,oe=Ae,re=Ee,he=$o,ue=Mo,C=mn,k=Eo,H=mt,M=Fo,O=Zt,N=Wt;return $(),le(Ce,null,[w("div",Pi,[w("div",Oi,[n(re,{vertical:"",align:"center",justify:"center",inline:""},{default:t(()=>[n(re,{align:"center",justify:"space-around",class:"main-buttons"},{default:t(()=>[n(re,{vertical:"",align:"stretch",justify:"center"},{default:t(()=>[n(oe,{to:!1,"display-directive":"show",show:e(l).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(l).LANDSCAPE.value?"right":"top",duration:0,delay:0,"z-index":10},{trigger:t(()=>[n(R,{disabled:!e(_),size:"large",onClick:W[0]||(W[0]=Z=>v(e(U))),round:"",style:{width:"100%","background-color":"white","font-size":"large"}},{icon:t(()=>[n(ie,{size:"large",color:"gray"},{default:t(()=>[n(e(kn))]),_:1})]),default:t(()=>[L(" "+r(F.$t("loadbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[w("div",{innerHTML:F.$t("loadbuttontooltip")},null,8,Ui)]),_:1},8,["show","placement"]),n(re,{align:"center",justify:"center",style:{color:"gray",margin:"0em"}},{default:t(()=>[L(r(F.$t("or")),1)]),_:1}),!e(l).IS_SP&&e(S)||e(l).SSR?($(),q(oe,{key:0,to:!1,"display-directive":"show",trigger:"hover",placement:"left","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:e(l).showTooltipsBeforeMounted.value},{trigger:t(()=>[n(R,{disabled:!e(_),size:"large",onClick:W[1]||(W[1]=Z=>v(e(P))),round:"",style:{width:"100%","background-color":"white","font-size":"large"}},{icon:t(()=>[n(ie,{size:"large",color:"gray"},{default:t(()=>[n(e(Ht))]),_:1})]),default:t(()=>[L(" "+r(F.$t("loadfolderbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[w("div",{innerHTML:F.$t("loadfoldertooltip")},null,8,Ni)]),_:1},8,["show"])):fe("",!0)]),_:1}),e(l).IS_SP?fe("",!0):($(),q(Mi,{key:0,onDrop:V,forbidden:!e(_),class:"drop-target"},null,8,["forbidden"]))]),_:1}),w("div",{class:Ge({"expand-ext-list-container":e(g)}),style:{"margin-top":"1em"}},[n(N,{"display-directive":"show","expanded-names":e(g)?["extItem"]:"","on-update:expanded-names":Z=>{g.value=!!(""+Z)},class:Ge({"expand-ext-list":e(g)})},{"header-extra":t(()=>[n(he,{type:"success",round:"",size:"tiny",style:{"margin-left":"0.2em","font-size":"8px",opacity:"0.7"}},{default:t(()=>[L(r(i[e(y)]),1)]),_:1})]),default:t(()=>[n(O,{title:F.$t("fileTypeRadioTitle"),name:"extItem"},{default:t(()=>[n(M,{value:e(y),"onUpdate:value":W[5]||(W[5]=Z=>Ue(y)?y.value=Z:null),name:"filetyperadios",size:"small"},{default:t(()=>[n(re,{vertical:"",style:{"padding-left":"1em"}},{default:t(()=>[($(),le(Ce,null,Ye(s,Z=>n(oe,{key:Z,trigger:"hover","keep-alive-on-hover":!1,"z-index":5,placement:"left",style:{"max-width":"200px"},duration:0,delay:0},{trigger:t(()=>[n(ue,{value:Z},{default:t(()=>[L(r(F.$t("fileTypeRadioOptions."+Z)),1)]),_:2},1032,["value"])]),default:t(()=>[L(" "+r(E(Z).replace(/,/g,", ")),1)]),_:2},1024)),64)),n(oe,{trigger:"hover","keep-alive-on-hover":!1,placement:"bottom-start",show:e(I),duration:0,delay:0},{trigger:t(()=>[w("div",Di,[n(H,{trigger:"manual",placement:"right-end",show:e(y)==="edit_type"&&e(m)!=="success"&&!!e(I)},{trigger:t(()=>[n(C,{value:e(T),"onUpdate:value":W[2]||(W[2]=Z=>Ue(T)?T.value=Z:null),status:e(m),disabled:e(y)!=="edit_type",onFocus:W[3]||(W[3]=Z=>I.value=!0),onBlur:W[4]||(W[4]=Z=>I.value=void 0),clearable:!0,size:"small",placeholder:".jpg, .gif, .png",spellcheck:"false"},null,8,["value","status","disabled"])]),default:t(()=>[n(k,{type:"error","show-icon":!0,title:"Validation error"},{default:t(()=>[L(" Please correct the extension list."),Ri,ji]),_:1})]),_:1},8,["show"])])]),default:t(()=>[w("span",{innerHTML:F.$t("editAcceptTypes")},null,8,Bi)]),_:1},8,["show"])]),_:1})]),_:1},8,["value"])]),_:1},8,["title"])]),_:1},8,["expanded-names","on-update:expanded-names","class"])],2)]),_:1})])]),w("input",{ref_key:"fileinput",ref:U,onInput:J,onCancel:X,type:"file",multiple:"",accept:e(b),style:{display:"none"}},null,40,Zi),w("input",{ref_key:"folderinput",ref:P,webkitdirectory:"",directory:"",onInput:J,onCancel:X,type:"file",style:{display:"none"}},null,544)],64)}}}),Hi=Be(Wi,[["__scopeId","data-v-ac519957"]]),Vi={style:{"white-space":"nowrap"}},qi=xe({__name:"settings-output",props:{quality:{},format:{}},emits:["update:format","update:quality"],setup(o,{emit:u}){const f=o,a=u,{t:l}=je(),s=tt(Ke),i=x([]),p=["image/jpeg","image/png","image/gif","image/bmp","image/avif","image/webp"],A=ke({get:()=>f.format,set:_=>{_=b(_),a("update:format",_)}}),h=ke({get:()=>f.quality,set:_=>{a("update:quality",_)}}),I=ke(()=>/png|bmp/i.test(A.value)),d=x(null);Fe(()=>{m()});function b(_){return i.value.indexOf(_)<0&&(_=i.value[0]),_}function m(){for(const _ of p)d.value.toDataURL(_).indexOf(_)>=0&&i.value.push(_);i.value.length===0&&i.value.push(p[0])}return(_,g)=>{const y=ye,T=xn,z=Ee,U=Ae,P=Bt,S=zn;return $(),le(Ce,null,[n(z,{justify:"center"},{default:t(()=>[n(z,{vertical:""},{default:t(()=>[n(U,{to:!1,"display-directive":"show",show:e(s).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(s).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(z,{align:"center"},{default:t(()=>[n(y,null,{default:t(()=>[n(e(kn))]),_:1}),L(r(e(l)("settings.imageType"))+": ",1),n(T,{value:A.value,"onUpdate:value":g[0]||(g[0]=v=>A.value=v),options:i.value.map(v=>({value:v,label:v})),"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),_:1})]),default:t(()=>[L(" "+r(e(l)("settings.imageTypeTooltip")),1)]),_:1},8,["show","placement"]),n(U,{to:!1,"display-directive":"show",show:e(s).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(s).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(z,{align:"center"},{default:t(()=>[n(z,{align:"start",wrap:!1},{default:t(()=>[n(y,null,{default:t(()=>[n(e(bn))]),_:1}),w("span",Vi,r(e(l)("settings.quality"))+":",1),n(z,{align:"center",justify:"space-between"},{default:t(()=>[n(P,{tooltip:!1,value:h.value,"onUpdate:value":g[1]||(g[1]=v=>h.value=v),step:1,style:{width:"120px"},disabled:I.value},null,8,["value","disabled"]),n(S,{onBlur:g[2]||(g[2]=v=>h.value??(h.value=0)),value:h.value,"onUpdate:value":g[3]||(g[3]=v=>h.value=v),step:"1",min:"0",max:"100",disabled:I.value,style:{width:"90px"},size:"small"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:t(()=>[L(" "+r(e(l)("settings.qualitytooltip")),1)]),_:1},8,["show","placement"])]),_:1})]),_:1}),w("canvas",{ref_key:"canvas",ref:d,width:"1",height:"1",style:{display:"none"}},null,512)],64)}}}),Gi={style:{width:"4em","text-align":"left"}},Ki={style:{width:"4em","text-align":"left"}},Ct=100,an=2e3,on=4096,ln=4096,Qi=100,Yi=100,Xi=xe({__name:"settings-adv",props:{expanded:{type:Boolean,required:!0},expandedModifiers:{},multithread:{type:Boolean,required:!0},multithreadModifiers:{},threadCount:{required:!0},threadCountModifiers:{},maxZipSize:{required:!0},maxZipSizeModifiers:{},retainExt:{type:Boolean,required:!0},retainExtModifiers:{},useFolderNameForZip:{type:Boolean,required:!0},useFolderNameForZipModifiers:{},shrinkImage:{type:Boolean,required:!0},shrinkImageModifiers:{},maxWidth:{required:!0},maxWidthModifiers:{},maxHeight:{required:!0},maxHeightModifiers:{}},emits:["update:expanded","update:multithread","update:threadCount","update:maxZipSize","update:retainExt","update:useFolderNameForZip","update:shrinkImage","update:maxWidth","update:maxHeight"],setup(o){const u={trigger:"hover",placement:"left",keepAliveOnHover:!1,duration:0,delay:0,style:"max-width: 20vw;"},f=$e(o,"expanded"),a=$e(o,"multithread"),l=$e(o,"threadCount"),s=$e(o,"maxZipSize"),i=$e(o,"retainExt"),p=$e(o,"useFolderNameForZip"),A=$e(o,"shrinkImage"),h=$e(o,"maxWidth"),I=$e(o,"maxHeight");Ie(Se,b=>{b>1||(a.value=!1),l.value>b&&(l.value=b)},{immediate:!0});const d=ke(()=>a.value&&Se.value>1);return Fe(()=>{Se.value>1&&typeof l.value>"u"&&(l.value=Math.max(Se.value,2))}),(b,m)=>{const _=ye,g=be,y=Po,T=nt,z=Bt,U=zn,P=Zt,S=Wt;return $(),q(T,{justify:"center"},{default:t(()=>[n(S,{"display-directive":"show","default-expanded-names":f.value?["collapitem"]:"","on-update:expanded-names":v=>f.value=!!String(v),"trigger-areas":["arrow","main"],class:Ge(["settings-body",f.value?"expand-adv-settings":""])},_n({arrow:t(()=>[n(_,{style:pe(f.value&&{top:"8px"})},{default:t(()=>[n(e(Oo))]),_:1},8,["style"]),n(_,null,{default:t(()=>[n(e(Uo))]),_:1})]),default:t(()=>[n(P,{title:b.$t("settings.advancedSettings"),name:"collapitem"},{default:t(()=>[n(T,{vertical:"",style:{"padding-left":"2em"}},{default:t(()=>[n(e(Ae),lt(it(u)),{trigger:t(()=>[n(T,{vertical:""},{default:t(()=>[n(T,{wrap:!1,align:"center"},{default:t(()=>[n(g,{text:"",disabled:!e(Se),style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:m[0]||(m[0]=v=>a.value=!a.value)},{icon:t(()=>[n(_,null,{default:t(()=>[n(e(No))]),_:1})]),default:t(()=>[L(" "+r(b.$t("settings.enableMultiThreads")),1)]),_:1},8,["disabled"]),n(y,{value:a.value,"onUpdate:value":m[1]||(m[1]=v=>a.value=v),disabled:!e(Se),size:"small"},null,8,["value","disabled"])]),_:1}),n(T,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(z,{value:l.value,"onUpdate:value":m[2]||(m[2]=v=>l.value=v),disabled:!e(Se)||!a.value,step:1,min:2,max:e(Se),style:{width:"120px"}},null,8,["value","disabled","max"]),n(U,{onBlur:m[3]||(m[3]=v=>l.value??(l.value=2)),size:"tiny",value:l.value,"onUpdate:value":m[4]||(m[4]=v=>l.value=v),disabled:!e(Se)||!a.value,step:1,min:2,max:e(Se),style:{width:"10em"}},{suffix:t(()=>[L(r(b.$t("threads",l.value)),1)]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[L(" "+r(b.$t("settings.multiThreadsTooltip")),1)]),_:1},16),n(e(Ae),lt(it(u)),{trigger:t(()=>[n(T,{vertical:""},{default:t(()=>[n(T,{wrap:!1,align:"center"},{default:t(()=>[n(g,{text:"",focusable:!1,style:{"white-space":"nowrap","font-size":"smaller"}},{icon:t(()=>[n(_,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Do))]),_:1})]),default:t(()=>[L(" "+r(b.$t("settings.maxZipFileSize"))+": ",1)]),_:1})]),_:1}),n(T,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(z,{tooltip:!1,value:s.value,"onUpdate:value":m[5]||(m[5]=v=>s.value=v),step:1,min:Ct,max:an,style:{width:"120px"}},null,8,["value"]),n(U,{onBlur:m[6]||(m[6]=v=>s.value??(s.value=Ct)),size:"tiny",value:s.value,"onUpdate:value":m[7]||(m[7]=v=>s.value=v),step:"1",min:Ct,max:an,style:{width:"10em"}},{suffix:t(()=>[L("(MB)")]),_:1},8,["value"])]),_:1})]),_:1})]),default:t(()=>[L(" "+r(b.$t("settings.maxZipFileSizeTooltip")),1)]),_:1},16),n(e(Ae),lt(it(u)),{trigger:t(()=>[n(T,{wrap:!1,align:"center"},{default:t(()=>[n(g,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:m[8]||(m[8]=v=>p.value=!p.value)},{icon:t(()=>[n(_,null,{default:t(()=>[n(e(Ht))]),_:1})]),default:t(()=>[L(" "+r(b.$t("settings.useFolderNameForZip")),1)]),_:1}),n(y,{value:p.value,"onUpdate:value":m[9]||(m[9]=v=>p.value=v),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[L(" "+r(b.$t("settings.useFolderNameForZipTooltip")),1)]),_:1},16),n(e(Ae),lt(it(u)),{trigger:t(()=>[n(T,{wrap:!1,align:"center"},{default:t(()=>[n(g,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:m[10]||(m[10]=v=>i.value=!i.value)},{icon:t(()=>[n(_,null,{default:t(()=>[n(e(hn))]),_:1})]),default:t(()=>[L(" "+r(b.$t("settings.retainOriginalExtension")),1)]),_:1}),n(y,{value:i.value,"onUpdate:value":m[11]||(m[11]=v=>i.value=v),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[L(" "+r(b.$t("settings.retainExtTooltip")),1)]),_:1},16),n(e(Ae),lt(it(u)),{trigger:t(()=>[n(T,{vertical:""},{default:t(()=>[n(T,{wrap:!1,align:"center"},{default:t(()=>[n(g,{disabled:!d.value,text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:m[12]||(m[12]=v=>A.value=!A.value)},{icon:t(()=>[n(_,null,{default:t(()=>[n(e(Ro))]),_:1})]),default:t(()=>[L(" "+r(b.$t("settings.shrinkImage")),1)]),_:1},8,["disabled"]),n(y,{disabled:!d.value,value:A.value,"onUpdate:value":m[13]||(m[13]=v=>A.value=v),size:"small"},null,8,["disabled","value"])]),_:1}),n(T,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(z,{value:h.value,"onUpdate:value":m[14]||(m[14]=v=>h.value=v),disabled:!A.value||!d.value,step:1,min:Qi,max:on,style:{width:"120px"}},null,8,["value","disabled"]),n(U,{size:"tiny",onBlur:m[15]||(m[15]=v=>h.value??(h.value=8)),value:h.value,"onUpdate:value":m[16]||(m[16]=v=>h.value=v),disabled:!A.value||!d.value,step:1,min:8,max:on*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[w("span",Gi,r(b.$t("width")),1)]),suffix:t(()=>[L("px")]),_:1},8,["value","disabled","max"])]),_:1}),n(T,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(z,{value:I.value,"onUpdate:value":m[17]||(m[17]=v=>I.value=v),disabled:!A.value||!d.value,step:1,min:Yi,max:ln,style:{width:"120px"}},null,8,["value","disabled"]),n(U,{size:"tiny",onBlur:m[18]||(m[18]=v=>I.value??(I.value=8)),value:I.value,"onUpdate:value":m[19]||(m[19]=v=>I.value=v),disabled:!A.value||!d.value,step:1,min:8,max:ln*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[w("span",Ki,r(b.$t("height")),1)]),suffix:t(()=>[L("px")]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[L(" "+r(b.$t("settings.shrinkImageTooltip")),1)]),_:1},16)]),_:1})]),_:1},8,["title"])]),_:2},[f.value?{name:"header-extra",fn:t(()=>[n(e(Ae),{"keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(g,{onClick:e(tl),size:"tiny",style:{"font-size":"xx-small"}},{default:t(()=>[L(r(b.$t("reset")),1)]),_:1},8,["onClick"])]),default:t(()=>[L(" "+r(b.$t("settings.resetButtonTooltip")),1)]),_:1})]),key:"0"}:void 0]),1032,["default-expanded-names","on-update:expanded-names","class"])]),_:1})}}}),Ji=Be(Xi,[["__scopeId","data-v-9f654063"]]),es={},ts={style:{color:"gray","padding-left":"20px"}},ns=["innerHTML"];function as(o,u){const f=Nt,a=Ee;return $(),q(a,{vertical:"",justify:"end"},{default:t(()=>[n(f,{style:{margin:"0px"}}),n(a,{justify:"center"},{default:t(()=>[w("ul",ts,[($(!0),le(Ce,null,Ye(o.$tm("descriptions"),l=>($(),le("li",{key:l,style:{"text-align":"left"},innerHTML:l},null,8,ns))),128))])]),_:1})]),_:1})}const os=Be(es,[["render",as]]),ls="modulepreload",is=function(o){return"/avif2jpeg/dist/"+o},sn={},ve=function(u,f,a){let l=Promise.resolve();if(f&&f.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),p=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));l=Promise.allSettled(f.map(A=>{if(A=is(A),A in sn)return;sn[A]=!0;const h=A.endsWith(".css"),I=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${I}`))return;const d=document.createElement("link");if(d.rel=h?"stylesheet":ls,h||(d.as="script"),d.crossOrigin="",d.href=A,p&&d.setAttribute("nonce",p),document.head.appendChild(d),h)return new Promise((b,m)=>{d.addEventListener("load",b),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${A}`)))})}))}function s(i){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=i,window.dispatchEvent(p),!p.defaultPrevented)throw i}return l.then(i=>{for(const p of i||[])p.status==="rejected"&&s(p.reason);return u().catch(s)})},jn="English",Bn="🇬🇧",Zn='AVIF to JPEG "Offline" Batch Converter',Wn="It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",Hn="Drag & Drop AVIF Images to Convert",Vn=["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data is sent to any server</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.'],qn="Select your language",Gn="Choose Target File Extentions",Kn={avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types",edit_type:"Edit File Extension List"},Qn="Input a list of comma separated file extentions to load.<br>e.g.) .jpg,.gif,.png",Yn="Load Images",Xn="Select your images from a dialog window.<br>*Multiple selection allowed.",Jn="Load a Whole Folder",ea=`Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>*It will show "Upload" button, but it actually doesn't upload anything to any server.`,ta="Converting images",na="Aborted",aa="Some files failed to convert",oa="Completed",la="Currently Busy",ia="No files with the extentions were found.",sa="Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",ra="Cancel",ua="Save",da="Close",ca="Open",pa="Re-convert",fa="Convert previous selected {n} @:files again",ga="File | Files",ma="thread | threads",va="You have not saved the converted images yet.",ha="Data have not been saved",_a="Open Source",ya="Open the converted image",wa="Copied to clipboard",ba="The converted image was copied to your clipboard as DataURL.",ka="Copy the converted image as DataURL",xa="Convert Again",za={expandLogTooltip:"Displaying the entire log may severely reduce conversion speed.",expandLog:"Show entire log",autoScroll:"Auto scroll",showOnlyErrors:"Show only errors",log:"Log",outInRate:"Out / In Ratio",elapsedTime:"Elapsed Time",multiThreading:"Multi-Threading",outputSettings:"Output Settings",totalSize:"Total Size",totalFiles:"Number of Files",confirmDownloadMessage:"It will start to download {0} zip files.",inputSize:"Input Size",outputSize:"Output Size",filterSuccess:"Hide completed item",progressErrors:"Failed items",progressStarted:"Started Items",progressTotal:"Total number of files",zippingProgress:"Zipping progress",zipped:"ZIPPED",openFailedList:"Open failed file list",zipFailedList:"Pack failed files into Zips",table:{index:"index",status:"status",core:"thread",details:"file"},saveFailedList:"Save failed file list",done:"done",convertedZips:"successfully completed ZIP",progressSuccess:"Completed Files",downloadConvertedImage:"Download Converted Image",failureZippingFailedFiles:"Failure while zipping the failed files.",browseConvertedImages:"Browse converted images",index:"Index",Original:"Original",Converted:"Converted",saveAllZipsTooltip:"Save all ZIP files",Shrinked:"Shrinked",Shrinking:"Shrinking"},Aa={maxZipFileSize:"Max zip file size",retainExtTooltip:"New extension will be appended to original extension",retainOriginalExtension:"Keep Original File Extension",qualitytooltip:"Set image quality for output",quality:"Image Quality",maxZipFileSizeTooltip:"Set smaller value if memory problems occur.",ignoreExtTooltip:'Try to load files that don"t have image file extension',ignoreFileExtensions:"Load All File Types",imageTypeTooltip:"Choose image format for output",imageType:"Image Type",advancedSettings:"Advanced Settings",enableMultiThreads:"Enable multi-threading",resetButtonTooltip:"Restore all settings to default.",multiThreadsTooltip:"Convert images in multi-threaded",shrinkImageTooltip:"If the image dimensions are larger than the specified value, shrink the image to that value",shrinkImage:"Shrink images that exceed the following dimensions",useFolderNameForZip:"Use dropped folder name for the zip file",useFolderNameForZipTooltip:"If a folder is dropped or selected, its name is used as the name of the output ZIP file"},Ia="Disabled",Ta="Download",Sa="Reset",Ca="Back",La="Failed",$a="Success",Ea="Previous version",Fa=`
Height`,Ma="Width",Pa="Don't show this message again",Oa="About the warning when selecting a folder",Ua="OK",Na={},Da="You must press the “Upload” button here to load all the images in the folder, but the data loaded by this application is never actually uploaded to the server.",Ra="Continue",ja="Cancel",Ba="When you select a folder instead of a file as input on a website, major web browsers will display a warning like the image below.",Za="This page may be an outdated version. Please reload the page.",Wa="Reload",Ha='If the conversion process frequently fails and an “Out of Memory” message appears, try reducing or disabling the number of "multi-threads" in the "Advanced Settings".',Va="Next",qa="Previous",Ga="or",Ka={lang:jn,flags:Bn,title:Zn,metaDescription:Wn,droptarget:Hn,descriptions:Vn,selectLanguage:qn,fileTypeRadioTitle:Gn,fileTypeRadioOptions:Kn,editAcceptTypes:Qn,loadbutton:Yn,loadbuttontooltip:Xn,loadfolderbutton:Jn,loadfoldertooltip:ea,processing:ta,aborted:na,incomplete:aa,completed:oa,interfered:la,noimage:ia,avifUnsupported:sa,cancel:ra,save:ua,close:da,open:ca,reconvert:pa,reconvertTip:fa,files:ga,threads:ma,confirmCloseDialog:va,confirmCloseDialogTitle:ha,githubOpenSource:_a,convertedImageUrlTooltip:ya,copiedDataURLDialogTitle:wa,copiedDataURLMessage:ba,convertedImageDataUrlTooltip:ka,convertAgain:xa,status:za,settings:Aa,disabled:Ia,Download:Ta,reset:Sa,back:Ca,failed:La,success:$a,previousVersion:Ea,height:Fa,width:Ma,checkboxTextDontShowThis:Pa,loadfolderNotifyingTitle:Oa,OK:Ua,loadfolderNotifyingMessage:Na,loadfolderNotifyingMessageTerm2:Da,Continue:Ra,Cancel:ja,loadfolderNotifyingMessageTerm1:Ba,errMsgWorkerLoadError:Za,Reload:Wa,annotationOutOfMemory:Ha,Next:Va,Prev:qa,or:Ga},ss=Object.freeze(Object.defineProperty({__proto__:null,Cancel:ja,Continue:Ra,Download:Ta,Next:Va,OK:Ua,Prev:qa,Reload:Wa,aborted:na,annotationOutOfMemory:Ha,avifUnsupported:sa,back:Ca,cancel:ra,checkboxTextDontShowThis:Pa,close:da,completed:oa,confirmCloseDialog:va,confirmCloseDialogTitle:ha,convertAgain:xa,convertedImageDataUrlTooltip:ka,convertedImageUrlTooltip:ya,copiedDataURLDialogTitle:wa,copiedDataURLMessage:ba,default:Ka,descriptions:Vn,disabled:Ia,droptarget:Hn,editAcceptTypes:Qn,errMsgWorkerLoadError:Za,failed:La,fileTypeRadioOptions:Kn,fileTypeRadioTitle:Gn,files:ga,flags:Bn,githubOpenSource:_a,height:Fa,incomplete:aa,interfered:la,lang:jn,loadbutton:Yn,loadbuttontooltip:Xn,loadfolderNotifyingMessage:Na,loadfolderNotifyingMessageTerm1:Ba,loadfolderNotifyingMessageTerm2:Da,loadfolderNotifyingTitle:Oa,loadfolderbutton:Jn,loadfoldertooltip:ea,metaDescription:Wn,noimage:ia,open:ca,or:Ga,previousVersion:Ea,processing:ta,reconvert:pa,reconvertTip:fa,reset:Sa,save:ua,selectLanguage:qn,settings:Aa,status:za,success:$a,threads:ma,title:Zn,width:Ma},Symbol.toStringTag,{value:"Module"})),rs="Arabic",us="German",ds="English",cs="Spanish",ps="Finnish",fs="French",gs="Hindi",ms="Indonesian",vs="Italian",hs="Japanese",_s="Korean",ys="Dutch",ws="Polish",bs="Portuguese",ks="Russian",xs="Turkish",zs="Ukrainian",As="Chinese",Is={ar:rs,de:us,en:ds,es:cs,fi:ps,fr:fs,hi:gs,id:ms,it:vs,ja:hs,ko:_s,nl:ys,pl:ws,pt:bs,ru:ks,tr:xs,uk:zs,"zh-hant":"Chinese(hant)",zh:As},wt=[],Qa={en:Ka},Gt={},rn=Object.assign({"./locales/ar.json":()=>ve(()=>import("./ar-sk2I9mIO.js"),[]),"./locales/de.json":()=>ve(()=>import("./de-B_bGs0B2.js"),[]),"./locales/en.json":()=>ve(()=>Promise.resolve().then(()=>ss),void 0),"./locales/es.json":()=>ve(()=>import("./es-UqmDBXBO.js"),[]),"./locales/fi.json":()=>ve(()=>import("./fi-D73WC1Dt.js"),[]),"./locales/fr.json":()=>ve(()=>import("./fr-DrmnWFF6.js"),[]),"./locales/hi.json":()=>ve(()=>import("./hi-B8uOKWS6.js"),[]),"./locales/id.json":()=>ve(()=>import("./id-C_kLkSFX.js"),[]),"./locales/it.json":()=>ve(()=>import("./it-BpFDZGwb.js"),[]),"./locales/ja.json":()=>ve(()=>import("./ja-DGHHjXu-.js"),[]),"./locales/ko.json":()=>ve(()=>import("./ko-BsjNYHSq.js"),[]),"./locales/nl.json":()=>ve(()=>import("./nl-8pW3vktV.js"),[]),"./locales/pl.json":()=>ve(()=>import("./pl-DBjc1l44.js"),[]),"./locales/pt.json":()=>ve(()=>import("./pt-Br582fsC.js"),[]),"./locales/ru.json":()=>ve(()=>import("./ru-BS7LOcUf.js"),[]),"./locales/tr.json":()=>ve(()=>import("./tr-H_AveHJw.js"),[]),"./locales/uk.json":()=>ve(()=>import("./uk-O1m4BZ5A.js"),[]),"./locales/zh-hant.json":()=>ve(()=>import("./zh-hant-DTNX0nZk.js"),[]),"./locales/zh.json":()=>ve(()=>import("./zh-CYvlslHL.js"),[])});var un;for(const o in rn){const u=(un=o.match(/\/([a-z]{2}(?:-[a-z]+)?)\.json$/i))==null?void 0:un[1];u&&(wt.push(u),!(u in Qa)&&(Gt[u]=rn[o]))}let Ot=Ss();Ot in Gt||(Ot="en");const bt=jo({legacy:!1,globalInjection:!0,locale:Ot,fallbackLocale:"en",messages:Qa,warnHtmlMessage:!1,missingWarn:!1,fallbackWarn:!1});async function Ts(o){if(bt.global.availableLocales.indexOf(o)>=0)return;const u=await Gt[o]();bt.global.setLocaleMessage(o,u),await ut()}function Ss(){const o=location.pathname;return String(o.match(/[^/]+(?=\/?$)/)||"").toLowerCase()}const Cs=["innerHTML"],Ls=xe({__name:"switch-lang",emits:["lang-ready","lang-change"],async setup(o,{emit:u}){let f,a;const l=tt(Ke),s=cn(),{locale:i,t:p}=je(),A=u,h=Object.entries(Is).map(([g,y])=>({label:y,value:g}));h.sort((g,y)=>{const T=g.label,z=y.label;return T>z?1:T<z?-1:0}),Fe(()=>{s.afterEach((g,y,T)=>{d(),l.switchToolTipVisibility()})}),gn(async()=>{}),[f,a]=Bo(()=>d()),await f,a();async function I(g){(g!==i.value||bt.global.availableLocales.indexOf(g)===-1)&&(A("lang-change",g),await Ts(g),i.value=g,document.title=p("title"),await ut()),A("lang-ready",g)}async function d(){const g=s.currentRoute.value.path||"",y=String(g.match(new RegExp("(?<=^\\/)[^/]+"))||"");y&&wt.includes(y)?(await I(y),i.value=y):await b()}async function b(){const g=m().toLowerCase(),y=g.split(/[-_]/)[0];if(wt.includes(y)){let T=y;if(y==="zh")switch(g){case"zh-hant":case"zh-mo":case"zh-hk":case"zh-tw":T="zh-hant"}await I(T)}}function m(){const g=window.navigator;return g.language||g.userLanguage||g.browserLanguage}function _(g){s.push("/"+g+"/")}return(g,y)=>{const T=ye,z=xn,U=Ae;return $(),q(U,{to:!1,"display-directive":"show",show:e(l).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(l).LANDSCAPE.value?"left":"bottom",duration:0,delay:50},{trigger:t(()=>[n(z,{ref:"langselect",size:"tiny",style:{width:"100%"},"consistent-menu-width":!1,options:e(h),"_v-model:value":"locale",value:e(i),"onUpdate:value":_},{arrow:t(()=>[n(T,null,{default:t(()=>[n(e(Zo))]),_:1})]),_:1},8,["options","value"])]),default:t(()=>[w("div",{innerHTML:g.$t("selectLanguage")},null,8,Cs)]),_:1},8,["show","placement"])}}}),$s=w("span",null,"CONVERT TO👇",-1),Ke=Symbol("global variables"),Es=xe({__name:"Avif2Jpeg",emits:["ready"],setup(o,{emit:u}){je();const f=u,a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),l=x(null);x(0);let s=x(void 0);const i=x(!0),p=x(!1),A=x(!1),h=x(!1),I=x(!1);Wo(Ke,{showTooltipsBeforeMounted:s,LANDSCAPE:i,IS_SP:a,switchToolTipVisibility:y,SSR:!1}),Fe(()=>{T(),window.addEventListener("resize",T),y(),setTimeout(()=>A.value=!0,3e3)});const d=200;let b=0,m=!0;function _(){h.value=!1,b=Date.now()}function g(){const P=m?0:Math.max(0,d-(Date.now()-b));m=!1,setTimeout(()=>h.value=!0,P),f("ready")}async function y(){}function T(){const P=document.body.clientWidth,S=document.body.clientHeight;i.value=P*.75>S||P>900}function z(P){l.value=P}function U(P){I.value=P}return(P,S)=>{const v=nt,X=Ee,J=ye,ae=mt;return $(),q(v,{vertical:"",align:"stretch",class:"app"},{default:t(()=>[n(fl,null,{"lang-switch":t(()=>[($(),q(Ho,null,{default:t(()=>[n(Ls,{onLangChange:_,onLangReady:g})]),_:1}))]),_:1}),n(We,{name:"fade"},{default:t(()=>[e(h)?($(),q(v,{key:0,vertical:"",align:"stretch",justify:"space-between",style:{height:"100%"}},{default:t(()=>[n(v,{class:"row-spacer"}),n(vl),n(X,{justify:"center"},{default:t(()=>[n(Hi,{expanded:e(D).expandExtButtons,"onUpdate:expanded":S[0]||(S[0]=E=>e(D).expandExtButtons=E),target:e(D).acceptTypeValue,"onUpdate:target":S[1]||(S[1]=E=>e(D).acceptTypeValue=E),userExtensions:e(D).editedAcceptTypes,"onUpdate:userExtensions":S[2]||(S[2]=E=>e(D).editedAcceptTypes=E),"disable-notifying-folder-select":e(D).disableNotifyingFolderSelect,"onUpdate:disableNotifyingFolderSelect":S[3]||(S[3]=E=>e(D).disableNotifyingFolderSelect=E),forbidden:e(p),onInput:z,onClick:S[4]||(S[4]=E=>U(!0)),onCancel:S[5]||(S[5]=E=>U(!1))},null,8,["expanded","target","userExtensions","disable-notifying-folder-select","forbidden"])]),_:1}),n(xi,{input:e(l),format:e(D).imageFormat,quality:e(D).imageQuality,"retain-extension":e(D).retainExtension,maxZipSizeMB:e(D).maxZipSizeMB,threads:e(D).multithread?e(D).threadCount:0,"show-note":e(I),"onUpdate:showNote":S[6]||(S[6]=E=>Ue(I)?I.value=E:null),onStart:S[7]||(S[7]=E=>p.value=!0),onEnd:S[8]||(S[8]=E=>p.value=!1),"_:multi-thread-count":"val => availableThreadCount = val"},null,8,["input","format","quality","retain-extension","maxZipSizeMB","threads","show-note"]),n(X,{vertical:"",align:"center"},{default:t(()=>[n(ae,{trigger:"manual",placement:"top","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(J,{size:"5vh",color:"#DADADA",style:{margin:"0px"}},{default:t(()=>[n(e(Vo))]),_:1})]),default:t(()=>[$s]),_:1})]),_:1}),n(X,{vertical:"",align:"center"},{default:t(()=>[n(qi,{format:e(D).imageFormat,"onUpdate:format":S[9]||(S[9]=E=>e(D).imageFormat=E),quality:e(D).imageQuality,"onUpdate:quality":S[10]||(S[10]=E=>e(D).imageQuality=E)},null,8,["format","quality"]),n(Ji,{"retain-ext":e(D).retainExtension,"onUpdate:retainExt":S[11]||(S[11]=E=>e(D).retainExtension=E),"use-folder-name-for-zip":e(D).useFolderNameForZip,"onUpdate:useFolderNameForZip":S[12]||(S[12]=E=>e(D).useFolderNameForZip=E),"max-zip-size":e(D).maxZipSizeMB,"onUpdate:maxZipSize":S[13]||(S[13]=E=>e(D).maxZipSizeMB=E),expanded:e(D).expandAdvSettings,"onUpdate:expanded":S[14]||(S[14]=E=>e(D).expandAdvSettings=E),multithread:e(D).multithread,"onUpdate:multithread":S[15]||(S[15]=E=>e(D).multithread=E),"thread-count":e(D).threadCount,"onUpdate:threadCount":S[16]||(S[16]=E=>e(D).threadCount=E),"_:thread-max":"availableThreadCount","shrink-image":e(D).shrinkImage,"onUpdate:shrinkImage":S[17]||(S[17]=E=>e(D).shrinkImage=E),"max-width":e(D).maxWidth,"onUpdate:maxWidth":S[18]||(S[18]=E=>e(D).maxWidth=E),"max-height":e(D).maxHeight,"onUpdate:maxHeight":S[19]||(S[19]=E=>e(D).maxHeight=E)},null,8,["retain-ext","use-folder-name-for-zip","max-zip-size","expanded","multithread","thread-count","shrink-image","max-width","max-height"])]),_:1}),n(os)]),_:1})):fe("",!0)]),_:1})]),_:1})}}}),Kt=xe({__name:"App",setup(o){const u={Statistic:{valueFontSize:"1em"},Popover:{borderRadius:"0.4em",boxShadow:"2px 2px 5px 0px #555555"},Tooltip:{},Image:{toolbarColor:"#00000099"}},f=x(!0);return Fe(()=>{f.value=!1}),(a,l)=>{const s=Go,i=Ko,p=Qo,A=Yo,h=Xo,I=qo;return $(),q(I,{"theme-overrides":u,style:{width:"100%",height:"100%"}},{default:t(()=>[n(h,null,{default:t(()=>[n(A,{placement:"top-right",max:20},{default:t(()=>[n(p,{placement:"top-left",closable:!0,max:50},{default:t(()=>[n(i,null,{default:t(()=>[n(s,null,{default:t(()=>[n(Es,{class:Ge({hide:e(f)})},null,8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),Ya=[{path:"/",name:"Home",component:Kt}];for(const o of wt)Ya.push({path:"/"+o+"/",strict:!0,name:o,component:Kt});Jo(Kt,{routes:Ya,base:"/avif2jpeg/dist/"},({app:o,router:u,routes:f,isClient:a,initialState:l})=>{o.use(bt)});
