var ea=Object.defineProperty;var ta=(l,r,s)=>r in l?ea(l,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[r]=s;var Qe=(l,r,s)=>ta(l,typeof r!="symbol"?r+"":r,s);import{r as w,a as bt,d as ye,i as Ge,c as ae,o as F,_ as xe,u as e,w as t,b as C,t as d,e as y,f as n,g as Te,N as _e,L as na,h as oa,j as G,k as Ue,l as Ke,m as ee,n as aa,p as la,q as sa,s as ve,v as un,x as cn,y as dn,z as ke,A as we,B as Se,C as Ft,D as He,E as We,F as ia,G as ra,H as Ne,I as zt,J as ce,K as Xe,T as Ye,M as pn,O as je,P as fn,Q as st,R as kt,S as Je,U as ft,V as ua,W as $e,X as et,Y as ca,Z as Gt,$ as Kt,a0 as gn,a1 as da,a2 as xt,a3 as pa,a4 as fa,a5 as Ut,a6 as ga,a7 as Yt,a8 as it,a9 as ma,aa as Me,ab as mn,ac as va,ad as ha,ae as tt,af as Ce,ag as _a,ah as gt,ai as Tt,aj as wa,ak as Re,al as ya,am as vn,an as Pt,ao as hn,ap as ba,aq as Qt,ar as _n,as as za,at as ka,au as xa,av as wn,aw as Ta,ax as Ia,ay as yn,az as Sa,aA as Mt,aB as bn,aC as Aa,aD as La,aE as zn,aF as Ca,aG as nt,aH as ot,aI as $a,aJ as Ea,aK as Fa,aL as Pa,aM as Oa,aN as Ua,aO as Ma,aP as Ra,aQ as Da,aR as Ba,aS as Na,aT as ja,aU as Za,aV as Ha,aW as Va,aX as Wa,aY as qa,aZ as Ga}from"./vendor-BgqkfPiU.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}})();const Oe=w(navigator.hardwareConcurrency?Math.min(navigator.hardwareConcurrency,12):0),at={threadCount:{min:2,max:Math.max(2,Oe.value)}},Ka={imageFormat:"image/jpeg",imageQuality:90,expandExtButtons:!1,acceptTypeValue:void 0,editedAcceptTypes:"",expandAdvSettings:!1,retainExtension:!1,maxZipSizeMB:1e3,useFolderNameForZip:!1,multithread:!0,threadCount:Oe.value,shrinkImage:!1,maxWidth:4096,maxHeight:4096,disableNotifyingFolderSelect:!1,changeLogCheckedDate:0},N=bt(kn({}));function Ya(){kn(N)}function kn(l){return Object.assign(l,Ka)}const xn="avif2jpeg",At=JSON.parse(localStorage.getItem(xn)||"{}");for(const l in N)if(At.hasOwnProperty(l)&&At[l]!==void 0){let r=At[l];at.hasOwnProperty(l)&&(at[l].min>r&&(r=at[l].min),at[l].max<r&&(r=at[l].max)),N[l]=r}const Tn=()=>{const l={};for(const r in N)l[r]=N[r];localStorage.setItem(xn,JSON.stringify(l)),console.log(N.changeLogCheckedDate)};window.addEventListener("beforeunload",Tn);function Qa(){localStorage.clear(),window.removeEventListener("beforeunload",Tn)}const Xa={href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-weight":"bolder"}},Ja=ye({__name:"github",setup(l){const r=Ge(Ve);return(s,i)=>{const a=_e,o=Te,u=xe;return F(),ae(u,{to:!1,"display-directive":"show",show:e(r).showTooltipsBeforeMounted.value,trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",Xa,[n(o,{align:"center",size:0},{default:t(()=>[n(a,{size:"1.2em"},{default:t(()=>[n(e(na))]),_:1}),i[0]||(i[0]=C("GitHub "))]),_:1})])]),default:t(()=>[C(" "+d(s.$t("githubOpenSource")),1)]),_:1},8,["show"])}}}),el=1,tl=10,nl=24,ol="",ct={major:el,minor:tl,build:nl,tag:ol},al={style:{"font-size":"x-small","user-select":"none"}},ll=ye({__name:"version",setup(l){const r=["0.0.118"],s=`${ct.major}.${ct.minor}.${ct.build}${ct.tag}`,i=r.map(m=>({label:`v${m}`,key:m,value:m}));function a(m){const{key:p,label:g}=m,h=u(p),b=G("a",{href:h},g),z=G("div",null,b);return G("div",null,z)}function o(m){location.href=u(m)}function u(m){return`/avif2jpeg/old/${m}/`}return(m,p)=>{const g=oa;return F(),ae(g,{"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start",options:e(i),"render-label":a,"onUpdate:value":o},{header:t(()=>[y("span",al,d(m.$t("previousVersion")),1)]),default:t(()=>[y("span",{style:{cursor:"pointer"}},"v"+d(s))]),_:1},8,["options"])}}}),sl={key:0,style:{color:"red"}},il=["innerHTML"],rl=ye({__name:"changelog",props:{url:{}},setup(l){const r=l,s=w("fetching..."),i=w(!1);Ue(()=>o(r.url));let a=0;async function o(m){const p=await fetch(m,{headers:{Accept:"application/vnd.github.v3+json"}}).then(g=>g.ok?g.text():null);s.value="",p&&(console.log(p),s.value=p.replace(/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2}) \+\d+$/mg,(g,h)=>{const b=new Date(g),z=b.getTime(),v=b.toLocaleString();let f="";return z>N.changeLogCheckedDate&&(i.value=!0,z>a&&(a=z),f="update"),`<span class="date ${f}">${v}</span>`}))}function u(){a>N.changeLogCheckedDate&&(N.changeLogCheckedDate=a),i.value=!1}return(m,p)=>{const g=_e,h=Te,b=Ke;return F(),ae(b,{trigger:"click",placement:"bottom","arrow-point-to-center":"","onUpdate:show":u,style:{"margin-left":"-1em","max-width":"80%","white-space":"initial"}},{trigger:t(()=>[n(h,{align:"center",size:1,style:{cursor:"pointer"}},{default:t(()=>[n(g,{component:e(aa),size:"1.5em",color:e(i)?"blue":"silver",style:{transition:"color 0.5s"}},null,8,["component","color"]),C(" "+d(m.$t("changelog")),1)]),_:1})]),default:t(()=>[e(s)?(F(),ee("pre",{key:1,innerHTML:e(s),class:"commits"},null,8,il)):(F(),ee("div",sl," connection error "))]),_:1})}}}),ul=ye({__name:"header",setup(l){const r=la();return(s,i)=>{const a=sa("router-link"),o=Te,u=cn;return F(),ae(o,{vertical:"",justify:"start"},{default:t(()=>[n(o,{justify:"space-between",align:"center",wrap:!1},{default:t(()=>[n(o,{align:"center"},{default:t(()=>[n(Ja),n(rl,{url:"/avif2jpeg/dist/commits.txt"}),n(ll),n(o,{style:{"font-size":"1em"}},{default:t(()=>[e(r).path!=="/"?(F(),ae(a,{key:0,to:"/",style:{color:"black"}},{default:t(()=>i[0]||(i[0]=[C("HOME")])),_:1})):ve("",!0)]),_:1})]),_:1}),n(o,{align:"end"},{default:t(()=>[un(s.$slots,"lang-switch")]),_:3})]),_:3}),n(u,{style:{margin:"0px"}})]),_:3})}}}),cl={style:{padding:"0px",margin:"0px","text-align":"center"}},dl=ye({__name:"title",setup(l){const r=dn();return ke(()=>{const s=r.currentRoute.value.path||"";return!String(s.match(new RegExp("(?<=^\\/)[^/]+"))||"")}),(s,i)=>{const a=Te;return F(),ae(a,{align:"center",justify:"center",style:{margin:"0px"}},{default:t(()=>[y("h1",cl,d(s.$t("title")),1)]),_:1})}}}),Xt=new Set,pl=new Set,fl=new Set,mt=new Map;function gl(l){const r=mt.get(l);if(!r){console.warn("the worker was already released.",l.id);return}mt.delete(l),r(),dt==null||dt(),dt=null}function ml(){for(const l of mt.keys())gl(l)}let dt=null;function In(){ml();for(const l of Xt)l.onmessage=null,l.terminate();Xt.clear(),pl.clear(),fl.clear(),mt.clear()}function vl(l){return new Worker("/avif2jpeg/dist/assets/worker.zip-BpG-kYFu.js",{name:l==null?void 0:l.name})}function hl(l){return new Worker("/avif2jpeg/dist/assets/worker.loader-DUC36Gvq.js",{name:l==null?void 0:l.name})}const _l=1e3*10;let qe;const De=new Map,vt=new Map,ht=new Map;let Rt,Q,Dt,_t,pt,Sn,An,Ln,Cn,rt;function Lt(l){if({files:pt,completedFileIdSet:Rt,ConvStats:Q,canceled:Dt,props:_t,format:Sn,quality:An,outputExt:Ln,imageType:Cn,message:rt}=l||{},qe=null,De.clear(),vt.clear(),ht.clear(),vt.clear(),ht.clear(),l)for(const s in l)delete l[s]}async function wl(l){Lt(l),Rt.clear();let r;try{r=await yl()}catch{return Lt(),{exception:new Error("worker-load-error"),callbackToClearConverter:new Function,callbackToGenerateFailedZips:new Function}}const[s,i]=r;qe=i;const a=new Promise(z=>{i.onmessage=v=>{const f=v.data,{action:k}=f;switch(k){case"squeeze-zip":case"zip-squeeze-error":z(void 0);break}}}),o=new Promise(z=>{s.onmessage=v=>{const{data:{action:f}}=v;f==="close-loader"&&z()}}),u=pt.map(z=>z._id);pt.forEach(z=>vt.set(z._id,z));const m=we(Dt,z=>{if(!z)return;m();const v={action:"cancel-convert"};s.postMessage(v)}),p={action:"start-convert",list:pt,fileIdList:u,outputQuality:An,outputType:Sn,threads:_t.threads,maxSize:N.shrinkImage?{width:N.maxWidth,height:N.maxHeight}:null};s.postMessage(p),await o,console.log("end loader worker"),i.postMessage({action:"squeeze"}),await a,console.log("end zip worker"),m();const g=()=>{In(),i.onmessage=null,i.terminate(),s.onmessage=null,s.terminate(),Lt()};let h=!1;return{callbackToClearConverter:g,callbackToGenerateFailedZips:async z=>{h||(h=!0,await Ll(z,i,{},Q))}}}async function yl(){In();const l=new hl,r=new vl,s=new Promise((u,m)=>{const p=v=>{r.removeEventListener("message",b),l.removeEventListener("message",b),clearTimeout(z),v?(console.log("workers are avialble"),u(v)):(console.error("couldn't get responses from workers"),m(v))};let g=!1,h=!1;const b=v=>{v.target===r&&(console.log("got a message from zip worker"),g=!0),v.target===l&&(console.log("got a message from loader worker"),h=!0),g&&h&&p(!0)};let z=0;r.addEventListener("message",b),l.addEventListener("message",b),z=window.setTimeout(()=>p(!1),_l)}),{port1:i,port2:a}=new MessageChannel,o={action:"set-zip-port"};return r.postMessage({action:"set-port-loader"},[i]),l.postMessage(o,[a]),console.log("test workers' availability"),await s,r.postMessage({action:"set-config",zipSize:_t.maxZipSizeMB*1024*1024,keepExt:_t.retainExtension,outputExt:Ln,imageType:Cn}),l.addEventListener("message",zl),r.addEventListener("message",bl),[l,r]}const bl=l=>{const r=l.data,{action:s}=r;switch(s){case"add-zip-completed":{const{fileId:u,entireIndex:m,storedPath:p}=r;return}case"respond-image":{const{url:u,index:m,path:p,size:g,fileId:h}=r;Q.convertedImageUrl=u,Q.convertedImageSize=g,Q.convertedImageIndex=m,Q.convertedImageName=p;let b="",z=0,v="";const f=De.get(h);if(h>=0){const k=vt.get(h);b=URL.createObjectURL(k),z=k.size,v=k.webkitRelativePath||k.name}Q.convertedImageOrgUrl=b,Q.convertedImageOrgSize=z,Q.convertedImageOrgName=v,Q.convertedImageShrinked=f==null?void 0:f.shrinked;return}case"respond-delete":{const{index:u,success:m,fileId:p}=r;De.get(p).command="âŒdeleted",De.get(p).completed=!1;return}}switch(s){case"error-push-filelist-zip":const{path:u}=r;Q.failedZipDone=!0,rt.error(`an error occurred "${u}"`,{duration:3e3});return}const{size:i,count:a}=r,o="url"in l.data?l.data.url:"";switch(s){case"push-zip":Q.zips.push({url:o,size:i,count:a}),Q.zippedTotalCount+=a,Q.zippedTotalSize+=i;break;case"squeeze-zip":a>0&&(Q.zips.push({url:o,size:i,count:a}),Q.zippedTotalCount+=a,Q.zippedTotalSize+=i);break;case"push-filelist":Q.failedFileZippedCount++;break;case"squeeze-filelist-zip":Q.failedZipDone=!0;case"push-filelist-zip":console.log("push-filelist-zip",a),Q.failedZips.push({url:o,size:i,count:a}),console.log(a);break;case"zip-error":case"zip-squeeze-error":Q.zippingErrorCount+=a;break}},zl=l=>{l.target;const{data:r}=l,{action:s}=r;switch(s){case"list-start":break;case"list-end":break;case"file-start":{const{index:i,path:a,fileId:o}=r;xl(i,a,o);break}case"file-load":{const{thumbnail:i,width:a,height:o,fileId:u,workerId:m,inputsize:p}=r,g=De.get(u);g.core=m,g.command="ðŸ–¼ï¸loaded",g.width=a,g.height=o,g.size=p,i&&(Q.thumbnail=i);break}case"file-converted":{const{index:i,path:a,fileId:o,shrinked:u,outputWidth:m,outputHeight:p,outputsize:g}=r,h=De.get(o);h.command="ðŸ”ƒconverted",h.shrinked??(h.shrinked=u),h.outputWidth=m,h.outputHeight=p,h.outputSize=g,Q.converted++;break}case"file-completed":{const{inputsize:i,outputsize:a,fileId:o,entireIndex:u,storedPath:m}=r,p=De.get(o);p&&(p.command="âœ…completed",p.completed=!0,p.fileId=o),Q.inputTotalSize+=i,Q.outputTotalSize+=a,Q.done++,Q.success++,Rt.add(o),p.zippedIndex=u,Q.ziplogs[u]={fileId:o,storedPath:m};break}case"file-retry":{const{index:i,path:a,fileId:o}=r;Tl(i,a,o);break}case"file-error":{const{index:i,path:a,fileId:o}=r;Il(i,a,o);break}case"file-canceled":{const{fileId:i,path:a}=r;Sl(i);break}}};let kl=0;function xl(l,r,s){const i={key:kl++,core:-1,index:l,path:r,command:"âž¡ï¸started"};De.set(s,i),Q.logs.push(i),ht.has(s)?console.warn(`retry "${r}".`):Dt.value||Q.startedCount++}function Tl(l,r,s){const i=De.get(s);i.command="âš ï¸retrying",i.error=!0,rt.warning(`retrying "${r}"`,{duration:3e3}),Q.retried++,ht.set(s,1)}function Il(l,r,s){console.error(`failed to load "${r}". the image may be corrupted or cannot be read by some reason.`);const i=De.get(s);Q.done++,Q.failure++,i.command="â—failed",i.error=!0,rt.error(`failed to load "${r}"`,{duration:5e3})}function Sl(l){const r=De.get(l);Q.done++,Q.failure++,r.command="â—canceled",r.error=!0}function Al(l){qe==null||qe.postMessage({action:"request-image",index:l})}function Ct(l){qe==null||qe.postMessage({action:"delete-image",index:l})}async function Ll(l,r,s,i){let a=0;for(const o of l){const u=(o.webkitRelativePath||o.name).replace(/^\//,"");if(i.failedZipDone)break;if(s.value)return;a-i.failedFileZippedCount>20&&await new Promise(m=>setTimeout(m,10)),r.postMessage({action:"add-filelist",file:o,path:u}),a++}if(i.failedZipDone){rt.error("Zipping error files was aborted",{duration:5e3});return}r.postMessage({action:"squeeze-filelist"})}function Ze(l,r=2){const s=Math.sign(l);l=Math.abs(l);const i=["Bytes","KB","MB","GB"],a=l?Math.floor(Math.log(l)/Math.log(1024)):0;return`${(l/Math.pow(1024,a)*s).toFixed(r)}${i[a]}`}function $n(l,r=100,s=!1){r=typeof r=="number"?{width:r,height:r}:r;const{width:i,height:a}=r;let{width:o,height:u}=l;const m=o/u,p=i/a;return m>=p?(o=s?Math.min(i,o):i,u=o/m|0):(u=s?Math.min(a,u):a,o=u*m|0),{width:o,height:u}}class Cl{constructor(){Qe(this,"_currentFileCount",0);Qe(this,"_currentZipIndex",0);Qe(this,"_totalFileCount",0);Qe(this,"_zipLengthSumList",[]);Qe(this,"_pathBank",{})}increase(r){return r&&(this._pathBank[r]=[this._zipLengthSumList.length,this._currentFileCount]),this._currentFileCount++,this._totalFileCount++}split(){this._zipLengthSumList.push(this._totalFileCount),this._currentZipIndex++,this._currentFileCount=0}get(r){if(typeof r=="number"){let s=this._zipLengthSumList.findIndex((o,u)=>r<o);s===-1&&(s=this._zipLengthSumList.length);const i=this._zipLengthSumList[s-1]||0,a=r-i;return[s,a]}else{const s=this._pathBank[String(r)];if(s)return s}return null}getZipIndex(){return this._currentZipIndex}getIndex(){return this._totalFileCount}}function $l(l){return new Promise(r=>setTimeout(r,l))}function El(l,r=0){const s=w(l);return we(s,i=>{i!==void 0&&Se(()=>{setTimeout(()=>s.value=void 0,r)})},{immediate:!0}),s}let lt;async function Fl(l,r,s,i,a){let o="";const u=document.createElement("canvas"),m=u.getContext("2d");let p=new Ft;const g=[p],h=new Cl,b=s.format,z=s.quality/100,v=[...b.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),f=l.length,k=s.maxZipSizeMB*1024*1024;let S=0,$=null,A="",I="",M=0,H=0,R=0,_=0,j=0,D=!1;lt=E=>{const[B,X]=h.get(E),J=g[B],fe=J.get(X,b);a.convertedImageIndex=E,a.convertedImageName=J.getPathByIndex(X),a.convertedImageUrl=URL.createObjectURL(fe),a.convertedImageSize=fe.size;let ue="",se=0,Ie="";const Z=le[E];ue=URL.createObjectURL(Z),se=Z.size,Ie=Z.webkitRelativePath||Z.name,a.convertedImageOrgUrl=ue,a.convertedImageOrgSize=se,a.convertedImageOrgName=Ie};const le=[];for(const E of l){if(i.value)break;const B=E.name;let X="";const J=E.size,fe=(E.webkitRelativePath||E.relativePath||B).replace(/^\//,""),ue=document.createElement("img"),se={key:R++,core:-1,index:S++,path:fe,command:"âž¡ï¸start"};a.startedCount=S,a.logs.push(se),a.logs.length-1,o&&(URL.revokeObjectURL(o),o=""),o=URL.createObjectURL(E),I=o,M=E.size,ue.src=o;const Ie=await En(ue).then(()=>!0).catch(()=>!1);if(!ue.complete||!Ie||i.value){a.done++,a.failure++,se.command="â—failed";continue}const Z=ue.width,P=ue.height;u.width=Z,u.height=P,m.drawImage(ue,0,0,Z,P,0,0,Z,P),se.command="ðŸ–¼ï¸imgload",se.width=Z,se.height=P,se.size=E.size,a.thumbnail=ue;const V=await new Promise(ne=>{const de=Ee=>{$=Ee,ne(Ee)};u.toBlob(de,b,z)});if(i.value)break;if(!V){console.log("failed to toBlob",B),a.failure++;continue}H=V.size,a.converted++,se.outputSize=H;let K="";if(j+H>=k){try{await p.wait(),K=await p.url()}catch(ne){D=!0,console.warn(ne.message,j),alert("memory problem occurred");break}a.zips.push({url:K,size:j,count:_}),a.zippedTotalCount+=_,a.zippedTotalSize+=j,j=0,_=0,h.split(),p=new Ft,g.push(p)}j+=H;const te=fe||B;for(let ne=1;ne<255&&(X=te.replace(s.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+(ne>1?`(${ne})`:"")+"."+v,!!p.has(X));ne++);a.done++;try{_++,p.add(X,V)}catch(ne){console.error(ne.message);continue}h.increase(),le.push(E),a.inputTotalSize+=J,a.outputTotalSize+=H,a.ziplogs.push({fileId:E._id,storedPath:X}),A=X,se.zippedIndex=a.success,a.success++,se.command="âœ…completed",se.completed=!0,se.fileId=E._id,r.add(E._id)}if(a.success>0)if(f===1)$&&(a.convertedImageIndex=0,a.convertedImageName=A.replace(/^.*\/(?=[^/]+$)/,"").replace(s.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+v,a.convertedImageUrl=URL.createObjectURL($),a.convertedImageOrgUrl=I,a.convertedImageOrgSize=M);else try{if(D)throw new Error("terminated zipping process for memory problems");await p.wait();const E=await p.url();a.zips.push({url:E,count:_,size:j}),a.zippedTotalCount+=_,a.zippedTotalSize+=j}catch(E){console.error(E.message)}const O={value:!1},ge=()=>{O.value=!0,g.forEach(E=>E.clear()),g.length=0,le.length=0,lt=null};let Ae=!1;return{callbackToClearConverter:ge,callbackToGenerateFailedZips:async E=>{Ae||(Ae=!0,Ol(E,k,a,O))}}}function Pl(l){lt==null||lt(l)}async function Ol(l,r,s,i){let a=0,o=0,u=new Ft;for(let m=0;m<l.length;m++){const p=l[m],g=(p.webkitRelativePath||p.name).replace(/^\//,"");if(i.value)return;try{await u.add(g,p)}catch{alert(`an error occurred during access to "${g}"`);break}if(o+=p.size,a++,s.failedFileZippedCount++,o>=r||m===l.length-1){await u.zip();const h=await u.url();s.failedZips.push({url:h,size:o,count:a}),u.clear(),o=0,a=0}}s.failedZipDone=!0}function En(l){if(typeof l.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((r,s)=>{l.onload=r,l.onerror=s})}const Ul=["href","download","title"],Ml='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',Rl=ye({__name:"thumbnail",props:{src:{},width:{},height:{},maxWidth:{default:100},maxHeight:{default:100},expand:{type:Boolean,default:!1},loading:{type:Boolean},fileName:{},allowNext:{type:Boolean},allowPrev:{type:Boolean},hidden:{type:Boolean}},emits:["load","error","next","prev"],setup(l,{expose:r,emit:s}){const{t:i}=He(),a=l,o=s,u=w();w();const m=w(!0),p=w(""),g=w(a.width||100),h=w(a.height||100),b=w(!1),z=bt({width:g.value+"px",height:h.value+"px",minWidth:"50px",minHeight:"50px"});We(()=>{var I,M,H;(M=(I=u.value)==null?void 0:I.previewInstRef)==null||M.setPreviewSrc(Ml),URL.revokeObjectURL((((H=u.value)==null?void 0:H.imageRef)||{}).src),u.value=null});const v=w(!0);ia(()=>{v.value=!1}),ra(()=>{v.value=!0}),we(a,(I,M)=>{z.width=(a.width||100)+"px",z.height=(a.height||100)+"px"}),we(()=>a.src,(I,M)=>{v.value&&S(I)},{immediate:!0}),r({download:$,openPreview:A,active:v});async function f(I){const M=I.target,H=M.naturalWidth,R=M.naturalHeight,{width:_,height:j}=$n({width:H,height:R},{width:a.maxWidth||100,height:a.maxHeight||100},a.expand);g.value=_,h.value=j,o("load",{src:M.src,width:H,height:R}),m.value=!1,await new Promise(D=>setTimeout(D,100)),!m.value&&(b.value=!0)}function k(I){const M=I.target;o("error",M.src)}async function S(I){m.value=!0,b.value=!1,p.value=I,console.log("changeSrc:",p.value)}function $(){const I=document.createElement("a");I.href=p.value,I.download=a.fileName,I.click()}function A(){var I;(I=u.value)==null||I.click()}return(I,M)=>{const H=pn,R=fn,_=Te,j=zt;return Ne((F(),ee("div",null,[n(e(xe),null,{trigger:t(()=>[n(j,{show:e(m)||a.loading},{default:t(()=>[n(_,{justify:"center",align:"center",style:ce([e(z),{"line-height":"0px"}])},{default:t(()=>[Ne(y("a",{href:e(p),onClick:M[0]||(M[0]=Xe(()=>{},["left","prevent"])),target:"_blank",download:a.fileName,title:a.fileName},[n(Ye,{mode:"in-out"},{default:t(()=>[Ne(n(H,{ref_key:"nImageRef",ref:u,"show-toolbar-tooltip":"",onLoad:f,onError:k,src:e(p),width:e(g),height:e(h),style:{border:"1px solid silver"}},null,8,["src","width","height"]),[[je,e(b)]])]),_:1})],8,Ul),[[je,!(e(m)||a.loading)]]),Ne(n(R,null,null,512),[[je,e(m)||a.loading]])]),_:1},8,["style"])]),_:1},8,["show"])]),default:t(()=>[C(" "+d(a.fileName),1)]),_:1})],512)),[[je,!I.hidden]])}}}),Be=(l,r)=>{const s=l.__vccOpts||l;for(const[i,a]of r)s[i]=a;return s},Jt=Be(Rl,[["__scopeId","data-v-a62add3a"]]),Dl=["href","download","title"],Bl={class:"left-num"},Nl={class:"right-num"},jl=["href","download","title"],Zl={class:"left-num"},Hl={class:"right-num"},Vl=["href","download"],Wl=ye({__name:"image-viewer",props:{url:{},originalUrl:{},name:{},originalName:{},size:{},originalSize:{},length:{},index:{},isSingle:{type:Boolean},variousInfo:{}},emits:["demand-image","delete-image","close"],setup(l,{expose:r,emit:s}){const i=Ge(Ve),a=l,o=s;r({download:P,cleanup:q,openPreview:U,isPreviewing(){return _.value},changeIndex(L){v.value=L}});const u=st(),{t:m}=He();kt();const p=w(),g=w(),h=w(),b=Je("viewerItemContainer"),z=w(!0),v=w(Math.max(a.index,0)+1),f=w(1),k=w(1),S=w(""),$=w(""),A=w(1),I=w(1),M=w(!1),H=w(!1),R=w(!1),_=ke(()=>{var L,c;return(c=(L=h.value)==null?void 0:L.previewInstRef)==null?void 0:c.displayed}),j=ke(()=>{var L,c;return((c=(L=h==null?void 0:h.value)==null?void 0:L.previewInstRef)==null?void 0:c.previewSrc)===S.value}),D=ke(()=>v.value<a.length),le=ke(()=>v.value>1),O=w("viewer-item-init"),ge=w(0),Ae=w(!0);w({width:"auto",height:"auto"});const be=w(!1);Ue(()=>{document.body.addEventListener("keydown",se),document.body.addEventListener("keydown",ue),J(v.value-1),fe()}),We(()=>{clearTimeout(E),document.body.removeEventListener("keydown",se),document.body.removeEventListener("keydown",ue),be.value=!0}),ft(()=>{URL.revokeObjectURL(a.url),URL.revokeObjectURL(a.originalUrl)});let E=-1;we(v,(L,c)=>{v.value<1||v.value>a.length||L===c||(clearTimeout(E),L>c?O.value="viewer-item-next":O.value="viewer-item-prev",E=setTimeout(()=>{a.index!==v.value-1&&(ge.value=z.value?ge.value:~ge.value,Ae.value=!1,J(v.value-1))},50))});let B="",X="";we(()=>a.url,()=>{var T,W;let L="";a.index===0&&z.value?(z.value=!1,v.value=1,L=a.url):a.index===v.value-1?(z.value=!1,M.value=!1,L=a.url):(URL.revokeObjectURL(a.url),URL.revokeObjectURL(a.originalUrl));const c=B,x=X;if(URL.revokeObjectURL(c),URL.revokeObjectURL(x),B=a.url,X=a.originalUrl,L){try{if((W=(T=h.value)==null?void 0:T.previewInstRef)!=null&&W.displayed){j.value?h.value.previewInstRef.setPreviewSrc(L):h.value.previewInstRef.setPreviewSrc(a.originalUrl);try{const oe=h.value.previewInstRef.displayed;h.value.previewInstRef.handleAfterLeave(),h.value.previewInstRef.displayed=oe}catch(oe){console.error(oe)}}}catch{}S.value=L,$.value=a.originalUrl}},{immediate:!0});function J(L){M.value=!0,H.value=!1,R.value=!1,Se(()=>o("demand-image",L))}function fe(){if(!i.IS_SP)return;let L=b.value.$el,c=0,x=0,T=0,W=0,oe=0;const pe=Pe=>{c=Pe.touches[0].pageX,x=Pe.touches[0].pageY,oe=Date.now()};L.addEventListener("touchstart",pe);const ie=Pe=>{T=Pe.touches[0].pageX,W=Pe.touches[0].pageY,Fe()};window.addEventListener("touchmove",ie);const Y=()=>{Fe();const Pe=T-c,me=Math.abs(Pe),It=W-x,St=Math.abs(It);me<St||me<30||K(Pe>0?-1:1)};window.addEventListener("touchend",Y);const Fe=()=>{const Pe=Date.now();Pe-oe>500&&(c=T,x=W),oe=Pe};We(()=>{L.removeEventListener("touchstart",pe),window.removeEventListener("touchmove",ie),window.removeEventListener("touchend",Y),L=null})}function ue(L){var c,x,T,W;if(L.key==="Escape")try{(x=(c=h.value)==null?void 0:c.previewInstRef)!=null&&x.displayed&&(L.stopPropagation(),(W=(T=h.value)==null?void 0:T.previewInstRef)==null||W.toggleShow(!1))}catch{}}function se(L){switch(L.code){case"ArrowRight":K(1);break;case"ArrowLeft":K(-1);break;case"Home":v.value=1;break;case"End":v.value=a.length;break;case"Space":case"Enter":case"NumpadEnter":if(!_.value)return;ne();break;case"ArrowUp":case"ArrowDown":default:return}L.stopPropagation(),L.preventDefault()}function Ie({width:L,height:c}){f.value=L,k.value=c,H.value=!0}function Z({width:L,height:c}){A.value=L,I.value=c,R.value=!0}function P(){j.value?p.value.download():g.value.download()}async function V(L){try{const c=await fetch(L).then(x=>x.blob()).then(x=>new Promise(T=>{const W=new FileReader;W.onload=T,W.readAsDataURL(x)})).then(x=>x.target.result);navigator.clipboard.writeText(c),u.info({title:m("copiedDataURLDialogTitle"),content:()=>G("div",[G("div",m("copiedDataURLMessage"))]),positiveText:"OK"})}catch(c){console.error(c),u.error({title:"failed to copy Data URL",content:"could not copy Data URL",positiveText:"OK"})}}function K(L){L>0?v.value=Math.min(a.length,v.value+L)|0:L<0&&(v.value=Math.max(1,v.value+L)|0)}let te="";const ne=()=>{var c,x,T,W;te=(T=window.getComputedStyle((x=(c=h==null?void 0:h.value)==null?void 0:c.previewInstRef)==null?void 0:x.previewRef))==null?void 0:T.transform;const L=j.value;(W=h==null?void 0:h.value)==null||W.next(),Se(()=>{var oe;j.value===L&&((oe=h==null?void 0:h.value)==null||oe.next())})};function de(){try{Se(()=>h.value.previewInstRef.previewRef.style.transform=te)}catch{}}function Ee({nodes:L}){const c=G(Ut,{color:j.value?"green":"gray",offset:[-20,-12],value:j.value?m("status.Converted"):m("status.Original")},()=>G($e,{round:!0,onClick(){ne()},textColor:"white",size:"small",style:{marginLeft:"4px"}},{icon:()=>G(j.value?pa:fa)}));L.next=G($e,{onClick(){K(1)},disabled:!D.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>G(Kt)}),L.prev=G($e,{onClick(){K(-1)},disabled:!le.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>G(ga)});try{const x=L.download.children;x.default=()=>m("save");const T=x.trigger();T.props.onClick=P,x.trigger=()=>T}catch{}return re(),[c,...Object.values(L)]}const Le="#pathbox-"+String(Math.random()).substring(2);let he;function re(){var L,c,x;try{if(he=(x=(c=(L=h.value)==null?void 0:L.previewInstRef)==null?void 0:c.previewWrapperRef)==null?void 0:x.parentNode,!he||he.querySelector(Le))return;let T=G("div",{id:Le,onMousedown:W=>{W.stopPropagation()},className:"__preview-injected-pathbox"+(j.value?" converted":"")},[G("div",`${String(v.value).padStart(String(a.length).length,"0")}/${String(a.length).padStart(String(a.length).length,"0")}`),G("div",Ze(j.value?a.size:a.originalSize,0)),G("div",j.value?a.name:a.originalName)]);Yt(T,he),T=null}catch(T){console.error(T)}}We(()=>{he&&(Yt(null,he),he=null)});function U(){p.value.openPreview()}function q(){}return(L,c)=>{const x=_e,T=Te,W=gn,oe=Ke,pe=xt,ie=ua;return F(),ae(T,{justify:"center",align:"stretch",vertical:"",style:ce([{visibility:z.value?"hidden":"visible"},{overflow:"visible"}]),class:"body",ref:"body"},{default:t(()=>[n(ie,{ref_key:"nImageGroupRef",ref:h,"show-toolbar-tooltip":"","render-toolbar":Ee,onPreviewNext:de},{default:t(()=>[n(T,{wrap:!1,align:"center",justify:"space-between",style:{overflow:"visible"}},{default:t(()=>[n(e($e),{onClick:c[0]||(c[0]=Y=>K(-1)),bordered:!1,disabled:!e(le),class:et({"thumb-arrow":!0,pale:!e(le)}),title:L.$t("Prev")},{icon:t(()=>[n(x,{size:"30"},{default:t(()=>[n(e(ca))]),_:1})]),_:1},8,["disabled","class","title"]),n(T,{justify:"center",ref_key:"viewerItemContainer",ref:b,class:"viewer-item-container",style:{width:"100%"}},{default:t(()=>[n(Ye,{name:O.value},{default:t(()=>[(F(),ae(T,{vertical:"",key:ge.value},{default:t(()=>[n(T,{align:"center",wrap:!1},{default:t(()=>[n(T,{vertical:""},{default:t(()=>[n(T,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(T,{align:"center",justify:"center",vertical:"",class:"original-thumb"},{default:t(()=>[y("a",{href:L.originalUrl,onClick:c[4]||(c[4]=Xe(Y=>{g.value.openPreview()},["prevent"])),download:L.originalName,title:L.originalName,class:"imglink"},[n(T,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(Jt,{ref:Y=>{Y!=null&&Y.active&&(g.value=Y)},src:$.value,width:1,"max-width":1,"max-height":1,loading:M.value,"file-name":L.originalName,"allow-next":v.value<a.length,"allow-prev":v.value>1,onLoad:Z,onNext:c[1]||(c[1]=Y=>K(1)),onPrev:c[2]||(c[2]=Y=>K(-1)),hidden:!0},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(T,{vertical:"",align:"center"},{default:t(()=>[n(T,{class:"imglink-label"},{default:t(()=>[C(d(e(m)("status.Original")),1)]),_:1}),n(T,{justify:"center",class:"img-size",wrap:!1,size:2},{default:t(()=>[y("span",Bl,d(R.value?A.value:"?"),1),c[11]||(c[11]=C(" Ã— ")),y("span",Nl,d(R.value?I.value:"?"),1)]),_:1}),n(T,{justify:"center"},{default:t(()=>[c[3]||(Gt(-1,!0),(c[3]=n(T,null,{default:t(()=>[C(d(R.value?e(Ze)(a.originalSize,0):"?"),1)]),_:1})).cacheIndex=3,Gt(1),c[3])]),_:1})]),_:1})]),_:1})],8,Dl)]),_:1}),n(T,{vertical:"",align:"center",class:"original-thumb"},{default:t(()=>[n(x,{size:"20",color:"silver",component:e(Kt)},null,8,["component"])]),_:1}),y("a",{href:S.value,onClick:c[5]||(c[5]=Xe(Y=>U(),["prevent"])),download:a.name,title:a.name,class:"imglink"},[n(T,{vertical:"",align:"center",justify:"center"},{default:t(()=>[n(T,{class:"imglink-label"},{default:t(()=>[C(d(e(m)("status.Converted")),1)]),_:1}),n(T,{vertical:"",align:"center",justify:"center",size:0},{default:t(()=>[n(T,{justify:"center"},{default:t(()=>{var Y;return[n(T,{wrap:!1,style:ce((Y=a.variousInfo)!=null&&Y.shrinked?{color:"blue"}:{}),class:"img-size",size:2},{default:t(()=>[y("span",Zl,d(H.value?f.value:"?"),1),c[12]||(c[12]=C(" Ã— ")),y("span",Hl,d(H.value?k.value:"?"),1)]),_:1},8,["style"])]}),_:1})]),_:1}),n(T,{justify:"center"},{default:t(()=>[C(d(H.value?e(Ze)(a.size,0):"?"),1)]),_:1})]),_:1})],8,jl)]),_:1}),n(T,{ref:"fileNameContainer",justify:"center",align:"center",class:"pathbox",title:a.name,style:{overflow:"hidden"}},{default:t(()=>[n(W,{"x-scrollable":!0,trigger:"hover",style:{"text-align":"center","font-size":"smaller",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},{default:t(()=>[C(d(H.value?a.name:"?"),1)]),_:1})]),_:1},8,["title"])]),_:1}),n(T,{vertical:"",style:{overflow:"visible"}},{default:t(()=>[n(Jt,{ref:Y=>{Y!=null&&Y.active&&(p.value=Y)},src:S.value,width:142,"max-width":140,"max-height":100,loading:M.value,"file-name":a.name,"allow-next":v.value<a.length,"allow-prev":v.value>1,onLoad:Ie,onNext:c[6]||(c[6]=Y=>K(1)),onPrev:c[7]||(c[7]=Y=>K(-1))},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(T,{justify:"center",align:"center",wrap:!1},{default:t(()=>[n(oe,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:a.url,ref:"saveImg",target:"_blank",download:a.name,style:{"line-height":"1em"}},[n(e($e),{disabled:!H.value,round:"",size:"tiny"},{default:t(()=>[C(d(L.$t("save")),1)]),_:1},8,["disabled"])],8,Vl)]),default:t(()=>[C(" "+d(L.$t("save")),1)]),_:1}),n(oe,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(e($e),{disabled:!H.value,onClick:c[8]||(c[8]=Y=>V(a.url)),round:"",size:"tiny"},{default:t(()=>c[13]||(c[13]=[C("DataURL")])),_:1},8,["disabled"])]),default:t(()=>[C(" "+d(L.$t("convertedImageDataUrlTooltip")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1},8,["name"])]),_:1},512),n(e($e),{bordered:!1,onClick:c[9]||(c[9]=Y=>K(1)),disabled:!e(D),class:et({"thumb-arrow":!0,next:!0,pale:!e(D)}),title:L.$t("Next")},{icon:t(()=>[n(x,{size:"30"},{default:t(()=>[n(e(da))]),_:1})]),_:1},8,["disabled","class","title"])]),_:1}),L.isSingle?ve("",!0):(F(),ae(T,{key:0,justify:"center",align:"center",wrap:!1,size:4},{default:t(()=>[n(pe,{value:v.value,"onUpdate:value":c[10]||(c[10]=Y=>v.value=Y),tooltip:!1,step:1,min:1,max:a.length,keyboard:!1,class:"index-slider"},null,8,["value","max"]),n(T,{class:"index",align:"center",justify:"center",wrap:!1,size:3},{default:t(()=>[n(T,null,{default:t(()=>[C(d(e(m)("status.index"))+":",1)]),_:1}),n(T,{justify:"end",align:"center",class:"counter"},{default:t(()=>[C(d(v.value),1)]),_:1}),n(T,null,{default:t(()=>c[14]||(c[14]=[C("/")])),_:1}),n(T,{justify:"start",align:"center",class:"counter"},{default:t(()=>[C(d(a.length),1)]),_:1})]),_:1})]),_:1}))]),_:1},512)]),_:1},8,["style"])}}}),ql=Be(Wl,[["__scopeId","data-v-1394ec38"]]),Gl={key:0},Kl={style:{}},Yl={key:1,style:{width:"106px",height:"80px",opacity:"0.15",border:"1px solid gray"}},Ql=ye({__name:"status.progress",props:{processing:{type:Boolean},successPerc:{},elapsedTime:{},threads:{},fileType:{},shrink:{},zipSize:{},inputTotalSize:{},outputTotalSize:{},rateColor:{},difColor:{},totalSizeDifStr:{},thumbnail:{},opened:{type:Boolean}},setup(l){const r=l,s=w(null),i={W:110,H:80};let a;return we(()=>[r.thumbnail,r.opened],()=>{if(!r.thumbnail||!r.opened||r.thumbnail===a||!s.value)return;const{width:o,height:u}=$n(r.thumbnail,{width:i.W,height:i.H});s.value.width=o,s.value.height=u,s.value.style.width=o+"px",s.value.style.height=u+"px",r.thumbnail instanceof HTMLImageElement?s.value.getContext("2d").drawImage(r.thumbnail,0,0,o,u):(s.value.getContext("bitmaprenderer").transferFromImageBitmap(r.thumbnail),a=r.thumbnail,r.thumbnail.close())}),(o,u)=>{const m=zt,p=Te,g=ma,h=it;return F(),ae(h,{name:"progress",style:{"white-space":"nowrap"}},{header:t(({collapsed:b})=>[n(p,{align:"center"},{default:t(()=>[C(d(o.$t("status.Progress"))+" ",1),b?(F(),ee(Me,{key:0},[C(" ("+d(o.successPerc|0)+"%) ",1)],64)):ve("",!0),Ne(n(m,{size:16},null,512),[[je,o.processing&&!r.opened]])]),_:2},1024)]),default:t(()=>[n(p,{justify:"center",align:"center",size:0,wrap:!1,style:{"white-space":"nowrap","margin-top":"-1em","padding-bottom":"5px"}},{default:t(()=>[u[0]||(u[0]=y("div",{class:"grow"},null,-1)),n(p,{justify:"center",class:"grow",wrap:!1,style:{"z-index":"1"}},{default:t(()=>[n(p,{vertical:"",justify:"center",class:"left-column"},{default:t(()=>[n(g,{"tabular-nums":"",label:o.$t("status.elapsedTime")},{default:t(()=>[n(p,null,{default:t(()=>[C(d(o.elapsedTime),1)]),_:1})]),_:1},8,["label"]),n(g,{"tabular-nums":"",label:o.$t("status.multiThreading")},{default:t(()=>[n(p,{style:ce({color:o.threads?"":"red",fontSize:"0.7rem"})},{default:t(()=>[C(d(o.threads?o.$rt("{n} @:threads",o.threads):o.$t("disabled")),1)]),_:1},8,["style"])]),_:1},8,["label"]),n(g,{"tabular-nums":"",label:o.$t("status.outputSettings")},{default:t(()=>[n(p,{vertical:"",justify:"end",style:{"font-size":"0.6rem","line-height":"0.6rem"}},{default:t(()=>[y("div",null,d(o.$t("settings.imageType"))+": "+d(o.fileType),1),o.shrink?(F(),ee("div",Gl,[C(d(o.$t("status.Shrinking"))+": ",1),y("span",Kl,d(o.shrink[0])+"Ã—"+d(o.shrink[1]),1)])):ve("",!0),y("div",null,"Zip: "+d(o.zipSize)+"MB",1)]),_:1})]),_:1},8,["label"])]),_:1}),un(o.$slots,"center",{},void 0,!0),n(p,{vertical:"",style:{height:"100%"},justify:"center",class:"right-column"},{default:t(()=>[n(g,{"tabular-nums":"",label:o.$t("status.inputSize")},{default:t(()=>[n(p,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[C(d((o.inputTotalSize/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(g,{"tabular-nums":"",label:o.$t("status.outputSize")},{default:t(()=>[n(p,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[C(d((o.outputTotalSize/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(g,{"tabular-nums":"",label:o.$t("status.outInRate")},{default:t(()=>[n(p,{vertical:"",align:"end",justify:"start",style:{"font-size":"0.8em","font-family":"v-mono","line-height":"50%"}},{default:t(()=>[y("span",{style:ce({color:o.rateColor,fontSize:"larger"})},"Ã— "+d((o.outputTotalSize/o.inputTotalSize||1).toFixed(2)),5),y("span",{style:ce({color:o.difColor})},"("+d(o.totalSizeDifStr)+")",5)]),_:1})]),_:1},8,["label"])]),_:1})]),_:3}),n(p,{class:"thumb-container",align:"center",style:{position:"relative"}},{default:t(()=>[n(p,{justify:"center",align:"center",class:"grow thumbnail",style:ce({width:i.W+"px",height:i.H+"px"})},{default:t(()=>[n(Ye,{name:"fade",mode:"out-in"},{default:t(()=>[o.processing?(F(),ee("canvas",{key:0,ref_key:"thumbcanvas",ref:s,width:"106",height:"80",class:"thumb-canvas"},null,512)):(F(),ee("div",Yl))]),_:1})]),_:1},8,["style"])]),_:1})]),_:3})]),_:3})}}}),Xl=Be(Ql,[["__scopeId","data-v-eecf6b58"]]),Jl={class:"status-table"},es={class:"started"},ts={class:"mini-counter"},ns={class:"failure"},os={class:"mini-counter"},as={colspan:"2"},ls={class:"completed"},ss={class:"main-counter"},is={class:"total"},rs={class:"main-counter"},us=ye({__name:"status.progress-center",props:{processing:{type:Boolean},interval:{},statusColor:{},success:{},successTo:{},successFrom:{},index:{},length:{},failure:{},retried:{},successPercTo:{},successPercFrom:{}},setup(l){const r=l,s=kt(),i=w(s.value.successColor),a=w(!1);return we(()=>r.processing,o=>{o||(r.success===r.length?a.value=!0:i.value=s.value.errorColor)}),(o,u)=>{const m=Ke,p=_e,g=ha,h=Te,b=mn;return F(),ae(b,{type:"multiple-circle","stroke-width":2,percentage:[o.successTo/o.length*100|0,o.index/o.length*100|0],color:[e(s).successColor,o.statusColor],"rail-style":[{stroke:e(i),opacity:.3}],style:{width:"12em"}},{default:t(()=>[n(h,{vertical:"",align:"center",justify:"center",size:0,style:{"white-space":"nowrap"},wrap:!1,"wrap-item":!1},{default:t(()=>[y("table",Jl,[y("tbody",null,[y("tr",es,[y("td",null,d(o.$t("status.started"))+":",1),y("td",ts,[n(m,{trigger:"hover",style:ce({color:e(s).infoColor}),placement:"left"},{trigger:t(()=>[y("span",{style:ce({color:e(s).infoColor})},d(o.index.toLocaleString("en-us")),5)]),default:t(()=>[C(" "+d(o.$t("status.progressStarted"))+" ("+d(o.index.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])])]),y("tr",ns,[y("td",null,d(o.$t("status.failure"))+":",1),y("td",os,[n(m,{trigger:"hover",style:ce({color:e(s).errorColor}),placement:"left"},{trigger:t(()=>[y("span",{style:ce({color:e(s).errorColor})},d(o.failure.toLocaleString("en-us")),5)]),default:t(()=>[C(" "+d(o.$t("status.progressErrors"))+" ("+d(o.failure.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"]),o.retried>0?(F(),ae(m,{key:0,trigger:"hover",style:ce({color:e(s).warningColor}),placement:"left"},{trigger:t(()=>[y("span",{style:ce({color:e(s).warningColor})}," ("+d(o.retried.toLocaleString("en-us"))+") ",5)]),default:t(()=>[C(" "+d(o.$t("status.progressRetries"))+" ("+d(o.retried.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):ve("",!0)])]),y("tr",null,[y("td",as,[n(h,{size:0,align:"center",justify:"center",style:ce({color:o.processing?o.statusColor:e(i)}),wrap:!1,class:"percent"},{default:t(()=>[e(a)?(F(),ae(p,{key:0,component:e(va)},null,8,["component"])):ve("",!0),n(g,{duration:o.interval*3|0,from:o.successPercFrom|0,to:o.successPercTo|0,active:!0},null,8,["duration","from","to"]),u[0]||(u[0]=C("% "))]),_:1},8,["style"])])]),y("tr",ls,[y("td",null,d(o.$t("status.success"))+":",1),y("td",ss,[n(m,{trigger:"hover",duration:0,delay:0,style:ce({color:e(s).successColor}),placement:"bottom"},{trigger:t(()=>[y("span",{style:ce({color:e(s).successColor})},[n(g,{duration:o.interval*3|0,from:o.successFrom,to:o.successTo,active:!0,"show-separator":!0},null,8,["duration","from","to"])],4)]),default:t(()=>[C(" "+d(o.$t("status.progressSuccess"))+" ("+d(o.successTo.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])])]),y("tr",is,[y("td",null,d(o.$t("status.all"))+":",1),y("td",rs,[n(m,{trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:t(()=>[C(d(o.length.toLocaleString("en-us")),1)]),default:t(()=>[C(" "+d(o.$t("status.progressTotal"))+" ("+d(o.length.toLocaleString("en-us"))+") ",1)]),_:1})])])])])]),_:1})]),_:1},8,["percentage","color","rail-style"])}}}),cs={key:0,class:"log-table",ref:"table"},ds={class:"log-tr label"},ps=["title"],fs={style:{"min-width":"7em"},class:"log-th"},gs={style:{"padding-left":"2em"},class:"log-th"},ms={ref:"tbody"},vs=["onClick","onDblclick"],hs={class:"log-td"},_s={class:"log-td"},ws={class:"log-td"},ys={class:"log-td"},bs={key:0,class:"log-td log-extra",style:{"padding-left":"0.5em"}},zs={key:0},ks={key:1,style:{color:"blue"}},xs={key:1},en=3,tn=3e3,$t=80,Ts=100,Is=ye({__name:"status.log",props:tt({processing:{type:Boolean},opened:{type:Boolean},previewCollapsed:{type:Boolean},logs:{},imageIndex:{}},{expanded:{type:Boolean,required:!1},expandedModifiers:{},"auto-scroll":{type:Boolean,required:!1},"auto-scrollModifiers":{},order:{required:!1,default:"processed"},orderModifiers:{}}),emits:tt(["open-preview","change-index"],["update:expanded","update:auto-scroll","update:order"]),setup(l,{emit:r}){const{t:s}=He(),i=l,a=Ce(l,"expanded"),o=Ce(l,"auto-scroll"),u=r;Je("table");const m=Je("tbody"),p=w(),g=w(null),h=w(40),b=w($t),z=ke(()=>{let c=i.logs;switch(A.value){case"success":c=c.filter(x=>x.completed);break;case"error":c=c.filter(x=>!x.completed);break}return c}),v=El(!1),k=w([{type:"group",label:()=>s("status.sort"),key:"sort",children:[{label:()=>s("status.sortByStart"),value:"processed"},{label:()=>s("status.sortByCompletion"),value:"zipped"},{label:()=>s("status.sortByName"),value:"name"},{label:()=>s("status.sortBySize"),value:"size"},{label:()=>s("status.sortByOutputSize"),value:"outputsize"},{label:()=>s("status.sortByStatus"),value:"status"}]}]),S=Ce(l,"order");we(S,de);const $=[{label:()=>s("status.showAll"),value:""},{label:()=>s("status.showOnlySuccess"),value:"success"},{label:()=>s("status.showOnlyError"),value:"error"}],A=w($[0].value);Ue(()=>{R=_a(),D(),window.addEventListener("resize",()=>D());const c=new ResizeObserver(()=>D());c.observe(R.parent.parent.vnode.el),We(()=>{window.removeEventListener("resize",()=>D()),c.disconnect()})}),We(()=>{clearTimeout(H),clearTimeout(ue),clearTimeout(O)});let I=0;we(()=>i.imageIndex,c=>M(c));async function M(c){var pe;const x=c||i.imageIndex;let T=z.value.findIndex(ie=>ie.zippedIndex===x);T===-1&&(T=x);const W=T<B.value,oe=T>B.value+X.value;if(W||oe){const ie=T*J-(oe?h.value:0);(pe=p.value)==null||pe.scrollTo({behavior:"instant",top:ie,left:re}),await Se(),P(!0),await Se()}Se(()=>{var Y,Fe;let ie=g.value;ie&&(I>T&&(ie=ie.previousSibling||ie,ie instanceof HTMLElement||((Y=p.value)==null||Y.scrollTo(re,0),ie=null)),(Fe=ie==null?void 0:ie.scrollIntoView)==null||Fe.call(ie,{behavior:"instant",block:"nearest"}),I=T)})}we(()=>i.opened,c=>{Se(()=>{c&&(M(),P())})});let H,R;const _=w(document.documentElement.clientHeight),j=w(100);function D(c){clearTimeout(H),H=setTimeout(()=>{if(!i.opened||!p.value)return;const x=p.value.$parent.$el.offsetHeight,T=window.innerHeight-R.parent.parent.parent.parent.vnode.el.offsetHeight-8,W=Math.min(J*Math.max(5,i.logs.length),Math.max(200,x+T));_.value=document.documentElement.clientHeight,j.value=Math.min(J*Math.max(5,i.logs.length),Math.max($t,W)),!(!i.opened||!a.value)&&(h.value=Math.max(W,b.value))},100)}function le(c){c&&(Ae(!0),D(),v.value=!0)}let O=0,ge=!1;function Ae(c=!1){if(!ge){if(O){ge=!0;return}Se(()=>{!c&&!o.value||(p.value.scrollTo({behavior:"instant",top:i.logs.length*50,left:re}),O=window.setTimeout(()=>{O=0,ge&&(ge=!1,Ae())},Ts))})}}const be=w({height:"0px"}),E=w({height:"0px"}),B=w(0),X=ke(()=>h.value/J+en*2|0);let J=15,fe=0,ue=0,se=0,Ie=-999,Z=-1;function P(c){const x=Date.now();if(c!==!0){if(ue)return;if(x-se<30){ue=window.setTimeout(()=>{ue=0,P()},30-(x-se));return}}se=x,fe||(fe=m.value.rows[1].offsetHeight,J=fe);const T=z.value.length,oe=p.value.scrollbarInstRef.containerRef.scrollTop;if(!c&&T===Z&&Math.abs(oe-Ie)<J*.5)return;Ie=oe,Z=T;const pe=Math.max(0,(oe/J|0)-en);B.value=pe,be.value.height=pe*J+"px",E.value.height=Math.max(0,T-(pe+X.value))*J+"px"}function V(){var c;(c=p.value)==null||c.scrollTo(0,0),P()}we(()=>i.logs,()=>{i.opened&&(Se(P),o.value&&Ae(),ne())}),we(()=>i.opened,c=>{c&&P()});let K=0,te=0;function ne(){if(S.value==="processed"||!S.value)return;const c=Date.now();if(c-te<tn){if(K)return;K=window.setTimeout(ne,tn-(c-te));return}K=0,te=c,de()}function de(){switch(console.log("sortList",S.value),S.value){case"zipped":i.logs.sort((c,x)=>c.zippedIndex-x.zippedIndex);break;case"status":i.logs.sort((c,x)=>c.command>x.command?1:-1);break;case"name":i.logs.sort((c,x)=>c.path>x.path?1:-1);break;case"size":i.logs.sort((c,x)=>c.size-x.size);break;case"outputsize":i.logs.sort((c,x)=>c.outputSize-x.outputSize);break;case"processed":default:i.logs.sort((c,x)=>c.index-x.index);break}}function Ee(c){const x=i.logs,T=x.findIndex(Fe=>Fe.zippedIndex===i.imageIndex);let W=0,oe=1;switch(c.code){case"ArrowUp":W=-1;break;case"ArrowDown":W=1;break;case"PageUp":W=-1,oe=h.value/J|0;break;case"PageDown":W=1,oe=h.value/J|0;break;case"Enter":case"NumpadEnter":if(T>=0&&i.previewCollapsed){Se(()=>u("open-preview")),c.stopPropagation(),c.preventDefault();return}break;default:return}let pe=T,ie=-1;const Y=x.length;do{if(pe+=W,pe<0||pe>Y-1||pe===T)break;if(x[pe].completed){if(ie=pe,--oe>0)continue;break}}while(!0);if(ie>=0){const Fe=x[ie];u("change-index",!0,Fe.path,Fe.fileId,Fe.zippedIndex),c.preventDefault()}}let Le=-1,he=-1,re=0,U=!1;function q(c){var W,oe;if(P(),U){U=!1;return}const{scrollLeft:x=0,scrollTop:T=0}=(oe=(W=p.value)==null?void 0:W.scrollbarInstRef)==null?void 0:oe.containerRef;(x!==Le||Le<0)&&(T===he||he<0)&&(re=x,console.log(re,"storedLogTableScrollLeft")),Le=x,he=T,Se(()=>{var ie,Y;U=!0;const pe=(Y=(ie=p.value)==null?void 0:ie.scrollbarInstRef)==null?void 0:Y.containerRef;pe&&(pe.scrollLeft=re)})}function L(c){o.value=!1}return(c,x)=>{const T=Te,W=_e,oe=Tt,pe=vn,ie=xe,Y=xt,Fe=Ke,Pe=it;return F(),ae(Pe,{name:"log",style:{"white-space":"nowrap"}},{header:t(()=>[n(T,{align:"center",wrap:!1},{default:t(()=>[C(d(c.$t("status.Log")),1)]),_:1})]),"header-extra":t(()=>[Ne(n(T,{align:"center",justify:"end",wrap:!0,style:{"margin-top":"0.2em","margin-left":"0.5em"}},{default:t(()=>[n(oe,{value:S.value,"onUpdate:value":[x[0]||(x[0]=me=>S.value=me),de],options:e(k),style:{width:"auto"},"consistent-menu-width":!1,"show-on-focus":!1,size:"tiny"},{arrow:t(()=>[n(W,{component:e(wa)},null,8,["component"])]),_:1},8,["value","options"]),n(oe,{value:e(A),"onUpdate:value":[x[1]||(x[1]=me=>Re(A)?A.value=me:null),x[2]||(x[2]=me=>V())],options:$,placeholder:c.$t("status.filterLogSelect"),size:"tiny",style:{width:"auto"},"consistent-menu-width":!1,"show-on-focus":!1},{arrow:t(()=>[n(W,{component:e(ya)},null,8,["component"])]),_:1},8,["value","placeholder"]),n(pe,{key:"b",checked:o.value,"onUpdate:checked":[x[3]||(x[3]=me=>o.value=me),x[4]||(x[4]=me=>me&&Ae(!0))],size:"small",style:{"font-size":"0.9em"}},{default:t(()=>[C(d(c.$t("status.autoScroll")),1)]),_:1},8,["checked"]),n(Fe,{trigger:"hover",show:e(v),disabled:!a.value,placement:"top",delay:0,duration:1e3},{trigger:t(()=>[n(ie,{style:{"max-width":"30em"},disabled:!0},{trigger:t(()=>[n(pe,{size:"small",checked:a.value,"onUpdate:checked":[x[5]||(x[5]=me=>a.value=me),le],style:{"font-size":"0.9em"}},{default:t(()=>[C(d(c.$t("status.expandLog")),1)]),_:1},8,["checked"])]),default:t(()=>[C(d(c.$t("status.expandLog")),1)]),_:1})]),default:t(()=>[n(T,{wrap:!1,align:"center",style:{"font-size":"0.8em"}},{default:t(()=>[n(Y,{value:e(b),"onUpdate:value":x[6]||(x[6]=me=>Re(b)?b.value=me:null),onUpdateValue:x[7]||(x[7]=me=>D()),disabled:!a.value,"format-tooltip":me=>`Log size: ${me}`,tooltip:!0,step:1,min:e(j),max:e(_),style:{"z-index":"3",width:"100px"}},null,8,["value","disabled","format-tooltip","min","max"])]),_:1})]),_:1},8,["show","disabled"])]),_:1},512),[[je,i.opened]])]),default:t(()=>[n(T,{wrap:!1,align:"stretch",class:et({"log-container":1,"expand-log":a.value}),style:ce(a.value?{height:e(h)+"px"}:{height:$t+"px"}),onKeydown:Ee,tabindex:"-1"},{default:t(()=>[n(e(gn),{ref_key:"scrollref",ref:p,distance:10,"x-scrollable":!0,onMousedownCapture:L,onWheel:x[8]||(x[8]=me=>o.value=!1),onScroll:q,load:"handleLogLoad",trigger:"none",style:ce([{"z-index":"2","padding-right":"10px",height:"100%"},a.value?{height:e(h)+"px"}:{}]),size:50},{default:t(()=>[i.opened?(F(),ee("table",cs,[y("thead",null,[y("tr",ds,[y("th",{class:"log-th",title:c.$t("status.table.core")},"th",8,ps),x[9]||(x[9]=y("th",{class:"log-th"},"no.",-1)),y("th",fs,d(c.$t("status.table.status")),1),y("th",gs,d(c.$t("status.table.details")),1),x[10]||(x[10]=y("th",{class:"log-th"},"size",-1))])]),y("tbody",ms,[y("tr",{style:ce(e(be))},null,4),(F(!0),ee(Me,null,gt(e(z).slice(e(B),e(B)+e(X)),({index:me,key:It,command:St,path:jt,core:Zt,zippedIndex:ut,completed:Ht,fileId:qo,shrinked:Go,width:Vt,height:Ko,outputWidth:Yo,outputHeight:Qo,size:Xo,outputSize:Wt},Jo)=>(F(),ee("tr",{key:It,class:et({"log-tr":1,completed:Ht,selected:c.imageIndex===ut,stripe:Jo%2}),ref_for:!0,ref:qt=>{c.imageIndex===ut&&(g.value=qt)},onClick:qt=>u("change-index",Ht,jt,qo,ut),onDblclick:()=>{c.imageIndex===ut&&u("open-preview")}},[y("td",hs,d(Zt>=0?Zt+1:"-"),1),y("td",_s,d(me+1),1),y("td",ws,d(St),1),y("td",ys,d(jt),1),Vt?(F(),ee("td",bs,[C(d(`[${Vt}Ã—${Ko}] (${e(Ze)(Xo,0)})`)+" ",1),Wt?(F(),ee("span",zs,[x[11]||(x[11]=C(" â†’ ")),y("span",null," ("+d(e(Ze)(Wt,0))+") ",1)])):ve("",!0),Go?(F(),ee("span",ks,d(` [${Yo}Ã—${Qo}]`),1)):ve("",!0)])):(F(),ee("td",xs))],42,vs))),128)),y("tr",{style:ce(e(E))},null,4)],512)],512)):ve("",!0),x[12]||(x[12]=y("div",{style:{height:"1em"}},null,-1))]),_:1},8,["style"])]),_:1},8,["class","style"])]),_:1})}}}),Ss={class:"container"},As={__name:"zipicon",setup(l){return(r,s)=>(F(),ee("span",Ss,[n(e(_e),null,{default:t(()=>[n(e(Pt))]),_:1}),s[0]||(s[0]=y("span",{class:"text"},"ZIP",-1))]))}},Ls=Be(As,[["__scopeId","data-v-8b8df2f0"]]),Cs=["innerHTML"],$s={style:{margin:"1px"}},Es=["href","download","onClick"],Fs={key:0,style:{position:"relative"}},Ps=["href","download"],Os=["href","download"],Us={key:0,style:{margin:"1px"}},Ms=["href","download","onClick"],Rs=ye({__name:"status.result",props:{processing:{type:Boolean},listLength:{},zippingFlag:{type:Boolean},converted:{},success:{},zippedTotalCount:{},zippedTotalSize:{},baseZipName:{},zips:{},unconvertedListText:{},unconvertedFileCount:{},unconvertedTotalSize:{},failedZips:{},failedZipDone:{type:Boolean},failedToCreateFailedZip:{type:Boolean},failedFileZippedCount:{},imgUrl:{},imgName:{},type:{}},emits:["all-zips-clicked","demand-zip-errors"],setup(l,{emit:r}){const s=st(),{t:i}=He(),a=kt(),o=l,u=r,m=w(!1),p=w([]),g=w([]),h=w(void 0),b=ke(()=>[{key:"open",label:i("status.openFailedList"),icon:()=>G(_e,()=>G(hn)),onSelect(){f()}},{key:"download",label:i("status.saveFailedList"),icon:()=>G(_e,()=>G(ba)),onSelect(){f(!0)}},{key:"zip",label:`${i("status.zipFailedList")}`+(o.failedZipDone?`(âœ”${i("status.done")})`:""),icon:()=>G(zt,{show:m.value&&!o.failedZipDone,size:"small"},()=>G(_e,()=>G(Pt))),disabled:m.value,onSelect(k){return m.value=!0,u("demand-zip-errors"),!1}}]);we([()=>o.zips.length,()=>o.failedZips.length],()=>{{p.value.length>o.zips.length&&(p.value.length=0);let k=0;const S=o.zips.length===1&&o.zippedTotalCount===o.listLength;for(let $=p.value.length;$<o.zips.length;$++){const A=o.zips[$],I=o.baseZipName+(S?"":"-"+String($+1).padStart(2,"0"))+".zip";k+=A.size,p.value[$]={url:A.url,size:A.size,number:S?0:$+1,sizeByUnit:Ze(A.size),name:I,count:A.count,clicked:!1}}}{g.value.length>o.failedZips.length&&(g.value.length=0);let k=0;const S=o.failedZipDone&&o.failedZips.length===1;for(let $=g.value.length;$<o.failedZips.length;$++){const A=o.failedZips[$],I=o.baseZipName+"-error"+(S?"":"-"+String($+1).padStart(2,"0"))+".zip";k+=A.size,g.value[$]={url:A.url,size:A.size,number:S?0:$+1,sizeByUnit:Ze(A.size),name:I,count:A.count,clicked:!1}}}});function z(k,S=!1){const{url:$,name:A}=k;if(S){const I=document.createElement("a");I.href=$,I.download=A,I.click()}k.clicked||(k.clicked=!0,o.processing||p.value.every(I=>I.clicked)&&u("all-zips-clicked"))}async function v(k){if(o.zippingFlag){if(p.value.length>=2&&!await new Promise((A,I)=>s.warning({title:i("Download"),content:i("status.confirmDownloadMessage",[p.value.length]),positiveText:"OK",negativeText:i("cancel"),onPositiveClick:()=>A(!0),onNegativeClick:()=>I()})))return;const S=p.value;for(const $ of S)z($,!0)}}function f(k=!1){const S=new Blob([o.unconvertedListText],{type:"text/plain;charset=utf8"}),$=URL.createObjectURL(S),A=document.createElement("a");A.href=$,A.target="_blank",k&&(A.download=o.baseZipName+"-error.txt"),A.click()}return(k,S)=>{const $=mn,A=Ke,I=$e,M=Te,H=Ls,R=Ut,_=za,j=it;return F(),ae(j,{name:"output",style:{"white-space":"nowrap"},disabled:""},{header:t(()=>[y("span",{style:{color:"black"},innerHTML:k.$t("status.Output")},null,8,Cs)]),default:t(()=>[n(M,{wrap:!1,vertical:"",style:{"margin-top":"-1.3em"}},{default:t(()=>[n(M,{justify:"center"},{default:t(()=>[Ne(n(M,{vertical:"",align:"center"},{default:t(()=>[n(A,{placement:"left"},{trigger:t(()=>[n($,{type:"line","indicator-placement":"inside",color:"lime","rail-color":"rgba(99, 255, 99, 0.5)","indicator-text-color":o.zippedTotalCount===k.listLength?"white":"green",processing:o.processing,percentage:o.zippedTotalCount/k.listLength*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[y("span",$s,d(o.zippedTotalCount/k.listLength*100|0)+"% "+d(k.$t("status.zippingProgress"))+" ("+d(o.zippedTotalCount)+"/"+d(o.converted)+")",1)]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[C(" "+d(k.$t("status.zippingProgress"))+" ("+d(o.zippedTotalCount/o.listLength*100|0)+"%) ",1)]),_:1}),e(p).length>=2||o.processing?(F(),ae(Qt,{key:0,name:"zips",class:"zip-buttons-parent",tag:"div"},{default:t(()=>[(F(!0),ee(Me,null,gt(e(p),(D,le)=>(F(),ee("span",{key:le},[n(A,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:D.url,download:D.name,class:"in-button-anchor",onClick:O=>z(D)},[n(I,{class:"zip-button",size:"tiny",color:D.clicked?"#050":"lime","text-color":D.clicked?"gray":"white",onClick:Xe(O=>z(D),["stop"]),round:""},{default:t(()=>[n(e(_e),{size:"tiny"},{default:t(()=>[n(e(Pt))]),_:1}),C("ZIP"+d(D.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Es)]),default:t(()=>[y("div",{style:ce({color:e(a).successColor})},[y("div",null,"ZIP "+d(D.number||"")+" ("+d(k.$t("success"))+")",1),y("div",null,d(D.name),1),y("div",null,d(D.sizeByUnit),1),y("div",null,d(k.$rt("{n} @:files",D.count)),1)],4)]),_:2},1024)]))),128))]),_:1})):ve("",!0)]),_:1},512),[[je,k.zippingFlag]])]),_:1}),n(Ye,null,{default:t(()=>[Ne(n(M,{justify:"center",align:"center"},{default:t(()=>[n(A,{trigger:"hover",duration:0,delay:0,placement:"left",style:ce({color:"white",backgroundColor:e(a).successColor}),"arrow-style":{backgroundColor:e(a).successColor}},{trigger:t(()=>[n(Ye,{name:"save"},{default:t(()=>[k.success>0?(F(),ee("span",Fs,[n(R,{value:k.zippingFlag?o.zippedTotalCount.toLocaleString("en-us"):o.type.replace(/\(.+\)/,""),color:e(a).successColorHover,offset:[-20,-3]},{default:t(()=>[k.zippingFlag?(F(),ae(I,{key:0,size:"medium",onClick:v,color:e(a).successColor,round:""},{default:t(()=>[e(p).length?(F(),ee("a",{key:0,href:e(p)[0].url,download:e(p)[0].name,class:"in-button-anchor",onClick:S[0]||(S[0]=Xe(()=>{},["prevent"]))},[n(H),C(" Ã— "+d(e(p).length)+" "+d(k.$t("status.saveAll")),1)],8,Ps)):ve("",!0)]),_:1},8,["color"])):(F(),ee("a",{key:1,href:o.imgUrl,download:o.imgName,class:"in-button-anchor"},[n(I,{size:"medium",color:e(a).successColor,round:""},{default:t(()=>[n(e(_e),{size:"tiny",component:e(_n)},null,8,["component"]),C(" "+d(k.$t("save")),1)]),_:1},8,["color"])],8,Os))]),_:1},8,["value","color"])])):ve("",!0)]),_:1})]),default:t(()=>[o.listLength>=2?(F(),ee(Me,{key:0},[y("div",null,d(e(i)("success"))+": "+d(k.zippedTotalCount.toLocaleString()),1),y("div",null,d(e(i)("status.totalSize"))+": "+d(e(Ze)(o.zippedTotalSize)),1),y("div",null,"ZIP Ã— "+d(e(p).length),1),y("div",null,d(e(i)("status.saveAllZipsTooltip")),1)],64)):(F(),ee(Me,{key:1},[C(d(k.$t("status.downloadConvertedImage",e(p).length)),1)],64))]),_:1},8,["style","arrow-style"]),!o.processing&&o.success!==k.listLength?(F(),ae(_,{key:0,options:e(b),onSelect:S[1]||(S[1]=(D,le)=>{var O;return(O=e(b).find(({key:ge})=>D===ge))==null?void 0:O.onSelect()}),"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start"},{default:t(()=>[n(A,{show:e(h),duration:0,delay:0,placement:"right",style:ce({color:"white",backgroundColor:e(a).errorColor}),"arrow-style":{backgroundColor:e(a).errorColor}},{trigger:t(()=>[n(R,{value:o.unconvertedFileCount.toLocaleString(),color:e(a).errorColorHover,offset:[-0,-3]},{default:t(()=>[n(I,{size:"small",color:e(a).errorColor},{default:t(()=>[n(e(_e),{size:"medium",style:{"vertical-align":"middle"},component:e(ka)},null,8,["component"])]),_:1},8,["color"])]),_:1},8,["value","color"])]),default:t(()=>[y("div",null,[y("div",null,d(e(i)("failed"))+": "+d(o.unconvertedFileCount.toLocaleString()),1),y("div",null,d(e(i)("status.totalSize"))+": "+d(e(Ze)(o.unconvertedTotalSize)),1)])]),_:1},8,["show","style","arrow-style"])]),_:1},8,["options"])):ve("",!0)]),_:1},512),[[je,!o.processing]])]),_:1}),n(Ye,{name:"zipcontainer"},{default:t(()=>[Ne(n(M,{vertical:"",align:"center"},{default:t(()=>[n(A,{placement:"left"},{trigger:t(()=>[n($,{type:"line","indicator-placement":"inside",color:"red","rail-color":"rgba(255, 0, 0, 0.5)","indicator-text-color":o.failedFileZippedCount===o.unconvertedFileCount?"white":"#500",processing:e(m)&&!o.failedZipDone&&!o.failedToCreateFailedZip,percentage:o.failedFileZippedCount/o.unconvertedFileCount*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[o.failedToCreateFailedZip?(F(),ee("div",{key:1,style:ce({color:e(a).errorColor})},d(k.$t("status.failureZippingFailedFiles")),5)):(F(),ee("span",Us,d(o.failedFileZippedCount/o.unconvertedFileCount*100|0)+"% "+d(k.$t("status.zipped"))+" ("+d(o.failedFileZippedCount)+"/"+d(o.unconvertedFileCount)+")",1))]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[C(" "+d(k.$t("status.zippingProgress"))+" ("+d(o.failedFileZippedCount/o.unconvertedFileCount*100|0)+"%) ",1)]),_:1}),n(Qt,{name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(F(!0),ee(Me,null,gt(e(g),(D,le)=>(F(),ee("span",{key:le},[n(A,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:D.url,download:D.name,class:"in-button-anchor",onClick:O=>z(D)},[n(I,{class:"zip-button",size:"tiny",color:D.clicked?"#551122":"#F00","text-color":D.clicked?"gray":"white",onClick:Xe(O=>z(D),["stop"]),round:""},{default:t(()=>[n(e(_e),{size:"tiny",component:e(xa)},null,8,["component"]),C("ZIP"+d(D.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Ms)]),default:t(()=>[y("div",{style:ce({color:e(a).errorColor})},[y("div",null,"ZIP "+d(D.number||"")+" ("+d(k.$t("failed"))+")",1),y("div",null,d(D.name),1),y("div",null,d(D.sizeByUnit),1),y("div",null,d(k.$rt("{n} @:files",D.count)),1)],4)]),_:2},1024)]))),128))]),_:1})]),_:1},512),[[je,e(m)]])]),_:1})]),_:1})]),_:1})}}}),Ds=Be(Rs,[["__scopeId","data-v-1d58375d"]]),Bs=ye({__name:"status",props:{processing:{type:Boolean},status:{},interval:{}},emits:["all-zips-clicked","demand-zip-errors","demand-image","delete-image"],setup(l,{expose:r,emit:s}){const i={itemMargin:"1px",titlePadding:"2px",titleFontSize:"0.8rem"};st();const{t:a}=He(),o=kt(),u=l,m=s;r({cleanup:re});const p=w(!1),g=w([]),h=w(!1),b=w(!1),z=w([0,0]),v=w([0,0]),f=w([0,0]),k=w([0,0]),S=w([0,0]),$=w([0,0]),A=w(0),I=w(0),M=w([0,0]),H=w(0),R=w(o.value.infoColor),_=w("#000000"),j=w("#000000"),D=w(0),le=w(0),O=w(""),ge=w("00:00:00"),Ae=w(null),be=w(["progress","log","output"]),E=U=>be.value.includes(U),B=U=>be.value.push(U),X=U=>{const q=be.value.findIndex(L=>L===U);q>=0&&be.value.splice(q,1)},J=ke(()=>be.value.includes("log")),fe=ke(()=>be.value.includes("progress")),ue=w(!1),se=w(!0),Ie=w("processed"),Z=bt({name:"",originalName:"",size:0,url:"",originalUrl:"",originalSize:0,dataUrl:"",index:0,various:{shrinked:!1}}),P=Je("body"),V=Je("imageViewer");Ue(()=>{we(u.status,()=>de(),{deep:!1});let U=0;const q=()=>{if(U)return;const L=Date.now();ge.value="00:00:00",U=window.setInterval(()=>{const c=(Date.now()-L)/1e3;ge.value=`${String(c/3600|0).padStart(2,"0")}:${String(c/60%60|0).padStart(2,"0")}:${String(c%60|0).padStart(2,"0")}`},300)};q(),b.value=!0,we(()=>u.processing,(L,c)=>{L||Ee(),L?(q(),g.value.length=0,p.value=!1,h.value=!1):(clearInterval(U),U=0)}),We(()=>{clearInterval(U),clearTimeout(ne)}),ft(()=>clearInterval(U))}),We(()=>{re()}),ft(()=>{clearTimeout(ne)});const K=u.interval||100;let te=!1,ne=0;function de(){if(te)return;if(ne){te=!0;return}ne=window.setTimeout(()=>{ne=0,te&&(te=!1,de())},K);const U=u.status;p.value=U.length>=2,v.value[1]=v.value[0],v.value[0]=U.startedCount,f.value[1]=f.value[0],f.value[0]=U.success,k.value[1]=k.value[0],k.value[0]=U.failure,S.value[1]=S.value[0],S.value[0]=U.done,$.value[1]=$.value[0],$.value[0]=U.converted,A.value=U.retried,I.value=U.length,M.value[1]=M.value[0],M.value[0]=U.zippedTotalCount,D.value=U.inputTotalSize,le.value=U.outputTotalSize,H.value=U.failedFileZippedCount;const q=le.value-D.value;O.value=(q>=0?"+ ":"")+Ze(q);const L=le.value/D.value,c=(256|Math.min(255,Math.max(0,L-1.5)*255|0)).toString(16).substring(1);_.value="#"+c+"0000";const x=1024*1024,T=(256|Math.min(255,Math.max(0,q/1024/x)*255|0)).toString(16).substring(1);j.value="#"+T+"0000",z.value[1]=z.value[0],z.value[0]=f.value[0]/I.value*100,(J.value||!u.processing)&&(g.value=g.value.concat(U.logs),U.logs.length=0),Ae.value=U.thumbnail,u.processing?R.value=k.value[0]?o.value.errorColor:A.value?o.value.warningColor:o.value.infoColor:b.value=!1,U.convertedImageUrl!==Z.url&&(Z.url=U.convertedImageUrl,Z.name=U.convertedImageName,Z.dataUrl=U.convertedImageDataUrl,Z.size=U.convertedImageSize||U.outputTotalSize,Z.originalSize=U.convertedImageOrgSize,Z.originalName=U.convertedImageOrgName,Z.index=U.convertedImageIndex,Z.originalUrl=U.convertedImageOrgUrl,Z.various={shrinked:U.convertedImageShrinked})}function Ee(){const U=u.status;R.value=u.status.success===u.status.length?o.value.successColor:o.value.errorColor,Ie.value==="processed"&&(Ie.value="zipped"),U.success>0&&(se.value&&(X("log"),g.value.length>=5&&(ue.value=!0)),B("preview"))}async function Le(U,q,L,c){var T;if(!U)return;const x=c;console.log(U,q,L,c,"completed, path, fileId, zippedIndex"),console.log(x,u.status.ziplogs[x]),E("preview")||(B("preview"),await Se()),(T=V.value)==null||T.changeIndex(x+1),await Se(()=>{var W;try{(W=V.value)==null||W.$el.scrollIntoView({behavior:"instant",block:"nearest"})}catch{}})}const he=w(!1);function re(){he.value=!0,URL.revokeObjectURL(Z.url),URL.revokeObjectURL(Z.originalName),Z.originalUrl="",Z.url="",Z.index=0,u.status.logs.length=0,g.value.length=0}return(U,q)=>{const L=Te,c=it,x=wn;return F(),ae(L,{ref_key:"body",ref:P,vertical:"",justify:"center"},{default:t(()=>[n(x,{"display-directive":"show","trigger-areas":["arrow","main"],"expanded-names":e(be),"onUpdate:expandedNames":q[7]||(q[7]=T=>Re(be)?be.value=T:null),"theme-overrides":i},{default:t(()=>[n(Xl,{processing:e(b),"elapsed-time":e(ge),"success-perc":e(z)[0],"input-total-size":e(D),"output-total-size":e(le),"file-type":u.status.type,shrink:u.status.shrink,threads:u.status.threads,"zip-size":u.status.zipSize,"rate-color":e(_),"dif-color":e(j),"total-size-dif-str":e(O),thumbnail:e(Ae),opened:e(fe)},{center:t(()=>[e(he)?ve("",!0):(F(),ae(us,{key:0,index:e(v)[0],success:e(f)[0],length:U.status.length,"success-to":e(f)[0],"success-from":e(f)[1],failure:e(k)[0],"success-perc-to":e(z)[0],"success-perc-from":e(z)[1],retried:e(A),processing:e(b),interval:e(K),"status-color":e(R),class:"center-column"},null,8,["index","success","length","success-to","success-from","failure","success-perc-to","success-perc-from","retried","processing","interval","status-color"]))]),_:1},8,["processing","elapsed-time","success-perc","input-total-size","output-total-size","file-type","shrink","threads","zip-size","rate-color","dif-color","total-size-dif-str","thumbnail","opened"]),n(Is,{processing:e(b),"image-index":e(Z).index,opened:e(J),"preview-collapsed":E("preview"),logs:e(g),expanded:e(ue),"onUpdate:expanded":q[0]||(q[0]=T=>Re(ue)?ue.value=T:null),"auto-scroll":e(se),"onUpdate:autoScroll":q[1]||(q[1]=T=>Re(se)?se.value=T:null),order:e(Ie),onChangeIndex:Le,onOpenPreview:q[2]||(q[2]=T=>{var W;return(W=e(V))==null?void 0:W.openPreview()}),name:"log",style:{"white-space":"nowrap"}},null,8,["processing","image-index","opened","preview-collapsed","logs","expanded","auto-scroll","order"]),n(c,{title:U.$t("status.PreviewImage"),name:"preview",style:{"white-space":"nowrap"},disabled:!(e(f)[0]>0)},{default:t(()=>[n(L,{justify:"center",align:"center",vertical:"",style:{"margin-top":"-1em"}},{default:t(()=>[n(ql,{"_v-else-if":"imageViewerStarted && status.success > 0 /*&& (props.status.threads || !zippingFlag)*/ && !cleaningUp",ref_key:"imageViewer",ref:V,url:e(Z).url,size:e(Z).size,"original-url":e(Z).originalUrl,"original-size":e(Z).originalSize,name:e(Z).name,originalName:e(Z).originalName,length:e(f)[0],index:e(Z).index,"various-info":e(Z).various,"is-single":!e(p),onDemandImage:q[3]||(q[3]=T=>m("demand-image",T)),on_deleteImage:q[4]||(q[4]=T=>m("delete-image",T)),_close:"imageViewerStarted=false"},null,8,["url","size","original-url","original-size","name","originalName","length","index","various-info","is-single"])]),_:1})]),_:1},8,["title","disabled"]),n(Ds,{processing:e(b),"list-length":e(I),zippingFlag:e(p),zips:u.status.zips,"img-url":e(Z).url,"img-name":e(Z).name,success:e(f)[0],failure:e(k)[0],done:e(S)[0],converted:e($)[0],retried:e(A),"zipped-total-count":e(M)[0],"zipped-total-size":u.status.zippedTotalSize,"base-zip-name":u.status.baseZipName,"failed-file-zipped-count":e(H),"failed-to-create-failed-zip":u.status.failedToCreateFailedZip,"failed-zip-done":u.status.failedZipDone,"failed-zips":u.status.failedZips,"unconverted-file-count":u.status.unconvertedFileCount,"unconverted-list-text":u.status.unconvertedListText,"unconverted-total-size":u.status.unconvertedTotalSize,type:u.status.type,onAllZipsClicked:q[5]||(q[5]=T=>m("all-zips-clicked")),onDemandZipErrors:q[6]||(q[6]=T=>m("demand-zip-errors"))},null,8,["processing","list-length","zippingFlag","zips","img-url","img-name","success","failure","done","converted","retried","zipped-total-count","zipped-total-size","base-zip-name","failed-file-zipped-count","failed-to-create-failed-zip","failed-zip-done","failed-zips","unconverted-file-count","unconverted-list-text","unconverted-total-size","type"])]),_:1},8,["expanded-names"])]),_:1},512)}}}),Ns=Be(Bs,[["__scopeId","data-v-5286bb27"]]),js=["innerHTML"],Zs=ye({__name:"converter",props:tt({input:{},format:{},quality:{},retainExtension:{type:Boolean},maxZipSizeMB:{},threads:{}},{showNote:{type:Boolean},showNoteModifiers:{}}),emits:tt(["start","end"],["update:showNote"]),setup(l,{emit:r}){Ge(Ve);const{t:s}=He(),i=st(),a=Ta(),o=10,u=navigator.hardwareConcurrency,m=typeof OffscreenCanvas=="function",p=100,g=l,h=Ce(l,"showNote"),b=r,z=w(!1),v=w(!1),f=w(!1),k=w(!1),S=w(!1),$=w(()=>"initializing"),A=w("info"),I=bt(X()),M=Je("stat"),H=w(0);let R=!1,_=()=>{},j,D=0,le=!1;we(()=>g.input,P=>{P!=null&&P.length&&fe(P)}),we(k,P=>{document.body.style.overflowY=P?"hidden":"auto"}),Ue(async()=>{await Ie(),Z()});async function O(){let P=!0;if(D>o*1e3&&!le&&I.success>0&&(P=!1,await new Promise(V=>{i.warning({title:s("confirmCloseDialogTitle"),autoFocus:!0,maskClosable:!1,positiveText:s("close"),negativeText:s("back"),onPositiveClick:()=>P=!0,onAfterLeave:V,content:s("confirmCloseDialog")})})),!P)return!1;a.destroyAll(),k.value=!1,h.value=!1}function ge(P){j==null||j(P),console.log(P,"demanded")}function Ae(P){Ct==null||Ct(P),console.log(P,"delete")}function be(){!v.value&&z.value?v.value=!0:O()}function E(){fe(g.input)}let B=w(()=>{});function X(P){const V={logs:[],ziplogs:[],startedCount:0,converted:0,success:0,failure:0,retried:0,done:0,length:0,zippedTotalCount:0,zippingErrorCount:0,zippedTotalSize:0,processing:!1,zips:[],inputTotalSize:0,outputTotalSize:0,thumbnail:null,baseZipName:"testzipname",type:"image/any",startedTime:Date.now(),convertedImageDataUrl:"",convertedImageName:"",convertedImageUrl:"",convertedImageOrgUrl:"",convertedImageIndex:-1,convertedImageShrinked:!1,zipSize:g.maxZipSizeMB,shrink:N.multithread&&N.shrinkImage?[N.maxWidth,N.maxHeight]:void 0,unconvertedListText:"",failedZipDone:!1,failedZips:[],unconvertedFileCount:0,unconvertedTotalSize:0,failedFileZippedCount:0,failedToCreateFailedZip:!1};return Object.assign(P||{},V)}function J(){S.value=!1,URL.revokeObjectURL(I.convertedImageUrl),URL.revokeObjectURL(I.convertedImageOrgUrl);for(const P of I.zips)URL.revokeObjectURL(P.url);I.zips.length=0;for(const P of I.failedZips)URL.revokeObjectURL(P.url);I.failedZips.length=0,X(I),_(),_=()=>{},j=null,le=!1,f.value=!1,v.value=!1}async function fe(P){if(z.value){i.error({title:"Busy",positiveText:"OK",content:s("interfered")});return}k.value&&(H.value^=1);let V=P.concat();X(I),J(),k.value=!0,S.value=!0,z.value=!0,I.processing=!0,A.value="info",$.value=()=>s("processing");const K=new Set,te=g.format,ne=g.quality,de=[...te.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),Ee=se(te,ne,V[0].webkitRelativePath);I.length=V.length,I.baseZipName=Ee,I.type=te.replace(/image\//,"").toUpperCase()+(/jpe?g|webp/i.test(te)?" ("+ne+")":""),I.threads=R?0:g.threads;const Le=Date.now();b("start");let he,re,U;if(!R&&g.threads>=2?(j=Al,U=await wl({files:V,completedFileIdSet:K,ConvStats:I,canceled:v,props:g,imageType:te,quality:ne,outputExt:de,format:te,message:a})):(j=Pl,U=await Fl(V,K,g,v,I)),{exception:re,callbackToGenerateFailedZips:he,callbackToClearConverter:_}=U,re){let q;switch(re.message){case"worker-load-error":q=s("errMsgWorkerLoadError");break;default:q="unexpected error"}i.error({title:"Error",autoFocus:!0,maskClosable:!1,closable:!1,content:()=>G("div",[G("p",q),G($e,{onClick(){location.reload()}},s("Reload"))])})}if(I.success===I.length?(A.value="success",$.value=()=>s("completed")):(A.value="error",$.value=()=>v.value?s("aborted"):s("incomplete")),K.size!==V.length){const q=ue(P,K);B.value=()=>{!q||!q.length||he(q)}}z.value=!1,I.processing=!1,f.value=!0,V.length=0,D=Date.now()-Le,b("end")}function ue(P,V){const K=[],te=[];let ne=0;for(const de of P)V.has(de._id)||(K.push(de),te.push(de.webkitRelativePath||de.relativePath||de.name),ne+=de.size);return te.length&&(I.unconvertedListText=te.join(`
`),I.unconvertedFileCount=K.length,I.unconvertedTotalSize=ne),K}function se(P,V,K){var Le;const te=new Date;P=P.replace(/^image\//,"").toLowerCase();const ne=N.useFolderNameForZip&&((Le=String(K).match(/^\/?([^/]+)\//))==null?void 0:Le[1])||"avif2jpg",de=`
    ${te.getFullYear().toString().substring(2)}
    ${String((te.getMonth()+1)*100+te.getDate()).padStart(4,"0")}
    ${String(te.getHours()*1e4+te.getMinutes()*100+te.getSeconds()).padStart(6,"0")}
    -
    ${P+(/jpe?g|webp/i.test(P)?V:"")}
  `.replace(/\s/g,"");return`${ne}-${de}`.replace(/\s+/g," ")}async function Ie(){const P="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",V=document.createElement("img"),K=En(V).then(()=>!0,()=>!1);V.src=P,await K||i.warning({title:"Unsupported",positiveText:"OK",maskClosable:!1,content:s("avifUnsupported")})}function Z(){(!m||u<2||!Promise.any)&&(R=!0),R&&(Oe.value=0)}return(P,V)=>{var he;const K=_e,te=Ut,ne=xe,de=Te,Ee=zt,Le=yn;return F(),ee(Me,null,[!e(z)&&((he=g.input)!=null&&he.length)?(F(),ae(de,{key:0,justify:"center",align:"center",style:{"margin-top":"0.4em"}},{default:t(()=>[n(ne,{trigger:"hover",placement:"top","keep-alive-on-hover":!1,duration:0,delay:50},{trigger:t(()=>{var re;return[n(te,{value:((re=P.input)==null?void 0:re.length)||0,offset:[-12,-5],color:"#99999966"},{default:t(()=>[n(e($e),{onClick:E,round:"",size:"medium"},{icon:t(()=>[n(K,{size:"1.2em",color:"#CCCCCC"},{default:t(()=>[n(e(Ia))]),_:1})]),default:t(()=>[C(" "+d(e(s)("convertAgain")),1)]),_:1})]),_:1},8,["value"])]}),default:t(()=>{var re;return[y("div",{innerHTML:e(s)("reconvertTip",(re=g.input)==null?void 0:re.length)},null,8,js)]}),_:1})]),_:1})):ve("",!0),n(Le,{ref:"processingModal","display-directive":"show",show:e(k),"onUpdate:show":V[2]||(V[2]=re=>Re(k)?k.value=re:null),closable:e(f),"close-on-esc":!1,preset:"dialog",onClick:V[3]||(V[3]=re=>{e(a).destroyAll()}),onMaskClick:V[4]||(V[4]=re=>{e(a).destroyAll()}),onClose:O,onEsc:be,title:e($),type:e(A),"mask-closable":!1,onAfterLeave:J,onBeforeLeave:V[5]||(V[5]=re=>{e(M).cleanup()}),class:"processing-dialog"},{default:t(()=>[n(de,{vertical:"",style:{"flex-grow":"1"}},{default:t(()=>[e(S)?(F(),ae(Ns,{ref_key:"stat",ref:M,key:e(H),processing:e(z),status:e(I),interval:p,onAllZipsClicked:V[0]||(V[0]=re=>Re(le)?le.value=!0:le=!0),onDemandZipErrors:e(B),onDemandImage:ge,onDeleteImage:Ae},null,8,["processing","status","onDemandZipErrors"])):ve("",!0),n(de,{justify:"end",align:"center",wrap:!1},{default:t(()=>[e(z)?(F(),ae(e($e),{key:0,disabled:e(v),ref:"cancelbutton",round:"",size:"large",onClick:V[1]||(V[1]=re=>v.value=!0)},{default:t(()=>[n(Ee,{show:e(v)&&!e(f),size:"small"},{default:t(()=>[C(d(e(s)("cancel")),1)]),_:1},8,["show"])]),_:1},8,["disabled"])):e(f)?(F(),ae(e($e),{key:1,onClick:O,round:"",size:"large"},{default:t(()=>[C(d(e(s)("close")),1)]),_:1})):ve("",!0)]),_:1})]),_:1})]),_:1},8,["show","closable","title","type"])],64)}}}),Hs="/avif2jpeg/dist/avif.png",Vs={class:"container-1"},Ws={style:{position:"relative"}},qs={style:{position:"absolute","font-size":"0.5em",right:"-3.5em",bottom:"-1.5em","white-space":"nowrap"}},Gs={style:{color:"#666666"}},Ks=["innerHTML"],Ys={style:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","font-size":"xx-small","white-space":"nowrap"}},Qs=ye({__name:"droptarget",props:{forbidden:{type:Boolean},dropTarget:{}},emits:["drop"],setup(l,{emit:r}){Ge(Ve);const s=l,i=r,a=Sa(),o=w(!1),u=w(0),m=w("");Ue(()=>{p(s.dropTarget||document)});function p(h){document.ondragstart=b=>b.preventDefault(),document.ondragover=b=>b.preventDefault(),h.ondrop=async b=>{var v;if(b.preventDefault(),o.value||s.forbidden)return;o.value=!0,u.value=0,m.value="";let z;try{const f=[...b.dataTransfer.items].map(k=>k.webkitGetAsEntry());a.start(),z=await g(f),a.finish()}catch{z=[...((v=b.dataTransfer)==null?void 0:v.files)??[]],a.error()}o.value&&(o.value=!1,i("drop",z))}}async function g(h,b){b=b||[];for(const z of h)if(z.isFile){const v=await new Promise(f=>z.file(k=>f(k)));Object.defineProperty(v,"webkitRelativePath",{value:z.fullPath}),b.push(v),u.value++}else if(z.isDirectory){m.value=z.fullPath;const v=z.createReader();do{const f=await new Promise(k=>v.readEntries(S=>k(S)));if(!f.length)break;await g(f,b)}while(!0)}return b}return(h,b)=>{const z=_e,v=Ke,f=Te,k=xe,S=yn;return F(),ee("div",Vs,[n(k,{to:!1,"display-directive":"show",trigger:"hover",duration:0,delay:0,placement:"bottom-end"},{trigger:t(()=>[n(f,{vertical:"",class:"container-2"},{default:t(()=>[n(f,{align:"center",wrap:!1,class:"container-3"},{default:t(()=>[n(f,{vertical:"",align:"center",wrap:!1,style:{"font-weight":"bold","font-size":"1em","line-height":"90%","white-space":"nowrap"}},{default:t(()=>[b[5]||(b[5]=y("span",null,"Drag & Drop",-1)),y("span",Ws,[b[4]||(b[4]=C(" AVIF Images ")),y("span",qs,[b[3]||(b[3]=C(" or ")),n(v,{placement:"bottom-end"},{trigger:t(()=>[y("span",Gs,[n(z,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Mt))]),_:1}),b[1]||(b[1]=C(" Folders "))])]),default:t(()=>[b[2]||(b[2]=C(" You can drag and drop your local folders "))]),_:1})])])]),_:1}),n(f,null,{default:t(()=>b[6]||(b[6]=[y("img",{src:Hs,class:"avif"},null,-1)])),_:1})]),_:1})]),_:1})]),default:t(()=>[y("h3",{innerHTML:h.$t("droptarget"),style:{"max-width":"200px","text-align":"center","word-break":"keep-all","overflow-wrap":"break-word"}},null,8,Ks)]),_:1}),n(S,{show:e(o),"onUpdate:show":b[0]||(b[0]=$=>Re(o)?o.value=$:null),closable:!0,preset:"dialog",title:"Parsing dropped items.",type:"info","mask-closable":!1,"negative-text":h.$t("cancel")},{default:t(()=>[n(f,{vertical:"",align:"center"},{default:t(()=>[y("div",Ys,d(e(m)),1),y("div",null,"found "+d(e(u))+" files",1)]),_:1})]),_:1},8,["show","negative-text"])])}}}),Xs=Be(Qs,[["__scopeId","data-v-963c44a5"]]),Js={class:"container-1"},ei={class:"container-2"},ti=["innerHTML"],ni=["innerHTML"],oi={style:{"white-space":"nowrap"}},ai={style:{"padding-left":"1em"}},li=["innerHTML"],si=["accept"],ii=ye({__name:"file-selector",props:tt({target:{},userExtensions:{},forbidden:{type:Boolean}},{expanded:{type:Boolean,required:!1},expandedModifiers:{},disableNotifyingFolderSelect:{type:Boolean},disableNotifyingFolderSelectModifiers:{}}),emits:tt(["input","click","cancel","on-change-accept","update:target","update:userExtensions"],["update:expanded","update:disableNotifyingFolderSelect"]),setup(l,{emit:r}){const s=st(),{t:i}=He(),a=Ge(Ve),o=["avif_only","all_images","all_files","edit_type"],u=[];for(const E of o)u.push({label:()=>i("fileTypeRadioOptions."+E),value:E});const m=({node:E,option:B})=>G(xe,{placement:"right"},{trigger:()=>E,default:()=>le(B.value).replace(/,/g,", ")}),p=l,g=r,h=w(0),b=w(!1),z=w(!1),v=ke(()=>le(S.value)),f=ke(()=>$.value.split(",").every(B=>/^\s*(\.[\w\-]+)*\s*$/.test(B))?"success":"error"),k=ke(()=>!p.forbidden&&!z.value);Ce(l,"expanded");const S=ke({get:()=>o.indexOf(p.target)>=0?p.target:o[0],set:E=>{g("update:target",E)}}),$=ke({get:()=>p.userExtensions,set:E=>{g("update:userExtensions",E)}}),A=Ce(l,"disableNotifyingFolderSelect"),I=w(null),M=w(null),H=w(D());we(S,E=>{g("on-change-accept",v.value)}),Ue(()=>{});async function R(E){if(g("click"),E===M.value&&!A.value){let B=!1;if(await new Promise(X=>{s.info({title:i("loadfolderNotifyingTitle"),positiveText:i("Continue"),negativeText:i("Cancel"),onAfterLeave:()=>X(B),onPositiveClick:()=>B=!0,content:()=>G("div",[G("p",{},i("loadfolderNotifyingMessageTerm1")),G("div",[G(pn,{width:250,style:{border:"3px solid gray"},src:"/avif2jpeg/dist//notification-folder.png"})]),G("p",{},i("loadfolderNotifyingMessageTerm2")),G("p",[G(vn,{onUpdateChecked:J=>A.value=J,checked:A.value},()=>i("checkboxTextDontShowThis"))])])})}),!B){A.value=!1,g("cancel");return}}E.click()}function _(){g("cancel")}function j(E){const X=[...E.target.files];I.value.value="",M.value.value="",ge(X)}function D(){return"webkitdirectory"in document.createElement("input")}function le(E){switch(E){case"avif_only":return".avif, .webp";case"all_images":return".jpg, .jpeg, .jfif, .pjpeg, .pjp, .gif, .png, .webp, .avif, .bmp, .apng, .ico";case"edit_type":return $.value;case"all_files":default:return".*"}}async function O(E){const B=String(v.value).toLowerCase().replace(/\s+/g,"");if(B&&v.value!==".*"){const X=B.split(",");E=E.filter(J=>X.includes(J.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),E.length||(await new Promise(J=>{s.error({title:"Images Not Found",positiveText:"OK",onAfterLeave:J,content:()=>G("div",[G(fn,{description:"NO IMAGES"}),`${i("noimage")}`,G("br"),v.value])})}),_())}return E}async function ge(E){z.value=!0,E=await O(E),h.value=E.length,E.length>0&&g("input",be(E)),z.value=!1}let Ae=0;function be(E){const B=[];for(const X of E)X.hasOwnProperty("_id")||Object.defineProperty(X,"_id",{value:Ae++}),B.push(X);return B}return(E,B)=>{const X=_e,J=$e,fe=Te,ue=Tt,se=La,Ie=Aa,Z=Ke;return F(),ee(Me,null,[y("div",Js,[y("div",ei,[n(fe,{vertical:"",align:"center",justify:"center",inline:"",size:"large"},{default:t(()=>[n(fe,{align:"center",justify:"space-around",class:"main-buttons"},{default:t(()=>[n(fe,{vertical:"",align:"stretch",justify:"center"},{default:t(()=>[n(e(xe),{to:!1,"display-directive":"show",show:e(a).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(a).LANDSCAPE.value?"right":"top",duration:0,delay:0,"z-index":10},{trigger:t(()=>[n(J,{disabled:!e(k),size:"large",onClick:B[0]||(B[0]=P=>R(e(I))),round:"",style:{width:"100%","background-color":"white","font-size":"1.5em"}},{icon:t(()=>[n(X,{size:"large",color:"gray"},{default:t(()=>[n(e(bn))]),_:1})]),default:t(()=>[C(" "+d(E.$t("loadbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[y("div",{innerHTML:E.$t("loadbuttontooltip")},null,8,ti)]),_:1},8,["show","placement"]),!e(a).IS_SP&&e(H)||e(a).SSR?(F(),ee(Me,{key:0},[n(fe,{align:"center",justify:"center",style:{color:"gray",margin:"0em"}},{default:t(()=>[C(d(E.$t("or")),1)]),_:1}),n(e(xe),{to:!1,"display-directive":"show",trigger:"hover",placement:"left","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:e(a).showTooltipsBeforeMounted.value},{trigger:t(()=>[n(J,{disabled:!e(k),size:"large",onClick:B[1]||(B[1]=P=>R(e(M))),round:"",style:{width:"100%","background-color":"white","font-size":"1.5em"}},{icon:t(()=>[n(X,{size:"large",color:"gray"},{default:t(()=>[n(e(Mt))]),_:1})]),default:t(()=>[C(" "+d(E.$t("loadfolderbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[y("div",{innerHTML:E.$t("loadfoldertooltip")},null,8,ni)]),_:1},8,["show"])],64)):ve("",!0)]),_:1}),e(a).IS_SP?ve("",!0):(F(),ae(Xs,{key:0,onDrop:ge,forbidden:!e(k),class:"drop-target"},null,8,["forbidden"]))]),_:1}),n(fe,{vertical:""},{default:t(()=>[n(fe,{wrap:e(a).IS_SP,align:"center",justify:"stretch"},{default:t(()=>[y("span",oi,d(E.$t("TargetFileTypeExt"))+": ",1),n(e(xe),{"keep-alive-on-hover":!1,placement:"right",style:{"max-width":"200px"},duration:0,delay:0},{trigger:t(()=>[n(ue,{trigger:"click",width:"trigger",size:"small",value:e(S),"onUpdate:value":B[2]||(B[2]=P=>Re(S)?S.value=P:null),options:u,"render-option":m,"consistent-menu-width":!1},null,8,["value"])]),default:t(()=>[C(" "+d(le(e(S)).replace(/,/g,", ")),1)]),_:1})]),_:1},8,["wrap"]),e(S)==="edit_type"?(F(),ae(e(xe),{key:0,trigger:"hover","keep-alive-on-hover":!1,placement:"bottom-start",show:e(b),duration:0,delay:0},{trigger:t(()=>[y("div",ai,[n(Z,{trigger:"manual",placement:"right-end",show:e(S)==="edit_type"&&e(f)!=="success"&&!!e(b)},{trigger:t(()=>[n(se,{value:e($),"onUpdate:value":B[3]||(B[3]=P=>Re($)?$.value=P:null),status:e(f),disabled:e(S)!=="edit_type",onFocus:B[4]||(B[4]=P=>b.value=!0),onBlur:B[5]||(B[5]=P=>b.value=void 0),clearable:!0,size:"small",placeholder:".jpg, .gif, .png",spellcheck:"false"},null,8,["value","status","disabled"])]),default:t(()=>[n(Ie,{type:"error","show-icon":!0,title:"Validation error"},{default:t(()=>B[6]||(B[6]=[C(" Please correct the extension list."),y("br",null,null,-1),y("ul",null,[y("li",null,"Each extension must begin with a period. "),y("li",null,"Separate each extension with a comma. "),y("li",null,"Use alphameric characters.")],-1)])),_:1})]),_:1},8,["show"])])]),default:t(()=>[y("span",{innerHTML:E.$t("editAcceptTypes")},null,8,li)]),_:1},8,["show"])):ve("",!0)]),_:1})]),_:1})])]),y("input",{ref_key:"fileinput",ref:I,onInput:j,onCancel:_,type:"file",multiple:"",accept:e(v),style:{display:"none"}},null,40,si),y("input",{ref_key:"folderinput",ref:M,webkitdirectory:"",directory:"",onInput:j,onCancel:_,type:"file",style:{display:"none"}},null,544)],64)}}}),ri=Be(ii,[["__scopeId","data-v-e613e1ac"]]),ui={style:{"white-space":"nowrap"}},ci=ye({__name:"settings-output",props:{quality:{},format:{}},emits:["update:format","update:quality"],setup(l,{emit:r}){const s=l,i=r,{t:a}=He(),o=Ge(Ve),u=w([]),m=["image/jpeg","image/png","image/gif","image/bmp","image/avif","image/webp"],p=ke({get:()=>s.format,set:f=>{f=z(f),i("update:format",f)}}),g=ke({get:()=>s.quality,set:f=>{i("update:quality",f)}}),h=ke(()=>/png|bmp/i.test(p.value)),b=w(null);Ue(()=>{v()});function z(f){return u.value.indexOf(f)<0&&(f=u.value[0]),f}function v(){for(const f of m)b.value.toDataURL(f).indexOf(f)>=0&&u.value.push(f);u.value.length===0&&u.value.push(m[0])}return(f,k)=>{const S=_e,$=Tt,A=Te,I=xe,M=xt,H=zn;return F(),ee(Me,null,[n(A,{justify:"center",class:"body"},{default:t(()=>[n(A,{vertical:""},{default:t(()=>[n(I,{to:!1,"display-directive":"show",show:e(o).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(o).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(A,{align:"center",wrap:!1},{default:t(()=>[n(S,null,{default:t(()=>[n(e(bn))]),_:1}),C(d(e(a)("settings.imageType"))+": ",1),n($,{value:p.value,"onUpdate:value":k[0]||(k[0]=R=>p.value=R),options:u.value.map(R=>({value:R,label:R})),"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),_:1})]),default:t(()=>[C(" "+d(e(a)("settings.imageTypeTooltip")),1)]),_:1},8,["show","placement"]),n(I,{to:!1,"display-directive":"show",show:e(o).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(o).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(A,{align:"center"},{default:t(()=>[n(A,{align:"start",wrap:!1},{default:t(()=>[n(S,null,{default:t(()=>[n(e(_n))]),_:1}),y("span",ui,d(e(a)("settings.quality"))+":",1),n(A,{align:"center",justify:"space-between"},{default:t(()=>[n(M,{tooltip:!1,value:g.value,"onUpdate:value":k[1]||(k[1]=R=>g.value=R),step:1,style:{width:"120px"},disabled:h.value},null,8,["value","disabled"]),n(H,{onBlur:k[2]||(k[2]=R=>g.value??(g.value=0)),value:g.value,"onUpdate:value":k[3]||(k[3]=R=>g.value=R),step:"1",min:"0",max:"100",disabled:h.value,style:{width:"90px"},size:"small"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:t(()=>[C(" "+d(e(a)("settings.qualitytooltip")),1)]),_:1},8,["show","placement"])]),_:1})]),_:1}),y("canvas",{ref_key:"canvas",ref:b,width:"1",height:"1",style:{display:"none"}},null,512)],64)}}}),di=Be(ci,[["__scopeId","data-v-060333f5"]]),pi={style:{width:"4em","text-align":"left"}},fi={style:{width:"4em","text-align":"left"}},Et=100,nn=2e3,on=4096,an=4096,gi=100,mi=100,vi=ye({__name:"settings-adv",props:{expanded:{type:Boolean,required:!1},expandedModifiers:{},multithread:{type:Boolean,required:!0},multithreadModifiers:{},threadCount:{required:!0},threadCountModifiers:{},maxZipSize:{required:!0},maxZipSizeModifiers:{},retainExt:{type:Boolean,required:!0},retainExtModifiers:{},useFolderNameForZip:{type:Boolean,required:!0},useFolderNameForZipModifiers:{},shrinkImage:{type:Boolean,required:!0},shrinkImageModifiers:{},maxWidth:{required:!0},maxWidthModifiers:{},maxHeight:{required:!0},maxHeightModifiers:{}},emits:["update:expanded","update:multithread","update:threadCount","update:maxZipSize","update:retainExt","update:useFolderNameForZip","update:shrinkImage","update:maxWidth","update:maxHeight"],setup(l){const r=Ge(Ve),s={trigger:"hover",placement:"left",keepAliveOnHover:!1,duration:0,delay:0,style:"max-width: 20vw;"},i=Ce(l,"expanded"),a=Ce(l,"multithread"),o=Ce(l,"threadCount"),u=Ce(l,"maxZipSize"),m=Ce(l,"retainExt"),p=Ce(l,"useFolderNameForZip"),g=Ce(l,"shrinkImage"),h=Ce(l,"maxWidth"),b=Ce(l,"maxHeight");we(Oe,v=>{v>1||(a.value=!1),o.value>v&&(o.value=v)},{immediate:!0});const z=ke(()=>a.value&&Oe.value>1);return Ue(()=>{Oe.value>1&&typeof o.value>"u"&&(o.value=Math.max(Oe.value,2))}),(v,f)=>{const k=_e,S=$e,$=Ea,A=Te,I=xt,M=zn,H=it,R=wn;return F(),ae(A,{justify:"center"},{default:t(()=>[n(R,{"display-directive":"show","default-expanded-names":i.value?["collapitem"]:"","on-update:expanded-names":_=>i.value=!!String(_),"trigger-areas":["arrow","main"],class:et(["settings-body",i.value?"expand-adv-settings":""])},Ca({arrow:t(()=>[n(k,{style:ce(i.value&&{top:"8px"})},{default:t(()=>[n(e(Oa))]),_:1},8,["style"]),n(k,null,{default:t(()=>[n(e(Ua))]),_:1})]),default:t(()=>[n(H,{title:v.$t("settings.advancedSettings"),name:"collapitem"},{default:t(()=>[n(A,{vertical:"",style:{"padding-left":"2em"}},{default:t(()=>[n(e(xe),nt(ot(s)),{trigger:t(()=>[n(A,{vertical:""},{default:t(()=>[n(A,{wrap:!1,align:"center"},{default:t(()=>[n(S,{text:"",disabled:!e(Oe),style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:f[1]||(f[1]=_=>a.value=!a.value)},{icon:t(()=>[n(k,null,{default:t(()=>[n(e($a))]),_:1})]),default:t(()=>[C(" "+d(v.$t("settings.enableMultiThreads")),1)]),_:1},8,["disabled"]),n($,{value:a.value,"onUpdate:value":f[2]||(f[2]=_=>a.value=_),disabled:!e(Oe),size:"small"},null,8,["value","disabled"])]),_:1}),n(A,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(I,{value:o.value,"onUpdate:value":f[3]||(f[3]=_=>o.value=_),disabled:!e(Oe)||!a.value,step:1,min:2,max:e(Oe),style:{width:"120px"}},null,8,["value","disabled","max"]),n(M,{onBlur:f[4]||(f[4]=_=>o.value??(o.value=2)),size:"tiny",value:o.value,"onUpdate:value":f[5]||(f[5]=_=>o.value=_),disabled:!e(Oe)||!a.value,step:1,min:2,max:e(Oe),style:{width:"10em"}},{suffix:t(()=>[C(d(v.$t("threads",o.value)),1)]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[C(" "+d(v.$t("settings.multiThreadsTooltip")),1)]),_:1},16),n(e(xe),nt(ot(s)),{trigger:t(()=>[n(A,{vertical:""},{default:t(()=>[n(A,{wrap:!1,align:"center"},{default:t(()=>[n(S,{text:"",focusable:!1,style:{"white-space":"nowrap","font-size":"smaller"}},{icon:t(()=>[n(k,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Fa))]),_:1})]),default:t(()=>[C(" "+d(v.$t("settings.maxZipFileSize"))+": ",1)]),_:1})]),_:1}),n(A,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(I,{tooltip:!1,value:u.value,"onUpdate:value":f[6]||(f[6]=_=>u.value=_),step:1,min:Et,max:nn,style:{width:"120px"}},null,8,["value"]),n(M,{onBlur:f[7]||(f[7]=_=>u.value??(u.value=Et)),size:"tiny",value:u.value,"onUpdate:value":f[8]||(f[8]=_=>u.value=_),step:"1",min:Et,max:nn,style:{width:"10em"}},{suffix:t(()=>f[21]||(f[21]=[C("(MB)")])),_:1},8,["value"])]),_:1})]),_:1})]),default:t(()=>[C(" "+d(v.$t("settings.maxZipFileSizeTooltip")),1)]),_:1},16),n(e(xe),nt(ot(s)),{trigger:t(()=>[n(A,{wrap:!1,align:"center"},{default:t(()=>[n(S,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:f[9]||(f[9]=_=>p.value=!p.value)},{icon:t(()=>[n(k,null,{default:t(()=>[n(e(Mt))]),_:1})]),default:t(()=>[C(" "+d(v.$t("settings.useFolderNameForZip")),1)]),_:1}),n($,{value:p.value,"onUpdate:value":f[10]||(f[10]=_=>p.value=_),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[C(" "+d(v.$t("settings.useFolderNameForZipTooltip")),1)]),_:1},16),n(e(xe),nt(ot(s)),{trigger:t(()=>[n(A,{wrap:!1,align:"center"},{default:t(()=>[n(S,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:f[11]||(f[11]=_=>m.value=!m.value)},{icon:t(()=>[n(k,null,{default:t(()=>[n(e(hn))]),_:1})]),default:t(()=>[C(" "+d(v.$t("settings.retainOriginalExtension")),1)]),_:1}),n($,{value:m.value,"onUpdate:value":f[12]||(f[12]=_=>m.value=_),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[C(" "+d(v.$t("settings.retainExtTooltip")),1)]),_:1},16),n(e(xe),nt(ot(s)),{trigger:t(()=>[n(A,{vertical:""},{default:t(()=>[n(A,{wrap:!1,align:"center"},{default:t(()=>[n(S,{disabled:!z.value,text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:f[13]||(f[13]=_=>g.value=!g.value)},{icon:t(()=>[n(k,null,{default:t(()=>[n(e(Pa))]),_:1})]),default:t(()=>[C(" "+d(v.$t("settings.shrinkImage")),1)]),_:1},8,["disabled"]),n($,{disabled:!z.value,value:g.value,"onUpdate:value":f[14]||(f[14]=_=>g.value=_),size:"small"},null,8,["disabled","value"])]),_:1}),n(A,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(I,{value:h.value,"onUpdate:value":f[15]||(f[15]=_=>h.value=_),disabled:!g.value||!z.value,step:1,min:gi,max:on,style:{width:"120px"}},null,8,["value","disabled"]),n(M,{size:"tiny",onBlur:f[16]||(f[16]=_=>h.value??(h.value=8)),value:h.value,"onUpdate:value":f[17]||(f[17]=_=>h.value=_),disabled:!g.value||!z.value,step:1,min:8,max:on*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[y("span",pi,d(v.$t("width")),1)]),suffix:t(()=>f[22]||(f[22]=[C("px")])),_:1},8,["value","disabled","max"])]),_:1}),n(A,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(I,{value:b.value,"onUpdate:value":f[18]||(f[18]=_=>b.value=_),disabled:!g.value||!z.value,step:1,min:mi,max:an,style:{width:"120px"}},null,8,["value","disabled"]),n(M,{size:"tiny",onBlur:f[19]||(f[19]=_=>b.value??(b.value=8)),value:b.value,"onUpdate:value":f[20]||(f[20]=_=>b.value=_),disabled:!g.value||!z.value,step:1,min:8,max:an*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[y("span",fi,d(v.$t("height")),1)]),suffix:t(()=>f[23]||(f[23]=[C("px")])),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[C(" "+d(v.$t("settings.shrinkImageTooltip")),1)]),_:1},16)]),_:1})]),_:1},8,["title"])]),_:2},[i.value?{name:"header-extra",fn:t(()=>[n(e(xe),{"keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(S,{onClick:e(Ya),size:"tiny",style:{"font-size":"xx-small"}},{default:t(()=>[C(d(v.$t("reset")),1)]),_:1},8,["onClick"])]),default:t(()=>[C(" "+d(v.$t("settings.resetButtonTooltip")),1)]),_:1}),e(r).IS_DEV?(F(),ee("button",{key:0,onClick:f[0]||(f[0]=_=>e(Qa)())},"delcfg")):ve("",!0)]),key:"0"}:void 0]),1032,["default-expanded-names","on-update:expanded-names","class"])]),_:1})}}}),hi=Be(vi,[["__scopeId","data-v-31f045db"]]),_i={},wi={style:{color:"gray","padding-left":"20px"}},yi=["innerHTML"];function bi(l,r){const s=cn,i=Te;return F(),ae(i,{vertical:"",justify:"end"},{default:t(()=>[n(s,{style:{margin:"0px"}}),n(i,{justify:"center"},{default:t(()=>[y("ul",wi,[(F(!0),ee(Me,null,gt(l.$tm("descriptions"),a=>(F(),ee("li",{key:a,style:{"text-align":"left"},innerHTML:a},null,8,yi))),128))])]),_:1})]),_:1})}const zi=Be(_i,[["render",bi]]),ki="modulepreload",xi=function(l){return"/avif2jpeg/dist/"+l},ln={},ze=function(r,s,i){let a=Promise.resolve();if(s&&s.length>0){let u=function(g){return Promise.all(g.map(h=>Promise.resolve(h).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),p=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));a=u(s.map(g=>{if(g=xi(g),g in ln)return;ln[g]=!0;const h=g.endsWith(".css"),b=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${b}`))return;const z=document.createElement("link");if(z.rel=h?"stylesheet":ki,h||(z.as="script"),z.crossOrigin="",z.href=g,p&&z.setAttribute("nonce",p),document.head.appendChild(z),h)return new Promise((v,f)=>{z.addEventListener("load",v),z.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(u){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=u,window.dispatchEvent(m),!m.defaultPrevented)throw u}return a.then(u=>{for(const m of u||[])m.status==="rejected"&&o(m.reason);return r().catch(o)})},Fn="English",Pn="ðŸ‡¬ðŸ‡§",On='AVIF to JPEG "Offline" Batch Converter',Un="It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",Mn="Drag & Drop AVIF Images to Convert",Rn=["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data is sent to any server</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.'],Dn="Select your language",Bn="Choose Target File Extentions",Nn={avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types",edit_type:"Edit File Extension List"},jn="Input a list of comma separated file extentions to load.<br>e.g.) .jpg,.gif,.png",Zn="Load Images",Hn="Select your images from a dialog window.<br>*Multiple selection allowed.",Vn="Load a Whole Folder",Wn=`Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>*It will show "Upload" button, but it actually doesn't upload anything to any server.`,qn="Converting images",Gn="Aborted",Kn="Some files failed to convert",Yn="Completed",Qn="Currently Busy",Xn="No files with the extentions were found.",Jn="Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",eo="Cancel",to="Save",no="Close",oo="Open",ao="Re-convert",lo="Convert previous selected {n} @:files again",so="File | Files",io="thread | threads",ro="You have not saved the converted images yet.",uo="Data have not been saved",co="Open Source",po="Open the converted image",fo="Copied to clipboard",go="The converted image was copied to your clipboard as DataURL.",mo="Copy the converted image as DataURL",vo="Convert Again",ho={expandLogTooltip:"Displaying the entire log may severely reduce conversion speed.",showOnlyErrors:"Show only errors",outInRate:"Out / In Ratio",elapsedTime:"Elapsed Time",multiThreading:"Multi-Threading",outputSettings:"Output Settings",totalSize:"Total Size",totalFiles:"Number of Files",confirmDownloadMessage:"It will start to download {0} zip files.",inputSize:"Input Size",outputSize:"Output Size",filterSuccess:"Hide completed item",progressErrors:"Failed items",progressStarted:"Started Items",progressTotal:"Total number of files",zippingProgress:"Zipping progress",zipped:"ZIPPED",openFailedList:"Open failed file list",zipFailedList:"Pack failed files into Zips",table:{index:"index",status:"status",core:"thread",details:"file"},saveFailedList:"Save failed file list",done:"done",convertedZips:"successfully completed ZIP",progressSuccess:"Completed Files",downloadConvertedImage:"Download Converted Image",failureZippingFailedFiles:"Failure while zipping the failed files.",browseConvertedImages:"Browse converted images",index:"Index",Original:"Original",Converted:"Converted",saveAllZipsTooltip:"Save all ZIP files",Shrinked:"Shrinked",Shrinking:"Shrinking",saveAll:"Save All",progressRetries:"Retrying files",success:"success",started:"started",total:"total",files:"files",failure:"failure",all:"all",filterLogSelect:"filter",showOnlySuccess:"Only successes",showOnlyError:"Only errors",showAll:"Show all",Progress:"Progress",PreviewImage:"Preview Images",Log:"Log",log:"Log",Output:"Output Results",expandLog:"expand log size",autoScroll:"auto-scroll",sortByStatus:"status",sort:"Sort list by",sortByName:"name",sortBySize:"size",sortByOutputSize:"size(output)",sortByStart:"starting order",sortByCompletion:"output order"},_o={maxZipFileSize:"Max zip file size",retainExtTooltip:"New extension will be appended to original extension",retainOriginalExtension:"Keep Original File Extension",qualitytooltip:"Set image quality for output",quality:"Image Quality",maxZipFileSizeTooltip:"Set smaller value if memory problems occur.",ignoreExtTooltip:'Try to load files that don"t have image file extension',ignoreFileExtensions:"Load All File Types",imageTypeTooltip:"Choose image format for output",imageType:"Image Type",advancedSettings:"Advanced Settings",enableMultiThreads:"Enable multi-threading",resetButtonTooltip:"Restore all settings to default.",multiThreadsTooltip:"Convert images in multi-threaded",shrinkImageTooltip:"If the image dimensions are larger than the specified value, shrink the image to that value",shrinkImage:"Shrink images that exceed the following dimensions",useFolderNameForZip:"Use dropped folder name for the zip file",useFolderNameForZipTooltip:"If a folder is dropped or selected, its name is used as the name of the output ZIP file"},wo="Disabled",yo="Download",bo="Reset",zo="Back",ko="Failed",xo="Success",To="Previous version",Io=`
Height`,So="Width",Ao="Don't show this message again",Lo="About the warning when selecting a folder",Co="OK",$o={},Eo="You must press the â€œUploadâ€ button here to load all the images in the folder, but the data loaded by this application is never actually uploaded to the server.",Fo="Continue",Po="Cancel",Oo="When you select a folder instead of a file as input on a website, major web browsers will display a warning like the image below.",Uo="This page may be an outdated version. Please reload the page.",Mo="Reload",Ro='If the conversion process frequently fails and an â€œOut of Memoryâ€ message appears, try reducing or disabling the number of "multi-threads" in the "Advanced Settings".',Do="Next",Bo="Previous",No="or",jo="Target File Extensions",Zo="Changelog",Ho={lang:Fn,flags:Pn,title:On,metaDescription:Un,droptarget:Mn,descriptions:Rn,selectLanguage:Dn,fileTypeRadioTitle:Bn,fileTypeRadioOptions:Nn,editAcceptTypes:jn,loadbutton:Zn,loadbuttontooltip:Hn,loadfolderbutton:Vn,loadfoldertooltip:Wn,processing:qn,aborted:Gn,incomplete:Kn,completed:Yn,interfered:Qn,noimage:Xn,avifUnsupported:Jn,cancel:eo,save:to,close:no,open:oo,reconvert:ao,reconvertTip:lo,files:so,threads:io,confirmCloseDialog:ro,confirmCloseDialogTitle:uo,githubOpenSource:co,convertedImageUrlTooltip:po,copiedDataURLDialogTitle:fo,copiedDataURLMessage:go,convertedImageDataUrlTooltip:mo,convertAgain:vo,status:ho,settings:_o,disabled:wo,Download:yo,reset:bo,back:zo,failed:ko,success:xo,previousVersion:To,height:Io,width:So,checkboxTextDontShowThis:Ao,loadfolderNotifyingTitle:Lo,OK:Co,loadfolderNotifyingMessage:$o,loadfolderNotifyingMessageTerm2:Eo,Continue:Fo,Cancel:Po,loadfolderNotifyingMessageTerm1:Oo,errMsgWorkerLoadError:Uo,Reload:Mo,annotationOutOfMemory:Ro,Next:Do,Prev:Bo,or:No,TargetFileTypeExt:jo,changelog:Zo},Ti=Object.freeze(Object.defineProperty({__proto__:null,Cancel:Po,Continue:Fo,Download:yo,Next:Do,OK:Co,Prev:Bo,Reload:Mo,TargetFileTypeExt:jo,aborted:Gn,annotationOutOfMemory:Ro,avifUnsupported:Jn,back:zo,cancel:eo,changelog:Zo,checkboxTextDontShowThis:Ao,close:no,completed:Yn,confirmCloseDialog:ro,confirmCloseDialogTitle:uo,convertAgain:vo,convertedImageDataUrlTooltip:mo,convertedImageUrlTooltip:po,copiedDataURLDialogTitle:fo,copiedDataURLMessage:go,default:Ho,descriptions:Rn,disabled:wo,droptarget:Mn,editAcceptTypes:jn,errMsgWorkerLoadError:Uo,failed:ko,fileTypeRadioOptions:Nn,fileTypeRadioTitle:Bn,files:so,flags:Pn,githubOpenSource:co,height:Io,incomplete:Kn,interfered:Qn,lang:Fn,loadbutton:Zn,loadbuttontooltip:Hn,loadfolderNotifyingMessage:$o,loadfolderNotifyingMessageTerm1:Oo,loadfolderNotifyingMessageTerm2:Eo,loadfolderNotifyingTitle:Lo,loadfolderbutton:Vn,loadfoldertooltip:Wn,metaDescription:Un,noimage:Xn,open:oo,or:No,previousVersion:To,processing:qn,reconvert:ao,reconvertTip:lo,reset:bo,save:to,selectLanguage:Dn,settings:_o,status:ho,success:xo,threads:io,title:On,width:So},Symbol.toStringTag,{value:"Module"})),Ii="Arabic",Si="German",Ai="English",Li="Spanish",Ci="Finnish",$i="French",Ei="Hindi",Fi="Indonesian",Pi="Italian",Oi="Japanese",Ui="Korean",Mi="Dutch",Ri="Polish",Di="Portuguese",Bi="Russian",Ni="Turkish",ji="Ukrainian",Zi="Chinese",Hi={ar:Ii,de:Si,en:Ai,es:Li,fi:Ci,fr:$i,hi:Ei,id:Fi,it:Pi,ja:Oi,ko:Ui,nl:Mi,pl:Ri,pt:Di,ru:Bi,tr:Ni,uk:ji,"zh-hant":"Chinese(hant)",zh:Zi},wt=[],Vo={en:Ho},Bt={},sn=Object.assign({"./locales/ar.json":()=>ze(()=>import("./ar-Bs-dVZYB.js"),[]),"./locales/de.json":()=>ze(()=>import("./de-BQPc6VLI.js"),[]),"./locales/en.json":()=>ze(()=>Promise.resolve().then(()=>Ti),void 0),"./locales/es.json":()=>ze(()=>import("./es-CqBg_y9a.js"),[]),"./locales/fi.json":()=>ze(()=>import("./fi-Ds7g1iCb.js"),[]),"./locales/fr.json":()=>ze(()=>import("./fr-D8EtgegO.js"),[]),"./locales/hi.json":()=>ze(()=>import("./hi-Ezqk50Rr.js"),[]),"./locales/id.json":()=>ze(()=>import("./id-BsMMe9nO.js"),[]),"./locales/it.json":()=>ze(()=>import("./it-BdKCrqWM.js"),[]),"./locales/ja.json":()=>ze(()=>import("./ja-C5lmyrcu.js"),[]),"./locales/ko.json":()=>ze(()=>import("./ko-CNwBvC5L.js"),[]),"./locales/nl.json":()=>ze(()=>import("./nl-C-Lgg7BA.js"),[]),"./locales/pl.json":()=>ze(()=>import("./pl-OSkpSBPS.js"),[]),"./locales/pt.json":()=>ze(()=>import("./pt-BO4nYfyj.js"),[]),"./locales/ru.json":()=>ze(()=>import("./ru-DEYnX-lF.js"),[]),"./locales/tr.json":()=>ze(()=>import("./tr-XAfWKbVj.js"),[]),"./locales/uk.json":()=>ze(()=>import("./uk-f9rkog-K.js"),[]),"./locales/zh-hant.json":()=>ze(()=>import("./zh-hant-eBVV34fF.js"),[]),"./locales/zh.json":()=>ze(()=>import("./zh-k4YjZC5w.js"),[])});var rn;for(const l in sn){const r=(rn=l.match(/\/([a-z]{2}(?:-[a-z]+)?)\.json$/i))==null?void 0:rn[1];r&&(wt.push(r),!(r in Vo)&&(Bt[r]=sn[l]))}let Ot=Wi();Ot in Bt||(Ot="en");const yt=Ma({legacy:!1,globalInjection:!0,locale:Ot,fallbackLocale:"en",messages:Vo,warnHtmlMessage:!1,missingWarn:!1,fallbackWarn:!1});async function Vi(l){if(yt.global.availableLocales.indexOf(l)>=0)return;const r=await Bt[l]();yt.global.setLocaleMessage(l,r),await Se()}function Wi(){const l=location.pathname;return String(l.match(/[^/]+(?=\/?$)/)||"").toLowerCase()}const qi=["innerHTML"],Gi=ye({__name:"switch-lang",props:{delay:{}},emits:["lang-ready","lang-change"],async setup(l,{emit:r}){let s,i;const a=Ge(Ve),o=dn(),{locale:u,t:m}=He(),p=l,g=r,h=Object.entries(Hi).map(([S,$])=>({label:$,value:S}));h.sort((S,$)=>{const A=S.label,I=$.label;return A>I?1:A<I?-1:0}),Ue(()=>{o.afterEach((S,$,A)=>{z(),a.switchToolTipVisibility()})}),[s,i]=Ra(()=>z()),await s,i();async function b(S){(S!==u.value||yt.global.availableLocales.indexOf(S)===-1)&&(g("lang-change",S),await $l(p.delay),await Vi(S),u.value=S,document.title=m("title"),await Se()),g("lang-ready",S)}async function z(){const S=o.currentRoute.value.path||"",$=String(S.match(new RegExp("(?<=^\\/)[^/]+"))||"");$&&wt.includes($)?(await b($),u.value=$):await v()}async function v(){const S=f().toLowerCase(),$=S.split(/[-_]/)[0];if(wt.includes($)){let A=$;if($==="zh")switch(S){case"zh-hant":case"zh-mo":case"zh-hk":case"zh-tw":A="zh-hant"}await b(A)}}function f(){const S=window.navigator;return S.language||S.userLanguage||S.browserLanguage}function k(S){console.log(`changeRoute: ${o.currentRoute.value.fullPath} => ${S}`),o.push("/"+S+"/")}return(S,$)=>{const A=_e,I=Tt,M=xe;return F(),ae(M,{to:!1,"display-directive":"show",show:e(a).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(a).LANDSCAPE.value?"left":"bottom",duration:0,delay:50},{trigger:t(()=>[n(I,{ref:"langselect",size:"tiny",style:{width:"auto"},"consistent-menu-width":!1,options:e(h),"_v-model:value":"locale",value:e(u),"onUpdate:value":k},{arrow:t(()=>[n(A,null,{default:t(()=>[n(e(Da))]),_:1})]),_:1},8,["options","value"])]),default:t(()=>[y("div",{innerHTML:S.$t("selectLanguage")},null,8,qi)]),_:1},8,["show","placement"])}}}),Ve=Symbol("global variables"),Ki=ye({__name:"Avif2Jpeg",emits:["ready"],setup(l,{emit:r}){const{t:s,locale:i}=He(),a=200,o=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),u=!1,m=w(null);w(0);let p=w(void 0);const g=w(!0),h=w(!1),b=w(!1),z=w(!1),v=w(!0),f=w(!1);ja(Ve,{showTooltipsBeforeMounted:p,LANDSCAPE:g,IS_SP:o,IS_DEV:u,switchToolTipVisibility:A,SSR:!1}),Ue(()=>{I(),window.addEventListener("resize",I),A(),setTimeout(()=>b.value=!0,3e3)}),ft(()=>{window.removeEventListener("resize",I)});let k=0;function S(){z.value=!1,k=Date.now()}function $(){const R=v.value?0:Math.max(0,a-(Date.now()-k));v.value=!1,Se(()=>{setTimeout(()=>z.value=!0,R)})}async function A(){}function I(){const R=document.body.clientWidth,_=document.body.clientHeight;g.value=R*.75>_||R>900}function M(R){m.value=R}function H(R){f.value=R}return(R,_)=>{const j=Te,D=_e,le=Ke;return F(),ae(j,{vertical:"",align:"stretch",class:"avif2jpeg"},{default:t(()=>[n(ul,null,{"lang-switch":t(()=>[(F(),ae(Ba,null,{default:t(()=>[n(Gi,{onLangChange:S,onLangReady:$,delay:e(v)?0:a},null,8,["delay"])]),_:1}))]),_:1}),n(Ye,{name:"fade"},{default:t(()=>[Ne(n(j,{vertical:"",align:"stretch",justify:"space-between",style:{height:"100%"}},{default:t(()=>[n(j,{justify:"space-around",vertical:"",style:{height:"100%"}},{default:t(()=>[n(dl),n(j,{justify:"center"},{default:t(()=>[n(ri,{"_v-model_expanded":"UserSettings.expandExtButtons",target:e(N).acceptTypeValue,"onUpdate:target":_[0]||(_[0]=O=>e(N).acceptTypeValue=O),userExtensions:e(N).editedAcceptTypes,"onUpdate:userExtensions":_[1]||(_[1]=O=>e(N).editedAcceptTypes=O),"disable-notifying-folder-select":e(N).disableNotifyingFolderSelect,"onUpdate:disableNotifyingFolderSelect":_[2]||(_[2]=O=>e(N).disableNotifyingFolderSelect=O),forbidden:e(h),onInput:M,onClick:_[3]||(_[3]=O=>H(!0)),onCancel:_[4]||(_[4]=O=>H(!1))},null,8,["target","userExtensions","disable-notifying-folder-select","forbidden"])]),_:1}),n(Zs,{input:e(m),format:e(N).imageFormat,quality:e(N).imageQuality,"retain-extension":e(N).retainExtension,maxZipSizeMB:e(N).maxZipSizeMB,threads:e(N).multithread?e(N).threadCount:0,"show-note":e(f),"onUpdate:showNote":_[5]||(_[5]=O=>Re(f)?f.value=O:null),onStart:_[6]||(_[6]=O=>h.value=!0),onEnd:_[7]||(_[7]=O=>h.value=!1)},{"lang-switch":t(()=>_[18]||(_[18]=[])),_:1},8,["input","format","quality","retain-extension","maxZipSizeMB","threads","show-note"]),n(j,{vertical:"",align:"center"},{default:t(()=>[n(le,{trigger:"manual",placement:"top","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(D,{size:"5vh",color:"#DADADA",style:{margin:"0px"}},{default:t(()=>[n(e(Na))]),_:1})]),default:t(()=>[_[19]||(_[19]=y("span",null,"CONVERT TOðŸ‘‡",-1))]),_:1})]),_:1}),n(j,{vertical:"",align:"center"},{default:t(()=>[n(di,{format:e(N).imageFormat,"onUpdate:format":_[8]||(_[8]=O=>e(N).imageFormat=O),quality:e(N).imageQuality,"onUpdate:quality":_[9]||(_[9]=O=>e(N).imageQuality=O)},null,8,["format","quality"]),n(hi,{"retain-ext":e(N).retainExtension,"onUpdate:retainExt":_[10]||(_[10]=O=>e(N).retainExtension=O),"use-folder-name-for-zip":e(N).useFolderNameForZip,"onUpdate:useFolderNameForZip":_[11]||(_[11]=O=>e(N).useFolderNameForZip=O),"max-zip-size":e(N).maxZipSizeMB,"onUpdate:maxZipSize":_[12]||(_[12]=O=>e(N).maxZipSizeMB=O),"_v-model:expanded":"UserSettings.expandAdvSettings",multithread:e(N).multithread,"onUpdate:multithread":_[13]||(_[13]=O=>e(N).multithread=O),"thread-count":e(N).threadCount,"onUpdate:threadCount":_[14]||(_[14]=O=>e(N).threadCount=O),"_:thread-max":"availableThreadCount","shrink-image":e(N).shrinkImage,"onUpdate:shrinkImage":_[15]||(_[15]=O=>e(N).shrinkImage=O),"max-width":e(N).maxWidth,"onUpdate:maxWidth":_[16]||(_[16]=O=>e(N).maxWidth=O),"max-height":e(N).maxHeight,"onUpdate:maxHeight":_[17]||(_[17]=O=>e(N).maxHeight=O)},null,8,["retain-ext","use-folder-name-for-zip","max-zip-size","multithread","thread-count","shrink-image","max-width","max-height"])]),_:1}),n(zi)]),_:1})]),_:1},512),[[je,e(z)]])]),_:1})]),_:1})}}}),Nt=ye({__name:"App",setup(l){const r={Statistic:{valueFontSize:"1em"},Popover:{borderRadius:"0.4em",boxShadow:"2px 2px 5px 0px #555555"},Tooltip:{},Image:{toolbarColor:"#00000099"}},s=w(!0);return Ue(()=>{s.value=!1}),(i,a)=>{const o=Wa,u=Va,m=Ha,p=Za,g=qa;return F(),ae(g,{"theme-overrides":r,style:{width:"100%",height:"100%"}},{default:t(()=>[n(p,null,{default:t(()=>[n(m,{placement:"top-left",closable:!0,max:50},{default:t(()=>[n(u,null,{default:t(()=>[n(o,null,{default:t(()=>[n(Ki,{class:et({hide:e(s)})},null,8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),Wo=[{path:"/",name:"Home",component:Nt}];for(const l of wt)Wo.push({path:"/"+l+"/",strict:!0,name:l,component:Nt});Ga(Nt,{routes:Wo,base:"/avif2jpeg/dist/"},({app:l,router:r,routes:s,isClient:i,initialState:a})=>{l.use(yt)});
