var no=Object.defineProperty;var ao=(o,u,g)=>u in o?no(o,u,{enumerable:!0,configurable:!0,writable:!0,value:g}):o[u]=g;var Re=(o,u,g)=>ao(o,typeof u!="symbol"?u+"":u,g);import{r as bt,d as ke,i as et,o as F,c as q,w as t,a as n,u as e,b as S,t as d,N as _e,_ as un,e as Ae,L as oo,f as x,g as oe,h as y,F as Te,j as Qe,B as we,k as Ot,l as K,m as lo,n as io,p as Ee,q as Ut,s as dn,v as be,x as so,y as xe,z as Ct,A as Lt,C as Nt,D as Dt,E as je,G as $t,H as Et,I as ce,T as Ze,J as He,K as cn,M as tt,O as Ye,P as kt,Q as pn,R as Fe,S as fn,U as rt,V as qe,W as pe,X as gn,Y as ro,Z as uo,$ as Rt,a0 as Yt,a1 as co,a2 as mn,a3 as mt,a4 as jt,a5 as po,a6 as fo,a7 as go,a8 as mo,a9 as vo,aa as vn,ab as ho,ac as hn,ad as At,ae as Ue,af as _o,ag as yo,ah as wo,ai as bo,aj as _n,ak as yn,al as Bt,am as Zt,an as ko,ao as wn,ap as xo,aq as zo,ar as ut,as as Ao,at as Io,au as Le,av as To,aw as So,ax as Wt,ay as Co,az as Lo,aA as bn,aB as $o,aC as Eo,aD as kn,aE as xn,aF as ot,aG as lt,aH as Fo,aI as Mo,aJ as Po,aK as Oo,aL as Uo,aM as No,aN as Do,aO as Ro,aP as jo,aQ as Bo,aR as Zo,aS as Wo,aT as Ho,aU as Vo,aV as qo,aW as Go,aX as Ko,aY as Qo,aZ as Yo}from"./vendor-B-Yp_1QO.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function g(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(l){if(l.ep)return;l.ep=!0;const s=g(l);fetch(l.href,s)}})();const Xo={imageFormat:"image/jpeg",imageQuality:90,expandExtButtons:!1,acceptTypeValue:void 0,editedAcceptTypes:"",expandAdvSettings:!1,retainExtension:!1,maxZipSizeMB:1e3,useFolderNameForZip:!1,multithread:!0,threadCount:void 0,shrinkImage:!1,maxWidth:4096,maxHeight:4096,disableNotifyingFolderSelect:!1},it={threadCount:{min:2,max:16}},U=bt(zn({}));function Jo(){zn(U)}function zn(o){return Object.assign(o,Xo)}const An="avif2jpeg",It=JSON.parse(localStorage.getItem(An)||"{}");for(const o in U)if(It.hasOwnProperty(o)&&It[o]!==void 0){let u=It[o];it.hasOwnProperty(o)&&(it[o].min>u&&(u=it[o].min),it[o].max<u&&(u=it[o].max)),U[o]=u}window.addEventListener("unload",()=>{const o={};for(const u in U)o[u]=U[u];localStorage.setItem(An,JSON.stringify(o))});const el=ke({__name:"github",setup(o){const u=et(Ge);return(g,a)=>{const l=_e,s=un,i=Ae;return F(),q(i,{to:!1,"display-directive":"show",show:e(u).showTooltipsBeforeMounted.value,trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(s,{href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-size":"small","font-weight":"bolder"}},{default:t(()=>[n(l,null,{default:t(()=>[n(e(oo))]),_:1}),S("GitHub")]),_:1})]),default:t(()=>[S(" "+d(g.$t("githubOpenSource")),1)]),_:1},8,["show"])}}}),tl=y("h3",null,"Used Framework and Libraries",-1),nl=["href"],al=ke({__name:"licenses",setup(o){const u=x(!1),g={Vue:"https://github.com/vuejs/core/blob/main/LICENSE",Vite:"https://github.com/vitejs/vite/blob/main/LICENSE","Vite SSG":"https://github.com/antfu/vite-ssg/blob/main/LICENSE","Naive UI":"https://github.com/TuSimple/naive-ui/blob/main/LICENSE",Ionicons:"https://github.com/ionic-team/ionicons/blob/main/LICENSE"};return(a,l)=>{const s=we;return F(),oe(Te,null,[n(s,{text:"",onClick:l[0]||(l[0]=i=>u.value=!0),style:{color:"black","font-size":"small"}},{default:t(()=>[S("Licenses")]),_:1}),n(e(Ot),{preset:"dialog",ref:"dialog",show:u.value,"onUpdate:show":l[1]||(l[1]=i=>u.value=i),"positive-text":"OK",title:"Licenses"},{default:t(()=>[tl,y("ul",null,[(F(),oe(Te,null,Qe(g,(i,f)=>y("li",null,[y("a",{href:i},d(f),9,nl)])),64))])]),_:1},8,["show"])],64)}}}),ol=1,ll=8,il=4,sl="",ht={major:ol,minor:ll,build:il,tag:sl},rl={style:{"font-size":"x-small","user-select":"none"}},ul=ke({__name:"version",setup(o){const u=["0.0.118"],g=`${ht.major}.${ht.minor}.${ht.build}${ht.tag}`,a=u.map(f=>({label:`v${f}`,key:f,value:f}));function l(f){const{key:z,label:_}=f,A=i(z),r=K("a",{href:A},_),T=K("div",null,r);return K("div",null,T)}function s(f){location.href=i(f)}function i(f){return`/avif2jpeg/old/${f}/`}return(f,z)=>{const _=lo;return F(),q(_,{"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start",options:e(a),"render-label":l,"onUpdate:value":s},{header:t(()=>[y("span",rl,d(f.$t("previousVersion")),1)]),default:t(()=>[y("span",{style:{cursor:"pointer"}},"v"+d(g))]),_:1},8,["options"])}}}),dl=ke({__name:"header",setup(o){return(u,g)=>{const a=Ee,l=Ut;return F(),q(a,{vertical:"",justify:"start"},{default:t(()=>[n(a,{justify:"space-between",style:{"box-sizing":"border-box",padding:"4px",margin:"0px"}},{default:t(()=>[n(a,{align:"start"},{default:t(()=>[n(el),n(ul),n(a,{align:"center"},{default:t(()=>[n(al)]),_:1})]),_:1}),n(a,{align:"end",style:{"font-size":"x-small"}},{default:t(()=>[io(u.$slots,"lang-switch")]),_:3})]),_:3}),n(l,{style:{margin:"0px"}})]),_:3})}}}),cl={style:{padding:"0px",margin:"0px","text-align":"center"}},pl={key:0},fl=ke({__name:"title",setup(o){const u=dn(),g=be(()=>{const a=u.currentRoute.value.path||"";return!String(a.match(new RegExp("(?<=^\\/)[^/]+"))||"")});return(a,l)=>{const s=un,i=so("router-link"),f=Ee;return F(),q(f,{align:"center",justify:"center",style:{margin:"0px"}},{default:t(()=>[y("h1",cl,[e(g)?(F(),oe("span",pl,d(a.$t("title")),1)):(F(),q(i,{key:1,to:"../",custom:""},{default:t(({navigate:z,href:_})=>[n(s,{href:_,onClick:z,style:{color:"black","word-break":"keep-all","overflow-wrap":"break-word"}},{default:t(()=>[S(d(a.$t("title")),1)]),_:2},1032,["href","onClick"])]),_:1}))])]),_:1})}}});function gl(o){return new Worker("/avif2jpeg/dist/assets/worker.canvas-geeReHlU.js",{name:o==null?void 0:o.name})}let In=0;class ml extends gl{constructor(g){super();Re(this,"id",In++);Re(this,"priority");this.priority=g||!1}release(){vt(this)}}class vl extends Promise{constructor(){super(...arguments);Re(this,"wid",-1)}}const Ft=new Set,Xe=new Set,Ve=new Set,dt=new Map,Tn=[];function hl(o){const u=new ml;return Ft.add(u),Sn(u,o),vt(u),o&&Tn.push(u.id),u}function Sn(o,u){const g=u?Ve:Xe,a=new vl(l=>{dt.set(o,()=>l([o,a,!!u]))});a.wid=o.id,g.add(a)}async function _l(o){let u;if(!o)u=new Set([...Ve,...Xe]);else if(typeof o=="number"){const s=Tn.slice(0,o);u=new Set([...Ve].filter(i=>s.includes(i.wid)))}else u=o?Ve:Xe;const[g,a,l]=await Promise.any(u);return(l?Ve:Xe).delete(a),Sn(g,l),g}function vt(o){const u=dt.get(o);u&&(dt.delete(o),u())}function Cn(){for(const o of dt.keys())vt(o)}async function Xt(){return await Promise.all([...Xe,...Ve])}function Mt(){Cn();for(const o of Ft)o.terminate();Ft.clear(),Xe.clear(),Ve.clear(),dt.clear(),In=0}function yl(o){return new Worker("/avif2jpeg/dist/assets/worker.zip-D4CHLUmx.js",{name:o==null?void 0:o.name})}const wl=1e3*10,bl=1,Ht=2e3*2e3*4,kl=5,xl=3,zl=Ht*1,Jt=Ht*8,Al=300,ct=new Map,_t=new Map;let st=0;const Je=new Map,pt=new Map,ft=new Map;let Vt,J,Pe,gt,Oe,Ln,$n,En,Fn,Mn,Pn;function Tt(o){({files:Oe,completedFileIdSet:Vt,ConvStats:J,canceled:Pe,props:gt,format:Ln,quality:$n,outputExt:En,imageType:Fn,message:Mn,notification:Pn}=o||{}),ct.clear(),_t.clear(),Je.clear(),pt.clear(),ft.clear(),Je.clear(),pt.clear(),ft.clear()}async function Il(o){Tt(o),Vt.clear();const u=Math.min(gt.threads-1,Oe.length),g=Math.min(kl,u),a=Cl(J,Pe,Mn,Pn,Oe);let l;try{l=await Tl(u,g,a)}catch{return Tt(),{exception:new Error("worker-load-error"),callbackToClearConverter:new Function,callbackToGenerateFailedZips:new Function}}const s=Sl(l),i=xe(Pe,h=>{h&&(i(),Cn())});J.demandImage=h=>{l.postMessage({action:"request-image",index:h})};const z=Oe.length===1;let _=0,A=0,r="",T=0,w=0;for(st=0,ct.clear();T<Oe.length&&!Pe.value;){if(st>Jt){await new Promise(C=>setTimeout(C,100));continue}const h=[],O=[];let D=!1;const W=Oe.length-T,v=Math.min(T+Math.max(Math.min(xl,W/gt.threads|0),1),Oe.length);let M=0;const ee=[],te=[];let re=!1;for(;T<v&&!(M>zl||st>Jt);T++){const C=Oe[T],B=_t.get(C);re=re||!!B;const Q=B?Math.max(0,100-(Date.now()-(w||B))):0;Q&&await new Promise(I=>setTimeout(I,Q)),re&&(w=Date.now());const ie=C._id;M+=C.size,D=T===Oe.length-1,Je.has(ie)||Je.set(ie,C);const Z={data:{action:"file-start",path:C.webkitRelativePath||C.name,fileId:ie,index:T}};ee.push(Z);let le;try{le=await createImageBitmap(C)}catch{const b={data:{action:"file-error",path:C.webkitRelativePath||C.name,fileId:ie,index:T}};te.push(b);continue}O.push(le);const ge=le.width*le.height*4;M+=ge+C.size,st+=ge+C.size;let he=!1;const ue=Date.now();ue-A>Al&&(A=ue,he=!0),h.push({index:T,bitmap:le,file:C,fileId:ie,outputPath:r,type:Ln,quality:$n/100,demandThumbnail:he||D,isSingleImage:z,maxSize:U.shrinkImage?{width:U.maxWidth,height:U.maxHeight}:null,retriedTime:_t.get(C)||0,webkitRelativePath:C.webkitRelativePath}),C.webkitRelativePath||C.name,pt.has(C)||(_++,J.index=_),he=!1}let E;if(h.length){const C=M>Ht;E=await _l(g>0&&(re?1:C)),ct.set(E,M)}if(Pe.value){vt(E);break}for(const C of ee.concat(te))C.target=E||{id:-1},a(C);if(E&&(E.postMessage(h,O),O.length=0),D&&(await Xt(),Pe.value))break}if(await Xt(),!Pe.value){let h;await new Promise(O=>{h=xe([()=>J.done,Pe],()=>{(J.done>=_||Pe.value)&&O(void 0)},{immediate:!0})}),h()}i(),setTimeout(()=>Mt(),500),l.postMessage({action:"squeeze"}),await s;const c={value:!1},m=()=>{c.value=!0,Mt(),l.terminate(),Tt()};let k=!1;return{callbackToClearConverter:m,callbackToGenerateFailedZips:async h=>{k||(k=!0,await Ll(h,l,c,J))}}}async function Tl(o,u,g){Mt();const a=new yl;a.postMessage({action:"set-config",zipSize:gt.maxZipSizeMB*1024*1024,keepExt:gt.retainExtension,outputExt:En,imageType:Fn});let l;for(let i=0;i<o;i++){const f=hl(u>i);l??(l=f),f.onmessage=g;const{port1:z,port2:_}=new MessageChannel;a.postMessage({action:"set-port"},[z]),f.postMessage({},[_])}return await new Promise((i,f)=>{const z=w=>{a.removeEventListener("message",r),l.removeEventListener("message",r),clearTimeout(T),w?i(w):f(w)};let _=!1,A=!1;const r=w=>{w.target===a&&(_=!0),w.target===l&&(A=!0),_&&A&&z(!0)};let T=0;a.addEventListener("message",r),l.addEventListener("message",r),T=window.setTimeout(()=>z(!1),wl)}),a}function Sl(o){return new Promise(g=>{o.onmessage=a=>{var _;const l=a.data,{action:s}=l;if(s==="add-zip-completed"){const{fileId:A}=l;J.done++,J.success++,Vt.add(A);return}if(s==="respond-image"){const{url:A,index:r,path:T,size:w,fileId:c}=l;J.convertedImageUrl=A,J.convertedImageSize=w,J.convertedImageIndex=r,J.convertedImageName=T,J.convertedImageFileId=c;let m="",k=0,L="";if(c>=0){const h=Je.get(c);m=URL.createObjectURL(h),k=h.size,L=h.name}J.convertedImageOrgUrl=m,J.convertedImageOrgSize=k,J.convertedImageOrgName=L,J.convertedImageShrinked=(_=ft.get(c))==null?void 0:_.shrinked;return}const{size:i,count:f}=l,z="url"in a.data?a.data.url:"";switch(s){case"push-zip":J.zips.push({url:z,size:i,count:f}),J.zippedTotalCount+=f,J.zippedTotalSize+=i;break;case"squeeze-zip":f>0&&(J.zips.push({url:z,size:i,count:f}),J.zippedTotalCount+=f,J.zippedTotalSize+=i),g(void 0);break;case"push-filelist":J.failedFileZippedCount++;break;case"squeeze-filelist-zip":J.failedZipDone=!0;case"push-filelist-zip":J.failedZips.push({url:z,size:i,count:f});break;case"zip-error":case"zip-squeeze-error":J.zippingErrorCount+=f,s==="zip-squeeze-error"&&g(void 0);break}}})}function Cl(o,u,g,a,l){let s=0;const i=x(new Map),f=x(new Map);return _=>{const A=_.target,{data:r}=_,{action:T}=r;if(u.value)switch(T){case"file-canceled":o.done++;return}switch(T){case"list-start":break;case"file-start":{const{index:w,path:c,fileId:m}=r,k={key:s++,core:A.id,index:w,path:c,command:"➡️started"};i.value.set(m,k),o.logs.push(k);break}case"file-load":{const{thumbnail:w,width:c,height:m,fileId:k,shrinked:L}=r;i.value.get(k).command="🖼️loaded",w&&(o.thumbnail=w);let h=ft.get(k);h||(h={},ft.set(k,h)),h.shrinked??(h.shrinked=L);break}case"file-converted":{const{index:w,path:c,fileId:m}=r,k=i.value.get(m);k.command="🔃converted",f.value.set(m,k),o.converted++;break}case"file-completed":{const{inputsize:w,outputsize:c,fileId:m}=r;o.inputTotalSize+=w,o.outputTotalSize+=c;const k=f.value.get(m);k&&(k.command="✅completed",k.completed=!0);break}case"file-error":{const{index:w,path:c,fileId:m}=r,k=Je.get(m);if(!k)throw new Error(`the file doesn't exist in the Map. "${m}":"${c}"`);const L=pt.get(k)||0,h=i.value.get(m);L<bl?(pt.set(k,L+1),l.push(k),_t.set(k,Date.now()),h.command="⚠️retrying",h.error=!0,g.warning(`retrying "${c}"`,{duration:3e3})):(o.done++,o.failure++,h.command="❗failed",h.error=!0,a.error({content:`failed to load "${c}"`,duration:5e3}));break}case"file-canceled":{const{fileId:w,path:c}=r,m=f.value.get(w);o.done++,o.failure++,m.command="❗zip-aborted",m.error=!0;break}case"list-end":{vt(A),st-=ct.get(A)||0,ct.delete(A);break}}}}async function Ll(o,u,g,a){let l=0;for(const s of o){const i=(s.webkitRelativePath||s.name).replace(/^\//,"");if(g.value)return;l-a.failedFileZippedCount>20&&await new Promise(f=>setTimeout(f,10)),u.postMessage({action:"add-filelist",file:s,path:i}),l++}u.postMessage({action:"squeeze-filelist"})}function We(o,u=2){const g=Math.sign(o);o=Math.abs(o);const a=["Bytes","KB","MB","GB"],l=o?Math.floor(Math.log(o)/Math.log(1024)):0;return`${(o/Math.pow(1024,l)*g).toFixed(u)}${a[l]}`}function On(o,u=100,g=!1){u=typeof u=="number"?{width:u,height:u}:u;const{width:a,height:l}=u;let{width:s,height:i}=o;const f=s/i,z=a/l;return f>=z?(s=g?Math.min(a,s):a,i=s/f|0):(i=g?Math.min(l,i):l,s=i*f|0),{width:s,height:i}}class $l{constructor(){Re(this,"_currentFileCount",0);Re(this,"_totalFileCount",0);Re(this,"_zipLengthSumList",[]);Re(this,"_pathBank",{})}increase(u){u&&(this._pathBank[u]=[this._zipLengthSumList.length,this._currentFileCount]),this._currentFileCount++,this._totalFileCount++}split(){this._zipLengthSumList.push(this._totalFileCount),this._currentFileCount=0}get(u){if(typeof u=="number"){let g=this._zipLengthSumList.findIndex((s,i)=>u<s);g===-1&&(g=this._zipLengthSumList.length);const a=this._zipLengthSumList[g-1]||0,l=u-a;return[g,l]}else{const g=this._pathBank[String(u)];if(g)return g}return null}}async function El(o,u,g,a,l,s){let i="";const f=document.createElement("canvas"),z=f.getContext("2d");let _=new Ct;const A=[_],r=new $l,T=a.format,w=a.quality/100,c=[...T.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),m=o.length,k=a.maxZipSizeMB*1024*1024;let L=0,h=null,O="",D="",W=0,v=0,M=0,ee=0,te=0,re=!1;const E=[];s.demandImage=Z=>{const[le,ge]=r.get(Z),he=A[le];s.convertedImageIndex=Z,s.convertedImageName=he.getPathByIndex(ge),s.convertedImageUrl=URL.createObjectURL(new Blob([he.get(ge)],{type:T}));let ue="",I=0,b="";const H=E[Z];ue=URL.createObjectURL(H),I=H.size,b=H.name,s.convertedImageOrgUrl=ue,s.convertedImageOrgSize=I,s.convertedImageOrgName=b};for(const Z of o){if(l.value)break;const le=Z.name;let ge="";const he=Z.size,ue=(Z.webkitRelativePath||Z.relativePath||le).replace(/^\//,""),I=document.createElement("img");L++;const b={key:M++,core:-1,index:L,path:ue,command:"➡️start"};s.index=L,s.logs.push(b),s.logs.length-1,i&&(URL.revokeObjectURL(i),i=""),i=URL.createObjectURL(Z),D=i,W=Z.size,I.src=i;const H=await Un(I).then(()=>!0).catch(()=>!1);if(!I.complete||!H||l.value){s.done++,s.failure++,b.command="❗failed";continue}const P=I.width,$=I.height;f.width=P,f.height=$,z.drawImage(I,0,0,P,$,0,0,P,$),b.command="🖼️imgload",s.thumbnail=I;const N=await new Promise(G=>{const se=de=>{h=de,G(de)};f.toBlob(se,T,w)});if(l.value)break;if(!N){s.failure++;continue}v=N.size,s.converted++;let X="";if(te+v>=k){try{await _.wait(),X=_.url()}catch{re=!0,alert("memory problem occurred");break}s.zips.push({url:X,size:te,count:ee}),s.zippedTotalCount+=ee,s.zippedTotalSize+=te,te=0,ee=0,r.split(),_=new Ct,A.push(_)}te+=v;const Y=ue||le;for(let G=1;G<255&&(ge=Y.replace(a.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+(G>1?`(${G})`:"")+"."+c,!!_.has(ge));G++);s.done++;try{ee++,_.add(ge,N),r.increase(),E.push(Z),s.inputTotalSize+=he,s.outputTotalSize+=v}catch{continue}O=ge,s.success++,b.command="✅completed",b.completed=!0,u.add(Z._id)}if(s.success>0)if(m===1)h&&(s.convertedImageIndex=0,s.convertedImageName=O.replace(/^.*\/(?=[^/]+$)/,"").replace(a.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+c,s.convertedImageUrl=URL.createObjectURL(h),s.convertedImageOrgUrl=D,s.convertedImageOrgSize=W);else try{if(re)throw new Error("terminated zipping process for memory problems");await _.wait();const Z=_.url();s.zips.push({url:Z,count:ee,size:te}),s.zippedTotalCount+=ee,s.zippedTotalSize+=te}catch{}const C={value:!1},B=()=>{C.value=!0,A.forEach(Z=>Z.clear()),A.length=0,E.length=0};let Q=!1;return{callbackToClearConverter:B,callbackToGenerateFailedZips:async Z=>{Q||(Q=!0,Fl(Z,k,s,C))}}}async function Fl(o,u,g,a){let l=0,s=0,i=new Ct;for(let f=0;f<o.length;f++){const z=o[f],_=(z.webkitRelativePath||z.name).replace(/^\//,"");if(a.value)return;if(await i.add(_,z),s+=z.size,l++,g.failedFileZippedCount++,s>=u||f===o.length-1){await i.zip();const A=i.url();g.failedZips.push({url:A,size:s,count:l}),i.clear(),s=0,l=0}}g.failedZipDone=!0}function Un(o){if(typeof o.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((u,g)=>{o.onload=u,o.onerror=g})}const Be=(o,u)=>{const g=o.__vccOpts||o;for(const[a,l]of u)g[a]=l;return g},Ml=o=>(Nt("data-v-5dab19ad"),o=o(),Dt(),o),Pl={class:"container"},Ol=Ml(()=>y("span",{class:"text"},"ZIP",-1)),Ul={__name:"zipicon",setup(o){return(u,g)=>(F(),oe("span",Pl,[n(e(_e),null,{default:t(()=>[n(e(Lt))]),_:1}),Ol]))}},Nl=Be(Ul,[["__scopeId","data-v-5dab19ad"]]),Dl=["href","download","title"],Rl=ke({__name:"thumbnail",props:{src:{},width:{},height:{},maxWidth:{default:100},maxHeight:{default:100},expand:{type:Boolean,default:!1},loading:{type:Boolean},fileName:{},allowNext:{type:Boolean},allowPrev:{type:Boolean},hidden:{type:Boolean}},emits:["load","error","next","prev"],setup(o,{expose:u,emit:g}){je();const a=o,l=g;u({download:m,openPreview:k});const s=x(),i=x(!0),f=x(""),z=x(a.width||100),_=x(a.height||100),A=x(!1),r=bt({width:z.value+"px",height:_.value+"px",minWidth:"50px",minHeight:"50px"});xe(a,(L,h)=>{r.width=(a.width||100)+"px",r.height=(a.height||100)+"px"}),xe(()=>a.src,()=>{c(a.src)},{immediate:!0});async function T(L){const h=L.target,O=h.naturalWidth,D=h.naturalHeight,{width:W,height:v}=On({width:O,height:D},{width:a.maxWidth||100,height:a.maxHeight||100},a.expand);z.value=W,_.value=v,l("load",{src:h.src,width:O,height:D}),i.value=!1,await new Promise(M=>setTimeout(M,100)),!i.value&&(A.value=!0)}function w(L){const h=L.target;l("error",h.src)}async function c(L){i.value=!0,A.value=!1,await new Promise(h=>setTimeout(h,150)),f.value=L}function m(){const L=document.createElement("a");L.href=f.value,L.download=a.fileName,L.click()}function k(){var L;(L=s.value)==null||L.click()}return(L,h)=>{const O=cn,D=tt,W=Ye;return $t((F(),oe("div",null,[n(e(Ae),null,{trigger:t(()=>[n(W,{show:e(i)||a.loading},{default:t(()=>[n(D,{justify:"center",align:"center",style:ce(e(r))},{default:t(()=>[y("a",{href:e(f),onClick:h[0]||(h[0]=He(()=>{},["left","prevent"])),target:"_blank",download:a.fileName,title:a.fileName,style:{"line-height":"0px"}},[n(Ze,{mode:"in-out"},{default:t(()=>[$t(n(O,{ref_key:"nImageRef",ref:s,"show-toolbar-tooltip":"",onLoad:T,onError:w,src:e(f),width:e(z),height:e(_),style:{border:"1px solid silver"}},null,8,["src","width","height"]),[[Et,e(A)]])]),_:1})],8,Dl)]),_:1},8,["style"])]),_:1},8,["show"])]),default:t(()=>[S(" "+d(a.fileName),1)]),_:1})],512)),[[Et,!L.hidden]])}}}),en=Be(Rl,[["__scopeId","data-v-823a733d"]]),jl={style:{"font-size":"smaller"}},Bl={style:{"font-family":"v-mono","font-size":"smaller"}},Zl=["href","download","title"],Wl={style:{"font-weight":"bold",color:"gray"}},Hl=["href","download","title"],Vl={style:{"font-weight":"bold",color:"gray"}},ql=["href","download"],Gl=ke({__name:"image-viewer",props:{url:{},originalUrl:{},name:{},originalName:{},size:{},originalSize:{},length:{},index:{},isSingle:{type:Boolean},variousInfo:{}},emits:["demand-image","close"],setup(o,{expose:u,emit:g}){const a=o,l=g;u({download:Q});const s=x(),i=x(),f=x(),z=kt(),{t:_}=je();pn();const A=x(!0),r=x(Math.max(a.index,0)+1),T=x(1),w=x(1),c=x(""),m=x(1),k=x(1),L=x(!1),h=x(!1),O=x(!1),D=be(()=>{var I,b;return((b=(I=f==null?void 0:f.value)==null?void 0:I.previewInstRef)==null?void 0:b.previewSrc)===c.value}),W=be(()=>r.value<a.length),v=be(()=>r.value>1);Fe(()=>{if(document.body.addEventListener("keydown",E),document.body.addEventListener("keydown",re),a.url&&a.index>=0){A.value=!1,c.value=a.url;return}l("demand-image",r.value-1)});let M=-1;xe(r,()=>{r.value<1||r.value>a.length||(clearTimeout(M),M=setTimeout(()=>{a.index!==r.value-1&&(l("demand-image",r.value-1),L.value=!0,h.value=!1,O.value=!1)},100))}),xe(()=>a.index,()=>{var b,H;let I="";if(a.index===0&&A.value?(A.value=!1,r.value=1,I=a.url):a.index===r.value-1&&(L.value=!1,I=a.url),I){try{(H=(b=f.value)==null?void 0:b.previewInstRef)!=null&&H.displayed&&(D.value?f.value.previewInstRef.setPreviewSrc(I):f.value.previewInstRef.setPreviewSrc(a.originalUrl))}catch{}c.value=I}},{immediate:!0});let ee="",te="";xe(()=>a.url,()=>{if(a.url!==ee){const I=ee,b=te;setTimeout(()=>{URL.revokeObjectURL(I),URL.revokeObjectURL(b)},1e3),ee=a.url,te=a.originalUrl}a.isSingle&&(A.value=!1,c.value=a.url)}),fn(()=>{document.body.removeEventListener("keydown",E),document.body.removeEventListener("keydown",re)});function re(I){var b,H,P,$;if(I.key==="Escape")try{(H=(b=f.value)==null?void 0:b.previewInstRef)!=null&&H.displayed&&(I.stopPropagation(),($=(P=f.value)==null?void 0:P.previewInstRef)==null||$.toggleShow(!1))}catch{}}function E(I){var b,H;switch(I.key){case"ArrowRight":case"PageDown":Z(1);break;case"ArrowLeft":case"PageUp":Z(-1);break;case"ArrowUp":case"Home":r.value=1;break;case"ArrowDown":case"End":r.value=a.length;break;case" ":case"Enter":ge();break;default:return}I.stopPropagation(),(H=(b=f.value)==null?void 0:b.previewInstRef)!=null&&H.displayed&&I.preventDefault()}function C({width:I,height:b}){T.value=I,w.value=b,h.value=!0}function B({width:I,height:b}){m.value=I,k.value=b,O.value=!0}function Q(){D.value?s.value.download():i.value.download()}async function ie(I){try{const b=await fetch(I).then(P=>P.blob()).then(P=>new Promise($=>{const N=new FileReader;N.onload=$,N.readAsDataURL(P)})).then(P=>P.target.result);navigator.clipboard.writeText(b);const H=P=>{P.target.focus(),P.target.select()};z.info({title:_("copiedDataURLDialogTitle"),content:()=>K("div",[K("div",_("copiedDataURLMessage")),K(gn,{onFocus:H,onClick:H,type:"textarea",value:b,readonly:!0,size:"small",style:{marginTop:"2em"}})]),positiveText:"OK"})}catch{z.error({title:"failed to copy Data URL",content:"could not copy Data URL",positiveText:"OK"})}}function Z(I){I>0&&r.value<a.length&&r.value++,I<0&&r.value>1&&r.value--}let le="";const ge=()=>{var b,H,P,$,N,X;le=(P=window.getComputedStyle((H=(b=f==null?void 0:f.value)==null?void 0:b.previewInstRef)==null?void 0:H.previewRef))==null?void 0:P.transform;const I=D.value;(X=(N=($=f==null?void 0:f.value)==null?void 0:$.previewInstRef)==null?void 0:N.handleSwitchNext)==null||X.call(N),rt(()=>{var Y,G,se;D.value===I&&((se=(G=(Y=f==null?void 0:f.value)==null?void 0:Y.previewInstRef)==null?void 0:G.handleSwitchNext)==null||se.call(G))})};function he(){try{rt(()=>f.value.previewInstRef.previewRef.style.transform=le)}catch{}}function ue({nodes:I}){const b=K(Rt,{color:D.value?"green":"gray",offset:[-20,-12],value:(D.value?_("status.Converted"):_("status.Original"))+" "+r.value},()=>K(we,{round:!0,onClick(){ge()},textColor:"white",size:"small",style:{marginLeft:"4px"}},{icon:()=>K(D.value?ro:uo)}));I.next=K(we,{onClick(){Z(1)},disabled:!W.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>K(Yt)}),I.prev=K(we,{onClick(){Z(-1)},disabled:!v.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>K(co)});try{const H=I.download.children;H.default=()=>_("save");const P=H.trigger();P.props.onClick=Q,H.trigger=()=>P}catch{}return[b,...Object.values(I)]}return(I,b)=>{const H=_e,P=tt,$=Ee,N=mn,X=mt,Y=jt,G=po,se=Ye;return F(),q(se,{size:"large",show:A.value,class:"body"},{default:t(()=>[n(G,{ref_key:"nImageGroupRef",ref:f,"show-toolbar-tooltip":"","render-toolbar":ue,onPreviewNext:he},{default:t(()=>[n(P,{justify:"center",align:"center",vertical:"",style:ce({visibility:A.value?"hidden":"visible"})},{default:t(()=>[n(P,{wrap:!1,align:"center"},{default:t(()=>[n(e(we),{onClick:b[0]||(b[0]=de=>Z(-1)),disabled:!e(v),block:"",style:{"max-width":"1em",height:"10em"},class:qe({pale:!e(v)}),title:I.$t("Prev")},{icon:t(()=>[n(H,{size:"30"},{default:t(()=>[n(e(fo))]),_:1})]),_:1},8,["disabled","class","title"]),n(P,{vertical:""},{default:t(()=>[n(P,{align:"center",wrap:!1},{default:t(()=>[n(P,{vertical:"",align:"center",style:{overflow:"hidden"}},{default:t(()=>[I.isSingle?pe("",!0):(F(),q(P,{key:0,style:{"white-space":"nowrap"},align:"center",wrap:!1},{default:t(()=>[y("span",jl,d(e(_)("status.index"))+":",1),y("span",Bl,d(r.value)+" / "+d(a.length),1)]),_:1})),n(P,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(P,{align:"center",justify:"center",vertical:""},{default:t(()=>[y("a",{href:I.originalUrl,onClick:b[3]||(b[3]=He(de=>{i.value.openPreview()},["prevent"])),download:I.originalName,title:I.originalName},[n(P,{align:"center",justify:"center",wrap:!1,style:{},class:"original-thumb"},{default:t(()=>[n(en,{ref_key:"thumbOrgRef",ref:i,src:I.originalUrl,width:1,"max-width":1,"max-height":1,loading:L.value,"file-name":I.originalName,"allow-next":r.value<a.length,"allow-prev":r.value>1,onLoad:B,onNext:b[1]||(b[1]=de=>Z(1)),onPrev:b[2]||(b[2]=de=>Z(-1)),hidden:!0},null,8,["src","loading","file-name","allow-next","allow-prev"]),n($,{vertical:"",align:"center"},{default:t(()=>[y("span",Wl,d(e(_)("status.Original")),1),n($,{justify:"center",style:{"font-size":"smaller","white-space":"nowrap","font-family":"v-mono",width:"10em"}},{default:t(()=>[S(d(String(m.value).padStart(5," "))+" × "+d(String(k.value).padStart(5," ")),1)]),_:1}),n($,{justify:"center"},{default:t(()=>[S(d(e(We)(a.originalSize,0)),1)]),_:1})]),_:1})]),_:1})],8,Zl)]),_:1}),n(P,{style:{margin:"1em"},class:"original-thumb"},{default:t(()=>[n(H,{size:"20",color:"silver"},{default:t(()=>[n(e(Yt))]),_:1})]),_:1}),y("a",{href:c.value,onClick:b[4]||(b[4]=He(de=>{s.value.openPreview()},["prevent"])),download:a.name,title:a.name},[n(P,{vertical:"",align:"center",justify:"center"},{default:t(()=>[n(P,{justify:"center",align:"center",size:0},{default:t(()=>[y("span",Vl,d(e(_)("status.Converted")),1)]),_:1}),n(P,{vertical:"",align:"center",justify:"center",size:0},{default:t(()=>[n(P,{justify:"center",style:{"font-size":"smaller","white-space":"nowrap","font-family":"v-mono",width:"10em"}},{default:t(()=>{var de;return[y("span",{style:ce((de=a.variousInfo)!=null&&de.shrinked?{color:"blue"}:{})},d(String(T.value).padStart(5," "))+" × "+d(String(w.value).padStart(5," ")),5)]}),_:1})]),_:1}),n(P,{justify:"center"},{default:t(()=>[S(d(e(We)(a.size,0)),1)]),_:1})]),_:1})],8,Hl)]),_:1}),n(P,{ref:"fileNameContainer",align:"center",class:"pathbox",title:a.name},{default:t(()=>[n(N,{"x-scrollable":!0,trigger:"hover",style:{"font-size":"smaller",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},{default:t(()=>[S(d(a.name),1)]),_:1})]),_:1},8,["title"])]),_:1}),n(P,{vertical:""},{default:t(()=>[n(en,{ref_key:"thumbConvRef",ref:s,src:c.value,width:140,"max-width":140,"max-height":100,loading:L.value,"file-name":a.name,"allow-next":r.value<a.length,"allow-prev":r.value>1,onLoad:C,onNext:b[5]||(b[5]=de=>Z(1)),onPrev:b[6]||(b[6]=de=>Z(-1))},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(P,{justify:"center",wrap:!0},{default:t(()=>[a.url?(F(),q(X,{key:0,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:a.url,ref:"saveImg",target:"_blank",download:a.name},[n(e(we),{round:"",size:"tiny"},{default:t(()=>[S(d(I.$t("save")),1)]),_:1})],8,ql)]),default:t(()=>[S(" "+d(I.$t("save")),1)]),_:1})):pe("",!0),a.url?(F(),q(X,{key:1,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(e(we),{onClick:b[7]||(b[7]=de=>ie(a.url)),round:"",size:"tiny"},{default:t(()=>[S("DataURL")]),_:1})]),default:t(()=>[S(" "+d(I.$t("convertedImageDataUrlTooltip")),1)]),_:1})):pe("",!0)]),_:1})]),_:1})]),_:1}),I.isSingle?pe("",!0):(F(),q(P,{key:0,align:"center",justify:"center",style:{padding:"0px 1em"}},{default:t(()=>[n(Y,{value:r.value,"onUpdate:value":b[8]||(b[8]=de=>r.value=de),tooltip:!1,step:1,min:1,max:a.length},null,8,["value","max"])]),_:1}))]),_:1}),n(e(we),{onClick:b[9]||(b[9]=de=>Z(1)),disabled:!e(W),block:"",style:{"max-width":"1em",height:"9em"},class:qe({pale:!e(W)}),title:I.$t("Next")},{icon:t(()=>[n(H,{size:"30"},{default:t(()=>[n(e(go))]),_:1})]),_:1},8,["disabled","class","title"])]),_:1})]),_:1},8,["style"]),n(e(we),{onClick:b[10]||(b[10]=de=>{l("close")}),circle:"",size:"tiny",color:"silver",style:{position:"absolute",right:"-16px",top:"-8px",opacity:"0.7"},title:I.$t("close")},{icon:t(()=>[n(H,{size:"12"},{default:t(()=>[n(e(mo))]),_:1})]),_:1},8,["title"])]),_:1},512)]),_:1},8,["show"])}}}),Kl=Be(Gl,[["__scopeId","data-v-aa89739a"]]),Ql={key:0},Yl={style:{"font-size":"smaller"}},Xl={class:"log-table"},Jl={class:"log-tr"},ei={class:"log-th"},ti={class:"log-th"},ni={style:{"min-width":"7em"},class:"log-th"},ai={style:{"padding-left":"2em"},class:"log-th"},oi={class:"log-td"},li={class:"log-td"},ii={class:"log-td"},si={class:"log-td"},ri={style:{margin:"1px"}},ui=["href","download","onClick"],di={key:0,style:{position:"relative"}},ci=["href","download"],pi=["href","download"],fi={key:0,style:{margin:"1px"}},gi=["href","download","onClick"],tn=99999,mi=100,vi=ke({__name:"status",props:{processing:{type:Boolean},status:{},interval:{}},emits:["all-zips-clicked","demand-zip-errors","demand-image"],setup(o,{emit:u}){const g=kt(),{t:a}=je(),l=pn(),s={W:160,H:80},i=o,f=u,z=x(!1),_=x([]),A=x(!1),r=x([]),T=x([]),w=x([0,0]),c=x([0,0]),m=x([0,0]),k=x([0,0]),L=x([0,0]),h=x([0,0]),O=x(0),D=x([0,0]),W=x(l.value.infoColor),v=x("#000000"),M=x("#000000"),ee=x(0),te=x(0),re=x(""),E=x("00:00:00");x(""),x("");const C=x(void 0),B=x(!1),Q=x(!0),ie=x(!1),Z=be(()=>B.value?he.value:ge.value),le=x("16em"),ge=x(5),he=x(1e3),ue=x(!0),I=x(!1),b=bt({name:"",originalName:"",size:0,url:"",originalUrl:"",originalSize:0,dataUrl:"",index:-1,various:{shrinked:!1}}),H=x(null),P=x(null),$=x(),N=x();Fe(()=>{xe(i.status,()=>se(),{deep:!1}),xe([P,ue],()=>{if(!P.value||!ue.value)return;const{width:ye,height:ze}=On(P.value,{width:s.W,height:s.H});H.value.width=ye,H.value.height=ze,H.value.style.width=ye+"px",H.value.style.height=ze+"px",P.value instanceof HTMLImageElement?H.value.getContext("2d").drawImage(P.value,0,0,ye,ze):(H.value.getContext("bitmaprenderer").transferFromImageBitmap(P.value),P.value=null,i.status.thumbnail=null)});let p=0;const j=()=>{if(p)return;const ye=Date.now();E.value="00:00:00",p=window.setInterval(()=>{const ze=(Date.now()-ye)/1e3;E.value=`${String(ze/3600|0).padStart(2,"0")}:${String(ze/60%60|0).padStart(2,"0")}:${String(ze%60|0).padStart(2,"0")}`},300)};j(),xe(()=>i.processing,(ye,ze)=>{ye?(j(),_.value=[],z.value=!1,A.value=!1,r.value=[],T.value=[]):(clearInterval(p),se(),p=0),ue.value=!1,I.value=!0,i.processing||de()});const ne=_o();let V;const ae=()=>{clearTimeout(V),V=setTimeout(()=>{if(!ue.value||fe)return;const ye=$.value.$parent.$el.offsetHeight,ze=window.innerHeight-ne.parent.parent.vnode.el.offsetHeight-8;le.value=Math.max(ye+ze,50)+"px"},100)};ae(),window.addEventListener("resize",ae);const me=new ResizeObserver(ae);me.observe(ne.parent.parent.vnode.el);let fe=!1;vo(()=>{fe=!0,me.disconnect(),clearInterval(p),clearTimeout(V),clearTimeout(G),clearTimeout(Ne),window.removeEventListener("resize",ae),URL.revokeObjectURL(b.url),URL.revokeObjectURL(b.originalName)})}),xe([()=>i.status.zips.length,()=>i.status.failedZips.length],()=>{const p=i.status;{r.value.length>p.zips.length&&(r.value.length=0);let j=0;const ne=p.zips.length===1&&p.zippedTotalCount===p.length;for(let V=r.value.length;V<p.zips.length;V++){const ae=p.zips[V],me=p.baseZipName+(ne?"":"-"+String(V+1).padStart(2,"0"))+".zip";j+=ae.size,r.value[V]={url:ae.url,size:ae.size,number:ne?0:V+1,sizeByUnit:We(ae.size),name:me,count:ae.count,clicked:!1}}}{T.value.length>p.failedZips.length&&(T.value.length=0);let j=0;const ne=p.failedZipDone&&p.failedZips.length===1;for(let V=T.value.length;V<p.failedZips.length;V++){const ae=p.failedZips[V],me=p.baseZipName+"-error"+(ne?"":"-"+String(V+1).padStart(2,"0"))+".zip";j+=ae.size,T.value[V]={url:ae.url,size:ae.size,number:ne?0:V+1,sizeByUnit:We(ae.size),name:me,count:ae.count,clicked:!1}}}});const X=i.interval||100;let Y=!1,G=0;function se(){if(Y)return;if(G){Y=!0;return}G=window.setTimeout(()=>{G=0,Y&&(Y=!1,se())},X);const p=i.status;z.value=p.length>=2,c.value[1]=c.value[0],c.value[0]=p.index,m.value[1]=m.value[0],m.value[0]=p.success,k.value[1]=k.value[0],k.value[0]=p.failure,L.value[1]=L.value[0],L.value[0]=p.done,h.value[1]=h.value[0],h.value[0]=p.converted,O.value=p.length,D.value[1]=D.value[0],D.value[0]=p.zippedTotalCount,ee.value=p.inputTotalSize,te.value=p.outputTotalSize;const j=te.value-ee.value;re.value=(j>=0?"+ ":"")+We(j);const ne=te.value/ee.value,V=(256|Math.min(255,Math.max(0,ne-1.5)*255|0)).toString(16).substring(1);v.value="#"+V+"0000";const ae=1024*1024,me=(256|Math.min(255,Math.max(0,j/1024/ae)*255|0)).toString(16).substring(1);if(M.value="#"+me+"0000",w.value[1]=w.value[0],w.value[0]=m.value[0]/O.value*100,ue.value||!i.processing){const fe=p.logs.slice(-tn);_.value.push(...fe);const ye=_.value.length-tn;ye>0&&_.value.splice(0,ye),Q.value&&fe.length&&Se(),_.value.length>he.value&&(he.value*=2)}p.logs.length=0,P.value=p.thumbnail,i.processing&&(W.value=k.value[0]?l.value.warningColor:l.value.infoColor),p.convertedImageUrl!==b.url&&(b.url=p.convertedImageUrl,b.name=p.convertedImageName,b.dataUrl=p.convertedImageDataUrl,b.size=p.convertedImageSize||p.outputTotalSize,b.originalSize=p.convertedImageOrgSize,b.originalName=p.convertedImageOrgName,b.index=p.convertedImageIndex,b.originalUrl=p.convertedImageOrgUrl,b.various={shrinked:p.convertedImageShrinked})}function de(){const p=i.status;W.value=i.status.success===i.status.length?l.value.successColor:l.value.errorColor,p.unconvertedFileCount>0,k.value[0]>0||(m.value[0],O.value),B.value||(B.value=!0)}const $e=be(()=>[{key:"open",label:a("status.openFailedList"),icon:()=>K(_e,()=>K(vn)),onSelect(){Ce()}},{key:"download",label:a("status.saveFailedList"),icon:()=>K(_e,()=>K(ho)),onSelect(){Ce(!0)}},{key:"zip",label:`${a("status.zipFailedList")}`+(i.status.failedZipDone?`(✔${a("status.done")})`:""),icon:()=>K(Ye,{show:A.value&&!i.status.failedZipDone,size:"small"},()=>K(_e,()=>K(Lt))),disabled:A.value,onSelect(p){return A.value=!0,f("demand-zip-errors"),!1}}]);function Me(p,j=!1){const{url:ne,name:V}=p;if(j){const ae=document.createElement("a");ae.href=ne,ae.download=V,ae.click()}p.clicked||(p.clicked=!0,i.processing||r.value.every(ae=>ae.clicked)&&f("all-zips-clicked"))}async function Ie(){if(z.value){if(r.value.length>=2&&!await new Promise((ne,V)=>g.warning({title:a("Download"),content:a("status.confirmDownloadMessage",[r.value.length]),positiveText:"OK",negativeText:a("cancel"),onPositiveClick:()=>ne(!0),onNegativeClick:()=>V()})))return;const p=r.value;for(const j of p)Me(j,!0)}else N.value.download()}function Ce(p=!1){const j=new Blob([i.status.unconvertedListText],{type:"text/plain;charset=utf8"}),ne=URL.createObjectURL(j),V=document.createElement("a");V.href=ne,V.target="_blank",p&&(V.download=i.status.baseZipName+"-error.txt"),V.click()}let Ne=0,nt=!1;function Se(p=!1){if(!nt){if(Ne){nt=!0;return}rt(()=>{!p&&(!B.value||!Q.value)||($.value.scrollTo({behavior:"instant",top:_.value.length*50}),Ne=window.setTimeout(()=>{Ne=0,nt&&(nt=!1,Se())},mi))})}}return(p,j)=>{const ne=Ee,V=yo,ae=wo,me=mt,fe=tt,ye=bo,ze=_n,xt=Ae,Qa=yn,Ya=Bt,Xa=Zt,Ja=Ut,at=we,eo=Nl,Kt=Rt,to=ko;return F(),q(fe,{vertical:"",justify:"center"},{default:t(()=>[n(ne,{justify:"center",align:"center",wrap:!1,style:{"white-space":"nowrap"}},{default:t(()=>[n(ne,{vertical:"",justify:"center",class:"left-column"},{default:t(()=>[n(V,{"tabular-nums":"",label:p.$t("status.elapsedTime")},{default:t(()=>[n(ne,null,{default:t(()=>[S(d(e(E)),1)]),_:1})]),_:1},8,["label"]),n(V,{"tabular-nums":"",label:p.$t("status.multiThreading")},{default:t(()=>[n(ne,{style:ce({color:i.status.threads?"":"red",fontSize:"smaller"})},{default:t(()=>[S(d(i.status.threads?p.$rt("{n} @:threads",i.status.threads):p.$t("disabled")),1)]),_:1},8,["style"])]),_:1},8,["label"]),n(V,{"tabular-nums":"",label:p.$t("status.outputSettings")},{default:t(()=>[n(ne,{vertical:"",justify:"end",style:{"font-size":"smaller","line-height":"1em"}},{default:t(()=>[y("div",null,d(p.$t("settings.imageType"))+": "+d(i.status.type),1),p.status.shrink?(F(),oe("div",Ql,[S(d(p.$t("status.Shrinking"))+": ",1),y("span",Yl,d(p.status.shrink[0])+"×"+d(p.status.shrink[1]),1)])):pe("",!0),y("div",null,"Zip: "+d(i.status.zipSize)+"MB",1)]),_:1})]),_:1},8,["label"])]),_:1}),n(ye,{type:"multiple-circle","stroke-width":1,percentage:[e(m)[0]/e(O)*100|0,e(c)[0]/e(O)*100|0],color:[e(l).successColor,e(W)],"rail-style":[{stroke:p.processing?e(l).successColor:e(W),opacity:.3},{stroke:e(W),opacity:.3}],class:"center-column"},{default:t(()=>[n(ne,{vertical:"",align:"center",style:{"font-family":"v-mono","white-space":"nowrap"},wrap:!1,"wrap-item":!1},{default:t(()=>[y("span",{style:ce({color:e(k)[0]?e(W):p.processing?e(l).successColor:e(W)})},[n(ae,{duration:e(X)*3|0,from:e(w)[1]|0,to:e(w)[0]|0,active:!0},null,8,["duration","from","to"]),S("% ")],4),n(fe,{wrap:!1,style:{border:"0px solid"}},{default:t(()=>[n(fe,{vertical:"",size:"small",justify:"end"},{default:t(()=>[n(fe,{justify:"end",wrap:!1},{default:t(()=>[e(k)[0]>0?(F(),q(me,{key:0,trigger:"hover",duration:0,delay:0,style:ce({color:e(l).errorColor}),placement:"left"},{trigger:t(()=>[y("span",{style:ce({fontSize:"xx-small",color:e(l).errorColor,lineHeight:"0"})}," ("+d(e(k)[0].toLocaleString("en-us"))+") ",5)]),default:t(()=>[S(" "+d(p.$t("status.progressErrors"))+" ("+d(e(k)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):pe("",!0),n(me,{trigger:"hover",duration:0,delay:0,style:ce({color:e(l).infoColor}),placement:"left"},{trigger:t(()=>[y("span",{style:ce({fontSize:"xx-small",color:e(l).infoColor,lineHeight:"0"})},d(e(c)[0].toLocaleString("en-us")),5)]),default:t(()=>[S(" "+d(p.$t("status.progressStarted"))+" ("+d(e(c)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])]),_:1}),n(fe,{justify:"end"},{default:t(()=>[n(me,{trigger:"hover",duration:0,delay:0,style:ce({color:e(l).successColor}),placement:"bottom"},{trigger:t(()=>[y("span",{style:ce({fontSize:"medium",color:e(l).successColor})},[n(ae,{duration:e(X)*3|0,from:e(m)[1],to:e(m)[0],active:!0,"show-separator":!0},null,8,["duration","from","to"])],4)]),default:t(()=>[S(" "+d(p.$t("status.progressSuccess"))+" ("+d(e(m)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])]),_:1})]),_:1}),n(fe,{align:"end",style:{"font-size":"medium",border:"0px solid"}},{default:t(()=>[n(me,{trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:t(()=>[S(" / "+d(e(O).toLocaleString("en-us")),1)]),default:t(()=>[S(" "+d(p.$t("status.progressTotal"))+" ("+d(e(O).toLocaleString("en-us"))+") ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["percentage","color","rail-style"]),n(ne,{vertical:"",style:{height:"100%"},justify:"center"},{default:t(()=>[n(V,{"tabular-nums":"",label:p.$t("status.inputSize")},{default:t(()=>[n(ne,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[S(d((e(ee)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(V,{"tabular-nums":"",label:p.$t("status.outputSize")},{default:t(()=>[n(ne,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[S(d((e(te)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(V,{"tabular-nums":"",label:p.$t("status.outInRate")},{default:t(()=>[n(ne,{vertical:"",align:"end",justify:"start",style:{"font-size":"xx-small","font-family":"v-mono","line-height":"50%"}},{default:t(()=>[y("span",{style:ce({color:e(v),fontSize:"larger"})},"× "+d((e(te)/e(ee)||1).toFixed(2)),5),y("span",{style:ce({color:e(M)})},"("+d(e(re))+")",5)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1}),n(Xa,{"display-directive":"show","trigger-areas":["arrow","main"],"default-expanded-names":"log-collapse","expanded-names":e(ue)?["log-collapse"]:[],"onUpdate:expandedNames":j[7]||(j[7]=R=>{ue.value=!!String(R)})},{default:t(()=>[n(Ya,{title:"Log",name:"log-collapse",style:{"white-space":"nowrap"}},hn({header:t(()=>[n(fe,{align:"center",wrap:!1},{default:t(()=>[S(d(p.$t("status.log")),1),p.processing&&!e(ue)?(F(),q(e(Ye),{key:0,size:16})):pe("",!0)]),_:1})]),default:t(()=>[n(fe,{wrap:!1,class:qe({"log-container":1,"expand-log":e(B)}),align:"stretch",style:ce(e(B)?{height:e(le),maxHeight:e(le)}:{})},{default:t(()=>[n(e(mn),{ref_key:"scrollref",ref:$,"x-scrollable":!0,onMouseup:j[5]||(j[5]=R=>Q.value=!1),onWheel:j[6]||(j[6]=R=>Q.value=!1),trigger:"none",style:ce([{"z-index":"2","padding-right":"10px","min-height":"7em"},{maxHeight:e(le)}]),size:50},{default:t(()=>[y("table",Xl,[y("tr",Jl,[y("th",ei,d(p.$t("status.table.core")),1),y("th",ti,d(p.$t("status.table.index")),1),y("th",ni,d(p.$t("status.table.status")),1),y("th",ai,d(p.$t("status.table.details")),1)]),(F(!0),oe(Te,null,Qe((e(ie)?e(_).filter(R=>!R.completed):e(_)).slice(-e(Z)),({index:R,key:Ke,command:De,path:zt,core:Qt})=>(F(),oe("tr",{key:Ke,class:"log-tr"},[y("td",oi,d(Qt>=0?Qt+1:"-"),1),y("td",li,d(R+1),1),y("td",ii,d(De),1),y("td",si,d(zt),1)]))),128))])]),_:1},8,["style"]),n(fe,{style:ce([{"align-self":"center",position:"absolute","z-index":"0","margin-top":"0.5em",right:"0.1em","line-height":"0px"},{width:s.W+"px",height:s.H+"px"}]),justify:"center",align:"center"},{default:t(()=>[n(e(Ye),{size:"small",show:p.processing},{default:t(()=>[i.status.thumbnail===void 0?(F(),q(Qa,{key:0,description:"EMPTY"})):pe("",!0),$t(y("canvas",{ref_key:"thumbcanvas",ref:H,width:"106",height:"80",style:ce({border:"1px solid gray",filter:p.processing?"":"opacity(0.35)"})},null,4),[[Et,i.status.thumbnail!==void 0]])]),_:1},8,["show"])]),_:1},8,["style"])]),_:1},8,["class","style"])]),_:2},[e(ue)?{name:"header-extra",fn:t(()=>[n(fe,{align:"center",wrap:!1},{default:t(()=>[n(At,null,{default:t(()=>[n(ze,{key:"a",checked:e(ie),"onUpdate:checked":j[0]||(j[0]=R=>Ue(ie)?ie.value=R:null),size:"small",style:{"font-size":"smaller"},class:"hide-mobile"},{default:t(()=>[S(d(p.$t("status.filterSuccess")),1)]),_:1},8,["checked"]),e(B)?(F(),q(ze,{key:"b",checked:e(Q),"onUpdate:checked":[j[1]||(j[1]=R=>Ue(Q)?Q.value=R:null),j[2]||(j[2]=R=>R&&Se(!0))],size:"small",style:{"font-size":"smaller"}},{default:t(()=>[S(d(p.$t("status.autoScroll")),1)]),_:1},8,["checked"])):pe("",!0)]),_:1}),n(xt,{style:{"max-width":"30em"}},{trigger:t(()=>[n(ze,{size:"small",checked:e(B),"onUpdate:checked":[j[3]||(j[3]=R=>Ue(B)?B.value=R:null),j[4]||(j[4]=R=>{Q.value=R,Se(!0)})],style:{"font-size":"smaller"}},{default:t(()=>[S(d(p.$t("status.expandLog")),1)]),_:1},8,["checked"])]),default:t(()=>[S(d(p.$t("status.expandLogTooltip")),1)]),_:1})]),_:1})]),key:"0"}:void 0]),1024)]),_:1},8,["expanded-names"]),n(Ja,{style:{margin:"0.2em"}}),n(fe,{wrap:!1,vertical:""},{default:t(()=>[n(fe,{justify:"center",align:"center",vertical:""},{default:t(()=>[n(Ze,null,{default:t(()=>[e(I)?e(I)&&p.status.success>0?(F(),q(Kl,{key:1,ref_key:"imageViewer",ref:N,url:e(b).url,size:e(b).size,"original-url":e(b).originalUrl,"original-size":e(b).originalSize,name:e(b).name,originalName:e(b).originalName,length:i.status.success,index:e(b).index,"various-info":e(b).various,"is-single":!e(z),onDemandImage:j[9]||(j[9]=R=>f("demand-image",R)),onClose:j[10]||(j[10]=R=>I.value=!1)},null,8,["url","size","original-url","original-size","name","originalName","length","index","various-info","is-single"])):pe("",!0):(F(),q(at,{key:0,tertiary:"",type:"success",size:"small",disabled:!(p.status.success>0),onClick:j[8]||(j[8]=R=>I.value=!0)},{default:t(()=>[S(d(p.$t("status.browseConvertedImages")),1)]),_:1},8,["disabled"]))]),_:1})]),_:1}),n(fe,{justify:"center"},{default:t(()=>[e(z)?(F(),q(fe,{key:0,vertical:"",align:"center"},{default:t(()=>[n(me,{placement:"left"},{trigger:t(()=>[n(ye,{type:"line","indicator-placement":"inside",color:"lime","rail-color":"rgba(99, 255, 99, 0.5)","indicator-text-color":e(D)[0]===e(O)?"white":"green",processing:p.processing,percentage:e(D)[0]/e(O)*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[y("span",ri,d(e(D)[0]/e(O)*100|0)+"% "+d(p.$t("status.zipped"))+" ("+d(e(D)[0])+"/"+d(e(h)[0])+")",1)]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[S(" "+d(p.$t("status.zippingProgress"))+" ("+d(e(D)[0]/e(O)*100|0)+"%) ",1)]),_:1}),n(Ze,{name:"zipcontainer"},{default:t(()=>[e(r).length>=1||i.processing?(F(),q(At,{key:0,name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(F(!0),oe(Te,null,Qe(e(r),(R,Ke)=>(F(),oe("span",{key:Ke},[n(me,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:R.url,download:R.name,class:"in-button-anchor",onClick:De=>Me(R)},[n(at,{class:"zip-button",size:"tiny",color:R.clicked?"#050":"lime","text-color":R.clicked?"gray":"white",onClick:He(De=>Me(R),["stop"]),round:""},{default:t(()=>[n(e(_e),{size:"tiny"},{default:t(()=>[n(e(Lt))]),_:1}),S("ZIP"+d(R.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,ui)]),default:t(()=>[y("div",{style:ce({color:e(l).successColor})},[y("div",null,"ZIP "+d(R.number||"")+" ("+d(p.$t("success"))+")",1),y("div",null,d(R.name),1),y("div",null,d(R.sizeByUnit),1),y("div",null,d(p.$rt("{n} @:files",R.count)),1)],4)]),_:2},1024)]))),128))]),_:1})):pe("",!0)]),_:1})]),_:1})):pe("",!0)]),_:1}),n(Ze,null,{default:t(()=>[i.processing?pe("",!0):(F(),q(fe,{key:0,justify:"center",align:"center"},{default:t(()=>[n(me,{trigger:"hover",duration:0,delay:0,placement:"left",style:ce({color:"white",backgroundColor:e(l).successColor}),"arrow-style":{backgroundColor:e(l).successColor}},{trigger:t(()=>[n(Ze,{name:"save"},{default:t(()=>[e(m)[0]>0?(F(),oe("span",di,[n(Kt,{value:e(z)?e(D)[0].toLocaleString("en-us"):i.status.type.replace(/\(.+\)/,""),color:e(l).successColorHover,offset:[-20,-3]},{default:t(()=>[n(at,{size:"medium",onClick:Ie,color:e(l).successColor,round:""},{default:t(()=>[e(z)?(F(),oe(Te,{key:0},[e(r).length?(F(),oe("a",{key:0,href:e(r)[0].url,download:e(r)[0].name,class:"in-button-anchor",onClick:j[11]||(j[11]=He(()=>{},["prevent"]))},[n(eo),S(" × "+d(e(r).length)+" "+d(p.$t("save")),1)],8,ci)):pe("",!0)],64)):(F(),oe("a",{key:1,href:e(b).url,download:e(b).name,class:"in-button-anchor",onClick:j[12]||(j[12]=He(()=>{},["prevent"]))},[n(e(_e),{size:"tiny"},{default:t(()=>[n(e(wn))]),_:1}),S(" "+d(p.$t("save")),1)],8,pi))]),_:1},8,["color"])]),_:1},8,["value","color"])])):pe("",!0)]),_:1})]),default:t(()=>[p.status.length>=2?(F(),oe(Te,{key:0},[y("div",null,d(e(a)("success"))+": "+d(e(D)[0].toLocaleString()),1),y("div",null,d(e(a)("status.totalSize"))+": "+d(e(We)(p.status.zippedTotalSize)),1),y("div",null,"ZIP × "+d(e(r).length),1),y("div",null,d(e(a)("status.saveAllZipsTooltip")),1)],64)):(F(),oe(Te,{key:1},[S(d(p.$t("status.downloadConvertedImage",e(r).length)),1)],64))]),_:1},8,["style","arrow-style"]),!p.processing&&p.status.success!==e(O)?(F(),q(to,{key:0,options:e($e),onSelect:j[13]||(j[13]=(R,Ke)=>{var De;return(De=e($e).find(({key:zt})=>R===zt))==null?void 0:De.onSelect()}),"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start"},{default:t(()=>[n(me,{show:e(C),duration:0,delay:0,placement:"right",style:ce({color:"white",backgroundColor:e(l).errorColor}),"arrow-style":{backgroundColor:e(l).errorColor}},{trigger:t(()=>[n(Kt,{value:p.status.unconvertedFileCount.toLocaleString(),color:e(l).errorColorHover,offset:[-0,-3]},{default:t(()=>[n(at,{size:"small",color:e(l).errorColor},{default:t(()=>[n(e(_e),{size:"medium",style:{"vertical-align":"middle"}},{default:t(()=>[n(e(xo))]),_:1})]),_:1},8,["color"])]),_:1},8,["value","color"])]),default:t(()=>[y("div",null,[y("div",null,d(e(a)("failed"))+": "+d(p.status.unconvertedFileCount.toLocaleString()),1),y("div",null,d(e(a)("status.totalSize"))+": "+d(e(We)(p.status.unconvertedTotalSize)),1)])]),_:1},8,["show","style","arrow-style"])]),_:1},8,["options"])):pe("",!0)]),_:1}))]),_:1}),n(Ze,{name:"zipcontainer"},{default:t(()=>[e(A)?(F(),q(fe,{key:0,vertical:"",align:"center"},{default:t(()=>[n(me,{placement:"left"},{trigger:t(()=>[n(ye,{type:"line","indicator-placement":"inside",color:"red","rail-color":"rgba(255, 0, 0, 0.5)","indicator-text-color":p.status.failedFileZippedCount===p.status.unconvertedFileCount?"white":"#500",processing:e(A)&&!p.status.failedZipDone&&!p.status.failedToCreateFailedZip,percentage:p.status.failedFileZippedCount/p.status.unconvertedFileCount*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[p.status.failedToCreateFailedZip?(F(),oe("div",{key:1,style:ce({color:e(l).errorColor})},d(p.$t("status.failureZippingFailedFiles")),5)):(F(),oe("span",fi,d(p.status.failedFileZippedCount/p.status.unconvertedFileCount*100|0)+"% "+d(p.$t("status.zipped"))+" ("+d(p.status.failedFileZippedCount)+"/"+d(p.status.unconvertedFileCount)+")",1))]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[S(" "+d(p.$t("status.zippingProgress"))+" ("+d(p.status.failedFileZippedCount/p.status.unconvertedFileCount*100|0)+"%) ",1)]),_:1}),n(At,{name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(F(!0),oe(Te,null,Qe(e(T),(R,Ke)=>(F(),oe("span",{key:Ke},[n(me,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:R.url,download:R.name,class:"in-button-anchor",onClick:De=>Me(R)},[n(at,{class:"zip-button",size:"tiny",color:R.clicked?"#551122":"#F00","text-color":R.clicked?"gray":"white",onClick:He(De=>Me(R),["stop"]),round:""},{default:t(()=>[n(e(_e),{size:"tiny"},{default:t(()=>[n(e(zo))]),_:1}),S("ZIP"+d(R.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,gi)]),default:t(()=>[y("div",{style:ce({color:e(l).errorColor})},[y("div",null,"ZIP "+d(R.number||"")+" ("+d(p.$t("failed"))+")",1),y("div",null,d(R.name),1),y("div",null,d(R.sizeByUnit),1),y("div",null,d(p.$rt("{n} @:files",R.count)),1)],4)]),_:2},1024)]))),128))]),_:1})]),_:1})):pe("",!0)]),_:1})]),_:1})]),_:1})}}}),hi=Be(vi,[["__scopeId","data-v-c1722c37"]]),_i=["innerHTML"],yi={style:{"flex-grow":"1"}},wi=ke({__name:"converter",props:ut({input:{},format:{},quality:{},retainExtension:{type:Boolean},maxZipSizeMB:{},threads:{}},{showNote:{type:Boolean},showNoteModifiers:{}}),emits:ut(["start","end","multi-thread-count"],["update:showNote"]),setup(o,{emit:u}){et(Ge);const{t:g}=je(),a=kt(),l=Ao(),s=Io(),i=10,f=navigator.hardwareConcurrency,z=typeof OffscreenCanvas=="function",_=100,A=16,r=o,T=Le(o,"showNote"),w=u,c=x(!1),m=x(!1),k=x(!1),L=x(0),h=x(!1),O=x(!1),D=x("initializing"),W=x("info"),v=bt(Z());let M=!1,ee=()=>{},te=0,re=!1;xe(()=>r.input,$=>{$!=null&&$.length&&ge($)}),Fe(async()=>{await H(),P()});async function E(){let $=!0;if(te>i*1e3&&!re&&v.success>0&&($=!1,await new Promise(N=>{a.warning({title:g("confirmCloseDialogTitle"),autoFocus:!0,maskClosable:!1,positiveText:g("close"),negativeText:g("back"),onPositiveClick:()=>$=!0,onAfterLeave:N,content:g("confirmCloseDialog")})})),!$)return!1;s.destroyAll(),l.destroyAll(),h.value=!1,T.value=!1}function C($){v.demandImage($)}function B(){!m.value&&c.value?m.value=!0:E()}function Q(){ge(r.input)}let ie=x(()=>{});function Z($){const N={logs:[],index:0,converted:0,success:0,failure:0,done:0,length:0,zippedTotalCount:0,zippingErrorCount:0,zippedTotalSize:0,processing:!1,zips:[],inputTotalSize:0,outputTotalSize:0,thumbnail:null,baseZipName:"testzipname",type:"image/any",startedTime:Date.now(),convertedImageDataUrl:"",convertedImageName:"",convertedImageUrl:"",convertedImageOrgUrl:"",convertedImageIndex:-1,convertedImageFileId:-1,convertedImageShrinked:!1,zipSize:r.maxZipSizeMB,shrink:U.multithread&&U.shrinkImage?[U.maxWidth,U.maxHeight]:void 0,unconvertedListText:"",failedZipDone:!1,failedZips:[],unconvertedFileCount:0,unconvertedTotalSize:0,failedFileZippedCount:0,failedToCreateFailedZip:!1,demandImage:()=>{}};return Object.assign($||{},N)}function le(){O.value=!1,URL.revokeObjectURL(v.convertedImageUrl),URL.revokeObjectURL(v.convertedImageOrgUrl);for(const $ of v.zips)URL.revokeObjectURL($.url);v.zips.length=0;for(const $ of v.failedZips)URL.revokeObjectURL($.url);v.failedZips.length=0,Z(v),ee(),ee=()=>{},re=!1,k.value=!1,m.value=!1}async function ge($){if(c.value){a.error({title:"Busy",positiveText:"OK",content:g("interfered")});return}let N=I($);Z(v),le();const X={convertedImageBlob:null,convertedImageWidth:0,convertedImageHeight:0,convertedImageName:""};L.value++,h.value=!0,O.value=!0,c.value=!0,v.processing=!0,W.value="info",D.value=g("processing");const Y=new Set,G=r.format,se=r.quality,de=[...G.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),$e=b(G,se,N[0].webkitRelativePath);v.length=N.length,v.baseZipName=$e,v.type=G.replace(/image\//,"").toUpperCase()+(/jpe?g|webp/i.test(G)?" ("+se+")":""),v.threads=M?0:r.threads;const Me=Date.now();w("start");const Ie=N.concat();let Ce,Ne;if({exception:Ne,callbackToGenerateFailedZips:Ce,callbackToClearConverter:ee}=!M&&r.threads>=2?await Il({files:Ie,completedFileIdSet:Y,ConvStats:v,canceled:m,props:r,imageType:G,quality:se,outputExt:de,format:G,message:l,notification:s}):await El(Ie,Y,X,r,m,v),Ne){let Se;switch(Ne.message){case"worker-load-error":Se=g("errMsgWorkerLoadError");break;default:Se="unexpected error"}a.error({title:"Error",autoFocus:!0,maskClosable:!1,closable:!1,content:()=>K("div",[K("p",Se),K(we,{onClick(){location.reload()}},g("Reload"))])})}if(v.length,v.success===v.length?(W.value="success",D.value=g("completed")):(W.value="error",D.value=m.value?g("aborted"):g("incomplete")),Y.size!==N.length){const Se=he(N,Y);ie.value=()=>{!Se||!Se.length||Ce(Se)}}c.value=!1,v.processing=!1,k.value=!0,te=Date.now()-Me,w("end")}function he($,N){const X=[],Y=[];let G=0;for(const se of $)N.has(se._id)||(X.push(se),Y.push(se.webkitRelativePath||se.relativePath||se.name),G+=se.size);return Y.length&&(v.unconvertedListText=Y.join(`
`),v.unconvertedFileCount=X.length,v.unconvertedTotalSize=G),X}let ue=0;function I($){const N=[];for(const X of $)X.hasOwnProperty("_id")||Object.defineProperty(X,"_id",{value:ue++}),N.push(X);return N}function b($,N,X){var $e;const Y=new Date;$=$.replace(/^image\//,"").toLowerCase();const G=U.useFolderNameForZip&&(($e=String(X).match(/^\/?([^/]+)\//))==null?void 0:$e[1])||"avif2jpg",se=`
    ${Y.getFullYear().toString().substring(2)}
    ${String((Y.getMonth()+1)*100+Y.getDate()).padStart(4,"0")}
    ${String(Y.getHours()*1e4+Y.getMinutes()*100+Y.getSeconds()).padStart(6,"0")}
    -
    ${$+(/jpe?g|webp/i.test($)?N:"")}
  `.replace(/\s/g,"");return`${G}-${se}`.replace(/\s+/g," ")}async function H(){const $="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",N=document.createElement("img"),X=Un(N).then(()=>!0,()=>!1);N.src=$,await X||a.warning({title:"Unsupported",positiveText:"OK",maskClosable:!1,content:g("avifUnsupported")})}function P(){(!z||f<2||!Promise.any)&&(M=!0),w("multi-thread-count",M?0:Math.min(f,A))}return($,N)=>{const X=_e,Y=Rt,G=Ae,se=Ee,de=Ye,$e=tt,Me=Ot;return F(),oe(Te,null,[n(se,{justify:"center",align:"center"},{default:t(()=>{var Ie;return[!e(c)&&((Ie=r.input)!=null&&Ie.length)?(F(),q(G,{key:0,trigger:"hover",placement:"top","keep-alive-on-hover":!1,duration:0,delay:50},{trigger:t(()=>{var Ce;return[n(Y,{value:((Ce=$.input)==null?void 0:Ce.length)||0,max:999,offset:[-12,-5],color:"#99999966"},{default:t(()=>[n(e(we),{onClick:Q,round:""},{icon:t(()=>[n(X,{size:"1.5em",color:"#CCCCCC"},{default:t(()=>[n(e(To))]),_:1})]),default:t(()=>[S(" "+d(e(g)("convertAgain")),1)]),_:1})]),_:1},8,["value"])]}),default:t(()=>{var Ce;return[y("div",{innerHTML:e(g)("reconvertTip",(Ce=r.input)==null?void 0:Ce.length)},null,8,_i)]}),_:1})):pe("",!0)]}),_:1}),n(Me,{ref:"processingModal",show:e(h),"onUpdate:show":N[2]||(N[2]=Ie=>Ue(h)?h.value=Ie:null),closable:e(k),"close-on-esc":!1,preset:"dialog","display-directive":"show",onClick:N[3]||(N[3]=Ie=>{e(s).destroyAll(),e(l).destroyAll()}),onMaskClick:N[4]||(N[4]=Ie=>{e(s).destroyAll(),e(l).destroyAll()}),onClose:E,onEsc:B,title:e(D),type:e(W),"mask-closable":!1,"on-after-leave":le,class:"processing-dialog"},{default:t(()=>[n($e,{vertical:"",style:{"flex-grow":"1"}},{default:t(()=>[y("div",yi,[e(O)?(F(),q(hi,{key:e(L),processing:e(c),status:e(v),interval:_,onAllZipsClicked:N[0]||(N[0]=Ie=>Ue(re)?re.value=!0:re=!0),onDemandZipErrors:e(ie),onDemandImage:C},null,8,["processing","status","onDemandZipErrors"])):pe("",!0)]),n($e,{justify:"end"},{default:t(()=>[e(c)?(F(),q(e(we),{key:0,disabled:e(m),ref:"cancelbutton",round:"",size:"large",onClick:N[1]||(N[1]=Ie=>m.value=!0)},{default:t(()=>[n(de,{show:e(m)&&!e(k),size:"small"},{default:t(()=>[S(d(e(g)("cancel")),1)]),_:1},8,["show"])]),_:1},8,["disabled"])):e(k)?(F(),q(e(we),{key:1,onClick:E,round:"",size:"large",style:{"font-size":"small","margin-top":"1em"}},{default:t(()=>[S(d(e(g)("close")),1)]),_:1})):pe("",!0)]),_:1})]),_:1})]),_:1},8,["show","closable","title","type"])],64)}}}),bi="/avif2jpeg/dist/avif.png",Nn=o=>(Nt("data-v-06e4552c"),o=o(),Dt(),o),ki={class:"container-1"},xi=Nn(()=>y("span",null,"Drag & Drop",-1)),zi={style:{position:"relative"}},Ai={style:{position:"absolute","font-size":"0.5em",right:"-3.5em",bottom:"-1.5em","white-space":"nowrap"}},Ii={style:{color:"#666666"}},Ti=Nn(()=>y("img",{src:bi,class:"avif"},null,-1)),Si=["innerHTML"],Ci={style:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","font-size":"xx-small","white-space":"nowrap"}},Li=ke({__name:"droptarget",props:{forbidden:{type:Boolean},dropTarget:{}},emits:["drop"],setup(o,{emit:u}){et(Ge);const g=o,a=u,l=So(),s=x(!1),i=x(0),f=x("");Fe(()=>{z(g.dropTarget||document)});function z(A){document.ondragstart=r=>r.preventDefault(),document.ondragover=r=>r.preventDefault(),A.ondrop=async r=>{var w;if(r.preventDefault(),s.value||g.forbidden)return;s.value=!0,i.value=0,f.value="";let T;try{const c=[...r.dataTransfer.items].map(m=>m.webkitGetAsEntry());l.start(),T=await _(c),l.finish()}catch{T=[...((w=r.dataTransfer)==null?void 0:w.files)??[]],l.error()}s.value&&(s.value=!1,a("drop",T))}}async function _(A,r){r=r||[];for(const T of A)if(T.isFile){const w=await new Promise(c=>T.file(m=>c(m)));Object.defineProperty(w,"webkitRelativePath",{value:T.fullPath}),r.push(w),i.value++}else if(T.isDirectory){f.value=T.fullPath;const w=T.createReader();do{const c=await new Promise(m=>w.readEntries(k=>m(k)));if(!c.length)break;await _(c,r)}while(!0)}return r}return(A,r)=>{const T=_e,w=mt,c=Ee,m=Ae,k=Ot;return F(),oe("div",ki,[n(m,{to:!1,"display-directive":"show",trigger:"hover",duration:0,delay:0,placement:"bottom-end"},{trigger:t(()=>[n(c,{vertical:"",class:"container-2"},{default:t(()=>[n(c,{align:"center",wrap:!1,class:"container-3"},{default:t(()=>[n(c,{vertical:"",align:"center",wrap:!1,style:{"font-weight":"bold","font-size":"1em","line-height":"90%","white-space":"nowrap"}},{default:t(()=>[xi,y("span",zi,[S(" AVIF Images "),y("span",Ai,[S(" or "),n(w,{placement:"bottom-end"},{trigger:t(()=>[y("span",Ii,[n(T,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Wt))]),_:1}),S(" Folders ")])]),default:t(()=>[S(" You can drag and drop your local folders ")]),_:1})])])]),_:1}),n(c,null,{default:t(()=>[Ti]),_:1})]),_:1})]),_:1})]),default:t(()=>[y("h3",{innerHTML:A.$t("droptarget"),style:{"max-width":"200px","text-align":"center","word-break":"keep-all","overflow-wrap":"break-word"}},null,8,Si)]),_:1}),n(k,{show:e(s),"onUpdate:show":r[0]||(r[0]=L=>Ue(s)?s.value=L:null),closable:!0,preset:"dialog",title:"Parsing dropped items.",type:"info","mask-closable":!1,"negative-text":A.$t("cancel")},{default:t(()=>[n(c,{vertical:"",align:"center"},{default:t(()=>[y("div",Ci,d(e(f)),1),y("div",null,"found "+d(e(i))+" files",1)]),_:1})]),_:1},8,["show","negative-text"])])}}}),$i=Be(Li,[["__scopeId","data-v-06e4552c"]]),Dn=o=>(Nt("data-v-c3b91a90"),o=o(),Dt(),o),Ei={class:"container-1"},Fi={class:"container-2"},Mi=["innerHTML"],Pi=["innerHTML"],Oi={style:{"padding-left":"1em"}},Ui=Dn(()=>y("br",null,null,-1)),Ni=Dn(()=>y("ul",null,[y("li",null,"Each extension must begin with a period. "),y("li",null,"Separate each extension with a comma. "),y("li",null,"Use alphameric characters.")],-1)),Di=["innerHTML"],Ri=["accept"],ji=ke({__name:"file-selector",props:ut({expanded:{type:Boolean},target:{},userExtensions:{},forbidden:{type:Boolean}},{disableNotifyingFolderSelect:{type:Boolean},disableNotifyingFolderSelectModifiers:{}}),emits:ut(["input","click","cancel","on-change-accept","update:target","update:userExtensions","update:expanded"],["update:disableNotifyingFolderSelect"]),setup(o,{emit:u}){const g=kt(),{t:a}=je(),l=et(Ge),s=["avif_only","all_images","all_files","edit_type"],i=o,f=u,z=x(0),_=x(!1),A=x(!1),r=be(()=>te(m.value)),T=be(()=>k.value.split(",").every(B=>/^\s*(\.[\w\-]+)*\s*$/.test(B))?"success":"error"),w=be(()=>!i.forbidden&&!A.value),c=be({get:()=>i.expanded,set:C=>{f("update:expanded",C)}}),m=be({get:()=>s.indexOf(i.target)>=0?i.target:s[0],set:C=>{f("update:target",C)}}),k=be({get:()=>i.userExtensions,set:C=>{f("update:userExtensions",C)}}),L=Le(o,"disableNotifyingFolderSelect"),h=x(null),O=x(null),D=x(ee());xe(m,C=>{f("on-change-accept",r.value)}),Fe(()=>{});async function W(C){if(f("click"),C===O.value&&!L.value){let B=!1;if(await new Promise(Q=>{g.info({title:a("loadfolderNotifyingTitle"),positiveText:a("Continue"),negativeText:a("Cancel"),onAfterLeave:()=>Q(B),onPositiveClick:()=>B=!0,content:()=>K("div",[K("p",{},a("loadfolderNotifyingMessageTerm1")),K("div",[K(cn,{width:250,style:{border:"3px solid gray"},src:"/avif2jpeg/dist//notification-folder.png"})]),K("p",{},a("loadfolderNotifyingMessageTerm2")),K("p",[K(_n,{onUpdateChecked:ie=>L.value=ie,checked:L.value},()=>a("checkboxTextDontShowThis"))])])})}),!B){L.value=!1,f("cancel");return}}C.click()}function v(){f("cancel")}function M(C){const Q=[...C.target.files];h.value.value="",O.value.value="",E(Q)}function ee(){return"webkitdirectory"in document.createElement("input")}function te(C){switch(C){case"avif_only":return".avif, .webp";case"all_images":return".jpg, .jpeg, .jfif, .pjpeg, .pjp, .gif, .png, .webp, .avif, .bmp, .apng, .ico";case"edit_type":return k.value;case"all_files":default:return".*"}}async function re(C){const B=String(r.value).toLowerCase().replace(/\s+/g,"");if(B&&r.value!==".*"){const Q=B.split(",");C=C.filter(ie=>Q.includes(ie.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),C.length||(await new Promise(ie=>{g.error({title:"Images Not Found",positiveText:"OK",onAfterLeave:ie,content:()=>K("div",[K(yn,{description:"NO IMAGES"}),`${a("noimage")}`,K("br"),r.value])})}),v())}return C}async function E(C){A.value=!0,C=await re(C),z.value=C.length,C.length>0&&f("input",C),A.value=!1}return(C,B)=>{const Q=_e,ie=we,Z=Ae,le=Ee,ge=Eo,he=gn,ue=Co,I=mt,b=Lo,H=Bt,P=Zt;return F(),oe(Te,null,[y("div",Ei,[y("div",Fi,[n(le,{vertical:"",align:"center",justify:"center",inline:""},{default:t(()=>[n(le,{align:"center",justify:"space-around",class:"main-buttons"},{default:t(()=>[n(le,{vertical:"",align:"stretch",justify:"center"},{default:t(()=>[n(Z,{to:!1,"display-directive":"show",show:e(l).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(l).LANDSCAPE.value?"right":"top",duration:0,delay:0,"z-index":10},{trigger:t(()=>[n(ie,{disabled:!e(w),size:"large",onClick:B[0]||(B[0]=$=>W(e(h))),round:"",style:{width:"100%","background-color":"white","font-size":"large"}},{icon:t(()=>[n(Q,{size:"large",color:"gray"},{default:t(()=>[n(e(bn))]),_:1})]),default:t(()=>[S(" "+d(C.$t("loadbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[y("div",{innerHTML:C.$t("loadbuttontooltip")},null,8,Mi)]),_:1},8,["show","placement"]),!e(l).IS_SP&&e(D)||e(l).SSR?(F(),q(Z,{key:0,to:!1,"display-directive":"show",trigger:"hover",placement:"left","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:e(l).showTooltipsBeforeMounted.value},{trigger:t(()=>[n(ie,{disabled:!e(w),size:"large",onClick:B[1]||(B[1]=$=>W(e(O))),round:"",style:{width:"100%","background-color":"white","font-size":"large"}},{icon:t(()=>[n(Q,{size:"large",color:"gray"},{default:t(()=>[n(e(Wt))]),_:1})]),default:t(()=>[S(" "+d(C.$t("loadfolderbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[y("div",{innerHTML:C.$t("loadfoldertooltip")},null,8,Pi)]),_:1},8,["show"])):pe("",!0)]),_:1}),e(l).IS_SP?pe("",!0):(F(),q($i,{key:0,onDrop:E,forbidden:!e(w),class:"drop-target"},null,8,["forbidden"]))]),_:1}),y("div",{class:qe({"expand-ext-list-container":e(c)}),style:{"margin-top":"1em"}},[n(P,{"display-directive":"show","expanded-names":e(c)?["extItem"]:"","on-update:expanded-names":$=>{c.value=!!(""+$)},class:qe({"expand-ext-list":e(c)})},{"header-extra":t(()=>[n(Q,{size:"large"},{default:t(()=>[n(e($o))]),_:1})]),default:t(()=>[n(H,{title:C.$t("fileTypeRadioTitle"),name:"extItem"},{default:t(()=>[n(b,{value:e(m),"onUpdate:value":B[5]||(B[5]=$=>Ue(m)?m.value=$:null),name:"filetyperadios",size:"small"},{default:t(()=>[n(le,{vertical:"",style:{"padding-left":"1em"}},{default:t(()=>[(F(),oe(Te,null,Qe(s,$=>n(Z,{key:$,trigger:"hover","keep-alive-on-hover":!1,"z-index":5,placement:"left",style:{"max-width":"200px"},duration:0,delay:0},{trigger:t(()=>[n(ge,{value:$},{default:t(()=>[S(d(C.$t("fileTypeRadioOptions."+$)),1)]),_:2},1032,["value"])]),default:t(()=>[S(" "+d(te($).replace(/,/g,", ")),1)]),_:2},1024)),64)),n(Z,{trigger:"hover","keep-alive-on-hover":!1,placement:"bottom-start",show:e(_),duration:0,delay:0},{trigger:t(()=>[y("div",Oi,[n(I,{trigger:"manual",placement:"right-end",show:e(m)==="edit_type"&&e(T)!=="success"&&!!e(_)},{trigger:t(()=>[n(he,{value:e(k),"onUpdate:value":B[2]||(B[2]=$=>Ue(k)?k.value=$:null),status:e(T),disabled:e(m)!=="edit_type",onFocus:B[3]||(B[3]=$=>_.value=!0),onBlur:B[4]||(B[4]=$=>_.value=void 0),clearable:!0,size:"small",placeholder:".jpg, .gif, .png",spellcheck:"false"},null,8,["value","status","disabled"])]),default:t(()=>[n(ue,{type:"error","show-icon":!0,title:"Validation error"},{default:t(()=>[S(" Please correct the extension list."),Ui,Ni]),_:1})]),_:1},8,["show"])])]),default:t(()=>[y("span",{innerHTML:C.$t("editAcceptTypes")},null,8,Di)]),_:1},8,["show"])]),_:1})]),_:1},8,["value"])]),_:1},8,["title"])]),_:1},8,["expanded-names","on-update:expanded-names","class"])],2)]),_:1})])]),y("input",{ref_key:"fileinput",ref:h,onInput:M,onCancel:v,type:"file",multiple:"",accept:e(r),style:{display:"none"}},null,40,Ri),y("input",{ref_key:"folderinput",ref:O,webkitdirectory:"",directory:"",onInput:M,onCancel:v,type:"file",style:{display:"none"}},null,544)],64)}}}),Bi=Be(ji,[["__scopeId","data-v-c3b91a90"]]),Zi={style:{"white-space":"nowrap"}},Wi=ke({__name:"settings-output",props:{quality:{},format:{}},emits:["update:format","update:quality"],setup(o,{emit:u}){const g=o,a=u,{t:l}=je(),s=et(Ge),i=x([]),f=["image/jpeg","image/png","image/gif","image/bmp","image/avif","image/webp"],z=be({get:()=>g.format,set:c=>{c=T(c),a("update:format",c)}}),_=be({get:()=>g.quality,set:c=>{a("update:quality",c)}}),A=be(()=>/png|bmp/i.test(z.value)),r=x(null);Fe(()=>{w()});function T(c){return i.value.indexOf(c)<0&&(c=i.value[0]),c}function w(){for(const c of f)r.value.toDataURL(c).indexOf(c)>=0&&i.value.push(c);i.value.length===0&&i.value.push(f[0])}return(c,m)=>{const k=_e,L=kn,h=Ee,O=Ae,D=jt,W=xn;return F(),oe(Te,null,[n(h,{justify:"center"},{default:t(()=>[n(h,{vertical:""},{default:t(()=>[n(O,{to:!1,"display-directive":"show",show:e(s).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(s).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(h,{align:"center"},{default:t(()=>[n(k,null,{default:t(()=>[n(e(bn))]),_:1}),S(d(e(l)("settings.imageType"))+": ",1),n(L,{value:z.value,"onUpdate:value":m[0]||(m[0]=v=>z.value=v),options:i.value.map(v=>({value:v,label:v})),"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),_:1})]),default:t(()=>[S(" "+d(e(l)("settings.imageTypeTooltip")),1)]),_:1},8,["show","placement"]),n(O,{to:!1,"display-directive":"show",show:e(s).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(s).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(h,{align:"center"},{default:t(()=>[n(h,{align:"start",wrap:!1},{default:t(()=>[n(k,null,{default:t(()=>[n(e(wn))]),_:1}),y("span",Zi,d(e(l)("settings.quality"))+":",1),n(h,{align:"center",justify:"space-between"},{default:t(()=>[n(D,{tooltip:!1,value:_.value,"onUpdate:value":m[1]||(m[1]=v=>_.value=v),step:1,style:{width:"120px"},disabled:A.value},null,8,["value","disabled"]),n(W,{onBlur:m[2]||(m[2]=v=>_.value??(_.value=0)),value:_.value,"onUpdate:value":m[3]||(m[3]=v=>_.value=v),step:"1",min:"0",max:"100",disabled:A.value,style:{width:"90px"},size:"small"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:t(()=>[S(" "+d(e(l)("settings.qualitytooltip")),1)]),_:1},8,["show","placement"])]),_:1})]),_:1}),y("canvas",{ref_key:"canvas",ref:r,width:"1",height:"1",style:{display:"none"}},null,512)],64)}}}),Hi={style:{width:"4em","text-align":"left"}},Vi={style:{width:"4em","text-align":"left"}},St=100,nn=2e3,an=4096,on=4096,qi=100,Gi=100,Ki=ke({__name:"settings-adv",props:ut({threadMax:{}},{expanded:{type:Boolean,required:!0},expandedModifiers:{},multithread:{type:Boolean,required:!0},multithreadModifiers:{},threadCount:{required:!0},threadCountModifiers:{},maxZipSize:{required:!0},maxZipSizeModifiers:{},retainExt:{type:Boolean,required:!0},retainExtModifiers:{},useFolderNameForZip:{type:Boolean,required:!0},useFolderNameForZipModifiers:{},shrinkImage:{type:Boolean,required:!0},shrinkImageModifiers:{},maxWidth:{required:!0},maxWidthModifiers:{},maxHeight:{required:!0},maxHeightModifiers:{}}),emits:["update:expanded","update:multithread","update:threadCount","update:maxZipSize","update:retainExt","update:useFolderNameForZip","update:shrinkImage","update:maxWidth","update:maxHeight"],setup(o){const u={trigger:"hover",placement:"left",keepAliveOnHover:!1,duration:0,delay:0,style:"max-width: 20vw;"},g=Le(o,"expanded"),a=Le(o,"multithread"),l=Le(o,"threadCount"),s=Le(o,"maxZipSize"),i=Le(o,"retainExt"),f=Le(o,"useFolderNameForZip"),z=Le(o,"shrinkImage"),_=Le(o,"maxWidth"),A=Le(o,"maxHeight"),r=o;xe(()=>r.threadMax,()=>{r.threadMax>1||(a.value=!1)},{immediate:!0}),xe(l,w=>{w===void 0&&(l.value=Math.max(2,Math.min(r.threadMax,16)))});const T=be(()=>a.value&&r.threadMax>1);return Fe(()=>{r.threadMax>1&&typeof l.value>"u"&&(l.value=Math.max(r.threadMax/2|0,2))}),(w,c)=>{const m=_e,k=we,L=Fo,h=tt,O=jt,D=xn,W=Bt,v=Zt;return F(),q(h,{justify:"center"},{default:t(()=>[n(v,{"display-directive":"show","default-expanded-names":g.value?["collapitem"]:"","on-update:expanded-names":M=>g.value=!!String(M),"trigger-areas":["arrow","main"],class:qe(["settings-body",g.value?"expand-adv-settings":""])},hn({arrow:t(()=>[n(m,{style:ce(g.value&&{top:"8px"})},{default:t(()=>[n(e(Mo))]),_:1},8,["style"]),n(m,null,{default:t(()=>[n(e(Po))]),_:1})]),default:t(()=>[n(W,{title:w.$t("settings.advancedSettings"),name:"collapitem"},{default:t(()=>[n(h,{vertical:"",style:{"padding-left":"2em"}},{default:t(()=>[n(e(Ae),ot(lt(u)),{trigger:t(()=>[n(h,{vertical:""},{default:t(()=>[n(h,{wrap:!1,align:"center"},{default:t(()=>[n(k,{text:"",disabled:!w.threadMax,style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:c[0]||(c[0]=M=>a.value=!a.value)},{icon:t(()=>[n(m,null,{default:t(()=>[n(e(Oo))]),_:1})]),default:t(()=>[S(" "+d(w.$t("settings.enableMultiThreads")),1)]),_:1},8,["disabled"]),n(L,{value:a.value,"onUpdate:value":c[1]||(c[1]=M=>a.value=M),disabled:!w.threadMax,size:"small"},null,8,["value","disabled"])]),_:1}),n(h,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(O,{value:l.value,"onUpdate:value":c[2]||(c[2]=M=>l.value=M),disabled:!w.threadMax||!a.value,step:1,min:2,max:w.threadMax,style:{width:"120px"}},null,8,["value","disabled","max"]),n(D,{onBlur:c[3]||(c[3]=M=>l.value??(l.value=2)),size:"tiny",value:l.value,"onUpdate:value":c[4]||(c[4]=M=>l.value=M),disabled:!w.threadMax||!a.value,step:1,min:2,max:w.threadMax,style:{width:"10em"}},{suffix:t(()=>[S(d(w.$t("threads",l.value)),1)]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[S(" "+d(w.$t("settings.multiThreadsTooltip")),1)]),_:1},16),n(e(Ae),ot(lt(u)),{trigger:t(()=>[n(h,{vertical:""},{default:t(()=>[n(h,{wrap:!1,align:"center"},{default:t(()=>[n(k,{text:"",focusable:!1,style:{"white-space":"nowrap","font-size":"smaller"}},{icon:t(()=>[n(m,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Uo))]),_:1})]),default:t(()=>[S(" "+d(w.$t("settings.maxZipFileSize"))+": ",1)]),_:1})]),_:1}),n(h,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(O,{tooltip:!1,value:s.value,"onUpdate:value":c[5]||(c[5]=M=>s.value=M),step:1,min:St,max:nn,style:{width:"120px"}},null,8,["value"]),n(D,{onBlur:c[6]||(c[6]=M=>s.value??(s.value=St)),size:"tiny",value:s.value,"onUpdate:value":c[7]||(c[7]=M=>s.value=M),step:"1",min:St,max:nn,style:{width:"10em"}},{suffix:t(()=>[S("(MB)")]),_:1},8,["value"])]),_:1})]),_:1})]),default:t(()=>[S(" "+d(w.$t("settings.maxZipFileSizeTooltip")),1)]),_:1},16),n(e(Ae),ot(lt(u)),{trigger:t(()=>[n(h,{wrap:!1,align:"center"},{default:t(()=>[n(k,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:c[8]||(c[8]=M=>f.value=!f.value)},{icon:t(()=>[n(m,null,{default:t(()=>[n(e(Wt))]),_:1})]),default:t(()=>[S(" "+d(w.$t("settings.useFolderNameForZip")),1)]),_:1}),n(L,{value:f.value,"onUpdate:value":c[9]||(c[9]=M=>f.value=M),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[S(" "+d(w.$t("settings.useFolderNameForZipTooltip")),1)]),_:1},16),n(e(Ae),ot(lt(u)),{trigger:t(()=>[n(h,{wrap:!1,align:"center"},{default:t(()=>[n(k,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:c[10]||(c[10]=M=>i.value=!i.value)},{icon:t(()=>[n(m,null,{default:t(()=>[n(e(vn))]),_:1})]),default:t(()=>[S(" "+d(w.$t("settings.retainOriginalExtension")),1)]),_:1}),n(L,{value:i.value,"onUpdate:value":c[11]||(c[11]=M=>i.value=M),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[S(" "+d(w.$t("settings.retainExtTooltip")),1)]),_:1},16),n(e(Ae),ot(lt(u)),{trigger:t(()=>[n(h,{vertical:""},{default:t(()=>[n(h,{wrap:!1,align:"center"},{default:t(()=>[n(k,{disabled:!e(T),text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:c[12]||(c[12]=M=>z.value=!z.value)},{icon:t(()=>[n(m,null,{default:t(()=>[n(e(No))]),_:1})]),default:t(()=>[S(" "+d(w.$t("settings.shrinkImage")),1)]),_:1},8,["disabled"]),n(L,{disabled:!e(T),value:z.value,"onUpdate:value":c[13]||(c[13]=M=>z.value=M),size:"small"},null,8,["disabled","value"])]),_:1}),n(h,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(O,{value:_.value,"onUpdate:value":c[14]||(c[14]=M=>_.value=M),disabled:!z.value||!e(T),step:1,min:qi,max:an,style:{width:"120px"}},null,8,["value","disabled"]),n(D,{size:"tiny",onBlur:c[15]||(c[15]=M=>_.value??(_.value=8)),value:_.value,"onUpdate:value":c[16]||(c[16]=M=>_.value=M),disabled:!z.value||!e(T),step:1,min:8,max:an*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[y("span",Hi,d(w.$t("width")),1)]),suffix:t(()=>[S("px")]),_:1},8,["value","disabled","max"])]),_:1}),n(h,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(O,{value:A.value,"onUpdate:value":c[17]||(c[17]=M=>A.value=M),disabled:!z.value||!e(T),step:1,min:Gi,max:on,style:{width:"120px"}},null,8,["value","disabled"]),n(D,{size:"tiny",onBlur:c[18]||(c[18]=M=>A.value??(A.value=8)),value:A.value,"onUpdate:value":c[19]||(c[19]=M=>A.value=M),disabled:!z.value||!e(T),step:1,min:8,max:on*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[y("span",Vi,d(w.$t("height")),1)]),suffix:t(()=>[S("px")]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[S(" "+d(w.$t("settings.shrinkImageTooltip")),1)]),_:1},16)]),_:1})]),_:1},8,["title"])]),_:2},[g.value?{name:"header-extra",fn:t(()=>[n(e(Ae),{"keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(k,{onClick:e(Jo),size:"tiny",style:{"font-size":"xx-small"}},{default:t(()=>[S(d(w.$t("reset")),1)]),_:1},8,["onClick"])]),default:t(()=>[S(" "+d(w.$t("settings.resetButtonTooltip")),1)]),_:1})]),key:"0"}:void 0]),1032,["default-expanded-names","on-update:expanded-names","class"])]),_:1})}}}),Qi=Be(Ki,[["__scopeId","data-v-a8f8d2db"]]),Yi={},Xi={style:{color:"gray","padding-left":"20px"}},Ji=["innerHTML"];function es(o,u){const g=Ut,a=Ee;return F(),q(a,{vertical:"",justify:"end"},{default:t(()=>[n(g,{style:{margin:"0px"}}),n(a,{justify:"center"},{default:t(()=>[y("ul",Xi,[(F(!0),oe(Te,null,Qe(o.$tm("descriptions"),l=>(F(),oe("li",{key:l,style:{"text-align":"left"},innerHTML:l},null,8,Ji))),128))])]),_:1})]),_:1})}const ts=Be(Yi,[["render",es]]),ns="modulepreload",as=function(o){return"/avif2jpeg/dist/"+o},ln={},ve=function(u,g,a){let l=Promise.resolve();if(g&&g.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),f=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));l=Promise.allSettled(g.map(z=>{if(z=as(z),z in ln)return;ln[z]=!0;const _=z.endsWith(".css"),A=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${z}"]${A}`))return;const r=document.createElement("link");if(r.rel=_?"stylesheet":ns,_||(r.as="script"),r.crossOrigin="",r.href=z,f&&r.setAttribute("nonce",f),document.head.appendChild(r),_)return new Promise((T,w)=>{r.addEventListener("load",T),r.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${z}`)))})}))}function s(i){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=i,window.dispatchEvent(f),!f.defaultPrevented)throw i}return l.then(i=>{for(const f of i||[])f.status==="rejected"&&s(f.reason);return u().catch(s)})},Rn="English",jn="🇬🇧",Bn='AVIF to JPEG "Offline" Batch Converter',Zn="It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",Wn="Drag & Drop AVIF Images to Convert",Hn=["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data is sent to any server</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.'],Vn="Select your language",qn="Choose Target File Extentions",Gn={avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types",edit_type:"Edit File Extension List"},Kn="Input a list of comma separated file extentions to load.<br>e.g.) .jpg,.gif,.png",Qn="Load Images",Yn="Select your images from a dialog window.<br>*Multiple selection allowed.",Xn="Load a Whole Folder",Jn=`Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>*It will show "Upload" button, but it actually doesn't upload anything to any server.`,ea="Converting images",ta="Aborted",na="Some files failed to convert",aa="Completed",oa="Currently Busy",la="No files with the extentions were found.",ia="Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",sa="Cancel",ra="Save",ua="Close",da="Open",ca="Re-convert",pa="Convert previous selected {n} @:files again",fa="File | Files",ga="thread | threads",ma="You have not saved the converted images yet.",va="Data have not been saved",ha="Open Source",_a="Open the converted image",ya="Copied to clipboard",wa="The converted image was copied to your clipboard as DataURL.",ba="Copy the converted image as DataURL",ka="Convert Again",xa={expandLogTooltip:"Displaying the entire log may severely reduce conversion speed.",expandLog:"Show entire log",autoScroll:"Auto scroll",showOnlyErrors:"Show only errors",log:"Log",outInRate:"Out / In Ratio",elapsedTime:"Elapsed Time",multiThreading:"Multi-Threading",outputSettings:"Output Settings",totalSize:"Total Size",totalFiles:"Number of Files",confirmDownloadMessage:"It will start to download {0} zip files.",inputSize:"Input Size",outputSize:"Output Size",filterSuccess:"Hide completed item",progressErrors:"Failed items",progressStarted:"Started Items",progressTotal:"Total number of files",zippingProgress:"Zipping progress",zipped:"ZIPPED",openFailedList:"Open failed file list",zipFailedList:"Pack failed files into Zips",table:{index:"index",status:"status",core:"thread",details:"file"},saveFailedList:"Save failed file list",done:"done",convertedZips:"successfully completed ZIP",progressSuccess:"Completed Files",downloadConvertedImage:"Download Converted Image",failureZippingFailedFiles:"Failure while zipping the failed files.",browseConvertedImages:"Browse converted images",index:"Index",Original:"Original",Converted:"Converted",saveAllZipsTooltip:"Save all ZIP files",Shrinked:"Shrinked",Shrinking:"Shrinking"},za={maxZipFileSize:"Max zip file size",retainExtTooltip:"New extension will be appended to original extension",retainOriginalExtension:"Keep Original File Extension",qualitytooltip:"Set image quality for output",quality:"Image Quality",maxZipFileSizeTooltip:"Set smaller value if memory problems occur.",ignoreExtTooltip:'Try to load files that don"t have image file extension',ignoreFileExtensions:"Load All File Types",imageTypeTooltip:"Choose image format for output",imageType:"Image Type",advancedSettings:"Advanced Settings",enableMultiThreads:"Enable multi-threading",resetButtonTooltip:"Restore all settings to default.",multiThreadsTooltip:"Convert images in multi-threaded",shrinkImageTooltip:"If the image dimensions are larger than the specified value, shrink the image to that value",shrinkImage:"Shrink images that exceed the following dimensions",useFolderNameForZip:"Use dropped folder name for the zip file",useFolderNameForZipTooltip:"If a folder is dropped or selected, its name is used as the name of the output ZIP file"},Aa="Disabled",Ia="Download",Ta="Reset",Sa="Back",Ca="Failed",La="Success",$a="Previous version",Ea=`
Height`,Fa="Width",Ma="Don't show this message again",Pa="About the warning when selecting a folder",Oa="OK",Ua={},Na="You must press the “Upload” button here to load all the images in the folder, but the data loaded by this application is never actually uploaded to the server.",Da="Continue",Ra="Cancel",ja="When you select a folder instead of a file as input on a website, major web browsers will display a warning like the image below.",Ba="This page may be an outdated version. Please reload the page.",Za="Reload",Wa='If the conversion process frequently fails and an “Out of Memory” message appears, try reducing or disabling the number of "multi-threads" in the "Advanced Settings".',Ha="Next",Va="Previous",qa={lang:Rn,flags:jn,title:Bn,metaDescription:Zn,droptarget:Wn,descriptions:Hn,selectLanguage:Vn,fileTypeRadioTitle:qn,fileTypeRadioOptions:Gn,editAcceptTypes:Kn,loadbutton:Qn,loadbuttontooltip:Yn,loadfolderbutton:Xn,loadfoldertooltip:Jn,processing:ea,aborted:ta,incomplete:na,completed:aa,interfered:oa,noimage:la,avifUnsupported:ia,cancel:sa,save:ra,close:ua,open:da,reconvert:ca,reconvertTip:pa,files:fa,threads:ga,confirmCloseDialog:ma,confirmCloseDialogTitle:va,githubOpenSource:ha,convertedImageUrlTooltip:_a,copiedDataURLDialogTitle:ya,copiedDataURLMessage:wa,convertedImageDataUrlTooltip:ba,convertAgain:ka,status:xa,settings:za,disabled:Aa,Download:Ia,reset:Ta,back:Sa,failed:Ca,success:La,previousVersion:$a,height:Ea,width:Fa,checkboxTextDontShowThis:Ma,loadfolderNotifyingTitle:Pa,OK:Oa,loadfolderNotifyingMessage:Ua,loadfolderNotifyingMessageTerm2:Na,Continue:Da,Cancel:Ra,loadfolderNotifyingMessageTerm1:ja,errMsgWorkerLoadError:Ba,Reload:Za,annotationOutOfMemory:Wa,Next:Ha,Prev:Va},os=Object.freeze(Object.defineProperty({__proto__:null,Cancel:Ra,Continue:Da,Download:Ia,Next:Ha,OK:Oa,Prev:Va,Reload:Za,aborted:ta,annotationOutOfMemory:Wa,avifUnsupported:ia,back:Sa,cancel:sa,checkboxTextDontShowThis:Ma,close:ua,completed:aa,confirmCloseDialog:ma,confirmCloseDialogTitle:va,convertAgain:ka,convertedImageDataUrlTooltip:ba,convertedImageUrlTooltip:_a,copiedDataURLDialogTitle:ya,copiedDataURLMessage:wa,default:qa,descriptions:Hn,disabled:Aa,droptarget:Wn,editAcceptTypes:Kn,errMsgWorkerLoadError:Ba,failed:Ca,fileTypeRadioOptions:Gn,fileTypeRadioTitle:qn,files:fa,flags:jn,githubOpenSource:ha,height:Ea,incomplete:na,interfered:oa,lang:Rn,loadbutton:Qn,loadbuttontooltip:Yn,loadfolderNotifyingMessage:Ua,loadfolderNotifyingMessageTerm1:ja,loadfolderNotifyingMessageTerm2:Na,loadfolderNotifyingTitle:Pa,loadfolderbutton:Xn,loadfoldertooltip:Jn,metaDescription:Zn,noimage:la,open:da,previousVersion:$a,processing:ea,reconvert:ca,reconvertTip:pa,reset:Ta,save:ra,selectLanguage:Vn,settings:za,status:xa,success:La,threads:ga,title:Bn,width:Fa},Symbol.toStringTag,{value:"Module"})),ls="Arabic",is="German",ss="English",rs="Spanish",us="Finnish",ds="French",cs="Hindi",ps="Indonesian",fs="Italian",gs="Japanese",ms="Korean",vs="Dutch",hs="Polish",_s="Portuguese",ys="Russian",ws="Turkish",bs="Ukrainian",ks="Chinese",xs={ar:ls,de:is,en:ss,es:rs,fi:us,fr:ds,hi:cs,id:ps,it:fs,ja:gs,ko:ms,nl:vs,pl:hs,pt:_s,ru:ys,tr:ws,uk:bs,"zh-hant":"Chinese(hant)",zh:ks},yt=[],Ga={en:qa},qt={},sn=Object.assign({"./locales/ar.json":()=>ve(()=>import("./ar-o1J2_y2K.js"),[]),"./locales/de.json":()=>ve(()=>import("./de-CIPfPXnr.js"),[]),"./locales/en.json":()=>ve(()=>Promise.resolve().then(()=>os),void 0),"./locales/es.json":()=>ve(()=>import("./es-BxsMluep.js"),[]),"./locales/fi.json":()=>ve(()=>import("./fi-BCB3yhOL.js"),[]),"./locales/fr.json":()=>ve(()=>import("./fr-B8ziLCrb.js"),[]),"./locales/hi.json":()=>ve(()=>import("./hi-Ou6svNEh.js"),[]),"./locales/id.json":()=>ve(()=>import("./id-uTMRsydH.js"),[]),"./locales/it.json":()=>ve(()=>import("./it-5NICtYyi.js"),[]),"./locales/ja.json":()=>ve(()=>import("./ja-BCYS2GeR.js"),[]),"./locales/ko.json":()=>ve(()=>import("./ko-ByYcImY5.js"),[]),"./locales/nl.json":()=>ve(()=>import("./nl-CqJvtXZt.js"),[]),"./locales/pl.json":()=>ve(()=>import("./pl-BnzrWnsX.js"),[]),"./locales/pt.json":()=>ve(()=>import("./pt-ODLVMKlw.js"),[]),"./locales/ru.json":()=>ve(()=>import("./ru-wmPb7Tog.js"),[]),"./locales/tr.json":()=>ve(()=>import("./tr-g5G_lfFw.js"),[]),"./locales/uk.json":()=>ve(()=>import("./uk-DM12DBO5.js"),[]),"./locales/zh-hant.json":()=>ve(()=>import("./zh-hant-C9K8Sxzu.js"),[]),"./locales/zh.json":()=>ve(()=>import("./zh-MxYcCZAs.js"),[])});var rn;for(const o in sn){const u=(rn=o.match(/\/([a-z]{2}(?:-[a-z]+)?)\.json$/i))==null?void 0:rn[1];u&&(yt.push(u),!(u in Ga)&&(qt[u]=sn[o]))}let Pt=As();Pt in qt||(Pt="en");const wt=Do({legacy:!1,globalInjection:!0,locale:Pt,fallbackLocale:"en",messages:Ga,warnHtmlMessage:!1,missingWarn:!1,fallbackWarn:!1});async function zs(o){if(wt.global.availableLocales.indexOf(o)>=0)return;const u=await qt[o]();wt.global.setLocaleMessage(o,u),await rt()}function As(){const o=location.pathname;return String(o.match(/[^/]+(?=\/?$)/)||"").toLowerCase()}const Is=["innerHTML"],Ts=ke({__name:"switch-lang",emits:["lang-ready","lang-change"],async setup(o,{emit:u}){let g,a;const l=et(Ge),s=dn(),{locale:i,t:f}=je(),z=u,_=Object.entries(xs).map(([m,k])=>({label:k,value:m}));_.sort((m,k)=>{const L=m.label,h=k.label;return L>h?1:L<h?-1:0}),Fe(()=>{s.afterEach((m,k,L)=>{r(),l.switchToolTipVisibility()})}),fn(async()=>{}),[g,a]=Ro(()=>r()),await g,a();async function A(m){(m!==i.value||wt.global.availableLocales.indexOf(m)===-1)&&(z("lang-change",m),await zs(m),i.value=m,document.title=f("title"),await rt()),z("lang-ready",m)}async function r(){const m=s.currentRoute.value.path||"",k=String(m.match(new RegExp("(?<=^\\/)[^/]+"))||"");k&&yt.includes(k)?(await A(k),i.value=k):await T()}async function T(){const m=w().toLowerCase(),k=m.split(/[-_]/)[0];if(yt.includes(k)){let L=k;if(k==="zh")switch(m){case"zh-hant":case"zh-mo":case"zh-hk":case"zh-tw":L="zh-hant"}await A(L)}}function w(){const m=window.navigator;return m.language||m.userLanguage||m.browserLanguage}function c(m){s.push("/"+m+"/")}return(m,k)=>{const L=_e,h=kn,O=Ae;return F(),q(O,{to:!1,"display-directive":"show",show:e(l).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(l).LANDSCAPE.value?"left":"bottom",duration:0,delay:50},{trigger:t(()=>[n(h,{ref:"langselect",size:"tiny",style:{width:"100%"},"consistent-menu-width":!1,options:e(_),"_v-model:value":"locale",value:e(i),"onUpdate:value":c},{arrow:t(()=>[n(L,null,{default:t(()=>[n(e(jo))]),_:1})]),_:1},8,["options","value"])]),default:t(()=>[y("div",{innerHTML:m.$t("selectLanguage")},null,8,Is)]),_:1},8,["show","placement"])}}}),Ss=y("span",null,"CONVERT TO👇",-1),Ge=Symbol("global variables"),Cs=ke({__name:"Avif2Jpeg",emits:["ready"],setup(o,{emit:u}){je();const g=u,a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),l=x(null),s=x(2);let i=x(void 0);const f=x(!0),z=x(!1),_=x(!1),A=x(!1),r=x(!1);Bo(Ge,{showTooltipsBeforeMounted:i,LANDSCAPE:f,IS_SP:a,switchToolTipVisibility:L,SSR:!1}),Fe(()=>{h(),window.addEventListener("resize",h),L(),setTimeout(()=>_.value=!0,3e3)});const T=200;let w=0,c=!0;function m(){A.value=!1,w=Date.now()}function k(){const W=c?0:Math.max(0,T-(Date.now()-w));c=!1,setTimeout(()=>A.value=!0,W),g("ready")}async function L(){}function h(){const W=document.body.clientWidth,v=document.body.clientHeight;f.value=W*.75>v||W>900}function O(W){l.value=W}function D(W){r.value=W}return(W,v)=>{const M=Ee,ee=_e,te=mt,re=tt;return F(),q(re,{vertical:"",align:"stretch",justify:"start",style:{height:"100%",position:"relative"}},{default:t(()=>[n(dl,null,{"lang-switch":t(()=>[(F(),q(Zo,null,{default:t(()=>[n(Ts,{onLangChange:m,onLangReady:k})]),_:1}))]),_:1}),n(Ze,{name:"fade"},{default:t(()=>[e(A)?(F(),q(re,{key:0,vertical:"",align:"stretch",justify:"space-between",style:{height:"100%"}},{default:t(()=>[n(fl),n(M,{justify:"center"},{default:t(()=>[n(Bi,{expanded:e(U).expandExtButtons,"onUpdate:expanded":v[0]||(v[0]=E=>e(U).expandExtButtons=E),target:e(U).acceptTypeValue,"onUpdate:target":v[1]||(v[1]=E=>e(U).acceptTypeValue=E),userExtensions:e(U).editedAcceptTypes,"onUpdate:userExtensions":v[2]||(v[2]=E=>e(U).editedAcceptTypes=E),"disable-notifying-folder-select":e(U).disableNotifyingFolderSelect,"onUpdate:disableNotifyingFolderSelect":v[3]||(v[3]=E=>e(U).disableNotifyingFolderSelect=E),forbidden:e(z),onInput:O,onClick:v[4]||(v[4]=E=>D(!0)),onCancel:v[5]||(v[5]=E=>D(!1))},null,8,["expanded","target","userExtensions","disable-notifying-folder-select","forbidden"])]),_:1}),n(wi,{input:e(l),format:e(U).imageFormat,quality:e(U).imageQuality,"retain-extension":e(U).retainExtension,maxZipSizeMB:e(U).maxZipSizeMB,threads:e(U).multithread?e(U).threadCount:0,"show-note":e(r),"onUpdate:showNote":v[6]||(v[6]=E=>Ue(r)?r.value=E:null),onStart:v[7]||(v[7]=E=>z.value=!0),onEnd:v[8]||(v[8]=E=>z.value=!1),onMultiThreadCount:v[9]||(v[9]=E=>s.value=E)},null,8,["input","format","quality","retain-extension","maxZipSizeMB","threads","show-note"]),n(M,{vertical:"",align:"center"},{default:t(()=>[n(te,{trigger:"manual",placement:"top","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(ee,{size:"6vh",color:"#DADADA",style:{margin:"0px"}},{default:t(()=>[n(e(Wo))]),_:1})]),default:t(()=>[Ss]),_:1})]),_:1}),n(M,{vertical:"",align:"center"},{default:t(()=>[n(Wi,{format:e(U).imageFormat,"onUpdate:format":v[10]||(v[10]=E=>e(U).imageFormat=E),quality:e(U).imageQuality,"onUpdate:quality":v[11]||(v[11]=E=>e(U).imageQuality=E)},null,8,["format","quality"]),n(Qi,{"retain-ext":e(U).retainExtension,"onUpdate:retainExt":v[12]||(v[12]=E=>e(U).retainExtension=E),"use-folder-name-for-zip":e(U).useFolderNameForZip,"onUpdate:useFolderNameForZip":v[13]||(v[13]=E=>e(U).useFolderNameForZip=E),"max-zip-size":e(U).maxZipSizeMB,"onUpdate:maxZipSize":v[14]||(v[14]=E=>e(U).maxZipSizeMB=E),expanded:e(U).expandAdvSettings,"onUpdate:expanded":v[15]||(v[15]=E=>e(U).expandAdvSettings=E),multithread:e(U).multithread,"onUpdate:multithread":v[16]||(v[16]=E=>e(U).multithread=E),"thread-count":e(U).threadCount,"onUpdate:threadCount":v[17]||(v[17]=E=>e(U).threadCount=E),"thread-max":e(s)||0,"shrink-image":e(U).shrinkImage,"onUpdate:shrinkImage":v[18]||(v[18]=E=>e(U).shrinkImage=E),"max-width":e(U).maxWidth,"onUpdate:maxWidth":v[19]||(v[19]=E=>e(U).maxWidth=E),"max-height":e(U).maxHeight,"onUpdate:maxHeight":v[20]||(v[20]=E=>e(U).maxHeight=E)},null,8,["retain-ext","use-folder-name-for-zip","max-zip-size","expanded","multithread","thread-count","thread-max","shrink-image","max-width","max-height"])]),_:1}),n(ts)]),_:1})):pe("",!0)]),_:1})]),_:1})}}}),Gt=ke({__name:"App",setup(o){const u={Statistic:{valueFontSize:"1em"},Popover:{borderRadius:"0.4em",boxShadow:"2px 2px 5px 0px #555555"},Tooltip:{},Image:{toolbarColor:"#00000099"}},g=x(!0);return Fe(()=>{g.value=!1}),(a,l)=>{const s=Vo,i=qo,f=Go,z=Ko,_=Qo,A=Ho;return F(),q(A,{"theme-overrides":u,style:{width:"100%",height:"100%"}},{default:t(()=>[n(_,null,{default:t(()=>[n(z,{placement:"top-right",max:20},{default:t(()=>[n(f,{placement:"top-left",closable:!0,max:50},{default:t(()=>[n(i,null,{default:t(()=>[n(s,null,{default:t(()=>[n(Cs,{class:qe({hide:e(g)})},null,8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),Ka=[{path:"/",name:"Home",component:Gt}];for(const o of yt)Ka.push({path:"/"+o+"/",strict:!0,name:o,component:Gt});Yo(Gt,{routes:Ka,base:"/avif2jpeg/dist/"},({app:o,router:u,routes:g,isClient:a,initialState:l})=>{o.use(wt)});
