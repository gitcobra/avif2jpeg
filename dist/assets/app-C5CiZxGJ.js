var Io=Object.defineProperty;var So=(o,i,u)=>i in o?Io(o,i,{enumerable:!0,configurable:!0,writable:!0,value:u}):o[i]=u;var Ct=(o,i,u)=>So(o,typeof i!="symbol"?i+"":i,u);import{r as ot,d as ge,i as Re,o as C,c as R,w as t,a as n,u as e,b as I,t as p,N as ve,_ as Ot,e as Ce,L as Co,f as h,g as Q,h as y,F as ye,j as Ue,B as Ee,k as _t,l as me,m as Lo,n as $o,p as Ie,q as vt,s as Ut,v as ue,x as Eo,y as be,z as dt,A as pt,C as ht,D as yt,E as Le,G as ke,T as $e,H as Bt,I as Zt,J as Oe,K as X,M as Mo,O as Ne,P as Be,Q as at,R as Rt,S as ee,U as Ke,V as wt,W as bt,X as Nt,Y as Po,Z as Vt,$ as Fo,a0 as At,a1 as Ht,a2 as ut,a3 as we,a4 as We,a5 as Do,a6 as jo,a7 as Oo,a8 as Uo,a9 as Bo,aa as Wt,ab as zt,ac as xt,ad as qt,ae as Zo,af as Gt,ag as Ro,ah as No,ai as Vo,aj as Ho,ak as Wo,al as qo,am as Kt,an as Go,ao as Ko,ap as Qo,aq as Yo,ar as Qt,as as Jo,at as Xo,au as Yt,av as ea,aw as ta,ax as na,ay as oa,az as aa,aA as la,aB as sa,aC as ia,aD as ra,aE as ua,aF as ca,aG as da,aH as pa,aI as fa,aJ as ma,aK as ga,aL as _a,aM as va,aN as ha}from"./vendor-muAr_BNG.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))d(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&d(l)}).observe(document,{childList:!0,subtree:!0});function u(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function d(a){if(a.ep)return;a.ep=!0;const c=u(a);fetch(a.href,c)}})();const ya={imageFormat:"image/jpeg",imageQuality:90,expandExtButtons:!1,acceptTypeValue:void 0,editedAcceptTypes:"",expandAdvSettings:!1,retainExtension:!1,maxZipSizeMB:1e3,multithread:!0,threadCount:void 0},V=ot(Jt({}));function wa(){Jt(V)}function Jt(o){return Object.assign(o,ya)}const Xt="avif2jpeg",ct=JSON.parse(localStorage.getItem(Xt)||"{}");for(const o in V)ct.hasOwnProperty(o)&&ct[o]!==void 0&&(V[o]=ct[o]);window.addEventListener("unload",()=>{const o={};for(const i in V)o[i]=V[i];localStorage.setItem(Xt,JSON.stringify(o))});const ba=ge({__name:"github",setup(o){const i=Re(Pe);return(u,d)=>{const a=ve,c=Ot,l=Ce;return C(),R(l,{to:!1,"display-directive":"show",show:e(i).showTooltipsBeforeMounted.value,trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(c,{href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-size":"small","font-weight":"bolder"}},{default:t(()=>[n(a,null,{default:t(()=>[n(e(Co))]),_:1}),I("GitHub")]),_:1})]),default:t(()=>[I(" "+p(u.$t("githubOpenSource")),1)]),_:1},8,["show"])}}}),Aa=y("h3",null,"Used Framework and Libraries",-1),za=["href"],xa=ge({__name:"licenses",setup(o){const i=h(!1),u={Vue:"https://github.com/vuejs/core/blob/main/LICENSE",Vite:"https://github.com/vitejs/vite/blob/main/LICENSE","Vite SSG":"https://github.com/antfu/vite-ssg/blob/main/LICENSE","Naive UI":"https://github.com/TuSimple/naive-ui/blob/main/LICENSE",Ionicons:"https://github.com/ionic-team/ionicons/blob/main/LICENSE"};return(d,a)=>{const c=Ee;return C(),Q(ye,null,[n(c,{text:"",onClick:a[0]||(a[0]=l=>i.value=!0),style:{color:"black","font-size":"small"}},{default:t(()=>[I("Licenses")]),_:1}),n(e(_t),{preset:"dialog",ref:"dialog",show:i.value,"onUpdate:show":a[1]||(a[1]=l=>i.value=l),"positive-text":"OK",title:"Licenses"},{default:t(()=>[Aa,y("ul",null,[(C(),Q(ye,null,Ue(u,(l,g)=>y("li",null,[y("a",{href:l},p(g),9,za)])),64))])]),_:1},8,["show"])],64)}}}),ka=1,Ta=4,Ia=2,Sa="",et={major:ka,minor:Ta,build:Ia,tag:Sa},Ca={style:{"font-size":"x-small","user-select":"none"}},La=ge({__name:"version",setup(o){const i=["0.0.118"],u=`${et.major}.${et.minor}.${et.build}${et.tag}`,d=i.map(g=>({label:`v${g}`,key:g,value:g}));function a(g){const{key:w,label:m}=g,v=l(w),_=me("a",{href:v},m),A=me("div",null,_);return me("div",null,A)}function c(g){location.href=l(g)}function l(g){return`/avif2jpeg/old/${g}/`}return(g,w)=>{const m=Lo;return C(),R(m,{"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start",options:e(d),"render-label":a,"onUpdate:value":c},{header:t(()=>[y("span",Ca,p(g.$t("previousVersion")),1)]),default:t(()=>[y("span",{style:{cursor:"pointer"}},"v"+p(u))]),_:1},8,["options"])}}}),$a=ge({__name:"header",setup(o){return(i,u)=>{const d=Ie,a=vt;return C(),R(d,{vertical:"",justify:"start"},{default:t(()=>[n(d,{justify:"space-between",style:{"box-sizing":"border-box",padding:"4px",margin:"0px"}},{default:t(()=>[n(d,{align:"start"},{default:t(()=>[n(ba),n(La),n(d,{align:"center"},{default:t(()=>[n(xa)]),_:1})]),_:1}),n(d,{align:"end",style:{"font-size":"x-small"}},{default:t(()=>[$o(i.$slots,"lang-switch")]),_:3})]),_:3}),n(a,{style:{margin:"0px"}})]),_:3})}}}),Ea={style:{padding:"0px",margin:"0px","text-align":"center"}},Ma={key:0},Pa=ge({__name:"title",setup(o){const i=Ut(),u=ue(()=>{const d=i.currentRoute.value.path||"";return!String(d.match(new RegExp("(?<=^\\/)[^/]+"))||"")});return(d,a)=>{const c=Ot,l=Eo("router-link"),g=Ie;return C(),R(g,{align:"center",justify:"center",style:{margin:"0px"}},{default:t(()=>[y("h1",Ea,[e(u)?(C(),Q("span",Ma,p(d.$t("title")),1)):(C(),R(l,{key:1,to:"../",custom:""},{default:t(({navigate:w,href:m})=>[n(c,{href:m,onClick:w,style:{color:"black","word-break":"keep-all","overflow-wrap":"break-word"}},{default:t(()=>[I(p(d.$t("title")),1)]),_:2},1032,["href","onClick"])]),_:1}))])]),_:1})}}});function Fa(o){return new Worker("/avif2jpeg/dist/assets/worker.canvas-CcITlExL.js",{name:o==null?void 0:o.name})}let en=0;class Da extends Fa{constructor(){super(...arguments);Ct(this,"id",en++)}release(){st(this)}}const ft=[],Ze=new Set,qe=new Map,Ge=new Map,lt=new Set;function ja(o,i){const u=new Da;ft.push(u);{const d=Promise.resolve(u);Ze.add(d),qe.set(u,d)}return u}function Oa(o){const i=new Promise(u=>{Ge.set(o,u)});Ze.add(i),qe.set(o,i),lt.add(o)}async function Ua(){let o,i;do o=await Promise.any(Ze);while(lt.has(o));return i=qe.get(o),qe.delete(o),Ze.delete(i),Oa(o),o}function st(o){const i=Ge.get(o);i&&(Ge.delete(o),lt.delete(o),i(o))}function tn(){for(const o of Ge.keys())st(o)}async function Lt(){return await Promise.all(Ze)}function $t(){tn();for(const o of ft)o.terminate();ft.length=0,Ze.clear(),qe.clear(),Ge.clear(),lt.clear(),en=0}function Ba(o){return new Worker("/avif2jpeg/dist/assets/worker.zip-DbLGSA5z.js",{name:o==null?void 0:o.name})}const Za=1,Ra=10,Na=1024*1024*4,Va=100;async function Ha(o,i,u,d,a,c,l,g,w,m,v,_){const A=new Map,T=new Map,z=Math.min(u.threads-1,l.length);$t();const f=new Ba,b=Wa(f,o,i,g);f.postMessage({action:"set-config",zipSize:u.maxZipSizeMB*1024*1024,keepExt:u.retainExtension,outputExt:v,imageType:_});const D=qa(o,i,d,a,c,l,g,T,A);for(let $=0;$<z;$++){const W=ja();W.onmessage=D;const{port1:te,port2:_e}=new MessageChannel;f.postMessage({action:"set-port"},[te]),W.postMessage({},[_e])}const x=be(i,$=>{$&&(x(),tn())});o.demandImage=$=>{f.postMessage({action:"request-image",index:$})};const s=l.length===1;let S=0,E=0,U="",B=0;for(;B<l.length;){const $=await Ua();if(i.value){st($);break}const W=[];let te=!1;const _e=l.length-B,ce=Math.min(B+Math.max(Math.min(Ra,_e/u.threads|0),1),l.length);let de=0,ie=!1;const ne=Date.now();for(ne-E>Va&&(E=ne,ie=!0);B<ce&&!(de>Na);B++){const se=l[B],H=se._id;de+=se.size,te=B===l.length-1,A.has(H)||A.set(H,se),W.push({index:B,file:se,fileId:H,outputPath:U,type:w,quality:m/100,demandThumbnail:ie||te,demandImage:s,webkitRelativePath:se.webkitRelativePath}),se.webkitRelativePath||se.name,T.has(se)||(S++,o.index=S),ie=!1}if($.postMessage(W),te&&(await Lt(),i.value))break}if(await Lt(),!i.value){let $;await new Promise(W=>{$=be([()=>o.done,i],()=>{(o.done>=S||i.value)&&W(void 0)},{immediate:!0})}),$()}s||(f.postMessage({action:"squeeze"}),await b),x();const F={value:!1},Ae=()=>{F.value=!0,$t(),f.terminate()};let M=!1;return{callbackToClearConverter:Ae,callbackToGenerateFailedZips:async $=>{M||(M=!0,await Ga($,f,F,o))}}}function Wa(o,i,u,d){return new Promise(c=>{o.onmessage=l=>{const g=l.data,{action:w}=g;if(w==="add-zip-completed"){const{fileId:A}=g;i.done++,i.success++,d.add(A);return}if(w==="respond-image"){const{url:A,index:T,path:z,size:f}=g;i.convertedImageUrl=A,i.convertedImageSize=f,i.convertedImageIndex=T,i.convertedImageName=z;return}const{size:m,count:v}=g,_="url"in l.data?l.data.url:"";switch(w){case"push-zip":i.zips.push({url:_,size:m,count:v}),i.zippedTotalCount+=v,i.zippedTotalSize+=m;break;case"squeeze-zip":v>0&&(i.zips.push({url:_,size:m,count:v}),i.zippedTotalCount+=v,i.zippedTotalSize+=m),c(void 0);break;case"push-filelist":i.failedFileZippedCount++;break;case"squeeze-filelist-zip":i.failedZipDone=!0;case"push-filelist-zip":i.failedZips.push({url:_,size:m,count:v});break;case"zip-error":case"zip-squeeze-error":i.zippingErrorCount+=v,w==="zip-squeeze-error"&&c(void 0);break}}})}function qa(o,i,u,d,a,c,l,g,w,m){let v=0;const _=h(new Map),A=h(new Map);return z=>{const f=z.target,{data:b}=z,{action:D}=b;if(i.value)switch(D){case"file-canceled":o.done++;return}switch(D){case"list-start":break;case"file-start":{const{index:x,path:k,fileId:s}=b,S={key:v++,core:f.id,index:x,path:k,command:"‚û°Ô∏èstarted"};_.value.set(f.id,S),o.logs.push(S);break}case"file-load":{const{thumbnail:x,width:k,height:s}=b;_.value.get(f.id).command="üñºÔ∏èloaded",x&&(o.thumbnail=x);break}case"file-converted":{const{index:x,path:k,fileId:s,image:S}=b,E=_.value.get(f.id);if(E.command="üîÉconverted",A.value.set(s,E),o.converted++,!S)break;const{width:U,height:B}=b;u.convertedImageBlob=S,u.convertedImageWidth=U,u.convertedImageHeight=B,u.convertedImageName=k,o.done++,o.success++}case"file-completed":{const{inputsize:x,outputsize:k,fileId:s}=b;o.inputTotalSize+=x,o.outputTotalSize+=k;const S=A.value.get(s);S&&(S.command="‚úÖcompleted",S.completed=!0);break}case"file-error":{const{index:x,path:k,fileId:s}=b,S=w.get(s);if(!S)throw new Error(`the file doesn't exist in the Map. "${s}":"${k}"`);const E=g.get(S)||0,U=_.value.get(f.id);E<Za?(g.set(S,E+1),c.push(S),U.command="‚ö†Ô∏èretrying",U.error=!0,d.warning(`retrying "${k}"`,{duration:3e3})):(o.done++,o.failure++,U.command="‚ùófailed",U.error=!0,a.error({content:`failed to load "${k}"`,duration:5e3}));break}case"file-canceled":{const{fileId:x,path:k}=b,s=A.value.get(x);o.done++,o.failure++,s.command="‚ùózip-aborted",s.error=!0;break}case"list-end":{st(f);break}}}}async function Ga(o,i,u,d){let a=0;for(const c of o){const l=(c.webkitRelativePath||c.name).replace(/^\//,"");if(u.value)return;a-d.failedFileZippedCount>20&&await new Promise(g=>setTimeout(g,10)),i.postMessage({action:"add-filelist",file:c,path:l}),a++}i.postMessage({action:"squeeze-filelist"})}async function Ka(o,i,u,d,a,c){let l="";const g=document.createElement("canvas"),w=g.getContext("2d");let m=new dt;const v=d.format,_=d.quality/100,A=[...v.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),T=o.length,z=d.maxZipSizeMB*1024*1024;let f=0,b=null,D="",x=0,k=0,s=0,S=0,E=0,U=0,B=!1;for(const $ of o){if(a.value)break;const W=$.name;let te="";const _e=$.size,ce=($.webkitRelativePath||$.relativePath||W).replace(/^\//,""),de=document.createElement("img");f++;const ie={key:S++,core:-1,index:f,path:ce,command:"‚û°Ô∏èstart"};c.index=f,c.logs.push(ie),c.logs.length-1;let ne;l&&(URL.revokeObjectURL(l),l=""),l=URL.createObjectURL($),de.src=l;const se=await mt(de).then(()=>!0).catch(()=>!1);if(!de.complete||!se||a.value){c.done++,c.failure++,ie.command="‚ùófailed";continue}const H=de.width,pe=de.height;if(g.width=H,g.height=pe,x=H,k=pe,w.drawImage(de,0,0,H,pe,0,0,H,pe),ie.command="üñºÔ∏èimgload",c.thumbnail=de,ne=await new Promise(Z=>{const oe=Y=>{b=Y,Z(Y==null?void 0:Y.arrayBuffer())};g.toBlob(oe,v,_)}),a.value)break;if(!ne){c.failure++;continue}s=ne.byteLength,c.converted++;let j="";if(U+s>=z){try{j=m.url()}catch{B=!0,alert("memory problem occurred");break}c.zips.push({url:j,size:U,count:E}),c.zippedTotalCount+=E,c.zippedTotalSize+=U,U=0,E=0,m.clear(),m=new dt}U+=s;const L=ce||W;for(let Z=1;Z<255&&(te=L.replace(d.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+(Z>1?`(${Z})`:"")+"."+A,!!m.has(te));Z++);c.done++;try{E++,m.add(te,ne),c.inputTotalSize+=_e,c.outputTotalSize+=s}catch{continue}D=te,c.success++,ie.command="‚úÖcompleted",ie.completed=!0,i.add($._id)}if(c.success>0)if(T===1)b&&(u.convertedImageBlob=b,u.convertedImageName=D,u.convertedImageWidth=x,u.convertedImageHeight=k);else try{if(B)throw new Error("terminated zipping process for memory problems");const $=m.url();c.zips.push({url:$,count:E,size:U}),c.zippedTotalCount+=E,c.zippedTotalSize+=U}catch{}const F={value:!1},Ae=()=>{F.value=!0};let M=!1;return{callbackToClearConverter:Ae,callbackToGenerateFailedZips:async $=>{M||(M=!0,Qa($,z,c,F))}}}async function Qa(o,i,u,d){let a=0,c=0,l=new dt;for(let g=0;g<o.length;g++){const w=o[g],m=(w.webkitRelativePath||w.name).replace(/^\//,"");let v;try{v=await w.arrayBuffer()}catch{u.failedToCreateFailedZip=!0;return}if(d.value)return;if(l.add(m,v),c+=w.size,a++,u.failedFileZippedCount++,c>=i||g===o.length-1){const _=l.url();u.failedZips.push({url:_,size:c,count:a}),l.clear(),c=0,a=0}}u.failedZipDone=!0}function mt(o){if(typeof o.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((i,u)=>{o.onload=i,o.onerror=u})}const Me=(o,i)=>{const u=o.__vccOpts||o;for(const[d,a]of i)u[d]=a;return u},Ya=o=>(ht("data-v-5dab19ad"),o=o(),yt(),o),Ja={class:"container"},Xa=Ya(()=>y("span",{class:"text"},"ZIP",-1)),el={__name:"zipicon",setup(o){return(i,u)=>(C(),Q("span",Ja,[n(e(ve),null,{default:t(()=>[n(e(pt))]),_:1}),Xa]))}},tl=Me(el,[["__scopeId","data-v-5dab19ad"]]);function je(o,i=2){const u=Math.sign(o);o=Math.abs(o);const d=["Bytes","KB","MB","GB"],a=o?Math.floor(Math.log(o)/Math.log(1024)):0;return`${(o/Math.pow(1024,a)*u).toFixed(i)}${d[a]}`}function nn(o,i=100,u=!1){i=typeof i=="number"?{width:i,height:i}:i;const{width:d,height:a}=i;let{width:c,height:l}=o;const g=c/l,w=d/a;return g>=w?(c=u?Math.min(d,c):d,l=c/g|0):(l=u?Math.min(a,l):a,c=l*g|0),{width:c,height:l}}const nl=["href","download","title"],ol=ge({__name:"thumbnail",props:{src:{},width:{},height:{},maxWidth:{default:100},maxHeight:{default:100},expand:{type:Boolean,default:!1},loading:{type:Boolean},fileName:{}},emits:["load","error","next"],setup(o,{expose:i,emit:u}){const{t:d}=Le(),a=o,c=u;i({download:D});const l=h(!0),g=h(""),w=h(100),m=h(100),v=h(!1),_=ot({width:"100px",height:"100px",minWidth:"50px",minHeight:"50px"});be(a,(x,k)=>{_.width=(a.width||100)+"px",_.height=(a.height||100)+"px"}),be(()=>a.src,()=>{z(a.src)}),ke(()=>{});async function A(x){const k=x.target,s=k.naturalWidth,S=k.naturalHeight,{width:E,height:U}=nn({width:s,height:S},{width:a.maxWidth||100,height:a.maxHeight||100},a.expand);w.value=E,m.value=U,c("load",{src:k.src,width:s,height:S}),l.value=!1,await new Promise(B=>setTimeout(B,100)),!l.value&&(v.value=!0)}function T(x){const k=x.target;c("error",k.src)}async function z(x){l.value=!0,v.value=!1,await new Promise(k=>setTimeout(k,150)),g.value=x}function f({nodes:x}){return delete x.next,delete x.prev,x.download=me(Ee,{onClick:D,round:!0,textColor:"white",size:"small",style:{marginLeft:"12px"}},[d("Download")]),Object.values(x)}const b=h();function D(){const x=document.createElement("a");x.href=g.value,x.download=a.fileName,x.click()}return(x,k)=>{const s=Mo,S=Ne,E=Be;return C(),R(E,{show:e(l)||a.loading},{default:t(()=>[n(S,{justify:"center",align:"center",style:X(e(_))},{default:t(()=>[y("a",{ref_key:"outputImageLink",ref:b,href:e(g),onClick:k[0]||(k[0]=Oe(()=>{},["left","prevent"])),target:"_blank",download:a.fileName,title:a.fileName,style:{"line-height":"0px"}},[n($e,{mode:"in-out"},{default:t(()=>[Bt(n(s,{"show-toolbar-tooltip":"","render-toolbar":f,onLoad:A,onError:T,src:e(g),width:e(w),height:e(m),style:{border:"1px solid silver"}},null,8,["src","width","height"]),[[Zt,e(v)]])]),_:1})],8,nl)]),_:1},8,["style"])]),_:1},8,["show"])}}}),al=Me(ol,[["__scopeId","data-v-bef0534a"]]),ll=["href"],sl=["href","download"],il=["href"],rl=ge({__name:"image-viewer",props:{url:{},dataUrl:{},name:{},size:{},length:{},index:{},isSingle:{type:Boolean}},emits:["demand-image"],setup(o,{expose:i,emit:u}){const d=o,a=u;i({download:x});const c=h(),l=at(),{t:g}=Le();Rt();const w=h(!0),m=h(1),v=h(1),_=h(1);h(0);const A=h(""),T=h(!1);let z=h(!1),f=-1;be(m,()=>{m.value<1||m.value>d.length||(clearTimeout(f),f=setTimeout(()=>{d.index!==m.value-1&&(a("demand-image",m.value-1),T.value=!0,z.value=!1)},100))}),be(()=>d.index,()=>{if(d.index===0&&w.value){w.value=!1,m.value=1,A.value=d.url;return}d.index===m.value-1&&(T.value=!1,A.value=d.url)});let b="";be(()=>d.url,()=>{if(d.url!==b){const s=b;setTimeout(()=>URL.revokeObjectURL(s),1e3),b=d.url}d.isSingle&&(w.value=!1,A.value=d.url)}),ke(()=>{d.isSingle||a("demand-image",0)});function D({width:s,height:S}){v.value=s,_.value=S,z.value=!0}function x(){c.value.download()}async function k(s){try{const S=await fetch(s).then(E=>E.blob()).then(E=>new Promise(U=>{const B=new FileReader;B.onload=U,B.readAsDataURL(E)})).then(E=>E.target.result);navigator.clipboard.writeText(S),l.info({title:g("copiedDataURLDialogTitle"),content:()=>me("div",[me("div",g("copiedDataURLMessage"))]),positiveText:"OK"})}catch{l.error({title:"failed to copy Data URL",content:"could not copy Data URL",positiveText:"OK"})}}return(s,S)=>{const E=Be,U=Ne,B=Ee,F=Ke,Ae=wt,M=bt,G=Nt;return C(),R(E,{size:"large",show:w.value},{default:t(()=>[n(U,{justify:"center",align:"center",vertical:"",style:X({visibility:w.value?"hidden":"visible"})},{default:t(()=>[n(U,{align:"center",wrap:!1},{default:t(()=>[n(U,{align:"center",justify:"center",vertical:""},{default:t(()=>[n(E,{size:"small",show:!1,_show:T.value||!e(z)},{default:t(()=>[n(al,{ref_key:"thumbref",ref:c,src:A.value,width:180,"max-width":160,"max-height":100,loading:T.value,"file-name":d.name,onLoad:D,onNext:S[0]||(S[0]=$=>m.value++)},null,8,["src","loading","file-name"])]),_:1},8,["_show"])]),_:1}),n(U,{vertical:""},{default:t(()=>[n(U,{justify:"center",wrap:!1},{default:t(()=>[d.url?(C(),R(F,{key:0,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:d.url,target:"_blank"},[n(B,{round:"",size:"tiny"},{default:t(()=>[I(p(s.$t("open")),1)]),_:1})],8,ll)]),default:t(()=>[I(" "+p(s.$t("convertedImageUrlTooltip")),1)]),_:1})):ee("",!0),d.url&&!s.isSingle?(C(),R(F,{key:1,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:d.url,ref:"saveImg",target:"_blank",download:d.name},[n(B,{round:"",size:"tiny"},{default:t(()=>[I(p(s.$t("save")),1)]),_:1})],8,sl)]),default:t(()=>[I(" "+p(s.$t("save")),1)]),_:1})):ee("",!0),d.url?(C(),R(F,{key:2,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:d.url,target:"_self"},[n(B,{onClick:S[1]||(S[1]=Oe($=>k(d.url),["left","prevent","stop"])),round:"",size:"tiny"},{default:t(()=>[I("DataURL")]),_:1})],8,il)]),default:t(()=>[I(" "+p(s.$t("convertedImageDataUrlTooltip")),1)]),_:1})):ee("",!0)]),_:1}),n(U,{justify:"center"},{default:t(()=>[I(p(v.value)+" √ó "+p(_.value),1)]),_:1}),n(U,{justify:"center"},{default:t(()=>[I(p(e(je)(d.size,0)),1)]),_:1})]),_:1})]),_:1}),s.isSingle?ee("",!0):(C(),R(U,{key:0,align:"center",justify:"center"},{default:t(()=>[n(Ae,{value:m.value,"onUpdate:value":S[2]||(S[2]=$=>m.value=$),tooltip:!1,step:1,min:1,max:d.length,style:{width:"180px"}},null,8,["value","max"]),n(U,{style:{"font-family":"v-mono"},align:"center"},{default:t(()=>[n(M,{value:m.value,"onUpdate:value":S[3]||(S[3]=$=>m.value=$),step:"1",min:"1",max:d.length,"button-placement":"both",size:"small",style:{width:"8em"}},null,8,["value","max"]),I(" / "+p(d.length),1)]),_:1})]),_:1})),n(U,{ref:"fileNameContainer",justify:"center",style:{"max-width":"320px"},title:d.name},{default:t(()=>[n(G,{"x-scrollable":!0,trigger:"hover",style:{"font-size":"smaller",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},{default:t(()=>[I(p(d.name),1)]),_:1})]),_:1},8,["title"])]),_:1},8,["style"])]),_:1},8,["show"])}}}),ul={class:"log-table"},cl={class:"log-tr"},dl={class:"log-th"},pl={class:"log-th"},fl={style:{"min-width":"7em"},class:"log-th"},ml={style:{"padding-left":"2em"},class:"log-th"},gl={class:"log-td"},_l={class:"log-td"},vl={class:"log-td"},hl={class:"log-td"},yl={style:{margin:"1px"}},wl=["href","download","onClick"],bl={key:0,style:{position:"relative"}},Al=["href","download"],zl=["href","download"],xl={key:0,style:{margin:"1px"}},kl=["href","download","onClick"],Et=99999,Tl=100,Il=ge({__name:"status",props:{processing:{type:Boolean},status:{},interval:{}},emits:["all-zips-clicked","demand-zip-errors","demand-image"],setup(o,{emit:i}){const u=at(),{t:d}=Le(),a=Rt(),c={W:160,H:80},l=o,g=i,w=h(!1),m=h([]),v=h(!1),_=h([]),A=h([]),T=h([0,0]),z=h([0,0]),f=h([0,0]),b=h([0,0]),D=h([0,0]),x=h([0,0]),k=h(0),s=h([0,0]),S=h(a.value.infoColor),E=h("#000000"),U=h("#000000"),B=h(0),F=h(0),Ae=h(""),M=h("00:00:00");h(""),h("");const G=h(void 0),$=h(!1),W=h(!0),te=h(!1),_e=ue(()=>$.value?ie.value:de.value),ce=h("16em"),de=h(5),ie=h(1e3),ne=h(!0),se=h(!1),H=ot({name:"",width:0,height:0,size:0,url:"",dataUrl:"",index:-1}),pe=h(null),j=h(null),L=h(),Z=h();ke(()=>{be(l.status,()=>Te(),{deep:!1}),be([j,ne],()=>{if(!j.value||!ne.value)return;const{width:fe,height:he}=nn(j.value,{width:c.W,height:c.H});pe.value.width=fe,pe.value.height=he,pe.value.style.width=fe+"px",pe.value.style.height=he+"px",j.value instanceof HTMLImageElement?pe.value.getContext("2d").drawImage(j.value,0,0,fe,he):(pe.value.getContext("bitmaprenderer").transferFromImageBitmap(j.value),j.value=null,l.status.thumbnail=null)});let r=0;const O=()=>{if(r)return;const fe=Date.now();M.value="00:00:00",r=window.setInterval(()=>{const he=(Date.now()-fe)/1e3;M.value=`${String(he/3600|0).padStart(2,"0")}:${String(he/60%60|0).padStart(2,"0")}:${String(he%60|0).padStart(2,"0")}`},300)};O(),be(()=>l.processing,(fe,he)=>{fe?(O(),m.value=[],w.value=!1,v.value=!1,_.value=[],A.value=[]):(clearInterval(r),Te(),r=0),ne.value=!1,se.value=!0,l.processing||Ve()});const q=Do();let N;const K=()=>{clearTimeout(N),N=setTimeout(()=>{if(!ne.value||J)return;const fe=L.value.$parent.$el.offsetHeight,he=window.innerHeight-q.parent.parent.vnode.el.offsetHeight-8;ce.value=fe+he+"px"},100)};K(),window.addEventListener("resize",K);const ae=new ResizeObserver(K);ae.observe(q.parent.parent.vnode.el);let J=!1;Po(()=>{J=!0,ae.disconnect(),clearInterval(r),clearTimeout(N),clearTimeout(re),clearTimeout(Ye)})}),be([()=>l.status.zips.length,()=>l.status.failedZips.length],()=>{const r=l.status;{_.value.length>r.zips.length&&(_.value.length=0);let O=0;const q=r.zips.length===1&&r.zippedTotalCount===r.length;for(let N=_.value.length;N<r.zips.length;N++){const K=r.zips[N],ae=r.baseZipName+(q?"":"-"+String(N+1).padStart(2,"0"))+".zip";O+=K.size,_.value[N]={url:K.url,size:K.size,number:q?0:N+1,sizeByUnit:je(K.size),name:ae,count:K.count,clicked:!1}}}{A.value.length>r.failedZips.length&&(A.value.length=0);let O=0;const q=r.failedZipDone&&r.failedZips.length===1;for(let N=A.value.length;N<r.failedZips.length;N++){const K=r.failedZips[N],ae=r.baseZipName+"-error"+(q?"":"-"+String(N+1).padStart(2,"0"))+".zip";O+=K.size,A.value[N]={url:K.url,size:K.size,number:q?0:N+1,sizeByUnit:je(K.size),name:ae,count:K.count,clicked:!1}}}});const oe=l.interval||100;let Y=!1,re=0;function Te(){if(Y)return;if(re){Y=!0;return}re=window.setTimeout(()=>{re=0,Y&&(Y=!1,Te())},oe);const r=l.status;w.value=r.length>=2,z.value[1]=z.value[0],z.value[0]=r.index,f.value[1]=f.value[0],f.value[0]=r.success,b.value[1]=b.value[0],b.value[0]=r.failure,D.value[1]=D.value[0],D.value[0]=r.done,x.value[1]=x.value[0],x.value[0]=r.converted,k.value=r.length,s.value[1]=s.value[0],s.value[0]=r.zippedTotalCount,B.value=r.inputTotalSize,F.value=r.outputTotalSize;const O=F.value-B.value;Ae.value=(O>=0?"+ ":"")+je(O);const q=F.value/B.value,N=(256|Math.min(255,Math.max(0,q-1.5)*255|0)).toString(16).substring(1);E.value="#"+N+"0000";const K=1024*1024,ae=(256|Math.min(255,Math.max(0,O/1024/K)*255|0)).toString(16).substring(1);if(U.value="#"+ae+"0000",T.value[1]=T.value[0],T.value[0]=f.value[0]/k.value*100,ne.value||!l.processing){const J=r.logs.slice(-Et);m.value.push(...J);const fe=m.value.length-Et;fe>0&&m.value.splice(0,fe),W.value&&J.length&&Xe(),m.value.length>ie.value&&(ie.value*=2)}r.logs.length=0,j.value=r.thumbnail,l.processing&&(S.value=b.value[0]?a.value.warningColor:a.value.infoColor),r.convertedImageUrl!==H.url&&(H.url=r.convertedImageUrl,H.name=r.convertedImageName,H.dataUrl=r.convertedImageDataUrl,H.size=r.convertedImageSize||r.outputTotalSize,H.width=r.convertedImageWidth,H.height=r.convertedImageHeight,H.index=r.convertedImageIndex)}function Ve(){const r=l.status;S.value=l.status.success===l.status.length?a.value.successColor:a.value.errorColor,r.unconvertedFileCount>0,b.value[0]>0||(f.value[0],k.value)}const ze=ue(()=>[{key:"open",label:d("status.openFailedList"),icon:()=>me(ve,()=>me(Vt)),onSelect(){Fe()}},{key:"download",label:d("status.saveFailedList"),icon:()=>me(ve,()=>me(Fo)),onSelect(){Fe(!0)}},{key:"zip",label:`${d("status.zipFailedList")}`+(l.status.failedZipDone?`(‚úî${d("status.done")})`:""),icon:()=>me(Be,{show:v.value&&!l.status.failedZipDone,size:"small"},()=>me(ve,()=>me(pt))),disabled:v.value,onSelect(r){return v.value=!0,g("demand-zip-errors"),!1}}]);function xe(r,O=!1){const{url:q,name:N}=r;if(O){const K=document.createElement("a");K.href=q,K.download=N,K.click()}r.clicked||(r.clicked=!0,l.processing||_.value.every(K=>K.clicked)&&g("all-zips-clicked"))}async function Qe(){if(w.value){if(_.value.length>=2&&!await new Promise((q,N)=>u.warning({title:d("Download"),content:d("status.confirmDownloadMessage",[_.value.length]),positiveText:"OK",negativeText:d("cancel"),onPositiveClick:()=>q(!0),onNegativeClick:()=>N()})))return;const r=_.value;for(const O of r)xe(O,!0)}else Z.value.download()}function Fe(r=!1){const O=new Blob([l.status.unconvertedListText],{type:"text/plain;charset=utf8"}),q=URL.createObjectURL(O),N=document.createElement("a");N.href=q,N.target="_blank",r&&(N.download=l.status.baseZipName+"-error.txt"),N.click()}let Ye=0,Je=!1;function Xe(r=!1){if(!Je){if(Ye){Je=!0;return}At(()=>{!r&&(!$.value||!W.value)||(L.value.scrollTo({behavior:r?"instant":"smooth",top:m.value.length*50}),Ye=window.setTimeout(()=>{Ye=0,Je&&(Je=!1,Xe())},Tl))})}}return(r,O)=>{const q=Ie,N=jo,K=Oo,ae=Ke,J=Ne,fe=Uo,he=Bo,it=Ce,bo=Wt,Ao=zt,zo=xt,xo=vt,He=Ee,ko=tl,It=qt,To=Zo;return C(),R(J,{vertical:"",justify:"center"},{default:t(()=>[n(q,{justify:"center",align:"center",wrap:!1,style:{"white-space":"nowrap"}},{default:t(()=>[n(q,{vertical:"",justify:"center",class:"left-column"},{default:t(()=>[n(N,{"tabular-nums":"",label:r.$t("status.elapsedTime")},{default:t(()=>[n(q,null,{default:t(()=>[I(p(e(M)),1)]),_:1})]),_:1},8,["label"]),n(N,{"tabular-nums":"",label:r.$t("status.multiThreading")},{default:t(()=>[n(q,{style:X({color:l.status.threads?"":"red"})},{default:t(()=>[I(p(l.status.threads?r.$rt("{n} @:threads",l.status.threads):r.$t("disabled")),1)]),_:1},8,["style"])]),_:1},8,["label"]),n(N,{"tabular-nums":"",label:r.$t("status.outputSettings")},{default:t(()=>[n(q,{vertical:"",justify:"end",style:{"font-size":"smaller","line-height":"1em"}},{default:t(()=>[y("div",null,"Type: "+p(l.status.type),1),y("div",null,"Zip: "+p(l.status.zipSize)+"MB",1)]),_:1})]),_:1},8,["label"])]),_:1}),n(fe,{type:"multiple-circle","stroke-width":1,percentage:[e(f)[0]/e(k)*100|0,e(z)[0]/e(k)*100|0],color:[e(a).successColor,e(S)],"rail-style":[{stroke:r.processing?e(a).successColor:e(S),opacity:.3},{stroke:e(S),opacity:.3}],class:"center-column"},{default:t(()=>[n(q,{vertical:"",align:"center",style:{"font-family":"v-mono","font-size":"xx-large","white-space":"nowrap"},wrap:!1,"wrap-item":!1},{default:t(()=>[y("span",{style:X({color:e(b)[0]?e(S):r.processing?e(a).successColor:e(S)})},[n(K,{duration:e(oe)*3|0,from:e(T)[1]|0,to:e(T)[0]|0,active:!0},null,8,["duration","from","to"]),I("% ")],4),n(J,{wrap:!1,style:{border:"0px solid"}},{default:t(()=>[n(J,{vertical:"",size:"small",justify:"end"},{default:t(()=>[n(J,{justify:"end",wrap:!1},{default:t(()=>[e(b)[0]>0?(C(),R(ae,{key:0,trigger:"hover",duration:0,delay:0,style:X({color:e(a).errorColor}),placement:"left"},{trigger:t(()=>[y("span",{style:X({fontSize:"xx-small",color:e(a).errorColor,lineHeight:"0"})}," ("+p(e(b)[0].toLocaleString("en-us"))+") ",5)]),default:t(()=>[I(" "+p(r.$t("status.progressErrors"))+" ("+p(e(b)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):ee("",!0),n(ae,{trigger:"hover",duration:0,delay:0,style:X({color:e(a).infoColor}),placement:"left"},{trigger:t(()=>[y("span",{style:X({fontSize:"xx-small",color:e(a).infoColor,lineHeight:"0"})},p(e(z)[0].toLocaleString("en-us")),5)]),default:t(()=>[I(" "+p(r.$t("status.progressStarted"))+" ("+p(e(z)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])]),_:1}),n(J,{justify:"end"},{default:t(()=>[n(ae,{trigger:"hover",duration:0,delay:0,style:X({color:e(a).successColor}),placement:"bottom"},{trigger:t(()=>[y("span",{style:X({fontSize:"medium",color:e(a).successColor})},[n(K,{duration:e(oe)*3|0,from:e(f)[1],to:e(f)[0],active:!0,"show-separator":!0},null,8,["duration","from","to"])],4)]),default:t(()=>[I(" "+p(r.$t("status.progressSuccess"))+" ("+p(e(f)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])]),_:1})]),_:1}),n(J,{align:"end",style:{"font-size":"medium",border:"0px solid"}},{default:t(()=>[n(ae,{trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:t(()=>[I(" / "+p(e(k).toLocaleString("en-us")),1)]),default:t(()=>[I(" "+p(r.$t("status.progressTotal"))+" ("+p(e(k).toLocaleString("en-us"))+") ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["percentage","color","rail-style"]),n(q,{vertical:"",style:{height:"100%"},justify:"center"},{default:t(()=>[n(N,{"tabular-nums":"",label:r.$t("status.inputSize")},{default:t(()=>[n(q,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[I(p((e(B)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(N,{"tabular-nums":"",label:r.$t("status.outputSize")},{default:t(()=>[n(q,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[I(p((e(F)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(N,{"tabular-nums":"",label:r.$t("status.outInRate")},{default:t(()=>[n(q,{vertical:"",align:"end",justify:"start",style:{"font-size":"xx-small","font-family":"v-mono","line-height":"50%"}},{default:t(()=>[y("span",{style:X({color:e(E),fontSize:"larger"})},"√ó "+p((e(F)/e(B)||1).toFixed(2)),5),y("span",{style:X({color:e(U)})},"("+p(e(Ae))+")",5)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1}),n(zo,{"display-directive":"show","trigger-areas":["arrow","main"],"default-expanded-names":"log-collapse","expanded-names":e(ne)?["log-collapse"]:[],"on-update:expanded-names":P=>{ne.value=!!String(P)}},{default:t(()=>[n(Ao,{title:"Log",name:"log-collapse",style:{"white-space":"nowrap"}},Ht({header:t(()=>[n(J,{align:"center",wrap:!1},{default:t(()=>[I(p(r.$t("status.log")),1),r.processing&&!e(ne)?(C(),R(e(Be),{key:0,size:16})):ee("",!0)]),_:1})]),default:t(()=>[n(J,{wrap:!1,class:We({"log-container":1,"expand-log":e($)}),align:"stretch",style:X(e($)?{height:e(ce),maxHeight:e(ce)}:{})},{default:t(()=>[n(e(Nt),{ref_key:"scrollref",ref:L,"x-scrollable":!0,onMouseup:O[5]||(O[5]=P=>W.value=!1),onWheel:O[6]||(O[6]=P=>W.value=!1),trigger:"none",style:X([{"z-index":"2","padding-right":"10px","min-height":"7em"},{maxHeight:e(ce)}]),size:50},{default:t(()=>[y("table",ul,[y("tr",cl,[y("th",dl,p(r.$t("status.table.core")),1),y("th",pl,p(r.$t("status.table.index")),1),y("th",fl,p(r.$t("status.table.status")),1),y("th",ml,p(r.$t("status.table.details")),1)]),(C(!0),Q(ye,null,Ue((e(te)?e(m).filter(P=>!P.completed):e(m)).slice(-e(_e)),({index:P,key:De,command:Se,path:rt,core:St})=>(C(),Q("tr",{key:De,class:"log-tr"},[y("td",gl,p(St>=0?St+1:"-"),1),y("td",_l,p(P+1),1),y("td",vl,p(Se),1),y("td",hl,p(rt),1)]))),128))])]),_:1},8,["style"]),n(J,{style:X([{"align-self":"center",position:"absolute","z-index":"0","margin-top":"0.5em",right:"0.1em","line-height":"0px"},{width:c.W+"px",height:c.H+"px"}]),justify:"center",align:"center"},{default:t(()=>[n(e(Be),{size:"small",show:r.processing},{default:t(()=>[l.status.thumbnail===void 0?(C(),R(bo,{key:0,description:"EMPTY"})):ee("",!0),Bt(y("canvas",{ref_key:"thumbcanvas",ref:pe,width:"106",height:"80",style:X({border:"1px solid gray",filter:r.processing?"":"opacity(0.35)"})},null,4),[[Zt,l.status.thumbnail!==void 0]])]),_:1},8,["show"])]),_:1},8,["style"])]),_:1},8,["class","style"])]),_:2},[e(ne)?{name:"header-extra",fn:t(()=>[n(J,{align:"center",wrap:!1},{default:t(()=>[n(ut,null,{default:t(()=>[n(he,{key:"a",checked:e(te),"onUpdate:checked":O[0]||(O[0]=P=>we(te)?te.value=P:null),size:"small",style:{"font-size":"smaller"},class:"hide-mobile"},{default:t(()=>[I(p(r.$t("status.filterSuccess")),1)]),_:1},8,["checked"]),e($)?(C(),R(he,{key:"b",checked:e(W),"onUpdate:checked":[O[1]||(O[1]=P=>we(W)?W.value=P:null),O[2]||(O[2]=P=>P&&Xe(!0))],size:"small",style:{"font-size":"smaller"}},{default:t(()=>[I(p(r.$t("status.autoScroll")),1)]),_:1},8,["checked"])):ee("",!0)]),_:1}),n(it,{style:{"max-width":"30em"}},{trigger:t(()=>[n(he,{size:"small",checked:e($),"onUpdate:checked":[O[3]||(O[3]=P=>we($)?$.value=P:null),O[4]||(O[4]=P=>{W.value=P,Xe(!0)})],style:{"font-size":"smaller"}},{default:t(()=>[I(p(r.$t("status.expandLog")),1)]),_:1},8,["checked"])]),default:t(()=>[I(p(r.$t("status.expandLogTooltip")),1)]),_:1})]),_:1})]),key:"0"}:void 0]),1024)]),_:1},8,["expanded-names","on-update:expanded-names"]),n(xo,{style:{margin:"0.2em"}}),n(J,{wrap:!1,vertical:""},{default:t(()=>[n($e,{name:"singleimage"},{default:t(()=>[n(J,{justify:"center",align:"center",vertical:""},{default:t(()=>[!e(se)&&e(w)&&l.status.threads?(C(),R(He,{key:0,tertiary:"",type:"success",size:"small",disabled:!(r.status.success>0),onClick:O[7]||(O[7]=P=>se.value=!0)},{default:t(()=>[I(p(r.$t("status.browseConvertedImages")),1)]),_:1},8,["disabled"])):r.status.success>0&&(l.status.threads||!e(w))?(C(),R(rl,{key:1,ref_key:"imageViewer",ref:Z,size:e(H).size,url:e(H).url,"data-url":e(H).dataUrl,width:e(H).width,height:e(H).height,name:e(H).name,length:l.status.success,index:e(H).index,"is-single":!e(w),onDemandImage:O[8]||(O[8]=P=>g("demand-image",P))},null,8,["size","url","data-url","width","height","name","length","index","is-single"])):ee("",!0)]),_:1})]),_:1}),n(J,{justify:"center"},{default:t(()=>[e(w)?(C(),R(J,{key:0,vertical:"",align:"center"},{default:t(()=>[n(ae,{placement:"left"},{trigger:t(()=>[n(fe,{type:"line","indicator-placement":"inside",color:"lime","rail-color":"rgba(99, 255, 99, 0.5)","indicator-text-color":e(s)[0]===e(k)?"white":"green",processing:r.processing,percentage:e(s)[0]/e(k)*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[y("span",yl,p(e(s)[0]/e(k)*100|0)+"% "+p(r.$t("status.zipped"))+" ("+p(e(s)[0])+"/"+p(e(x)[0])+")",1)]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[I(" "+p(r.$t("status.zippingProgress"))+" ("+p(e(s)[0]/e(k)*100|0)+"%) ",1)]),_:1}),n($e,{name:"zipcontainer"},{default:t(()=>[e(_).length>=1||l.processing?(C(),R(ut,{key:0,name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(C(!0),Q(ye,null,Ue(e(_),(P,De)=>(C(),Q("span",{key:De},[n(ae,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:P.url,download:P.name,class:"in-button-anchor",onClick:Se=>xe(P)},[n(He,{class:"zip-button",size:"tiny",color:P.clicked?"#050":"lime","text-color":P.clicked?"gray":"white",onClick:Oe(Se=>xe(P),["stop"]),round:""},{default:t(()=>[n(e(ve),{size:"tiny"},{default:t(()=>[n(e(pt))]),_:1}),I("ZIP"+p(P.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,wl)]),default:t(()=>[y("div",{style:X({color:e(a).successColor})},[y("div",null,"ZIP "+p(P.number||"")+" ("+p(r.$t("success"))+")",1),y("div",null,p(P.name),1),y("div",null,p(P.sizeByUnit),1),y("div",null,p(r.$rt("{n} @:files",P.count)),1)],4)]),_:2},1024)]))),128))]),_:1})):ee("",!0)]),_:1})]),_:1})):ee("",!0)]),_:1}),n($e,null,{default:t(()=>[l.processing?ee("",!0):(C(),R(J,{key:0,justify:"center",align:"center"},{default:t(()=>[n(ae,{trigger:"hover",duration:0,delay:0,placement:"left",style:X({color:"white",backgroundColor:e(a).successColor}),"arrow-style":{backgroundColor:e(a).successColor}},{trigger:t(()=>[n($e,{name:"save"},{default:t(()=>[e(f)[0]>0?(C(),Q("span",bl,[n(It,{value:e(w)?e(s)[0].toLocaleString("en-us"):l.status.type.replace(/\(.+\)/,""),color:e(a).successColorHover,offset:[-20,-3]},{default:t(()=>[n(He,{size:"medium",onClick:Qe,color:e(a).successColor,round:""},{default:t(()=>[e(w)?(C(),Q(ye,{key:0},[e(_).length?(C(),Q("a",{key:0,href:e(_)[0].url,download:e(_)[0].name,class:"in-button-anchor",onClick:O[9]||(O[9]=Oe(()=>{},["prevent"]))},[n(ko),I(" √ó "+p(e(_).length)+" "+p(r.$t("save")),1)],8,Al)):ee("",!0)],64)):(C(),Q("a",{key:1,href:e(H).url,download:e(H).name,class:"in-button-anchor",onClick:O[10]||(O[10]=Oe(()=>{},["prevent"]))},[n(e(ve),{size:"tiny"},{default:t(()=>[n(e(Gt))]),_:1}),I(" "+p(r.$t("save")),1)],8,zl))]),_:1},8,["color"])]),_:1},8,["value","color"])])):ee("",!0)]),_:1})]),default:t(()=>[r.status.length>=2?(C(),Q(ye,{key:0},[y("div",null,p(e(d)("success"))+": "+p(e(s)[0].toLocaleString()),1),y("div",null,p(e(d)("status.totalSize"))+": "+p(e(je)(r.status.zippedTotalSize)),1),y("div",null,"ZIP √ó "+p(e(_).length),1)],64)):(C(),Q(ye,{key:1},[I(p(r.$t("status.downloadConvertedImage")),1)],64))]),_:1},8,["style","arrow-style"]),!r.processing&&r.status.success!==e(k)?(C(),R(To,{key:0,options:e(ze),onSelect:O[11]||(O[11]=(P,De)=>{var Se;return(Se=e(ze).find(({key:rt})=>P===rt))==null?void 0:Se.onSelect()}),"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start"},{default:t(()=>[n(ae,{show:e(G),duration:0,delay:0,placement:"right",style:X({color:"white",backgroundColor:e(a).errorColor}),"arrow-style":{backgroundColor:e(a).errorColor}},{trigger:t(()=>[n(It,{value:r.status.unconvertedFileCount.toLocaleString(),color:e(a).errorColorHover,offset:[-0,-3]},{default:t(()=>[n(He,{size:"small",color:e(a).errorColor},{default:t(()=>[n(e(ve),{size:"medium",style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Ro))]),_:1})]),_:1},8,["color"])]),_:1},8,["value","color"])]),default:t(()=>[y("div",null,[y("div",null,p(e(d)("failed"))+": "+p(r.status.unconvertedFileCount.toLocaleString()),1),y("div",null,p(e(d)("status.totalSize"))+": "+p(e(je)(r.status.unconvertedTotalSize)),1)])]),_:1},8,["show","style","arrow-style"])]),_:1},8,["options"])):ee("",!0)]),_:1}))]),_:1}),n($e,{name:"zipcontainer"},{default:t(()=>[e(v)?(C(),R(J,{key:0,vertical:"",align:"center"},{default:t(()=>[n(ae,{placement:"left"},{trigger:t(()=>[n(fe,{type:"line","indicator-placement":"inside",color:"red","rail-color":"rgba(255, 0, 0, 0.5)","indicator-text-color":r.status.failedFileZippedCount===r.status.unconvertedFileCount?"white":"#500",processing:e(v)&&!r.status.failedZipDone&&!r.status.failedToCreateFailedZip,percentage:r.status.failedFileZippedCount/r.status.unconvertedFileCount*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[r.status.failedToCreateFailedZip?(C(),Q("div",{key:1,style:X({color:e(a).errorColor})},p(r.$t("status.failureZippingFailedFiles")),5)):(C(),Q("span",xl,p(r.status.failedFileZippedCount/r.status.unconvertedFileCount*100|0)+"% "+p(r.$t("status.zipped"))+" ("+p(r.status.failedFileZippedCount)+"/"+p(r.status.unconvertedFileCount)+")",1))]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[I(" "+p(r.$t("status.zippingProgress"))+" ("+p(r.status.failedFileZippedCount/r.status.unconvertedFileCount*100|0)+"%) ",1)]),_:1}),n(ut,{name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(C(!0),Q(ye,null,Ue(e(A),(P,De)=>(C(),Q("span",{key:De},[n(ae,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:P.url,download:P.name,class:"in-button-anchor",onClick:Se=>xe(P)},[n(He,{class:"zip-button",size:"tiny",color:P.clicked?"#551122":"#F00","text-color":P.clicked?"gray":"white",onClick:Oe(Se=>xe(P),["stop"]),round:""},{default:t(()=>[n(e(ve),{size:"tiny"},{default:t(()=>[n(e(No))]),_:1}),I("ZIP"+p(P.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,kl)]),default:t(()=>[y("div",{style:X({color:e(a).errorColor})},[y("div",null,"ZIP "+p(P.number||"")+" ("+p(r.$t("failed"))+")",1),y("div",null,p(P.name),1),y("div",null,p(P.sizeByUnit),1),y("div",null,p(r.$rt("{n} @:files",P.count)),1)],4)]),_:2},1024)]))),128))]),_:1})]),_:1})):ee("",!0)]),_:1})]),_:1})]),_:1})}}}),Sl=Me(Il,[["__scopeId","data-v-9c59d534"]]),Cl=["innerHTML"],Ll={style:{"flex-grow":"1"}},$l=ge({__name:"converter",props:{input:{},format:{},quality:{},retainExtension:{type:Boolean},maxZipSizeMB:{},threads:{}},emits:["start","end","multi-thread-count"],setup(o,{emit:i}){Re(Pe);const{t:u}=Le(),d=at(),a=Vo(),c=Ho(),l=10,g=navigator.hardwareConcurrency,w=typeof OffscreenCanvas=="function",m=300,v=o,_=i,A=h(!1),T=h(!1),z=h(!1),f=h(0),b=h(!1),D=h(!1),x=h("initializing"),k=h("info"),s=ot(W());let S=!1,E=()=>{},U=0,B=!1;be(()=>v.input,j=>{j!=null&&j.length&&_e(j)}),ke(async()=>{await H(),pe()});function F(){if(U>l*1e3&&!B&&s.success>0)return d.warning({title:u("confirmCloseDialogTitle"),autoFocus:!0,maskClosable:!1,positiveText:u("close"),negativeText:u("back"),onPositiveClick(){b.value=!1,c.destroyAll(),a.destroyAll()},onNegativeClick(){},content:u("confirmCloseDialog")}),!1;c.destroyAll(),a.destroyAll(),b.value=!1}function Ae(j){s.demandImage(j)}function M(){!T.value&&A.value?T.value=!0:F()}function G(){_e(v.input)}let $=h(()=>{});function W(j){const L={logs:[],index:0,converted:0,success:0,failure:0,done:0,length:0,zippedTotalCount:0,zippingErrorCount:0,zippedTotalSize:0,processing:!1,zips:[],inputTotalSize:0,outputTotalSize:0,thumbnail:null,baseZipName:"testzipname",type:"image/any",startedTime:Date.now(),convertedImageDataUrl:"",convertedImageName:"",convertedImageUrl:"",zipSize:v.maxZipSizeMB,unconvertedListText:"",failedZipDone:!1,failedZips:[],unconvertedFileCount:0,unconvertedTotalSize:0,failedFileZippedCount:0,failedToCreateFailedZip:!1,demandImage:()=>{}};return Object.assign(j||{},L)}function te(){D.value=!1,URL.revokeObjectURL(s.convertedImageUrl);for(const j of s.zips)URL.revokeObjectURL(j.url);s.zips.length=0;for(const j of s.failedZips)URL.revokeObjectURL(j.url);s.failedZips.length=0,W(s),E(),E=()=>{},B=!1,z.value=!1,T.value=!1}async function _e(j){if(A.value){d.error({title:"Busy",positiveText:"OK",content:u("interfered")});return}let L=ne(j);W(s),te();const Z={convertedImageBlob:null,convertedImageWidth:0,convertedImageHeight:0,convertedImageName:""};f.value++,b.value=!0,D.value=!0,A.value=!0,s.processing=!0,k.value="info",x.value=u("processing");const oe=new Set,Y=v.format,re=v.quality,Te=[...Y.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),Ve=se(Y,re);s.length=L.length,s.baseZipName=Ve,s.type=Y.replace(/image\//,"").toUpperCase()+(/jpe?g|webp/i.test(Y)?" ("+re+")":""),s.threads=S?0:v.threads;const ze=Date.now();_("start");const xe=L.concat();let Qe;if({callbackToGenerateFailedZips:Qe,callbackToClearConverter:E}=!S&&v.threads>=2?await Ha(s,T,v,Z,a,c,xe,oe,Y,re,Te,Y):await Ka(xe,oe,Z,v,T,s),s.length===1&&await ce(Te,Z),s.success===s.length?(k.value="success",x.value=u("completed")):(k.value="error",x.value=T.value?u("aborted"):u("incomplete")),oe.size!==L.length){const Fe=de(L,oe);$.value=()=>{!Fe||!Fe.length||Qe(Fe)}}A.value=!1,s.processing=!1,z.value=!0,U=Date.now()-ze,_("end")}async function ce(j,L){if(L.convertedImageBlob){const Z=new FileReader;Z.readAsDataURL(L.convertedImageBlob);const oe=await mt(Z).then(Y=>Y.target.result);s.convertedImageName=L.convertedImageName.replace(/^.*\/(?=[^/]+$)/,"").replace(v.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+j,s.convertedImageUrl=URL.createObjectURL(L.convertedImageBlob),s.convertedImageDataUrl=oe,s.convertedImageWidth=L.convertedImageWidth,s.convertedImageHeight=L.convertedImageHeight}}function de(j,L){const Z=[],oe=[];let Y=0;for(const re of j)L.has(re._id)||(Z.push(re),oe.push(re.webkitRelativePath||re.relativePath||re.name),Y+=re.size);return oe.length&&(s.unconvertedListText=oe.join(`
`),s.unconvertedFileCount=Z.length,s.unconvertedTotalSize=Y),Z}let ie=0;function ne(j){const L=[];for(const Z of j)Z.hasOwnProperty("_id")||Object.defineProperty(Z,"_id",{value:ie++}),L.push(Z);return L}function se(j,L){const Z=new Date;return j=j.replace(/^image\//,"").toLowerCase(),`avif2jpg-
    ${Z.getFullYear().toString().substring(2)}
    ${String((Z.getMonth()+1)*100+Z.getDate()).padStart(4,"0")}
    ${String(Z.getHours()*1e4+Z.getMinutes()*100+Z.getSeconds()).padStart(6,"0")}
    -
    ${j+(/jpe?g|webp/i.test(j)?L:"")}
  `.replace(/\s/g,"")}async function H(){const j="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",L=document.createElement("img"),Z=mt(L).then(()=>!0,()=>!1);L.src=j,await Z||d.warning({title:"Unsupported",positiveText:"OK",maskClosable:!1,content:u("avifUnsupported")})}function pe(){(!w||g<2||!Promise.any)&&(S=!0),_("multi-thread-count",S?0:g)}return(j,L)=>{const Z=Ee,oe=Ce,Y=Ie,re=Be,Te=Ne,Ve=_t;return C(),Q(ye,null,[n(Y,{justify:"center",align:"center"},{default:t(()=>{var ze;return[!e(A)&&((ze=v.input)!=null&&ze.length)?(C(),R(oe,{key:0,trigger:"hover",placement:"top","keep-alive-on-hover":!1,duration:0,delay:50},{trigger:t(()=>[n(Z,{onClick:G,round:""},{default:t(()=>[I(p(e(u)("convertAgain")),1)]),_:1})]),default:t(()=>{var xe;return[y("div",{innerHTML:e(u)("reconvertTip",(xe=v.input)==null?void 0:xe.length)},null,8,Cl)]}),_:1})):ee("",!0)]}),_:1}),n(Ve,{ref:"processingModal",show:e(b),"onUpdate:show":L[2]||(L[2]=ze=>we(b)?b.value=ze:null),closable:e(z),"close-on-esc":!1,preset:"dialog","display-directive":"show",onClick:L[3]||(L[3]=ze=>{e(c).destroyAll(),e(a).destroyAll()}),onMaskClick:L[4]||(L[4]=ze=>{e(c).destroyAll(),e(a).destroyAll()}),onClose:F,onEsc:M,title:e(x),type:e(k),"mask-closable":!1,"on-after-leave":te,class:"processing-dialog"},{default:t(()=>[n(Te,{vertical:"",style:{"flex-grow":"1"}},{default:t(()=>[y("div",Ll,[e(D)?(C(),R(Sl,{key:e(f),processing:e(A),status:e(s),interval:m,onAllZipsClicked:L[0]||(L[0]=ze=>we(B)?B.value=!0:B=!0),onDemandZipErrors:e($),onDemandImage:Ae},null,8,["processing","status","onDemandZipErrors"])):ee("",!0)]),n(Te,{justify:"end"},{default:t(()=>[e(A)?(C(),R(Z,{key:0,disabled:e(T),ref:"cancelbutton",round:"",size:"large",onClick:L[1]||(L[1]=ze=>T.value=!0)},{default:t(()=>[n(re,{show:e(T)&&!e(z),size:"small"},{default:t(()=>[I(p(e(u)("cancel")),1)]),_:1},8,["show"])]),_:1},8,["disabled"])):e(z)?(C(),R(Z,{key:1,onClick:F,round:"",size:"large",style:{"font-size":"small","margin-top":"1em"}},{default:t(()=>[I(p(e(u)("close")),1)]),_:1})):ee("",!0)]),_:1})]),_:1})]),_:1},8,["show","closable","title","type"])],64)}}}),El="/avif2jpeg/dist/avif.png",on=o=>(ht("data-v-61ec1790"),o=o(),yt(),o),Ml={class:"container-1"},Pl=on(()=>y("span",null,"Drag & Drop",-1)),Fl={style:{position:"relative"}},Dl={style:{position:"absolute","font-size":"small",right:"-3.5em",bottom:"-1.1em","white-space":"nowrap"}},jl={style:{color:"#666666","font-size":"smaller"}},Ol=on(()=>y("img",{src:El,class:"avif"},null,-1)),Ul=["innerHTML"],Bl={style:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","font-size":"xx-small","white-space":"nowrap"}},Zl=ge({__name:"droptarget",props:{forbidden:{type:Boolean},dropTarget:{}},emits:["drop"],setup(o,{emit:i}){Re(Pe);const u=o,d=i,a=Wo(),c=h(!1),l=h(0),g=h("");ke(()=>{w(u.dropTarget||document)});function w(v){document.ondragstart=_=>_.preventDefault(),document.ondragover=_=>_.preventDefault(),v.ondrop=async _=>{var T;if(_.preventDefault(),c.value||u.forbidden)return;c.value=!0,l.value=0,g.value="";let A;try{const z=[..._.dataTransfer.items].map(f=>f.webkitGetAsEntry());a.start(),A=await m(z),a.finish()}catch{A=[...((T=_.dataTransfer)==null?void 0:T.files)??[]],a.error()}c.value&&(c.value=!1,d("drop",A))}}async function m(v,_){_=_||[];for(const A of v)if(A.isFile){const T=await new Promise(z=>A.file(f=>z(f)));Object.defineProperty(T,"webkitRelativePath",{value:A.fullPath}),_.push(T),l.value++}else if(A.isDirectory){g.value=A.fullPath;const T=A.createReader();do{const z=await new Promise(f=>T.readEntries(b=>f(b)));if(!z.length)break;await m(z,_)}while(!0)}return _}return(v,_)=>{const A=ve,T=Ie,z=Ke,f=Ce,b=_t;return C(),Q(ye,null,[y("div",Ml,[n(f,{to:!1,"display-directive":"show",trigger:"hover",duration:0,delay:0,placement:"left"},{trigger:t(()=>[n(T,{vertical:"",class:"container-2"},{default:t(()=>[n(T,{align:"center",wrap:!1,class:"container-3"},{default:t(()=>[n(T,{align:"center"},{default:t(()=>[n(A,{size:"64",color:"white"},{default:t(()=>[n(e(qo))]),_:1})]),_:1}),n(T,{vertical:"",align:"center",wrap:!1,style:{"font-weight":"bold","font-size":"x-large","line-height":"90%","white-space":"nowrap"}},{default:t(()=>[Pl,y("span",Fl,[I(" AVIF Images "),y("span",Dl,[I(" or "),n(z,{placement:"bottom-end"},{trigger:t(()=>[y("span",jl,[n(A,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Kt))]),_:1}),I(" Folders ")])]),default:t(()=>[I(" You can drag and drop your local folders ")]),_:1})])])]),_:1}),n(T,null,{default:t(()=>[Ol]),_:1})]),_:1})]),_:1})]),default:t(()=>[y("h3",{innerHTML:v.$t("droptarget"),style:{"max-width":"200px","text-align":"center","word-break":"keep-all","overflow-wrap":"break-word"}},null,8,Ul)]),_:1})]),n(b,{show:e(c),"onUpdate:show":_[0]||(_[0]=D=>we(c)?c.value=D:null),closable:!0,preset:"dialog",title:"Parsing dropped items.",type:"info","mask-closable":!1,"negative-text":v.$t("cancel")},{default:t(()=>[n(T,{vertical:"",align:"center"},{default:t(()=>[y("div",Bl,p(e(g)),1),y("div",null,"found "+p(e(l))+" files",1)]),_:1})]),_:1},8,["show","negative-text"])],64)}}}),Rl=Me(Zl,[["__scopeId","data-v-61ec1790"]]),an=o=>(ht("data-v-977d699f"),o=o(),yt(),o),Nl={class:"container-1"},Vl={class:"container-2"},Hl=["innerHTML"],Wl=["innerHTML"],ql={style:{"padding-left":"1em"}},Gl=an(()=>y("br",null,null,-1)),Kl=an(()=>y("ul",null,[y("li",null,"Each extension must begin with a period. "),y("li",null,"Separate each extension with a comma. "),y("li",null,"Use alphameric characters.")],-1)),Ql=["innerHTML"],Yl=["accept"],Jl=ge({__name:"file-selector",props:{expanded:{type:Boolean},target:{},userExtensions:{},forbidden:{type:Boolean}},emits:["input","on-change-accept","update:target","update:userExtensions","update:expanded"],setup(o,{emit:i}){const u=at(),{t:d}=Le(),a=Re(Pe),c=["avif_only","all_images","all_files","edit_type"],l=o,g=i,w=h(0),m=h(!1),v=h(!1),_=ue(()=>B(f.value)),A=ue(()=>b.value.split(",").every(G=>/^\s*(\.[\w\-]+)*\s*$/.test(G))?"success":"error"),T=ue(()=>!l.forbidden&&!v.value),z=ue({get:()=>l.expanded,set:M=>{g("update:expanded",M)}}),f=ue({get:()=>c.indexOf(l.target)>=0?l.target:c[0],set:M=>{g("update:target",M)}}),b=ue({get:()=>l.userExtensions,set:M=>{g("update:userExtensions",M)}}),D=h(null),x=h(null),k=h(U());be(f,M=>{g("on-change-accept",_.value)}),ke(()=>{});function s(M){M.click()}function S(){}function E(M){const $=[...M.target.files];D.value.value="",x.value.value="",Ae($)}function U(){return"webkitdirectory"in document.createElement("input")}function B(M){switch(M){case"avif_only":return".avif, .webp";case"all_images":return".jpg, .jpeg, .jfif, .pjpeg, .pjp, .gif, .png, .webp, .avif, .bmp, .apng, .ico";case"edit_type":return b.value;case"all_files":default:return".*"}}async function F(M){const G=String(_.value).toLowerCase().replace(/\s+/g,"");if(G&&_.value!==".*"){const $=G.split(",");M=M.filter(W=>$.includes(W.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),M.length||await new Promise(W=>{u.error({title:"Images Not Found",positiveText:"OK",onAfterLeave:W,content:()=>me("div",[me(Wt,{description:"NO IMAGES"}),`${d("noimage")}`,me("br"),_.value])})})}return M}async function Ae(M){v.value=!0,M=await F(M),w.value=M.length,M.length>0&&g("input",M),v.value=!1}return(M,G)=>{const $=ve,W=qt,te=Ee,_e=Ce,ce=Ie,de=Xo,ie=Go,ne=Ko,se=Ke,H=Qo,pe=zt,j=xt;return C(),Q(ye,null,[y("div",Nl,[y("div",Vl,[n(ce,{vertical:"",align:"center",justify:"center",inline:""},{default:t(()=>[n(ce,{align:"center",justify:"space-around"},{default:t(()=>[n(W,{value:e(w),max:999,offset:[-8,0],color:"#999999",style:{"margin-right":"1em"}},{default:t(()=>[n($,{size:"4em",color:"#CCCCCC"},{default:t(()=>[n(e(Yo))]),_:1})]),_:1},8,["value"]),n(ce,{vertical:"",align:"stretch",justify:"center"},{default:t(()=>[n(_e,{to:!1,"display-directive":"show",show:e(a).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(a).LANDSCAPE.value?"right":"top",duration:0,delay:0,"z-index":10},{trigger:t(()=>[n(te,{disabled:!e(T),onClick:G[0]||(G[0]=L=>s(e(D))),round:"",style:{width:"100%"},color:"white","text-color":"black"},{icon:t(()=>[n($,{size:"large",color:"gray"},{default:t(()=>[n(e(Qt))]),_:1})]),default:t(()=>[I(" "+p(M.$t("loadbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[y("div",{innerHTML:M.$t("loadbuttontooltip")},null,8,Hl)]),_:1},8,["show","placement"]),!e(a).IS_SP&&e(k)||e(a).SSR?(C(),R(_e,{key:0,to:!1,"display-directive":"show",trigger:"hover",placement:"left","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:e(a).showTooltipsBeforeMounted.value},{trigger:t(()=>[n(te,{disabled:!e(T),onClick:G[1]||(G[1]=L=>s(e(x))),round:"",style:{width:"100%"},color:"white","text-color":"black"},{icon:t(()=>[n($,{size:"large",color:"gray"},{default:t(()=>[n(e(Kt))]),_:1})]),default:t(()=>[I(" "+p(M.$t("loadfolderbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[y("div",{innerHTML:M.$t("loadfoldertooltip")},null,8,Wl)]),_:1},8,["show"])):ee("",!0)]),_:1})]),_:1}),y("div",{class:We({"expand-ext-list-container":e(z)})},[n(j,{"display-directive":"show","expanded-names":e(z)?["extItem"]:"","on-update:expanded-names":L=>{z.value=!!(""+L)},class:We({"expand-ext-list":e(z)})},{"header-extra":t(()=>[n($,{size:"large"},{default:t(()=>[n(e(Jo))]),_:1})]),default:t(()=>[n(pe,{title:M.$t("fileTypeRadioTitle"),name:"extItem"},{default:t(()=>[n(H,{value:e(f),"onUpdate:value":G[5]||(G[5]=L=>we(f)?f.value=L:null),name:"filetyperadios",size:"small"},{default:t(()=>[n(ce,{vertical:"",style:{"padding-left":"1em"}},{default:t(()=>[(C(),Q(ye,null,Ue(c,L=>n(_e,{key:L,trigger:"hover","keep-alive-on-hover":!1,"z-index":5,placement:"left",style:{"max-width":"200px"},duration:0,delay:0},{trigger:t(()=>[n(de,{value:L},{default:t(()=>[I(p(M.$t("fileTypeRadioOptions."+L)),1)]),_:2},1032,["value"])]),default:t(()=>[I(" "+p(B(L).replace(/,/g,", ")),1)]),_:2},1024)),64)),n(_e,{trigger:"hover","keep-alive-on-hover":!1,placement:"bottom-start",show:e(m),duration:0,delay:0},{trigger:t(()=>[y("div",ql,[n(se,{trigger:"manual",placement:"right-end",show:e(f)==="edit_type"&&e(A)!=="success"&&!!e(m)},{trigger:t(()=>[n(ie,{value:e(b),"onUpdate:value":G[2]||(G[2]=L=>we(b)?b.value=L:null),status:e(A),disabled:e(f)!=="edit_type",onFocus:G[3]||(G[3]=L=>m.value=!0),onBlur:G[4]||(G[4]=L=>m.value=void 0),clearable:!0,size:"small",placeholder:".jpg, .gif, .png",spellcheck:"false"},null,8,["value","status","disabled"])]),default:t(()=>[n(ne,{type:"error","show-icon":!0,title:"Validation error"},{default:t(()=>[I(" Please correct the extension list."),Gl,Kl]),_:1})]),_:1},8,["show"])])]),default:t(()=>[y("span",{innerHTML:M.$t("editAcceptTypes")},null,8,Ql)]),_:1},8,["show"])]),_:1})]),_:1},8,["value"])]),_:1},8,["title"])]),_:1},8,["expanded-names","on-update:expanded-names","class"])],2),e(a).IS_SP?ee("",!0):(C(),R(Rl,{key:0,onDrop:Ae,forbidden:!e(T)},null,8,["forbidden"]))]),_:1})])]),y("input",{ref_key:"fileinput",ref:D,onInput:E,onCancel:S,type:"file",multiple:"",accept:e(_),style:{display:"none"}},null,40,Yl),y("input",{ref_key:"folderinput",ref:x,webkitdirectory:"",directory:"",onInput:E,onCancel:S,type:"file",style:{display:"none"}},null,544)],64)}}}),Xl=Me(Jl,[["__scopeId","data-v-977d699f"]]),es={style:{"white-space":"nowrap"}},ts=ge({__name:"settings-output",props:{quality:{},format:{}},emits:["update:format","update:quality"],setup(o,{emit:i}){const u=o,d=i,{t:a}=Le(),c=Re(Pe),l=h([]),g=["image/jpeg","image/png","image/gif","image/bmp","image/avif","image/webp"],w=ue({get:()=>u.format,set:z=>{z=A(z),d("update:format",z)}}),m=ue({get:()=>u.quality,set:z=>{d("update:quality",z)}}),v=ue(()=>/png|bmp/i.test(w.value)),_=h(null);ke(()=>{T()});function A(z){return l.value.indexOf(z)<0&&(z=l.value[0]),z}function T(){for(const z of g)_.value.toDataURL(z).indexOf(z)>=0&&l.value.push(z);l.value.length===0&&l.value.push(g[0])}return(z,f)=>{const b=ve,D=Yt,x=Ie,k=Ce,s=wt,S=bt;return C(),Q(ye,null,[n(x,{justify:"center"},{default:t(()=>[n(x,{vertical:""},{default:t(()=>[n(k,{to:!1,"display-directive":"show",show:e(c).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(c).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(x,{align:"center"},{default:t(()=>[n(b,null,{default:t(()=>[n(e(Qt))]),_:1}),I(p(e(a)("settings.imageType"))+": ",1),n(D,{value:w.value,"onUpdate:value":f[0]||(f[0]=E=>w.value=E),options:l.value.map(E=>({value:E,label:E})),"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),_:1})]),default:t(()=>[I(" "+p(e(a)("settings.imageTypeTooltip")),1)]),_:1},8,["show","placement"]),n(k,{to:!1,"display-directive":"show",show:e(c).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(c).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(x,{align:"center"},{default:t(()=>[n(x,{align:"start",wrap:!1},{default:t(()=>[n(b,null,{default:t(()=>[n(e(Gt))]),_:1}),y("span",es,p(e(a)("settings.quality"))+":",1),n(x,{align:"center",justify:"space-between"},{default:t(()=>[n(s,{tooltip:!1,value:m.value,"onUpdate:value":f[1]||(f[1]=E=>m.value=E),step:1,style:{width:"120px"},disabled:v.value},null,8,["value","disabled"]),n(S,{value:m.value,"onUpdate:value":f[2]||(f[2]=E=>m.value=E),step:"1",min:"0",max:"100",disabled:v.value,style:{width:"90px"},size:"small"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:t(()=>[I(" "+p(e(a)("settings.qualitytooltip")),1)]),_:1},8,["show","placement"])]),_:1})]),_:1}),y("canvas",{ref_key:"canvas",ref:_,width:"1",height:"1",style:{display:"none"}},null,512)],64)}}}),Mt=100,Pt=2e3,ns=ge({__name:"settings-adv",props:{expanded:{type:Boolean},retainExt:{type:Boolean},maxZipSize:{},multithread:{type:Boolean},threadCount:{},threadMax:{}},emits:["update:expanded","update:retainExt","update:maxZipSize","update:multithread","update:threadCount"],setup(o,{emit:i}){const u=o,d=i,a=ue({get:()=>u.expanded,set:m=>{d("update:expanded",m)}}),c=ue({get:()=>u.retainExt,set:m=>{d("update:retainExt",m)}}),l=ue({get:()=>u.maxZipSize,set:m=>{d("update:maxZipSize",m)}}),g=ue({get:()=>u.multithread,set:m=>{d("update:multithread",m)}}),w=ue({get:()=>typeof u.threadCount>"u"?u.threadMax:u.threadCount,set:m=>{d("update:threadCount",m)}});return be(()=>[u.threadMax,u.threadCount],([m])=>{m>1&&typeof u.threadCount>"u"&&(w.value=m)}),(m,v)=>{const _=ve,A=Ee,T=Ce,z=ea,f=Ne,b=wt,D=bt,x=zt,k=xt;return C(),R(f,{justify:"center"},{default:t(()=>[n(k,{"display-directive":"show","default-expanded-names":e(a)?["collapitem"]:"","on-update:expanded-names":s=>a.value=!!String(s),"trigger-areas":["arrow","main"],class:We(["settings-body",e(a)?"expand-adv-settings":""])},Ht({arrow:t(()=>[n(_,{style:X(e(a)&&{top:"8px"})},{default:t(()=>[n(e(ta))]),_:1},8,["style"]),n(_,null,{default:t(()=>[n(e(na))]),_:1})]),default:t(()=>[n(x,{title:m.$t("settings.advancedSettings"),name:"collapitem"},{default:t(()=>[n(f,{vertical:"",style:{"padding-left":"2em"}},{default:t(()=>[n(T,{trigger:"hover",placement:"left","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(f,{wrap:!1,align:"center"},{default:t(()=>[n(A,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:v[0]||(v[0]=s=>c.value=!e(c))},{icon:t(()=>[n(_,null,{default:t(()=>[n(e(Vt))]),_:1})]),default:t(()=>[I(" "+p(m.$t("settings.retainOriginalExtension")),1)]),_:1}),n(z,{value:e(c),"onUpdate:value":v[1]||(v[1]=s=>we(c)?c.value=s:null),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[I(" "+p(m.$t("settings.retainExtTooltip")),1)]),_:1}),n(T,{trigger:"hover",placement:"left","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(f,{vertical:""},{default:t(()=>[n(f,{wrap:!1,align:"center"},{default:t(()=>[n(A,{text:"",focusable:!1,style:{"white-space":"nowrap","font-size":"smaller"}},{icon:t(()=>[n(_,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(oa))]),_:1})]),default:t(()=>[I(" "+p(m.$t("settings.maxZipFileSize"))+": ",1)]),_:1})]),_:1}),n(f,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(b,{tooltip:!1,value:e(l),"onUpdate:value":v[2]||(v[2]=s=>we(l)?l.value=s:null),step:1,min:Mt,max:Pt,style:{width:"120px"}},null,8,["value"]),n(D,{size:"tiny",value:e(l),"onUpdate:value":v[3]||(v[3]=s=>we(l)?l.value=s:null),step:"1",min:Mt,max:Pt,style:{width:"10em"}},{suffix:t(()=>[I("(MB)")]),_:1},8,["value"])]),_:1})]),_:1})]),default:t(()=>[I(" "+p(m.$t("settings.maxZipFileSizeTooltip")),1)]),_:1}),n(T,{trigger:"hover",placement:"left","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(f,{vertical:""},{default:t(()=>[n(f,{wrap:!1,align:"center"},{default:t(()=>[n(A,{text:"",disabled:!u.threadMax,style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:v[4]||(v[4]=s=>g.value=!e(g))},{icon:t(()=>[n(_,null,{default:t(()=>[n(e(aa))]),_:1})]),default:t(()=>[I(" "+p(m.$t("settings.enableMultiThreads")),1)]),_:1},8,["disabled"]),n(z,{value:e(g),"onUpdate:value":v[5]||(v[5]=s=>we(g)?g.value=s:null),disabled:!u.threadMax,size:"small"},null,8,["value","disabled"])]),_:1}),n(f,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(b,{value:e(w),"onUpdate:value":v[6]||(v[6]=s=>we(w)?w.value=s:null),disabled:!u.threadMax||!e(g),step:1,min:2,max:u.threadMax,style:{width:"120px"}},null,8,["value","disabled","max"]),n(D,{size:"tiny",value:e(w),"onUpdate:value":v[7]||(v[7]=s=>we(w)?w.value=s:null),disabled:!u.threadMax||!e(g),step:1,min:2,max:u.threadMax,style:{width:"10em"}},{suffix:t(()=>[I(p(m.$t("threads",e(w))),1)]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[I(" "+p(m.$t("settings.multiThreadsTooltip")),1)]),_:1})]),_:1})]),_:1},8,["title"])]),_:2},[e(a)?{name:"header-extra",fn:t(()=>[n(T,{"keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(A,{onClick:e(wa),size:"tiny",style:{"font-size":"xx-small"}},{default:t(()=>[I(p(m.$t("reset")),1)]),_:1},8,["onClick"])]),default:t(()=>[I(" "+p(m.$t("settings.resetButtonTooltip")),1)]),_:1})]),key:"0"}:void 0]),1032,["default-expanded-names","on-update:expanded-names","class"])]),_:1})}}}),os=Me(ns,[["__scopeId","data-v-69ab40d5"]]),as={},ls={style:{color:"gray","padding-left":"20px"}},ss=["innerHTML"];function is(o,i){const u=vt,d=Ie;return C(),R(d,{vertical:"",justify:"end"},{default:t(()=>[n(u,{style:{margin:"0px"}}),n(d,{justify:"center"},{default:t(()=>[y("ul",ls,[(C(!0),Q(ye,null,Ue(o.$tm("descriptions"),a=>(C(),Q("li",{key:a,style:{"text-align":"left"},innerHTML:a},null,8,ss))),128))])]),_:1})]),_:1})}const rs=Me(as,[["render",is]]),us="modulepreload",cs=function(o){return"/avif2jpeg/dist/"+o},Ft={},le=function(i,u,d){let a=Promise.resolve();if(u&&u.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),g=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(u.map(w=>{if(w=cs(w),w in Ft)return;Ft[w]=!0;const m=w.endsWith(".css"),v=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${w}"]${v}`))return;const _=document.createElement("link");if(_.rel=m?"stylesheet":us,m||(_.as="script"),_.crossOrigin="",_.href=w,g&&_.setAttribute("nonce",g),document.head.appendChild(_),m)return new Promise((A,T)=>{_.addEventListener("load",A),_.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${w}`)))})}))}function c(l){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=l,window.dispatchEvent(g),!g.defaultPrevented)throw l}return a.then(l=>{for(const g of l||[])g.status==="rejected"&&c(g.reason);return i().catch(c)})},ln="English",sn="üá¨üáß",rn='AVIF to JPEG "Offline" Batch Converter',un="It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",cn="Drag & Drop AVIF Images to Convert",dn=["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data is sent to any server</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.'],pn="Select your language",fn="Choose Target File Extentions",mn={avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types",edit_type:"Edit File Extension List"},gn="Input a list of comma separated file extentions to load.<br>e.g.) .jpg,.gif,.png",_n="Load Images",vn="Select your images from a dialog window.<br>*Multiple selection allowed.",hn="Load a Whole Folder",yn=`Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>*It will show "Upload" button, but it actually doesn't upload anything to any server.`,wn="Converting images",bn="Aborted",An="Some files failed to convert",zn="Completed",xn="Currently Busy",kn="No files with the extentions were found.",Tn="Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",In="Cancel",Sn="Save",Cn="Close",Ln="Open",$n="Re-convert",En="Convert previous selected {n} @:files again",Mn="File | Files",Pn="thread | threads",Fn="You have not saved the converted images yet.",Dn="Data have not been saved",jn="Open Source",On="Open the converted image",Un="Copied to clipboard",Bn="The converted image was copied to your clipboard as DataURL.",Zn="Copy the converted image as DataURL",Rn="Convert Again",Nn={expandLogTooltip:"Displaying the entire log may severely reduce conversion speed.",expandLog:"Show entire log",autoScroll:"Auto scroll",showOnlyErrors:"Show only errors",log:"Log",outInRate:"Out / In Ratio",elapsedTime:"Elapsed Time",multiThreading:"Multi-Threading",outputSettings:"Output Settings",totalSize:"Total Size",totalFiles:"Number of Files",confirmDownloadMessage:"It will start to download {0} zip files.",inputSize:"Input Size",outputSize:"Output Size",filterSuccess:"Hide completed item",progressErrors:"Failed items",progressStarted:"Started Items",progressTotal:"Total number of files",zippingProgress:"Zipping progress",zipped:"ZIPPED",openFailedList:"Open failed file list",zipFailedList:"Pack failed files into Zips",table:{index:"index",status:"status",core:"thread",details:"file"},saveFailedList:"Save failed file list",done:"done",convertedZips:"successfully completed ZIP",progressSuccess:"Completed Files",downloadConvertedImage:"Download Converted Image",failureZippingFailedFiles:"Failure while zipping the failed files.",browseConvertedImages:"Browse converted images"},Vn={maxZipFileSize:"Max zip file size",retainExtTooltip:"New extension will be appended to original extension",retainOriginalExtension:"Keep Original File Extension",qualitytooltip:"Set image quality for output",quality:"Image Quality",maxZipFileSizeTooltip:"Set smaller value if memory problems occur.",ignoreExtTooltip:'Try to load files that don"t have image file extension',ignoreFileExtensions:"Load All File Types",imageTypeTooltip:"Choose image format for output",imageType:"Image Type",advancedSettings:"Advanced Settings",enableMultiThreads:"Enable multi-threading",resetButtonTooltip:"Restore all settings to default.",multiThreadsTooltip:"Convert images in multi-threaded"},Hn="Disabled",Wn="Download",qn="Reset",Gn="Back",Kn="Failed",Qn="Success",Yn="Previous version",Jn={lang:ln,flags:sn,title:rn,metaDescription:un,droptarget:cn,descriptions:dn,selectLanguage:pn,fileTypeRadioTitle:fn,fileTypeRadioOptions:mn,editAcceptTypes:gn,loadbutton:_n,loadbuttontooltip:vn,loadfolderbutton:hn,loadfoldertooltip:yn,processing:wn,aborted:bn,incomplete:An,completed:zn,interfered:xn,noimage:kn,avifUnsupported:Tn,cancel:In,save:Sn,close:Cn,open:Ln,reconvert:$n,reconvertTip:En,files:Mn,threads:Pn,confirmCloseDialog:Fn,confirmCloseDialogTitle:Dn,githubOpenSource:jn,convertedImageUrlTooltip:On,copiedDataURLDialogTitle:Un,copiedDataURLMessage:Bn,convertedImageDataUrlTooltip:Zn,convertAgain:Rn,status:Nn,settings:Vn,disabled:Hn,Download:Wn,reset:qn,back:Gn,failed:Kn,success:Qn,previousVersion:Yn},ds=Object.freeze(Object.defineProperty({__proto__:null,Download:Wn,aborted:bn,avifUnsupported:Tn,back:Gn,cancel:In,close:Cn,completed:zn,confirmCloseDialog:Fn,confirmCloseDialogTitle:Dn,convertAgain:Rn,convertedImageDataUrlTooltip:Zn,convertedImageUrlTooltip:On,copiedDataURLDialogTitle:Un,copiedDataURLMessage:Bn,default:Jn,descriptions:dn,disabled:Hn,droptarget:cn,editAcceptTypes:gn,failed:Kn,fileTypeRadioOptions:mn,fileTypeRadioTitle:fn,files:Mn,flags:sn,githubOpenSource:jn,incomplete:An,interfered:xn,lang:ln,loadbutton:_n,loadbuttontooltip:vn,loadfolderbutton:hn,loadfoldertooltip:yn,metaDescription:un,noimage:kn,open:Ln,previousVersion:Yn,processing:wn,reconvert:$n,reconvertTip:En,reset:qn,save:Sn,selectLanguage:pn,settings:Vn,status:Nn,success:Qn,threads:Pn,title:rn},Symbol.toStringTag,{value:"Module"})),Xn="Japanese",eo="Chinese",to="Ukrainian",no="Turkish",oo="Russian",ao="Portuguese",lo="Polish",so="Dutch",io="Korean",ro="Italian",uo="Indonesian",co="Hindi",po="French",fo="Spanish",mo="English",go="German",_o="Arabic",vo={browseConvertedImages:"Browse converted images"},ho={ja:Xn,zh:eo,"zh-hant":"Chinese(hant)",uk:to,tr:no,ru:oo,pt:ao,pl:lo,nl:so,ko:io,it:ro,id:uo,hi:co,fr:po,es:fo,en:mo,de:go,ar:_o,status:vo},ps=Object.freeze(Object.defineProperty({__proto__:null,ar:_o,de:go,default:ho,en:mo,es:fo,fr:po,hi:co,id:uo,it:ro,ja:Xn,ko:io,nl:so,pl:lo,pt:ao,ru:oo,status:vo,tr:no,uk:to,zh:eo},Symbol.toStringTag,{value:"Module"})),tt=[],yo={en:Jn},kt={},Dt=Object.assign({"./locales/ar.json":()=>le(()=>import("./ar-DG_TyH0l.js"),[]),"./locales/de.json":()=>le(()=>import("./de-BKQ1YZW1.js"),[]),"./locales/en.json":()=>le(()=>Promise.resolve().then(()=>ds),void 0),"./locales/es.json":()=>le(()=>import("./es-FyXUX11r.js"),[]),"./locales/fr.json":()=>le(()=>import("./fr-CNeOu9ow.js"),[]),"./locales/hi.json":()=>le(()=>import("./hi-DmwGm9Jx.js"),[]),"./locales/id.json":()=>le(()=>import("./id-NBjXHgxa.js"),[]),"./locales/it.json":()=>le(()=>import("./it-DjPNGeZf.js"),[]),"./locales/ja.json":()=>le(()=>import("./ja-CnPy9wHS.js"),[]),"./locales/ko.json":()=>le(()=>import("./ko-BPQUzibO.js"),[]),"./locales/langlist.json":()=>le(()=>Promise.resolve().then(()=>ps),void 0),"./locales/nl.json":()=>le(()=>import("./nl-OQQdIhSD.js"),[]),"./locales/pl.json":()=>le(()=>import("./pl-CkeOhlBO.js"),[]),"./locales/pt.json":()=>le(()=>import("./pt-DQbXk9Kl.js"),[]),"./locales/ru.json":()=>le(()=>import("./ru-BVAuokFX.js"),[]),"./locales/tr.json":()=>le(()=>import("./tr-B1nkTEr-.js"),[]),"./locales/uk.json":()=>le(()=>import("./uk-DMIE9tAP.js"),[]),"./locales/zh-hant.json":()=>le(()=>import("./zh-hant-BMxm1o6T.js"),[]),"./locales/zh.json":()=>le(()=>import("./zh-BykOBR3X.js"),[])});var jt;for(const o in Dt){const i=(jt=o.match(/\/([a-z]{2}(?:-[a-z]+)?)\.json$/i))==null?void 0:jt[1];i&&(tt.push(i),!(i in yo)&&(kt[i]=Dt[o]))}let gt=ms();gt in kt||(gt="en");const nt=la({legacy:!1,globalInjection:!0,locale:gt,fallbackLocale:"en",messages:yo,warnHtmlMessage:!1,missingWarn:!1,fallbackWarn:!1});async function fs(o){if(nt.global.availableLocales.indexOf(o)>=0)return;const i=await kt[o]();nt.global.setLocaleMessage(o,i),await At()}function ms(){const o=location.pathname;return String(o.match(/[^/]+(?=\/?$)/)||"").toLowerCase()}const gs=["innerHTML"],_s=ge({__name:"switch-lang",emits:["lang-ready","lang-change"],async setup(o,{emit:i}){let u,d;const a=Re(Pe),c=Ut(),{locale:l,t:g}=Le(),w=i,m=Object.entries(ho).map(([f,b])=>({label:b,value:f}));m.sort((f,b)=>{const D=f.label,x=b.label;return D>x?1:D<x?-1:0}),ke(()=>{c.afterEach((f,b,D)=>{_(),a.switchToolTipVisibility()})}),sa(async()=>{}),[u,d]=ia(()=>_()),await u,d();async function v(f){(f!==l.value||nt.global.availableLocales.indexOf(f)===-1)&&(w("lang-change",f),await fs(f),l.value=f,document.title=g("title"),await At()),w("lang-ready",f)}async function _(){const f=c.currentRoute.value.path||"",b=String(f.match(new RegExp("(?<=^\\/)[^/]+"))||"");b&&tt.includes(b)?(await v(b),l.value=b):await A()}async function A(){const f=T().toLowerCase(),b=f.split(/[-_]/)[0];if(tt.includes(b)){let D=b;if(b==="zh")switch(f){case"zh-hant":case"zh-mo":case"zh-hk":case"zh-tw":D="zh-hant"}await v(D)}}function T(){const f=window.navigator;return f.language||f.userLanguage||f.browserLanguage}function z(f){c.push("/"+f+"/")}return(f,b)=>{const D=ve,x=Yt,k=Ce;return C(),R(k,{to:!1,"display-directive":"show",show:e(a).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(a).LANDSCAPE.value?"left":"bottom",duration:0,delay:50},{trigger:t(()=>[n(x,{ref:"langselect",size:"tiny",style:{width:"100%"},"consistent-menu-width":!1,options:e(m),"_v-model:value":"locale",value:e(l),"onUpdate:value":z},{arrow:t(()=>[n(D,null,{default:t(()=>[n(e(ra))]),_:1})]),_:1},8,["options","value"])]),default:t(()=>[y("div",{innerHTML:f.$t("selectLanguage")},null,8,gs)]),_:1},8,["show","placement"])}}}),vs=y("span",null,"CONVERT TOüëá",-1),Pe=Symbol("global variables"),hs=ge({__name:"Avif2Jpeg",emits:["ready"],setup(o,{emit:i}){Le();const u=i,d=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),a=h(null),c=h(2);let l=h(void 0);const g=h(!0),w=h(!1),m=h(!1),v=h(!1);ua(Pe,{showTooltipsBeforeMounted:l,LANDSCAPE:g,IS_SP:d,switchToolTipVisibility:b,SSR:!1}),ke(()=>{D(),window.addEventListener("resize",D),b(),setTimeout(()=>m.value=!0,3e3)});const _=200;let A=0,T=!0;function z(){v.value=!1,A=Date.now()}function f(){const k=T?0:Math.max(0,_-(Date.now()-A));T=!1,setTimeout(()=>v.value=!0,k),u("ready")}async function b(){}function D(){const k=document.body.clientWidth,s=document.body.clientHeight;g.value=k*.75>s||k>900}function x(k){a.value=k}return(k,s)=>{const S=Ie,E=ve,U=Ke,B=Ne;return C(),R(B,{vertical:"",align:"stretch",justify:"start",style:{height:"100%",position:"relative"}},{default:t(()=>[n($a,null,{"lang-switch":t(()=>[(C(),R(ca,null,{default:t(()=>[n(_s,{onLangChange:z,onLangReady:f})]),_:1}))]),_:1}),n($e,{name:"fade"},{default:t(()=>[e(v)?(C(),R(B,{key:0,vertical:"",align:"stretch",justify:"space-between",style:{height:"100%"}},{default:t(()=>[n(Pa),n(S,{justify:"center"},{default:t(()=>[n(Xl,{expanded:e(V).expandExtButtons,"onUpdate:expanded":s[0]||(s[0]=F=>e(V).expandExtButtons=F),target:e(V).acceptTypeValue,"onUpdate:target":s[1]||(s[1]=F=>e(V).acceptTypeValue=F),userExtensions:e(V).editedAcceptTypes,"onUpdate:userExtensions":s[2]||(s[2]=F=>e(V).editedAcceptTypes=F),forbidden:e(w),onInput:x},null,8,["expanded","target","userExtensions","forbidden"])]),_:1}),n($l,{input:e(a),format:e(V).imageFormat,quality:e(V).imageQuality,"retain-extension":e(V).retainExtension,maxZipSizeMB:e(V).maxZipSizeMB,threads:e(V).multithread?e(V).threadCount:0,onStart:s[3]||(s[3]=F=>w.value=!0),onEnd:s[4]||(s[4]=F=>w.value=!1),onMultiThreadCount:s[5]||(s[5]=F=>c.value=F)},null,8,["input","format","quality","retain-extension","maxZipSizeMB","threads"]),n(S,{vertical:"",align:"center"},{default:t(()=>[n(U,{trigger:"manual",placement:"top","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(E,{size:"4vh",color:"#DADADA",style:{margin:"0px"}},{default:t(()=>[n(e(da))]),_:1})]),default:t(()=>[vs]),_:1})]),_:1}),n(S,{vertical:"",align:"center"},{default:t(()=>[n(ts,{format:e(V).imageFormat,"onUpdate:format":s[6]||(s[6]=F=>e(V).imageFormat=F),quality:e(V).imageQuality,"onUpdate:quality":s[7]||(s[7]=F=>e(V).imageQuality=F)},null,8,["format","quality"]),n(os,{"retain-ext":e(V).retainExtension,"onUpdate:retainExt":s[8]||(s[8]=F=>e(V).retainExtension=F),"max-zip-size":e(V).maxZipSizeMB,"onUpdate:maxZipSize":s[9]||(s[9]=F=>e(V).maxZipSizeMB=F),expanded:e(V).expandAdvSettings,"onUpdate:expanded":s[10]||(s[10]=F=>e(V).expandAdvSettings=F),multithread:e(V).multithread,"onUpdate:multithread":s[11]||(s[11]=F=>e(V).multithread=F),"thread-count":e(V).threadCount,"onUpdate:threadCount":s[12]||(s[12]=F=>e(V).threadCount=F),"thread-max":e(c)||0},null,8,["retain-ext","max-zip-size","expanded","multithread","thread-count","thread-max"])]),_:1}),n(rs)]),_:1})):ee("",!0)]),_:1})]),_:1})}}}),Tt=ge({__name:"App",setup(o){const i={Statistic:{valueFontSize:"1em"},Popover:{borderRadius:"0.4em",boxShadow:"2px 2px 5px 0px #555555"},Tooltip:{color:"#000000AA"},Image:{toolbarColor:"#00000099"}},u=h(!0);return ke(()=>{u.value=!1}),(d,a)=>{const c=fa,l=ma,g=ga,w=_a,m=va,v=pa;return C(),R(v,{"theme-overrides":i,style:{width:"100%",height:"100%"}},{default:t(()=>[n(m,null,{default:t(()=>[n(w,{placement:"top-right",max:20},{default:t(()=>[n(g,{placement:"top-left",closable:!0,max:50},{default:t(()=>[n(l,null,{default:t(()=>[n(c,null,{default:t(()=>[n(hs,{class:We({hide:e(u)})},null,8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),wo=[{path:"/",name:"Home",component:Tt}];for(const o of tt)wo.push({path:"/"+o+"/",strict:!0,name:o,component:Tt});ha(Tt,{routes:wo,base:"/avif2jpeg/dist/"},({app:o,router:i,routes:u,isClient:d,initialState:a})=>{o.use(nt)});
