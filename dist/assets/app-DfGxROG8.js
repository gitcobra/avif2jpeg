var ca=Object.defineProperty;var pa=(l,i,u)=>i in l?ca(l,i,{enumerable:!0,configurable:!0,writable:!0,value:u}):l[i]=u;var Ve=(l,i,u)=>pa(l,typeof i!="symbol"?i+"":i,u);import{r as w,a as $t,d as be,i as rt,c as te,o as O,_ as we,u as e,w as t,b as T,t as d,e as n,f as wn,N as _e,L as fa,g as oe,B as ze,h as Wt,j as _,F as Le,k as mt,l as ga,m as J,n as $e,p as ma,q as Ht,s as yn,v as Te,x as va,y as xe,z as Dt,A as jt,C as Ke,D as _t,E as ha,G as _a,H as Ne,I as Re,J as vt,K as le,M as ge,O as Ge,T as qe,P as bn,Q as Vt,R as Et,S as qt,U as ht,V as De,W as kn,X as lt,Y as wa,Z as wt,$ as ya,a0 as sn,a1 as rn,a2 as zn,a3 as ut,a4 as ba,a5 as Gt,a6 as ka,a7 as An,a8 as za,a9 as Aa,aa as Kt,ab as Ta,ac as Tn,ad as xa,ae as Ia,af as un,ag as xn,ah as Sa,ai as Ca,aj as In,ak as Sn,al as Pt,am as Cn,an as Ze,ao as Ln,ap as La,aq as $a,ar as Ea,as as It,at as Fa,au as Ua,av as Ue,aw as Oa,ax as Pa,ay as Yt,az as $n,aA as Xt,aB as Ma,aC as En,aD as Na,aE as ct,aF as pt,aG as Ra,aH as Da,aI as ja,aJ as Ba,aK as Za,aL as Wa,aM as Ha,aN as Va,aO as qa,aP as Ga,aQ as Ka,aR as Ya,aS as Xa,aT as Qa,aU as Ja,aV as el,aW as tl,aX as nl,aY as ol,aZ as al}from"./vendor-DtAJ3Rvp.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const p of a.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function u(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=u(o);fetch(o.href,a)}})();const Ce=w(navigator.hardwareConcurrency?Math.min(navigator.hardwareConcurrency,12):0),ft={threadCount:{min:2,max:Math.max(2,Ce.value)}},ll={imageFormat:"image/jpeg",imageQuality:90,expandExtButtons:!1,acceptTypeValue:void 0,editedAcceptTypes:"",expandAdvSettings:!1,retainExtension:!1,maxZipSizeMB:1e3,useFolderNameForZip:!1,multithread:!0,threadCount:Ce.value,shrinkImage:!1,maxWidth:4096,maxHeight:4096,disableNotifyingFolderSelect:!1},B=$t(Fn({}));function sl(){Fn(B)}function Fn(l){return Object.assign(l,ll)}const Un="avif2jpeg",Mt=JSON.parse(localStorage.getItem(Un)||"{}");for(const l in B)if(Mt.hasOwnProperty(l)&&Mt[l]!==void 0){let i=Mt[l];ft.hasOwnProperty(l)&&(ft[l].min>i&&(i=ft[l].min),ft[l].max<i&&(i=ft[l].max)),B[l]=i}const il=()=>{const l={};for(const i in B)l[i]=B[i];localStorage.setItem(Un,JSON.stringify(l))};window.addEventListener("beforeunload",il);const rl=be({__name:"github",setup(l){const i=rt(nt);return(u,s)=>{const o=_e,a=wn,p=we;return O(),te(p,{to:!1,"display-directive":"show",show:e(i).showTooltipsBeforeMounted.value,trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(a,{href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-size":"small","font-weight":"bolder"}},{default:t(()=>[n(o,null,{default:t(()=>[n(e(fa))]),_:1}),s[0]||(s[0]=T("GitHub"))]),_:1})]),default:t(()=>[T(" "+d(u.$t("githubOpenSource")),1)]),_:1},8,["show"])}}}),ul=["href"],dl=be({__name:"licenses",setup(l){const i=w(!1),u={Vue:"https://github.com/vuejs/core/blob/main/LICENSE",Vite:"https://github.com/vitejs/vite/blob/main/LICENSE","Vite SSG":"https://github.com/antfu/vite-ssg/blob/main/LICENSE","Naive UI":"https://github.com/TuSimple/naive-ui/blob/main/LICENSE",Ionicons:"https://github.com/ionic-team/ionicons/blob/main/LICENSE"};return(s,o)=>{const a=ze;return O(),oe(Le,null,[n(a,{text:"",onClick:o[0]||(o[0]=p=>i.value=!0),style:{color:"black","font-size":"small"}},{default:t(()=>o[2]||(o[2]=[T("Licenses")])),_:1}),n(e(Wt),{preset:"dialog",ref:"dialog",show:i.value,"onUpdate:show":o[1]||(o[1]=p=>i.value=p),"positive-text":"OK",title:"Licenses"},{default:t(()=>[o[3]||(o[3]=_("h3",null,"Used Framework and Libraries",-1)),_("ul",null,[(O(),oe(Le,null,mt(u,(p,c)=>_("li",null,[_("a",{href:p},d(c),9,ul)])),64))])]),_:1},8,["show"])],64)}}}),cl=1,pl=8,fl=20,gl="",xt={major:cl,minor:pl,build:fl,tag:gl},ml={style:{"font-size":"x-small","user-select":"none"}},vl=be({__name:"version",setup(l){const i=["0.0.118"],u=`${xt.major}.${xt.minor}.${xt.build}${xt.tag}`,s=i.map(c=>({label:`v${c}`,key:c,value:c}));function o(c){const{key:h,label:g}=c,k=p(h),m=J("a",{href:k},g),r=J("div",null,m);return J("div",null,r)}function a(c){location.href=p(c)}function p(c){return`/avif2jpeg/old/${c}/`}return(c,h)=>{const g=ga;return O(),te(g,{"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start",options:e(s),"render-label":o,"onUpdate:value":a},{header:t(()=>[_("span",ml,d(c.$t("previousVersion")),1)]),default:t(()=>[_("span",{style:{cursor:"pointer"}},"v"+d(u))]),_:1},8,["options"])}}}),hl=be({__name:"header",setup(l){return(i,u)=>{const s=$e,o=Ht;return O(),te(s,{vertical:"",justify:"start"},{default:t(()=>[n(s,{justify:"space-between",align:"center"},{default:t(()=>[n(s,{align:"center"},{default:t(()=>[n(rl),n(vl),n(dl)]),_:1}),n(s,{align:"end",style:{"font-size":"x-small"}},{default:t(()=>[ma(i.$slots,"lang-switch")]),_:3})]),_:3}),n(o,{style:{margin:"0px"}})]),_:3})}}}),_l={style:{padding:"0px",margin:"0px","text-align":"center"}},wl={key:0},yl=be({__name:"title",setup(l){const i=yn(),u=Te(()=>{const s=i.currentRoute.value.path||"";return!String(s.match(new RegExp("(?<=^\\/)[^/]+"))||"")});return(s,o)=>{const a=wn,p=va("router-link"),c=$e;return O(),te(c,{align:"center",justify:"center",style:{margin:"0px"}},{default:t(()=>[_("h1",_l,[e(u)?(O(),oe("span",wl,d(s.$t("title")),1)):(O(),te(p,{key:1,to:"../",custom:""},{default:t(({navigate:h,href:g})=>[n(a,{href:g,onClick:h,style:{color:"black","word-break":"keep-all","overflow-wrap":"break-word"}},{default:t(()=>[T(d(s.$t("title")),1)]),_:2},1032,["href","onClick"])]),_:1}))])]),_:1})}}});function bl(l){return new Worker("/avif2jpeg/dist/assets/worker.canvas-ByxzuV0b.js",{name:l==null?void 0:l.name})}let On=0;class kl extends bl{constructor(u){super();Ve(this,"id",On++);Ve(this,"priority");this.priority=u||!1}release(){Ft(this)}}class zl extends Promise{constructor(){super(...arguments);Ve(this,"wid",-1)}}const Bt=new Set,st=new Set,et=new Set,yt=new Map,Pn=[];function Al(l){const i=new kl;return Bt.add(i),Mn(i,l),Ft(i),l&&Pn.push(i.id),i}function Mn(l,i){const u=i?et:st,s=new zl(o=>{yt.set(l,()=>o([l,s,!!i]))});s.wid=l.id,u.add(s)}async function Tl(l){let i;if(!l)i=new Set([...et,...st]);else if(typeof l=="number"){const a=Pn.slice(0,l);i=new Set([...et].filter(p=>a.includes(p.wid)))}else i=l?et:st;const[u,s,o]=await Promise.any(i);return(o?et:st).delete(s),Mn(u,o),u}function Ft(l){const i=yt.get(l);i&&(yt.delete(l),i())}function xl(){for(const l of yt.keys())Ft(l)}async function dn(){return await Promise.all([...st,...et])}function Nn(){xl();for(const l of Bt)l.onmessage=null,l.terminate();Bt.clear(),st.clear(),et.clear(),yt.clear(),On=0}function Il(l){return new Worker("/avif2jpeg/dist/assets/worker.zip-D4CHLUmx.js",{name:l==null?void 0:l.name})}const Sl=1e3*10,Cl=1,Qt=2e3*2e3*5,Ll=5,$l=2,El=Qt*1,cn=Qt*6,Fl=300,bt=new Map,St=new Map;let gt=0;const tt=new Map,it=new Map,kt=new Map,zt=new Map;let Jt,Q,Oe,At,Be,Rn,Dn,jn,Bn,Zn,Wn;function Nt(l){({files:Be,completedFileIdSet:Jt,ConvStats:Q,canceled:Oe,props:At,format:Rn,quality:Dn,outputExt:jn,imageType:Bn,message:Zn,notification:Wn}=l||{}),bt.clear(),St.clear(),tt.clear(),it.clear(),kt.clear(),zt.clear(),it.clear(),kt.clear(),zt.clear()}async function Ul(l){Nt(l),Jt.clear();const i=Math.min(At.threads-1,Be.length),u=Math.min(Ll,i),s=Ml(Q,Oe);let o;try{o=await Ol(i,u,s)}catch{return Nt(),{exception:new Error("worker-load-error"),callbackToClearConverter:new Function,callbackToGenerateFailedZips:new Function}}const a=Pl(o),p=xe(Oe,S=>{S&&p()});Q.demandImage=S=>{o.postMessage({action:"request-image",index:S})};const h=Be.length===1;let g=0,k=0,m="",r=0;for(gt=0,bt.clear();r<Be.length;){if(gt>cn&&!Oe.value){await new Promise(H=>setTimeout(H,100));continue}const S=[],I=[];let E=!1;const W=Be.length-r,Z=Math.min(r+Math.max(Math.min($l,W/At.threads|0),1),Be.length);let b=0,L=!1;for(;r<Z&&!((b>El||gt>cn)&&!Oe.value);r++){const H=Be[r],se=H.webkitRelativePath||H.name,R=St.get(H);L=L||!!R;const Ae=0;Oe.value;const ie=H._id;if(b+=H.size,E=r===Be.length-1,it.has(ie)||it.set(ie,H),Hn(r,se,ie),kt.has(H)||(g++,Q.index=g),Oe.value){qn(ie);continue}let ye;try{ye=await createImageBitmap(H)}catch{Vn(r,se,ie);continue}I.push(ye);const z=ye.width*ye.height*4;b+=z+H.size,gt+=z+H.size;let P=!1;const ee=Date.now();ee-k>Fl&&(k=ee,P=!0),S.push({index:r,bitmap:ye,file:H,fileId:ie,outputPath:m,type:Rn,quality:Dn/100,demandThumbnail:P||E,isSingleImage:h,maxSize:B.shrinkImage?{width:B.maxWidth,height:B.maxHeight}:null,retriedTime:St.get(H)||0,webkitRelativePath:H.webkitRelativePath}),P=!1}let q;if(S.length){const H=b>Qt;q=await Tl(u>0&&(L?1:H)),bt.set(q,b)}if(q&&(q.postMessage(S,I),I.forEach(H=>H.close()),I.length=0),E&&(await dn(),Oe.value))break}if(!Oe.value){let S;await new Promise(I=>{S=xe([()=>Q.done,Oe],()=>{(Q.done>=g||Oe.value)&&I(void 0)},{immediate:!0})}),S()}p(),o.postMessage({action:"squeeze"}),await a,await dn();const v={value:!1},x=()=>{v.value=!0,Nn(),o.onmessage=null,o.terminate(),Nt()};let y=!1;return{callbackToClearConverter:x,callbackToGenerateFailedZips:async S=>{y||(y=!0,await Rl(S,o,v,Q))}}}async function Ol(l,i,u){Nn();const s=new Il;s.postMessage({action:"set-config",zipSize:At.maxZipSizeMB*1024*1024,keepExt:At.retainExtension,outputExt:jn,imageType:Bn});let o;for(let p=0;p<l;p++){const c=Al(i>p);o??(o=c),c.onmessage=u;const{port1:h,port2:g}=new MessageChannel;s.postMessage({action:"set-port"},[h]),c.postMessage({},[g])}return await new Promise((p,c)=>{const h=v=>{s.removeEventListener("message",m),o.removeEventListener("message",m),clearTimeout(r),v?p(v):c(v)};let g=!1,k=!1;const m=v=>{v.target===s&&(g=!0),v.target===o&&(k=!0),g&&k&&h(!0)};let r=0;s.addEventListener("message",m),o.addEventListener("message",m),r=window.setTimeout(()=>h(!1),Sl)}),s}function Pl(l){return new Promise(u=>{l.onmessage=s=>{var g;const o=s.data,{action:a}=o;if(a==="add-zip-completed"){const{fileId:k}=o;Q.done++,Q.success++,Jt.add(k);return}if(a==="respond-image"){const{url:k,index:m,path:r,size:v,fileId:x}=o;Q.convertedImageUrl=k,Q.convertedImageSize=v,Q.convertedImageIndex=m,Q.convertedImageName=r,Q.convertedImageFileId=x;let y="",$=0,S="";if(x>=0){const I=it.get(x);y=URL.createObjectURL(I),$=I.size,S=I.name}Q.convertedImageOrgUrl=y,Q.convertedImageOrgSize=$,Q.convertedImageOrgName=S,Q.convertedImageShrinked=(g=zt.get(x))==null?void 0:g.shrinked;return}const{size:p,count:c}=o,h="url"in s.data?s.data.url:"";switch(a){case"push-zip":Q.zips.push({url:h,size:p,count:c}),Q.zippedTotalCount+=c,Q.zippedTotalSize+=p;break;case"squeeze-zip":c>0&&(Q.zips.push({url:h,size:p,count:c}),Q.zippedTotalCount+=c,Q.zippedTotalSize+=p),u(void 0);break;case"push-filelist":Q.failedFileZippedCount++;break;case"squeeze-filelist-zip":Q.failedZipDone=!0;case"push-filelist-zip":Q.failedZips.push({url:h,size:p,count:c});break;case"zip-error":case"zip-squeeze-error":Q.zippingErrorCount+=c,a==="zip-squeeze-error"&&u(void 0);break}}})}function Ml(l,i,u,s){return a=>{const p=a.target,{data:c}=a,{action:h}=c;switch(i.value,h){case"list-start":break;case"file-start":{const{index:g,path:k,fileId:m}=c;Hn(g,k,m);break}case"file-load":{const{thumbnail:g,width:k,height:m,fileId:r,shrinked:v}=c,x=tt.get(r);x.core=p.id,x.command="🖼️loaded",g&&(l.thumbnail=g);let y=zt.get(r);y||(y={},zt.set(r,y)),y.shrinked??(y.shrinked=v);break}case"file-converted":{const{index:g,path:k,fileId:m}=c,r=tt.get(m);r.command="🔃converted",l.converted++;break}case"file-completed":{const{inputsize:g,outputsize:k,fileId:m}=c,r=tt.get(m);r&&(r.command="✅completed",r.completed=!0),l.inputTotalSize+=g,l.outputTotalSize+=k;break}case"file-error":{const{index:g,path:k,fileId:m}=c;Vn(g,k,m);break}case"file-canceled":{const{fileId:g,path:k}=c;qn(g);break}case"list-end":{Ft(p),gt-=bt.get(p)||0,bt.delete(p);break}}}}let Nl=0;function Hn(l,i,u){const s={key:Nl++,core:-1,index:l,path:i,command:"➡️started"};tt.set(u,s),Q.logs.push(s)}function Vn(l,i,u){const s=it.get(u);if(!s)throw new Error(`the file doesn't exist in the Map. "${u}":"${i}"`);const o=kt.get(s)||0,a=tt.get(u);o<Cl?(kt.set(s,o+1),Be.push(s),St.set(s,Date.now()),a.command="⚠️retrying",a.error=!0,Zn.warning(`retrying "${i}"`,{duration:3e3}),Q.retried++):(Q.done++,Q.failure++,a.command="❗failed",a.error=!0,Wn.error({content:`failed to load "${i}"`,duration:5e3}))}function qn(l){const i=tt.get(l);Q.done++,Q.failure++,i.command="❗canceled",i.error=!0}async function Rl(l,i,u,s){let o=0;for(const a of l){const p=(a.webkitRelativePath||a.name).replace(/^\//,"");if(u.value)return;o-s.failedFileZippedCount>20&&await new Promise(c=>setTimeout(c,10)),i.postMessage({action:"add-filelist",file:a,path:p}),o++}i.postMessage({action:"squeeze-filelist"})}function Je(l,i=2){const u=Math.sign(l);l=Math.abs(l);const s=["Bytes","KB","MB","GB"],o=l?Math.floor(Math.log(l)/Math.log(1024)):0;return`${(l/Math.pow(1024,o)*u).toFixed(i)}${s[o]}`}function Gn(l,i=100,u=!1){i=typeof i=="number"?{width:i,height:i}:i;const{width:s,height:o}=i;let{width:a,height:p}=l;const c=a/p,h=s/o;return c>=h?(a=u?Math.min(s,a):s,p=a/c|0):(p=u?Math.min(o,p):o,a=p*c|0),{width:a,height:p}}class Dl{constructor(){Ve(this,"_currentFileCount",0);Ve(this,"_totalFileCount",0);Ve(this,"_zipLengthSumList",[]);Ve(this,"_pathBank",{})}increase(i){i&&(this._pathBank[i]=[this._zipLengthSumList.length,this._currentFileCount]),this._currentFileCount++,this._totalFileCount++}split(){this._zipLengthSumList.push(this._totalFileCount),this._currentFileCount=0}get(i){if(typeof i=="number"){let u=this._zipLengthSumList.findIndex((a,p)=>i<a);u===-1&&(u=this._zipLengthSumList.length);const s=this._zipLengthSumList[u-1]||0,o=i-s;return[u,o]}else{const u=this._pathBank[String(i)];if(u)return u}return null}}async function jl(l,i,u,s,o){let a="";const p=document.createElement("canvas"),c=p.getContext("2d");let h=new Dt;const g=[h],k=new Dl,m=u.format,r=u.quality/100,v=[...m.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),x=l.length,y=u.maxZipSizeMB*1024*1024;let $=0,S=null,I="",E="",W=0,Z=0,b=0,L=0,q=0,H=!1;const se=[];o.demandImage=z=>{const[P,ee]=k.get(z),re=g[P];o.convertedImageIndex=z,o.convertedImageName=re.getPathByIndex(ee),o.convertedImageUrl=URL.createObjectURL(new Blob([re.get(ee)],{type:m}));let ue="",me=0,N="";const M=se[z];ue=URL.createObjectURL(M),me=M.size,N=M.name,o.convertedImageOrgUrl=ue,o.convertedImageOrgSize=me,o.convertedImageOrgName=N};for(const z of l){if(s.value)break;const P=z.name;let ee="";const re=z.size,ue=(z.webkitRelativePath||z.relativePath||P).replace(/^\//,""),me=document.createElement("img");$++;const N={key:b++,core:-1,index:$,path:ue,command:"➡️start"};o.index=$,o.logs.push(N),o.logs.length-1,a&&(URL.revokeObjectURL(a),a=""),a=URL.createObjectURL(z),E=a,W=z.size,me.src=a;const M=await Kn(me).then(()=>!0).catch(()=>!1);if(!me.complete||!M||s.value){o.done++,o.failure++,N.command="❗failed";continue}const G=me.width,F=me.height;p.width=G,p.height=F,c.drawImage(me,0,0,G,F,0,0,G,F),N.command="🖼️imgload",o.thumbnail=me;const ce=await new Promise(de=>{const Ee=A=>{S=A,de(A)};p.toBlob(Ee,m,r)});if(s.value)break;if(!ce){o.failure++;continue}Z=ce.size,o.converted++;let ae="";if(q+Z>=y){try{await h.wait(),ae=h.url()}catch{H=!0,alert("memory problem occurred");break}o.zips.push({url:ae,size:q,count:L}),o.zippedTotalCount+=L,o.zippedTotalSize+=q,q=0,L=0,k.split(),h=new Dt,g.push(h)}q+=Z;const ve=ue||P;for(let de=1;de<255&&(ee=ve.replace(u.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+(de>1?`(${de})`:"")+"."+v,!!h.has(ee));de++);o.done++;try{L++,h.add(ee,ce),k.increase(),se.push(z),o.inputTotalSize+=re,o.outputTotalSize+=Z}catch{continue}I=ee,o.success++,N.command="✅completed",N.completed=!0,i.add(z._id)}if(o.success>0)if(x===1)S&&(o.convertedImageIndex=0,o.convertedImageName=I.replace(/^.*\/(?=[^/]+$)/,"").replace(u.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+v,o.convertedImageUrl=URL.createObjectURL(S),o.convertedImageOrgUrl=E,o.convertedImageOrgSize=W);else try{if(H)throw new Error("terminated zipping process for memory problems");await h.wait();const z=h.url();o.zips.push({url:z,count:L,size:q}),o.zippedTotalCount+=L,o.zippedTotalSize+=q}catch{}const R={value:!1},Ae=()=>{R.value=!0,g.forEach(z=>z.clear()),g.length=0,se.length=0};let ie=!1;return{callbackToClearConverter:Ae,callbackToGenerateFailedZips:async z=>{ie||(ie=!0,Bl(z,y,o,R))}}}async function Bl(l,i,u,s){let o=0,a=0,p=new Dt;for(let c=0;c<l.length;c++){const h=l[c],g=(h.webkitRelativePath||h.name).replace(/^\//,"");if(s.value)return;if(await p.add(g,h),a+=h.size,o++,u.failedFileZippedCount++,a>=i||c===l.length-1){await p.zip();const k=p.url();u.failedZips.push({url:k,size:a,count:o}),p.clear(),a=0,o=0}}u.failedZipDone=!0}function Kn(l){if(typeof l.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((i,u)=>{l.onload=i,l.onerror=u})}const je=(l,i)=>{const u=l.__vccOpts||l;for(const[s,o]of i)u[s]=o;return u},Zl={class:"container"},Wl={__name:"zipicon",setup(l){return(i,u)=>(O(),oe("span",Zl,[n(e(_e),null,{default:t(()=>[n(e(jt))]),_:1}),u[0]||(u[0]=_("span",{class:"text"},"ZIP",-1))]))}},Hl=je(Wl,[["__scopeId","data-v-5dab19ad"]]),Vl=["href","download","title"],ql='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',Gl=be({__name:"thumbnail",props:{src:{},width:{},height:{},maxWidth:{default:100},maxHeight:{default:100},expand:{type:Boolean,default:!1},loading:{type:Boolean},fileName:{},allowNext:{type:Boolean},allowPrev:{type:Boolean},hidden:{type:Boolean}},emits:["load","error","next","prev"],setup(l,{expose:i,emit:u}){const{t:s}=Ke(),o=l,a=u,p=w();w();const c=w(!0),h=w(""),g=w(o.width||100),k=w(o.height||100),m=w(!1),r=$t({width:g.value+"px",height:k.value+"px",minWidth:"50px",minHeight:"50px"});_t(()=>{var E,W,Z;(W=(E=p.value)==null?void 0:E.previewInstRef)==null||W.setPreviewSrc(ql),URL.revokeObjectURL((((Z=p.value)==null?void 0:Z.imageRef)||{}).src),p.value=null});const v=w(!0);ha(()=>{v.value=!1}),_a(()=>{v.value=!0}),xe(o,(E,W)=>{r.width=(o.width||100)+"px",r.height=(o.height||100)+"px"}),xe(()=>o.src,(E,W)=>{v.value&&$(E)},{immediate:!0}),i({download:S,openPreview:I,active:v});async function x(E){const W=E.target,Z=W.naturalWidth,b=W.naturalHeight,{width:L,height:q}=Gn({width:Z,height:b},{width:o.maxWidth||100,height:o.maxHeight||100},o.expand);g.value=L,k.value=q,a("load",{src:W.src,width:Z,height:b}),c.value=!1,await new Promise(H=>setTimeout(H,100)),!c.value&&(m.value=!0)}function y(E){const W=E.target;a("error",W.src)}async function $(E){c.value=!0,m.value=!1,h.value=E}function S(){const E=document.createElement("a");E.href=h.value,E.download=o.fileName,E.click()}function I(){var E;(E=p.value)==null||E.click()}return(E,W)=>{const Z=bn,b=Vt,L=$e,q=vt;return Ne((O(),oe("div",null,[n(e(we),null,{trigger:t(()=>[n(q,{show:e(c)||o.loading},{default:t(()=>[n(L,{justify:"center",align:"center",style:le(e(r))},{default:t(()=>[_("a",{"_v-show":"!(imgloading || props.loading)",href:e(h),onClick:W[0]||(W[0]=Ge(()=>{},["left","prevent"])),target:"_blank",download:o.fileName,title:o.fileName,style:{"line-height":"0px"}},[n(qe,{mode:"in-out"},{default:t(()=>[Ne(n(Z,{ref_key:"nImageRef",ref:p,"show-toolbar-tooltip":"",onLoad:x,onError:y,src:e(h),width:e(g),height:e(k),style:{border:"1px solid silver"}},null,8,["src","width","height"]),[[Re,e(m)]])]),_:1})],8,Vl),e(c)||o.loading?(O(),te(b,{key:0})):ge("",!0)]),_:1},8,["style"])]),_:1},8,["show"])]),default:t(()=>[T(" "+d(o.fileName),1)]),_:1})],512)),[[Re,!E.hidden]])}}}),pn=je(Gl,[["__scopeId","data-v-dbebbe1a"]]),Kl=["href","download","title"],Yl={class:"left-num"},Xl={class:"right-num"},Ql=["href","download","title"],Jl={class:"left-num"},es={class:"right-num"},ts=["href","download"],ns=be({__name:"image-viewer",props:{url:{},originalUrl:{},name:{},originalName:{},size:{},originalSize:{},length:{},index:{},isSingle:{type:Boolean},variousInfo:{}},emits:["demand-image","close"],setup(l,{expose:i,emit:u}){const s=l,o=u;i({download:N,cleanup:Ee});const a=Et(),{t:p}=Ke();qt();const c=w(),h=w(),g=w(),k=ht("viewerItemContainer"),m=w(!0),r=w(Math.max(s.index,0)+1),v=w(1),x=w(1),y=w(""),$=w(1),S=w(1),I=w(!1),E=w(!1),W=w(!1),Z=Te(()=>{var A,C;return((C=(A=g==null?void 0:g.value)==null?void 0:A.previewInstRef)==null?void 0:C.previewSrc)===y.value}),b=Te(()=>r.value<s.length),L=Te(()=>r.value>1),q=w("viewer-item-init"),H=w(0),se=w(!0);w({width:"auto",height:"auto"});const R=w(!1);De(()=>{document.body.addEventListener("keydown",re),document.body.addEventListener("keydown",ee),z(r.value-1),P()}),_t(()=>{clearTimeout(Ae),document.body.removeEventListener("keydown",re),document.body.removeEventListener("keydown",ee),R.value=!0}),kn(()=>{URL.revokeObjectURL(s.url),URL.revokeObjectURL(s.originalUrl)});let Ae=-1;xe(r,(A,C)=>{r.value<1||r.value>s.length||(clearTimeout(Ae),A>C?q.value="viewer-item-next":q.value="viewer-item-prev",H.value=m.value?H.value:~H.value,Ae=setTimeout(()=>{s.index!==r.value-1&&(se.value=!1,z(r.value-1))},50))});let ie="",ye="";xe(()=>s.url,()=>{var U,pe;let A="";s.index===0&&m.value?(m.value=!1,r.value=1,A=s.url):s.index===r.value-1?(m.value=!1,I.value=!1,A=s.url):(URL.revokeObjectURL(s.url),URL.revokeObjectURL(s.originalUrl));const C=ie,V=ye;if(URL.revokeObjectURL(C),URL.revokeObjectURL(V),ie=s.url,ye=s.originalUrl,A){try{(pe=(U=g.value)==null?void 0:U.previewInstRef)!=null&&pe.displayed&&(Z.value?g.value.previewInstRef.setPreviewSrc(A):g.value.previewInstRef.setPreviewSrc(s.originalUrl))}catch{}y.value=A}},{immediate:!0});function z(A){I.value=!0,E.value=!1,W.value=!1,lt(()=>o("demand-image",A))}function P(){let A=k.value.$el,C=0,V=0,U=0,pe=0,he=0;const Pe=ke=>{C=ke.touches[0].pageX,V=ke.touches[0].pageY,he=Date.now()};A.addEventListener("touchstart",Pe);const Se=ke=>{U=ke.touches[0].pageX,pe=ke.touches[0].pageY,We()};window.addEventListener("touchmove",Se);const X=()=>{We();const ke=U-C,Ye=Math.abs(ke),Xe=pe-V,Tt=Math.abs(Xe);Ye<Tt||Ye<20||G(ke>0?-1:1)};window.addEventListener("touchend",X);const We=()=>{const ke=Date.now();ke-he>500&&(C=U,V=pe),he=ke};_t(()=>{A.removeEventListener("touchstart",Pe),window.removeEventListener("touchmove",Se),window.removeEventListener("touchend",X),A=null})}function ee(A){var C,V,U,pe;if(A.key==="Escape")try{(V=(C=g.value)==null?void 0:C.previewInstRef)!=null&&V.displayed&&(A.stopPropagation(),(pe=(U=g.value)==null?void 0:U.previewInstRef)==null||pe.toggleShow(!1))}catch{}}function re(A){var C,V;switch(A.key){case"ArrowRight":case"PageDown":case"ArrowDown":G(1);break;case"ArrowLeft":case"PageUp":case"ArrowUp":G(-1);break;case"Home":r.value=1;break;case"End":r.value=s.length;break;case" ":case"Enter":ce();break;default:return}A.stopPropagation(),(V=(C=g.value)==null?void 0:C.previewInstRef)!=null&&V.displayed&&A.preventDefault()}function ue({width:A,height:C}){v.value=A,x.value=C,E.value=!0}function me({width:A,height:C}){$.value=A,S.value=C,W.value=!0}function N(){Z.value?c.value.download():h.value.download()}async function M(A){try{const C=await fetch(A).then(U=>U.blob()).then(U=>new Promise(pe=>{const he=new FileReader;he.onload=pe,he.readAsDataURL(U)})).then(U=>U.target.result);navigator.clipboard.writeText(C);const V=U=>{U.target.focus(),U.target.select()};a.info({title:p("copiedDataURLDialogTitle"),content:()=>J("div",[J("div",p("copiedDataURLMessage")),J(An,{onFocus:V,onClick:V,type:"textarea",value:C,readonly:!0,size:"small",style:{marginTop:"2em",fontSize:"x-small"}})]),positiveText:"OK"})}catch{a.error({title:"failed to copy Data URL",content:"could not copy Data URL",positiveText:"OK"})}}function G(A){A>0&&r.value<s.length?r.value++:A<0&&r.value>1&&r.value--}let F="";const ce=()=>{var C,V,U,pe,he,Pe;F=(U=window.getComputedStyle((V=(C=g==null?void 0:g.value)==null?void 0:C.previewInstRef)==null?void 0:V.previewRef))==null?void 0:U.transform;const A=Z.value;(Pe=(he=(pe=g==null?void 0:g.value)==null?void 0:pe.previewInstRef)==null?void 0:he.handleSwitchNext)==null||Pe.call(he),lt(()=>{var Se,X,We;Z.value===A&&((We=(X=(Se=g==null?void 0:g.value)==null?void 0:Se.previewInstRef)==null?void 0:X.handleSwitchNext)==null||We.call(X))})};function ae(){try{lt(()=>g.value.previewInstRef.previewRef.style.transform=F)}catch{}}function ve({nodes:A}){const C=J(Kt,{color:Z.value?"green":"gray",offset:[-20,-12],value:(Z.value?p("status.Converted"):p("status.Original"))+" "+r.value},()=>J(ze,{round:!0,onClick(){ce()},textColor:"white",size:"small",style:{marginLeft:"4px"}},{icon:()=>J(Z.value?za:Aa)}));A.next=J(ze,{onClick(){G(1)},disabled:!b.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>J(rn)}),A.prev=J(ze,{onClick(){G(-1)},disabled:!L.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>J(Ta)});try{const V=A.download.children;V.default=()=>p("save");const U=V.trigger();U.props.onClick=N,V.trigger=()=>U}catch{}return[C,...Object.values(A)]}function de(){c.value.openPreview()}function Ee(){}return(A,C)=>{const V=_e,U=$e,pe=zn,he=ut,Pe=Gt,Se=wa;return O(),te(U,{justify:"center",align:"center",vertical:"",style:le({visibility:m.value?"hidden":"visible"}),class:"body",ref:"body"},{default:t(()=>[n(Se,{ref_key:"nImageGroupRef",ref:g,"show-toolbar-tooltip":"","render-toolbar":ve,onPreviewNext:ae},{default:t(()=>[n(U,{wrap:!1,align:"center",justify:"center"},{default:t(()=>[n(e(ze),{onClick:C[0]||(C[0]=X=>G(-1)),disabled:!e(L),block:"",class:wt({"thumb-arrow":!0,pale:!e(L)}),title:A.$t("Prev")},{icon:t(()=>[n(V,{size:"30"},{default:t(()=>[n(e(ya))]),_:1})]),_:1},8,["disabled","class","title"]),n(U,{justify:"center",ref_key:"viewerItemContainer",ref:k,class:"viewer-item-container"},{default:t(()=>[n(qe,{name:q.value},{default:t(()=>[(O(),te(U,{vertical:"",key:H.value,"_v-show":"viewerItemVisibility"},{default:t(()=>[n(U,{align:"center",wrap:!1},{default:t(()=>[n(U,{vertical:"",align:"center"},{default:t(()=>[n(U,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(U,{align:"center",justify:"center",vertical:"",class:"original-thumb"},{default:t(()=>[_("a",{href:A.originalUrl,onClick:C[4]||(C[4]=Ge(X=>{h.value.openPreview()},["prevent"])),download:A.originalName,title:A.originalName,class:"imglink"},[n(U,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(pn,{ref:X=>{X!=null&&X.active&&(h.value=X)},src:A.originalUrl,width:1,"max-width":1,"max-height":1,loading:I.value,"file-name":A.originalName,"allow-next":r.value<s.length,"allow-prev":r.value>1,onLoad:me,onNext:C[1]||(C[1]=X=>G(1)),onPrev:C[2]||(C[2]=X=>G(-1)),hidden:!0},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(U,{vertical:"",align:"center"},{default:t(()=>[n(U,{class:"imglink-label"},{default:t(()=>[T(d(e(p)("status.Original")),1)]),_:1}),n(U,{justify:"center",class:"img-size",wrap:!1},{default:t(()=>[_("span",Yl,d(W.value?$.value:"?"),1),C[13]||(C[13]=T(" × ")),_("span",Xl,d(W.value?S.value:"?"),1)]),_:1}),n(U,{justify:"center"},{default:t(()=>[C[3]||(sn(-1,!0),(C[3]=n(U,null,{default:t(()=>[T(d(W.value?e(Je)(s.originalSize,0):"?"),1)]),_:1})).cacheIndex=3,sn(1),C[3])]),_:1})]),_:1})]),_:1})],8,Kl)]),_:1}),n(U,{style:{margin:"1em"},class:"original-thumb"},{default:t(()=>[n(V,{size:"20",color:"silver"},{default:t(()=>[n(e(rn))]),_:1})]),_:1}),_("a",{href:y.value,onClick:C[5]||(C[5]=Ge(X=>de(),["prevent"])),download:s.name,title:s.name,class:"imglink"},[n(U,{vertical:"",align:"center",justify:"center"},{default:t(()=>[n(U,{class:"imglink-label"},{default:t(()=>[T(d(e(p)("status.Converted")),1)]),_:1}),n(U,{vertical:"",align:"center",justify:"center",size:0},{default:t(()=>[n(U,{justify:"center"},{default:t(()=>{var X;return[n(U,{wrap:!1,style:le((X=s.variousInfo)!=null&&X.shrinked?{color:"blue"}:{}),class:"img-size"},{default:t(()=>[_("span",Jl,d(E.value?v.value:"?"),1),C[14]||(C[14]=T(" × ")),_("span",es,d(E.value?x.value:"?"),1)]),_:1},8,["style"])]}),_:1})]),_:1}),n(U,{justify:"center"},{default:t(()=>[T(d(E.value?e(Je)(s.size,0):"?"),1)]),_:1})]),_:1})],8,Ql)]),_:1}),n(U,{ref:"fileNameContainer",align:"center",class:"pathbox",title:s.name},{default:t(()=>[n(pe,{"x-scrollable":!0,trigger:"hover",style:{"font-size":"smaller",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},{default:t(()=>[T(d(E.value?s.name:"?"),1)]),_:1})]),_:1},8,["title"])]),_:1}),n(U,{vertical:""},{default:t(()=>[n(pn,{ref:X=>{X!=null&&X.active&&(c.value=X)},src:y.value,width:142,"max-width":140,"max-height":100,loading:I.value,"file-name":s.name,"allow-next":r.value<s.length,"allow-prev":r.value>1,onLoad:ue,onNext:C[6]||(C[6]=X=>G(1)),onPrev:C[7]||(C[7]=X=>G(-1))},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(U,{justify:"center",wrap:!0},{default:t(()=>[n(he,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[_("a",{href:s.url,ref:"saveImg",target:"_blank",download:s.name},[n(e(ze),{disabled:!E.value,round:"",size:"tiny"},{default:t(()=>[T(d(A.$t("save")),1)]),_:1},8,["disabled"])],8,ts)]),default:t(()=>[T(" "+d(A.$t("save")),1)]),_:1}),n(he,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(e(ze),{disabled:!E.value,onClick:C[8]||(C[8]=X=>M(s.url)),round:"",size:"tiny"},{default:t(()=>C[15]||(C[15]=[T("DataURL")])),_:1},8,["disabled"])]),default:t(()=>[T(" "+d(A.$t("convertedImageDataUrlTooltip")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1},8,["name"])]),_:1},512),n(e(ze),{onClick:C[9]||(C[9]=X=>G(1)),disabled:!e(b),block:"",class:wt({"thumb-arrow":!0,next:!0,pale:!e(b)}),title:A.$t("Next")},{icon:t(()=>[n(V,{size:"30"},{default:t(()=>[n(e(ba))]),_:1})]),_:1},8,["disabled","class","title"])]),_:1}),Ne(n(U,{style:{width:"100%"},wrap:!1},{default:t(()=>[n(Pe,{value:r.value,"onUpdate:value":C[10]||(C[10]=X=>r.value=X),tooltip:!1,step:1,min:1,max:s.length,onKeydown:C[11]||(C[11]=Ge(()=>{},["prevent","stop"])),class:"index-slider"},null,8,["value","max"]),n(U,{class:"index",align:"center",justify:"center",wrap:!1,size:3},{default:t(()=>[n(U,null,{default:t(()=>[T(d(e(p)("status.index"))+":",1)]),_:1}),n(U,{justify:"end",align:"center",class:"counter"},{default:t(()=>[T(d(r.value),1)]),_:1}),n(U,null,{default:t(()=>C[16]||(C[16]=[T("/")])),_:1}),n(U,{justify:"start",align:"center",class:"counter"},{default:t(()=>[T(d(s.length),1)]),_:1})]),_:1})]),_:1},512),[[Re,!A.isSingle]]),n(e(ze),{onClick:C[12]||(C[12]=X=>{o("close")}),circle:"",size:"tiny",color:"silver",class:"close-button",title:A.$t("close")},{icon:t(()=>[n(V,{size:"12"},{default:t(()=>[n(e(ka))]),_:1})]),_:1},8,["title"])]),_:1},512)]),_:1},8,["style"])}}}),os=je(ns,[["__scopeId","data-v-6fb66d9e"]]),as={class:"status-table"},ls={class:"started"},ss={class:"completed"},is={style:{"font-size":"medium"}},rs={class:"total"},us={style:{"font-size":"medium"}},ds=be({__name:"status.center-column",props:{processing:{type:Boolean},interval:{},statusColor:{},success:{},successTo:{},successFrom:{},index:{},length:{},failure:{},retried:{},successPercTo:{},successPercFrom:{}},setup(l){const i=l,u=qt(),s=w(u.value.successColor),o=w(!1);return xe(()=>i.processing,a=>{a||(i.success===i.length?o.value=!0:s.value=u.value.errorColor)}),(a,p)=>{const c=_e,h=Ia,g=$e,k=ut,m=Tn;return O(),te(m,{type:"multiple-circle","stroke-width":2,percentage:[a.successTo/a.length*100|0,a.index/a.length*100|0],color:[e(u).successColor,a.statusColor],"rail-style":[{stroke:e(s),opacity:.3}]},{default:t(()=>[n(g,{vertical:"",align:"center",justify:"center",size:0,style:{"font-family":"v-mono","white-space":"nowrap"},wrap:!1,"wrap-item":!1},{default:t(()=>[n(g,{size:0,align:"center",style:le({color:a.processing?a.statusColor:e(s),fontSize:"1.4em"}),wrap:!1},{default:t(()=>[e(o)?(O(),te(c,{key:0},{default:t(()=>[n(e(xa))]),_:1})):ge("",!0),n(h,{duration:a.interval*3|0,from:a.successPercFrom|0,to:a.successPercTo|0,active:!0},null,8,["duration","from","to"]),p[0]||(p[0]=T("% "))]),_:1},8,["style"]),_("table",as,[_("tbody",null,[_("tr",ls,[_("td",null,d(a.$t("status.started"))+":",1),_("td",null,[n(k,{trigger:"hover",style:le({color:e(u).infoColor}),placement:"left"},{trigger:t(()=>[_("span",{style:le({fontSize:"xx-small",color:a.statusColor,lineHeight:"0"})},d(a.index.toLocaleString("en-us")),5)]),default:t(()=>[T(" "+d(a.$t("status.progressStarted"))+" ("+d(a.index.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"]),a.retried>0?(O(),te(k,{key:0,trigger:"hover",style:le({color:e(u).warningColor}),placement:"left"},{trigger:t(()=>[_("span",{style:le({fontSize:"xx-small",color:e(u).warningColor,lineHeight:"0"})}," ("+d(a.retried.toLocaleString("en-us"))+") ",5)]),default:t(()=>[T(" "+d(a.$t("status.progressRetries"))+" ("+d(a.retried.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):ge("",!0),a.failure>0?(O(),te(k,{key:1,trigger:"hover",style:le({color:e(u).errorColor}),placement:"left"},{trigger:t(()=>[_("span",{style:le({fontSize:"xx-small",color:e(u).errorColor,lineHeight:"0"})}," ("+d(a.failure.toLocaleString("en-us"))+") ",5)]),default:t(()=>[T(" "+d(a.$t("status.progressErrors"))+" ("+d(a.failure.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):ge("",!0)])]),_("tr",ss,[_("td",null,d(a.$t("status.success"))+":",1),_("td",is,[n(k,{trigger:"hover",duration:0,delay:0,style:le({color:e(u).successColor}),placement:"bottom"},{trigger:t(()=>[_("span",{style:le({color:e(u).successColor})},[n(h,{duration:a.interval*3|0,from:a.successFrom,to:a.successTo,active:!0,"show-separator":!0},null,8,["duration","from","to"])],4)]),default:t(()=>[T(" "+d(a.$t("status.progressSuccess"))+" ("+d(a.successTo.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])])]),_("tr",rs,[_("td",null,d(a.$t("status.files"))+":",1),_("td",us,[n(k,{trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:t(()=>[T(d(a.length.toLocaleString("en-us")),1)]),default:t(()=>[T(" "+d(a.$t("status.progressTotal"))+" ("+d(a.length.toLocaleString("en-us"))+") ",1)]),_:1})])])])])]),_:1})]),_:1},8,["percentage","color","rail-style"])}}}),cs=je(ds,[["__scopeId","data-v-6a54ac11"]]),ps={key:0},fs={style:{"font-size":"smaller"}},gs={key:0,class:"log-table",ref:"table"},ms={class:"log-tr"},vs={class:"log-th"},hs={class:"log-th"},_s={style:{"min-width":"7em"},class:"log-th"},ws={style:{"padding-left":"2em"},class:"log-th"},ys={class:"log-td"},bs={class:"log-td"},ks={class:"log-td"},zs={class:"log-td"},As={style:{margin:"1px"}},Ts=["href","download","onClick"],xs={key:0,style:{position:"relative"}},Is=["href","download"],Ss=["href","download"],Cs={key:0,style:{margin:"1px"}},Ls=["href","download","onClick"],$s=99999,Es=250,Fs=100,Us=be({__name:"status",props:{processing:{type:Boolean},status:{},interval:{}},emits:["all-zips-clicked","demand-zip-errors","demand-image"],setup(l,{expose:i,emit:u}){const s=Et(),{t:o}=Ke(),a=qt(),p={W:160,H:80},c=l,h=u,g=w(!1),k=w([]),m=w(!1);ht("table");const r=w([]),v=w([]),x=w([0,0]),y=w([0,0]),$=w([0,0]),S=w([0,0]),I=w([0,0]),E=w([0,0]),W=w(0),Z=w(0),b=w([0,0]),L=w(a.value.infoColor),q=w("#000000"),H=w("#000000"),se=w(0),R=w(0),Ae=w(""),ie=w("00:00:00");w(""),w("");const ye=w(void 0),z=w(!1),P=w(!0),ee=w(!1),re=Te(()=>z.value?N.value:me.value),ue=w("16em"),me=w(5),N=w(1e3),M=w(!0),G=w(!1),F=$t({name:"",originalName:"",size:0,url:"",originalUrl:"",originalSize:0,dataUrl:"",index:0,various:{shrinked:!1}}),ce=ht("body"),ae=w(null),ve=w(null),de=w(),Ee=ht("imageViewer");i({cleanup:nn}),De(()=>{xe(c.status,()=>U(),{deep:!1}),xe([ve,M],()=>{if(!ve.value||!M.value)return;const{width:Ie,height:Fe}=Gn(ve.value,{width:p.W,height:p.H});ae.value.width=Ie,ae.value.height=Fe,ae.value.style.width=Ie+"px",ae.value.style.height=Fe+"px",ve.value instanceof HTMLImageElement?ae.value.getContext("2d").drawImage(ve.value,0,0,Ie,Fe):(ae.value.getContext("bitmaprenderer").transferFromImageBitmap(ve.value),ve.value.close(),ve.value=null,c.status.thumbnail=null)});let f=0;const j=()=>{if(f)return;const Ie=Date.now();ie.value="00:00:00",f=window.setInterval(()=>{const Fe=(Date.now()-Ie)/1e3;ie.value=`${String(Fe/3600|0).padStart(2,"0")}:${String(Fe/60%60|0).padStart(2,"0")}:${String(Fe%60|0).padStart(2,"0")}`},300)};j(),xe(()=>c.processing,(Ie,Fe)=>{Ie?(j(),k.value=[],g.value=!1,m.value=!1,r.value=[],v.value=[]):(clearInterval(f),f=0),c.processing||he()});const K=un();let Y;const ne=()=>{clearTimeout(Y),Y=setTimeout(()=>{if(!M.value||Qe)return;const Ie=de.value.$parent.$el.offsetHeight,Fe=window.innerHeight-K.parent.parent.vnode.el.offsetHeight-8;ue.value=Math.max(Ie+Fe,Es)+"px"},100)};ne(),window.addEventListener("resize",ne);const Me=new ResizeObserver(ne);Me.observe(K.parent.parent.vnode.el);let Qe=!1;_t(()=>{Qe=!0,Me.disconnect(),clearInterval(f),clearTimeout(Y),clearTimeout(V),clearTimeout(ke),window.removeEventListener("resize",ne)})}),_t(()=>{nn()}),xe([()=>c.status.zips.length,()=>c.status.failedZips.length],()=>{const f=c.status;{r.value.length>f.zips.length&&(r.value.length=0);let j=0;const K=f.zips.length===1&&f.zippedTotalCount===f.length;for(let Y=r.value.length;Y<f.zips.length;Y++){const ne=f.zips[Y],Me=f.baseZipName+(K?"":"-"+String(Y+1).padStart(2,"0"))+".zip";j+=ne.size,r.value[Y]={url:ne.url,size:ne.size,number:K?0:Y+1,sizeByUnit:Je(ne.size),name:Me,count:ne.count,clicked:!1}}}{v.value.length>f.failedZips.length&&(v.value.length=0);let j=0;const K=f.failedZipDone&&f.failedZips.length===1;for(let Y=v.value.length;Y<f.failedZips.length;Y++){const ne=f.failedZips[Y],Me=f.baseZipName+"-error"+(K?"":"-"+String(Y+1).padStart(2,"0"))+".zip";j+=ne.size,v.value[Y]={url:ne.url,size:ne.size,number:K?0:Y+1,sizeByUnit:Je(ne.size),name:Me,count:ne.count,clicked:!1}}}});const A=c.interval||100;let C=!1,V=0;function U(){if(C)return;if(V){C=!0;return}V=window.setTimeout(()=>{V=0,C&&(C=!1,U())},A);const f=c.status;g.value=f.length>=2,y.value[1]=y.value[0],y.value[0]=f.index,$.value[1]=$.value[0],$.value[0]=f.success,S.value[1]=S.value[0],S.value[0]=f.failure,I.value[1]=I.value[0],I.value[0]=f.done,E.value[1]=E.value[0],E.value[0]=f.converted,W.value=f.retried,Z.value=f.length,b.value[1]=b.value[0],b.value[0]=f.zippedTotalCount,se.value=f.inputTotalSize,R.value=f.outputTotalSize;const j=R.value-se.value;Ae.value=(j>=0?"+ ":"")+Je(j);const K=R.value/se.value,Y=(256|Math.min(255,Math.max(0,K-1.5)*255|0)).toString(16).substring(1);q.value="#"+Y+"0000";const ne=1024*1024,Me=(256|Math.min(255,Math.max(0,j/1024/ne)*255|0)).toString(16).substring(1);if(H.value="#"+Me+"0000",x.value[1]=x.value[0],x.value[0]=$.value[0]/Z.value*100,M.value||!c.processing){const Qe=f.logs.slice(-99999);k.value.push(...Qe);const Ie=k.value.length-$s;Ie>0&&k.value.splice(0,Ie),P.value&&Qe.length&&Xe(),k.value.length>N.value&&(N.value*=2)}f.logs.length=0,ve.value=f.thumbnail,c.processing&&(L.value=S.value[0]?a.value.errorColor:W.value?a.value.warningColor:a.value.infoColor),f.convertedImageUrl!==F.url&&(F.url=f.convertedImageUrl,F.name=f.convertedImageName,F.dataUrl=f.convertedImageDataUrl,F.size=f.convertedImageSize||f.outputTotalSize,F.originalSize=f.convertedImageOrgSize,F.originalName=f.convertedImageOrgName,F.index=f.convertedImageIndex,F.originalUrl=f.convertedImageOrgUrl,F.various={shrinked:f.convertedImageShrinked})}let pe=un();function he(){c.status,L.value=c.status.success===c.status.length?a.value.successColor:a.value.errorColor,z.value||(M.value=!1,z.value=!0),G.value=!0,M.value&&(setTimeout(Xe,500),pe.proxy.$forceUpdate(),pe=null),U()}const Pe=Te(()=>[{key:"open",label:o("status.openFailedList"),icon:()=>J(_e,()=>J(xn)),onSelect(){We()}},{key:"download",label:o("status.saveFailedList"),icon:()=>J(_e,()=>J(Sa)),onSelect(){We(!0)}},{key:"zip",label:`${o("status.zipFailedList")}`+(c.status.failedZipDone?`(✔${o("status.done")})`:""),icon:()=>J(vt,{show:m.value&&!c.status.failedZipDone,size:"small"},()=>J(_e,()=>J(jt))),disabled:m.value,onSelect(f){return m.value=!0,h("demand-zip-errors"),!1}}]);function Se(f,j=!1){const{url:K,name:Y}=f;if(j){const ne=document.createElement("a");ne.href=K,ne.download=Y,ne.click()}f.clicked||(f.clicked=!0,c.processing||r.value.every(ne=>ne.clicked)&&h("all-zips-clicked"))}async function X(){if(g.value){if(r.value.length>=2&&!await new Promise((K,Y)=>s.warning({title:o("Download"),content:o("status.confirmDownloadMessage",[r.value.length]),positiveText:"OK",negativeText:o("cancel"),onPositiveClick:()=>K(!0),onNegativeClick:()=>Y()})))return;const f=r.value;for(const j of f)Se(j,!0)}else Ee.value.download()}function We(f=!1){const j=new Blob([c.status.unconvertedListText],{type:"text/plain;charset=utf8"}),K=URL.createObjectURL(j),Y=document.createElement("a");Y.href=K,Y.target="_blank",f&&(Y.download=c.status.baseZipName+"-error.txt"),Y.click()}let ke=0,Ye=!1;function Xe(f=!1){if(!Ye){if(ke){Ye=!0;return}lt(()=>{!f&&(!z.value||!P.value)||(de.value.scrollTo({behavior:"instant",top:k.value.length*50}),ke=window.setTimeout(()=>{ke=0,Ye&&(Ye=!1,Xe())},Fs))})}}const Tt=w(!1);function nn(){Tt.value=!0,URL.revokeObjectURL(F.url),URL.revokeObjectURL(F.originalName),F.originalUrl="",F.url="",F.index=0,c.status.logs.length=0,k.value.length=0,v.value.length=0,r.value.length=0,z.value=!1,G.value=!1}return(f,j)=>{const K=$e,Y=Ca,ne=Cn,Me=we,Qe=Vt,Ie=Sn,Fe=In,Ut=Ht,dt=ze,on=Tn,ot=ut,ua=Hl,an=Kt,da=La;return O(),te(K,{ref_key:"body",ref:ce,vertical:"",justify:"center"},{default:t(()=>[n(K,{justify:"center",align:"center",wrap:!1,style:{"white-space":"nowrap"}},{default:t(()=>[n(K,{vertical:"",justify:"center",class:"left-column"},{default:t(()=>[n(Y,{"tabular-nums":"",label:f.$t("status.elapsedTime")},{default:t(()=>[n(K,null,{default:t(()=>[T(d(e(ie)),1)]),_:1})]),_:1},8,["label"]),n(Y,{"tabular-nums":"",label:f.$t("status.multiThreading")},{default:t(()=>[n(K,{style:le({color:c.status.threads?"":"red",fontSize:"smaller"})},{default:t(()=>[T(d(c.status.threads?f.$rt("{n} @:threads",c.status.threads):f.$t("disabled")),1)]),_:1},8,["style"])]),_:1},8,["label"]),n(Y,{"tabular-nums":"",label:f.$t("status.outputSettings")},{default:t(()=>[n(K,{vertical:"",justify:"end",style:{"font-size":"smaller","line-height":"1em"}},{default:t(()=>[_("div",null,d(f.$t("settings.imageType"))+": "+d(c.status.type),1),f.status.shrink?(O(),oe("div",ps,[T(d(f.$t("status.Shrinking"))+": ",1),_("span",fs,d(f.status.shrink[0])+"×"+d(f.status.shrink[1]),1)])):ge("",!0),_("div",null,"Zip: "+d(c.status.zipSize)+"MB",1)]),_:1})]),_:1},8,["label"])]),_:1}),n(cs,{index:e(y)[0],success:f.status.success,length:f.status.length,"success-to":e($)[0],"success-from":e($)[1],failure:e(S)[0],"success-perc-to":e(x)[0],"success-perc-from":e(x)[1],retried:e(W),processing:f.processing,interval:e(A),"status-color":e(L),class:"center-column"},null,8,["index","success","length","success-to","success-from","failure","success-perc-to","success-perc-from","retried","processing","interval","status-color"]),n(K,{vertical:"",style:{height:"100%"},justify:"center"},{default:t(()=>[n(Y,{"tabular-nums":"",label:f.$t("status.inputSize")},{default:t(()=>[n(K,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[T(d((e(se)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(Y,{"tabular-nums":"",label:f.$t("status.outputSize")},{default:t(()=>[n(K,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[T(d((e(R)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(Y,{"tabular-nums":"",label:f.$t("status.outInRate")},{default:t(()=>[n(K,{vertical:"",align:"end",justify:"start",style:{"font-size":"xx-small","font-family":"v-mono","line-height":"50%"}},{default:t(()=>[_("span",{style:le({color:e(q),fontSize:"larger"})},"× "+d((e(R)/e(se)||1).toFixed(2)),5),_("span",{style:le({color:e(H)})},"("+d(e(Ae))+")",5)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1}),n(Fe,{"display-directive":"show","trigger-areas":["arrow","main"],"default-expanded-names":"log-collapse","expanded-names":e(M)?["log-collapse"]:[],onUpdateExpandedNames:j[7]||(j[7]=D=>{M.value=!!String(D)})},{default:t(()=>[n(Ie,{title:"Log",name:"log-collapse",style:{"white-space":"nowrap"}},{header:t(()=>[n(K,{align:"center",wrap:!1},{default:t(()=>[T(d(f.$t("status.log")),1),Ne(n(e(vt),{size:16},null,512),[[Re,f.processing&&!e(M)]])]),_:1})]),"header-extra":t(()=>[Ne(n(K,{align:"center",wrap:!1},{default:t(()=>[n(Pt,null,{default:t(()=>[n(ne,{key:"a",checked:e(ee),"onUpdate:checked":j[0]||(j[0]=D=>Ze(ee)?ee.value=D:null),size:"small",style:{"font-size":"smaller"},class:"hide-mobile"},{default:t(()=>[T(d(f.$t("status.filterSuccess")),1)]),_:1},8,["checked"]),Ne(n(ne,{key:"b",checked:e(P),"onUpdate:checked":[j[1]||(j[1]=D=>Ze(P)?P.value=D:null),j[2]||(j[2]=D=>D&&Xe(!0))],size:"small",style:{"font-size":"smaller"}},{default:t(()=>[T(d(f.$t("status.autoScroll")),1)]),_:1},8,["checked"]),[[Re,e(z)]])]),_:1}),n(Me,{style:{"max-width":"30em"}},{trigger:t(()=>[n(ne,{size:"small",checked:e(z),"onUpdate:checked":[j[3]||(j[3]=D=>Ze(z)?z.value=D:null),j[4]||(j[4]=D=>{P.value=D,Xe(!0)})],style:{"font-size":"smaller"}},{default:t(()=>[T(d(f.$t("status.expandLog")),1)]),_:1},8,["checked"])]),default:t(()=>[T(d(f.$t("status.expandLogTooltip")),1)]),_:1})]),_:1},512),[[Re,e(M)]])]),default:t(()=>[n(K,{wrap:!1,class:wt({"log-container":1,"expand-log":e(z)}),align:"stretch",style:le(e(z)?{height:e(ue),maxHeight:e(ue)}:{})},{default:t(()=>[n(e(zn),{ref_key:"scrollref",ref:de,"x-scrollable":!0,onMouseup:j[5]||(j[5]=D=>P.value=!1),onWheel:j[6]||(j[6]=D=>P.value=!1),trigger:"none",style:le([{"z-index":"2","padding-right":"10px","min-height":"7em"},{maxHeight:e(ue)}]),size:50},{default:t(()=>[e(M)?(O(),oe("table",gs,[_("tbody",null,[_("tr",ms,[_("th",vs,d(f.$t("status.table.core")),1),_("th",hs,d(f.$t("status.table.index")),1),_("th",_s,d(f.$t("status.table.status")),1),_("th",ws,d(f.$t("status.table.details")),1)]),(O(!0),oe(Le,null,mt((e(ee)?e(k).filter(D=>!D.completed):e(k)).slice(-e(re)),({index:D,key:at,command:He,path:Ot,core:ln})=>(O(),oe("tr",{key:at,class:"log-tr"},[_("td",ys,d(ln>=0?ln+1:"-"),1),_("td",bs,d(D+1),1),_("td",ks,d(He),1),_("td",zs,d(Ot),1)]))),128))])],512)):ge("",!0)]),_:1},8,["style"]),n(K,{style:le([{"align-self":"center",position:"absolute","z-index":"0","margin-top":"0.5em",right:"0.1em","line-height":"0px"},{width:p.W+"px",height:p.H+"px"}]),justify:"center",align:"center"},{default:t(()=>[n(e(vt),{size:"small",show:f.processing},{default:t(()=>[c.status.thumbnail===void 0?(O(),te(Qe,{key:0,description:"EMPTY"})):ge("",!0),Ne(_("canvas",{ref_key:"thumbcanvas",ref:ae,width:"106",height:"80",style:le({border:"1px solid gray",filter:f.processing?"":"opacity(0.35)"})},null,4),[[Re,c.status.thumbnail!==void 0]])]),_:1},8,["show"])]),_:1},8,["style"])]),_:1},8,["class","style"])]),_:1})]),_:1},8,["expanded-names"]),n(Ut,{style:{margin:"0.2em"}}),n(K,{wrap:!1,vertical:""},{default:t(()=>[n(K,{justify:"center",align:"center",vertical:""},{default:t(()=>[n(qe,null,{default:t(()=>[e(G)?e(G)&&f.status.success>0&&!e(Tt)?(O(),te(os,{key:1,ref_key:"imageViewer",ref:Ee,url:e(F).url,size:e(F).size,"original-url":e(F).originalUrl,"original-size":e(F).originalSize,name:e(F).name,originalName:e(F).originalName,length:c.status.success,index:e(F).index,"various-info":e(F).various,"is-single":!e(g),onDemandImage:j[9]||(j[9]=D=>h("demand-image",D)),onClose:j[10]||(j[10]=D=>G.value=!1)},null,8,["url","size","original-url","original-size","name","originalName","length","index","various-info","is-single"])):ge("",!0):(O(),te(dt,{key:0,tertiary:"",type:"success",size:"small",disabled:!(f.status.success>0),onClick:j[8]||(j[8]=D=>G.value=!0)},{default:t(()=>[T(d(f.$t("status.browseConvertedImages")),1)]),_:1},8,["disabled"]))]),_:1})]),_:1}),n(K,{justify:"center"},{default:t(()=>[Ne(n(K,{vertical:"",align:"center"},{default:t(()=>[n(ot,{placement:"left"},{trigger:t(()=>[n(on,{type:"line","indicator-placement":"inside",color:"lime","rail-color":"rgba(99, 255, 99, 0.5)","indicator-text-color":e(b)[0]===e(Z)?"white":"green",processing:f.processing,percentage:e(b)[0]/e(Z)*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[_("span",As,d(e(b)[0]/e(Z)*100|0)+"% "+d(f.$t("status.zipped"))+" ("+d(e(b)[0])+"/"+d(e(E)[0])+")",1)]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[T(" "+d(f.$t("status.zippingProgress"))+" ("+d(e(b)[0]/e(Z)*100|0)+"%) ",1)]),_:1}),n(qe,{name:"zipcontainer"},{default:t(()=>[e(r).length>=1||c.processing?(O(),te(Pt,{key:0,name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(O(!0),oe(Le,null,mt(e(r),(D,at)=>(O(),oe("span",{key:at},[n(ot,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[_("a",{href:D.url,download:D.name,class:"in-button-anchor",onClick:He=>Se(D)},[n(dt,{class:"zip-button",size:"tiny",color:D.clicked?"#050":"lime","text-color":D.clicked?"gray":"white",onClick:Ge(He=>Se(D),["stop"]),round:""},{default:t(()=>[n(e(_e),{size:"tiny"},{default:t(()=>[n(e(jt))]),_:1}),T("ZIP"+d(D.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Ts)]),default:t(()=>[_("div",{style:le({color:e(a).successColor})},[_("div",null,"ZIP "+d(D.number||"")+" ("+d(f.$t("success"))+")",1),_("div",null,d(D.name),1),_("div",null,d(D.sizeByUnit),1),_("div",null,d(f.$rt("{n} @:files",D.count)),1)],4)]),_:2},1024)]))),128))]),_:1})):ge("",!0)]),_:1})]),_:1},512),[[Re,e(g)]])]),_:1}),n(qe,null,{default:t(()=>[Ne(n(K,{justify:"center",align:"center"},{default:t(()=>[n(ot,{trigger:"hover",duration:0,delay:0,placement:"left",style:le({color:"white",backgroundColor:e(a).successColor}),"arrow-style":{backgroundColor:e(a).successColor}},{trigger:t(()=>[n(qe,{name:"save"},{default:t(()=>[e($)[0]>0?(O(),oe("span",xs,[n(an,{value:e(g)?e(b)[0].toLocaleString("en-us"):c.status.type.replace(/\(.+\)/,""),color:e(a).successColorHover,offset:[-20,-3]},{default:t(()=>[n(dt,{size:"medium",onClick:X,color:e(a).successColor,round:""},{default:t(()=>[e(g)?(O(),oe(Le,{key:0},[e(r).length?(O(),oe("a",{key:0,href:e(r)[0].url,download:e(r)[0].name,class:"in-button-anchor",onClick:j[11]||(j[11]=Ge(()=>{},["prevent"]))},[n(ua),T(" × "+d(e(r).length)+" "+d(f.$t("status.saveAll")),1)],8,Is)):ge("",!0)],64)):(O(),oe("a",{key:1,href:e(F).url,download:e(F).name,class:"in-button-anchor",onClick:j[12]||(j[12]=Ge(()=>{},["prevent"]))},[n(e(_e),{size:"tiny"},{default:t(()=>[n(e(Ln))]),_:1}),T(" "+d(f.$t("save")),1)],8,Ss))]),_:1},8,["color"])]),_:1},8,["value","color"])])):ge("",!0)]),_:1})]),default:t(()=>[f.status.length>=2?(O(),oe(Le,{key:0},[_("div",null,d(e(o)("success"))+": "+d(e(b)[0].toLocaleString()),1),_("div",null,d(e(o)("status.totalSize"))+": "+d(e(Je)(f.status.zippedTotalSize)),1),_("div",null,"ZIP × "+d(e(r).length),1),_("div",null,d(e(o)("status.saveAllZipsTooltip")),1)],64)):(O(),oe(Le,{key:1},[T(d(f.$t("status.downloadConvertedImage",e(r).length)),1)],64))]),_:1},8,["style","arrow-style"]),!f.processing&&f.status.success!==e(Z)?(O(),te(da,{key:0,options:e(Pe),onSelect:j[13]||(j[13]=(D,at)=>{var He;return(He=e(Pe).find(({key:Ot})=>D===Ot))==null?void 0:He.onSelect()}),"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start"},{default:t(()=>[n(ot,{show:e(ye),duration:0,delay:0,placement:"right",style:le({color:"white",backgroundColor:e(a).errorColor}),"arrow-style":{backgroundColor:e(a).errorColor}},{trigger:t(()=>[n(an,{value:f.status.unconvertedFileCount.toLocaleString(),color:e(a).errorColorHover,offset:[-0,-3]},{default:t(()=>[n(dt,{size:"small",color:e(a).errorColor},{default:t(()=>[n(e(_e),{size:"medium",style:{"vertical-align":"middle"}},{default:t(()=>[n(e($a))]),_:1})]),_:1},8,["color"])]),_:1},8,["value","color"])]),default:t(()=>[_("div",null,[_("div",null,d(e(o)("failed"))+": "+d(f.status.unconvertedFileCount.toLocaleString()),1),_("div",null,d(e(o)("status.totalSize"))+": "+d(e(Je)(f.status.unconvertedTotalSize)),1)])]),_:1},8,["show","style","arrow-style"])]),_:1},8,["options"])):ge("",!0)]),_:1},512),[[Re,!c.processing]])]),_:1}),n(qe,{name:"zipcontainer"},{default:t(()=>[Ne(n(K,{vertical:"",align:"center"},{default:t(()=>[n(ot,{placement:"left"},{trigger:t(()=>[n(on,{type:"line","indicator-placement":"inside",color:"red","rail-color":"rgba(255, 0, 0, 0.5)","indicator-text-color":f.status.failedFileZippedCount===f.status.unconvertedFileCount?"white":"#500",processing:e(m)&&!f.status.failedZipDone&&!f.status.failedToCreateFailedZip,percentage:f.status.failedFileZippedCount/f.status.unconvertedFileCount*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[f.status.failedToCreateFailedZip?(O(),oe("div",{key:1,style:le({color:e(a).errorColor})},d(f.$t("status.failureZippingFailedFiles")),5)):(O(),oe("span",Cs,d(f.status.failedFileZippedCount/f.status.unconvertedFileCount*100|0)+"% "+d(f.$t("status.zipped"))+" ("+d(f.status.failedFileZippedCount)+"/"+d(f.status.unconvertedFileCount)+")",1))]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[T(" "+d(f.$t("status.zippingProgress"))+" ("+d(f.status.failedFileZippedCount/f.status.unconvertedFileCount*100|0)+"%) ",1)]),_:1}),n(Pt,{name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(O(!0),oe(Le,null,mt(e(v),(D,at)=>(O(),oe("span",{key:at},[n(ot,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[_("a",{href:D.url,download:D.name,class:"in-button-anchor",onClick:He=>Se(D)},[n(dt,{class:"zip-button",size:"tiny",color:D.clicked?"#551122":"#F00","text-color":D.clicked?"gray":"white",onClick:Ge(He=>Se(D),["stop"]),round:""},{default:t(()=>[n(e(_e),{size:"tiny"},{default:t(()=>[n(e(Ea))]),_:1}),T("ZIP"+d(D.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Ls)]),default:t(()=>[_("div",{style:le({color:e(a).errorColor})},[_("div",null,"ZIP "+d(D.number||"")+" ("+d(f.$t("failed"))+")",1),_("div",null,d(D.name),1),_("div",null,d(D.sizeByUnit),1),_("div",null,d(f.$rt("{n} @:files",D.count)),1)],4)]),_:2},1024)]))),128))]),_:1})]),_:1},512),[[Re,e(m)]])]),_:1})]),_:1})]),_:1},512)}}}),Os=je(Us,[["__scopeId","data-v-d47951d5"]]),Ps=["innerHTML"],Ms=10,Ns=100,Rs=be({__name:"converter",props:It({input:{},format:{},quality:{},retainExtension:{type:Boolean},maxZipSizeMB:{},threads:{}},{showNote:{type:Boolean},showNoteModifiers:{}}),emits:It(["start","end"],["update:showNote"]),setup(l,{emit:i}){rt(nt);const{t:u}=Ke(),s=Et(),o=Fa(),a=Ua(),p=navigator.hardwareConcurrency,c=typeof OffscreenCanvas=="function",h=l,g=Ue(l,"showNote"),k=i,m=w(!1),r=w(!1),v=w(!1),x=w(!1),y=w(!1),$=w("initializing"),S=w("info"),I=$t(ye()),E=ht("stat"),W=w(0);let Z=!1,b=()=>{},L=0,q=!1;xe(()=>h.input,N=>{N!=null&&N.length&&P(N)}),xe(x,N=>{document.body.style.overflowY=N?"hidden":"auto"}),De(async()=>{await ue(),me()});async function H(){let N=!0;if(L>Ms*1e3&&!q&&I.success>0&&(N=!1,await new Promise(M=>{s.warning({title:u("confirmCloseDialogTitle"),autoFocus:!0,maskClosable:!1,positiveText:u("close"),negativeText:u("back"),onPositiveClick:()=>N=!0,onAfterLeave:M,content:u("confirmCloseDialog")})})),!N)return!1;a.destroyAll(),o.destroyAll(),x.value=!1,g.value=!1}function se(N){I.demandImage(N)}function R(){!r.value&&m.value?r.value=!0:H()}function Ae(){P(h.input)}let ie=w(()=>{});function ye(N){const M={logs:[],index:0,converted:0,success:0,failure:0,retried:0,done:0,length:0,zippedTotalCount:0,zippingErrorCount:0,zippedTotalSize:0,processing:!1,zips:[],inputTotalSize:0,outputTotalSize:0,thumbnail:null,baseZipName:"testzipname",type:"image/any",startedTime:Date.now(),convertedImageDataUrl:"",convertedImageName:"",convertedImageUrl:"",convertedImageOrgUrl:"",convertedImageIndex:-1,convertedImageFileId:-1,convertedImageShrinked:!1,zipSize:h.maxZipSizeMB,shrink:B.multithread&&B.shrinkImage?[B.maxWidth,B.maxHeight]:void 0,unconvertedListText:"",failedZipDone:!1,failedZips:[],unconvertedFileCount:0,unconvertedTotalSize:0,failedFileZippedCount:0,failedToCreateFailedZip:!1,demandImage:()=>{}};return Object.assign(N||{},M)}function z(){y.value=!1,URL.revokeObjectURL(I.convertedImageUrl),URL.revokeObjectURL(I.convertedImageOrgUrl);for(const N of I.zips)URL.revokeObjectURL(N.url);I.zips.length=0;for(const N of I.failedZips)URL.revokeObjectURL(N.url);I.failedZips.length=0,ye(I),b(),b=()=>{},q=!1,v.value=!1,r.value=!1}async function P(N){if(m.value){s.error({title:"Busy",positiveText:"OK",content:u("interfered")});return}x.value&&(W.value^=1);let M=N.concat();ye(I),z(),x.value=!0,y.value=!0,m.value=!0,I.processing=!0,S.value="info",$.value=u("processing");const G=new Set,F=h.format,ce=h.quality,ae=[...F.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),ve=re(F,ce,M[0].webkitRelativePath);I.length=M.length,I.baseZipName=ve,I.type=F.replace(/image\//,"").toUpperCase()+(/jpe?g|webp/i.test(F)?" ("+ce+")":""),I.threads=Z?0:h.threads;const de=Date.now();k("start");let Ee,A;if({exception:A,callbackToGenerateFailedZips:Ee,callbackToClearConverter:b}=!Z&&h.threads>=2?await Ul({files:M,completedFileIdSet:G,ConvStats:I,canceled:r,props:h,imageType:F,quality:ce,outputExt:ae,format:F,message:o,notification:a}):await jl(M,G,h,r,I),A){let V;switch(A.message){case"worker-load-error":V=u("errMsgWorkerLoadError");break;default:V="unexpected error"}s.error({title:"Error",autoFocus:!0,maskClosable:!1,closable:!1,content:()=>J("div",[J("p",V),J(ze,{onClick(){location.reload()}},u("Reload"))])})}if(I.length,I.success===I.length?(S.value="success",$.value=u("completed")):(S.value="error",$.value=r.value?u("aborted"):u("incomplete")),G.size!==M.length){const V=ee(N,G);ie.value=()=>{!V||!V.length||Ee(V)}}m.value=!1,I.processing=!1,v.value=!0,M.length=0,L=Date.now()-de,k("end")}function ee(N,M){const G=[],F=[];let ce=0;for(const ae of N)M.has(ae._id)||(G.push(ae),F.push(ae.webkitRelativePath||ae.relativePath||ae.name),ce+=ae.size);return F.length&&(I.unconvertedListText=F.join(`
`),I.unconvertedFileCount=G.length,I.unconvertedTotalSize=ce),G}function re(N,M,G){var de;const F=new Date;N=N.replace(/^image\//,"").toLowerCase();const ce=B.useFolderNameForZip&&((de=String(G).match(/^\/?([^/]+)\//))==null?void 0:de[1])||"avif2jpg",ae=`
    ${F.getFullYear().toString().substring(2)}
    ${String((F.getMonth()+1)*100+F.getDate()).padStart(4,"0")}
    ${String(F.getHours()*1e4+F.getMinutes()*100+F.getSeconds()).padStart(6,"0")}
    -
    ${N+(/jpe?g|webp/i.test(N)?M:"")}
  `.replace(/\s/g,"");return`${ce}-${ae}`.replace(/\s+/g," ")}async function ue(){const N="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",M=document.createElement("img"),G=Kn(M).then(()=>!0,()=>!1);M.src=N,await G||s.warning({title:"Unsupported",positiveText:"OK",maskClosable:!1,content:u("avifUnsupported")})}function me(){(!c||p<2||!Promise.any)&&(Z=!0),Z&&(Ce.value=0)}return(N,M)=>{var Ee;const G=_e,F=Kt,ce=we,ae=$e,ve=vt,de=Wt;return O(),oe(Le,null,[!e(m)&&((Ee=h.input)!=null&&Ee.length)?(O(),te(ae,{key:0,justify:"center",align:"center",style:{"margin-top":"0.4em"}},{default:t(()=>[n(ce,{trigger:"hover",placement:"top","keep-alive-on-hover":!1,duration:0,delay:50},{trigger:t(()=>{var A;return[n(F,{value:((A=N.input)==null?void 0:A.length)||0,offset:[-12,-5],color:"#99999966"},{default:t(()=>[n(e(ze),{onClick:Ae,round:""},{icon:t(()=>[n(G,{size:"1.5em",color:"#CCCCCC"},{default:t(()=>[n(e(Oa))]),_:1})]),default:t(()=>[T(" "+d(e(u)("convertAgain")),1)]),_:1})]),_:1},8,["value"])]}),default:t(()=>{var A;return[_("div",{innerHTML:e(u)("reconvertTip",(A=h.input)==null?void 0:A.length)},null,8,Ps)]}),_:1})]),_:1})):ge("",!0),n(de,{ref:"processingModal","display-directive":"show",show:e(x),"onUpdate:show":M[2]||(M[2]=A=>Ze(x)?x.value=A:null),closable:e(v),"close-on-esc":!1,preset:"dialog",onClick:M[3]||(M[3]=A=>{e(a).destroyAll(),e(o).destroyAll()}),onMaskClick:M[4]||(M[4]=A=>{e(a).destroyAll(),e(o).destroyAll()}),onClose:H,onEsc:R,title:e($),type:e(S),"mask-closable":!1,onAfterLeave:z,onBeforeLeave:M[5]||(M[5]=A=>e(E).cleanup()),class:"processing-dialog"},{default:t(()=>[n(ae,{vertical:"",style:{"flex-grow":"1"}},{default:t(()=>[e(y)?(O(),te(Os,{ref_key:"stat",ref:E,key:e(W),processing:e(m),status:e(I),interval:Ns,onAllZipsClicked:M[0]||(M[0]=A=>Ze(q)?q.value=!0:q=!0),onDemandZipErrors:e(ie),onDemandImage:se},null,8,["processing","status","onDemandZipErrors"])):ge("",!0),n(ae,{justify:"end"},{default:t(()=>[e(m)?(O(),te(e(ze),{key:0,disabled:e(r),ref:"cancelbutton",round:"",size:"large",onClick:M[1]||(M[1]=A=>r.value=!0)},{default:t(()=>[n(ve,{show:e(r)&&!e(v),size:"small"},{default:t(()=>[T(d(e(u)("cancel")),1)]),_:1},8,["show"])]),_:1},8,["disabled"])):e(v)?(O(),te(e(ze),{key:1,onClick:H,round:"",size:"large",style:{"font-size":"small","margin-top":"1em"}},{default:t(()=>[T(d(e(u)("close")),1)]),_:1})):ge("",!0)]),_:1})]),_:1})]),_:1},8,["show","closable","title","type"])],64)}}}),Ds="/avif2jpeg/dist/avif.png",js={class:"container-1"},Bs={style:{position:"relative"}},Zs={style:{position:"absolute","font-size":"0.5em",right:"-3.5em",bottom:"-1.5em","white-space":"nowrap"}},Ws={style:{color:"#666666"}},Hs=["innerHTML"],Vs={style:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","font-size":"xx-small","white-space":"nowrap"}},qs=be({__name:"droptarget",props:{forbidden:{type:Boolean},dropTarget:{}},emits:["drop"],setup(l,{emit:i}){rt(nt);const u=l,s=i,o=Pa(),a=w(!1),p=w(0),c=w("");De(()=>{h(u.dropTarget||document)});function h(k){document.ondragstart=m=>m.preventDefault(),document.ondragover=m=>m.preventDefault(),k.ondrop=async m=>{var v;if(m.preventDefault(),a.value||u.forbidden)return;a.value=!0,p.value=0,c.value="";let r;try{const x=[...m.dataTransfer.items].map(y=>y.webkitGetAsEntry());o.start(),r=await g(x),o.finish()}catch{r=[...((v=m.dataTransfer)==null?void 0:v.files)??[]],o.error()}a.value&&(a.value=!1,s("drop",r))}}async function g(k,m){m=m||[];for(const r of k)if(r.isFile){const v=await new Promise(x=>r.file(y=>x(y)));Object.defineProperty(v,"webkitRelativePath",{value:r.fullPath}),m.push(v),p.value++}else if(r.isDirectory){c.value=r.fullPath;const v=r.createReader();do{const x=await new Promise(y=>v.readEntries($=>y($)));if(!x.length)break;await g(x,m)}while(!0)}return m}return(k,m)=>{const r=_e,v=ut,x=$e,y=we,$=Wt;return O(),oe("div",js,[n(y,{to:!1,"display-directive":"show",trigger:"hover",duration:0,delay:0,placement:"bottom-end"},{trigger:t(()=>[n(x,{vertical:"",class:"container-2"},{default:t(()=>[n(x,{align:"center",wrap:!1,class:"container-3"},{default:t(()=>[n(x,{vertical:"",align:"center",wrap:!1,style:{"font-weight":"bold","font-size":"1em","line-height":"90%","white-space":"nowrap"}},{default:t(()=>[m[5]||(m[5]=_("span",null,"Drag & Drop",-1)),_("span",Bs,[m[4]||(m[4]=T(" AVIF Images ")),_("span",Zs,[m[3]||(m[3]=T(" or ")),n(v,{placement:"bottom-end"},{trigger:t(()=>[_("span",Ws,[n(r,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Yt))]),_:1}),m[1]||(m[1]=T(" Folders "))])]),default:t(()=>[m[2]||(m[2]=T(" You can drag and drop your local folders "))]),_:1})])])]),_:1}),n(x,null,{default:t(()=>m[6]||(m[6]=[_("img",{src:Ds,class:"avif"},null,-1)])),_:1})]),_:1})]),_:1})]),default:t(()=>[_("h3",{innerHTML:k.$t("droptarget"),style:{"max-width":"200px","text-align":"center","word-break":"keep-all","overflow-wrap":"break-word"}},null,8,Hs)]),_:1}),n($,{show:e(a),"onUpdate:show":m[0]||(m[0]=S=>Ze(a)?a.value=S:null),closable:!0,preset:"dialog",title:"Parsing dropped items.",type:"info","mask-closable":!1,"negative-text":k.$t("cancel")},{default:t(()=>[n(x,{vertical:"",align:"center"},{default:t(()=>[_("div",Vs,d(e(c)),1),_("div",null,"found "+d(e(p))+" files",1)]),_:1})]),_:1},8,["show","negative-text"])])}}}),Gs=je(qs,[["__scopeId","data-v-d17987b7"]]),Ks={class:"container-1"},Ys={class:"container-2"},Xs=["innerHTML"],Qs=["innerHTML"],Js={style:{"white-space":"nowrap"}},ei={style:{"padding-left":"1em"}},ti=["innerHTML"],ni=["accept"],oi=be({__name:"file-selector",props:It({target:{},userExtensions:{},forbidden:{type:Boolean}},{expanded:{type:Boolean,required:!1},expandedModifiers:{},disableNotifyingFolderSelect:{type:Boolean},disableNotifyingFolderSelectModifiers:{}}),emits:It(["input","click","cancel","on-change-accept","update:target","update:userExtensions"],["update:expanded","update:disableNotifyingFolderSelect"]),setup(l,{emit:i}){const u=Et(),{t:s}=Ke(),o=rt(nt),a=["avif_only","all_images","all_files","edit_type"],p=[];for(const z of a)p.push({label:()=>s("fileTypeRadioOptions."+z),value:z});const c=({node:z,option:P})=>J(we,{placement:"right"},{trigger:()=>z,default:()=>se(P.value).replace(/,/g,", ")}),h=l,g=i,k=w(0),m=w(!1),r=w(!1),v=Te(()=>se($.value)),x=Te(()=>S.value.split(",").every(P=>/^\s*(\.[\w\-]+)*\s*$/.test(P))?"success":"error"),y=Te(()=>!h.forbidden&&!r.value);Ue(l,"expanded");const $=Te({get:()=>a.indexOf(h.target)>=0?h.target:a[0],set:z=>{g("update:target",z)}}),S=Te({get:()=>h.userExtensions,set:z=>{g("update:userExtensions",z)}}),I=Ue(l,"disableNotifyingFolderSelect"),E=w(null),W=w(null),Z=w(H());xe($,z=>{g("on-change-accept",v.value)}),De(()=>{});async function b(z){if(g("click"),z===W.value&&!I.value){let P=!1;if(await new Promise(ee=>{u.info({title:s("loadfolderNotifyingTitle"),positiveText:s("Continue"),negativeText:s("Cancel"),onAfterLeave:()=>ee(P),onPositiveClick:()=>P=!0,content:()=>J("div",[J("p",{},s("loadfolderNotifyingMessageTerm1")),J("div",[J(bn,{width:250,style:{border:"3px solid gray"},src:"/avif2jpeg/dist//notification-folder.png"})]),J("p",{},s("loadfolderNotifyingMessageTerm2")),J("p",[J(Cn,{onUpdateChecked:re=>I.value=re,checked:I.value},()=>s("checkboxTextDontShowThis"))])])})}),!P){I.value=!1,g("cancel");return}}z.click()}function L(){g("cancel")}function q(z){const ee=[...z.target.files];E.value.value="",W.value.value="",Ae(ee)}function H(){return"webkitdirectory"in document.createElement("input")}function se(z){switch(z){case"avif_only":return".avif, .webp";case"all_images":return".jpg, .jpeg, .jfif, .pjpeg, .pjp, .gif, .png, .webp, .avif, .bmp, .apng, .ico";case"edit_type":return S.value;case"all_files":default:return".*"}}async function R(z){const P=String(v.value).toLowerCase().replace(/\s+/g,"");if(P&&v.value!==".*"){const ee=P.split(",");z=z.filter(re=>ee.includes(re.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),z.length||(await new Promise(re=>{u.error({title:"Images Not Found",positiveText:"OK",onAfterLeave:re,content:()=>J("div",[J(Vt,{description:"NO IMAGES"}),`${s("noimage")}`,J("br"),v.value])})}),L())}return z}async function Ae(z){r.value=!0,z=await R(z),k.value=z.length,z.length>0&&g("input",ye(z)),r.value=!1}let ie=0;function ye(z){const P=[];for(const ee of z)ee.hasOwnProperty("_id")||Object.defineProperty(ee,"_id",{value:ie++}),P.push(ee);return P}return(z,P)=>{const ee=_e,re=ze,ue=$e,me=Xt,N=An,M=Ma,G=ut;return O(),oe(Le,null,[_("div",Ks,[_("div",Ys,[n(ue,{vertical:"",align:"center",justify:"center",inline:"",size:"large"},{default:t(()=>[n(ue,{align:"center",justify:"space-around",class:"main-buttons"},{default:t(()=>[n(ue,{vertical:"",align:"stretch",justify:"center"},{default:t(()=>[n(e(we),{to:!1,"display-directive":"show",show:e(o).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(o).LANDSCAPE.value?"right":"top",duration:0,delay:0,"z-index":10},{trigger:t(()=>[n(re,{disabled:!e(y),size:"large",onClick:P[0]||(P[0]=F=>b(e(E))),round:"",style:{width:"100%","background-color":"white","font-size":"large"}},{icon:t(()=>[n(ee,{size:"large",color:"gray"},{default:t(()=>[n(e($n))]),_:1})]),default:t(()=>[T(" "+d(z.$t("loadbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[_("div",{innerHTML:z.$t("loadbuttontooltip")},null,8,Xs)]),_:1},8,["show","placement"]),!e(o).IS_SP&&e(Z)||e(o).SSR?(O(),oe(Le,{key:0},[n(ue,{align:"center",justify:"center",style:{color:"gray",margin:"0em"}},{default:t(()=>[T(d(z.$t("or")),1)]),_:1}),n(e(we),{to:!1,"display-directive":"show",trigger:"hover",placement:"left","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:e(o).showTooltipsBeforeMounted.value},{trigger:t(()=>[n(re,{disabled:!e(y),size:"large",onClick:P[1]||(P[1]=F=>b(e(W))),round:"",style:{width:"100%","background-color":"white","font-size":"large"}},{icon:t(()=>[n(ee,{size:"large",color:"gray"},{default:t(()=>[n(e(Yt))]),_:1})]),default:t(()=>[T(" "+d(z.$t("loadfolderbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[_("div",{innerHTML:z.$t("loadfoldertooltip")},null,8,Qs)]),_:1},8,["show"])],64)):ge("",!0)]),_:1}),e(o).IS_SP?ge("",!0):(O(),te(Gs,{key:0,onDrop:Ae,forbidden:!e(y),class:"drop-target"},null,8,["forbidden"]))]),_:1}),n(ue,{vertical:""},{default:t(()=>[n(ue,{wrap:e(o).IS_SP,align:"center",justify:"stretch"},{default:t(()=>[_("span",Js,d(z.$t("TargetFileTypeExt"))+": ",1),n(e(we),{"keep-alive-on-hover":!1,placement:"right",style:{"max-width":"200px"},duration:0,delay:0},{trigger:t(()=>[n(me,{trigger:"click",width:"trigger",size:"small",value:e($),"onUpdate:value":P[2]||(P[2]=F=>Ze($)?$.value=F:null),options:p,"render-option":c,"consistent-menu-width":!1},null,8,["value"])]),default:t(()=>[T(" "+d(se(e($)).replace(/,/g,", ")),1)]),_:1})]),_:1},8,["wrap"]),e($)==="edit_type"?(O(),te(e(we),{key:0,trigger:"hover","keep-alive-on-hover":!1,placement:"bottom-start",show:e(m),duration:0,delay:0},{trigger:t(()=>[_("div",ei,[n(G,{trigger:"manual",placement:"right-end",show:e($)==="edit_type"&&e(x)!=="success"&&!!e(m)},{trigger:t(()=>[n(N,{value:e(S),"onUpdate:value":P[3]||(P[3]=F=>Ze(S)?S.value=F:null),status:e(x),disabled:e($)!=="edit_type",onFocus:P[4]||(P[4]=F=>m.value=!0),onBlur:P[5]||(P[5]=F=>m.value=void 0),clearable:!0,size:"small",placeholder:".jpg, .gif, .png",spellcheck:"false"},null,8,["value","status","disabled"])]),default:t(()=>[n(M,{type:"error","show-icon":!0,title:"Validation error"},{default:t(()=>P[6]||(P[6]=[T(" Please correct the extension list."),_("br",null,null,-1),_("ul",null,[_("li",null,"Each extension must begin with a period. "),_("li",null,"Separate each extension with a comma. "),_("li",null,"Use alphameric characters.")],-1)])),_:1})]),_:1},8,["show"])])]),default:t(()=>[_("span",{innerHTML:z.$t("editAcceptTypes")},null,8,ti)]),_:1},8,["show"])):ge("",!0)]),_:1})]),_:1})])]),_("input",{ref_key:"fileinput",ref:E,onInput:q,onCancel:L,type:"file",multiple:"",accept:e(v),style:{display:"none"}},null,40,ni),_("input",{ref_key:"folderinput",ref:W,webkitdirectory:"",directory:"",onInput:q,onCancel:L,type:"file",style:{display:"none"}},null,544)],64)}}}),ai=je(oi,[["__scopeId","data-v-863e9e5f"]]),li={style:{"white-space":"nowrap"}},si=be({__name:"settings-output",props:{quality:{},format:{}},emits:["update:format","update:quality"],setup(l,{emit:i}){const u=l,s=i,{t:o}=Ke(),a=rt(nt),p=w([]),c=["image/jpeg","image/png","image/gif","image/bmp","image/avif","image/webp"],h=Te({get:()=>u.format,set:x=>{x=r(x),s("update:format",x)}}),g=Te({get:()=>u.quality,set:x=>{s("update:quality",x)}}),k=Te(()=>/png|bmp/i.test(h.value)),m=w(null);De(()=>{v()});function r(x){return p.value.indexOf(x)<0&&(x=p.value[0]),x}function v(){for(const x of c)m.value.toDataURL(x).indexOf(x)>=0&&p.value.push(x);p.value.length===0&&p.value.push(c[0])}return(x,y)=>{const $=_e,S=Xt,I=$e,E=we,W=Gt,Z=En;return O(),oe(Le,null,[n(I,{justify:"center",class:"body"},{default:t(()=>[n(I,{vertical:""},{default:t(()=>[n(E,{to:!1,"display-directive":"show",show:e(a).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(a).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(I,{align:"center",wrap:!1},{default:t(()=>[n($,null,{default:t(()=>[n(e($n))]),_:1}),T(d(e(o)("settings.imageType"))+": ",1),n(S,{value:h.value,"onUpdate:value":y[0]||(y[0]=b=>h.value=b),options:p.value.map(b=>({value:b,label:b})),"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),_:1})]),default:t(()=>[T(" "+d(e(o)("settings.imageTypeTooltip")),1)]),_:1},8,["show","placement"]),n(E,{to:!1,"display-directive":"show",show:e(a).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(a).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(I,{align:"center"},{default:t(()=>[n(I,{align:"start",wrap:!1},{default:t(()=>[n($,null,{default:t(()=>[n(e(Ln))]),_:1}),_("span",li,d(e(o)("settings.quality"))+":",1),n(I,{align:"center",justify:"space-between"},{default:t(()=>[n(W,{tooltip:!1,value:g.value,"onUpdate:value":y[1]||(y[1]=b=>g.value=b),step:1,style:{width:"120px"},disabled:k.value},null,8,["value","disabled"]),n(Z,{onBlur:y[2]||(y[2]=b=>g.value??(g.value=0)),value:g.value,"onUpdate:value":y[3]||(y[3]=b=>g.value=b),step:"1",min:"0",max:"100",disabled:k.value,style:{width:"90px"},size:"small"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:t(()=>[T(" "+d(e(o)("settings.qualitytooltip")),1)]),_:1},8,["show","placement"])]),_:1})]),_:1}),_("canvas",{ref_key:"canvas",ref:m,width:"1",height:"1",style:{display:"none"}},null,512)],64)}}}),ii=je(si,[["__scopeId","data-v-d5c6e189"]]),ri={style:{width:"4em","text-align":"left"}},ui={style:{width:"4em","text-align":"left"}},Rt=100,fn=2e3,gn=4096,mn=4096,di=100,ci=100,pi=be({__name:"settings-adv",props:{expanded:{type:Boolean,required:!1},expandedModifiers:{},multithread:{type:Boolean,required:!0},multithreadModifiers:{},threadCount:{required:!0},threadCountModifiers:{},maxZipSize:{required:!0},maxZipSizeModifiers:{},retainExt:{type:Boolean,required:!0},retainExtModifiers:{},useFolderNameForZip:{type:Boolean,required:!0},useFolderNameForZipModifiers:{},shrinkImage:{type:Boolean,required:!0},shrinkImageModifiers:{},maxWidth:{required:!0},maxWidthModifiers:{},maxHeight:{required:!0},maxHeightModifiers:{}},emits:["update:expanded","update:multithread","update:threadCount","update:maxZipSize","update:retainExt","update:useFolderNameForZip","update:shrinkImage","update:maxWidth","update:maxHeight"],setup(l){const i={trigger:"hover",placement:"left",keepAliveOnHover:!1,duration:0,delay:0,style:"max-width: 20vw;"},u=Ue(l,"expanded"),s=Ue(l,"multithread"),o=Ue(l,"threadCount"),a=Ue(l,"maxZipSize"),p=Ue(l,"retainExt"),c=Ue(l,"useFolderNameForZip"),h=Ue(l,"shrinkImage"),g=Ue(l,"maxWidth"),k=Ue(l,"maxHeight");xe(Ce,r=>{r>1||(s.value=!1),o.value>r&&(o.value=r)},{immediate:!0});const m=Te(()=>s.value&&Ce.value>1);return De(()=>{Ce.value>1&&typeof o.value>"u"&&(o.value=Math.max(Ce.value,2))}),(r,v)=>{const x=_e,y=ze,$=Da,S=$e,I=Gt,E=En,W=Sn,Z=In;return O(),te(S,{justify:"center"},{default:t(()=>[n(Z,{"display-directive":"show","default-expanded-names":u.value?["collapitem"]:"","on-update:expanded-names":b=>u.value=!!String(b),"trigger-areas":["arrow","main"],class:wt(["settings-body",u.value?"expand-adv-settings":""])},Na({arrow:t(()=>[n(x,{style:le(u.value&&{top:"8px"})},{default:t(()=>[n(e(Za))]),_:1},8,["style"]),n(x,null,{default:t(()=>[n(e(Wa))]),_:1})]),default:t(()=>[n(W,{title:r.$t("settings.advancedSettings"),name:"collapitem"},{default:t(()=>[n(S,{vertical:"",style:{"padding-left":"2em"}},{default:t(()=>[n(e(we),ct(pt(i)),{trigger:t(()=>[n(S,{vertical:""},{default:t(()=>[n(S,{wrap:!1,align:"center"},{default:t(()=>[n(y,{text:"",disabled:!e(Ce),style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:v[0]||(v[0]=b=>s.value=!s.value)},{icon:t(()=>[n(x,null,{default:t(()=>[n(e(Ra))]),_:1})]),default:t(()=>[T(" "+d(r.$t("settings.enableMultiThreads")),1)]),_:1},8,["disabled"]),n($,{value:s.value,"onUpdate:value":v[1]||(v[1]=b=>s.value=b),disabled:!e(Ce),size:"small"},null,8,["value","disabled"])]),_:1}),n(S,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(I,{value:o.value,"onUpdate:value":v[2]||(v[2]=b=>o.value=b),disabled:!e(Ce)||!s.value,step:1,min:2,max:e(Ce),style:{width:"120px"}},null,8,["value","disabled","max"]),n(E,{onBlur:v[3]||(v[3]=b=>o.value??(o.value=2)),size:"tiny",value:o.value,"onUpdate:value":v[4]||(v[4]=b=>o.value=b),disabled:!e(Ce)||!s.value,step:1,min:2,max:e(Ce),style:{width:"10em"}},{suffix:t(()=>[T(d(r.$t("threads",o.value)),1)]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[T(" "+d(r.$t("settings.multiThreadsTooltip")),1)]),_:1},16),n(e(we),ct(pt(i)),{trigger:t(()=>[n(S,{vertical:""},{default:t(()=>[n(S,{wrap:!1,align:"center"},{default:t(()=>[n(y,{text:"",focusable:!1,style:{"white-space":"nowrap","font-size":"smaller"}},{icon:t(()=>[n(x,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(ja))]),_:1})]),default:t(()=>[T(" "+d(r.$t("settings.maxZipFileSize"))+": ",1)]),_:1})]),_:1}),n(S,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(I,{tooltip:!1,value:a.value,"onUpdate:value":v[5]||(v[5]=b=>a.value=b),step:1,min:Rt,max:fn,style:{width:"120px"}},null,8,["value"]),n(E,{onBlur:v[6]||(v[6]=b=>a.value??(a.value=Rt)),size:"tiny",value:a.value,"onUpdate:value":v[7]||(v[7]=b=>a.value=b),step:"1",min:Rt,max:fn,style:{width:"10em"}},{suffix:t(()=>v[20]||(v[20]=[T("(MB)")])),_:1},8,["value"])]),_:1})]),_:1})]),default:t(()=>[T(" "+d(r.$t("settings.maxZipFileSizeTooltip")),1)]),_:1},16),n(e(we),ct(pt(i)),{trigger:t(()=>[n(S,{wrap:!1,align:"center"},{default:t(()=>[n(y,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:v[8]||(v[8]=b=>c.value=!c.value)},{icon:t(()=>[n(x,null,{default:t(()=>[n(e(Yt))]),_:1})]),default:t(()=>[T(" "+d(r.$t("settings.useFolderNameForZip")),1)]),_:1}),n($,{value:c.value,"onUpdate:value":v[9]||(v[9]=b=>c.value=b),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[T(" "+d(r.$t("settings.useFolderNameForZipTooltip")),1)]),_:1},16),n(e(we),ct(pt(i)),{trigger:t(()=>[n(S,{wrap:!1,align:"center"},{default:t(()=>[n(y,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:v[10]||(v[10]=b=>p.value=!p.value)},{icon:t(()=>[n(x,null,{default:t(()=>[n(e(xn))]),_:1})]),default:t(()=>[T(" "+d(r.$t("settings.retainOriginalExtension")),1)]),_:1}),n($,{value:p.value,"onUpdate:value":v[11]||(v[11]=b=>p.value=b),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[T(" "+d(r.$t("settings.retainExtTooltip")),1)]),_:1},16),n(e(we),ct(pt(i)),{trigger:t(()=>[n(S,{vertical:""},{default:t(()=>[n(S,{wrap:!1,align:"center"},{default:t(()=>[n(y,{disabled:!m.value,text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:v[12]||(v[12]=b=>h.value=!h.value)},{icon:t(()=>[n(x,null,{default:t(()=>[n(e(Ba))]),_:1})]),default:t(()=>[T(" "+d(r.$t("settings.shrinkImage")),1)]),_:1},8,["disabled"]),n($,{disabled:!m.value,value:h.value,"onUpdate:value":v[13]||(v[13]=b=>h.value=b),size:"small"},null,8,["disabled","value"])]),_:1}),n(S,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(I,{value:g.value,"onUpdate:value":v[14]||(v[14]=b=>g.value=b),disabled:!h.value||!m.value,step:1,min:di,max:gn,style:{width:"120px"}},null,8,["value","disabled"]),n(E,{size:"tiny",onBlur:v[15]||(v[15]=b=>g.value??(g.value=8)),value:g.value,"onUpdate:value":v[16]||(v[16]=b=>g.value=b),disabled:!h.value||!m.value,step:1,min:8,max:gn*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[_("span",ri,d(r.$t("width")),1)]),suffix:t(()=>v[21]||(v[21]=[T("px")])),_:1},8,["value","disabled","max"])]),_:1}),n(S,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(I,{value:k.value,"onUpdate:value":v[17]||(v[17]=b=>k.value=b),disabled:!h.value||!m.value,step:1,min:ci,max:mn,style:{width:"120px"}},null,8,["value","disabled"]),n(E,{size:"tiny",onBlur:v[18]||(v[18]=b=>k.value??(k.value=8)),value:k.value,"onUpdate:value":v[19]||(v[19]=b=>k.value=b),disabled:!h.value||!m.value,step:1,min:8,max:mn*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[_("span",ui,d(r.$t("height")),1)]),suffix:t(()=>v[22]||(v[22]=[T("px")])),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[T(" "+d(r.$t("settings.shrinkImageTooltip")),1)]),_:1},16)]),_:1})]),_:1},8,["title"])]),_:2},[u.value?{name:"header-extra",fn:t(()=>[n(e(we),{"keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(y,{onClick:e(sl),size:"tiny",style:{"font-size":"xx-small"}},{default:t(()=>[T(d(r.$t("reset")),1)]),_:1},8,["onClick"])]),default:t(()=>[T(" "+d(r.$t("settings.resetButtonTooltip")),1)]),_:1})]),key:"0"}:void 0]),1032,["default-expanded-names","on-update:expanded-names","class"])]),_:1})}}}),fi=je(pi,[["__scopeId","data-v-706f0515"]]),gi={},mi={style:{color:"gray","padding-left":"20px"}},vi=["innerHTML"];function hi(l,i){const u=Ht,s=$e;return O(),te(s,{vertical:"",justify:"end"},{default:t(()=>[n(u,{style:{margin:"0px"}}),n(s,{justify:"center"},{default:t(()=>[_("ul",mi,[(O(!0),oe(Le,null,mt(l.$tm("descriptions"),o=>(O(),oe("li",{key:o,style:{"text-align":"left"},innerHTML:o},null,8,vi))),128))])]),_:1})]),_:1})}const _i=je(gi,[["render",hi]]),wi="modulepreload",yi=function(l){return"/avif2jpeg/dist/"+l},vn={},fe=function(i,u,s){let o=Promise.resolve();if(u&&u.length>0){document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),c=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));o=Promise.allSettled(u.map(h=>{if(h=yi(h),h in vn)return;vn[h]=!0;const g=h.endsWith(".css"),k=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${k}`))return;const m=document.createElement("link");if(m.rel=g?"stylesheet":wi,g||(m.as="script"),m.crossOrigin="",m.href=h,c&&m.setAttribute("nonce",c),document.head.appendChild(m),g)return new Promise((r,v)=>{m.addEventListener("load",r),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(p){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=p,window.dispatchEvent(c),!c.defaultPrevented)throw p}return o.then(p=>{for(const c of p||[])c.status==="rejected"&&a(c.reason);return i().catch(a)})},Yn="English",Xn="🇬🇧",Qn='AVIF to JPEG "Offline" Batch Converter',Jn="It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",eo="Drag & Drop AVIF Images to Convert",to=["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data is sent to any server</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.'],no="Select your language",oo="Choose Target File Extentions",ao={avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types",edit_type:"Edit File Extension List"},lo="Input a list of comma separated file extentions to load.<br>e.g.) .jpg,.gif,.png",so="Load Images",io="Select your images from a dialog window.<br>*Multiple selection allowed.",ro="Load a Whole Folder",uo=`Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>*It will show "Upload" button, but it actually doesn't upload anything to any server.`,co="Converting images",po="Aborted",fo="Some files failed to convert",go="Completed",mo="Currently Busy",vo="No files with the extentions were found.",ho="Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",_o="Cancel",wo="Save",yo="Close",bo="Open",ko="Re-convert",zo="Convert previous selected {n} @:files again",Ao="File | Files",To="thread | threads",xo="You have not saved the converted images yet.",Io="Data have not been saved",So="Open Source",Co="Open the converted image",Lo="Copied to clipboard",$o="The converted image was copied to your clipboard as DataURL.",Eo="Copy the converted image as DataURL",Fo="Convert Again",Uo={expandLogTooltip:"Displaying the entire log may severely reduce conversion speed.",expandLog:"Show entire log",autoScroll:"Auto scroll",showOnlyErrors:"Show only errors",log:"Log",outInRate:"Out / In Ratio",elapsedTime:"Elapsed Time",multiThreading:"Multi-Threading",outputSettings:"Output Settings",totalSize:"Total Size",totalFiles:"Number of Files",confirmDownloadMessage:"It will start to download {0} zip files.",inputSize:"Input Size",outputSize:"Output Size",filterSuccess:"Hide completed item",progressErrors:"Failed items",progressStarted:"Started Items",progressTotal:"Total number of files",zippingProgress:"Zipping progress",zipped:"ZIPPED",openFailedList:"Open failed file list",zipFailedList:"Pack failed files into Zips",table:{index:"index",status:"status",core:"thread",details:"file"},saveFailedList:"Save failed file list",done:"done",convertedZips:"successfully completed ZIP",progressSuccess:"Completed Files",downloadConvertedImage:"Download Converted Image",failureZippingFailedFiles:"Failure while zipping the failed files.",browseConvertedImages:"Browse converted images",index:"Index",Original:"Original",Converted:"Converted",saveAllZipsTooltip:"Save all ZIP files",Shrinked:"Shrinked",Shrinking:"Shrinking",saveAll:"Save All",progressRetries:"Retrying files",success:"success",started:"started",total:"total",files:"files"},Oo={maxZipFileSize:"Max zip file size",retainExtTooltip:"New extension will be appended to original extension",retainOriginalExtension:"Keep Original File Extension",qualitytooltip:"Set image quality for output",quality:"Image Quality",maxZipFileSizeTooltip:"Set smaller value if memory problems occur.",ignoreExtTooltip:'Try to load files that don"t have image file extension',ignoreFileExtensions:"Load All File Types",imageTypeTooltip:"Choose image format for output",imageType:"Image Type",advancedSettings:"Advanced Settings",enableMultiThreads:"Enable multi-threading",resetButtonTooltip:"Restore all settings to default.",multiThreadsTooltip:"Convert images in multi-threaded",shrinkImageTooltip:"If the image dimensions are larger than the specified value, shrink the image to that value",shrinkImage:"Shrink images that exceed the following dimensions",useFolderNameForZip:"Use dropped folder name for the zip file",useFolderNameForZipTooltip:"If a folder is dropped or selected, its name is used as the name of the output ZIP file"},Po="Disabled",Mo="Download",No="Reset",Ro="Back",Do="Failed",jo="Success",Bo="Previous version",Zo=`
Height`,Wo="Width",Ho="Don't show this message again",Vo="About the warning when selecting a folder",qo="OK",Go={},Ko="You must press the “Upload” button here to load all the images in the folder, but the data loaded by this application is never actually uploaded to the server.",Yo="Continue",Xo="Cancel",Qo="When you select a folder instead of a file as input on a website, major web browsers will display a warning like the image below.",Jo="This page may be an outdated version. Please reload the page.",ea="Reload",ta='If the conversion process frequently fails and an “Out of Memory” message appears, try reducing or disabling the number of "multi-threads" in the "Advanced Settings".',na="Next",oa="Previous",aa="or",la="Target File Extensions",sa={lang:Yn,flags:Xn,title:Qn,metaDescription:Jn,droptarget:eo,descriptions:to,selectLanguage:no,fileTypeRadioTitle:oo,fileTypeRadioOptions:ao,editAcceptTypes:lo,loadbutton:so,loadbuttontooltip:io,loadfolderbutton:ro,loadfoldertooltip:uo,processing:co,aborted:po,incomplete:fo,completed:go,interfered:mo,noimage:vo,avifUnsupported:ho,cancel:_o,save:wo,close:yo,open:bo,reconvert:ko,reconvertTip:zo,files:Ao,threads:To,confirmCloseDialog:xo,confirmCloseDialogTitle:Io,githubOpenSource:So,convertedImageUrlTooltip:Co,copiedDataURLDialogTitle:Lo,copiedDataURLMessage:$o,convertedImageDataUrlTooltip:Eo,convertAgain:Fo,status:Uo,settings:Oo,disabled:Po,Download:Mo,reset:No,back:Ro,failed:Do,success:jo,previousVersion:Bo,height:Zo,width:Wo,checkboxTextDontShowThis:Ho,loadfolderNotifyingTitle:Vo,OK:qo,loadfolderNotifyingMessage:Go,loadfolderNotifyingMessageTerm2:Ko,Continue:Yo,Cancel:Xo,loadfolderNotifyingMessageTerm1:Qo,errMsgWorkerLoadError:Jo,Reload:ea,annotationOutOfMemory:ta,Next:na,Prev:oa,or:aa,TargetFileTypeExt:la},bi=Object.freeze(Object.defineProperty({__proto__:null,Cancel:Xo,Continue:Yo,Download:Mo,Next:na,OK:qo,Prev:oa,Reload:ea,TargetFileTypeExt:la,aborted:po,annotationOutOfMemory:ta,avifUnsupported:ho,back:Ro,cancel:_o,checkboxTextDontShowThis:Ho,close:yo,completed:go,confirmCloseDialog:xo,confirmCloseDialogTitle:Io,convertAgain:Fo,convertedImageDataUrlTooltip:Eo,convertedImageUrlTooltip:Co,copiedDataURLDialogTitle:Lo,copiedDataURLMessage:$o,default:sa,descriptions:to,disabled:Po,droptarget:eo,editAcceptTypes:lo,errMsgWorkerLoadError:Jo,failed:Do,fileTypeRadioOptions:ao,fileTypeRadioTitle:oo,files:Ao,flags:Xn,githubOpenSource:So,height:Zo,incomplete:fo,interfered:mo,lang:Yn,loadbutton:so,loadbuttontooltip:io,loadfolderNotifyingMessage:Go,loadfolderNotifyingMessageTerm1:Qo,loadfolderNotifyingMessageTerm2:Ko,loadfolderNotifyingTitle:Vo,loadfolderbutton:ro,loadfoldertooltip:uo,metaDescription:Jn,noimage:vo,open:bo,or:aa,previousVersion:Bo,processing:co,reconvert:ko,reconvertTip:zo,reset:No,save:wo,selectLanguage:no,settings:Oo,status:Uo,success:jo,threads:To,title:Qn,width:Wo},Symbol.toStringTag,{value:"Module"})),ki="Arabic",zi="German",Ai="English",Ti="Spanish",xi="Finnish",Ii="French",Si="Hindi",Ci="Indonesian",Li="Italian",$i="Japanese",Ei="Korean",Fi="Dutch",Ui="Polish",Oi="Portuguese",Pi="Russian",Mi="Turkish",Ni="Ukrainian",Ri="Chinese",Di={ar:ki,de:zi,en:Ai,es:Ti,fi:xi,fr:Ii,hi:Si,id:Ci,it:Li,ja:$i,ko:Ei,nl:Fi,pl:Ui,pt:Oi,ru:Pi,tr:Mi,uk:Ni,"zh-hant":"Chinese(hant)",zh:Ri},Ct=[],ia={en:sa},en={},hn=Object.assign({"./locales/ar.json":()=>fe(()=>import("./ar-R1nWn6FE.js"),[]),"./locales/de.json":()=>fe(()=>import("./de-BQGs2pL0.js"),[]),"./locales/en.json":()=>fe(()=>Promise.resolve().then(()=>bi),void 0),"./locales/es.json":()=>fe(()=>import("./es-hNFH7CpH.js"),[]),"./locales/fi.json":()=>fe(()=>import("./fi-BlW9_Dlc.js"),[]),"./locales/fr.json":()=>fe(()=>import("./fr-7Yf_xj9t.js"),[]),"./locales/hi.json":()=>fe(()=>import("./hi-BKWJrdmz.js"),[]),"./locales/id.json":()=>fe(()=>import("./id-CiMytmiw.js"),[]),"./locales/it.json":()=>fe(()=>import("./it-CgS7wTTn.js"),[]),"./locales/ja.json":()=>fe(()=>import("./ja-wB-x4xsc.js"),[]),"./locales/ko.json":()=>fe(()=>import("./ko-Bv8ld06G.js"),[]),"./locales/nl.json":()=>fe(()=>import("./nl-Bz24Wvu0.js"),[]),"./locales/pl.json":()=>fe(()=>import("./pl-0tUdSb8Q.js"),[]),"./locales/pt.json":()=>fe(()=>import("./pt-tZDqszsz.js"),[]),"./locales/ru.json":()=>fe(()=>import("./ru-D-zV02m3.js"),[]),"./locales/tr.json":()=>fe(()=>import("./tr-hDjZ1tCY.js"),[]),"./locales/uk.json":()=>fe(()=>import("./uk-BpKnjUhd.js"),[]),"./locales/zh-hant.json":()=>fe(()=>import("./zh-hant-DcmolfSj.js"),[]),"./locales/zh.json":()=>fe(()=>import("./zh-qpBVarT7.js"),[])});var _n;for(const l in hn){const i=(_n=l.match(/\/([a-z]{2}(?:-[a-z]+)?)\.json$/i))==null?void 0:_n[1];i&&(Ct.push(i),!(i in ia)&&(en[i]=hn[l]))}let Zt=Bi();Zt in en||(Zt="en");const Lt=Ha({legacy:!1,globalInjection:!0,locale:Zt,fallbackLocale:"en",messages:ia,warnHtmlMessage:!1,missingWarn:!1,fallbackWarn:!1});async function ji(l){if(Lt.global.availableLocales.indexOf(l)>=0)return;const i=await en[l]();Lt.global.setLocaleMessage(l,i),await lt()}function Bi(){const l=location.pathname;return String(l.match(/[^/]+(?=\/?$)/)||"").toLowerCase()}const Zi=["innerHTML"],Wi=be({__name:"switch-lang",emits:["lang-ready","lang-change"],async setup(l,{emit:i}){let u,s;const o=rt(nt),a=yn(),{locale:p,t:c}=Ke(),h=i,g=Object.entries(Di).map(([y,$])=>({label:$,value:y}));g.sort((y,$)=>{const S=y.label,I=$.label;return S>I?1:S<I?-1:0}),De(()=>{a.afterEach((y,$,S)=>{m(),o.switchToolTipVisibility()})}),Va(async()=>{}),[u,s]=qa(()=>m()),await u,s();async function k(y){(y!==p.value||Lt.global.availableLocales.indexOf(y)===-1)&&(h("lang-change",y),await ji(y),p.value=y,document.title=c("title"),await lt()),h("lang-ready",y)}async function m(){const y=a.currentRoute.value.path||"",$=String(y.match(new RegExp("(?<=^\\/)[^/]+"))||"");$&&Ct.includes($)?(await k($),p.value=$):await r()}async function r(){const y=v().toLowerCase(),$=y.split(/[-_]/)[0];if(Ct.includes($)){let S=$;if($==="zh")switch(y){case"zh-hant":case"zh-mo":case"zh-hk":case"zh-tw":S="zh-hant"}await k(S)}}function v(){const y=window.navigator;return y.language||y.userLanguage||y.browserLanguage}function x(y){a.push("/"+y+"/")}return(y,$)=>{const S=_e,I=Xt,E=we;return O(),te(E,{to:!1,"display-directive":"show",show:e(o).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(o).LANDSCAPE.value?"left":"bottom",duration:0,delay:50},{trigger:t(()=>[n(I,{ref:"langselect",size:"tiny",style:{width:"100%"},"consistent-menu-width":!1,options:e(g),"_v-model:value":"locale",value:e(p),"onUpdate:value":x},{arrow:t(()=>[n(S,null,{default:t(()=>[n(e(Ga))]),_:1})]),_:1},8,["options","value"])]),default:t(()=>[_("div",{innerHTML:y.$t("selectLanguage")},null,8,Zi)]),_:1},8,["show","placement"])}}}),nt=Symbol("global variables"),Hi=be({__name:"Avif2Jpeg",emits:["ready"],setup(l,{emit:i}){const{t:u,locale:s}=Ke(),o=i,a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),p=w(null);w(0);let c=w(void 0);const h=w(!0),g=w(!1),k=w(!1),m=w(!1),r=w(!1);Xa(nt,{showTooltipsBeforeMounted:c,LANDSCAPE:h,IS_SP:a,switchToolTipVisibility:I,SSR:!1}),De(()=>{E(),window.addEventListener("resize",E),I(),setTimeout(()=>k.value=!0,3e3)}),kn(()=>{window.removeEventListener("resize",E)});const v=200;let x=0,y=!0;function $(){m.value=!1,x=Date.now()}function S(){const b=y?0:Math.max(0,v-(Date.now()-x));y=!1,setTimeout(()=>m.value=!0,b),o("ready")}async function I(){}function E(){const b=document.body.clientWidth,L=document.body.clientHeight;h.value=b*.75>L||b>900}function W(b){p.value=b}function Z(b){r.value=b}return(b,L)=>{const q=$e,H=_e,se=ut;return O(),te(q,{vertical:"",align:"stretch",class:"avif2jpeg"},{default:t(()=>[n(hl,null,{"lang-switch":t(()=>[(O(),te(Ka,null,{default:t(()=>[n(Wi,{onLangChange:$,onLangReady:S})]),_:1}))]),_:1}),n(qe,{name:"fade"},{default:t(()=>[e(m)?(O(),te(q,{key:0,vertical:"",align:"stretch",justify:"space-between",style:{height:"100%"}},{default:t(()=>[n(q,{justify:"space-around",vertical:"",style:{height:"100%"}},{default:t(()=>[n(yl),n(q,{justify:"center"},{default:t(()=>[n(ai,{"_v-model:expanded":"UserSettings.expandExtButtons",target:e(B).acceptTypeValue,"onUpdate:target":L[0]||(L[0]=R=>e(B).acceptTypeValue=R),userExtensions:e(B).editedAcceptTypes,"onUpdate:userExtensions":L[1]||(L[1]=R=>e(B).editedAcceptTypes=R),"disable-notifying-folder-select":e(B).disableNotifyingFolderSelect,"onUpdate:disableNotifyingFolderSelect":L[2]||(L[2]=R=>e(B).disableNotifyingFolderSelect=R),forbidden:e(g),onInput:W,onClick:L[3]||(L[3]=R=>Z(!0)),onCancel:L[4]||(L[4]=R=>Z(!1))},null,8,["target","userExtensions","disable-notifying-folder-select","forbidden"])]),_:1}),n(Rs,{input:e(p),format:e(B).imageFormat,quality:e(B).imageQuality,"retain-extension":e(B).retainExtension,maxZipSizeMB:e(B).maxZipSizeMB,threads:e(B).multithread?e(B).threadCount:0,"show-note":e(r),"onUpdate:showNote":L[5]||(L[5]=R=>Ze(r)?r.value=R:null),onStart:L[6]||(L[6]=R=>g.value=!0),onEnd:L[7]||(L[7]=R=>g.value=!1),"_:multi-thread-count":"val => availableThreadCount = val"},null,8,["input","format","quality","retain-extension","maxZipSizeMB","threads","show-note"]),n(q,{vertical:"",align:"center"},{default:t(()=>[n(se,{trigger:"manual",placement:"top","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(H,{size:"5vh",color:"#DADADA",style:{margin:"0px"}},{default:t(()=>[n(e(Ya))]),_:1})]),default:t(()=>[L[18]||(L[18]=_("span",null,"CONVERT TO👇",-1))]),_:1})]),_:1}),n(q,{vertical:"",align:"center"},{default:t(()=>[n(ii,{format:e(B).imageFormat,"onUpdate:format":L[8]||(L[8]=R=>e(B).imageFormat=R),quality:e(B).imageQuality,"onUpdate:quality":L[9]||(L[9]=R=>e(B).imageQuality=R)},null,8,["format","quality"]),n(fi,{"retain-ext":e(B).retainExtension,"onUpdate:retainExt":L[10]||(L[10]=R=>e(B).retainExtension=R),"use-folder-name-for-zip":e(B).useFolderNameForZip,"onUpdate:useFolderNameForZip":L[11]||(L[11]=R=>e(B).useFolderNameForZip=R),"max-zip-size":e(B).maxZipSizeMB,"onUpdate:maxZipSize":L[12]||(L[12]=R=>e(B).maxZipSizeMB=R),"_v-model:expanded":"UserSettings.expandAdvSettings",multithread:e(B).multithread,"onUpdate:multithread":L[13]||(L[13]=R=>e(B).multithread=R),"thread-count":e(B).threadCount,"onUpdate:threadCount":L[14]||(L[14]=R=>e(B).threadCount=R),"_:thread-max":"availableThreadCount","shrink-image":e(B).shrinkImage,"onUpdate:shrinkImage":L[15]||(L[15]=R=>e(B).shrinkImage=R),"max-width":e(B).maxWidth,"onUpdate:maxWidth":L[16]||(L[16]=R=>e(B).maxWidth=R),"max-height":e(B).maxHeight,"onUpdate:maxHeight":L[17]||(L[17]=R=>e(B).maxHeight=R)},null,8,["retain-ext","use-folder-name-for-zip","max-zip-size","multithread","thread-count","shrink-image","max-width","max-height"])]),_:1}),n(_i)]),_:1})]),_:1})):ge("",!0)]),_:1})]),_:1})}}}),tn=be({__name:"App",setup(l){const i={Statistic:{valueFontSize:"1em"},Popover:{borderRadius:"0.4em",boxShadow:"2px 2px 5px 0px #555555"},Tooltip:{},Image:{toolbarColor:"#00000099"}},u=w(!0);return De(()=>{u.value=!1}),(s,o)=>{const a=nl,p=tl,c=el,h=Ja,g=Qa,k=ol;return O(),te(k,{"theme-overrides":i,style:{width:"100%",height:"100%"}},{default:t(()=>[n(g,null,{default:t(()=>[n(h,{placement:"top-right",max:20},{default:t(()=>[n(c,{placement:"top-left",closable:!0,max:50},{default:t(()=>[n(p,null,{default:t(()=>[n(a,null,{default:t(()=>[n(Hi,{class:wt({hide:e(u)})},null,8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),ra=[{path:"/",name:"Home",component:tn}];for(const l of Ct)ra.push({path:"/"+l+"/",strict:!0,name:l,component:tn});al(tn,{routes:ra,base:"/avif2jpeg/dist/"},({app:l,router:i,routes:u,isClient:s,initialState:o})=>{l.use(Lt)});
