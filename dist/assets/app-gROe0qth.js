var $a=Object.defineProperty;var La=(a,s,g)=>s in a?$a(a,s,{enumerable:!0,configurable:!0,writable:!0,value:g}):a[s]=g;var Mt=(a,s,g)=>La(a,typeof s!="symbol"?s+"":s,g);import{r as rt,d as _e,i as We,o as O,c as V,w as t,a as n,u as e,b as C,t as r,N as ve,_ as qt,e as Ae,L as Ea,f as _,g as ae,h,F as ze,j as Ze,B as Te,k as bt,l as Y,m as Fa,n as Ma,p as Ce,q as xt,s as Gt,v as he,x as Oa,y as we,z as ht,A as _t,C as kt,D as At,E as Me,G as ie,T as je,H as Kt,I as Qt,J as Re,K as Yt,M as Ve,O as Be,P as ut,Q as Xt,R as Ee,S as Jt,U as Qe,V as ue,W as Pa,X as Ua,Y as zt,Z as gt,$ as Ot,a0 as tt,a1 as Na,a2 as en,a3 as Tt,a4 as Da,a5 as tn,a6 as ja,a7 as nn,a8 as mt,a9 as Le,aa as Ye,ab as Ra,ac as Za,ad as Ba,ae as Ha,af as an,ag as on,ah as It,ai as St,aj as Wa,ak as ln,al as Va,am as qa,an as Xe,ao as Ga,ap as Ka,aq as Ie,ar as Qa,as as Ya,at as Xa,au as Ja,av as Ct,aw as eo,ax as to,ay as no,az as ao,aA as sn,aB as oo,aC as lo,aD as rn,aE as un,aF as Ge,aG as Ke,aH as io,aI as so,aJ as ro,aK as uo,aL as co,aM as po,aN as fo,aO as go,aP as mo,aQ as vo,aR as ho,aS as _o,aT as yo,aU as wo,aV as bo,aW as xo,aX as ko,aY as Ao,aZ as zo}from"./vendor-DJshNPBh.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const d of i)if(d.type==="childList")for(const l of d.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function g(i){const d={};return i.integrity&&(d.integrity=i.integrity),i.referrerPolicy&&(d.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?d.credentials="include":i.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(i){if(i.ep)return;i.ep=!0;const d=g(i);fetch(i.href,d)}})();const To={imageFormat:"image/jpeg",imageQuality:90,expandExtButtons:!1,acceptTypeValue:void 0,editedAcceptTypes:"",expandAdvSettings:!1,retainExtension:!1,maxZipSizeMB:1e3,useFolderNameForZip:!1,multithread:!0,threadCount:void 0,shrinkImage:!1,maxWidth:4096,maxHeight:4096,disableNotifyingFolderSelect:!1},R=rt(dn({}));function Io(){dn(R)}function dn(a){return Object.assign(a,To)}const cn="avif2jpeg",vt=JSON.parse(localStorage.getItem(cn)||"{}");for(const a in R)vt.hasOwnProperty(a)&&vt[a]!==void 0&&(R[a]=vt[a]);window.addEventListener("unload",()=>{const a={};for(const s in R)a[s]=R[s];localStorage.setItem(cn,JSON.stringify(a))});const So=_e({__name:"github",setup(a){const s=We(Ne);return(g,o)=>{const i=ve,d=qt,l=Ae;return O(),V(l,{to:!1,"display-directive":"show",show:e(s).showTooltipsBeforeMounted.value,trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(d,{href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-size":"small","font-weight":"bolder"}},{default:t(()=>[n(i,null,{default:t(()=>[n(e(Ea))]),_:1}),C("GitHub")]),_:1})]),default:t(()=>[C(" "+r(g.$t("githubOpenSource")),1)]),_:1},8,["show"])}}}),Co=h("h3",null,"Used Framework and Libraries",-1),$o=["href"],Lo=_e({__name:"licenses",setup(a){const s=_(!1),g={Vue:"https://github.com/vuejs/core/blob/main/LICENSE",Vite:"https://github.com/vitejs/vite/blob/main/LICENSE","Vite SSG":"https://github.com/antfu/vite-ssg/blob/main/LICENSE","Naive UI":"https://github.com/TuSimple/naive-ui/blob/main/LICENSE",Ionicons:"https://github.com/ionic-team/ionicons/blob/main/LICENSE"};return(o,i)=>{const d=Te;return O(),ae(ze,null,[n(d,{text:"",onClick:i[0]||(i[0]=l=>s.value=!0),style:{color:"black","font-size":"small"}},{default:t(()=>[C("Licenses")]),_:1}),n(e(bt),{preset:"dialog",ref:"dialog",show:s.value,"onUpdate:show":i[1]||(i[1]=l=>s.value=l),"positive-text":"OK",title:"Licenses"},{default:t(()=>[Co,h("ul",null,[(O(),ae(ze,null,Ze(g,(l,p)=>h("li",null,[h("a",{href:l},r(p),9,$o)])),64))])]),_:1},8,["show"])],64)}}}),Eo=1,Fo=7,Mo=10,Oo="",lt={major:Eo,minor:Fo,build:Mo,tag:Oo},Po={style:{"font-size":"x-small","user-select":"none"}},Uo=_e({__name:"version",setup(a){const s=["0.0.118"],g=`${lt.major}.${lt.minor}.${lt.build}${lt.tag}`,o=s.map(p=>({label:`v${p}`,key:p,value:p}));function i(p){const{key:x,label:k}=p,A=l(x),c=Y("a",{href:A},k),E=Y("div",null,c);return Y("div",null,E)}function d(p){location.href=l(p)}function l(p){return`/avif2jpeg/old/${p}/`}return(p,x)=>{const k=Fa;return O(),V(k,{"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start",options:e(o),"render-label":i,"onUpdate:value":d},{header:t(()=>[h("span",Po,r(p.$t("previousVersion")),1)]),default:t(()=>[h("span",{style:{cursor:"pointer"}},"v"+r(g))]),_:1},8,["options"])}}}),No=_e({__name:"header",setup(a){return(s,g)=>{const o=Ce,i=xt;return O(),V(o,{vertical:"",justify:"start"},{default:t(()=>[n(o,{justify:"space-between",style:{"box-sizing":"border-box",padding:"4px",margin:"0px"}},{default:t(()=>[n(o,{align:"start"},{default:t(()=>[n(So),n(Uo),n(o,{align:"center"},{default:t(()=>[n(Lo)]),_:1})]),_:1}),n(o,{align:"end",style:{"font-size":"x-small"}},{default:t(()=>[Ma(s.$slots,"lang-switch")]),_:3})]),_:3}),n(i,{style:{margin:"0px"}})]),_:3})}}}),Do={style:{padding:"0px",margin:"0px","text-align":"center"}},jo={key:0},Ro=_e({__name:"title",setup(a){const s=Gt(),g=he(()=>{const o=s.currentRoute.value.path||"";return!String(o.match(new RegExp("(?<=^\\/)[^/]+"))||"")});return(o,i)=>{const d=qt,l=Oa("router-link"),p=Ce;return O(),V(p,{align:"center",justify:"center",style:{margin:"0px"}},{default:t(()=>[h("h1",Do,[e(g)?(O(),ae("span",jo,r(o.$t("title")),1)):(O(),V(l,{key:1,to:"../",custom:""},{default:t(({navigate:x,href:k})=>[n(d,{href:k,onClick:x,style:{color:"black","word-break":"keep-all","overflow-wrap":"break-word"}},{default:t(()=>[C(r(o.$t("title")),1)]),_:2},1032,["href","onClick"])]),_:1}))])]),_:1})}}}),Zo="/avif2jpeg/dist/outofmemory.png";function Bo(a){return new Worker("/avif2jpeg/dist/assets/worker.canvas-DtC2Nijb.js",{name:a==null?void 0:a.name})}let pn=0;class Ho extends Bo{constructor(){super(...arguments);Mt(this,"id",pn++)}release(){ct(this)}}const yt=[],He=new Set,Je=new Map,et=new Map,dt=new Set;function Wo(a,s){const g=new Ho;yt.push(g);{const o=Promise.resolve(g);He.add(o),Je.set(g,o)}return g}function Vo(a){const s=new Promise(g=>{et.set(a,g)});He.add(s),Je.set(a,s),dt.add(a)}async function qo(){let a,s;do a=await Promise.any(He);while(dt.has(a));return s=Je.get(a),Je.delete(a),He.delete(s),Vo(a),a}function ct(a){const s=et.get(a);s&&(et.delete(a),dt.delete(a),s(a))}function fn(){for(const a of et.keys())ct(a)}async function Pt(){return await Promise.all(He)}function Ut(){fn();for(const a of yt)a.terminate();yt.length=0,He.clear(),Je.clear(),et.clear(),dt.clear(),pn=0}function Go(a){return new Worker("/avif2jpeg/dist/assets/worker.zip-C_vanirX.js",{name:a==null?void 0:a.name})}const Ko=1,Qo=10,Yo=1024*1024*4,Xo=100;async function Jo(a,s,g,o,i,d,l,p,x,k,A,c){const E=new Map,y=new Map,f=Math.min(g.threads-1,l.length);Ut();const m=new Go,$=el(m,a,s,p,E);m.postMessage({action:"set-config",zipSize:g.maxZipSizeMB*1024*1024,keepExt:g.retainExtension,outputExt:A,imageType:c});const S=tl(a,s,o,i,d,l,p,y,E);for(let F=0;F<f;F++){const W=Wo();W.onmessage=S;const{port1:Q,port2:oe}=new MessageChannel;m.postMessage({action:"set-port"},[Q]),W.postMessage({},[oe])}const b=we(s,F=>{F&&(b(),fn())});a.demandImage=F=>{m.postMessage({action:"request-image",index:F})};const L=l.length===1;let w=0,v=0,z="",G=0;for(;G<l.length;){const F=await qo();if(s.value){ct(F);break}const W=[];let Q=!1;const oe=l.length-G,de=Math.min(G+Math.max(Math.min(Qo,oe/g.threads|0),1),l.length);let se=0,ce=!1;const le=Date.now();for(le-v>Xo&&(v=le,ce=!0);G<de&&!(se>Yo);G++){const M=l[G],T=M._id;se+=M.size,Q=G===l.length-1,E.has(T)||E.set(T,M),W.push({index:G,file:M,fileId:T,outputPath:z,type:x,quality:k/100,demandThumbnail:ce||Q,isSingleImage:L,maxSize:R.shrinkImage?{width:R.maxWidth,height:R.maxHeight}:null,webkitRelativePath:M.webkitRelativePath}),M.webkitRelativePath||M.name,y.has(M)||(w++,a.index=w),ce=!1}if(F.postMessage(W),Q&&(await Pt(),s.value))break}if(await Pt(),!s.value){let F;await new Promise(W=>{F=we([()=>a.done,s],()=>{(a.done>=w||s.value)&&W(void 0)},{immediate:!0})}),F()}m.postMessage({action:"squeeze"}),await $,b();const K={value:!1},fe=()=>{K.value=!0,Ut(),m.terminate()};let U=!1;return{callbackToClearConverter:fe,callbackToGenerateFailedZips:async F=>{U||(U=!0,await nl(F,m,K,a))}}}function el(a,s,g,o,i){return new Promise(l=>{a.onmessage=p=>{const x=p.data,{action:k}=x;if(k==="add-zip-completed"){const{fileId:y}=x;s.done++,s.success++,o.add(y);return}if(k==="respond-image"){const{url:y,index:f,path:m,size:$,fileId:S}=x;s.convertedImageUrl=y,s.convertedImageSize=$,s.convertedImageIndex=f,s.convertedImageName=m,s.convertedImageFileId=S;let b="",P=0,L="";if(S>=0){const w=i.get(S);b=URL.createObjectURL(w),P=w.size,L=w.name}s.convertedImageOrgUrl=b,s.convertedImageOrgSize=P,s.convertedImageOrgName=L;return}const{size:A,count:c}=x,E="url"in p.data?p.data.url:"";switch(k){case"push-zip":s.zips.push({url:E,size:A,count:c}),s.zippedTotalCount+=c,s.zippedTotalSize+=A;break;case"squeeze-zip":c>0&&(s.zips.push({url:E,size:A,count:c}),s.zippedTotalCount+=c,s.zippedTotalSize+=A),l(void 0);break;case"push-filelist":s.failedFileZippedCount++;break;case"squeeze-filelist-zip":s.failedZipDone=!0;case"push-filelist-zip":s.failedZips.push({url:E,size:A,count:c});break;case"zip-error":case"zip-squeeze-error":s.zippingErrorCount+=c,k==="zip-squeeze-error"&&l(void 0);break}}})}function tl(a,s,g,o,i,d,l,p,x,k,A,c){let E=0;const y=_(new Map),f=_(new Map);return $=>{const S=$.target,{data:b}=$,{action:P}=b;if(s.value)switch(P){case"file-canceled":a.done++;return}switch(P){case"list-start":break;case"file-start":{const{index:L,path:w,fileId:v}=b,z={key:E++,core:S.id,index:L,path:w,command:"‚û°Ô∏èstarted"};y.value.set(S.id,z),a.logs.push(z);break}case"file-load":{const{thumbnail:L,width:w,height:v}=b;y.value.get(S.id).command="üñºÔ∏èloaded",L&&(a.thumbnail=L);break}case"file-converted":{const{index:L,path:w,fileId:v}=b,z=y.value.get(S.id);z.command="üîÉconverted",f.value.set(v,z),a.converted++;break}case"file-completed":{const{inputsize:L,outputsize:w,fileId:v}=b;a.inputTotalSize+=L,a.outputTotalSize+=w;const z=f.value.get(v);z&&(z.command="‚úÖcompleted",z.completed=!0);break}case"file-error":{const{index:L,path:w,fileId:v}=b,z=x.get(v);if(!z)throw new Error(`the file doesn't exist in the Map. "${v}":"${w}"`);const G=p.get(z)||0,K=y.value.get(S.id);G<Ko?(p.set(z,G+1),d.push(z),K.command="‚ö†Ô∏èretrying",K.error=!0,o.warning(`retrying "${w}"`,{duration:3e3})):(a.done++,a.failure++,K.command="‚ùófailed",K.error=!0,i.error({content:`failed to load "${w}"`,duration:5e3}));break}case"file-canceled":{const{fileId:L,path:w}=b,v=f.value.get(L);a.done++,a.failure++,v.command="‚ùózip-aborted",v.error=!0;break}case"list-end":{ct(S);break}}}}async function nl(a,s,g,o){let i=0;for(const d of a){const l=(d.webkitRelativePath||d.name).replace(/^\//,"");if(g.value)return;i-o.failedFileZippedCount>20&&await new Promise(p=>setTimeout(p,10)),s.postMessage({action:"add-filelist",file:d,path:l}),i++}s.postMessage({action:"squeeze-filelist"})}async function al(a,s,g,o,i,d){let l="";const p=document.createElement("canvas"),x=p.getContext("2d");let k=new ht;const A=o.format,c=o.quality/100,E=[...A.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),y=a.length,f=o.maxZipSizeMB*1024*1024;let m=0,$=null,S="",b="",P=0,L=0,w=0,v=0,z=0,G=!1;for(const F of a){if(i.value)break;const W=F.name;let Q="";const oe=F.size,de=(F.webkitRelativePath||F.relativePath||W).replace(/^\//,""),se=document.createElement("img");m++;const ce={key:w++,core:-1,index:m,path:de,command:"‚û°Ô∏èstart"};d.index=m,d.logs.push(ce),d.logs.length-1;let le;l&&(URL.revokeObjectURL(l),l=""),l=URL.createObjectURL(F),b=l,P=F.size,se.src=l;const M=await gn(se).then(()=>!0).catch(()=>!1);if(!se.complete||!M||i.value){d.done++,d.failure++,ce.command="‚ùófailed";continue}const T=se.width,Z=se.height;if(p.width=T,p.height=Z,x.drawImage(se,0,0,T,Z,0,0,T,Z),ce.command="üñºÔ∏èimgload",d.thumbnail=se,le=await new Promise(N=>{const X=J=>{$=J,N(J==null?void 0:J.arrayBuffer())};p.toBlob(X,A,c)}),i.value)break;if(!le){d.failure++;continue}L=le.byteLength,d.converted++;let I="";if(z+L>=f){try{I=k.url()}catch{G=!0,alert("memory problem occurred");break}d.zips.push({url:I,size:z,count:v}),d.zippedTotalCount+=v,d.zippedTotalSize+=z,z=0,v=0,k.clear(),k=new ht}z+=L;const D=de||W;for(let N=1;N<255&&(Q=D.replace(o.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+(N>1?`(${N})`:"")+"."+E,!!k.has(Q));N++);d.done++;try{v++,k.add(Q,le),d.inputTotalSize+=oe,d.outputTotalSize+=L}catch{continue}S=Q,d.success++,ce.command="‚úÖcompleted",ce.completed=!0,s.add(F._id)}if(d.success>0)if(y===1)$&&(d.convertedImageIndex=0,d.convertedImageName=S.replace(/^.*\/(?=[^/]+$)/,"").replace(o.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+E,d.convertedImageUrl=URL.createObjectURL($),d.convertedImageOrgUrl=b,d.convertedImageOrgSize=P);else try{if(G)throw new Error("terminated zipping process for memory problems");const F=k.url();d.zips.push({url:F,count:v,size:z}),d.zippedTotalCount+=v,d.zippedTotalSize+=z}catch{}const K={value:!1},fe=()=>{K.value=!0};let U=!1;return{callbackToClearConverter:fe,callbackToGenerateFailedZips:async F=>{U||(U=!0,ol(F,f,d,K))}}}async function ol(a,s,g,o){let i=0,d=0,l=new ht;for(let p=0;p<a.length;p++){const x=a[p],k=(x.webkitRelativePath||x.name).replace(/^\//,"");let A;try{A=await x.arrayBuffer()}catch{g.failedToCreateFailedZip=!0;return}if(o.value)return;if(l.add(k,A),d+=x.size,i++,g.failedFileZippedCount++,d>=s||p===a.length-1){const c=l.url();g.failedZips.push({url:c,size:d,count:i}),l.clear(),d=0,i=0}}g.failedZipDone=!0}function gn(a){if(typeof a.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((s,g)=>{a.onload=s,a.onerror=g})}const Oe=(a,s)=>{const g=a.__vccOpts||a;for(const[o,i]of s)g[o]=i;return g},ll=a=>(kt("data-v-5dab19ad"),a=a(),At(),a),il={class:"container"},sl=ll(()=>h("span",{class:"text"},"ZIP",-1)),rl={__name:"zipicon",setup(a){return(s,g)=>(O(),ae("span",il,[n(e(ve),null,{default:t(()=>[n(e(_t))]),_:1}),sl]))}},ul=Oe(rl,[["__scopeId","data-v-5dab19ad"]]);function Ue(a,s=2){const g=Math.sign(a);a=Math.abs(a);const o=["Bytes","KB","MB","GB"],i=a?Math.floor(Math.log(a)/Math.log(1024)):0;return`${(a/Math.pow(1024,i)*g).toFixed(s)}${o[i]}`}function mn(a,s=100,g=!1){s=typeof s=="number"?{width:s,height:s}:s;const{width:o,height:i}=s;let{width:d,height:l}=a;const p=d/l,x=o/i;return p>=x?(d=g?Math.min(o,d):o,l=d/p|0):(l=g?Math.min(i,l):i,d=l*p|0),{width:d,height:l}}const dl=["href","download","title"],cl=_e({__name:"thumbnail",props:{src:{},width:{},height:{},maxWidth:{default:100},maxHeight:{default:100},expand:{type:Boolean,default:!1},loading:{type:Boolean},fileName:{},allowNext:{type:Boolean},allowPrev:{type:Boolean}},emits:["load","error","next","prev"],setup(a,{expose:s,emit:g}){Me();const o=a,i=g;s({download:m,openPreview:$});const d=_(),l=_(!0),p=_(""),x=_(100),k=_(100),A=_(!1),c=rt({width:"100px",height:"100px",minWidth:"50px",minHeight:"50px"});we(o,(S,b)=>{c.width=(o.width||100)+"px",c.height=(o.height||100)+"px"}),we(()=>o.src,()=>{f(o.src)},{immediate:!0});async function E(S){const b=S.target,P=b.naturalWidth,L=b.naturalHeight,{width:w,height:v}=mn({width:P,height:L},{width:o.maxWidth||100,height:o.maxHeight||100},o.expand);x.value=w,k.value=v,i("load",{src:b.src,width:P,height:L}),l.value=!1,await new Promise(z=>setTimeout(z,100)),!l.value&&(A.value=!0)}function y(S){const b=S.target;i("error",b.src)}async function f(S){l.value=!0,A.value=!1,await new Promise(b=>setTimeout(b,150)),p.value=S}function m(){const S=document.createElement("a");S.href=p.value,S.download=o.fileName,S.click()}function $(){var S,b,P,L;try{(b=(S=d.value)==null?void 0:S.previewInstRef)==null||b.setPreviewSrc(o.src),(L=(P=d.value)==null?void 0:P.previewInstRef)==null||L.toggleShow(!0)}catch{}}return(S,b)=>{const P=Yt,L=Ve,w=Be;return O(),V(e(Ae),null,{trigger:t(()=>[n(w,{show:e(l)||o.loading},{default:t(()=>[n(L,{justify:"center",align:"center",style:ie(e(c))},{default:t(()=>[h("a",{href:e(p),onClick:b[0]||(b[0]=Re(()=>{},["left","prevent"])),target:"_blank",download:o.fileName,title:o.fileName,style:{"line-height":"0px"}},[n(je,{mode:"in-out"},{default:t(()=>[Kt(n(P,{ref_key:"nImageRef",ref:d,"show-toolbar-tooltip":"","_:render-toolbar":"renderToolbar",onLoad:E,onError:y,src:e(p),width:e(x),height:e(k),style:{border:"1px solid silver"}},null,8,["src","width","height"]),[[Qt,e(A)]])]),_:1})],8,dl)]),_:1},8,["style"])]),_:1},8,["show"])]),default:t(()=>[C(" "+r(o.fileName),1)]),_:1})}}}),Nt=Oe(cl,[["__scopeId","data-v-fc8adbf9"]]),pl={style:{"font-weight":"bold",color:"gray"}},fl={style:{"font-weight":"bold",color:"gray"}},gl=["href","download"],ml=["href"],vl={style:{"font-size":"0.8em"}},hl=_e({__name:"image-viewer",props:{url:{},originalUrl:{},name:{},originalName:{},size:{},originalSize:{},length:{},index:{},isSingle:{type:Boolean}},emits:["demand-image"],setup(a,{expose:s,emit:g}){const o=a,i=g;s({download:W});const d=_(),l=_(),p=_(),x=ut(),{t:k}=Me();Xt();const A=_(!0),c=_(1),E=_(1),y=_(1);_(0);const f=_(""),m=_(1),$=_(1),S=_(!1),b=_(!1),P=_(!1),L=he(()=>{var M,T;return((T=(M=p==null?void 0:p.value)==null?void 0:M.previewInstRef)==null?void 0:T.previewSrc)===f.value}),w=he(()=>c.value<o.length),v=he(()=>c.value>1);let z=-1;we(c,()=>{c.value<1||c.value>o.length||(clearTimeout(z),z=setTimeout(()=>{o.index!==c.value-1&&(i("demand-image",c.value-1),S.value=!0,b.value=!1,P.value=!1)},100))}),we(()=>o.index,()=>{var T,Z;let M="";if(o.index===0&&A.value?(A.value=!1,c.value=1,M=o.url):o.index===c.value-1&&(S.value=!1,M=o.url),M){try{(Z=(T=p.value)==null?void 0:T.previewInstRef)!=null&&Z.displayed&&(L.value?p.value.previewInstRef.setPreviewSrc(M):p.value.previewInstRef.setPreviewSrc(o.originalUrl))}catch{}f.value=M}},{immediate:!0});let G="",K="";we(()=>o.url,()=>{if(o.url!==G){const M=G,T=K;setTimeout(()=>{URL.revokeObjectURL(M),URL.revokeObjectURL(T)},1e3),G=o.url,K=o.originalUrl}o.isSingle&&(A.value=!1,f.value=o.url)}),Ee(()=>{o.isSingle,i("demand-image",0),document.body.addEventListener("keydown",U),document.body.addEventListener("keydown",fe)}),Jt(()=>{document.body.removeEventListener("keydown",U),document.body.removeEventListener("keydown",fe)});function fe(M){var T,Z,I,D;if(M.key==="Escape")try{(Z=(T=p.value)==null?void 0:T.previewInstRef)!=null&&Z.displayed&&(M.stopPropagation(),(D=(I=p.value)==null?void 0:I.previewInstRef)==null||D.toggleShow(!1))}catch{}}function U(M){var T,Z;switch(M.key){case"ArrowRight":case"PageDown":oe(1);break;case"ArrowLeft":case"PageUp":oe(-1);break;case"ArrowUp":case"Home":c.value=1;break;case"ArrowDown":case"End":c.value=o.length;break;case" ":case"Enter":se();break;default:return}M.stopPropagation(),(Z=(T=p.value)==null?void 0:T.previewInstRef)!=null&&Z.displayed&&M.preventDefault()}function H({width:M,height:T}){E.value=M,y.value=T,b.value=!0}function F({width:M,height:T}){m.value=M,$.value=T,P.value=!0}function W(){L.value?d.value.download():l.value.download()}async function Q(M){try{const T=await fetch(M).then(Z=>Z.blob()).then(Z=>new Promise(I=>{const D=new FileReader;D.onload=I,D.readAsDataURL(Z)})).then(Z=>Z.target.result);navigator.clipboard.writeText(T),x.info({title:k("copiedDataURLDialogTitle"),content:()=>Y("div",[Y("div",k("copiedDataURLMessage"))]),positiveText:"OK"})}catch{x.error({title:"failed to copy Data URL",content:"could not copy Data URL",positiveText:"OK"})}}function oe(M){M>0&&c.value<o.length&&c.value++,M<0&&c.value>1&&c.value--}let de="";const se=()=>{var T,Z,I,D,N,X;de=(I=window.getComputedStyle((Z=(T=p==null?void 0:p.value)==null?void 0:T.previewInstRef)==null?void 0:Z.previewRef))==null?void 0:I.transform;const M=L.value;(X=(N=(D=p==null?void 0:p.value)==null?void 0:D.previewInstRef)==null?void 0:N.handleSwitchNext)==null||X.call(N),Qe(()=>{var J,ne,ye;L.value===M&&((ye=(ne=(J=p==null?void 0:p.value)==null?void 0:J.previewInstRef)==null?void 0:ne.handleSwitchNext)==null||ye.call(ne))})};function ce(){try{Qe(()=>p.value.previewInstRef.previewRef.style.transform=de)}catch{}}function le({nodes:M}){const T=Y(zt,{color:L.value?"green":"gray",offset:[-20,-12],value:(L.value?k("status.Converted"):k("status.Original"))+" "+c.value},()=>Y(Te,{round:!0,onClick(){se()},textColor:"white",size:"small",style:{marginLeft:"4px"}},{icon:()=>Y(L.value?Pa:Ua)}));M.next=Y(Te,{onClick(){oe(1)},disabled:!w.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>Y(gt)}),M.prev=Y(Te,{onClick(){oe(-1)},disabled:!v.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>Y(Ot)});try{const Z=M.download.children;Z.default=()=>k("save");const I=Z.trigger();I.props.onClick=W,Z.trigger=()=>I}catch{}return[T,...Object.values(M)]}return(M,T)=>{const Z=Ce,I=Ve,D=ve,N=tt,X=Na,J=en,ne=Tt,ye=Be;return O(),V(ye,{size:"large",show:A.value},{default:t(()=>[n(I,{justify:"center",align:"center",vertical:"",style:ie({visibility:A.value?"hidden":"visible"})},{default:t(()=>[n(I,{align:"center",wrap:!1},{default:t(()=>[n(X,{ref_key:"nImageGroupRef",ref:p,"show-toolbar-tooltip":"","render-toolbar":le,onPreviewNext:ce},{default:t(()=>[n(I,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(I,{align:"center",justify:"center",vertical:""},{default:t(()=>[n(I,{align:"center",justify:"center",wrap:!1,style:{"font-size":"smaller"},class:"original-thumb"},{default:t(()=>[n(Nt,{ref_key:"thumbOrgRef",ref:l,src:M.originalUrl,width:100,"max-width":100,"max-height":80,loading:S.value,"file-name":M.originalName,"allow-next":c.value<o.length,"allow-prev":c.value>1,onLoad:F,onNext:T[0]||(T[0]=be=>oe(1)),onPrev:T[1]||(T[1]=be=>oe(-1))},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(Z,{vertical:"",align:"center"},{default:t(()=>[h("span",pl,r(e(k)("status.Original")),1),n(Z,{justify:"center",style:{"white-space":"nowrap","font-family":"v-mono"}},{default:t(()=>[C(r(String(m.value).padStart(4,"¬†"))+" √ó "+r(String($.value).padStart(4,"¬†")),1)]),_:1}),n(Z,{justify:"center"},{default:t(()=>[C(r(e(Ue)(o.originalSize,0)),1)]),_:1})]),_:1})]),_:1})]),_:1}),n(I,{style:{margin:"1em"},class:"original-thumb"},{default:t(()=>[n(D,{size:"48",color:"silver"},{default:t(()=>[n(e(gt))]),_:1})]),_:1}),n(I,{vertical:"",align:"center",justify:"center"},{default:t(()=>[n(I,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(Nt,{ref_key:"thumbConvRef",ref:d,src:f.value,width:140,"max-width":140,"max-height":100,loading:S.value,"file-name":o.name,"allow-next":c.value<o.length,"allow-prev":c.value>1,onLoad:H,onNext:T[2]||(T[2]=be=>oe(1)),onPrev:T[3]||(T[3]=be=>oe(-1))},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(I,{vertical:"",align:"center"},{default:t(()=>[h("span",fl,r(e(k)("status.Converted")),1),n(I,{justify:"center",wrap:!0},{default:t(()=>[o.url?(O(),V(N,{key:0,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[h("a",{href:o.url,ref:"saveImg",target:"_blank",download:o.name},[n(e(Te),{round:"",size:"tiny"},{default:t(()=>[C(r(M.$t("save")),1)]),_:1})],8,gl)]),default:t(()=>[C(" "+r(M.$t("save")),1)]),_:1})):ue("",!0),o.url?(O(),V(N,{key:1,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[h("a",{href:o.url,target:"_self"},[n(e(Te),{onClick:T[4]||(T[4]=Re(be=>Q(o.url),["left","prevent","stop"])),round:"",size:"tiny"},{default:t(()=>[C("DataURL")]),_:1})],8,ml)]),default:t(()=>[C(" "+r(M.$t("convertedImageDataUrlTooltip")),1)]),_:1})):ue("",!0)]),_:1}),n(I,{justify:"center",style:{"white-space":"nowrap","font-family":"v-mono"}},{default:t(()=>[C(r(String(E.value).padStart(4," "))+" √ó "+r(String(y.value).padStart(4," ")),1)]),_:1}),n(I,{justify:"center"},{default:t(()=>[C(r(e(Ue)(o.size,0)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),n(I,{ref:"fileNameContainer",justify:"center",style:{"max-width":"320px"},title:o.name},{default:t(()=>[n(J,{"x-scrollable":!0,trigger:"hover",style:{"font-size":"smaller",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},{default:t(()=>[C(r(o.name),1)]),_:1})]),_:1},8,["title"]),M.isSingle?ue("",!0):(O(),V(I,{key:0,style:{"font-family":"v-mono"},align:"center"},{default:t(()=>[h("span",vl,r(e(k)("status.index"))+":",1),C(" "+r(c.value)+" / "+r(o.length),1)]),_:1})),M.isSingle?ue("",!0):(O(),V(I,{key:1,align:"center",justify:"center"},{default:t(()=>[n(e(Te),{onClick:T[5]||(T[5]=be=>oe(-1)),disabled:!e(v),circle:!0,size:"small"},{icon:t(()=>[n(D,null,{default:t(()=>[n(e(Ot))]),_:1})]),_:1},8,["disabled"]),n(ne,{value:c.value,"onUpdate:value":T[6]||(T[6]=be=>c.value=be),tooltip:!1,step:1,min:1,max:o.length,style:{width:"180px"}},null,8,["value","max"]),n(e(Te),{onClick:T[7]||(T[7]=be=>oe(1)),disabled:!e(w),circle:!0,size:"small"},{icon:t(()=>[n(D,null,{default:t(()=>[n(e(gt))]),_:1})]),_:1},8,["disabled"])]),_:1}))]),_:1},8,["style"])]),_:1},8,["show"])}}}),_l=Oe(hl,[["__scopeId","data-v-d568baaa"]]),yl={class:"log-table"},wl={class:"log-tr"},bl={class:"log-th"},xl={class:"log-th"},kl={style:{"min-width":"7em"},class:"log-th"},Al={style:{"padding-left":"2em"},class:"log-th"},zl={class:"log-td"},Tl={class:"log-td"},Il={class:"log-td"},Sl={class:"log-td"},Cl={style:{margin:"1px"}},$l=["href","download","onClick"],Ll={key:0,style:{position:"relative"}},El=["href","download"],Fl=["href","download"],Ml={key:0,style:{margin:"1px"}},Ol=["href","download","onClick"],Dt=99999,Pl=100,Ul=_e({__name:"status",props:{processing:{type:Boolean},status:{},interval:{}},emits:["all-zips-clicked","demand-zip-errors","demand-image"],setup(a,{emit:s}){const g=ut(),{t:o}=Me(),i=Xt(),d={W:160,H:80},l=a,p=s,x=_(!1),k=_([]),A=_(!1),c=_([]),E=_([]),y=_([0,0]),f=_([0,0]),m=_([0,0]),$=_([0,0]),S=_([0,0]),b=_([0,0]),P=_(0),L=_([0,0]),w=_(i.value.infoColor),v=_("#000000"),z=_("#000000"),G=_(0),K=_(0),fe=_(""),U=_("00:00:00");_(""),_("");const H=_(void 0),F=_(!1),W=_(!0),Q=_(!1),oe=he(()=>F.value?ce.value:se.value),de=_("16em"),se=_(5),ce=_(1e3),le=_(!0),M=_(!1),T=rt({name:"",originalName:"",size:0,url:"",originalUrl:"",originalSize:0,dataUrl:"",index:-1}),Z=_(null),I=_(null),D=_(),N=_();Ee(()=>{we(l.status,()=>ye(),{deep:!1}),we([I,le],()=>{if(!I.value||!le.value)return;const{width:me,height:ke}=mn(I.value,{width:d.W,height:d.H});Z.value.width=me,Z.value.height=ke,Z.value.style.width=me+"px",Z.value.style.height=ke+"px",I.value instanceof HTMLImageElement?Z.value.getContext("2d").drawImage(I.value,0,0,me,ke):(Z.value.getContext("bitmaprenderer").transferFromImageBitmap(I.value),I.value=null,l.status.thumbnail=null)});let u=0;const B=()=>{if(u)return;const me=Date.now();U.value="00:00:00",u=window.setInterval(()=>{const ke=(Date.now()-me)/1e3;U.value=`${String(ke/3600|0).padStart(2,"0")}:${String(ke/60%60|0).padStart(2,"0")}:${String(ke%60|0).padStart(2,"0")}`},300)};B(),we(()=>l.processing,(me,ke)=>{me?(B(),k.value=[],x.value=!1,A.value=!1,c.value=[],E.value=[]):(clearInterval(u),ye(),u=0),le.value=!1,M.value=!0,l.processing||be()});const ee=Ra();let q;const te=()=>{clearTimeout(q),q=setTimeout(()=>{if(!le.value||re)return;const me=D.value.$parent.$el.offsetHeight,ke=window.innerHeight-ee.parent.parent.vnode.el.offsetHeight-8;de.value=Math.max(me+ke,50)+"px"},100)};te(),window.addEventListener("resize",te);const pe=new ResizeObserver(te);pe.observe(ee.parent.parent.vnode.el);let re=!1;Da(()=>{re=!0,pe.disconnect(),clearInterval(u),clearTimeout(q),clearTimeout(ne),clearTimeout(nt),window.removeEventListener("resize",te)})}),we([()=>l.status.zips.length,()=>l.status.failedZips.length],()=>{const u=l.status;{c.value.length>u.zips.length&&(c.value.length=0);let B=0;const ee=u.zips.length===1&&u.zippedTotalCount===u.length;for(let q=c.value.length;q<u.zips.length;q++){const te=u.zips[q],pe=u.baseZipName+(ee?"":"-"+String(q+1).padStart(2,"0"))+".zip";B+=te.size,c.value[q]={url:te.url,size:te.size,number:ee?0:q+1,sizeByUnit:Ue(te.size),name:pe,count:te.count,clicked:!1}}}{E.value.length>u.failedZips.length&&(E.value.length=0);let B=0;const ee=u.failedZipDone&&u.failedZips.length===1;for(let q=E.value.length;q<u.failedZips.length;q++){const te=u.failedZips[q],pe=u.baseZipName+"-error"+(ee?"":"-"+String(q+1).padStart(2,"0"))+".zip";B+=te.size,E.value[q]={url:te.url,size:te.size,number:ee?0:q+1,sizeByUnit:Ue(te.size),name:pe,count:te.count,clicked:!1}}}});const X=l.interval||100;let J=!1,ne=0;function ye(){if(J)return;if(ne){J=!0;return}ne=window.setTimeout(()=>{ne=0,J&&(J=!1,ye())},X);const u=l.status;x.value=u.length>=2,f.value[1]=f.value[0],f.value[0]=u.index,m.value[1]=m.value[0],m.value[0]=u.success,$.value[1]=$.value[0],$.value[0]=u.failure,S.value[1]=S.value[0],S.value[0]=u.done,b.value[1]=b.value[0],b.value[0]=u.converted,P.value=u.length,L.value[1]=L.value[0],L.value[0]=u.zippedTotalCount,G.value=u.inputTotalSize,K.value=u.outputTotalSize;const B=K.value-G.value;fe.value=(B>=0?"+ ":"")+Ue(B);const ee=K.value/G.value,q=(256|Math.min(255,Math.max(0,ee-1.5)*255|0)).toString(16).substring(1);v.value="#"+q+"0000";const te=1024*1024,pe=(256|Math.min(255,Math.max(0,B/1024/te)*255|0)).toString(16).substring(1);if(z.value="#"+pe+"0000",y.value[1]=y.value[0],y.value[0]=m.value[0]/P.value*100,le.value||!l.processing){const re=u.logs.slice(-Dt);k.value.push(...re);const me=k.value.length-Dt;me>0&&k.value.splice(0,me),W.value&&re.length&&ot(),k.value.length>ce.value&&(ce.value*=2)}u.logs.length=0,I.value=u.thumbnail,l.processing&&(w.value=$.value[0]?i.value.warningColor:i.value.infoColor),u.convertedImageUrl!==T.url&&(T.url=u.convertedImageUrl,T.name=u.convertedImageName,T.dataUrl=u.convertedImageDataUrl,T.size=u.convertedImageSize||u.outputTotalSize,T.originalSize=u.convertedImageOrgSize,T.originalName=u.convertedImageOrgName,T.index=u.convertedImageIndex,T.originalUrl=u.convertedImageOrgUrl)}function be(){const u=l.status;w.value=l.status.success===l.status.length?i.value.successColor:i.value.errorColor,u.unconvertedFileCount>0,$.value[0]>0||(m.value[0],P.value)}const Pe=he(()=>[{key:"open",label:o("status.openFailedList"),icon:()=>Y(ve,()=>Y(tn)),onSelect(){$e()}},{key:"download",label:o("status.saveFailedList"),icon:()=>Y(ve,()=>Y(ja)),onSelect(){$e(!0)}},{key:"zip",label:`${o("status.zipFailedList")}`+(l.status.failedZipDone?`(‚úî${o("status.done")})`:""),icon:()=>Y(Be,{show:A.value&&!l.status.failedZipDone,size:"small"},()=>Y(ve,()=>Y(_t))),disabled:A.value,onSelect(u){return A.value=!0,p("demand-zip-errors"),!1}}]);function Se(u,B=!1){const{url:ee,name:q}=u;if(B){const te=document.createElement("a");te.href=ee,te.download=q,te.click()}u.clicked||(u.clicked=!0,l.processing||c.value.every(te=>te.clicked)&&p("all-zips-clicked"))}async function xe(){if(x.value){if(c.value.length>=2&&!await new Promise((ee,q)=>g.warning({title:o("Download"),content:o("status.confirmDownloadMessage",[c.value.length]),positiveText:"OK",negativeText:o("cancel"),onPositiveClick:()=>ee(!0),onNegativeClick:()=>q()})))return;const u=c.value;for(const B of u)Se(B,!0)}else N.value.download()}function $e(u=!1){const B=new Blob([l.status.unconvertedListText],{type:"text/plain;charset=utf8"}),ee=URL.createObjectURL(B),q=document.createElement("a");q.href=ee,q.target="_blank",u&&(q.download=l.status.baseZipName+"-error.txt"),q.click()}let nt=0,at=!1;function ot(u=!1){if(!at){if(nt){at=!0;return}Qe(()=>{!u&&(!F.value||!W.value)||(D.value.scrollTo({behavior:u?"instant":"smooth",top:k.value.length*50}),nt=window.setTimeout(()=>{nt=0,at&&(at=!1,ot())},Pl))})}}return(u,B)=>{const ee=Ce,q=Za,te=Ba,pe=tt,re=Ve,me=Ha,ke=an,pt=Ae,Aa=on,za=It,Ta=St,Ia=xt,qe=Te,Sa=ul,Et=zt,Ca=Wa;return O(),V(re,{vertical:"",justify:"center"},{default:t(()=>[n(ee,{justify:"center",align:"center",wrap:!1,style:{"white-space":"nowrap"}},{default:t(()=>[n(ee,{vertical:"",justify:"center",class:"left-column"},{default:t(()=>[n(q,{"tabular-nums":"",label:u.$t("status.elapsedTime")},{default:t(()=>[n(ee,null,{default:t(()=>[C(r(e(U)),1)]),_:1})]),_:1},8,["label"]),n(q,{"tabular-nums":"",label:u.$t("status.multiThreading")},{default:t(()=>[n(ee,{style:ie({color:l.status.threads?"":"red"})},{default:t(()=>[C(r(l.status.threads?u.$rt("{n} @:threads",l.status.threads):u.$t("disabled")),1)]),_:1},8,["style"])]),_:1},8,["label"]),n(q,{"tabular-nums":"",label:u.$t("status.outputSettings")},{default:t(()=>[n(ee,{vertical:"",justify:"end",style:{"font-size":"smaller","line-height":"1em"}},{default:t(()=>[h("div",null,"Type: "+r(l.status.type),1),h("div",null,"Zip: "+r(l.status.zipSize)+"MB",1)]),_:1})]),_:1},8,["label"])]),_:1}),n(me,{type:"multiple-circle","stroke-width":1,percentage:[e(m)[0]/e(P)*100|0,e(f)[0]/e(P)*100|0],color:[e(i).successColor,e(w)],"rail-style":[{stroke:u.processing?e(i).successColor:e(w),opacity:.3},{stroke:e(w),opacity:.3}],class:"center-column"},{default:t(()=>[n(ee,{vertical:"",align:"center",style:{"font-family":"v-mono","font-size":"xx-large","white-space":"nowrap"},wrap:!1,"wrap-item":!1},{default:t(()=>[h("span",{style:ie({color:e($)[0]?e(w):u.processing?e(i).successColor:e(w)})},[n(te,{duration:e(X)*3|0,from:e(y)[1]|0,to:e(y)[0]|0,active:!0},null,8,["duration","from","to"]),C("% ")],4),n(re,{wrap:!1,style:{border:"0px solid"}},{default:t(()=>[n(re,{vertical:"",size:"small",justify:"end"},{default:t(()=>[n(re,{justify:"end",wrap:!1},{default:t(()=>[e($)[0]>0?(O(),V(pe,{key:0,trigger:"hover",duration:0,delay:0,style:ie({color:e(i).errorColor}),placement:"left"},{trigger:t(()=>[h("span",{style:ie({fontSize:"xx-small",color:e(i).errorColor,lineHeight:"0"})}," ("+r(e($)[0].toLocaleString("en-us"))+") ",5)]),default:t(()=>[C(" "+r(u.$t("status.progressErrors"))+" ("+r(e($)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):ue("",!0),n(pe,{trigger:"hover",duration:0,delay:0,style:ie({color:e(i).infoColor}),placement:"left"},{trigger:t(()=>[h("span",{style:ie({fontSize:"xx-small",color:e(i).infoColor,lineHeight:"0"})},r(e(f)[0].toLocaleString("en-us")),5)]),default:t(()=>[C(" "+r(u.$t("status.progressStarted"))+" ("+r(e(f)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])]),_:1}),n(re,{justify:"end"},{default:t(()=>[n(pe,{trigger:"hover",duration:0,delay:0,style:ie({color:e(i).successColor}),placement:"bottom"},{trigger:t(()=>[h("span",{style:ie({fontSize:"medium",color:e(i).successColor})},[n(te,{duration:e(X)*3|0,from:e(m)[1],to:e(m)[0],active:!0,"show-separator":!0},null,8,["duration","from","to"])],4)]),default:t(()=>[C(" "+r(u.$t("status.progressSuccess"))+" ("+r(e(m)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])]),_:1})]),_:1}),n(re,{align:"end",style:{"font-size":"medium",border:"0px solid"}},{default:t(()=>[n(pe,{trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:t(()=>[C(" / "+r(e(P).toLocaleString("en-us")),1)]),default:t(()=>[C(" "+r(u.$t("status.progressTotal"))+" ("+r(e(P).toLocaleString("en-us"))+") ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["percentage","color","rail-style"]),n(ee,{vertical:"",style:{height:"100%"},justify:"center"},{default:t(()=>[n(q,{"tabular-nums":"",label:u.$t("status.inputSize")},{default:t(()=>[n(ee,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[C(r((e(G)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(q,{"tabular-nums":"",label:u.$t("status.outputSize")},{default:t(()=>[n(ee,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[C(r((e(K)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(q,{"tabular-nums":"",label:u.$t("status.outInRate")},{default:t(()=>[n(ee,{vertical:"",align:"end",justify:"start",style:{"font-size":"xx-small","font-family":"v-mono","line-height":"50%"}},{default:t(()=>[h("span",{style:ie({color:e(v),fontSize:"larger"})},"√ó "+r((e(K)/e(G)||1).toFixed(2)),5),h("span",{style:ie({color:e(z)})},"("+r(e(fe))+")",5)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1}),n(Ta,{"display-directive":"show","trigger-areas":["arrow","main"],"default-expanded-names":"log-collapse","expanded-names":e(le)?["log-collapse"]:[],"on-update:expanded-names":j=>{le.value=!!String(j)}},{default:t(()=>[n(za,{title:"Log",name:"log-collapse",style:{"white-space":"nowrap"}},nn({header:t(()=>[n(re,{align:"center",wrap:!1},{default:t(()=>[C(r(u.$t("status.log")),1),u.processing&&!e(le)?(O(),V(e(Be),{key:0,size:16})):ue("",!0)]),_:1})]),default:t(()=>[n(re,{wrap:!1,class:Ye({"log-container":1,"expand-log":e(F)}),align:"stretch",style:ie(e(F)?{height:e(de),maxHeight:e(de)}:{})},{default:t(()=>[n(e(en),{ref_key:"scrollref",ref:D,"x-scrollable":!0,onMouseup:B[5]||(B[5]=j=>W.value=!1),onWheel:B[6]||(B[6]=j=>W.value=!1),trigger:"none",style:ie([{"z-index":"2","padding-right":"10px","min-height":"7em"},{maxHeight:e(de)}]),size:50},{default:t(()=>[h("table",yl,[h("tr",wl,[h("th",bl,r(u.$t("status.table.core")),1),h("th",xl,r(u.$t("status.table.index")),1),h("th",kl,r(u.$t("status.table.status")),1),h("th",Al,r(u.$t("status.table.details")),1)]),(O(!0),ae(ze,null,Ze((e(Q)?e(k).filter(j=>!j.completed):e(k)).slice(-e(oe)),({index:j,key:De,command:Fe,path:ft,core:Ft})=>(O(),ae("tr",{key:De,class:"log-tr"},[h("td",zl,r(Ft>=0?Ft+1:"-"),1),h("td",Tl,r(j+1),1),h("td",Il,r(Fe),1),h("td",Sl,r(ft),1)]))),128))])]),_:1},8,["style"]),n(re,{style:ie([{"align-self":"center",position:"absolute","z-index":"0","margin-top":"0.5em",right:"0.1em","line-height":"0px"},{width:d.W+"px",height:d.H+"px"}]),justify:"center",align:"center"},{default:t(()=>[n(e(Be),{size:"small",show:u.processing},{default:t(()=>[l.status.thumbnail===void 0?(O(),V(Aa,{key:0,description:"EMPTY"})):ue("",!0),Kt(h("canvas",{ref_key:"thumbcanvas",ref:Z,width:"106",height:"80",style:ie({border:"1px solid gray",filter:u.processing?"":"opacity(0.35)"})},null,4),[[Qt,l.status.thumbnail!==void 0]])]),_:1},8,["show"])]),_:1},8,["style"])]),_:1},8,["class","style"])]),_:2},[e(le)?{name:"header-extra",fn:t(()=>[n(re,{align:"center",wrap:!1},{default:t(()=>[n(mt,null,{default:t(()=>[n(ke,{key:"a",checked:e(Q),"onUpdate:checked":B[0]||(B[0]=j=>Le(Q)?Q.value=j:null),size:"small",style:{"font-size":"smaller"},class:"hide-mobile"},{default:t(()=>[C(r(u.$t("status.filterSuccess")),1)]),_:1},8,["checked"]),e(F)?(O(),V(ke,{key:"b",checked:e(W),"onUpdate:checked":[B[1]||(B[1]=j=>Le(W)?W.value=j:null),B[2]||(B[2]=j=>j&&ot(!0))],size:"small",style:{"font-size":"smaller"}},{default:t(()=>[C(r(u.$t("status.autoScroll")),1)]),_:1},8,["checked"])):ue("",!0)]),_:1}),n(pt,{style:{"max-width":"30em"}},{trigger:t(()=>[n(ke,{size:"small",checked:e(F),"onUpdate:checked":[B[3]||(B[3]=j=>Le(F)?F.value=j:null),B[4]||(B[4]=j=>{W.value=j,ot(!0)})],style:{"font-size":"smaller"}},{default:t(()=>[C(r(u.$t("status.expandLog")),1)]),_:1},8,["checked"])]),default:t(()=>[C(r(u.$t("status.expandLogTooltip")),1)]),_:1})]),_:1})]),key:"0"}:void 0]),1024)]),_:1},8,["expanded-names","on-update:expanded-names"]),n(Ia,{style:{margin:"0.2em"}}),n(re,{wrap:!1,vertical:""},{default:t(()=>[n(re,{justify:"center",align:"center",vertical:""},{default:t(()=>[h("div",{class:"singleimage",style:ie({maxHeight:e(M)?"2000px":"100px"})},[!e(M)&&e(x)&&l.status.threads?(O(),V(qe,{key:0,tertiary:"",type:"success",size:"small",disabled:!(u.status.success>0),onClick:B[7]||(B[7]=j=>M.value=!0)},{default:t(()=>[C(r(u.$t("status.browseConvertedImages")),1)]),_:1},8,["disabled"])):u.status.success>0&&(l.status.threads||!e(x))?(O(),V(_l,{key:1,ref_key:"imageViewer",ref:N,url:e(T).url,size:e(T).size,"original-url":e(T).originalUrl,"original-size":e(T).originalSize,name:e(T).name,originalName:e(T).originalName,length:l.status.success,index:e(T).index,"is-single":!e(x),onDemandImage:B[8]||(B[8]=j=>p("demand-image",j))},null,8,["url","size","original-url","original-size","name","originalName","length","index","is-single"])):ue("",!0)],4)]),_:1}),n(re,{justify:"center"},{default:t(()=>[e(x)?(O(),V(re,{key:0,vertical:"",align:"center"},{default:t(()=>[n(pe,{placement:"left"},{trigger:t(()=>[n(me,{type:"line","indicator-placement":"inside",color:"lime","rail-color":"rgba(99, 255, 99, 0.5)","indicator-text-color":e(L)[0]===e(P)?"white":"green",processing:u.processing,percentage:e(L)[0]/e(P)*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[h("span",Cl,r(e(L)[0]/e(P)*100|0)+"% "+r(u.$t("status.zipped"))+" ("+r(e(L)[0])+"/"+r(e(b)[0])+")",1)]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[C(" "+r(u.$t("status.zippingProgress"))+" ("+r(e(L)[0]/e(P)*100|0)+"%) ",1)]),_:1}),n(je,{name:"zipcontainer"},{default:t(()=>[e(c).length>=1||l.processing?(O(),V(mt,{key:0,name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(O(!0),ae(ze,null,Ze(e(c),(j,De)=>(O(),ae("span",{key:De},[n(pe,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[h("a",{href:j.url,download:j.name,class:"in-button-anchor",onClick:Fe=>Se(j)},[n(qe,{class:"zip-button",size:"tiny",color:j.clicked?"#050":"lime","text-color":j.clicked?"gray":"white",onClick:Re(Fe=>Se(j),["stop"]),round:""},{default:t(()=>[n(e(ve),{size:"tiny"},{default:t(()=>[n(e(_t))]),_:1}),C("ZIP"+r(j.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,$l)]),default:t(()=>[h("div",{style:ie({color:e(i).successColor})},[h("div",null,"ZIP "+r(j.number||"")+" ("+r(u.$t("success"))+")",1),h("div",null,r(j.name),1),h("div",null,r(j.sizeByUnit),1),h("div",null,r(u.$rt("{n} @:files",j.count)),1)],4)]),_:2},1024)]))),128))]),_:1})):ue("",!0)]),_:1})]),_:1})):ue("",!0)]),_:1}),n(je,null,{default:t(()=>[l.processing?ue("",!0):(O(),V(re,{key:0,justify:"center",align:"center"},{default:t(()=>[n(pe,{trigger:"hover",duration:0,delay:0,placement:"left",style:ie({color:"white",backgroundColor:e(i).successColor}),"arrow-style":{backgroundColor:e(i).successColor}},{trigger:t(()=>[n(je,{name:"save"},{default:t(()=>[e(m)[0]>0?(O(),ae("span",Ll,[n(Et,{value:e(x)?e(L)[0].toLocaleString("en-us"):l.status.type.replace(/\(.+\)/,""),color:e(i).successColorHover,offset:[-20,-3]},{default:t(()=>[n(qe,{size:"medium",onClick:xe,color:e(i).successColor,round:""},{default:t(()=>[e(x)?(O(),ae(ze,{key:0},[e(c).length?(O(),ae("a",{key:0,href:e(c)[0].url,download:e(c)[0].name,class:"in-button-anchor",onClick:B[9]||(B[9]=Re(()=>{},["prevent"]))},[n(Sa),C(" √ó "+r(e(c).length)+" "+r(u.$t("save")),1)],8,El)):ue("",!0)],64)):(O(),ae("a",{key:1,href:e(T).url,download:e(T).name,class:"in-button-anchor",onClick:B[10]||(B[10]=Re(()=>{},["prevent"]))},[n(e(ve),{size:"tiny"},{default:t(()=>[n(e(ln))]),_:1}),C(" "+r(u.$t("save")),1)],8,Fl))]),_:1},8,["color"])]),_:1},8,["value","color"])])):ue("",!0)]),_:1})]),default:t(()=>[u.status.length>=2?(O(),ae(ze,{key:0},[h("div",null,r(e(o)("success"))+": "+r(e(L)[0].toLocaleString()),1),h("div",null,r(e(o)("status.totalSize"))+": "+r(e(Ue)(u.status.zippedTotalSize)),1),h("div",null,"ZIP √ó "+r(e(c).length),1),h("div",null,r(e(o)("status.saveAllZipsTooltip")),1)],64)):(O(),ae(ze,{key:1},[C(r(u.$t("status.downloadConvertedImage",e(c).length)),1)],64))]),_:1},8,["style","arrow-style"]),!u.processing&&u.status.success!==e(P)?(O(),V(Ca,{key:0,options:e(Pe),onSelect:B[11]||(B[11]=(j,De)=>{var Fe;return(Fe=e(Pe).find(({key:ft})=>j===ft))==null?void 0:Fe.onSelect()}),"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start"},{default:t(()=>[n(pe,{show:e(H),duration:0,delay:0,placement:"right",style:ie({color:"white",backgroundColor:e(i).errorColor}),"arrow-style":{backgroundColor:e(i).errorColor}},{trigger:t(()=>[n(Et,{value:u.status.unconvertedFileCount.toLocaleString(),color:e(i).errorColorHover,offset:[-0,-3]},{default:t(()=>[n(qe,{size:"small",color:e(i).errorColor},{default:t(()=>[n(e(ve),{size:"medium",style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Va))]),_:1})]),_:1},8,["color"])]),_:1},8,["value","color"])]),default:t(()=>[h("div",null,[h("div",null,r(e(o)("failed"))+": "+r(u.status.unconvertedFileCount.toLocaleString()),1),h("div",null,r(e(o)("status.totalSize"))+": "+r(e(Ue)(u.status.unconvertedTotalSize)),1)])]),_:1},8,["show","style","arrow-style"])]),_:1},8,["options"])):ue("",!0)]),_:1}))]),_:1}),n(je,{name:"zipcontainer"},{default:t(()=>[e(A)?(O(),V(re,{key:0,vertical:"",align:"center"},{default:t(()=>[n(pe,{placement:"left"},{trigger:t(()=>[n(me,{type:"line","indicator-placement":"inside",color:"red","rail-color":"rgba(255, 0, 0, 0.5)","indicator-text-color":u.status.failedFileZippedCount===u.status.unconvertedFileCount?"white":"#500",processing:e(A)&&!u.status.failedZipDone&&!u.status.failedToCreateFailedZip,percentage:u.status.failedFileZippedCount/u.status.unconvertedFileCount*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[u.status.failedToCreateFailedZip?(O(),ae("div",{key:1,style:ie({color:e(i).errorColor})},r(u.$t("status.failureZippingFailedFiles")),5)):(O(),ae("span",Ml,r(u.status.failedFileZippedCount/u.status.unconvertedFileCount*100|0)+"% "+r(u.$t("status.zipped"))+" ("+r(u.status.failedFileZippedCount)+"/"+r(u.status.unconvertedFileCount)+")",1))]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[C(" "+r(u.$t("status.zippingProgress"))+" ("+r(u.status.failedFileZippedCount/u.status.unconvertedFileCount*100|0)+"%) ",1)]),_:1}),n(mt,{name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(O(!0),ae(ze,null,Ze(e(E),(j,De)=>(O(),ae("span",{key:De},[n(pe,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[h("a",{href:j.url,download:j.name,class:"in-button-anchor",onClick:Fe=>Se(j)},[n(qe,{class:"zip-button",size:"tiny",color:j.clicked?"#551122":"#F00","text-color":j.clicked?"gray":"white",onClick:Re(Fe=>Se(j),["stop"]),round:""},{default:t(()=>[n(e(ve),{size:"tiny"},{default:t(()=>[n(e(qa))]),_:1}),C("ZIP"+r(j.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Ol)]),default:t(()=>[h("div",{style:ie({color:e(i).errorColor})},[h("div",null,"ZIP "+r(j.number||"")+" ("+r(u.$t("failed"))+")",1),h("div",null,r(j.name),1),h("div",null,r(j.sizeByUnit),1),h("div",null,r(u.$rt("{n} @:files",j.count)),1)],4)]),_:2},1024)]))),128))]),_:1})]),_:1})):ue("",!0)]),_:1})]),_:1})]),_:1})}}}),Nl=Oe(Ul,[["__scopeId","data-v-6d046527"]]),Dl=["innerHTML"],jl=h("p",null,[h("img",{width:"200",src:Zo})],-1),Rl={style:{"flex-grow":"1"}},Zl=_e({__name:"converter",props:Xe({input:{},format:{},quality:{},retainExtension:{type:Boolean},maxZipSizeMB:{},threads:{}},{showNote:{type:Boolean},showNoteModifiers:{}}),emits:Xe(["start","end","multi-thread-count"],["update:showNote"]),setup(a,{emit:s}){We(Ne);const{t:g}=Me(),o=ut(),i=Ga(),d=Ka(),l=10,p=navigator.hardwareConcurrency,x=typeof OffscreenCanvas=="function",k=300,A=a,c=Ie(a,"showNote"),E=s,y=_(!1),f=_(!1),m=_(!1),$=_(0),S=_(!1),b=_(!1),P=_("initializing"),L=_("info"),w=rt(Q());let v=!1,z=()=>{},G=0,K=!1;we(()=>A.input,I=>{I!=null&&I.length&&de(I)}),Ee(async()=>{await T(),Z()});async function fe(){let I=!0;G>l*1e3&&!K&&w.success>0&&(I=!1,await new Promise(D=>{o.warning({title:g("confirmCloseDialogTitle"),autoFocus:!0,maskClosable:!1,positiveText:g("close"),negativeText:g("back"),onPositiveClick:()=>I=!0,onAfterLeave:D,content:g("confirmCloseDialog")})})),I&&(d.destroyAll(),i.destroyAll(),S.value=!1,c.value=!1)}function U(I){w.demandImage(I)}function H(){!f.value&&y.value?f.value=!0:fe()}function F(){de(A.input)}let W=_(()=>{});function Q(I){const D={logs:[],index:0,converted:0,success:0,failure:0,done:0,length:0,zippedTotalCount:0,zippingErrorCount:0,zippedTotalSize:0,processing:!1,zips:[],inputTotalSize:0,outputTotalSize:0,thumbnail:null,baseZipName:"testzipname",type:"image/any",startedTime:Date.now(),convertedImageDataUrl:"",convertedImageName:"",convertedImageUrl:"",zipSize:A.maxZipSizeMB,unconvertedListText:"",failedZipDone:!1,failedZips:[],unconvertedFileCount:0,unconvertedTotalSize:0,failedFileZippedCount:0,failedToCreateFailedZip:!1,demandImage:()=>{}};return Object.assign(I||{},D)}function oe(){b.value=!1,URL.revokeObjectURL(w.convertedImageUrl),URL.revokeObjectURL(w.convertedImageOrgUrl);for(const I of w.zips)URL.revokeObjectURL(I.url);w.zips.length=0;for(const I of w.failedZips)URL.revokeObjectURL(I.url);w.failedZips.length=0,Q(w),z(),z=()=>{},K=!1,m.value=!1,f.value=!1}async function de(I){if(y.value){o.error({title:"Busy",positiveText:"OK",content:g("interfered")});return}let D=le(I);Q(w),oe();const N={convertedImageBlob:null,convertedImageWidth:0,convertedImageHeight:0,convertedImageName:""};$.value++,S.value=!0,b.value=!0,y.value=!0,w.processing=!0,L.value="info",P.value=g("processing");const X=new Set,J=A.format,ne=A.quality,ye=[...J.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),be=M(J,ne,D[0].webkitRelativePath);w.length=D.length,w.baseZipName=be,w.type=J.replace(/image\//,"").toUpperCase()+(/jpe?g|webp/i.test(J)?" ("+ne+")":""),w.threads=v?0:A.threads;const Pe=Date.now();E("start");const Se=D.concat();let xe;if({callbackToGenerateFailedZips:xe,callbackToClearConverter:z}=!v&&A.threads>=2?await Jo(w,f,A,N,i,d,Se,X,J,ne,ye,J):await al(Se,X,N,A,f,w),w.length,w.success===w.length?(L.value="success",P.value=g("completed")):(L.value="error",P.value=f.value?g("aborted"):g("incomplete")),X.size!==D.length){const $e=se(D,X);W.value=()=>{!$e||!$e.length||xe($e)}}y.value=!1,w.processing=!1,m.value=!0,G=Date.now()-Pe,E("end")}function se(I,D){const N=[],X=[];let J=0;for(const ne of I)D.has(ne._id)||(N.push(ne),X.push(ne.webkitRelativePath||ne.relativePath||ne.name),J+=ne.size);return X.length&&(w.unconvertedListText=X.join(`
`),w.unconvertedFileCount=N.length,w.unconvertedTotalSize=J),N}let ce=0;function le(I){const D=[];for(const N of I)N.hasOwnProperty("_id")||Object.defineProperty(N,"_id",{value:ce++}),D.push(N);return D}function M(I,D,N){var ye;const X=new Date;return I=I.replace(/^image\//,"").toLowerCase(),`${R.useFolderNameForZip&&((ye=String(N).match(/^\/?([^/]+)\//))==null?void 0:ye[1])||"avif2jpg"}-
    ${X.getFullYear().toString().substring(2)}
    ${String((X.getMonth()+1)*100+X.getDate()).padStart(4,"0")}
    ${String(X.getHours()*1e4+X.getMinutes()*100+X.getSeconds()).padStart(6,"0")}
    -
    ${I+(/jpe?g|webp/i.test(I)?D:"")}
  `.replace(/\s/g,"")}async function T(){const I="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",D=document.createElement("img"),N=gn(D).then(()=>!0,()=>!1);D.src=I,await N||o.warning({title:"Unsupported",positiveText:"OK",maskClosable:!1,content:g("avifUnsupported")})}function Z(){(!x||p<2||!Promise.any)&&(v=!0),E("multi-thread-count",v?0:p)}return(I,D)=>{const N=Te,X=Ae,J=Ce,ne=Qa,ye=Ya,be=Be,Pe=Ve,Se=bt;return O(),ae(ze,null,[n(J,{justify:"center",align:"center"},{default:t(()=>{var xe;return[!e(y)&&((xe=A.input)!=null&&xe.length)?(O(),V(X,{key:0,trigger:"hover",placement:"top","keep-alive-on-hover":!1,duration:0,delay:50},{trigger:t(()=>[n(N,{onClick:F,round:""},{default:t(()=>[C(r(e(g)("convertAgain")),1)]),_:1})]),default:t(()=>{var $e;return[h("div",{innerHTML:e(g)("reconvertTip",($e=A.input)==null?void 0:$e.length)},null,8,Dl)]}),_:1})):ue("",!0)]}),_:1}),n(ye,{show:e(S)||c.value,placement:"right","z-index":0,"mask-closable":"","on-mask-click":xe=>c.value=!1},{default:t(()=>[n(ne,{title:"Note"},{default:t(()=>[h("p",null,r(I.$t("annotationOutOfMemory")),1),jl]),_:1})]),_:1},8,["show","on-mask-click"]),n(Se,{ref:"processingModal",show:e(S),"onUpdate:show":D[2]||(D[2]=xe=>Le(S)?S.value=xe:null),closable:e(m),"close-on-esc":!1,preset:"dialog","display-directive":"show",onClick:D[3]||(D[3]=xe=>{e(d).destroyAll(),e(i).destroyAll()}),onMaskClick:D[4]||(D[4]=xe=>{e(d).destroyAll(),e(i).destroyAll()}),onClose:fe,onEsc:H,title:e(P),type:e(L),"mask-closable":!1,"on-after-leave":oe,class:"processing-dialog"},{default:t(()=>[n(Pe,{vertical:"",style:{"flex-grow":"1"}},{default:t(()=>[h("div",Rl,[e(b)?(O(),V(Nl,{key:e($),processing:e(y),status:e(w),interval:k,onAllZipsClicked:D[0]||(D[0]=xe=>Le(K)?K.value=!0:K=!0),onDemandZipErrors:e(W),onDemandImage:U},null,8,["processing","status","onDemandZipErrors"])):ue("",!0)]),n(Pe,{justify:"end"},{default:t(()=>[e(y)?(O(),V(N,{key:0,disabled:e(f),ref:"cancelbutton",round:"",size:"large",onClick:D[1]||(D[1]=xe=>f.value=!0)},{default:t(()=>[n(be,{show:e(f)&&!e(m),size:"small"},{default:t(()=>[C(r(e(g)("cancel")),1)]),_:1},8,["show"])]),_:1},8,["disabled"])):e(m)?(O(),V(N,{key:1,onClick:fe,round:"",size:"large",style:{"font-size":"small","margin-top":"1em"}},{default:t(()=>[C(r(e(g)("close")),1)]),_:1})):ue("",!0)]),_:1})]),_:1})]),_:1},8,["show","closable","title","type"])],64)}}}),Bl="/avif2jpeg/dist/avif.png",vn=a=>(kt("data-v-892702c9"),a=a(),At(),a),Hl={class:"container-1"},Wl=vn(()=>h("span",null,"Drag & Drop",-1)),Vl={style:{position:"relative"}},ql={style:{position:"absolute","font-size":"0.5em",right:"-3.5em",bottom:"-1.5em","white-space":"nowrap"}},Gl={style:{color:"#666666"}},Kl=vn(()=>h("img",{src:Bl,class:"avif"},null,-1)),Ql=["innerHTML"],Yl={style:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","font-size":"xx-small","white-space":"nowrap"}},Xl=_e({__name:"droptarget",props:{forbidden:{type:Boolean},dropTarget:{}},emits:["drop"],setup(a,{emit:s}){We(Ne);const g=a,o=s,i=Xa(),d=_(!1),l=_(0),p=_("");Ee(()=>{x(g.dropTarget||document)});function x(A){document.ondragstart=c=>c.preventDefault(),document.ondragover=c=>c.preventDefault(),A.ondrop=async c=>{var y;if(c.preventDefault(),d.value||g.forbidden)return;d.value=!0,l.value=0,p.value="";let E;try{const f=[...c.dataTransfer.items].map(m=>m.webkitGetAsEntry());i.start(),E=await k(f),i.finish()}catch{E=[...((y=c.dataTransfer)==null?void 0:y.files)??[]],i.error()}d.value&&(d.value=!1,o("drop",E))}}async function k(A,c){c=c||[];for(const E of A)if(E.isFile){const y=await new Promise(f=>E.file(m=>f(m)));Object.defineProperty(y,"webkitRelativePath",{value:E.fullPath}),c.push(y),l.value++}else if(E.isDirectory){p.value=E.fullPath;const y=E.createReader();do{const f=await new Promise(m=>y.readEntries($=>m($)));if(!f.length)break;await k(f,c)}while(!0)}return c}return(A,c)=>{const E=ve,y=Ce,f=tt,m=Ae,$=bt;return O(),ae(ze,null,[h("div",Hl,[n(m,{to:!1,"display-directive":"show",trigger:"hover",duration:0,delay:0,placement:"left"},{trigger:t(()=>[n(y,{vertical:"",class:"container-2"},{default:t(()=>[n(y,{align:"center",wrap:!1,class:"container-3"},{default:t(()=>[n(y,{align:"center"},{default:t(()=>[n(E,{size:"64",color:"white"},{default:t(()=>[n(e(Ja))]),_:1})]),_:1}),n(y,{vertical:"",align:"center",wrap:!1,style:{"font-weight":"bold","font-size":"1em","line-height":"90%","white-space":"nowrap"}},{default:t(()=>[Wl,h("span",Vl,[C(" AVIF Images "),h("span",ql,[C(" or "),n(f,{placement:"bottom-end"},{trigger:t(()=>[h("span",Gl,[n(E,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Ct))]),_:1}),C(" Folders ")])]),default:t(()=>[C(" You can drag and drop your local folders ")]),_:1})])])]),_:1}),n(y,null,{default:t(()=>[Kl]),_:1})]),_:1})]),_:1})]),default:t(()=>[h("h3",{innerHTML:A.$t("droptarget"),style:{"max-width":"200px","text-align":"center","word-break":"keep-all","overflow-wrap":"break-word"}},null,8,Ql)]),_:1})]),n($,{show:e(d),"onUpdate:show":c[0]||(c[0]=S=>Le(d)?d.value=S:null),closable:!0,preset:"dialog",title:"Parsing dropped items.",type:"info","mask-closable":!1,"negative-text":A.$t("cancel")},{default:t(()=>[n(y,{vertical:"",align:"center"},{default:t(()=>[h("div",Yl,r(e(p)),1),h("div",null,"found "+r(e(l))+" files",1)]),_:1})]),_:1},8,["show","negative-text"])],64)}}}),Jl=Oe(Xl,[["__scopeId","data-v-892702c9"]]),hn=a=>(kt("data-v-cf5243e3"),a=a(),At(),a),ei={class:"container-1"},ti={class:"container-2"},ni=["innerHTML"],ai=["innerHTML"],oi={style:{"padding-left":"1em"}},li=hn(()=>h("br",null,null,-1)),ii=hn(()=>h("ul",null,[h("li",null,"Each extension must begin with a period. "),h("li",null,"Separate each extension with a comma. "),h("li",null,"Use alphameric characters.")],-1)),si=["innerHTML"],ri=["accept"],ui=_e({__name:"file-selector",props:Xe({expanded:{type:Boolean},target:{},userExtensions:{},forbidden:{type:Boolean}},{disableNotifyingFolderSelect:{type:Boolean},disableNotifyingFolderSelectModifiers:{}}),emits:Xe(["input","click","cancel","on-change-accept","update:target","update:userExtensions","update:expanded"],["update:disableNotifyingFolderSelect"]),setup(a,{emit:s}){const g=ut(),{t:o}=Me(),i=We(Ne),d=["avif_only","all_images","all_files","edit_type"],l=a,p=s,x=_(0),k=_(!1),A=_(!1),c=he(()=>K(m.value)),E=he(()=>$.value.split(",").every(F=>/^\s*(\.[\w\-]+)*\s*$/.test(F))?"success":"error"),y=he(()=>!l.forbidden&&!A.value),f=he({get:()=>l.expanded,set:H=>{p("update:expanded",H)}}),m=he({get:()=>d.indexOf(l.target)>=0?l.target:d[0],set:H=>{p("update:target",H)}}),$=he({get:()=>l.userExtensions,set:H=>{p("update:userExtensions",H)}}),S=Ie(a,"disableNotifyingFolderSelect"),b=_(null),P=_(null),L=_(G());we(m,H=>{p("on-change-accept",c.value)}),Ee(()=>{});async function w(H){if(p("click"),H===P.value&&!S.value){let F=!1;if(await new Promise(W=>{g.info({title:o("loadfolderNotifyingTitle"),positiveText:o("Continue"),negativeText:o("Cancel"),onAfterLeave:()=>W(F),onPositiveClick:()=>F=!0,content:()=>Y("div",[Y("p",{},o("loadfolderNotifyingMessageTerm1")),Y("div",[Y(Yt,{width:250,style:{border:"3px solid gray"},src:"/avif2jpeg/dist//notification-folder.png"})]),Y("p",{},o("loadfolderNotifyingMessageTerm2")),Y("p",[Y(an,{onUpdateChecked:Q=>S.value=Q,checked:S.value},()=>o("checkboxTextDontShowThis"))])])})}),!F){S.value=!1,p("cancel");return}}H.click()}function v(){p("cancel")}function z(H){const W=[...H.target.files];b.value.value="",P.value.value="",U(W)}function G(){return"webkitdirectory"in document.createElement("input")}function K(H){switch(H){case"avif_only":return".avif, .webp";case"all_images":return".jpg, .jpeg, .jfif, .pjpeg, .pjp, .gif, .png, .webp, .avif, .bmp, .apng, .ico";case"edit_type":return $.value;case"all_files":default:return".*"}}async function fe(H){const F=String(c.value).toLowerCase().replace(/\s+/g,"");if(F&&c.value!==".*"){const W=F.split(",");H=H.filter(Q=>W.includes(Q.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),H.length||await new Promise(Q=>{g.error({title:"Images Not Found",positiveText:"OK",onAfterLeave:Q,content:()=>Y("div",[Y(on,{description:"NO IMAGES"}),`${o("noimage")}`,Y("br"),c.value])})})}return H}async function U(H){A.value=!0,H=await fe(H),x.value=H.length,H.length>0&&p("input",H),A.value=!1}return(H,F)=>{const W=ve,Q=zt,oe=Te,de=Ae,se=Ce,ce=lo,le=eo,M=to,T=tt,Z=no,I=It,D=St;return O(),ae(ze,null,[h("div",ei,[h("div",ti,[n(se,{vertical:"",align:"center",justify:"center",inline:""},{default:t(()=>[n(se,{align:"center",justify:"space-around"},{default:t(()=>[n(Q,{value:e(x),max:999,offset:[-8,0],color:"#999999",style:{"margin-right":"1em"}},{default:t(()=>[n(W,{size:"4em",color:"#CCCCCC"},{default:t(()=>[n(e(ao))]),_:1})]),_:1},8,["value"]),n(se,{vertical:"",align:"stretch",justify:"center"},{default:t(()=>[n(de,{to:!1,"display-directive":"show",show:e(i).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(i).LANDSCAPE.value?"right":"top",duration:0,delay:0,"z-index":10},{trigger:t(()=>[n(oe,{disabled:!e(y),onClick:F[0]||(F[0]=N=>w(e(b))),round:"",style:{width:"100%","background-color":"white"}},{icon:t(()=>[n(W,{size:"large",color:"gray"},{default:t(()=>[n(e(sn))]),_:1})]),default:t(()=>[C(" "+r(H.$t("loadbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[h("div",{innerHTML:H.$t("loadbuttontooltip")},null,8,ni)]),_:1},8,["show","placement"]),!e(i).IS_SP&&e(L)||e(i).SSR?(O(),V(de,{key:0,to:!1,"display-directive":"show",trigger:"hover",placement:"left","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:e(i).showTooltipsBeforeMounted.value},{trigger:t(()=>[n(oe,{disabled:!e(y),onClick:F[1]||(F[1]=N=>w(e(P))),round:"",style:{width:"100%","background-color":"white"}},{icon:t(()=>[n(W,{size:"large",color:"gray"},{default:t(()=>[n(e(Ct))]),_:1})]),default:t(()=>[C(" "+r(H.$t("loadfolderbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[h("div",{innerHTML:H.$t("loadfoldertooltip")},null,8,ai)]),_:1},8,["show"])):ue("",!0)]),_:1})]),_:1}),h("div",{class:Ye({"expand-ext-list-container":e(f)})},[n(D,{"display-directive":"show","expanded-names":e(f)?["extItem"]:"","on-update:expanded-names":N=>{f.value=!!(""+N)},class:Ye({"expand-ext-list":e(f)})},{"header-extra":t(()=>[n(W,{size:"large"},{default:t(()=>[n(e(oo))]),_:1})]),default:t(()=>[n(I,{title:H.$t("fileTypeRadioTitle"),name:"extItem"},{default:t(()=>[n(Z,{value:e(m),"onUpdate:value":F[5]||(F[5]=N=>Le(m)?m.value=N:null),name:"filetyperadios",size:"small"},{default:t(()=>[n(se,{vertical:"",style:{"padding-left":"1em"}},{default:t(()=>[(O(),ae(ze,null,Ze(d,N=>n(de,{key:N,trigger:"hover","keep-alive-on-hover":!1,"z-index":5,placement:"left",style:{"max-width":"200px"},duration:0,delay:0},{trigger:t(()=>[n(ce,{value:N},{default:t(()=>[C(r(H.$t("fileTypeRadioOptions."+N)),1)]),_:2},1032,["value"])]),default:t(()=>[C(" "+r(K(N).replace(/,/g,", ")),1)]),_:2},1024)),64)),n(de,{trigger:"hover","keep-alive-on-hover":!1,placement:"bottom-start",show:e(k),duration:0,delay:0},{trigger:t(()=>[h("div",oi,[n(T,{trigger:"manual",placement:"right-end",show:e(m)==="edit_type"&&e(E)!=="success"&&!!e(k)},{trigger:t(()=>[n(le,{value:e($),"onUpdate:value":F[2]||(F[2]=N=>Le($)?$.value=N:null),status:e(E),disabled:e(m)!=="edit_type",onFocus:F[3]||(F[3]=N=>k.value=!0),onBlur:F[4]||(F[4]=N=>k.value=void 0),clearable:!0,size:"small",placeholder:".jpg, .gif, .png",spellcheck:"false"},null,8,["value","status","disabled"])]),default:t(()=>[n(M,{type:"error","show-icon":!0,title:"Validation error"},{default:t(()=>[C(" Please correct the extension list."),li,ii]),_:1})]),_:1},8,["show"])])]),default:t(()=>[h("span",{innerHTML:H.$t("editAcceptTypes")},null,8,si)]),_:1},8,["show"])]),_:1})]),_:1},8,["value"])]),_:1},8,["title"])]),_:1},8,["expanded-names","on-update:expanded-names","class"])],2),e(i).IS_SP?ue("",!0):(O(),V(Jl,{key:0,onDrop:U,forbidden:!e(y)},null,8,["forbidden"]))]),_:1})])]),h("input",{ref_key:"fileinput",ref:b,onInput:z,onCancel:v,type:"file",multiple:"",accept:e(c),style:{display:"none"}},null,40,ri),h("input",{ref_key:"folderinput",ref:P,webkitdirectory:"",directory:"",onInput:z,onCancel:v,type:"file",style:{display:"none"}},null,544)],64)}}}),di=Oe(ui,[["__scopeId","data-v-cf5243e3"]]),ci={style:{"white-space":"nowrap"}},pi=_e({__name:"settings-output",props:{quality:{},format:{}},emits:["update:format","update:quality"],setup(a,{emit:s}){const g=a,o=s,{t:i}=Me(),d=We(Ne),l=_([]),p=["image/jpeg","image/png","image/gif","image/bmp","image/avif","image/webp"],x=he({get:()=>g.format,set:f=>{f=E(f),o("update:format",f)}}),k=he({get:()=>g.quality,set:f=>{o("update:quality",f)}}),A=he(()=>/png|bmp/i.test(x.value)),c=_(null);Ee(()=>{y()});function E(f){return l.value.indexOf(f)<0&&(f=l.value[0]),f}function y(){for(const f of p)c.value.toDataURL(f).indexOf(f)>=0&&l.value.push(f);l.value.length===0&&l.value.push(p[0])}return(f,m)=>{const $=ve,S=rn,b=Ce,P=Ae,L=Tt,w=un;return O(),ae(ze,null,[n(b,{justify:"center"},{default:t(()=>[n(b,{vertical:""},{default:t(()=>[n(P,{to:!1,"display-directive":"show",show:e(d).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(d).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(b,{align:"center"},{default:t(()=>[n($,null,{default:t(()=>[n(e(sn))]),_:1}),C(r(e(i)("settings.imageType"))+": ",1),n(S,{value:x.value,"onUpdate:value":m[0]||(m[0]=v=>x.value=v),options:l.value.map(v=>({value:v,label:v})),"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),_:1})]),default:t(()=>[C(" "+r(e(i)("settings.imageTypeTooltip")),1)]),_:1},8,["show","placement"]),n(P,{to:!1,"display-directive":"show",show:e(d).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(d).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(b,{align:"center"},{default:t(()=>[n(b,{align:"start",wrap:!1},{default:t(()=>[n($,null,{default:t(()=>[n(e(ln))]),_:1}),h("span",ci,r(e(i)("settings.quality"))+":",1),n(b,{align:"center",justify:"space-between"},{default:t(()=>[n(L,{tooltip:!1,value:k.value,"onUpdate:value":m[1]||(m[1]=v=>k.value=v),step:1,style:{width:"120px"},disabled:A.value},null,8,["value","disabled"]),n(w,{value:k.value,"onUpdate:value":m[2]||(m[2]=v=>k.value=v),step:"1",min:"0",max:"100",disabled:A.value,style:{width:"90px"},size:"small"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:t(()=>[C(" "+r(e(i)("settings.qualitytooltip")),1)]),_:1},8,["show","placement"])]),_:1})]),_:1}),h("canvas",{ref_key:"canvas",ref:c,width:"1",height:"1",style:{display:"none"}},null,512)],64)}}}),fi={style:{width:"4em","text-align":"left"}},gi={style:{width:"4em","text-align":"left"}},jt=100,Rt=2e3,Zt=4096,Bt=4096,mi=100,vi=100,hi=_e({__name:"settings-adv",props:Xe({threadMax:{}},{expanded:{type:Boolean,required:!0},expandedModifiers:{},multithread:{type:Boolean,required:!0},multithreadModifiers:{},threadCount:{required:!0},threadCountModifiers:{},maxZipSize:{required:!0},maxZipSizeModifiers:{},retainExt:{type:Boolean,required:!0},retainExtModifiers:{},useFolderNameForZip:{type:Boolean,required:!0},useFolderNameForZipModifiers:{},shrinkImage:{type:Boolean,required:!0},shrinkImageModifiers:{},maxWidth:{required:!0},maxWidthModifiers:{},maxHeight:{required:!0},maxHeightModifiers:{}}),emits:["update:expanded","update:multithread","update:threadCount","update:maxZipSize","update:retainExt","update:useFolderNameForZip","update:shrinkImage","update:maxWidth","update:maxHeight"],setup(a){const s={trigger:"hover",placement:"left",keepAliveOnHover:!1,duration:0,delay:0,style:"max-width: 20vw;"},g=Ie(a,"expanded"),o=Ie(a,"multithread"),i=Ie(a,"threadCount"),d=Ie(a,"maxZipSize"),l=Ie(a,"retainExt"),p=Ie(a,"useFolderNameForZip"),x=Ie(a,"shrinkImage"),k=Ie(a,"maxWidth"),A=Ie(a,"maxHeight"),c=a;we([i,()=>c.threadMax],()=>{c.threadMax>1&&typeof i.value>"u"&&(i.value=c.threadMax)}),we(()=>c.threadMax,()=>{c.threadMax>1||(o.value=!1)},{immediate:!0});const E=he(()=>o.value&&c.threadMax>1);return(y,f)=>{const m=ve,$=Te,S=io,b=Ve,P=Tt,L=un,w=It,v=St;return O(),V(b,{justify:"center"},{default:t(()=>[n(v,{"display-directive":"show","default-expanded-names":g.value?["collapitem"]:"","on-update:expanded-names":z=>g.value=!!String(z),"trigger-areas":["arrow","main"],class:Ye(["settings-body",g.value?"expand-adv-settings":""])},nn({arrow:t(()=>[n(m,{style:ie(g.value&&{top:"8px"})},{default:t(()=>[n(e(so))]),_:1},8,["style"]),n(m,null,{default:t(()=>[n(e(ro))]),_:1})]),default:t(()=>[n(w,{title:y.$t("settings.advancedSettings"),name:"collapitem"},{default:t(()=>[n(b,{vertical:"",style:{"padding-left":"2em"}},{default:t(()=>[n(e(Ae),Ge(Ke(s)),{trigger:t(()=>[n(b,{vertical:""},{default:t(()=>[n(b,{wrap:!1,align:"center"},{default:t(()=>[n($,{text:"",disabled:!y.threadMax,style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:f[0]||(f[0]=z=>o.value=!o.value)},{icon:t(()=>[n(m,null,{default:t(()=>[n(e(uo))]),_:1})]),default:t(()=>[C(" "+r(y.$t("settings.enableMultiThreads")),1)]),_:1},8,["disabled"]),n(S,{value:o.value,"onUpdate:value":f[1]||(f[1]=z=>o.value=z),disabled:!y.threadMax,size:"small"},null,8,["value","disabled"])]),_:1}),n(b,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(P,{value:i.value,"onUpdate:value":f[2]||(f[2]=z=>i.value=z),disabled:!y.threadMax||!o.value,step:1,min:2,max:y.threadMax,style:{width:"120px"}},null,8,["value","disabled","max"]),n(L,{size:"tiny",value:i.value,"onUpdate:value":f[3]||(f[3]=z=>i.value=z),disabled:!y.threadMax||!o.value,step:1,min:2,max:y.threadMax,style:{width:"10em"}},{suffix:t(()=>[C(r(y.$t("threads",i.value)),1)]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[C(" "+r(y.$t("settings.multiThreadsTooltip")),1)]),_:1},16),n(e(Ae),Ge(Ke(s)),{trigger:t(()=>[n(b,{vertical:""},{default:t(()=>[n(b,{wrap:!1,align:"center"},{default:t(()=>[n($,{text:"",focusable:!1,style:{"white-space":"nowrap","font-size":"smaller"}},{icon:t(()=>[n(m,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(co))]),_:1})]),default:t(()=>[C(" "+r(y.$t("settings.maxZipFileSize"))+": ",1)]),_:1})]),_:1}),n(b,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(P,{tooltip:!1,value:d.value,"onUpdate:value":f[4]||(f[4]=z=>d.value=z),step:1,min:jt,max:Rt,style:{width:"120px"}},null,8,["value"]),n(L,{size:"tiny",value:d.value,"onUpdate:value":f[5]||(f[5]=z=>d.value=z),step:"1",min:jt,max:Rt,style:{width:"10em"}},{suffix:t(()=>[C("(MB)")]),_:1},8,["value"])]),_:1})]),_:1})]),default:t(()=>[C(" "+r(y.$t("settings.maxZipFileSizeTooltip")),1)]),_:1},16),n(e(Ae),Ge(Ke(s)),{trigger:t(()=>[n(b,{wrap:!1,align:"center"},{default:t(()=>[n($,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:f[6]||(f[6]=z=>p.value=!p.value)},{icon:t(()=>[n(m,null,{default:t(()=>[n(e(Ct))]),_:1})]),default:t(()=>[C(" "+r(y.$t("settings.useFolderNameForZip")),1)]),_:1}),n(S,{value:p.value,"onUpdate:value":f[7]||(f[7]=z=>p.value=z),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[C(" "+r(y.$t("settings.useFolderNameForZipTooltip")),1)]),_:1},16),n(e(Ae),Ge(Ke(s)),{trigger:t(()=>[n(b,{wrap:!1,align:"center"},{default:t(()=>[n($,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:f[8]||(f[8]=z=>l.value=!l.value)},{icon:t(()=>[n(m,null,{default:t(()=>[n(e(tn))]),_:1})]),default:t(()=>[C(" "+r(y.$t("settings.retainOriginalExtension")),1)]),_:1}),n(S,{value:l.value,"onUpdate:value":f[9]||(f[9]=z=>l.value=z),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[C(" "+r(y.$t("settings.retainExtTooltip")),1)]),_:1},16),n(e(Ae),Ge(Ke(s)),{trigger:t(()=>[n(b,{vertical:""},{default:t(()=>[n(b,{wrap:!1,align:"center"},{default:t(()=>[n($,{disabled:!e(E),text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:f[10]||(f[10]=z=>x.value=!x.value)},{icon:t(()=>[n(m,null,{default:t(()=>[n(e(po))]),_:1})]),default:t(()=>[C(" "+r(y.$t("settings.shrinkImage")),1)]),_:1},8,["disabled"]),n(S,{disabled:!e(E),value:x.value,"onUpdate:value":f[11]||(f[11]=z=>x.value=z),size:"small"},null,8,["disabled","value"])]),_:1}),n(b,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(P,{value:k.value,"onUpdate:value":f[12]||(f[12]=z=>k.value=z),disabled:!x.value||!e(E),step:1,min:mi,max:Zt,style:{width:"120px"}},null,8,["value","disabled"]),n(L,{size:"tiny",value:k.value,"onUpdate:value":f[13]||(f[13]=z=>k.value=z),disabled:!x.value||!e(E),step:1,min:8,max:Zt*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[h("span",fi,r(y.$t("width")),1)]),suffix:t(()=>[C("px")]),_:1},8,["value","disabled","max"])]),_:1}),n(b,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(P,{value:A.value,"onUpdate:value":f[14]||(f[14]=z=>A.value=z),disabled:!x.value||!e(E),step:1,min:vi,max:Bt,style:{width:"120px"}},null,8,["value","disabled"]),n(L,{size:"tiny",value:A.value,"onUpdate:value":f[15]||(f[15]=z=>A.value=z),disabled:!x.value||!e(E),step:1,min:8,max:Bt*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[h("span",gi,r(y.$t("height")),1)]),suffix:t(()=>[C("px")]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[C(" "+r(y.$t("settings.shrinkImageTooltip")),1)]),_:1},16)]),_:1})]),_:1},8,["title"])]),_:2},[g.value?{name:"header-extra",fn:t(()=>[n(e(Ae),{"keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n($,{onClick:e(Io),size:"tiny",style:{"font-size":"xx-small"}},{default:t(()=>[C(r(y.$t("reset")),1)]),_:1},8,["onClick"])]),default:t(()=>[C(" "+r(y.$t("settings.resetButtonTooltip")),1)]),_:1})]),key:"0"}:void 0]),1032,["default-expanded-names","on-update:expanded-names","class"])]),_:1})}}}),_i=Oe(hi,[["__scopeId","data-v-0da126eb"]]),yi={},wi={style:{color:"gray","padding-left":"20px"}},bi=["innerHTML"];function xi(a,s){const g=xt,o=Ce;return O(),V(o,{vertical:"",justify:"end"},{default:t(()=>[n(g,{style:{margin:"0px"}}),n(o,{justify:"center"},{default:t(()=>[h("ul",wi,[(O(!0),ae(ze,null,Ze(a.$tm("descriptions"),i=>(O(),ae("li",{key:i,style:{"text-align":"left"},innerHTML:i},null,8,bi))),128))])]),_:1})]),_:1})}const ki=Oe(yi,[["render",xi]]),Ai="modulepreload",zi=function(a){return"/avif2jpeg/dist/"+a},Ht={},ge=function(s,g,o){let i=Promise.resolve();if(g&&g.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),p=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(g.map(x=>{if(x=zi(x),x in Ht)return;Ht[x]=!0;const k=x.endsWith(".css"),A=k?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${A}`))return;const c=document.createElement("link");if(c.rel=k?"stylesheet":Ai,k||(c.as="script"),c.crossOrigin="",c.href=x,p&&c.setAttribute("nonce",p),document.head.appendChild(c),k)return new Promise((E,y)=>{c.addEventListener("load",E),c.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${x}`)))})}))}function d(l){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=l,window.dispatchEvent(p),!p.defaultPrevented)throw l}return i.then(l=>{for(const p of l||[])p.status==="rejected"&&d(p.reason);return s().catch(d)})},_n="English",yn="üá¨üáß",wn='AVIF to JPEG "Offline" Batch Converter',bn="It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",xn="Drag & Drop AVIF Images to Convert",kn=["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data is sent to any server</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.'],An="Select your language",zn="Choose Target File Extentions",Tn={avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types",edit_type:"Edit File Extension List"},In="Input a list of comma separated file extentions to load.<br>e.g.) .jpg,.gif,.png",Sn="Load Images",Cn="Select your images from a dialog window.<br>*Multiple selection allowed.",$n="Load a Whole Folder",Ln=`Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>*It will show "Upload" button, but it actually doesn't upload anything to any server.`,En="Converting images",Fn="Aborted",Mn="Some files failed to convert",On="Completed",Pn="Currently Busy",Un="No files with the extentions were found.",Nn="Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",Dn="Cancel",jn="Save",Rn="Close",Zn="Open",Bn="Re-convert",Hn="Convert previous selected {n} @:files again",Wn="File | Files",Vn="thread | threads",qn="You have not saved the converted images yet.",Gn="Data have not been saved",Kn="Open Source",Qn="Open the converted image",Yn="Copied to clipboard",Xn="The converted image was copied to your clipboard as DataURL.",Jn="Copy the converted image as DataURL",ea="Convert Again",ta={expandLogTooltip:"Displaying the entire log may severely reduce conversion speed.",expandLog:"Show entire log",autoScroll:"Auto scroll",showOnlyErrors:"Show only errors",log:"Log",outInRate:"Out / In Ratio",elapsedTime:"Elapsed Time",multiThreading:"Multi-Threading",outputSettings:"Output Settings",totalSize:"Total Size",totalFiles:"Number of Files",confirmDownloadMessage:"It will start to download {0} zip files.",inputSize:"Input Size",outputSize:"Output Size",filterSuccess:"Hide completed item",progressErrors:"Failed items",progressStarted:"Started Items",progressTotal:"Total number of files",zippingProgress:"Zipping progress",zipped:"ZIPPED",openFailedList:"Open failed file list",zipFailedList:"Pack failed files into Zips",table:{index:"index",status:"status",core:"thread",details:"file"},saveFailedList:"Save failed file list",done:"done",convertedZips:"successfully completed ZIP",progressSuccess:"Completed Files",downloadConvertedImage:"Download Converted Image",failureZippingFailedFiles:"Failure while zipping the failed files.",browseConvertedImages:"Browse converted images",index:"Index",Original:"Original",Converted:"Converted",saveAllZipsTooltip:"Save all ZIP files"},na={maxZipFileSize:"Max zip file size",retainExtTooltip:"New extension will be appended to original extension",retainOriginalExtension:"Keep Original File Extension",qualitytooltip:"Set image quality for output",quality:"Image Quality",maxZipFileSizeTooltip:"Set smaller value if memory problems occur.",ignoreExtTooltip:'Try to load files that don"t have image file extension',ignoreFileExtensions:"Load All File Types",imageTypeTooltip:"Choose image format for output",imageType:"Image Type",advancedSettings:"Advanced Settings",enableMultiThreads:"Enable multi-threading",resetButtonTooltip:"Restore all settings to default.",multiThreadsTooltip:"Convert images in multi-threaded",shrinkImageTooltip:"If the image dimensions are larger than the specified value, shrink the image to that value",shrinkImage:"Shrink images that exceed the following dimensions",useFolderNameForZip:"Use dropped folder name for the zip file",useFolderNameForZipTooltip:"If a folder is dropped or selected, its name is used as the name of the output ZIP file"},aa="Disabled",oa="Download",la="Reset",ia="Back",sa="Failed",ra="Success",ua="Previous version",da=`
Height`,ca="Width",pa="Don't show this message again",fa="About the warning when selecting a folder",ga="OK",ma={},va="You must press the ‚ÄúUpload‚Äù button here to load all the images in the folder, but the data loaded by this application is never actually uploaded to the server.",ha="Continue",_a="Cancel",ya="When you select a folder instead of a file as input on a website, major web browsers will display a warning like the image below.",wa="If ‚ÄúOut of Memory‚Äù is displayed during conversion and the process is interrupted, reduce or disable the number of multi-threads in the ‚ÄúAdvanced Settings‚Äù.",ba={lang:_n,flags:yn,title:wn,metaDescription:bn,droptarget:xn,descriptions:kn,selectLanguage:An,fileTypeRadioTitle:zn,fileTypeRadioOptions:Tn,editAcceptTypes:In,loadbutton:Sn,loadbuttontooltip:Cn,loadfolderbutton:$n,loadfoldertooltip:Ln,processing:En,aborted:Fn,incomplete:Mn,completed:On,interfered:Pn,noimage:Un,avifUnsupported:Nn,cancel:Dn,save:jn,close:Rn,open:Zn,reconvert:Bn,reconvertTip:Hn,files:Wn,threads:Vn,confirmCloseDialog:qn,confirmCloseDialogTitle:Gn,githubOpenSource:Kn,convertedImageUrlTooltip:Qn,copiedDataURLDialogTitle:Yn,copiedDataURLMessage:Xn,convertedImageDataUrlTooltip:Jn,convertAgain:ea,status:ta,settings:na,disabled:aa,Download:oa,reset:la,back:ia,failed:sa,success:ra,previousVersion:ua,height:da,width:ca,checkboxTextDontShowThis:pa,loadfolderNotifyingTitle:fa,OK:ga,loadfolderNotifyingMessage:ma,loadfolderNotifyingMessageTerm2:va,Continue:ha,Cancel:_a,loadfolderNotifyingMessageTerm1:ya,annotationOutOfMemory:wa},Ti=Object.freeze(Object.defineProperty({__proto__:null,Cancel:_a,Continue:ha,Download:oa,OK:ga,aborted:Fn,annotationOutOfMemory:wa,avifUnsupported:Nn,back:ia,cancel:Dn,checkboxTextDontShowThis:pa,close:Rn,completed:On,confirmCloseDialog:qn,confirmCloseDialogTitle:Gn,convertAgain:ea,convertedImageDataUrlTooltip:Jn,convertedImageUrlTooltip:Qn,copiedDataURLDialogTitle:Yn,copiedDataURLMessage:Xn,default:ba,descriptions:kn,disabled:aa,droptarget:xn,editAcceptTypes:In,failed:sa,fileTypeRadioOptions:Tn,fileTypeRadioTitle:zn,files:Wn,flags:yn,githubOpenSource:Kn,height:da,incomplete:Mn,interfered:Pn,lang:_n,loadbutton:Sn,loadbuttontooltip:Cn,loadfolderNotifyingMessage:ma,loadfolderNotifyingMessageTerm1:ya,loadfolderNotifyingMessageTerm2:va,loadfolderNotifyingTitle:fa,loadfolderbutton:$n,loadfoldertooltip:Ln,metaDescription:bn,noimage:Un,open:Zn,previousVersion:ua,processing:En,reconvert:Bn,reconvertTip:Hn,reset:la,save:jn,selectLanguage:An,settings:na,status:ta,success:ra,threads:Vn,title:wn,width:ca},Symbol.toStringTag,{value:"Module"})),Ii="Chinese",Si="Ukrainian",Ci="Turkish",$i="Russian",Li="Portuguese",Ei="Polish",Fi="Dutch",Mi="Korean",Oi="Japanese",Pi="Italian",Ui="Indonesian",Ni="Hindi",Di="French",ji="Spanish",Ri="English",Zi="German",Bi="Arabic",Hi={zh:Ii,"zh-hant":"Chinese(hant)",uk:Si,tr:Ci,ru:$i,pt:Li,pl:Ei,nl:Fi,ko:Mi,ja:Oi,it:Pi,id:Ui,hi:Ni,fr:Di,es:ji,en:Ri,de:Zi,ar:Bi},it=[],xa={en:ba},$t={},Wt=Object.assign({"./locales/ar.json":()=>ge(()=>import("./ar-DVpn_5m0.js"),[]),"./locales/de.json":()=>ge(()=>import("./de-CZLU7Wcw.js"),[]),"./locales/en.json":()=>ge(()=>Promise.resolve().then(()=>Ti),void 0),"./locales/es.json":()=>ge(()=>import("./es-vFjXeEzj.js"),[]),"./locales/fr.json":()=>ge(()=>import("./fr-DaBgqVX3.js"),[]),"./locales/hi.json":()=>ge(()=>import("./hi-BmUeGfK2.js"),[]),"./locales/id.json":()=>ge(()=>import("./id-zEzZH_Sh.js"),[]),"./locales/it.json":()=>ge(()=>import("./it-BtNAZhGj.js"),[]),"./locales/ja.json":()=>ge(()=>import("./ja-BsYDgdAp.js"),[]),"./locales/ko.json":()=>ge(()=>import("./ko-DG_6zZcw.js"),[]),"./locales/nl.json":()=>ge(()=>import("./nl-CzmuBCIy.js"),[]),"./locales/pl.json":()=>ge(()=>import("./pl-ByUpO_LE.js"),[]),"./locales/pt.json":()=>ge(()=>import("./pt-F3forF9-.js"),[]),"./locales/ru.json":()=>ge(()=>import("./ru-DCHoTuw_.js"),[]),"./locales/tr.json":()=>ge(()=>import("./tr-Cr9YJUaM.js"),[]),"./locales/uk.json":()=>ge(()=>import("./uk-Cp9n3PcQ.js"),[]),"./locales/zh-hant.json":()=>ge(()=>import("./zh-hant-P6JTQgWg.js"),[]),"./locales/zh.json":()=>ge(()=>import("./zh-C4CSH7aY.js"),[])});var Vt;for(const a in Wt){const s=(Vt=a.match(/\/([a-z]{2}(?:-[a-z]+)?)\.json$/i))==null?void 0:Vt[1];s&&(it.push(s),!(s in xa)&&($t[s]=Wt[a]))}let wt=Vi();wt in $t||(wt="en");const st=fo({legacy:!1,globalInjection:!0,locale:wt,fallbackLocale:"en",messages:xa,warnHtmlMessage:!1,missingWarn:!1,fallbackWarn:!1});async function Wi(a){if(st.global.availableLocales.indexOf(a)>=0)return;const s=await $t[a]();st.global.setLocaleMessage(a,s),await Qe()}function Vi(){const a=location.pathname;return String(a.match(/[^/]+(?=\/?$)/)||"").toLowerCase()}const qi=["innerHTML"],Gi=_e({__name:"switch-lang",emits:["lang-ready","lang-change"],async setup(a,{emit:s}){let g,o;const i=We(Ne),d=Gt(),{locale:l,t:p}=Me(),x=s,k=Object.entries(Hi).map(([m,$])=>({label:$,value:m}));k.sort((m,$)=>{const S=m.label,b=$.label;return S>b?1:S<b?-1:0}),Ee(()=>{d.afterEach((m,$,S)=>{c(),i.switchToolTipVisibility()})}),Jt(async()=>{}),[g,o]=go(()=>c()),await g,o();async function A(m){(m!==l.value||st.global.availableLocales.indexOf(m)===-1)&&(x("lang-change",m),await Wi(m),l.value=m,document.title=p("title"),await Qe()),x("lang-ready",m)}async function c(){const m=d.currentRoute.value.path||"",$=String(m.match(new RegExp("(?<=^\\/)[^/]+"))||"");$&&it.includes($)?(await A($),l.value=$):await E()}async function E(){const m=y().toLowerCase(),$=m.split(/[-_]/)[0];if(it.includes($)){let S=$;if($==="zh")switch(m){case"zh-hant":case"zh-mo":case"zh-hk":case"zh-tw":S="zh-hant"}await A(S)}}function y(){const m=window.navigator;return m.language||m.userLanguage||m.browserLanguage}function f(m){d.push("/"+m+"/")}return(m,$)=>{const S=ve,b=rn,P=Ae;return O(),V(P,{to:!1,"display-directive":"show",show:e(i).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(i).LANDSCAPE.value?"left":"bottom",duration:0,delay:50},{trigger:t(()=>[n(b,{ref:"langselect",size:"tiny",style:{width:"100%"},"consistent-menu-width":!1,options:e(k),"_v-model:value":"locale",value:e(l),"onUpdate:value":f},{arrow:t(()=>[n(S,null,{default:t(()=>[n(e(mo))]),_:1})]),_:1},8,["options","value"])]),default:t(()=>[h("div",{innerHTML:m.$t("selectLanguage")},null,8,qi)]),_:1},8,["show","placement"])}}}),Ki=h("span",null,"CONVERT TOüëá",-1),Ne=Symbol("global variables"),Qi=_e({__name:"Avif2Jpeg",emits:["ready"],setup(a,{emit:s}){Me();const g=s,o=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),i=_(null),d=_(2);let l=_(void 0);const p=_(!0),x=_(!1),k=_(!1),A=_(!1),c=_(!1);vo(Ne,{showTooltipsBeforeMounted:l,LANDSCAPE:p,IS_SP:o,switchToolTipVisibility:S,SSR:!1}),Ee(()=>{b(),window.addEventListener("resize",b),S(),setTimeout(()=>k.value=!0,3e3)});const E=200;let y=0,f=!0;function m(){A.value=!1,y=Date.now()}function $(){const w=f?0:Math.max(0,E-(Date.now()-y));f=!1,setTimeout(()=>A.value=!0,w),g("ready")}async function S(){}function b(){const w=document.body.clientWidth,v=document.body.clientHeight;p.value=w*.75>v||w>900}function P(w){i.value=w}function L(w){c.value=w}return(w,v)=>{const z=Ce,G=ve,K=tt,fe=Ve;return O(),V(fe,{vertical:"",align:"stretch",justify:"start",style:{height:"100%",position:"relative"}},{default:t(()=>[n(No,null,{"lang-switch":t(()=>[(O(),V(ho,null,{default:t(()=>[n(Gi,{onLangChange:m,onLangReady:$})]),_:1}))]),_:1}),n(je,{name:"fade"},{default:t(()=>[e(A)?(O(),V(fe,{key:0,vertical:"",align:"stretch",justify:"space-between",style:{height:"100%"}},{default:t(()=>[n(Ro),n(z,{justify:"center"},{default:t(()=>[n(di,{expanded:e(R).expandExtButtons,"onUpdate:expanded":v[0]||(v[0]=U=>e(R).expandExtButtons=U),target:e(R).acceptTypeValue,"onUpdate:target":v[1]||(v[1]=U=>e(R).acceptTypeValue=U),userExtensions:e(R).editedAcceptTypes,"onUpdate:userExtensions":v[2]||(v[2]=U=>e(R).editedAcceptTypes=U),"disable-notifying-folder-select":e(R).disableNotifyingFolderSelect,"onUpdate:disableNotifyingFolderSelect":v[3]||(v[3]=U=>e(R).disableNotifyingFolderSelect=U),forbidden:e(x),onInput:P,onClick:v[4]||(v[4]=U=>L(!0)),onCancel:v[5]||(v[5]=U=>L(!1))},null,8,["expanded","target","userExtensions","disable-notifying-folder-select","forbidden"])]),_:1}),n(Zl,{input:e(i),format:e(R).imageFormat,quality:e(R).imageQuality,"retain-extension":e(R).retainExtension,maxZipSizeMB:e(R).maxZipSizeMB,threads:e(R).multithread?e(R).threadCount:0,"show-note":e(c),"onUpdate:showNote":v[6]||(v[6]=U=>Le(c)?c.value=U:null),onStart:v[7]||(v[7]=U=>x.value=!0),onEnd:v[8]||(v[8]=U=>x.value=!1),onMultiThreadCount:v[9]||(v[9]=U=>d.value=U)},null,8,["input","format","quality","retain-extension","maxZipSizeMB","threads","show-note"]),n(z,{vertical:"",align:"center"},{default:t(()=>[n(K,{trigger:"manual",placement:"top","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(G,{size:"4vh",color:"#DADADA",style:{margin:"0px"}},{default:t(()=>[n(e(_o))]),_:1})]),default:t(()=>[Ki]),_:1})]),_:1}),n(z,{vertical:"",align:"center"},{default:t(()=>[n(pi,{format:e(R).imageFormat,"onUpdate:format":v[10]||(v[10]=U=>e(R).imageFormat=U),quality:e(R).imageQuality,"onUpdate:quality":v[11]||(v[11]=U=>e(R).imageQuality=U)},null,8,["format","quality"]),n(_i,{"retain-ext":e(R).retainExtension,"onUpdate:retainExt":v[12]||(v[12]=U=>e(R).retainExtension=U),"use-folder-name-for-zip":e(R).useFolderNameForZip,"onUpdate:useFolderNameForZip":v[13]||(v[13]=U=>e(R).useFolderNameForZip=U),"max-zip-size":e(R).maxZipSizeMB,"onUpdate:maxZipSize":v[14]||(v[14]=U=>e(R).maxZipSizeMB=U),expanded:e(R).expandAdvSettings,"onUpdate:expanded":v[15]||(v[15]=U=>e(R).expandAdvSettings=U),multithread:e(R).multithread,"onUpdate:multithread":v[16]||(v[16]=U=>e(R).multithread=U),"thread-count":e(R).threadCount,"onUpdate:threadCount":v[17]||(v[17]=U=>e(R).threadCount=U),"thread-max":e(d)||0,"shrink-image":e(R).shrinkImage,"onUpdate:shrinkImage":v[18]||(v[18]=U=>e(R).shrinkImage=U),"max-width":e(R).maxWidth,"onUpdate:maxWidth":v[19]||(v[19]=U=>e(R).maxWidth=U),"max-height":e(R).maxHeight,"onUpdate:maxHeight":v[20]||(v[20]=U=>e(R).maxHeight=U)},null,8,["retain-ext","use-folder-name-for-zip","max-zip-size","expanded","multithread","thread-count","thread-max","shrink-image","max-width","max-height"])]),_:1}),n(ki)]),_:1})):ue("",!0)]),_:1})]),_:1})}}}),Lt=_e({__name:"App",setup(a){const s={Statistic:{valueFontSize:"1em"},Popover:{borderRadius:"0.4em",boxShadow:"2px 2px 5px 0px #555555"},Tooltip:{color:"#000000AA"},Image:{toolbarColor:"#00000099"}},g=_(!0);return Ee(()=>{g.value=!1}),(o,i)=>{const d=wo,l=bo,p=xo,x=ko,k=Ao,A=yo;return O(),V(A,{"theme-overrides":s,style:{width:"100%",height:"100%"}},{default:t(()=>[n(k,null,{default:t(()=>[n(x,{placement:"top-right",max:20},{default:t(()=>[n(p,{placement:"top-left",closable:!0,max:50},{default:t(()=>[n(l,null,{default:t(()=>[n(d,null,{default:t(()=>[n(Qi,{class:Ye({hide:e(g)})},null,8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),ka=[{path:"/",name:"Home",component:Lt}];for(const a of it)ka.push({path:"/"+a+"/",strict:!0,name:a,component:Lt});zo(Lt,{routes:ka,base:"/avif2jpeg/dist/"},({app:a,router:s,routes:g,isClient:o,initialState:i})=>{a.use(st)});
