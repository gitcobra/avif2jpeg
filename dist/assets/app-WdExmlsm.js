var Sa=Object.defineProperty;var La=(a,i,r)=>i in a?Sa(a,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[i]=r;var Ke=(a,i,r)=>La(a,typeof i!="symbol"?i+"":i,r);import{r as y,a as Bt,d as Se,i as rt,c as te,o as F,_ as xe,u as e,w as t,b as z,t as c,e as n,f as Ca,N as Ae,L as $a,g as le,B as Pe,h as sn,j as h,F as Oe,k as xt,l as Ea,m as Y,n as Pa,p as Me,q as ge,s as Fa,v as Un,x as Mn,y as Ie,z as Ce,A as nn,C as on,D as nt,E as ft,G as Oa,H as Ua,I as Ze,J as It,K as ie,M as lt,T as st,O as Nn,P as Be,Q as rn,R as Wt,S as un,U as zt,V as qe,W as Rn,X as We,Y as Ma,Z as mt,$ as Na,a0 as bn,a1 as kn,a2 as Dn,a3 as ht,a4 as Ra,a5 as cn,a6 as Da,a7 as ja,a8 as dn,a9 as Za,aa as An,ab as jn,ac as Ba,ad as Wa,ae as xn,af as Zn,ag as Ha,ah as Bn,ai as He,aj as Wn,ak as Va,al as Xt,am as Ht,an as Hn,ao as Vn,ap as qa,aq as Ga,ar as Ka,as as Rt,at as Ya,au as Xa,av as De,aw as Qa,ax as Ja,ay as pn,az as qn,aA as el,aB as tl,aC as Gn,aD as nl,aE as yt,aF as bt,aG as ol,aH as al,aI as ll,aJ as sl,aK as il,aL as rl,aM as ul,aN as cl,aO as dl,aP as pl,aQ as In,aR as fl,aS as gl,aT as ml,aU as vl,aV as hl,aW as _l,aX as wl,aY as yl,aZ as bl}from"./vendor-DscZ2f6n.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))g(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&g(d)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function g(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();const Ue=y(navigator.hardwareConcurrency?Math.min(navigator.hardwareConcurrency,12):0),kt={threadCount:{min:2,max:Math.max(2,Ue.value)}},kl={imageFormat:"image/jpeg",imageQuality:90,expandExtButtons:!1,acceptTypeValue:void 0,editedAcceptTypes:"",expandAdvSettings:!1,retainExtension:!1,maxZipSizeMB:1e3,useFolderNameForZip:!1,multithread:!0,threadCount:Ue.value,shrinkImage:!1,maxWidth:4096,maxHeight:4096,disableNotifyingFolderSelect:!1},H=Bt(Kn({}));function Al(){Kn(H)}function Kn(a){return Object.assign(a,kl)}const Yn="avif2jpeg",Qt=JSON.parse(localStorage.getItem(Yn)||"{}");for(const a in H)if(Qt.hasOwnProperty(a)&&Qt[a]!==void 0){let i=Qt[a];kt.hasOwnProperty(a)&&(kt[a].min>i&&(i=kt[a].min),kt[a].max<i&&(i=kt[a].max)),H[a]=i}const xl=()=>{const a={};for(const i in H)a[i]=H[i];localStorage.setItem(Yn,JSON.stringify(a))};window.addEventListener("beforeunload",xl);const Il=Se({__name:"github",setup(a){const i=rt(ot);return(r,g)=>{const o=Ae,l=Ca,d=xe;return F(),te(d,{to:!1,"display-directive":"show",show:e(i).showTooltipsBeforeMounted.value,trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(l,{href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-size":"small","font-weight":"bolder"}},{default:t(()=>[n(o,null,{default:t(()=>[n(e($a))]),_:1}),g[0]||(g[0]=z("GitHub"))]),_:1})]),default:t(()=>[z(" "+c(r.$t("githubOpenSource")),1)]),_:1},8,["show"])}}}),zl=["href"],Tl=Se({__name:"licenses",setup(a){const i=y(!1),r={Vue:"https://github.com/vuejs/core/blob/main/LICENSE",Vite:"https://github.com/vitejs/vite/blob/main/LICENSE","Vite SSG":"https://github.com/antfu/vite-ssg/blob/main/LICENSE","Naive UI":"https://github.com/TuSimple/naive-ui/blob/main/LICENSE",Ionicons:"https://github.com/ionic-team/ionicons/blob/main/LICENSE"};return(g,o)=>{const l=Pe;return F(),le(Oe,null,[n(l,{text:"",onClick:o[0]||(o[0]=d=>i.value=!0),style:{color:"black","font-size":"small"}},{default:t(()=>o[2]||(o[2]=[z("Licenses")])),_:1}),n(e(sn),{preset:"dialog",ref:"dialog",show:i.value,"onUpdate:show":o[1]||(o[1]=d=>i.value=d),"positive-text":"OK",title:"Licenses"},{default:t(()=>[o[3]||(o[3]=h("h3",null,"Used Framework and Libraries",-1)),h("ul",null,[(F(),le(Oe,null,xt(r,(d,m)=>h("li",null,[h("a",{href:d},c(m),9,zl)])),64))])]),_:1},8,["show"])],64)}}}),Sl=1,Ll=9,Cl=2,$l="",Nt={major:Sl,minor:Ll,build:Cl,tag:$l},El={style:{"font-size":"x-small","user-select":"none"}},Pl=Se({__name:"version",setup(a){const i=["0.0.118"],r=`${Nt.major}.${Nt.minor}.${Nt.build}${Nt.tag}`,g=i.map(m=>({label:`v${m}`,key:m,value:m}));function o(m){const{key:p,label:w}=m,f=d(p),v=Y("a",{href:f},w),_=Y("div",null,v);return Y("div",null,_)}function l(m){location.href=d(m)}function d(m){return`/avif2jpeg/old/${m}/`}return(m,p)=>{const w=Ea;return F(),te(w,{"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start",options:e(g),"render-label":o,"onUpdate:value":l},{header:t(()=>[h("span",El,c(m.$t("previousVersion")),1)]),default:t(()=>[h("span",{style:{cursor:"pointer"}},"v"+c(r))]),_:1},8,["options"])}}}),Fl={key:0,href:"/"},Ol=Se({__name:"header",setup(a){const i=Pa();return(r,g)=>{const o=Me,l=Un;return F(),te(o,{vertical:"",justify:"start"},{default:t(()=>[n(o,{justify:"space-between",align:"center",wrap:!1},{default:t(()=>[n(o,{align:"center"},{default:t(()=>[n(Il),n(Pl),n(Tl),n(o,{style:{"font-size":"small"}},{default:t(()=>[e(i).path!=="/"?(F(),le("a",Fl,"HOME")):ge("",!0)]),_:1})]),_:1}),n(o,{align:"end",style:{"font-size":"x-small"}},{default:t(()=>[Fa(r.$slots,"lang-switch")]),_:3})]),_:3}),n(l,{style:{margin:"0px"}})]),_:3})}}}),Ul={style:{padding:"0px",margin:"0px","text-align":"center"}},Ml=Se({__name:"title",setup(a){const i=Mn();return Ie(()=>{const r=i.currentRoute.value.path||"";return!String(r.match(new RegExp("(?<=^\\/)[^/]+"))||"")}),(r,g)=>{const o=Me;return F(),te(o,{align:"center",justify:"center",style:{margin:"0px"}},{default:t(()=>[h("h1",Ul,c(r.$t("title")),1)]),_:1})}}});function Nl(a){return new Worker("/avif2jpeg/dist/assets/worker.canvas-DW_4WnxP.js",{name:a==null?void 0:a.name})}let Xn=0;class Rl extends Nl{constructor(r){super();Ke(this,"id",Xn++);Ke(this,"priority");this.priority=r||!1}release(){Vt(this)}}class Dl extends Promise{constructor(){super(...arguments);Ke(this,"wid",-1)}}const an=new Set,gt=new Set,it=new Set,St=new Map,Qn=[];function jl(a){const i=new Rl;return an.add(i),Jn(i,a),Vt(i),a&&Qn.push(i.id),i}function Jn(a,i){const r=i?it:gt,g=new Dl(o=>{St.set(a,()=>o([a,g,!!i]))});g.wid=a.id,r.add(g)}async function Zl(a){let i;if(!a)i=new Set([...it,...gt]);else if(typeof a=="number"){const l=Qn.slice(0,a);i=new Set([...it].filter(d=>l.includes(d.wid)))}else i=a?it:gt;const[r,g,o]=await Promise.any(i);return(o?it:gt).delete(g),Jn(r,o),r}function Vt(a){const i=St.get(a);i&&(St.delete(a),i())}function Bl(){for(const a of St.keys())Vt(a)}async function zn(){return await Promise.all([...gt,...it])}function eo(){Bl();for(const a of an)a.onmessage=null,a.terminate();an.clear(),gt.clear(),it.clear(),St.clear(),Xn=0}function Wl(a){return new Worker("/avif2jpeg/dist/assets/worker.zip-BstSCVpr.js",{name:a==null?void 0:a.name})}const Hl=1e3*10,Vl=1,fn=2e3*2e3*5,ql=5,Gl=2,Kl=fn*1,Tn=fn*6,Yl=300,Lt=new Map,Dt=new Map;let At=0,tt;const Ve=new Map,vt=new Map,Ct=new Map,$t=new Map;let gn,J,je,Et,Ye,to,no,oo,ao,lo,qt;function Jt(a){if({files:Ye,completedFileIdSet:gn,ConvStats:J,canceled:je,props:Et,format:to,quality:no,outputExt:oo,imageType:ao,message:lo,notification:qt}=a||{},tt=null,Lt.clear(),Dt.clear(),Ve.clear(),vt.clear(),Ct.clear(),$t.clear(),vt.clear(),Ct.clear(),$t.clear(),a)for(const r in a)delete a[r]}async function Xl(a){Jt(a),gn.clear();const i=Math.min(Et.threads-1,Ye.length),r=Math.min(ql,i),g=es(J,je);let o;try{o=await Ql(i,r,g)}catch{return Jt(),{exception:new Error("worker-load-error"),callbackToClearConverter:new Function,callbackToGenerateFailedZips:new Function}}const l=Jl(o);tt=o;const d=Ce(je,L=>{L&&d()}),p=Ye.length===1;let w=0,f=0,v="",_=0;for(At=0,Lt.clear();_<Ye.length;){if(At>Tn&&!je.value){await new Promise(V=>setTimeout(V,100));continue}const L=[],O=[];let P=!1;const $=Ye.length-_,K=Math.min(_+Math.max(Math.min(Gl,$/Et.threads|0),1),Ye.length);let x=0,A=!1;for(;_<K&&!((x>Kl||At>Tn)&&!je.value);_++){const V=Ye[_],de=V.webkitRelativePath||V.name,N=Dt.get(V);A=A||!!N;const _e=0;je.value;const me=V._id;if(x+=V.size,P=_===Ye.length-1,vt.has(me)||vt.set(me,V),so(_,de,me),Ct.has(V)||(w++,J.index=w),je.value){ro(me);continue}let ze;try{ze=await createImageBitmap(V)}catch{io(_,de,me);continue}O.push(ze);const T=ze.width*ze.height*4;x+=T+V.size,At+=T+V.size;let B=!1;const q=Date.now();q-f>Yl&&(f=q,B=!0),L.push({index:_,bitmap:ze,file:V,fileId:me,outputPath:v,type:to,quality:no/100,demandThumbnail:B||P,isSingleImage:p,maxSize:H.shrinkImage?{width:H.maxWidth,height:H.maxHeight}:null,retriedTime:Dt.get(V)||0,webkitRelativePath:V.webkitRelativePath}),B=!1}let Z;if(L.length){const V=x>fn;Z=await Zl(r>0&&(A?1:V)),Lt.set(Z,x)}if(Z&&(Z.postMessage(L,O),O.forEach(V=>V.close()),O.length=0),P&&(await zn(),je.value))break}if(!je.value){let L;await new Promise(O=>{L=Ce([()=>J.done,je],()=>{(J.done>=w||je.value)&&O(void 0)},{immediate:!0})}),L()}d(),o.postMessage({action:"squeeze"}),await l,await zn();const u={value:!1},k=()=>{u.value=!0,eo(),o.onmessage=null,o.terminate(),Jt()};let b=!1;return{callbackToClearConverter:k,callbackToGenerateFailedZips:async L=>{b||(b=!0,await os(L,o,u,J))}}}async function Ql(a,i,r){eo();const g=new Wl;g.postMessage({action:"set-config",zipSize:Et.maxZipSizeMB*1024*1024,keepExt:Et.retainExtension,outputExt:oo,imageType:ao});let o;for(let d=0;d<a;d++){const m=jl(i>d);o??(o=m),m.onmessage=r;const{port1:p,port2:w}=new MessageChannel;g.postMessage({action:"set-port"},[p]),m.postMessage({},[w])}return await new Promise((d,m)=>{const p=u=>{g.removeEventListener("message",v),o.removeEventListener("message",v),clearTimeout(_),u?d(u):m(u)};let w=!1,f=!1;const v=u=>{u.target===g&&(w=!0),u.target===o&&(f=!0),w&&f&&p(!0)};let _=0;g.addEventListener("message",v),o.addEventListener("message",v),_=window.setTimeout(()=>p(!1),Hl)}),g}function Jl(a){return new Promise(r=>{a.onmessage=g=>{var w;const o=g.data,{action:l}=o;switch(l){case"add-zip-completed":{const{fileId:f,entireIndex:v,storedPath:_}=o;J.done++,J.success++,gn.add(f);const u=Ve.get(f);u.zippedIndex=v,J.ziplogs.push({fileId:f,storedPath:_});return}case"respond-image":{const{url:f,index:v,path:_,size:u,fileId:k}=o;J.convertedImageUrl=f,J.convertedImageSize=u,J.convertedImageIndex=v,J.convertedImageName=_;let b="",C=0,L="";if(k>=0){const O=vt.get(k);b=URL.createObjectURL(O),C=O.size,L=O.webkitRelativePath||O.name}J.convertedImageOrgUrl=b,J.convertedImageOrgSize=C,J.convertedImageOrgName=L,J.convertedImageShrinked=(w=$t.get(k))==null?void 0:w.shrinked;return}case"respond-delete":{const{index:f,success:v,fileId:_}=o;Ve.get(_).command="❌deleted",Ve.get(_).completed=!1;return}}switch(l){case"error-push-filelist-zip":const{path:f}=o;J.failedZipDone=!0,qt.error({content:`an error occurred "${f}"`,duration:3e3});return}const{size:d,count:m}=o,p="url"in g.data?g.data.url:"";switch(l){case"push-zip":J.zips.push({url:p,size:d,count:m}),J.zippedTotalCount+=m,J.zippedTotalSize+=d;break;case"squeeze-zip":m>0&&(J.zips.push({url:p,size:d,count:m}),J.zippedTotalCount+=m,J.zippedTotalSize+=d),r(void 0);break;case"push-filelist":J.failedFileZippedCount++;break;case"squeeze-filelist-zip":J.failedZipDone=!0;case"push-filelist-zip":J.failedZips.push({url:p,size:d,count:m});break;case"zip-error":case"zip-squeeze-error":J.zippingErrorCount+=m,l==="zip-squeeze-error"&&r(void 0);break}}})}function es(a,i,r,g){return l=>{const d=l.target,{data:m}=l,{action:p}=m;switch(i.value,p){case"list-start":break;case"file-start":{const{index:w,path:f,fileId:v}=m;so(w,f,v);break}case"file-load":{const{thumbnail:w,width:f,height:v,fileId:_,shrinked:u}=m,k=Ve.get(_);k.core=d.id,k.command="🖼️loaded",w&&(a.thumbnail=w);let b=$t.get(_);b||(b={},$t.set(_,b)),b.shrinked??(b.shrinked=u);break}case"file-converted":{const{index:w,path:f,fileId:v}=m,_=Ve.get(v);_.command="🔃converted",a.converted++;break}case"file-completed":{const{inputsize:w,outputsize:f,fileId:v}=m,_=Ve.get(v);_&&(_.command="✅completed",_.completed=!0,_.fileId=v),a.inputTotalSize+=w,a.outputTotalSize+=f;break}case"file-error":{const{index:w,path:f,fileId:v}=m;io(w,f,v);break}case"file-canceled":{const{fileId:w,path:f}=m;ro(w);break}case"list-end":{Vt(d),At-=Lt.get(d)||0,Lt.delete(d);break}}}}let ts=0;function so(a,i,r){const g={key:ts++,core:-1,index:a,path:i,command:"➡️started"};Ve.set(r,g),J.logs.push(g)}function io(a,i,r){const g=vt.get(r);if(!g)throw new Error(`the file doesn't exist in the Map. "${r}":"${i}"`);const o=Ct.get(g)||0,l=Ve.get(r);o<Vl?(Ct.set(g,o+1),Ye.push(g),Dt.set(g,Date.now()),l.command="⚠️retrying",l.error=!0,lo.warning(`retrying "${i}"`,{duration:3e3}),J.retried++):(J.done++,J.failure++,l.command="❗failed",l.error=!0,qt.error({content:`failed to load "${i}"`,duration:5e3}))}function ro(a){const i=Ve.get(a);J.done++,J.failure++,i.command="❗canceled",i.error=!0}function ns(a){tt==null||tt.postMessage({action:"request-image",index:a})}function en(a){tt==null||tt.postMessage({action:"delete-image",index:a})}async function os(a,i,r,g){let o=0;for(const l of a){const d=(l.webkitRelativePath||l.name).replace(/^\//,"");if(g.failedZipDone)break;if(r.value)return;o-g.failedFileZippedCount>20&&await new Promise(m=>setTimeout(m,10)),i.postMessage({action:"add-filelist",file:l,path:d}),o++}if(g.failedZipDone){qt.error({content:"Zipping error files was aborted",duration:5e3});return}i.postMessage({action:"squeeze-filelist"})}function et(a,i=2){const r=Math.sign(a);a=Math.abs(a);const g=["Bytes","KB","MB","GB"],o=a?Math.floor(Math.log(a)/Math.log(1024)):0;return`${(a/Math.pow(1024,o)*r).toFixed(i)}${g[o]}`}function uo(a,i=100,r=!1){i=typeof i=="number"?{width:i,height:i}:i;const{width:g,height:o}=i;let{width:l,height:d}=a;const m=l/d,p=g/o;return m>=p?(l=r?Math.min(g,l):g,d=l/m|0):(d=r?Math.min(o,d):o,l=d*m|0),{width:l,height:d}}class as{constructor(){Ke(this,"_currentFileCount",0);Ke(this,"_currentZipIndex",0);Ke(this,"_totalFileCount",0);Ke(this,"_zipLengthSumList",[]);Ke(this,"_pathBank",{})}increase(i){return i&&(this._pathBank[i]=[this._zipLengthSumList.length,this._currentFileCount]),this._currentFileCount++,this._totalFileCount++}split(){this._zipLengthSumList.push(this._totalFileCount),this._currentZipIndex++,this._currentFileCount=0}get(i){if(typeof i=="number"){let r=this._zipLengthSumList.findIndex((l,d)=>i<l);r===-1&&(r=this._zipLengthSumList.length);const g=this._zipLengthSumList[r-1]||0,o=i-g;return[r,o]}else{const r=this._pathBank[String(i)];if(r)return r}return null}getZipIndex(){return this._currentZipIndex}getIndex(){return this._totalFileCount}}let Tt;async function ls(a,i,r,g,o){let l="";const d=document.createElement("canvas"),m=d.getContext("2d");let p=new nn;const w=[p],f=new as,v=r.format,_=r.quality/100,u=[...v.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),k=a.length,b=r.maxZipSizeMB*1024*1024;let C=0,L=null,O="",P="",$=0,K=0,x=0,A=0,Z=0,V=!1;Tt=T=>{const[B,q]=f.get(T),oe=w[B],ce=oe.get(q,v);o.convertedImageIndex=T,o.convertedImageName=oe.getPathByIndex(q),o.convertedImageUrl=URL.createObjectURL(ce),o.convertedImageSize=ce.size;let se="",we=0,Ne="";const re=de[T];se=URL.createObjectURL(re),we=re.size,Ne=re.webkitRelativePath||re.name,o.convertedImageOrgUrl=se,o.convertedImageOrgSize=we,o.convertedImageOrgName=Ne};const de=[];for(const T of a){if(g.value)break;const B=T.name;let q="";const oe=T.size,ce=(T.webkitRelativePath||T.relativePath||B).replace(/^\//,""),se=document.createElement("img"),we={key:x++,core:-1,index:C++,path:ce,command:"➡️start"};o.index=C,o.logs.push(we),o.logs.length-1,l&&(URL.revokeObjectURL(l),l=""),l=URL.createObjectURL(T),P=l,$=T.size,se.src=l;const Ne=await co(se).then(()=>!0).catch(()=>!1);if(!se.complete||!Ne||g.value){o.done++,o.failure++,we.command="❗failed";continue}const re=se.width,ye=se.height;d.width=re,d.height=ye,m.drawImage(se,0,0,re,ye,0,0,re,ye),we.command="🖼️imgload",o.thumbnail=se;const M=await new Promise(ee=>{const pe=ne=>{L=ne,ee(ne)};d.toBlob(pe,v,_)});if(g.value)break;if(!M){o.failure++;continue}K=M.size,o.converted++;let G="";if(Z+K>=b){try{await p.wait(),G=await p.url()}catch{V=!0,alert("memory problem occurred");break}o.zips.push({url:G,size:Z,count:A}),o.zippedTotalCount+=A,o.zippedTotalSize+=Z,Z=0,A=0,f.split(),p=new nn,w.push(p)}Z+=K;const R=ce||B;for(let ee=1;ee<255&&(q=R.replace(r.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+(ee>1?`(${ee})`:"")+"."+u,!!p.has(q));ee++);o.done++;try{A++,p.add(q,M)}catch{continue}f.increase(),de.push(T),o.inputTotalSize+=oe,o.outputTotalSize+=K,o.ziplogs.push({fileId:T._id,storedPath:q}),O=q,we.zippedIndex=o.success,o.success++,we.command="✅completed",we.completed=!0,we.fileId=T._id,i.add(T._id)}if(o.success>0)if(k===1)L&&(o.convertedImageIndex=0,o.convertedImageName=O.replace(/^.*\/(?=[^/]+$)/,"").replace(r.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+u,o.convertedImageUrl=URL.createObjectURL(L),o.convertedImageOrgUrl=P,o.convertedImageOrgSize=$);else try{if(V)throw new Error("terminated zipping process for memory problems");await p.wait();const T=await p.url();o.zips.push({url:T,count:A,size:Z}),o.zippedTotalCount+=A,o.zippedTotalSize+=Z}catch{}const N={value:!1},_e=()=>{N.value=!0,w.forEach(T=>T.clear()),w.length=0,de.length=0,Tt=null};let me=!1;return{callbackToClearConverter:_e,callbackToGenerateFailedZips:async T=>{me||(me=!0,is(T,b,o,N))}}}function ss(a){Tt==null||Tt(a)}async function is(a,i,r,g){let o=0,l=0,d=new nn;for(let m=0;m<a.length;m++){const p=a[m],w=(p.webkitRelativePath||p.name).replace(/^\//,"");if(g.value)return;try{await d.add(w,p)}catch{alert(`an error occurred during access to "${w}"`);break}if(l+=p.size,o++,r.failedFileZippedCount++,l>=i||m===a.length-1){await d.zip();const f=await d.url();r.failedZips.push({url:f,size:l,count:o}),d.clear(),l=0,o=0}}r.failedZipDone=!0}function co(a){if(typeof a.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((i,r)=>{a.onload=i,a.onerror=r})}const Xe=(a,i)=>{const r=a.__vccOpts||a;for(const[g,o]of i)r[g]=o;return r},rs={class:"container"},us={__name:"zipicon",setup(a){return(i,r)=>(F(),le("span",rs,[n(e(Ae),null,{default:t(()=>[n(e(on))]),_:1}),r[0]||(r[0]=h("span",{class:"text"},"ZIP",-1))]))}},cs=Xe(us,[["__scopeId","data-v-65f599bb"]]),ds=["href","download","title"],ps='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',fs=Se({__name:"thumbnail",props:{src:{},width:{},height:{},maxWidth:{default:100},maxHeight:{default:100},expand:{type:Boolean,default:!1},loading:{type:Boolean},fileName:{},allowNext:{type:Boolean},allowPrev:{type:Boolean},hidden:{type:Boolean}},emits:["load","error","next","prev"],setup(a,{expose:i,emit:r}){const{t:g}=nt(),o=a,l=r,d=y();y();const m=y(!0),p=y(""),w=y(o.width||100),f=y(o.height||100),v=y(!1),_=Bt({width:w.value+"px",height:f.value+"px",minWidth:"50px",minHeight:"50px"});ft(()=>{var P,$,K;($=(P=d.value)==null?void 0:P.previewInstRef)==null||$.setPreviewSrc(ps),URL.revokeObjectURL((((K=d.value)==null?void 0:K.imageRef)||{}).src),d.value=null});const u=y(!0);Oa(()=>{u.value=!1}),Ua(()=>{u.value=!0}),Ce(o,(P,$)=>{_.width=(o.width||100)+"px",_.height=(o.height||100)+"px"}),Ce(()=>o.src,(P,$)=>{u.value&&C(P)},{immediate:!0}),i({download:L,openPreview:O,active:u});async function k(P){const $=P.target,K=$.naturalWidth,x=$.naturalHeight,{width:A,height:Z}=uo({width:K,height:x},{width:o.maxWidth||100,height:o.maxHeight||100},o.expand);w.value=A,f.value=Z,l("load",{src:$.src,width:K,height:x}),m.value=!1,await new Promise(V=>setTimeout(V,100)),!m.value&&(v.value=!0)}function b(P){const $=P.target;l("error",$.src)}async function C(P){m.value=!0,v.value=!1,p.value=P}function L(){const P=document.createElement("a");P.href=p.value,P.download=o.fileName,P.click()}function O(){var P;(P=d.value)==null||P.click()}return(P,$)=>{const K=Nn,x=rn,A=Me,Z=It;return Ze((F(),le("div",null,[n(e(xe),null,{trigger:t(()=>[n(Z,{show:e(m)||o.loading},{default:t(()=>[n(A,{justify:"center",align:"center",style:ie(e(_))},{default:t(()=>[h("a",{"_v-show":"!(imgloading || props.loading)",href:e(p),onClick:$[0]||($[0]=lt(()=>{},["left","prevent"])),target:"_blank",download:o.fileName,title:o.fileName,style:{"line-height":"0px"}},[n(st,{mode:"in-out"},{default:t(()=>[Ze(n(K,{ref_key:"nImageRef",ref:d,"show-toolbar-tooltip":"",onLoad:k,onError:b,src:e(p),width:e(w),height:e(f),style:{border:"1px solid silver"}},null,8,["src","width","height"]),[[Be,e(v)]])]),_:1})],8,ds),e(m)||o.loading?(F(),te(x,{key:0})):ge("",!0)]),_:1},8,["style"])]),_:1},8,["show"])]),default:t(()=>[z(" "+c(o.fileName),1)]),_:1})],512)),[[Be,!P.hidden]])}}}),Sn=Xe(fs,[["__scopeId","data-v-6dbc6481"]]),gs=["href","download","title"],ms={class:"left-num"},vs={class:"right-num"},hs=["href","download","title"],_s={class:"left-num"},ws={class:"right-num"},ys=["href","download"],bs=Se({__name:"image-viewer",props:{url:{},originalUrl:{},name:{},originalName:{},size:{},originalSize:{},length:{},index:{},isSingle:{type:Boolean},variousInfo:{}},emits:["demand-image","delete-image","close"],setup(a,{expose:i,emit:r}){const g=rt(ot),o=a,l=r;i({download:re,cleanup:ue,openPreview:Re,isPreviewing(){return x.value},changeIndex(S){u.value=S}});const d=Wt(),{t:m}=nt();un();const p=y(),w=y(),f=y(),v=zt("viewerItemContainer"),_=y(!0),u=y(Math.max(o.index,0)+1),k=y(1),b=y(1),C=y(""),L=y(1),O=y(1),P=y(!1),$=y(!1),K=y(!1),x=Ie(()=>{var S,I;return(I=(S=f.value)==null?void 0:S.previewInstRef)==null?void 0:I.displayed}),A=Ie(()=>{var S,I;return((I=(S=f==null?void 0:f.value)==null?void 0:S.previewInstRef)==null?void 0:I.previewSrc)===C.value}),Z=Ie(()=>u.value<o.length),V=Ie(()=>u.value>1),de=y("viewer-item-init"),N=y(0),_e=y(!0);y({width:"auto",height:"auto"});const me=y(!1);qe(()=>{document.body.addEventListener("keydown",se),document.body.addEventListener("keydown",ce),q(u.value-1),oe()}),ft(()=>{clearTimeout(ze),document.body.removeEventListener("keydown",se),document.body.removeEventListener("keydown",ce),me.value=!0}),Rn(()=>{URL.revokeObjectURL(o.url),URL.revokeObjectURL(o.originalUrl)});let ze=-1;Ce(u,(S,I)=>{u.value<1||u.value>o.length||S===I||(clearTimeout(ze),S>I?de.value="viewer-item-next":de.value="viewer-item-prev",ze=setTimeout(()=>{o.index!==u.value-1&&(N.value=_.value?N.value:~N.value,_e.value=!1,q(u.value-1))},50))});let T="",B="";Ce(()=>o.url,()=>{var U,fe;let S="";o.index===0&&_.value?(_.value=!1,u.value=1,S=o.url):o.index===u.value-1?(_.value=!1,P.value=!1,S=o.url):(URL.revokeObjectURL(o.url),URL.revokeObjectURL(o.originalUrl));const I=T,Q=B;if(URL.revokeObjectURL(I),URL.revokeObjectURL(Q),T=o.url,B=o.originalUrl,S){try{if((fe=(U=f.value)==null?void 0:U.previewInstRef)!=null&&fe.displayed){A.value?f.value.previewInstRef.setPreviewSrc(S):f.value.previewInstRef.setPreviewSrc(o.originalUrl);try{const Le=f.value.previewInstRef.displayed;f.value.previewInstRef.handleAfterLeave(),f.value.previewInstRef.displayed=Le}catch{}}}catch{}C.value=S}},{immediate:!0});function q(S){P.value=!0,$.value=!1,K.value=!1,We(()=>l("demand-image",S))}function oe(){if(!g.IS_SP)return;let S=v.value.$el,I=0,Q=0,U=0,fe=0,Le=0;const ut=Fe=>{I=Fe.touches[0].pageX,Q=Fe.touches[0].pageY,Le=Date.now()};S.addEventListener("touchstart",ut);const ct=Fe=>{U=Fe.touches[0].pageX,fe=Fe.touches[0].pageY,at()};window.addEventListener("touchmove",ct);const ae=()=>{at();const Fe=U-I,Qe=Math.abs(Fe),Gt=fe-Q,Pt=Math.abs(Gt);Qe<Pt||Qe<30||M(Fe>0?-1:1)};window.addEventListener("touchend",ae);const at=()=>{const Fe=Date.now();Fe-Le>500&&(I=U,Q=fe),Le=Fe};ft(()=>{S.removeEventListener("touchstart",ut),window.removeEventListener("touchmove",ct),window.removeEventListener("touchend",ae),S=null})}function ce(S){var I,Q,U,fe;if(S.key==="Escape")try{(Q=(I=f.value)==null?void 0:I.previewInstRef)!=null&&Q.displayed&&(S.stopPropagation(),(fe=(U=f.value)==null?void 0:U.previewInstRef)==null||fe.toggleShow(!1))}catch{}}function se(S){switch(S.code){case"ArrowRight":M(1);break;case"ArrowLeft":M(-1);break;case"Home":u.value=1;break;case"End":u.value=o.length;break;case"Space":case"Enter":if(!x.value)return;R();break;case"ArrowUp":case"ArrowDown":default:return}S.stopPropagation(),S.preventDefault()}function we({width:S,height:I}){k.value=S,b.value=I,$.value=!0}function Ne({width:S,height:I}){L.value=S,O.value=I,K.value=!0}function re(){A.value?p.value.download():w.value.download()}async function ye(S){try{const I=await fetch(S).then(Q=>Q.blob()).then(Q=>new Promise(U=>{const fe=new FileReader;fe.onload=U,fe.readAsDataURL(Q)})).then(Q=>Q.target.result);navigator.clipboard.writeText(I),d.info({title:m("copiedDataURLDialogTitle"),content:()=>Y("div",[Y("div",m("copiedDataURLMessage"))]),positiveText:"OK"})}catch{d.error({title:"failed to copy Data URL",content:"could not copy Data URL",positiveText:"OK"})}}function M(S){S>0?u.value=Math.min(o.length,u.value+S)|0:S<0&&(u.value=Math.max(1,u.value+S)|0)}let G="";const R=()=>{var I,Q,U,fe;G=(U=window.getComputedStyle((Q=(I=f==null?void 0:f.value)==null?void 0:I.previewInstRef)==null?void 0:Q.previewRef))==null?void 0:U.transform;const S=A.value;(fe=f==null?void 0:f.value)==null||fe.next(),We(()=>{var Le;A.value===S&&((Le=f==null?void 0:f.value)==null||Le.next())})};function ee(){try{We(()=>f.value.previewInstRef.previewRef.style.transform=G)}catch{}}function pe({nodes:S}){const I=Y(dn,{color:A.value?"green":"gray",offset:[-20,-12],value:A.value?m("status.Converted"):m("status.Original")},()=>Y(Pe,{round:!0,onClick(){R()},textColor:"white",size:"small",style:{marginLeft:"4px"}},{icon:()=>Y(A.value?Da:ja)}));S.next=Y(Pe,{onClick(){M(1)},disabled:!Z.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>Y(kn)}),S.prev=Y(Pe,{onClick(){M(-1)},disabled:!V.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>Y(Za)});try{const Q=S.download.children;Q.default=()=>m("save");const U=Q.trigger();U.props.onClick=re,Q.trigger=()=>U}catch{}return be(),[I,...Object.values(S)]}const ne="#pathbox-"+String(Math.random()).substring(2);let Te;function be(){var S,I,Q;try{if(Te=(Q=(I=(S=f.value)==null?void 0:S.previewInstRef)==null?void 0:I.previewWrapperRef)==null?void 0:Q.parentNode,!Te||Te.querySelector(ne))return;let U=Y("div",{id:ne,onMousedown:fe=>{fe.stopPropagation()},className:"__preview-injected-pathbox"+(A.value?" converted":"")},[Y("div",`${String(u.value).padStart(String(o.length).length,"0")}/${String(o.length).padStart(String(o.length).length,"0")}`),Y("div",et(A.value?o.size:o.originalSize,0)),Y("div",A.value?o.name:o.originalName)]);An(U,Te),U=null}catch{}}ft(()=>{Te&&(An(null,Te),Te=null)});function Re(){p.value.openPreview()}function ue(){}return(S,I)=>{const Q=Ae,U=Me,fe=Dn,Le=ht,ut=cn,ct=Ma;return F(),te(U,{justify:"center",align:"center",vertical:"",style:ie({visibility:_.value?"hidden":"visible"}),class:"body",ref:"body"},{default:t(()=>[n(ct,{ref_key:"nImageGroupRef",ref:f,"show-toolbar-tooltip":"","render-toolbar":pe,onPreviewNext:ee},{default:t(()=>[n(U,{wrap:!1,align:"center",justify:"center"},{default:t(()=>[n(e(Pe),{onClick:I[0]||(I[0]=ae=>M(-1)),disabled:!e(V),block:"",class:mt({"thumb-arrow":!0,pale:!e(V)}),title:S.$t("Prev")},{icon:t(()=>[n(Q,{size:"30"},{default:t(()=>[n(e(Na))]),_:1})]),_:1},8,["disabled","class","title"]),n(U,{justify:"center",ref_key:"viewerItemContainer",ref:v,class:"viewer-item-container"},{default:t(()=>[n(st,{name:de.value},{default:t(()=>[(F(),te(U,{vertical:"",key:N.value,"_v-show":"viewerItemVisibility"},{default:t(()=>[n(U,{align:"center",wrap:!1},{default:t(()=>[n(U,{vertical:""},{default:t(()=>[n(U,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(U,{align:"center",justify:"center",vertical:"",class:"original-thumb"},{default:t(()=>[h("a",{href:S.originalUrl,onClick:I[4]||(I[4]=lt(ae=>{w.value.openPreview()},["prevent"])),download:S.originalName,title:S.originalName,class:"imglink"},[n(U,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(Sn,{ref:ae=>{ae!=null&&ae.active&&(w.value=ae)},src:S.originalUrl,width:1,"max-width":1,"max-height":1,loading:P.value,"file-name":S.originalName,"allow-next":u.value<o.length,"allow-prev":u.value>1,onLoad:Ne,onNext:I[1]||(I[1]=ae=>M(1)),onPrev:I[2]||(I[2]=ae=>M(-1)),hidden:!0},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(U,{vertical:"",align:"center"},{default:t(()=>[n(U,{class:"imglink-label"},{default:t(()=>[z(c(e(m)("status.Original")),1)]),_:1}),n(U,{justify:"center",class:"img-size",wrap:!1},{default:t(()=>[h("span",ms,c(K.value?L.value:"?"),1),I[11]||(I[11]=z(" × ")),h("span",vs,c(K.value?O.value:"?"),1)]),_:1}),n(U,{justify:"center"},{default:t(()=>[I[3]||(bn(-1,!0),(I[3]=n(U,null,{default:t(()=>[z(c(K.value?e(et)(o.originalSize,0):"?"),1)]),_:1})).cacheIndex=3,bn(1),I[3])]),_:1})]),_:1})]),_:1})],8,gs)]),_:1}),n(U,{vertical:"",align:"center",style:{margin:"1em"},class:"original-thumb"},{default:t(()=>[n(Q,{size:"20",color:"silver",component:e(kn)},null,8,["component"])]),_:1}),h("a",{href:C.value,onClick:I[5]||(I[5]=lt(ae=>Re(),["prevent"])),download:o.name,title:o.name,class:"imglink"},[n(U,{vertical:"",align:"center",justify:"center"},{default:t(()=>[n(U,{class:"imglink-label"},{default:t(()=>[z(c(e(m)("status.Converted")),1)]),_:1}),n(U,{vertical:"",align:"center",justify:"center",size:0},{default:t(()=>[n(U,{justify:"center"},{default:t(()=>{var ae;return[n(U,{wrap:!1,style:ie((ae=o.variousInfo)!=null&&ae.shrinked?{color:"blue"}:{}),class:"img-size"},{default:t(()=>[h("span",_s,c($.value?k.value:"?"),1),I[12]||(I[12]=z(" × ")),h("span",ws,c($.value?b.value:"?"),1)]),_:1},8,["style"])]}),_:1})]),_:1}),n(U,{justify:"center"},{default:t(()=>[z(c($.value?e(et)(o.size,0):"?"),1)]),_:1})]),_:1})],8,hs)]),_:1}),n(U,{ref:"fileNameContainer",justify:"center",align:"center",class:"pathbox",title:o.name},{default:t(()=>[n(fe,{"x-scrollable":!0,trigger:"hover",style:{"text-align":"center","font-size":"smaller",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},{default:t(()=>[z(c($.value?o.name:"?"),1)]),_:1})]),_:1},8,["title"])]),_:1}),n(U,{vertical:""},{default:t(()=>[n(Sn,{ref:ae=>{ae!=null&&ae.active&&(p.value=ae)},src:C.value,width:142,"max-width":140,"max-height":100,loading:P.value,"file-name":o.name,"allow-next":u.value<o.length,"allow-prev":u.value>1,onLoad:we,onNext:I[6]||(I[6]=ae=>M(1)),onPrev:I[7]||(I[7]=ae=>M(-1))},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(U,{justify:"center",wrap:!0},{default:t(()=>[n(Le,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[h("a",{href:o.url,ref:"saveImg",target:"_blank",download:o.name},[n(e(Pe),{disabled:!$.value,round:"",size:"tiny"},{default:t(()=>[z(c(S.$t("save")),1)]),_:1},8,["disabled"])],8,ys)]),default:t(()=>[z(" "+c(S.$t("save")),1)]),_:1}),n(Le,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(e(Pe),{disabled:!$.value,onClick:I[8]||(I[8]=ae=>ye(o.url)),round:"",size:"tiny"},{default:t(()=>I[13]||(I[13]=[z("DataURL")])),_:1},8,["disabled"])]),default:t(()=>[z(" "+c(S.$t("convertedImageDataUrlTooltip")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1},8,["name"])]),_:1},512),n(e(Pe),{onClick:I[9]||(I[9]=ae=>M(1)),disabled:!e(Z),block:"",class:mt({"thumb-arrow":!0,next:!0,pale:!e(Z)}),title:S.$t("Next")},{icon:t(()=>[n(Q,{size:"30"},{default:t(()=>[n(e(Ra))]),_:1})]),_:1},8,["disabled","class","title"])]),_:1}),Ze(n(U,{style:{width:"100%"},wrap:!1},{default:t(()=>[n(ut,{value:u.value,"onUpdate:value":I[10]||(I[10]=ae=>u.value=ae),tooltip:!1,step:1,min:1,max:o.length,keyboard:!1,class:"index-slider"},null,8,["value","max"]),n(U,{class:"index",align:"center",justify:"center",wrap:!1,size:3},{default:t(()=>[n(U,null,{default:t(()=>[z(c(e(m)("status.index"))+":",1)]),_:1}),n(U,{justify:"end",align:"center",class:"counter"},{default:t(()=>[z(c(u.value),1)]),_:1}),n(U,null,{default:t(()=>I[14]||(I[14]=[z("/")])),_:1}),n(U,{justify:"start",align:"center",class:"counter"},{default:t(()=>[z(c(o.length),1)]),_:1})]),_:1})]),_:1},512),[[Be,!S.isSingle]])]),_:1},512)]),_:1},8,["style"])}}}),ks=Xe(bs,[["__scopeId","data-v-fb4bfc5f"]]),As={class:"status-table"},xs={class:"started"},Is={class:"mini-counter"},zs={class:"failure"},Ts={class:"mini-counter"},Ss={colspan:"2"},Ls={class:"completed"},Cs={class:"main-counter"},$s={class:"total"},Es={class:"main-counter"},Ps=Se({__name:"status.center-column",props:{processing:{type:Boolean},interval:{},statusColor:{},success:{},successTo:{},successFrom:{},index:{},length:{},failure:{},retried:{},successPercTo:{},successPercFrom:{}},setup(a){const i=a,r=un(),g=y(r.value.successColor),o=y(!1);return Ce(()=>i.processing,l=>{l||(i.success===i.length?o.value=!0:g.value=r.value.errorColor)}),(l,d)=>{const m=ht,p=Ae,w=Wa,f=Me,v=jn;return F(),te(v,{type:"multiple-circle","stroke-width":2,percentage:[l.successTo/l.length*100|0,l.index/l.length*100|0],color:[e(r).successColor,l.statusColor],"rail-style":[{stroke:e(g),opacity:.3}]},{default:t(()=>[n(f,{vertical:"",align:"center",justify:"center",size:0,style:{"font-family":"v-mono","white-space":"nowrap"},wrap:!1,"wrap-item":!1},{default:t(()=>[h("table",As,[h("tbody",null,[h("tr",xs,[h("td",null,c(l.$t("status.started"))+":",1),h("td",Is,[n(m,{trigger:"hover",style:ie({color:e(r).infoColor}),placement:"left"},{trigger:t(()=>[h("span",{style:ie({color:e(r).infoColor})},c(l.index.toLocaleString("en-us")),5)]),default:t(()=>[z(" "+c(l.$t("status.progressStarted"))+" ("+c(l.index.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])])]),h("tr",zs,[h("td",null,c(l.$t("status.failure"))+":",1),h("td",Ts,[n(m,{trigger:"hover",style:ie({color:e(r).errorColor}),placement:"left"},{trigger:t(()=>[h("span",{style:ie({color:e(r).errorColor})},c(l.failure.toLocaleString("en-us")),5)]),default:t(()=>[z(" "+c(l.$t("status.progressErrors"))+" ("+c(l.failure.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"]),l.retried>0?(F(),te(m,{key:0,trigger:"hover",style:ie({color:e(r).warningColor}),placement:"left"},{trigger:t(()=>[h("span",{style:ie({color:e(r).warningColor})}," ("+c(l.retried.toLocaleString("en-us"))+") ",5)]),default:t(()=>[z(" "+c(l.$t("status.progressRetries"))+" ("+c(l.retried.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):ge("",!0)])]),h("tr",null,[h("td",Ss,[n(f,{size:0,align:"center",justify:"center",style:ie({color:l.processing?l.statusColor:e(g)}),wrap:!1,class:"perc"},{default:t(()=>[e(o)?(F(),te(p,{key:0,component:e(Ba)},null,8,["component"])):ge("",!0),n(w,{duration:l.interval*3|0,from:l.successPercFrom|0,to:l.successPercTo|0,active:!0},null,8,["duration","from","to"]),d[0]||(d[0]=z("% "))]),_:1},8,["style"])])]),h("tr",Ls,[h("td",null,c(l.$t("status.success"))+":",1),h("td",Cs,[n(m,{trigger:"hover",duration:0,delay:0,style:ie({color:e(r).successColor}),placement:"bottom"},{trigger:t(()=>[h("span",{style:ie({color:e(r).successColor})},[n(w,{duration:l.interval*3|0,from:l.successFrom,to:l.successTo,active:!0,"show-separator":!0},null,8,["duration","from","to"])],4)]),default:t(()=>[z(" "+c(l.$t("status.progressSuccess"))+" ("+c(l.successTo.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])])]),h("tr",$s,[h("td",null,c(l.$t("status.all"))+":",1),h("td",Es,[n(m,{trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:t(()=>[z(c(l.length.toLocaleString("en-us")),1)]),default:t(()=>[z(" "+c(l.$t("status.progressTotal"))+" ("+c(l.length.toLocaleString("en-us"))+") ",1)]),_:1})])])])])]),_:1})]),_:1},8,["percentage","color","rail-style"])}}}),Fs={key:0},Os={style:{}},Us={key:0,class:"log-table",ref:"table"},Ms={class:"log-tr label"},Ns={class:"log-th"},Rs={style:{"min-width":"7em"},class:"log-th"},Ds={style:{"padding-left":"2em"},class:"log-th"},js=["onClick"],Zs={class:"log-td"},Bs={class:"log-td"},Ws={class:"log-td"},Hs={class:"log-td"},Vs=["innerHTML"],qs={style:{margin:"1px"}},Gs=["href","download","onClick"],Ks={key:0,style:{position:"relative"}},Ys=["href","download"],Xs=["href","download"],Qs={key:0,style:{margin:"1px"}},Js=["href","download","onClick"],ei=99999,ti=250,ni=100,oi=Se({__name:"status",props:{processing:{type:Boolean},status:{},interval:{}},emits:["all-zips-clicked","demand-zip-errors","demand-image","delete-image"],setup(a,{expose:i,emit:r}){const g={itemMargin:"1px",titlePadding:"1px",titleFontSize:"0.9em"},o=Wt(),{t:l}=nt(),d=un(),m={W:160,H:80},p=a,w=r;i({cleanup:hn});const f=y(!1),v=y([]),_=y(!1);zt("table");const u=y(null),k=y([]),b=y([]),C=y([0,0]),L=y([0,0]),O=y([0,0]),P=y([0,0]),$=y([0,0]),K=y([0,0]),x=y(0),A=y(0),Z=y([0,0]),V=y(d.value.infoColor),de=y("#000000"),N=y("#000000"),_e=y(0),me=y(0),ze=y(""),T=y("00:00:00"),B=y(void 0),q=y(!1),oe=y(!0);y(!1);const ce=y("16em"),se=Ie(()=>re.value.includes("log")),we=Ie(()=>q.value?99999:5),Ne=Ie(()=>{let s=v.value;switch(at.value){case"success":s=s.filter(E=>E.completed);break;case"error":s=s.filter(E=>!E.completed);break}return s.slice(-we.value)}),re=y(["progress","log","output"]),ye=s=>re.value.includes(s),M=s=>re.value.push(s),G=s=>{const E=re.value.findIndex(D=>D===s);E>=0&&re.value.splice(E,1)},R=Bt({name:"",originalName:"",size:0,url:"",originalUrl:"",originalSize:0,dataUrl:"",index:0,various:{shrinked:!1}}),ee=zt("body"),pe=y(null),ne=y(null),Te=y(),be=zt("imageViewer");qe(()=>{Ce(p.status,()=>U(),{deep:!1}),Ce([ne,se],()=>{if(!ne.value||!se.value)return;const{width:ke,height:Ee}=uo(ne.value,{width:m.W,height:m.H});pe.value.width=ke,pe.value.height=Ee,pe.value.style.width=ke+"px",pe.value.style.height=Ee+"px",ne.value instanceof HTMLImageElement?pe.value.getContext("2d").drawImage(ne.value,0,0,ke,Ee):(pe.value.getContext("bitmaprenderer").transferFromImageBitmap(ne.value),ne.value.close(),ne.value=null,p.status.thumbnail=null)});let s=0;const E=()=>{if(s)return;const ke=Date.now();T.value="00:00:00",s=window.setInterval(()=>{const Ee=(Date.now()-ke)/1e3;T.value=`${String(Ee/3600|0).padStart(2,"0")}:${String(Ee/60%60|0).padStart(2,"0")}:${String(Ee%60|0).padStart(2,"0")}`},300)};E(),Ce(()=>p.processing,(ke,Ee)=>{ke?(E(),v.value=[],f.value=!1,_.value=!1,k.value=[],b.value=[]):(clearInterval(s),s=0),p.processing||Le()});const D=xn();let W;const X=()=>{clearTimeout(W),W=setTimeout(()=>{if(!se.value||$e)return;const ke=Te.value.$parent.$el.offsetHeight,Ee=window.innerHeight-D.parent.parent.vnode.el.offsetHeight-8;ce.value=Math.max(ke+Ee,ti)+"px"},100)};X(),window.addEventListener("resize",X);const ve=new ResizeObserver(X);ve.observe(D.parent.parent.vnode.el);let $e=!1;ft(()=>{$e=!0,ve.disconnect(),clearInterval(s),clearTimeout(W),clearTimeout(Q),clearTimeout(Ft),window.removeEventListener("resize",X)})}),ft(()=>{hn()}),Ce([()=>p.status.zips.length,()=>p.status.failedZips.length],()=>{const s=p.status;{k.value.length>s.zips.length&&(k.value.length=0);let E=0;const D=s.zips.length===1&&s.zippedTotalCount===s.length;for(let W=k.value.length;W<s.zips.length;W++){const X=s.zips[W],ve=s.baseZipName+(D?"":"-"+String(W+1).padStart(2,"0"))+".zip";E+=X.size,k.value[W]={url:X.url,size:X.size,number:D?0:W+1,sizeByUnit:et(X.size),name:ve,count:X.count,clicked:!1}}}{b.value.length>s.failedZips.length&&(b.value.length=0);let E=0;const D=s.failedZipDone&&s.failedZips.length===1;for(let W=b.value.length;W<s.failedZips.length;W++){const X=s.failedZips[W],ve=s.baseZipName+"-error"+(D?"":"-"+String(W+1).padStart(2,"0"))+".zip";E+=X.size,b.value[W]={url:X.url,size:X.size,number:D?0:W+1,sizeByUnit:et(X.size),name:ve,count:X.count,clicked:!1}}}});let Re=!1,ue=null;Ce(()=>R.index,()=>{We(()=>{var E,D,W;let s=u.value;(ue==null?void 0:ue.offsetTop)>(s==null?void 0:s.offsetTop)&&(s=s.previousSibling||s,s instanceof HTMLElement||((E=Te.value)==null||E.scrollTo(0,0),s=null)),(D=s==null?void 0:s.scrollIntoView)==null||D.call(s,{behavior:"smooth",block:"nearest"}),Re||ye("preview")&&((W=be.value)==null||W.$el.scrollIntoView({behavior:"smooth",block:"nearest"})),ue=u.value,Re=!1})});const S=p.interval||100;let I=!1,Q=0;function U(){if(I)return;if(Q){I=!0;return}Q=window.setTimeout(()=>{Q=0,I&&(I=!1,U())},S);const s=p.status;f.value=s.length>=2,L.value[1]=L.value[0],L.value[0]=s.index,O.value[1]=O.value[0],O.value[0]=s.success,P.value[1]=P.value[0],P.value[0]=s.failure,$.value[1]=$.value[0],$.value[0]=s.done,K.value[1]=K.value[0],K.value[0]=s.converted,x.value=s.retried,A.value=s.length,Z.value[1]=Z.value[0],Z.value[0]=s.zippedTotalCount,_e.value=s.inputTotalSize,me.value=s.outputTotalSize;const E=me.value-_e.value;ze.value=(E>=0?"+ ":"")+et(E);const D=me.value/_e.value,W=(256|Math.min(255,Math.max(0,D-1.5)*255|0)).toString(16).substring(1);de.value="#"+W+"0000";const X=1024*1024,ve=(256|Math.min(255,Math.max(0,E/1024/X)*255|0)).toString(16).substring(1);if(N.value="#"+ve+"0000",C.value[1]=C.value[0],C.value[0]=O.value[0]/A.value*100,se.value||!p.processing){const $e=s.logs.slice(-99999);v.value.push(...$e);const ke=v.value.length-ei;ke>0&&v.value.splice(0,ke),oe.value&&$e.length&&_t()}s.logs.length=0,ne.value=s.thumbnail,p.processing&&(V.value=P.value[0]?d.value.errorColor:x.value?d.value.warningColor:d.value.infoColor),s.convertedImageUrl!==R.url&&(R.url=s.convertedImageUrl,R.name=s.convertedImageName,R.dataUrl=s.convertedImageDataUrl,R.size=s.convertedImageSize||s.outputTotalSize,R.originalSize=s.convertedImageOrgSize,R.originalName=s.convertedImageOrgName,R.index=s.convertedImageIndex,R.originalUrl=s.convertedImageOrgUrl,R.various={shrinked:s.convertedImageShrinked})}let fe=xn();function Le(){p.status,V.value=p.status.success===p.status.length?d.value.successColor:d.value.errorColor,q.value||(G("log"),q.value=!0),M("preview"),se.value&&(setTimeout(_t,500),fe.proxy.$forceUpdate(),fe=null),U()}async function ut(s,E,D,W){var X;if(s){const ve=p.status.ziplogs.findIndex($e=>$e.fileId===D);if(ve===-1)return;ye("preview")||(M("preview"),await We()),(X=be.value)==null||X.changeIndex(ve+1),await We(()=>{var $e;try{($e=be.value)==null||$e.$el.scrollIntoView({behavior:"smooth",block:"nearest"})}catch{}})}}function ct(s){var ke,Ee;const E=v.value,D=E.findIndex(Ge=>Ge.zippedIndex===R.index);let W=0,X=1;switch(s.code){case"ArrowUp":W=-1;break;case"ArrowDown":W=1;break;case"PageUp":W=-1,X=10;break;case"PageDown":W=1,X=10;break;case"Enter":D>=0&&((ke=be.value)!=null&&ke.isPreviewing()||(We(()=>{var Ge;return(Ge=be.value)==null?void 0:Ge.openPreview()}),s.stopPropagation(),s.preventDefault()));break;default:return}let ve=D;const $e=E.length;do{if(ve+=W,ve<0||ve>$e-1||ve===D)break;if(E[ve].completed){if((Ee=be.value)==null||Ee.changeIndex(E[ve].zippedIndex+1),s.preventDefault(),--X>0)continue;break}}while(!0);Re=!0}const ae=[{label:l("status.showAll"),value:""},{label:l("status.showOnlySuccess"),value:"success"},{label:l("status.showOnlyError"),value:"error"}],at=y(ae[0].value),Fe=Ie(()=>[{key:"open",label:l("status.openFailedList"),icon:()=>Y(Ae,()=>Y(Zn)),onSelect(){Pt()}},{key:"download",label:l("status.saveFailedList"),icon:()=>Y(Ae,()=>Y(Ha)),onSelect(){Pt(!0)}},{key:"zip",label:`${l("status.zipFailedList")}`+(p.status.failedZipDone?`(✔${l("status.done")})`:""),icon:()=>Y(It,{show:_.value&&!p.status.failedZipDone,size:"small"},()=>Y(Ae,()=>Y(on))),disabled:_.value,onSelect(s){return _.value=!0,w("demand-zip-errors"),!1}}]);function Qe(s,E=!1){const{url:D,name:W}=s;if(E){const X=document.createElement("a");X.href=D,X.download=W,X.click()}s.clicked||(s.clicked=!0,p.processing||k.value.every(X=>X.clicked)&&w("all-zips-clicked"))}async function Gt(){if(f.value){if(k.value.length>=2&&!await new Promise((D,W)=>o.warning({title:l("Download"),content:l("status.confirmDownloadMessage",[k.value.length]),positiveText:"OK",negativeText:l("cancel"),onPositiveClick:()=>D(!0),onNegativeClick:()=>W()})))return;const s=k.value;for(const E of s)Qe(E,!0)}else be.value.download()}function Pt(s=!1){const E=new Blob([p.status.unconvertedListText],{type:"text/plain;charset=utf8"}),D=URL.createObjectURL(E),W=document.createElement("a");W.href=D,W.target="_blank",s&&(W.download=p.status.baseZipName+"-error.txt"),W.click()}let Ft=0,Ot=!1;function _t(s=!1){if(!Ot){if(Ft){Ot=!0;return}We(()=>{!s&&(!q.value||!oe.value)||(Te.value.scrollTo({behavior:"instant",top:v.value.length*50}),Ft=window.setTimeout(()=>{Ft=0,Ot&&(Ot=!1,_t())},ni))})}}const wt=y(!1);function hn(){wt.value=!0,URL.revokeObjectURL(R.url),URL.revokeObjectURL(R.originalName),R.originalUrl="",R.url="",R.index=0,p.status.logs.length=0,v.value.length=0,b.value.length=0,k.value.length=0,q.value=!1,ue=null}return(s,E)=>{const D=Me,W=Va,X=Wn,ve=Ht,$e=Hn,ke=xe,Ee=rn,Ge=jn,dt=ht,Ut=Pe,xa=cs,_n=dn,Ia=qa,za=Bn;return F(),te(D,{ref_key:"body",ref:ee,vertical:"",justify:"center"},{default:t(()=>[n(za,{"display-directive":"show","trigger-areas":["arrow","main"],"expanded-names":e(re),"onUpdate:expandedNames":E[13]||(E[13]=j=>He(re)?re.value=j:null),"theme-overrides":g,"_item-header-click":"preventOutputCollapsing"},{default:t(()=>[n(X,{name:"progress",style:{"white-space":"nowrap"}},{header:t(({collapsed:j})=>[n(D,null,{default:t(()=>[z(c(s.$t("status.Progress"))+" ",1),j?(F(),le(Oe,{key:0},[z(" ("+c(e(C)[0]|0)+"%) ",1)],64)):ge("",!0)]),_:2},1024)]),default:t(()=>[n(D,{justify:"center",align:"center",wrap:!1,style:{"white-space":"nowrap","margin-top":"-2em"}},{default:t(()=>[n(D,{vertical:"",justify:"center",class:"left-column"},{default:t(()=>[n(W,{"tabular-nums":"",label:s.$t("status.elapsedTime")},{default:t(()=>[n(D,null,{default:t(()=>[z(c(e(T)),1)]),_:1})]),_:1},8,["label"]),n(W,{"tabular-nums":"",label:s.$t("status.multiThreading")},{default:t(()=>[n(D,{style:ie({color:p.status.threads?"":"red",fontSize:"0.7em"})},{default:t(()=>[z(c(p.status.threads?s.$rt("{n} @:threads",p.status.threads):s.$t("disabled")),1)]),_:1},8,["style"])]),_:1},8,["label"]),n(W,{"tabular-nums":"",label:s.$t("status.outputSettings")},{default:t(()=>[n(D,{vertical:"",justify:"end",style:{"font-size":"0.6em","line-height":"0.6em"}},{default:t(()=>[h("div",null,c(s.$t("settings.imageType"))+": "+c(p.status.type),1),s.status.shrink?(F(),le("div",Fs,[z(c(s.$t("status.Shrinking"))+": ",1),h("span",Os,c(s.status.shrink[0])+"×"+c(s.status.shrink[1]),1)])):ge("",!0),h("div",null,"Zip: "+c(p.status.zipSize)+"MB",1)]),_:1})]),_:1},8,["label"])]),_:1}),e(wt)?ge("",!0):(F(),te(Ps,{key:0,index:e(L)[0],success:s.status.success,length:s.status.length,"success-to":e(O)[0],"success-from":e(O)[1],failure:e(P)[0],"success-perc-to":e(C)[0],"success-perc-from":e(C)[1],retried:e(x),processing:s.processing,interval:e(S),"status-color":e(V),class:"center-column"},null,8,["index","success","length","success-to","success-from","failure","success-perc-to","success-perc-from","retried","processing","interval","status-color"])),n(D,{vertical:"",style:{height:"100%"},justify:"center"},{default:t(()=>[n(W,{"tabular-nums":"",label:s.$t("status.inputSize")},{default:t(()=>[n(D,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[z(c((e(_e)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(W,{"tabular-nums":"",label:s.$t("status.outputSize")},{default:t(()=>[n(D,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[z(c((e(me)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(W,{"tabular-nums":"",label:s.$t("status.outInRate")},{default:t(()=>[n(D,{vertical:"",align:"end",justify:"start",style:{"font-size":"xx-small","font-family":"v-mono","line-height":"50%"}},{default:t(()=>[h("span",{style:ie({color:e(de),fontSize:"larger"})},"× "+c((e(me)/e(_e)||1).toFixed(2)),5),h("span",{style:ie({color:e(N)})},"("+c(e(ze))+")",5)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),n(X,{name:"log",style:{"white-space":"nowrap"}},{header:t(()=>[n(D,{align:"center",wrap:!1},{default:t(()=>[z(c(s.$t("status.Log")),1),Ze(n(e(It),{size:16},null,512),[[Be,s.processing&&!e(se)]])]),_:1})]),"header-extra":t(()=>[Ze(n(D,{align:"center",justify:"end",wrap:!0,style:{"margin-top":"0.2em","margin-left":"0.5em"}},{default:t(()=>[n(Xt,null,{default:t(()=>[n(ve,{value:e(at),"onUpdate:value":E[0]||(E[0]=j=>He(at)?at.value=j:null),placeholder:s.$t("status.filterLogSelect"),options:ae,size:"tiny",style:{width:"auto","font-size":"smaller"},"consistent-menu-width":!1,"show-on-focus":!1},null,8,["value","placeholder"]),Ze(n($e,{key:"b",checked:e(oe),"onUpdate:checked":[E[1]||(E[1]=j=>He(oe)?oe.value=j:null),E[2]||(E[2]=j=>j&&_t(!0))],size:"small",style:{"font-size":"smaller"}},{default:t(()=>[z(c(s.$t("status.autoScroll")),1)]),_:1},8,["checked"]),[[Be,e(q)]])]),_:1}),n(ke,{style:{"max-width":"30em"}},{trigger:t(()=>[n($e,{size:"small",checked:e(q),"onUpdate:checked":[E[3]||(E[3]=j=>He(q)?q.value=j:null),E[4]||(E[4]=j=>{oe.value=j,_t(!0)})],style:{"font-size":"smaller"}},{default:t(()=>[z(c(s.$t("status.expandLog")),1)]),_:1},8,["checked"])]),default:t(()=>[z(c(s.$t("status.expandLogTooltip")),1)]),_:1})]),_:1},512),[[Be,e(se)]])]),default:t(()=>[n(D,{wrap:!1,align:"stretch",class:mt({"log-container":1,"expand-log":e(q)}),style:ie(e(q)?{height:e(ce),maxHeight:e(ce)}:{}),onKeydown:ct,tabindex:"-1"},{default:t(()=>[n(e(Dn),{ref_key:"scrollref",ref:Te,distance:10,"x-scrollable":!0,onMouseup:E[6]||(E[6]=j=>oe.value=!1),onWheel:E[7]||(E[7]=j=>oe.value=!1),load:"handleLogLoad",trigger:"none",style:ie([{"z-index":"2","padding-right":"10px","min-height":"7em"},{maxHeight:e(ce)}]),size:50},{default:t(()=>[e(se)?(F(),le("table",Us,[h("thead",null,[h("tr",Ms,[h("th",Ns,c(s.$t("status.table.core")),1),E[14]||(E[14]=h("th",{class:"log-th"},"no.",-1)),h("th",Rs,c(s.$t("status.table.status")),1),h("th",Ds,c(s.$t("status.table.details")),1)])]),h("tbody",null,[(F(!0),le(Oe,null,xt(e(Ne),({index:j,key:pt,command:Je,path:Mt,core:wn,zippedIndex:Kt,completed:yn,fileId:Ta},pr)=>(F(),le("tr",{key:pt,class:mt({"log-tr":1,completed:yn,selected:e(R).index===Kt}),ref_for:!0,ref:Yt=>{e(R).index===Kt&&(u.value=Yt)},onClick:Yt=>ut(yn,Mt,Ta,Kt),onDblclick:E[5]||(E[5]=Yt=>e(be).openPreview())},[h("td",Zs,c(wn>=0?wn+1:"-"),1),h("td",Bs,c(j+1),1),h("td",Ws,c(Je),1),h("td",Hs,c(Mt),1)],42,js))),128))])],512)):ge("",!0),E[15]||(E[15]=h("div",{style:{height:"1em"}},null,-1))]),_:1},8,["style"]),n(D,{style:ie([{"align-self":"center",position:"absolute","z-index":"0","margin-top":"0.5em",right:"0.1em","line-height":"0px"},{width:m.W+"px",height:m.H+"px"}]),justify:"center",align:"center"},{default:t(()=>[n(e(It),{size:"small",show:s.processing},{default:t(()=>[p.status.thumbnail===void 0?(F(),te(Ee,{key:0,description:"EMPTY"})):ge("",!0),Ze(h("canvas",{ref_key:"thumbcanvas",ref:pe,width:"106",height:"80",style:ie({border:"1px solid gray",filter:s.processing?"":"opacity(0.35)"})},null,4),[[Be,p.status.thumbnail!==void 0]])]),_:1},8,["show"])]),_:1},8,["style"])]),_:1},8,["class","style"])]),_:1}),n(X,{title:s.$t("status.PreviewImage"),name:"preview",style:{"white-space":"nowrap"},disabled:!(s.status.success>0)},{default:t(()=>[n(D,{justify:"center",align:"center",vertical:""},{default:t(()=>[n(ks,{"_v-else-if":"imageViewerStarted && status.success > 0 /*&& (props.status.threads || !zippingFlag)*/ && !cleaningUp",ref_key:"imageViewer",ref:be,url:e(R).url,size:e(R).size,"original-url":e(R).originalUrl,"original-size":e(R).originalSize,name:e(R).name,originalName:e(R).originalName,length:p.status.success,index:e(R).index,"various-info":e(R).various,"is-single":!e(f),onDemandImage:E[8]||(E[8]=j=>w("demand-image",j)),on_deleteImage:E[9]||(E[9]=j=>w("delete-image",j)),_close:"imageViewerStarted=false"},null,8,["url","size","original-url","original-size","name","originalName","length","index","various-info","is-single"])]),_:1})]),_:1},8,["title","disabled"]),n(X,{name:"output",style:{"white-space":"nowrap"},disabled:""},{header:t(()=>[h("span",{style:{color:"black"},innerHTML:s.$t("status.Output")},null,8,Vs)]),default:t(()=>[n(D,{wrap:!1,vertical:"",style:{"margin-top":"-1.3em"}},{default:t(()=>[e(wt)?ge("",!0):(F(),te(D,{key:0,justify:"center"},{default:t(()=>[Ze(n(D,{vertical:"",align:"center"},{default:t(()=>[n(dt,{placement:"left"},{trigger:t(()=>[n(Ge,{type:"line","indicator-placement":"inside",color:"lime","rail-color":"rgba(99, 255, 99, 0.5)","indicator-text-color":e(Z)[0]===e(A)?"white":"green",processing:s.processing,percentage:e(Z)[0]/e(A)*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[h("span",qs,c(e(Z)[0]/e(A)*100|0)+"% "+c(s.$t("status.zipped"))+" ("+c(e(Z)[0])+"/"+c(e(K)[0])+")",1)]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[z(" "+c(s.$t("status.zippingProgress"))+" ("+c(e(Z)[0]/e(A)*100|0)+"%) ",1)]),_:1}),n(st,{name:"zipcontainer"},{default:t(()=>[e(k).length>=1||p.processing?(F(),te(Xt,{key:0,name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(F(!0),le(Oe,null,xt(e(k),(j,pt)=>(F(),le("span",{key:pt},[n(dt,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[h("a",{href:j.url,download:j.name,class:"in-button-anchor",onClick:Je=>Qe(j)},[n(Ut,{class:"zip-button",size:"tiny",color:j.clicked?"#050":"lime","text-color":j.clicked?"gray":"white",onClick:lt(Je=>Qe(j),["stop"]),round:""},{default:t(()=>[n(e(Ae),{size:"tiny"},{default:t(()=>[n(e(on))]),_:1}),z("ZIP"+c(j.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Gs)]),default:t(()=>[h("div",{style:ie({color:e(d).successColor})},[h("div",null,"ZIP "+c(j.number||"")+" ("+c(s.$t("success"))+")",1),h("div",null,c(j.name),1),h("div",null,c(j.sizeByUnit),1),h("div",null,c(s.$rt("{n} @:files",j.count)),1)],4)]),_:2},1024)]))),128))]),_:1})):ge("",!0)]),_:1})]),_:1},512),[[Be,e(f)]])]),_:1})),n(st,null,{default:t(()=>[e(wt)?ge("",!0):Ze((F(),te(D,{key:0,justify:"center",align:"center"},{default:t(()=>[n(dt,{trigger:"hover",duration:0,delay:0,placement:"left",style:ie({color:"white",backgroundColor:e(d).successColor}),"arrow-style":{backgroundColor:e(d).successColor}},{trigger:t(()=>[n(st,{name:"save"},{default:t(()=>[e(O)[0]>0?(F(),le("span",Ks,[n(_n,{value:e(f)?e(Z)[0].toLocaleString("en-us"):p.status.type.replace(/\(.+\)/,""),color:e(d).successColorHover,offset:[-20,-3]},{default:t(()=>[n(Ut,{size:"medium",onClick:Gt,color:e(d).successColor,round:""},{default:t(()=>[e(f)?(F(),le(Oe,{key:0},[e(k).length?(F(),le("a",{key:0,href:e(k)[0].url,download:e(k)[0].name,class:"in-button-anchor",onClick:E[10]||(E[10]=lt(()=>{},["prevent"]))},[n(xa),z(" × "+c(e(k).length)+" "+c(s.$t("status.saveAll")),1)],8,Ys)):ge("",!0)],64)):(F(),le("a",{key:1,href:e(R).url,download:e(R).name,class:"in-button-anchor",onClick:E[11]||(E[11]=lt(()=>{},["prevent"]))},[n(e(Ae),{size:"tiny"},{default:t(()=>[n(e(Vn))]),_:1}),z(" "+c(s.$t("save")),1)],8,Xs))]),_:1},8,["color"])]),_:1},8,["value","color"])])):ge("",!0)]),_:1})]),default:t(()=>[s.status.length>=2?(F(),le(Oe,{key:0},[h("div",null,c(e(l)("success"))+": "+c(e(Z)[0].toLocaleString()),1),h("div",null,c(e(l)("status.totalSize"))+": "+c(e(et)(s.status.zippedTotalSize)),1),h("div",null,"ZIP × "+c(e(k).length),1),h("div",null,c(e(l)("status.saveAllZipsTooltip")),1)],64)):(F(),le(Oe,{key:1},[z(c(s.$t("status.downloadConvertedImage",e(k).length)),1)],64))]),_:1},8,["style","arrow-style"]),!s.processing&&s.status.success!==e(A)?(F(),te(Ia,{key:0,options:e(Fe),onSelect:E[12]||(E[12]=(j,pt)=>{var Je;return(Je=e(Fe).find(({key:Mt})=>j===Mt))==null?void 0:Je.onSelect()}),"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start"},{default:t(()=>[n(dt,{show:e(B),duration:0,delay:0,placement:"right",style:ie({color:"white",backgroundColor:e(d).errorColor}),"arrow-style":{backgroundColor:e(d).errorColor}},{trigger:t(()=>[n(_n,{value:s.status.unconvertedFileCount.toLocaleString(),color:e(d).errorColorHover,offset:[-0,-3]},{default:t(()=>[n(Ut,{size:"small",color:e(d).errorColor},{default:t(()=>[n(e(Ae),{size:"medium",style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Ga))]),_:1})]),_:1},8,["color"])]),_:1},8,["value","color"])]),default:t(()=>[h("div",null,[h("div",null,c(e(l)("failed"))+": "+c(s.status.unconvertedFileCount.toLocaleString()),1),h("div",null,c(e(l)("status.totalSize"))+": "+c(e(et)(s.status.unconvertedTotalSize)),1)])]),_:1},8,["show","style","arrow-style"])]),_:1},8,["options"])):ge("",!0)]),_:1},512)),[[Be,!p.processing]])]),_:1}),n(st,{name:"zipcontainer"},{default:t(()=>[e(wt)?ge("",!0):Ze((F(),te(D,{key:0,vertical:"",align:"center"},{default:t(()=>[n(dt,{placement:"left"},{trigger:t(()=>[n(Ge,{type:"line","indicator-placement":"inside",color:"red","rail-color":"rgba(255, 0, 0, 0.5)","indicator-text-color":s.status.failedFileZippedCount===s.status.unconvertedFileCount?"white":"#500",processing:e(_)&&!s.status.failedZipDone&&!s.status.failedToCreateFailedZip,percentage:s.status.failedFileZippedCount/s.status.unconvertedFileCount*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[s.status.failedToCreateFailedZip?(F(),le("div",{key:1,style:ie({color:e(d).errorColor})},c(s.$t("status.failureZippingFailedFiles")),5)):(F(),le("span",Qs,c(s.status.failedFileZippedCount/s.status.unconvertedFileCount*100|0)+"% "+c(s.$t("status.zipped"))+" ("+c(s.status.failedFileZippedCount)+"/"+c(s.status.unconvertedFileCount)+")",1))]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[z(" "+c(s.$t("status.zippingProgress"))+" ("+c(s.status.failedFileZippedCount/s.status.unconvertedFileCount*100|0)+"%) ",1)]),_:1}),n(Xt,{name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(F(!0),le(Oe,null,xt(e(b),(j,pt)=>(F(),le("span",{key:pt},[n(dt,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[h("a",{href:j.url,download:j.name,class:"in-button-anchor",onClick:Je=>Qe(j)},[n(Ut,{class:"zip-button",size:"tiny",color:j.clicked?"#551122":"#F00","text-color":j.clicked?"gray":"white",onClick:lt(Je=>Qe(j),["stop"]),round:""},{default:t(()=>[n(e(Ae),{size:"tiny"},{default:t(()=>[n(e(Ka))]),_:1}),z("ZIP"+c(j.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Js)]),default:t(()=>[h("div",{style:ie({color:e(d).errorColor})},[h("div",null,"ZIP "+c(j.number||"")+" ("+c(s.$t("failed"))+")",1),h("div",null,c(j.name),1),h("div",null,c(j.sizeByUnit),1),h("div",null,c(s.$rt("{n} @:files",j.count)),1)],4)]),_:2},1024)]))),128))]),_:1})]),_:1},512)),[[Be,e(_)]])]),_:1})]),_:1})]),_:1})]),_:1},8,["expanded-names"])]),_:1},512)}}}),ai=Xe(oi,[["__scopeId","data-v-79712f49"]]),li=["innerHTML"],si=Se({__name:"converter",props:Rt({input:{},format:{},quality:{},retainExtension:{type:Boolean},maxZipSizeMB:{},threads:{}},{showNote:{type:Boolean},showNoteModifiers:{}}),emits:Rt(["start","end"],["update:showNote"]),setup(a,{emit:i}){rt(ot);const{t:r}=nt(),g=Wt(),o=Ya(),l=Xa(),d=10,m=navigator.hardwareConcurrency,p=typeof OffscreenCanvas=="function",w=100,f=a,v=De(a,"showNote"),_=i,u=y(!1),k=y(!1),b=y(!1),C=y(!1),L=y(!1),O=y("initializing"),P=y("info"),$=Bt(oe()),K=zt("stat"),x=y(0);let A=!1,Z=()=>{},V,de=0,N=!1;Ce(()=>f.input,M=>{M!=null&&M.length&&se(M)}),Ce(C,M=>{document.body.style.overflowY=M?"hidden":"auto"}),qe(async()=>{await re(),ye()});async function _e(){let M=!0;if(de>d*1e3&&!N&&$.success>0&&(M=!1,await new Promise(G=>{g.warning({title:r("confirmCloseDialogTitle"),autoFocus:!0,maskClosable:!1,positiveText:r("close"),negativeText:r("back"),onPositiveClick:()=>M=!0,onAfterLeave:G,content:r("confirmCloseDialog")})})),!M)return!1;l.destroyAll(),o.destroyAll(),C.value=!1,v.value=!1}function me(M){V==null||V(M)}function ze(M){en==null||en(M)}function T(){!k.value&&u.value?k.value=!0:_e()}function B(){se(f.input)}let q=y(()=>{});function oe(M){const G={logs:[],ziplogs:[],index:0,converted:0,success:0,failure:0,retried:0,done:0,length:0,zippedTotalCount:0,zippingErrorCount:0,zippedTotalSize:0,processing:!1,zips:[],inputTotalSize:0,outputTotalSize:0,thumbnail:null,baseZipName:"testzipname",type:"image/any",startedTime:Date.now(),convertedImageDataUrl:"",convertedImageName:"",convertedImageUrl:"",convertedImageOrgUrl:"",convertedImageIndex:-1,convertedImageShrinked:!1,zipSize:f.maxZipSizeMB,shrink:H.multithread&&H.shrinkImage?[H.maxWidth,H.maxHeight]:void 0,unconvertedListText:"",failedZipDone:!1,failedZips:[],unconvertedFileCount:0,unconvertedTotalSize:0,failedFileZippedCount:0,failedToCreateFailedZip:!1};return Object.assign(M||{},G)}function ce(){L.value=!1,URL.revokeObjectURL($.convertedImageUrl),URL.revokeObjectURL($.convertedImageOrgUrl);for(const M of $.zips)URL.revokeObjectURL(M.url);$.zips.length=0;for(const M of $.failedZips)URL.revokeObjectURL(M.url);$.failedZips.length=0,oe($),Z(),Z=()=>{},V=null,N=!1,b.value=!1,k.value=!1}async function se(M){if(u.value){g.error({title:"Busy",positiveText:"OK",content:r("interfered")});return}C.value&&(x.value^=1);let G=M.concat();oe($),ce(),C.value=!0,L.value=!0,u.value=!0,$.processing=!0,P.value="info",O.value=r("processing");const R=new Set,ee=f.format,pe=f.quality,ne=[...ee.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),Te=Ne(ee,pe,G[0].webkitRelativePath);$.length=G.length,$.baseZipName=Te,$.type=ee.replace(/image\//,"").toUpperCase()+(/jpe?g|webp/i.test(ee)?" ("+pe+")":""),$.threads=A?0:f.threads;const be=Date.now();_("start");let Re,ue,S;if(!A&&f.threads>=2?(V=ns,S=await Xl({files:G,completedFileIdSet:R,ConvStats:$,canceled:k,props:f,imageType:ee,quality:pe,outputExt:ne,format:ee,message:o,notification:l})):(V=ss,S=await ls(G,R,f,k,$)),{exception:ue,callbackToGenerateFailedZips:Re,callbackToClearConverter:Z}=S,ue){let I;switch(ue.message){case"worker-load-error":I=r("errMsgWorkerLoadError");break;default:I="unexpected error"}g.error({title:"Error",autoFocus:!0,maskClosable:!1,closable:!1,content:()=>Y("div",[Y("p",I),Y(Pe,{onClick(){location.reload()}},r("Reload"))])})}if($.length,$.success===$.length?(P.value="success",O.value=r("completed")):(P.value="error",O.value=k.value?r("aborted"):r("incomplete")),R.size!==G.length){const I=we(M,R);q.value=()=>{!I||!I.length||Re(I)}}u.value=!1,$.processing=!1,b.value=!0,G.length=0,de=Date.now()-be,_("end")}function we(M,G){const R=[],ee=[];let pe=0;for(const ne of M)G.has(ne._id)||(R.push(ne),ee.push(ne.webkitRelativePath||ne.relativePath||ne.name),pe+=ne.size);return ee.length&&($.unconvertedListText=ee.join(`
`),$.unconvertedFileCount=R.length,$.unconvertedTotalSize=pe),R}function Ne(M,G,R){var be;const ee=new Date;M=M.replace(/^image\//,"").toLowerCase();const pe=H.useFolderNameForZip&&((be=String(R).match(/^\/?([^/]+)\//))==null?void 0:be[1])||"avif2jpg",ne=`
    ${ee.getFullYear().toString().substring(2)}
    ${String((ee.getMonth()+1)*100+ee.getDate()).padStart(4,"0")}
    ${String(ee.getHours()*1e4+ee.getMinutes()*100+ee.getSeconds()).padStart(6,"0")}
    -
    ${M+(/jpe?g|webp/i.test(M)?G:"")}
  `.replace(/\s/g,"");return`${pe}-${ne}`.replace(/\s+/g," ")}async function re(){const M="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",G=document.createElement("img"),R=co(G).then(()=>!0,()=>!1);G.src=M,await R||g.warning({title:"Unsupported",positiveText:"OK",maskClosable:!1,content:r("avifUnsupported")})}function ye(){(!p||m<2||!Promise.any)&&(A=!0),A&&(Ue.value=0)}return(M,G)=>{var Re;const R=Ae,ee=dn,pe=xe,ne=Me,Te=It,be=sn;return F(),le(Oe,null,[!e(u)&&((Re=f.input)!=null&&Re.length)?(F(),te(ne,{key:0,justify:"center",align:"center",style:{"margin-top":"0.4em"}},{default:t(()=>[n(pe,{trigger:"hover",placement:"top","keep-alive-on-hover":!1,duration:0,delay:50},{trigger:t(()=>{var ue;return[n(ee,{value:((ue=M.input)==null?void 0:ue.length)||0,offset:[-12,-5],color:"#99999966"},{default:t(()=>[n(e(Pe),{onClick:B,round:"",size:"medium"},{icon:t(()=>[n(R,{size:"1.2em",color:"#CCCCCC"},{default:t(()=>[n(e(Qa))]),_:1})]),default:t(()=>[z(" "+c(e(r)("convertAgain")),1)]),_:1})]),_:1},8,["value"])]}),default:t(()=>{var ue;return[h("div",{innerHTML:e(r)("reconvertTip",(ue=f.input)==null?void 0:ue.length)},null,8,li)]}),_:1})]),_:1})):ge("",!0),n(be,{ref:"processingModal","display-directive":"show",show:e(C),"onUpdate:show":G[2]||(G[2]=ue=>He(C)?C.value=ue:null),closable:e(b),"close-on-esc":!1,preset:"dialog",onClick:G[3]||(G[3]=ue=>{e(l).destroyAll(),e(o).destroyAll()}),onMaskClick:G[4]||(G[4]=ue=>{e(l).destroyAll(),e(o).destroyAll()}),onClose:_e,onEsc:T,title:e(O),type:e(P),"mask-closable":!1,onAfterLeave:ce,onBeforeLeave:G[5]||(G[5]=ue=>{e(K).cleanup()}),class:"processing-dialog"},{default:t(()=>[n(ne,{vertical:"",style:{"flex-grow":"1"}},{default:t(()=>[e(L)?(F(),te(ai,{ref_key:"stat",ref:K,key:e(x),processing:e(u),status:e($),interval:w,onAllZipsClicked:G[0]||(G[0]=ue=>He(N)?N.value=!0:N=!0),onDemandZipErrors:e(q),onDemandImage:me,onDeleteImage:ze},null,8,["processing","status","onDemandZipErrors"])):ge("",!0),n(ne,{justify:"end",align:"center",wrap:!1},{default:t(()=>[e(u)?(F(),te(e(Pe),{key:0,disabled:e(k),ref:"cancelbutton",round:"",size:"large",onClick:G[1]||(G[1]=ue=>k.value=!0)},{default:t(()=>[n(Te,{show:e(k)&&!e(b),size:"small"},{default:t(()=>[z(c(e(r)("cancel")),1)]),_:1},8,["show"])]),_:1},8,["disabled"])):e(b)?(F(),te(e(Pe),{key:1,onClick:_e,round:"",size:"large",style:{"font-size":"small","margin-top":"1em"}},{default:t(()=>[z(c(e(r)("close")),1)]),_:1})):ge("",!0)]),_:1})]),_:1})]),_:1},8,["show","closable","title","type"])],64)}}}),ii="/avif2jpeg/dist/avif.png",ri={class:"container-1"},ui={style:{position:"relative"}},ci={style:{position:"absolute","font-size":"0.5em",right:"-3.5em",bottom:"-1.5em","white-space":"nowrap"}},di={style:{color:"#666666"}},pi=["innerHTML"],fi={style:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","font-size":"xx-small","white-space":"nowrap"}},gi=Se({__name:"droptarget",props:{forbidden:{type:Boolean},dropTarget:{}},emits:["drop"],setup(a,{emit:i}){rt(ot);const r=a,g=i,o=Ja(),l=y(!1),d=y(0),m=y("");qe(()=>{p(r.dropTarget||document)});function p(f){document.ondragstart=v=>v.preventDefault(),document.ondragover=v=>v.preventDefault(),f.ondrop=async v=>{var u;if(v.preventDefault(),l.value||r.forbidden)return;l.value=!0,d.value=0,m.value="";let _;try{const k=[...v.dataTransfer.items].map(b=>b.webkitGetAsEntry());o.start(),_=await w(k),o.finish()}catch{_=[...((u=v.dataTransfer)==null?void 0:u.files)??[]],o.error()}l.value&&(l.value=!1,g("drop",_))}}async function w(f,v){v=v||[];for(const _ of f)if(_.isFile){const u=await new Promise(k=>_.file(b=>k(b)));Object.defineProperty(u,"webkitRelativePath",{value:_.fullPath}),v.push(u),d.value++}else if(_.isDirectory){m.value=_.fullPath;const u=_.createReader();do{const k=await new Promise(b=>u.readEntries(C=>b(C)));if(!k.length)break;await w(k,v)}while(!0)}return v}return(f,v)=>{const _=Ae,u=ht,k=Me,b=xe,C=sn;return F(),le("div",ri,[n(b,{to:!1,"display-directive":"show",trigger:"hover",duration:0,delay:0,placement:"bottom-end"},{trigger:t(()=>[n(k,{vertical:"",class:"container-2"},{default:t(()=>[n(k,{align:"center",wrap:!1,class:"container-3"},{default:t(()=>[n(k,{vertical:"",align:"center",wrap:!1,style:{"font-weight":"bold","font-size":"1em","line-height":"90%","white-space":"nowrap"}},{default:t(()=>[v[5]||(v[5]=h("span",null,"Drag & Drop",-1)),h("span",ui,[v[4]||(v[4]=z(" AVIF Images ")),h("span",ci,[v[3]||(v[3]=z(" or ")),n(u,{placement:"bottom-end"},{trigger:t(()=>[h("span",di,[n(_,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(pn))]),_:1}),v[1]||(v[1]=z(" Folders "))])]),default:t(()=>[v[2]||(v[2]=z(" You can drag and drop your local folders "))]),_:1})])])]),_:1}),n(k,null,{default:t(()=>v[6]||(v[6]=[h("img",{src:ii,class:"avif"},null,-1)])),_:1})]),_:1})]),_:1})]),default:t(()=>[h("h3",{innerHTML:f.$t("droptarget"),style:{"max-width":"200px","text-align":"center","word-break":"keep-all","overflow-wrap":"break-word"}},null,8,pi)]),_:1}),n(C,{show:e(l),"onUpdate:show":v[0]||(v[0]=L=>He(l)?l.value=L:null),closable:!0,preset:"dialog",title:"Parsing dropped items.",type:"info","mask-closable":!1,"negative-text":f.$t("cancel")},{default:t(()=>[n(k,{vertical:"",align:"center"},{default:t(()=>[h("div",fi,c(e(m)),1),h("div",null,"found "+c(e(d))+" files",1)]),_:1})]),_:1},8,["show","negative-text"])])}}}),mi=Xe(gi,[["__scopeId","data-v-963c44a5"]]),vi={class:"container-1"},hi={class:"container-2"},_i=["innerHTML"],wi=["innerHTML"],yi={style:{"white-space":"nowrap"}},bi={style:{"padding-left":"1em"}},ki=["innerHTML"],Ai=["accept"],xi=Se({__name:"file-selector",props:Rt({target:{},userExtensions:{},forbidden:{type:Boolean}},{expanded:{type:Boolean,required:!1},expandedModifiers:{},disableNotifyingFolderSelect:{type:Boolean},disableNotifyingFolderSelectModifiers:{}}),emits:Rt(["input","click","cancel","on-change-accept","update:target","update:userExtensions"],["update:expanded","update:disableNotifyingFolderSelect"]),setup(a,{emit:i}){const r=Wt(),{t:g}=nt(),o=rt(ot),l=["avif_only","all_images","all_files","edit_type"],d=[];for(const T of l)d.push({label:()=>g("fileTypeRadioOptions."+T),value:T});const m=({node:T,option:B})=>Y(xe,{placement:"right"},{trigger:()=>T,default:()=>de(B.value).replace(/,/g,", ")}),p=a,w=i,f=y(0),v=y(!1),_=y(!1),u=Ie(()=>de(C.value)),k=Ie(()=>L.value.split(",").every(B=>/^\s*(\.[\w\-]+)*\s*$/.test(B))?"success":"error"),b=Ie(()=>!p.forbidden&&!_.value);De(a,"expanded");const C=Ie({get:()=>l.indexOf(p.target)>=0?p.target:l[0],set:T=>{w("update:target",T)}}),L=Ie({get:()=>p.userExtensions,set:T=>{w("update:userExtensions",T)}}),O=De(a,"disableNotifyingFolderSelect"),P=y(null),$=y(null),K=y(V());Ce(C,T=>{w("on-change-accept",u.value)}),qe(()=>{});async function x(T){if(w("click"),T===$.value&&!O.value){let B=!1;if(await new Promise(q=>{r.info({title:g("loadfolderNotifyingTitle"),positiveText:g("Continue"),negativeText:g("Cancel"),onAfterLeave:()=>q(B),onPositiveClick:()=>B=!0,content:()=>Y("div",[Y("p",{},g("loadfolderNotifyingMessageTerm1")),Y("div",[Y(Nn,{width:250,style:{border:"3px solid gray"},src:"/avif2jpeg/dist//notification-folder.png"})]),Y("p",{},g("loadfolderNotifyingMessageTerm2")),Y("p",[Y(Hn,{onUpdateChecked:oe=>O.value=oe,checked:O.value},()=>g("checkboxTextDontShowThis"))])])})}),!B){O.value=!1,w("cancel");return}}T.click()}function A(){w("cancel")}function Z(T){const q=[...T.target.files];P.value.value="",$.value.value="",_e(q)}function V(){return"webkitdirectory"in document.createElement("input")}function de(T){switch(T){case"avif_only":return".avif, .webp";case"all_images":return".jpg, .jpeg, .jfif, .pjpeg, .pjp, .gif, .png, .webp, .avif, .bmp, .apng, .ico";case"edit_type":return L.value;case"all_files":default:return".*"}}async function N(T){const B=String(u.value).toLowerCase().replace(/\s+/g,"");if(B&&u.value!==".*"){const q=B.split(",");T=T.filter(oe=>q.includes(oe.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),T.length||(await new Promise(oe=>{r.error({title:"Images Not Found",positiveText:"OK",onAfterLeave:oe,content:()=>Y("div",[Y(rn,{description:"NO IMAGES"}),`${g("noimage")}`,Y("br"),u.value])})}),A())}return T}async function _e(T){_.value=!0,T=await N(T),f.value=T.length,T.length>0&&w("input",ze(T)),_.value=!1}let me=0;function ze(T){const B=[];for(const q of T)q.hasOwnProperty("_id")||Object.defineProperty(q,"_id",{value:me++}),B.push(q);return B}return(T,B)=>{const q=Ae,oe=Pe,ce=Me,se=Ht,we=tl,Ne=el,re=ht;return F(),le(Oe,null,[h("div",vi,[h("div",hi,[n(ce,{vertical:"",align:"center",justify:"center",inline:"",size:"large"},{default:t(()=>[n(ce,{align:"center",justify:"space-around",class:"main-buttons"},{default:t(()=>[n(ce,{vertical:"",align:"stretch",justify:"center"},{default:t(()=>[n(e(xe),{to:!1,"display-directive":"show",show:e(o).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(o).LANDSCAPE.value?"right":"top",duration:0,delay:0,"z-index":10},{trigger:t(()=>[n(oe,{disabled:!e(b),size:"large",onClick:B[0]||(B[0]=ye=>x(e(P))),round:"",style:{width:"100%","background-color":"white","font-size":"large"}},{icon:t(()=>[n(q,{size:"large",color:"gray"},{default:t(()=>[n(e(qn))]),_:1})]),default:t(()=>[z(" "+c(T.$t("loadbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[h("div",{innerHTML:T.$t("loadbuttontooltip")},null,8,_i)]),_:1},8,["show","placement"]),!e(o).IS_SP&&e(K)||e(o).SSR?(F(),le(Oe,{key:0},[n(ce,{align:"center",justify:"center",style:{color:"gray",margin:"0em"}},{default:t(()=>[z(c(T.$t("or")),1)]),_:1}),n(e(xe),{to:!1,"display-directive":"show",trigger:"hover",placement:"left","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:e(o).showTooltipsBeforeMounted.value},{trigger:t(()=>[n(oe,{disabled:!e(b),size:"large",onClick:B[1]||(B[1]=ye=>x(e($))),round:"",style:{width:"100%","background-color":"white","font-size":"large"}},{icon:t(()=>[n(q,{size:"large",color:"gray"},{default:t(()=>[n(e(pn))]),_:1})]),default:t(()=>[z(" "+c(T.$t("loadfolderbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[h("div",{innerHTML:T.$t("loadfoldertooltip")},null,8,wi)]),_:1},8,["show"])],64)):ge("",!0)]),_:1}),e(o).IS_SP?ge("",!0):(F(),te(mi,{key:0,onDrop:_e,forbidden:!e(b),class:"drop-target"},null,8,["forbidden"]))]),_:1}),n(ce,{vertical:""},{default:t(()=>[n(ce,{wrap:e(o).IS_SP,align:"center",justify:"stretch"},{default:t(()=>[h("span",yi,c(T.$t("TargetFileTypeExt"))+": ",1),n(e(xe),{"keep-alive-on-hover":!1,placement:"right",style:{"max-width":"200px"},duration:0,delay:0},{trigger:t(()=>[n(se,{trigger:"click",width:"trigger",size:"small",value:e(C),"onUpdate:value":B[2]||(B[2]=ye=>He(C)?C.value=ye:null),options:d,"render-option":m,"consistent-menu-width":!1},null,8,["value"])]),default:t(()=>[z(" "+c(de(e(C)).replace(/,/g,", ")),1)]),_:1})]),_:1},8,["wrap"]),e(C)==="edit_type"?(F(),te(e(xe),{key:0,trigger:"hover","keep-alive-on-hover":!1,placement:"bottom-start",show:e(v),duration:0,delay:0},{trigger:t(()=>[h("div",bi,[n(re,{trigger:"manual",placement:"right-end",show:e(C)==="edit_type"&&e(k)!=="success"&&!!e(v)},{trigger:t(()=>[n(we,{value:e(L),"onUpdate:value":B[3]||(B[3]=ye=>He(L)?L.value=ye:null),status:e(k),disabled:e(C)!=="edit_type",onFocus:B[4]||(B[4]=ye=>v.value=!0),onBlur:B[5]||(B[5]=ye=>v.value=void 0),clearable:!0,size:"small",placeholder:".jpg, .gif, .png",spellcheck:"false"},null,8,["value","status","disabled"])]),default:t(()=>[n(Ne,{type:"error","show-icon":!0,title:"Validation error"},{default:t(()=>B[6]||(B[6]=[z(" Please correct the extension list."),h("br",null,null,-1),h("ul",null,[h("li",null,"Each extension must begin with a period. "),h("li",null,"Separate each extension with a comma. "),h("li",null,"Use alphameric characters.")],-1)])),_:1})]),_:1},8,["show"])])]),default:t(()=>[h("span",{innerHTML:T.$t("editAcceptTypes")},null,8,ki)]),_:1},8,["show"])):ge("",!0)]),_:1})]),_:1})])]),h("input",{ref_key:"fileinput",ref:P,onInput:Z,onCancel:A,type:"file",multiple:"",accept:e(u),style:{display:"none"}},null,40,Ai),h("input",{ref_key:"folderinput",ref:$,webkitdirectory:"",directory:"",onInput:Z,onCancel:A,type:"file",style:{display:"none"}},null,544)],64)}}}),Ii=Xe(xi,[["__scopeId","data-v-6c233c11"]]),zi={style:{"white-space":"nowrap"}},Ti=Se({__name:"settings-output",props:{quality:{},format:{}},emits:["update:format","update:quality"],setup(a,{emit:i}){const r=a,g=i,{t:o}=nt(),l=rt(ot),d=y([]),m=["image/jpeg","image/png","image/gif","image/bmp","image/avif","image/webp"],p=Ie({get:()=>r.format,set:k=>{k=_(k),g("update:format",k)}}),w=Ie({get:()=>r.quality,set:k=>{g("update:quality",k)}}),f=Ie(()=>/png|bmp/i.test(p.value)),v=y(null);qe(()=>{u()});function _(k){return d.value.indexOf(k)<0&&(k=d.value[0]),k}function u(){for(const k of m)v.value.toDataURL(k).indexOf(k)>=0&&d.value.push(k);d.value.length===0&&d.value.push(m[0])}return(k,b)=>{const C=Ae,L=Ht,O=Me,P=xe,$=cn,K=Gn;return F(),le(Oe,null,[n(O,{justify:"center",class:"body"},{default:t(()=>[n(O,{vertical:""},{default:t(()=>[n(P,{to:!1,"display-directive":"show",show:e(l).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(l).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(O,{align:"center",wrap:!1},{default:t(()=>[n(C,null,{default:t(()=>[n(e(qn))]),_:1}),z(c(e(o)("settings.imageType"))+": ",1),n(L,{value:p.value,"onUpdate:value":b[0]||(b[0]=x=>p.value=x),options:d.value.map(x=>({value:x,label:x})),"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),_:1})]),default:t(()=>[z(" "+c(e(o)("settings.imageTypeTooltip")),1)]),_:1},8,["show","placement"]),n(P,{to:!1,"display-directive":"show",show:e(l).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(l).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(O,{align:"center"},{default:t(()=>[n(O,{align:"start",wrap:!1},{default:t(()=>[n(C,null,{default:t(()=>[n(e(Vn))]),_:1}),h("span",zi,c(e(o)("settings.quality"))+":",1),n(O,{align:"center",justify:"space-between"},{default:t(()=>[n($,{tooltip:!1,value:w.value,"onUpdate:value":b[1]||(b[1]=x=>w.value=x),step:1,style:{width:"120px"},disabled:f.value},null,8,["value","disabled"]),n(K,{onBlur:b[2]||(b[2]=x=>w.value??(w.value=0)),value:w.value,"onUpdate:value":b[3]||(b[3]=x=>w.value=x),step:"1",min:"0",max:"100",disabled:f.value,style:{width:"90px"},size:"small"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:t(()=>[z(" "+c(e(o)("settings.qualitytooltip")),1)]),_:1},8,["show","placement"])]),_:1})]),_:1}),h("canvas",{ref_key:"canvas",ref:v,width:"1",height:"1",style:{display:"none"}},null,512)],64)}}}),Si=Xe(Ti,[["__scopeId","data-v-060333f5"]]),Li={style:{width:"4em","text-align":"left"}},Ci={style:{width:"4em","text-align":"left"}},tn=100,Ln=2e3,Cn=4096,$n=4096,$i=100,Ei=100,Pi=Se({__name:"settings-adv",props:{expanded:{type:Boolean,required:!1},expandedModifiers:{},multithread:{type:Boolean,required:!0},multithreadModifiers:{},threadCount:{required:!0},threadCountModifiers:{},maxZipSize:{required:!0},maxZipSizeModifiers:{},retainExt:{type:Boolean,required:!0},retainExtModifiers:{},useFolderNameForZip:{type:Boolean,required:!0},useFolderNameForZipModifiers:{},shrinkImage:{type:Boolean,required:!0},shrinkImageModifiers:{},maxWidth:{required:!0},maxWidthModifiers:{},maxHeight:{required:!0},maxHeightModifiers:{}},emits:["update:expanded","update:multithread","update:threadCount","update:maxZipSize","update:retainExt","update:useFolderNameForZip","update:shrinkImage","update:maxWidth","update:maxHeight"],setup(a){const i={trigger:"hover",placement:"left",keepAliveOnHover:!1,duration:0,delay:0,style:"max-width: 20vw;"},r=De(a,"expanded"),g=De(a,"multithread"),o=De(a,"threadCount"),l=De(a,"maxZipSize"),d=De(a,"retainExt"),m=De(a,"useFolderNameForZip"),p=De(a,"shrinkImage"),w=De(a,"maxWidth"),f=De(a,"maxHeight");Ce(Ue,_=>{_>1||(g.value=!1),o.value>_&&(o.value=_)},{immediate:!0});const v=Ie(()=>g.value&&Ue.value>1);return qe(()=>{Ue.value>1&&typeof o.value>"u"&&(o.value=Math.max(Ue.value,2))}),(_,u)=>{const k=Ae,b=Pe,C=al,L=Me,O=cn,P=Gn,$=Wn,K=Bn;return F(),te(L,{justify:"center"},{default:t(()=>[n(K,{"display-directive":"show","default-expanded-names":r.value?["collapitem"]:"","on-update:expanded-names":x=>r.value=!!String(x),"trigger-areas":["arrow","main"],class:mt(["settings-body",r.value?"expand-adv-settings":""])},nl({arrow:t(()=>[n(k,{style:ie(r.value&&{top:"8px"})},{default:t(()=>[n(e(il))]),_:1},8,["style"]),n(k,null,{default:t(()=>[n(e(rl))]),_:1})]),default:t(()=>[n($,{title:_.$t("settings.advancedSettings"),name:"collapitem"},{default:t(()=>[n(L,{vertical:"",style:{"padding-left":"2em"}},{default:t(()=>[n(e(xe),yt(bt(i)),{trigger:t(()=>[n(L,{vertical:""},{default:t(()=>[n(L,{wrap:!1,align:"center"},{default:t(()=>[n(b,{text:"",disabled:!e(Ue),style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:u[0]||(u[0]=x=>g.value=!g.value)},{icon:t(()=>[n(k,null,{default:t(()=>[n(e(ol))]),_:1})]),default:t(()=>[z(" "+c(_.$t("settings.enableMultiThreads")),1)]),_:1},8,["disabled"]),n(C,{value:g.value,"onUpdate:value":u[1]||(u[1]=x=>g.value=x),disabled:!e(Ue),size:"small"},null,8,["value","disabled"])]),_:1}),n(L,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(O,{value:o.value,"onUpdate:value":u[2]||(u[2]=x=>o.value=x),disabled:!e(Ue)||!g.value,step:1,min:2,max:e(Ue),style:{width:"120px"}},null,8,["value","disabled","max"]),n(P,{onBlur:u[3]||(u[3]=x=>o.value??(o.value=2)),size:"tiny",value:o.value,"onUpdate:value":u[4]||(u[4]=x=>o.value=x),disabled:!e(Ue)||!g.value,step:1,min:2,max:e(Ue),style:{width:"10em"}},{suffix:t(()=>[z(c(_.$t("threads",o.value)),1)]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[z(" "+c(_.$t("settings.multiThreadsTooltip")),1)]),_:1},16),n(e(xe),yt(bt(i)),{trigger:t(()=>[n(L,{vertical:""},{default:t(()=>[n(L,{wrap:!1,align:"center"},{default:t(()=>[n(b,{text:"",focusable:!1,style:{"white-space":"nowrap","font-size":"smaller"}},{icon:t(()=>[n(k,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(ll))]),_:1})]),default:t(()=>[z(" "+c(_.$t("settings.maxZipFileSize"))+": ",1)]),_:1})]),_:1}),n(L,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(O,{tooltip:!1,value:l.value,"onUpdate:value":u[5]||(u[5]=x=>l.value=x),step:1,min:tn,max:Ln,style:{width:"120px"}},null,8,["value"]),n(P,{onBlur:u[6]||(u[6]=x=>l.value??(l.value=tn)),size:"tiny",value:l.value,"onUpdate:value":u[7]||(u[7]=x=>l.value=x),step:"1",min:tn,max:Ln,style:{width:"10em"}},{suffix:t(()=>u[20]||(u[20]=[z("(MB)")])),_:1},8,["value"])]),_:1})]),_:1})]),default:t(()=>[z(" "+c(_.$t("settings.maxZipFileSizeTooltip")),1)]),_:1},16),n(e(xe),yt(bt(i)),{trigger:t(()=>[n(L,{wrap:!1,align:"center"},{default:t(()=>[n(b,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:u[8]||(u[8]=x=>m.value=!m.value)},{icon:t(()=>[n(k,null,{default:t(()=>[n(e(pn))]),_:1})]),default:t(()=>[z(" "+c(_.$t("settings.useFolderNameForZip")),1)]),_:1}),n(C,{value:m.value,"onUpdate:value":u[9]||(u[9]=x=>m.value=x),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[z(" "+c(_.$t("settings.useFolderNameForZipTooltip")),1)]),_:1},16),n(e(xe),yt(bt(i)),{trigger:t(()=>[n(L,{wrap:!1,align:"center"},{default:t(()=>[n(b,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:u[10]||(u[10]=x=>d.value=!d.value)},{icon:t(()=>[n(k,null,{default:t(()=>[n(e(Zn))]),_:1})]),default:t(()=>[z(" "+c(_.$t("settings.retainOriginalExtension")),1)]),_:1}),n(C,{value:d.value,"onUpdate:value":u[11]||(u[11]=x=>d.value=x),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[z(" "+c(_.$t("settings.retainExtTooltip")),1)]),_:1},16),n(e(xe),yt(bt(i)),{trigger:t(()=>[n(L,{vertical:""},{default:t(()=>[n(L,{wrap:!1,align:"center"},{default:t(()=>[n(b,{disabled:!v.value,text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:u[12]||(u[12]=x=>p.value=!p.value)},{icon:t(()=>[n(k,null,{default:t(()=>[n(e(sl))]),_:1})]),default:t(()=>[z(" "+c(_.$t("settings.shrinkImage")),1)]),_:1},8,["disabled"]),n(C,{disabled:!v.value,value:p.value,"onUpdate:value":u[13]||(u[13]=x=>p.value=x),size:"small"},null,8,["disabled","value"])]),_:1}),n(L,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(O,{value:w.value,"onUpdate:value":u[14]||(u[14]=x=>w.value=x),disabled:!p.value||!v.value,step:1,min:$i,max:Cn,style:{width:"120px"}},null,8,["value","disabled"]),n(P,{size:"tiny",onBlur:u[15]||(u[15]=x=>w.value??(w.value=8)),value:w.value,"onUpdate:value":u[16]||(u[16]=x=>w.value=x),disabled:!p.value||!v.value,step:1,min:8,max:Cn*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[h("span",Li,c(_.$t("width")),1)]),suffix:t(()=>u[21]||(u[21]=[z("px")])),_:1},8,["value","disabled","max"])]),_:1}),n(L,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(O,{value:f.value,"onUpdate:value":u[17]||(u[17]=x=>f.value=x),disabled:!p.value||!v.value,step:1,min:Ei,max:$n,style:{width:"120px"}},null,8,["value","disabled"]),n(P,{size:"tiny",onBlur:u[18]||(u[18]=x=>f.value??(f.value=8)),value:f.value,"onUpdate:value":u[19]||(u[19]=x=>f.value=x),disabled:!p.value||!v.value,step:1,min:8,max:$n*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[h("span",Ci,c(_.$t("height")),1)]),suffix:t(()=>u[22]||(u[22]=[z("px")])),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[z(" "+c(_.$t("settings.shrinkImageTooltip")),1)]),_:1},16)]),_:1})]),_:1},8,["title"])]),_:2},[r.value?{name:"header-extra",fn:t(()=>[n(e(xe),{"keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(b,{onClick:e(Al),size:"tiny",style:{"font-size":"xx-small"}},{default:t(()=>[z(c(_.$t("reset")),1)]),_:1},8,["onClick"])]),default:t(()=>[z(" "+c(_.$t("settings.resetButtonTooltip")),1)]),_:1})]),key:"0"}:void 0]),1032,["default-expanded-names","on-update:expanded-names","class"])]),_:1})}}}),Fi=Xe(Pi,[["__scopeId","data-v-661ec94b"]]),Oi={},Ui={style:{color:"gray","padding-left":"20px"}},Mi=["innerHTML"];function Ni(a,i){const r=Un,g=Me;return F(),te(g,{vertical:"",justify:"end"},{default:t(()=>[n(r,{style:{margin:"0px"}}),n(g,{justify:"center"},{default:t(()=>[h("ul",Ui,[(F(!0),le(Oe,null,xt(a.$tm("descriptions"),o=>(F(),le("li",{key:o,style:{"text-align":"left"},innerHTML:o},null,8,Mi))),128))])]),_:1})]),_:1})}const Ri=Xe(Oi,[["render",Ni]]),Di="modulepreload",ji=function(a){return"/avif2jpeg/dist/"+a},En={},he=function(i,r,g){let o=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),m=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=Promise.allSettled(r.map(p=>{if(p=ji(p),p in En)return;En[p]=!0;const w=p.endsWith(".css"),f=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${f}`))return;const v=document.createElement("link");if(v.rel=w?"stylesheet":Di,w||(v.as="script"),v.crossOrigin="",v.href=p,m&&v.setAttribute("nonce",m),document.head.appendChild(v),w)return new Promise((_,u)=>{v.addEventListener("load",_),v.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return o.then(d=>{for(const m of d||[])m.status==="rejected"&&l(m.reason);return i().catch(l)})},po="English",fo="🇬🇧",go='AVIF to JPEG "Offline" Batch Converter',mo="It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",vo="Drag & Drop AVIF Images to Convert",ho=["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data is sent to any server</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.'],_o="Select your language",wo="Choose Target File Extentions",yo={avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types",edit_type:"Edit File Extension List"},bo="Input a list of comma separated file extentions to load.<br>e.g.) .jpg,.gif,.png",ko="Load Images",Ao="Select your images from a dialog window.<br>*Multiple selection allowed.",xo="Load a Whole Folder",Io=`Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>*It will show "Upload" button, but it actually doesn't upload anything to any server.`,zo="Converting images",To="Aborted",So="Some files failed to convert",Lo="Completed",Co="Currently Busy",$o="No files with the extentions were found.",Eo="Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",Po="Cancel",Fo="Save",Oo="Close",Uo="Open",Mo="Re-convert",No="Convert previous selected {n} @:files again",Ro="File | Files",Do="thread | threads",jo="You have not saved the converted images yet.",Zo="Data have not been saved",Bo="Open Source",Wo="Open the converted image",Ho="Copied to clipboard",Vo="The converted image was copied to your clipboard as DataURL.",qo="Copy the converted image as DataURL",Go="Convert Again",Ko={expandLogTooltip:"Displaying the entire log may severely reduce conversion speed.",expandLog:"Show entire log",autoScroll:"Auto scroll",showOnlyErrors:"Show only errors",outInRate:"Out / In Ratio",elapsedTime:"Elapsed Time",multiThreading:"Multi-Threading",outputSettings:"Output Settings",totalSize:"Total Size",totalFiles:"Number of Files",confirmDownloadMessage:"It will start to download {0} zip files.",inputSize:"Input Size",outputSize:"Output Size",filterSuccess:"Hide completed item",progressErrors:"Failed items",progressStarted:"Started Items",progressTotal:"Total number of files",zippingProgress:"Zipping progress",zipped:"ZIPPED",openFailedList:"Open failed file list",zipFailedList:"Pack failed files into Zips",table:{index:"index",status:"status",core:"thread",details:"file"},saveFailedList:"Save failed file list",done:"done",convertedZips:"successfully completed ZIP",progressSuccess:"Completed Files",downloadConvertedImage:"Download Converted Image",failureZippingFailedFiles:"Failure while zipping the failed files.",browseConvertedImages:"Browse converted images",index:"Index",Original:"Original",Converted:"Converted",saveAllZipsTooltip:"Save all ZIP files",Shrinked:"Shrinked",Shrinking:"Shrinking",saveAll:"Save All",progressRetries:"Retrying files",success:"success",started:"started",total:"total",files:"files",failure:"failure",all:"all",filterLogSelect:"filter",showOnlySuccess:"Only successes",showOnlyError:"Only errors",showAll:"Show all",Progress:"Progress",PreviewImage:"Preview Images",Log:"Log",log:"Log",Output:"Output Results"},Yo={maxZipFileSize:"Max zip file size",retainExtTooltip:"New extension will be appended to original extension",retainOriginalExtension:"Keep Original File Extension",qualitytooltip:"Set image quality for output",quality:"Image Quality",maxZipFileSizeTooltip:"Set smaller value if memory problems occur.",ignoreExtTooltip:'Try to load files that don"t have image file extension',ignoreFileExtensions:"Load All File Types",imageTypeTooltip:"Choose image format for output",imageType:"Image Type",advancedSettings:"Advanced Settings",enableMultiThreads:"Enable multi-threading",resetButtonTooltip:"Restore all settings to default.",multiThreadsTooltip:"Convert images in multi-threaded",shrinkImageTooltip:"If the image dimensions are larger than the specified value, shrink the image to that value",shrinkImage:"Shrink images that exceed the following dimensions",useFolderNameForZip:"Use dropped folder name for the zip file",useFolderNameForZipTooltip:"If a folder is dropped or selected, its name is used as the name of the output ZIP file"},Xo="Disabled",Qo="Download",Jo="Reset",ea="Back",ta="Failed",na="Success",oa="Previous version",aa=`
Height`,la="Width",sa="Don't show this message again",ia="About the warning when selecting a folder",ra="OK",ua={},ca="You must press the “Upload” button here to load all the images in the folder, but the data loaded by this application is never actually uploaded to the server.",da="Continue",pa="Cancel",fa="When you select a folder instead of a file as input on a website, major web browsers will display a warning like the image below.",ga="This page may be an outdated version. Please reload the page.",ma="Reload",va='If the conversion process frequently fails and an “Out of Memory” message appears, try reducing or disabling the number of "multi-threads" in the "Advanced Settings".',ha="Next",_a="Previous",wa="or",ya="Target File Extensions",ba={lang:po,flags:fo,title:go,metaDescription:mo,droptarget:vo,descriptions:ho,selectLanguage:_o,fileTypeRadioTitle:wo,fileTypeRadioOptions:yo,editAcceptTypes:bo,loadbutton:ko,loadbuttontooltip:Ao,loadfolderbutton:xo,loadfoldertooltip:Io,processing:zo,aborted:To,incomplete:So,completed:Lo,interfered:Co,noimage:$o,avifUnsupported:Eo,cancel:Po,save:Fo,close:Oo,open:Uo,reconvert:Mo,reconvertTip:No,files:Ro,threads:Do,confirmCloseDialog:jo,confirmCloseDialogTitle:Zo,githubOpenSource:Bo,convertedImageUrlTooltip:Wo,copiedDataURLDialogTitle:Ho,copiedDataURLMessage:Vo,convertedImageDataUrlTooltip:qo,convertAgain:Go,status:Ko,settings:Yo,disabled:Xo,Download:Qo,reset:Jo,back:ea,failed:ta,success:na,previousVersion:oa,height:aa,width:la,checkboxTextDontShowThis:sa,loadfolderNotifyingTitle:ia,OK:ra,loadfolderNotifyingMessage:ua,loadfolderNotifyingMessageTerm2:ca,Continue:da,Cancel:pa,loadfolderNotifyingMessageTerm1:fa,errMsgWorkerLoadError:ga,Reload:ma,annotationOutOfMemory:va,Next:ha,Prev:_a,or:wa,TargetFileTypeExt:ya},Zi=Object.freeze(Object.defineProperty({__proto__:null,Cancel:pa,Continue:da,Download:Qo,Next:ha,OK:ra,Prev:_a,Reload:ma,TargetFileTypeExt:ya,aborted:To,annotationOutOfMemory:va,avifUnsupported:Eo,back:ea,cancel:Po,checkboxTextDontShowThis:sa,close:Oo,completed:Lo,confirmCloseDialog:jo,confirmCloseDialogTitle:Zo,convertAgain:Go,convertedImageDataUrlTooltip:qo,convertedImageUrlTooltip:Wo,copiedDataURLDialogTitle:Ho,copiedDataURLMessage:Vo,default:ba,descriptions:ho,disabled:Xo,droptarget:vo,editAcceptTypes:bo,errMsgWorkerLoadError:ga,failed:ta,fileTypeRadioOptions:yo,fileTypeRadioTitle:wo,files:Ro,flags:fo,githubOpenSource:Bo,height:aa,incomplete:So,interfered:Co,lang:po,loadbutton:ko,loadbuttontooltip:Ao,loadfolderNotifyingMessage:ua,loadfolderNotifyingMessageTerm1:fa,loadfolderNotifyingMessageTerm2:ca,loadfolderNotifyingTitle:ia,loadfolderbutton:xo,loadfoldertooltip:Io,metaDescription:mo,noimage:$o,open:Uo,or:wa,previousVersion:oa,processing:zo,reconvert:Mo,reconvertTip:No,reset:Jo,save:Fo,selectLanguage:_o,settings:Yo,status:Ko,success:na,threads:Do,title:go,width:la},Symbol.toStringTag,{value:"Module"})),Bi="Arabic",Wi="German",Hi="English",Vi="Spanish",qi="Finnish",Gi="French",Ki="Hindi",Yi="Indonesian",Xi="Italian",Qi="Japanese",Ji="Korean",er="Dutch",tr="Polish",nr="Portuguese",or="Russian",ar="Turkish",lr="Ukrainian",sr="Chinese",ir={ar:Bi,de:Wi,en:Hi,es:Vi,fi:qi,fr:Gi,hi:Ki,id:Yi,it:Xi,ja:Qi,ko:Ji,nl:er,pl:tr,pt:nr,ru:or,tr:ar,uk:lr,"zh-hant":"Chinese(hant)",zh:sr},jt=[],ka={en:ba},mn={},Pn=Object.assign({"./locales/ar.json":()=>he(()=>import("./ar-lkW88dZA.js"),[]),"./locales/de.json":()=>he(()=>import("./de-mwdAQ5UN.js"),[]),"./locales/en.json":()=>he(()=>Promise.resolve().then(()=>Zi),void 0),"./locales/es.json":()=>he(()=>import("./es-CPxwpSS_.js"),[]),"./locales/fi.json":()=>he(()=>import("./fi-f0ziNAMc.js"),[]),"./locales/fr.json":()=>he(()=>import("./fr-M2WdtiEH.js"),[]),"./locales/hi.json":()=>he(()=>import("./hi-pGoMT1tM.js"),[]),"./locales/id.json":()=>he(()=>import("./id-iLxXxquD.js"),[]),"./locales/it.json":()=>he(()=>import("./it-CwErAvl3.js"),[]),"./locales/ja.json":()=>he(()=>import("./ja-jfZsfHC2.js"),[]),"./locales/ko.json":()=>he(()=>import("./ko-D3yU8ryk.js"),[]),"./locales/nl.json":()=>he(()=>import("./nl-CXAtQYVm.js"),[]),"./locales/pl.json":()=>he(()=>import("./pl-B9oCs4E6.js"),[]),"./locales/pt.json":()=>he(()=>import("./pt-C86utGO5.js"),[]),"./locales/ru.json":()=>he(()=>import("./ru-Dk5UeRvP.js"),[]),"./locales/tr.json":()=>he(()=>import("./tr-BOja1KvV.js"),[]),"./locales/uk.json":()=>he(()=>import("./uk-BCeiw_QX.js"),[]),"./locales/zh-hant.json":()=>he(()=>import("./zh-hant-BybWSQWY.js"),[]),"./locales/zh.json":()=>he(()=>import("./zh-CrsXrZWv.js"),[])});var On;for(const a in Pn){const i=(On=a.match(/\/([a-z]{2}(?:-[a-z]+)?)\.json$/i))==null?void 0:On[1];i&&(jt.push(i),!(i in ka)&&(mn[i]=Pn[a]))}let ln=ur();ln in mn||(ln="en");const Zt=ul({legacy:!1,globalInjection:!0,locale:ln,fallbackLocale:"en",messages:ka,warnHtmlMessage:!1,missingWarn:!1,fallbackWarn:!1});async function rr(a){if(Zt.global.availableLocales.indexOf(a)>=0)return;const i=await mn[a]();Zt.global.setLocaleMessage(a,i),await We()}function ur(){const a=location.pathname;return String(a.match(/[^/]+(?=\/?$)/)||"").toLowerCase()}const cr=["innerHTML"],Fn=Se({__name:"switch-lang",emits:["lang-ready","lang-change"],async setup(a,{emit:i}){let r,g;const o=rt(ot),l=Mn(),{locale:d,t:m}=nt(),p=i,w=Object.entries(ir).map(([b,C])=>({label:C,value:b}));w.sort((b,C)=>{const L=b.label,O=C.label;return L>O?1:L<O?-1:0}),qe(()=>{l.afterEach((b,C,L)=>{v(),o.switchToolTipVisibility()})}),cl(async()=>{}),[r,g]=dl(()=>v()),await r,g();async function f(b){(b!==d.value||Zt.global.availableLocales.indexOf(b)===-1)&&(p("lang-change",b),await rr(b),d.value=b,document.title=m("title"),await We()),p("lang-ready",b)}async function v(){const b=l.currentRoute.value.path||"",C=String(b.match(new RegExp("(?<=^\\/)[^/]+"))||"");C&&jt.includes(C)?(await f(C),d.value=C):await _()}async function _(){const b=u().toLowerCase(),C=b.split(/[-_]/)[0];if(jt.includes(C)){let L=C;if(C==="zh")switch(b){case"zh-hant":case"zh-mo":case"zh-hk":case"zh-tw":L="zh-hant"}await f(L)}}function u(){const b=window.navigator;return b.language||b.userLanguage||b.browserLanguage}function k(b){l.push("/"+b+"/")}return(b,C)=>{const L=Ae,O=Ht,P=xe;return F(),te(P,{to:!1,"display-directive":"show",show:e(o).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(o).LANDSCAPE.value?"left":"bottom",duration:0,delay:50},{trigger:t(()=>[n(O,{ref:"langselect",size:"tiny",style:{width:"100%"},"consistent-menu-width":!1,options:e(w),"_v-model:value":"locale",value:e(d),"onUpdate:value":k},{arrow:t(()=>[n(L,null,{default:t(()=>[n(e(pl))]),_:1})]),_:1},8,["options","value"])]),default:t(()=>[h("div",{innerHTML:b.$t("selectLanguage")},null,8,cr)]),_:1},8,["show","placement"])}}}),ot=Symbol("global variables"),dr=Se({__name:"Avif2Jpeg",emits:["ready"],setup(a,{emit:i}){const{t:r,locale:g}=nt(),o=i,l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),d=y(null);y(0);let m=y(void 0);const p=y(!0),w=y(!1),f=y(!1),v=y(!0),_=y(!1);gl(ot,{showTooltipsBeforeMounted:m,LANDSCAPE:p,IS_SP:l,switchToolTipVisibility:O,SSR:!1}),qe(()=>{P(),window.addEventListener("resize",P),O(),setTimeout(()=>f.value=!0,3e3)}),Rn(()=>{window.removeEventListener("resize",P)});const u=200;let k=0,b=!0;function C(){v.value=!1,k=Date.now()}function L(){const x=b?0:Math.max(0,u-(Date.now()-k));b=!1,setTimeout(()=>v.value=!0,x),o("ready")}async function O(){}function P(){const x=document.body.clientWidth,A=document.body.clientHeight;p.value=x*.75>A||x>900}function $(x){d.value=x}function K(x){_.value=x}return(x,A)=>{const Z=Me,V=Ae,de=ht;return F(),te(Z,{vertical:"",align:"stretch",class:"avif2jpeg"},{default:t(()=>[n(Ol,null,{"lang-switch":t(()=>[(F(),te(In,null,{default:t(()=>[n(Fn,{onLangChange:C,onLangReady:L})]),_:1}))]),_:1}),n(st,{name:"fade"},{default:t(()=>[Ze(n(Z,{vertical:"",align:"stretch",justify:"space-between",style:{height:"100%"}},{default:t(()=>[n(Z,{justify:"space-around",vertical:"",style:{height:"100%"}},{default:t(()=>[n(Ml),n(Z,{justify:"center"},{default:t(()=>[n(Ii,{"_v-model:expanded":"UserSettings.expandExtButtons",target:e(H).acceptTypeValue,"onUpdate:target":A[0]||(A[0]=N=>e(H).acceptTypeValue=N),userExtensions:e(H).editedAcceptTypes,"onUpdate:userExtensions":A[1]||(A[1]=N=>e(H).editedAcceptTypes=N),"disable-notifying-folder-select":e(H).disableNotifyingFolderSelect,"onUpdate:disableNotifyingFolderSelect":A[2]||(A[2]=N=>e(H).disableNotifyingFolderSelect=N),forbidden:e(w),onInput:$,onClick:A[3]||(A[3]=N=>K(!0)),onCancel:A[4]||(A[4]=N=>K(!1))},null,8,["target","userExtensions","disable-notifying-folder-select","forbidden"])]),_:1}),n(si,{input:e(d),format:e(H).imageFormat,quality:e(H).imageQuality,"retain-extension":e(H).retainExtension,maxZipSizeMB:e(H).maxZipSizeMB,threads:e(H).multithread?e(H).threadCount:0,"show-note":e(_),"onUpdate:showNote":A[5]||(A[5]=N=>He(_)?_.value=N:null),onStart:A[6]||(A[6]=N=>w.value=!0),onEnd:A[7]||(A[7]=N=>w.value=!1),"_:multi-thread-count":"val => availableThreadCount = val"},{"lang-switch":t(()=>[(F(),te(In,null,{default:t(()=>[n(Fn)]),_:1}))]),_:1},8,["input","format","quality","retain-extension","maxZipSizeMB","threads","show-note"]),n(Z,{vertical:"",align:"center"},{default:t(()=>[n(de,{trigger:"manual",placement:"top","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(V,{size:"5vh",color:"#DADADA",style:{margin:"0px"}},{default:t(()=>[n(e(fl))]),_:1})]),default:t(()=>[A[18]||(A[18]=h("span",null,"CONVERT TO👇",-1))]),_:1})]),_:1}),n(Z,{vertical:"",align:"center"},{default:t(()=>[n(Si,{format:e(H).imageFormat,"onUpdate:format":A[8]||(A[8]=N=>e(H).imageFormat=N),quality:e(H).imageQuality,"onUpdate:quality":A[9]||(A[9]=N=>e(H).imageQuality=N)},null,8,["format","quality"]),n(Fi,{"retain-ext":e(H).retainExtension,"onUpdate:retainExt":A[10]||(A[10]=N=>e(H).retainExtension=N),"use-folder-name-for-zip":e(H).useFolderNameForZip,"onUpdate:useFolderNameForZip":A[11]||(A[11]=N=>e(H).useFolderNameForZip=N),"max-zip-size":e(H).maxZipSizeMB,"onUpdate:maxZipSize":A[12]||(A[12]=N=>e(H).maxZipSizeMB=N),"_v-model:expanded":"UserSettings.expandAdvSettings",multithread:e(H).multithread,"onUpdate:multithread":A[13]||(A[13]=N=>e(H).multithread=N),"thread-count":e(H).threadCount,"onUpdate:threadCount":A[14]||(A[14]=N=>e(H).threadCount=N),"_:thread-max":"availableThreadCount","shrink-image":e(H).shrinkImage,"onUpdate:shrinkImage":A[15]||(A[15]=N=>e(H).shrinkImage=N),"max-width":e(H).maxWidth,"onUpdate:maxWidth":A[16]||(A[16]=N=>e(H).maxWidth=N),"max-height":e(H).maxHeight,"onUpdate:maxHeight":A[17]||(A[17]=N=>e(H).maxHeight=N)},null,8,["retain-ext","use-folder-name-for-zip","max-zip-size","multithread","thread-count","shrink-image","max-width","max-height"])]),_:1}),n(Ri)]),_:1})]),_:1},512),[[Be,e(v)]])]),_:1})]),_:1})}}}),vn=Se({__name:"App",setup(a){const i={Statistic:{valueFontSize:"1em"},Popover:{borderRadius:"0.4em",boxShadow:"2px 2px 5px 0px #555555"},Tooltip:{},Image:{toolbarColor:"#00000099"}},r=y(!0);return qe(()=>{r.value=!1}),(g,o)=>{const l=wl,d=_l,m=hl,p=vl,w=ml,f=yl;return F(),te(f,{"theme-overrides":i,style:{width:"100%",height:"100%"}},{default:t(()=>[n(w,null,{default:t(()=>[n(p,{placement:"top-right",max:20},{default:t(()=>[n(m,{placement:"top-left",closable:!0,max:50},{default:t(()=>[n(d,null,{default:t(()=>[n(l,null,{default:t(()=>[n(dr,{class:mt({hide:e(r)})},null,8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),Aa=[{path:"/",name:"Home",component:vn}];for(const a of jt)Aa.push({path:"/"+a+"/",strict:!0,name:a,component:vn});bl(vn,{routes:Aa,base:"/avif2jpeg/dist/"},({app:a,router:i,routes:r,isClient:g,initialState:o})=>{a.use(Zt)});
