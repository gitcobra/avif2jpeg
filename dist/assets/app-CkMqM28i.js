var Za=Object.defineProperty;var Ha=(i,s,u)=>s in i?Za(i,s,{enumerable:!0,configurable:!0,writable:!0,value:u}):i[s]=u;var ut=(i,s,u)=>Ha(i,typeof s!="symbol"?s+"":s,u);import{m as ot,c as G,o as I,a as _,d as ye,u as _n,r as v,b as Be,w as we,e as t,n as pe,f as Fe,g as Ve,h as Te,i as X,_ as zt,j as e,k as st,l as fe,p as Ce,q as n,N as Tt,s as L,t as d,F as Pe,v as it,B as Ee,x as Ze,y as wn,T as xt,z as Se,A as xe,C as Ie,D as Ft,E as at,L as Wa,G as Va,H as se,I as lt,J as qa,K as Ga,M as bn,O as Ht,P as kn,Q as Wt,R as ze,S as Ka,U as Nt,V as et,W as Qa,X as Ya,Y as Ke,Z as Vt,$ as ct,a0 as Ge,a1 as zn,a2 as Qe,a3 as Sn,a4 as pt,a5 as Et,a6 as dt,a7 as At,a8 as Xa,a9 as nt,aa as Ja,ab as nn,ac as on,ad as Cn,ae as el,af as Dt,ag as tl,ah as nl,ai as Tn,aj as ol,ak as an,al as ft,am as al,an as xn,ao as ll,ap as Pt,aq as sl,ar as il,as as rl,at as jt,au as An,av as ul,aw as In,ax as Ln,ay as cl,az as dl,aA as pl,aB as qt,aC as $n,aD as fl,aE as Fn,aF as En,aG as Gt,aH as gl,aI as Dn,aJ as ml,aK as vl,aL as vt,aM as ht,aN as hl,aO as yl,aP as _l,aQ as wl,aR as bl,aS as kl,aT as ln,aU as zl,aV as Sl,aW as Cl,aX as Tl,aY as xl,aZ as Al,a_ as Il,a$ as Ll,b0 as $l,b1 as Fl,b2 as El,b3 as Dl,b4 as Pl}from"./vendor-D3o1LRaX.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function u(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(o){if(o.ep)return;o.ep=!0;const a=u(o);fetch(o.href,a)}})();const Ol={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Ml(i,s){return I(),G("svg",Ol,s[0]||(s[0]=[_("path",{fill:"currentColor",d:"m12 13.4l-4.9 4.9q-.275.275-.7.275t-.7-.275t-.275-.7t.275-.7l4.9-4.9l-4.9-4.9q-.275-.275-.275-.7t.275-.7t.7-.275t.7.275l4.9 4.9l4.9-4.9q.275-.275.7-.275t.7.275t.275.7t-.275.7L13.4 12l4.9 4.9q.275.275.275.7t-.275.7t-.7.275t-.7-.275z"},null,-1)]))}const Pn=ot({name:"material-symbols-close-rounded",render:Ml}),Ul=["width","height"],Bl={key:1,class:"error"},Rl=["height"],Nl=ye({__name:"canvas-thumbnail",props:{source:{},width:{},height:{},fit:{}},setup(i,{expose:s,emit:u}){const l=i;s({}),_n();const o=z(),a=v(!1),r=v(),c=v(100),f=v(100);let w,k;Be(async()=>{await o?w=r.value.getContext("bitmaprenderer"):k=r.value.getContext("2d"),we(()=>l.source,async p=>{a.value=!1,await o?m(p):T(p)},{immediate:!0})});async function z(){if(typeof window.createImageBitmap!="function"||/firefox/i.test(navigator.userAgent))return!1;const p=new ImageData(1,1);try{return(await createImageBitmap(p,{resizeWidth:1})).close(),!0}catch{return!1}}async function m(p){try{let $,h,g;p instanceof Blob?(g=await createImageBitmap(p,{resizeWidth:Math.max(200,l.width),resizeQuality:"pixelated"}),{width:$,height:h}=g,p=g):p instanceof VideoFrame?($=p.displayWidth,h=p.displayHeight):{width:$,height:h}=p;const{tw:S,th:y,cropx:x,cropy:U,cropw:q,croph:H}=F($,h,l.width,l.height),ne=await createImageBitmap(p,x,U,q,H,{resizeWidth:S,resizeHeight:y,resizeQuality:"pixelated"});c.value=S,f.value=y,r.value.style.width=S+"px",r.value.style.height=y+"px",w.transferFromImageBitmap(ne),g&&g.close()}catch{a.value=!0}}async function T(p){let $;if(p instanceof Blob){const ne=URL.createObjectURL(p);$=new Image,await new Promise(O=>{$.onload=$.onerror=O,$.src=ne,setTimeout(O,1e4)}).finally(()=>{}),$.complete,p=$,URL.revokeObjectURL(ne)}else if(p instanceof ImageData||p instanceof VideoFrame||p instanceof SVGElement)return;const{width:h,height:g}=p,{tw:S,th:y,sx:x,sy:U,sw:q,sh:H}=F(h,g,l.width,l.height);r.value.width=S,r.value.height=y,r.value.style.width=S+"px",r.value.style.height=y+"px",k.drawImage(p,x,U,q,H),$&&($.src="",$=null)}function F(p,$,h,g){const S=p/$,y=h/g;let x,U,q=0,H=0,ne=p,O=$,D=0,C=0,le=0,J=0;return S>y?(U=g,x=U*S,q=(x-h)/2*(p/x),ne=h*(p/x),J=g,le=g*S,D=-(le-h)/2):(x=h,U=x/S,H=(U-g)/2*($/U),O=g*($/U),le=h,J=h/S,C=-(J-g)/2),{tw:h,th:g,cropx:q,cropy:H,cropw:ne,croph:O,sx:D,sy:C,sw:le,sh:J}}return(p,$)=>t(a)?(I(),G("div",Bl,[(I(),G("svg",{xmlns:"http://www.w3.org/2000/svg",style:pe({width:Math.min(p.width,p.height)+"px"}),height:Math.min(p.width,p.height),viewBox:"0 0 32 32"},$[0]||($[0]=[_("path",{fill:"currentColor",d:"M2 16A14 14 0 1 0 16 2A14 14 0 0 0 2 16m23.15 7.75L8.25 6.85a12 12 0 0 1 16.9 16.9M8.24 25.16a12 12 0 0 1-1.4-16.89l16.89 16.89a12 12 0 0 1-15.49 0"},null,-1)]),12,Rl))])):(I(),G("canvas",{key:0,ref_key:"canvas",ref:r,width:t(c),height:t(f)},null,8,Ul))}}),Re=(i,s)=>{const u=i.__vccOpts||i;for(const[l,o]of s)u[l]=o;return u},jl=Re(Nl,[["__scopeId","data-v-642e679e"]]);function We(i,s=2){const u=Math.sign(i);i=Math.abs(i);const l=["Bytes","KB","MB","GB"],o=i?Math.floor(Math.log(i)/Math.log(1024)):0;return`${(i/Math.pow(1024,o)*u).toFixed(s)}${l[o]}`}function On(i,s=100,u=!1){s=typeof s=="number"?{width:s,height:s}:s;const{width:l,height:o}=s;let{width:a,height:r}=i;const c=a/r,f=l/o;return c>=f?(a=u?Math.min(l,a):l,r=a/c|0):(r=u?Math.min(o,r):o,a=r*c|0),{width:a,height:r}}class Zl{constructor(){ut(this,"_currentFileCount",0);ut(this,"_currentZipIndex",0);ut(this,"_totalFileCount",0);ut(this,"_zipLengthSumList",[]);ut(this,"_pathBank",{})}increase(s){return s&&(this._pathBank[s]=[this._zipLengthSumList.length,this._currentFileCount]),this._currentFileCount++,this._totalFileCount++}split(){this._zipLengthSumList.push(this._totalFileCount),this._currentZipIndex++,this._currentFileCount=0}get(s){if(typeof s=="number"){let u=this._zipLengthSumList.findIndex((a,r)=>s<a);u===-1&&(u=this._zipLengthSumList.length);const l=this._zipLengthSumList[u-1]||0,o=s-l;return[u,o]}else{const u=this._pathBank[String(s)];if(u)return u}return null}getZipIndex(){return this._currentZipIndex}getIndex(){return this._totalFileCount}}function Hl(i){return new Promise(s=>setTimeout(s,i))}function Wl(i,s=0,u,l){i.value=u;const o=setTimeout(()=>{i.value=!0},s);return()=>clearTimeout(o)}function Vl(i,s=0){const u=v(i);return we(u,l=>{l!==void 0&&Fe(()=>{setTimeout(()=>u.value=void 0,s)})},{immediate:!0}),u}const Mn=ye({__name:"prompt-on-dup",props:Ve({preset:{default:"dialog"},title:{},content:{},type:{},show:{type:Boolean},buttons:{},defaultButtons:{},closable:{type:Boolean},draggable:{type:Boolean},closeOnEsc:{type:Boolean},maskClosable:{type:Boolean},showApplyAll:{type:Boolean},labelApplyAll:{default:"Apply this action to all"}},{applyAllChecked:{type:Boolean},applyAllCheckedModifiers:{}}),emits:Ve(["start","close","applyAllChange"],["update:applyAllChecked"]),setup(i,{expose:s,emit:u}){const l=i,o=Te(i,"applyAllChecked"),a=u;s({start:m,click:$,close:T,isApplyAllChecked:S});const r=_n(),c={overwrite:"Overwrite",skip:"Skip",rename:"Rename",cancel:"Cancel"},f=v(),w=v(!1);let k,z;we(()=>l.show,(y,x)=>{y?m():T()},{immediate:l.show});function m(){f.value=F(),w.value=!0,z=void 0,o.value=!1;const y=new Promise(x=>{k=x});return a("start",y),y}function T(){w.value=!1;const y=z;return setTimeout(()=>{k(y),a("close",y)},50),z}function F(){const y=[];if(l.buttons)for(const x of l.buttons){let U,q;if(typeof x=="string"?U=q=x:x instanceof Array?([q,U]=x,typeof U>"u"&&(U=q)):x&&({key:U,label:q}=x),!U||!q)throw new Error("unexpected button item");y.push([q,U])}else(l.defaultButtons||["overwrite","skip","cancel"]).forEach(U=>{if(!(U in c))throw new Error(`${U} doen't exist in DEF_LABELS`);y.push([c[U],U])});return y}function p(y){return typeof y=="function"?y():y}function $(y){z=y,T()}function h(){z="close",T()}function g(y){a("applyAllChange",y)}function S(){return o.value}return(y,x)=>{const U=Ee,q=Tt,H=Ce,ne=zt;return I(),X(ne,{show:t(w),closable:y.closable,draggable:y.draggable,preset:y.preset,title:y.title,content:y.content,type:y.type,onClose:x[1]||(x[1]=O=>y.closable&&h()),onEsc:x[2]||(x[2]=O=>y.closeOnEsc&&h()),onMaskClick:x[3]||(x[3]=O=>y.maskClosable&&h())},{action:e(()=>[r.action?st(y.$slots,"action",{key:0}):(I(!0),G(Pe,{key:1},it(t(f),O=>(I(),X(U,{onClick:D=>$(typeof O[1]<"u"?O[1]:O[0])},{default:e(()=>[L(d(p(O[0])),1)]),_:2},1032,["onClick"]))),256))]),default:e(()=>[st(y.$slots,"default"),y.showApplyAll?(I(),X(H,{key:0,justify:"end",style:{padding:"1em","font-size":"0.8em"}},{default:e(()=>[n(q,{checked:o.value,"onUpdate:checked":x[0]||(x[0]=O=>o.value=O),onUpdateChecked:g},{default:e(()=>[L(d(y.labelApplyAll),1)]),_:1},8,["checked"])]),_:1})):fe("",!0)]),header:e(()=>[st(y.$slots,"header")]),icon:e(()=>[st(y.$slots,"icon")]),close:e(()=>[st(y.$slots,"close")]),_:3},8,["show","closable","draggable","preset","title","content","type"])}}}),ql={class:"list-label"},Gl={class:"sum"},Kl={class:"size"},Ql={class:"files"},Yl={class:"path"},Xl=3,Jl=ye({__name:"file-list",props:Ve({additionalFiles:{}},{"file-list":{required:!0},"file-listModifiers":{}}),emits:["update:file-list"],setup(i){const{t:s}=Ze(),u=i,l=Te(i,"file-list"),o=v([]),a=v(""),r=v(0),c=v(),f=v(!1),w=v(""),k=v([[()=>s("dupAction_replace"),"overwrite"],[()=>s("dupAction_skip"),"skip"],[()=>s("cancel"),"cancel"]]);Be(()=>{we(()=>u.additionalFiles,async m=>{const T=new Map(l.value.map($=>[$.webkitRelativePath||$.name,$]));let F=!1,p="";for(const $ of m){const h=$.webkitRelativePath||$.name;if(T.has(h)){w.value=h;const g=p||await c.value.start();switch(!p&&f.value&&(p=g),g){case"overwrite":F=!0;break;case"cancel":return;case"skip":default:continue}}T.delete(h),T.set(h,$)}(T.size>l.value.length||F)&&(l.value=[...T.values()])}),we(()=>l.value[l.value.length-1],()=>{const m=l.value.slice(-3);for(const F of m){const p=F.name;o.value.push({file:F,name:p})}const T=Math.min(Xl,l.value.length);o.value.length>T&&(o.value=o.value.slice(-T)),a.value=We(l.value.reduce((F,p)=>F+p.size,0))})});function z(){l.value.length=0,o.value.length=0}return(m,T)=>{const F=wn,p=Ce,$=Pn,h=xe,g=Ee,S=Se;return I(),G("div",null,[n(p,{class:"container",justify:"stretch",align:"stretch",wrap:!1,size:1},{default:e(()=>[n(p,{class:"list-box",wrap:!1,size:0},{default:e(()=>[_("span",ql,d(m.$t("SourceImageList")),1),n(p,{class:"list-status",vertical:"",size:4,align:"end",justify:"end"},{default:e(()=>[_("div",Gl,d(m.$t("status.total")),1),_("div",Kl,d(t(a)),1),_("div",Ql,[n(F,{active:!0,duration:1e3,"show-separator":"",to:l.value.length,from:t(r),onFinish:T[0]||(T[0]=y=>r.value=l.value.length)},null,8,["to","from"]),L(" "+d(m.$t("files",l.value.length)),1)])]),_:1}),n(xt,{name:"list"},{default:e(()=>[(I(!0),G(Pe,null,it(t(o),(y,x)=>(I(),X(jl,{key:y.file._id,source:y.file,width:67,height:100,class:"image-item"},null,8,["source"]))),128))]),_:1})]),_:1}),n(p,{class:"button-box",align:"center",justify:"center"},{default:e(()=>[n(S,{trigger:"hover",placement:"top","keep-alive-on-hover":!1,delay:100},{trigger:e(()=>[n(g,{class:"close-button",bordered:!1,color:"gray",ghost:"",size:"tiny",onClick:T[1]||(T[1]=y=>z())},{default:e(()=>[n(p,{vertical:"",align:"center"},{default:e(()=>[n(h,{size:"1.6em"},{default:e(()=>[n($)]),_:1}),_("span",null,d(m.$t("reset")),1)]),_:1})]),_:1})]),default:e(()=>[L(d(m.$t("resetListButtonTooltip")),1)]),_:1})]),_:1})]),_:1}),n(Mn,{ref_key:"promptdup",ref:c,closable:"",buttons:t(k),"close-on-esc":"","show-apply-all":"","label-apply-all":m.$t("confirmApplyAllLabel"),"apply-all-checked":t(f),"onUpdate:applyAllChecked":T[2]||(T[2]=y=>Ie(f)?f.value=y:null)},{header:e(()=>[L(d(m.$t("confirmListOverwrite")),1)]),default:e(()=>[_("div",null,d(m.$t("confirmListOverwriteMsg")),1),_("p",Yl,d(t(w)),1)]),_:1},8,["buttons","label-apply-all","apply-all-checked"])])}}}),es=Re(Jl,[["__scopeId","data-v-3209b149"]]),ts=10,Ne=v(navigator.hardwareConcurrency?Math.min(navigator.hardwareConcurrency,ts):0),yt={threadCount:{min:2,max:Math.max(2,Ne.value)}},ns={imageFormat:"image/jpeg",imageQuality:90,expandExtButtons:!1,acceptTypeValue:void 0,editedAcceptTypes:"",expandAdvSettings:!1,retainExtension:!1,maxZipSizeMB:1e3,useFolderNameForZip:!1,multithread:!0,threadCount:Ne.value,shrinkImage:!1,maxWidth:4096,maxHeight:4096,disableNotifyingFolderSelect:!1,changeLogCheckedDate:0,lang:"",autoStartConversion:!1,outputMethod:"zip",actionOnDuplicate:"prompt"},os=["actionOnDuplicate"],W=Ft(Un({}));function as(){Un(W)}function Un(i){return Object.assign(i,ns)}const Bn="avif2jpeg",Ot=JSON.parse(localStorage.getItem(Bn)||"{}");for(const i in W)if(Ot.hasOwnProperty(i)&&Ot[i]!==void 0){let s=Ot[i];yt.hasOwnProperty(i)&&(yt[i].min>s&&(s=yt[i].min),yt[i].max<s&&(s=yt[i].max)),W[i]=s}function Rn(){const i={};for(const s in W)os.includes(s)||(i[s]=W[s]);localStorage.setItem(Bn,JSON.stringify(i))}window.addEventListener("beforeunload",Rn);function ls(){localStorage.clear(),window.removeEventListener("beforeunload",Rn)}const ss={href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-weight":"bolder"}},is=ye({__name:"github",setup(i){const s=at(Ye);return(u,l)=>{const o=xe,a=Ce,r=Se;return I(),X(r,{to:!1,"display-directive":"show",show:t(s).showTooltipsBeforeMounted.value,trigger:"hover",duration:0,delay:0},{trigger:e(()=>[_("a",ss,[n(a,{align:"center",size:0},{default:e(()=>[n(o,{size:"1.2em"},{default:e(()=>[n(t(Wa))]),_:1}),l[0]||(l[0]=L("GitHub "))]),_:1,__:[0]})])]),default:e(()=>[L(" "+d(u.$t("githubOpenSource")),1)]),_:1},8,["show"])}}}),rs=["href"],us=ye({__name:"licenses",setup(i){const s=v(!1),u={Vue:"https://github.com/vuejs/core/blob/main/LICENSE",Vite:"https://github.com/vitejs/vite/blob/main/LICENSE","Vite SSG":"https://github.com/antfu/vite-ssg/blob/main/LICENSE","Naive UI":"https://github.com/TuSimple/naive-ui/blob/main/LICENSE",Ionicons:"https://github.com/ionic-team/ionicons/blob/main/LICENSE"};return(l,o)=>{const a=Ee;return I(),G(Pe,null,[n(a,{text:"",onClick:o[0]||(o[0]=r=>s.value=!0),style:{color:"black","font-size":"small"}},{default:e(()=>o[2]||(o[2]=[L("Licenses")])),_:1,__:[2]}),n(t(zt),{preset:"dialog",ref:"dialog",show:s.value,"onUpdate:show":o[1]||(o[1]=r=>s.value=r),"positive-text":"OK",title:"Licenses"},{default:e(()=>[o[3]||(o[3]=_("h3",null,"Frameworks and Libraries",-1)),_("ul",null,[(I(),G(Pe,null,it(u,(r,c)=>_("li",null,[_("a",{href:r},d(c),9,rs)])),64))]),o[4]||(o[4]=_("h3",null,"App icon",-1)),o[5]||(o[5]=_("div",null,[L(" The app icon is derived from "),_("a",{href:"https://aomediacodec.github.io/av1-avif/"},"AVIF logo"),L(". ")],-1))]),_:1,__:[3,4,5]},8,["show"])],64)}}}),cs=1,ds=12,ps=4,fs="",St={major:cs,minor:ds,build:ps,tag:fs},gs={style:{"font-size":"x-small","user-select":"none"}},ms=ye({__name:"version",setup(i){const s=["0.0.118"],u=`${St.major}.${St.minor}.${St.build}${St.tag}`,l=s.map(c=>({label:`v${c}`,key:c,value:c}));function o(c){const{key:f,label:w}=c,k=r(f),z=se("a",{href:k},w),m=se("div",null,z);return se("div",null,m)}function a(c){location.href=r(c)}function r(c){return`/avif2jpeg/old/${c}/`}return(c,f)=>{const w=Va;return I(),X(w,{"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start",options:t(l),"render-label":o,"onUpdate:value":a},{header:e(()=>[_("span",gs,d(c.$t("previousVersion")),1)]),default:e(()=>[_("span",{style:{cursor:"pointer"}},"v"+d(u))]),_:1},8,["options"])}}}),vs={key:0,style:{color:"red"}},hs=["innerHTML"],ys=ye({__name:"changelog",props:{url:{}},setup(i){const s=i,u=v("fetching..."),l=v(!1);Be(()=>a(s.url));let o=0;async function a(c){const f=await fetch(c,{headers:{Accept:"application/vnd.github.v3+json"}}).then(w=>w.ok?w.text():null);u.value="",f&&(u.value=f.replace(/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2}) \+\d+$/mg,(w,k)=>{const z=new Date(w),m=z.getTime(),T=z.toLocaleString();let F="";return m>W.changeLogCheckedDate&&(l.value=!0,m>o&&(o=m),F="update"),`<span class="date ${F}">${T}</span>`}))}function r(){o>W.changeLogCheckedDate&&(W.changeLogCheckedDate=o),l.value=!1}return(c,f)=>{const w=xe,k=Ce,z=lt;return I(),X(z,{trigger:"click",placement:"bottom","arrow-point-to-center":"","onUpdate:show":r,style:{"margin-left":"-1em","max-width":"80%","white-space":"initial"}},{trigger:e(()=>[n(k,{align:"center",size:1,style:{cursor:"pointer"}},{default:e(()=>[n(w,{component:t(qa),size:"1.5em",color:t(l)?"blue":"silver",style:{transition:"color 0.5s"}},null,8,["component","color"]),L(" "+d(c.$t("changelog")),1)]),_:1})]),default:e(()=>[t(u)?(I(),G("pre",{key:1,innerHTML:t(u),class:"commits"},null,8,hs)):(I(),G("div",vs," connection error "))]),_:1})}}}),_s="modulepreload",ws=function(i){return"/avif2jpeg/dist/"+i},sn={},Ae=function(s,u,l){let o=Promise.resolve();if(u&&u.length>0){let r=function(w){return Promise.all(w.map(k=>Promise.resolve(k).then(z=>({status:"fulfilled",value:z}),z=>({status:"rejected",reason:z}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),f=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=r(u.map(w=>{if(w=ws(w),w in sn)return;sn[w]=!0;const k=w.endsWith(".css"),z=k?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${w}"]${z}`))return;const m=document.createElement("link");if(m.rel=k?"stylesheet":_s,k||(m.as="script"),m.crossOrigin="",m.href=w,f&&m.setAttribute("nonce",f),document.head.appendChild(m),k)return new Promise((T,F)=>{m.addEventListener("load",T),m.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${w}`)))})}))}function a(r){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=r,window.dispatchEvent(c),!c.defaultPrevented)throw r}return o.then(r=>{for(const c of r||[])c.status==="rejected"&&a(c.reason);return s().catch(a)})},Nn="English",jn="🇬🇧",Zn='AVIF to JPEG "Offline" Batch Converter',Hn="It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",Wn=["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data is sent to any server</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.',"Use this app at your own risk."],Vn="Select your language",qn="Choose Target File Extentions",Gn={avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types",edit_type:"Edit File Extension List"},Kn="Input a list of comma separated file extentions to load.<br>e.g.) .jpg,.gif,.png",Qn="Select your images from a dialog window.<br>*Multiple selection allowed.",Yn=`Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>*It will show "Upload" button, but it actually doesn't upload anything to any server.`,Xn="Converting images",Jn="Aborted",eo="Some files failed to convert",to="Completed",no="Currently Busy",oo="No files with the extentions were found.",ao="Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",lo="Cancel",so="Save",io="Close",ro="Open",uo="Re-convert",co="Convert previous selected {n} @:files again",po="File | Files",fo="thread | threads",go="You have not saved the converted images yet.",mo="Data have not been saved",vo="Open Source",ho="Open the converted image",yo="Copied to clipboard",_o="The converted image was copied to your clipboard as DataURL.",wo="Copy the converted image as DataURL",bo="Convert Again",ko={expandLogTooltip:"Displaying the entire log may severely reduce conversion speed.",showOnlyErrors:"Show only errors",outInRate:"Out / In Ratio",elapsedTime:"Elapsed Time",multiThreading:"Multi-Threading",outputSettings:"Output Settings",totalSize:"Total Size",totalFiles:"Number of Files",confirmDownloadMessage:"It will start to download {0} zip files.",inputSize:"Input Size",outputSize:"Output Size",filterSuccess:"Hide completed item",progressErrors:"Failed items",progressStarted:"Started Items",progressTotal:"Total number of files",zippingProgress:"Zipping progress",zipped:"ZIPPED",openFailedList:"Open failed file list",zipFailedList:"Pack failed files into Zips",table:{index:"index",status:"status",core:"thread",details:"file"},saveFailedList:"Save failed file list",done:"done",convertedZips:"successfully completed ZIP",progressSuccess:"Completed Files",downloadConvertedImage:"Download Converted Image",failureZippingFailedFiles:"Failure while zipping the failed files.",browseConvertedImages:"Browse converted images",index:"Index",Original:"Original",Converted:"Converted",saveAllZipsTooltip:"Save all ZIP files",Shrinked:"Shrinked",Shrinking:"Shrinking",saveAll:"Save All",progressRetries:"Retrying files",success:"success",started:"started",total:"total",files:"files",failure:"failure",all:"all",filterLogSelect:"filter",showOnlySuccess:"Only successes",showOnlyError:"Only errors",showAll:"Show all",Progress:"Progress",PreviewImage:"Preview Images",Log:"Log",log:"Log",Output:"Output Results",expandLog:"expand log size",autoScroll:"auto-scroll",sortByStatus:"status",sort:"Sort list by",sortByName:"name",sortBySize:"size",sortByOutputSize:"size(output)",sortByStart:"starting order",sortByCompletion:"output order",outputToDir:"Export to Folder",numberOfFilesWrittenToDir:"Number of files written to the folder"},zo={maxZipFileSize:"Max zip file size",retainExtTooltip:"New extension will be appended to original extension",retainOriginalExtension:"Keep Original File Extension",qualitytooltip:"Set image quality for output",quality:"Image Quality",maxZipFileSizeTooltip:"Set smaller value if memory problems occur.",ignoreExtTooltip:'Try to load files that don"t have image file extension',ignoreFileExtensions:"Load All File Types",imageTypeTooltip:"Choose image format for output",imageType:"Image Type",advancedSettings:"Advanced Settings",enableMultiThreads:"Enable multi-threading",resetButtonTooltip:"Restore all settings to default.",multiThreadsTooltip:"Convert images in multi-threaded",shrinkImageTooltip:"If the image dimensions are larger than the specified value, shrink the image to that value",shrinkImage:"Shrink images that exceed the following dimensions",useFolderNameForZip:"Use dropped folder name for the zip file",useFolderNameForZipTooltip:"If a folder is dropped or selected, its name is used as the name of the output ZIP file",useFileSystemAPI:"Directly write output files to the local folder",autoStartConversion:"Automatically start conversion after loading images",outputFolderDenied:"Output folder selection was canceled",saveAsZIP:"Save as a ZIP File",changeSaveMethod:"Change Save Method",chooseOutputFolder:"Choose an output folder",saveToSpecifiedFolder:"Write to Selected Folder Directly",actionOnDuplicate:"Action on Duplicate",autoStartConversionTooltip:"Conversion will start automatically after images are loaded. The list is reset each time you load images.",chooseOutputFolderTooltip:"No output folder selected.",outputType:"Output Type",outputQuality:"Output Quality",permissionDenied:"Failed to get access permission for the folder."},So="Disabled",Co="Download",To="Reset",xo="Back",Ao="Failed",Io="Success",Lo="Previous version",$o=`
Height`,Fo="Width",Eo="Don't show this message again",Do="About the warning when selecting a folder",Po="OK",Oo={},Mo="You must press the “Upload” button here to load all the images in the folder, but the data loaded by this application is never actually uploaded to the server.",Uo="Continue",Bo="Cancel",Ro="When you select a folder instead of a file as input on a website, major web browsers will display a warning like the image below.",No="This page may be an outdated version. Please reload the page.",jo="Reload",Zo='If the conversion process frequently fails and an “Out of Memory” message appears, try reducing or disabling the number of "multi-threads" in the "Advanced Settings".',Ho="Next",Wo="Previous",Vo="or",qo="Source Image Extensions",Go="Changelog",Ko="Choose source image extensions",Qo="Drag & Drop AVIF Images to Convert",Yo="Or just drag & drop",Xo="Install as App",Jo='Installing allows you to launch this web app directly from desktop icons or other shortcuts. The security level is the same as a regular web page, so it remains safe. For more details, please see <a href="https://support.google.com/chrome/answer/9658361">Google’s support page</a>.',ea="Use the browser’s language setting",ta="Installed as an app",na="A new version of the page is available. Click the Reload button to update.",oa="Start Conversion",aa="Default",la="Add Images",sa="Add Entire Folder",ia="Source Image List",ra="Clear the current list of source images",ua="Click here to start conversion",ca="experimental",da="Show confirmation dialog",pa="Overwrite",fa="Skip",ga="Confirm List Overwrite",ma="This path already exists in the list.",va="Replace",ha="Output folder not specified.",ya="Apply this action to all",_a="A {type} with the same name already exists.",wa="file",ba="folder",ka="Overwrite Confirmation",za="Load source images first",Sa="Converted images will be saved to the folder below.",Ca="This feature is experimental. Continue only if it is acceptable to lose data in the output folder.",Ta="Images will be written directly to folder",xa="Restore all settings to default",Aa={lang:Nn,flags:jn,title:Zn,metaDescription:Hn,descriptions:Wn,selectLanguage:Vn,fileTypeRadioTitle:qn,fileTypeRadioOptions:Gn,editAcceptTypes:Kn,loadbuttontooltip:Qn,loadfoldertooltip:Yn,processing:Xn,aborted:Jn,incomplete:eo,completed:to,interfered:no,noimage:oo,avifUnsupported:ao,cancel:lo,save:so,close:io,open:ro,reconvert:uo,reconvertTip:co,files:po,threads:fo,confirmCloseDialog:go,confirmCloseDialogTitle:mo,githubOpenSource:vo,convertedImageUrlTooltip:ho,copiedDataURLDialogTitle:yo,copiedDataURLMessage:_o,convertedImageDataUrlTooltip:wo,convertAgain:bo,status:ko,settings:zo,disabled:So,Download:Co,reset:To,back:xo,failed:Ao,success:Io,previousVersion:Lo,height:$o,width:Fo,checkboxTextDontShowThis:Eo,loadfolderNotifyingTitle:Do,OK:Po,loadfolderNotifyingMessage:Oo,loadfolderNotifyingMessageTerm2:Mo,Continue:Uo,Cancel:Bo,loadfolderNotifyingMessageTerm1:Ro,errMsgWorkerLoadError:No,Reload:jo,annotationOutOfMemory:Zo,Next:Ho,Prev:Wo,or:Vo,TargetFileTypeExt:qo,changelog:Go,TargetFileTypeExtTooltip:Ko,droptargetTooltip:Qo,droptargetLabel:Yo,installAsApp:Xo,PWAinstallAsAppTooltip:Jo,selectLangCloseTooltip:ea,PWAInstalledTooltip:ta,PWAUpdateMessage:na,StartConversion:oa,Default:aa,loadbutton:la,loadfolderbutton:sa,SourceImageList:ia,resetListButtonTooltip:ra,convertTooltip:ua,experimental:ca,dupAction_prompt:da,dupAction_overwrite:pa,dupAction_skip:fa,confirmListOverwrite:ga,confirmListOverwriteMsg:ma,dupAction_replace:va,errMsgOutputDirNotFound:ha,confirmApplyAllLabel:ya,confirmFileOverwriteMsg:_a,file:wa,folder:ba,confirmFileOverwriteTitle:ka,convertUnpreparedTooltip:za,warnAboutFileSysBeforeConversion1:Sa,warnAboutFileSysBeforeConversion2:Ca,warnAboutFileSysTitle:Ta,warnAboutResetMsg:xa},bs=Object.freeze(Object.defineProperty({__proto__:null,Cancel:Bo,Continue:Uo,Default:aa,Download:Co,Next:Ho,OK:Po,PWAInstalledTooltip:ta,PWAUpdateMessage:na,PWAinstallAsAppTooltip:Jo,Prev:Wo,Reload:jo,SourceImageList:ia,StartConversion:oa,TargetFileTypeExt:qo,TargetFileTypeExtTooltip:Ko,aborted:Jn,annotationOutOfMemory:Zo,avifUnsupported:ao,back:xo,cancel:lo,changelog:Go,checkboxTextDontShowThis:Eo,close:io,completed:to,confirmApplyAllLabel:ya,confirmCloseDialog:go,confirmCloseDialogTitle:mo,confirmFileOverwriteMsg:_a,confirmFileOverwriteTitle:ka,confirmListOverwrite:ga,confirmListOverwriteMsg:ma,convertAgain:bo,convertTooltip:ua,convertUnpreparedTooltip:za,convertedImageDataUrlTooltip:wo,convertedImageUrlTooltip:ho,copiedDataURLDialogTitle:yo,copiedDataURLMessage:_o,default:Aa,descriptions:Wn,disabled:So,droptargetLabel:Yo,droptargetTooltip:Qo,dupAction_overwrite:pa,dupAction_prompt:da,dupAction_replace:va,dupAction_skip:fa,editAcceptTypes:Kn,errMsgOutputDirNotFound:ha,errMsgWorkerLoadError:No,experimental:ca,failed:Ao,file:wa,fileTypeRadioOptions:Gn,fileTypeRadioTitle:qn,files:po,flags:jn,folder:ba,githubOpenSource:vo,height:$o,incomplete:eo,installAsApp:Xo,interfered:no,lang:Nn,loadbutton:la,loadbuttontooltip:Qn,loadfolderNotifyingMessage:Oo,loadfolderNotifyingMessageTerm1:Ro,loadfolderNotifyingMessageTerm2:Mo,loadfolderNotifyingTitle:Do,loadfolderbutton:sa,loadfoldertooltip:Yn,metaDescription:Hn,noimage:oo,open:ro,or:Vo,previousVersion:Lo,processing:Xn,reconvert:uo,reconvertTip:co,reset:To,resetListButtonTooltip:ra,save:so,selectLangCloseTooltip:ea,selectLanguage:Vn,settings:zo,status:ko,success:Io,threads:fo,title:Zn,warnAboutFileSysBeforeConversion1:Sa,warnAboutFileSysBeforeConversion2:Ca,warnAboutFileSysTitle:Ta,warnAboutResetMsg:xa,width:Fo},Symbol.toStringTag,{value:"Module"})),ks="Arabic",zs="German",Ss="English",Cs="Spanish",Ts="Finnish",xs="French",As="Hindi",Is="Indonesian",Ls="Italian",$s="Japanese",Fs="Korean",Es="Dutch",Ds="Polish",Ps="Portuguese",Os="Russian",Ms="Turkish",Us="Ukrainian",Bs="Chinese",Rs={ar:ks,de:zs,en:Ss,es:Cs,fi:Ts,fr:xs,hi:As,id:Is,it:Ls,ja:$s,ko:Fs,nl:Es,pl:Ds,pt:Ps,ru:Os,tr:Ms,uk:Us,"zh-hant":"Chinese(hant)",zh:Bs},_t=[],Ia={en:Aa},Kt={},rn=Object.assign({"./locales/ar.json":()=>Ae(()=>import("./ar-BlQUsQY6.js"),[]),"./locales/de.json":()=>Ae(()=>import("./de-DaOkktnE.js"),[]),"./locales/en.json":()=>Ae(()=>Promise.resolve().then(()=>bs),void 0),"./locales/es.json":()=>Ae(()=>import("./es-Dn9bzDfa.js"),[]),"./locales/fi.json":()=>Ae(()=>import("./fi-Du42DQB7.js"),[]),"./locales/fr.json":()=>Ae(()=>import("./fr-BHEA5dbc.js"),[]),"./locales/hi.json":()=>Ae(()=>import("./hi-DyR3vLWh.js"),[]),"./locales/id.json":()=>Ae(()=>import("./id-Dt6xcqz_.js"),[]),"./locales/it.json":()=>Ae(()=>import("./it-BFMcyKOK.js"),[]),"./locales/ja.json":()=>Ae(()=>import("./ja-DO_GS_KB.js"),[]),"./locales/ko.json":()=>Ae(()=>import("./ko-CwQBTgO-.js"),[]),"./locales/nl.json":()=>Ae(()=>import("./nl-CVIx3Y2C.js"),[]),"./locales/pl.json":()=>Ae(()=>import("./pl-CnCDTIkG.js"),[]),"./locales/pt.json":()=>Ae(()=>import("./pt-tm5hjAzx.js"),[]),"./locales/ru.json":()=>Ae(()=>import("./ru-BzO4Zv_8.js"),[]),"./locales/tr.json":()=>Ae(()=>import("./tr-gEbi1tPy.js"),[]),"./locales/uk.json":()=>Ae(()=>import("./uk-DXnC_6XK.js"),[]),"./locales/zh-hant.json":()=>Ae(()=>import("./zh-hant-2trgrrlh.js"),[]),"./locales/zh.json":()=>Ae(()=>import("./zh-C0XKYdeQ.js"),[])});var yn;for(const i in rn){const s=(yn=i.match(/\/([a-z]{2}(?:-[a-z]+)?)\.json$/i))==null?void 0:yn[1];s&&(_t.push(s),!(s in Ia)&&(Kt[s]=rn[i]))}let Zt=js();Zt in Kt||(Zt="en");const It=Ga({legacy:!1,globalInjection:!0,locale:Zt,fallbackLocale:"en",messages:Ia,warnHtmlMessage:!1,missingWarn:!1,fallbackWarn:!1});async function Ns(i){if(It.global.availableLocales.indexOf(i)>=0)return!0;const s=await Kt[i]().catch(u=>{});return s?(It.global.setLocaleMessage(i,s),await Fe(),!0):!1}function js(){const i=location.pathname;return String(i.match(/[^/]+(?=\/?$)/)||"").toLowerCase()}const Zs=ye({__name:"header",setup(i){const s=bn(),{locale:u}=Ze();return(l,o)=>{const a=Ht("router-link"),r=Ce,c=kn;return I(),X(r,{vertical:"",justify:"start"},{default:e(()=>[n(r,{justify:"space-between",align:"center",wrap:!1},{default:e(()=>[n(r,{align:"center"},{default:e(()=>[n(is),n(ms),n(ys,{url:"/avif2jpeg/dist/commits.txt"}),n(us),n(r,{style:{"font-size":"1em"}},{default:e(()=>[t(s).path!=="/"?(I(),X(a,{key:0,to:"/",style:{color:"black"}},{default:e(()=>o[0]||(o[0]=[L("HOME")])),_:1,__:[0]})):fe("",!0)]),_:1})]),_:1}),n(r,{align:"end",id:"langtarget"},{default:e(()=>[st(l.$slots,"lang-switch")]),_:3})]),_:3}),n(c,{style:{margin:"0px"}})]),_:3})}}}),Hs="/avif2jpeg/dist/pwa-64x64.png",Ws={class:"title"},Vs=ye({__name:"title",setup(i){const s=Wt();return ze(()=>{const u=s.currentRoute.value.path||"";return!String(u.match(new RegExp("(?<=^\\/)[^/]+"))||"")}),(u,l)=>{const o=Ce;return I(),X(o,{vertical:"",align:"center",justify:"center",style:{margin:"0px"},size:1},{default:e(()=>[_("h1",Ws,[l[0]||(l[0]=_("img",{src:Hs,style:{height:"1em","vertical-align":"middle"}},null,-1)),L(" "+d(u.$t("title")),1)])]),_:1})}}}),qs=Re(Vs,[["__scopeId","data-v-0b61dfe0"]]),Gs={viewBox:"0 0 15 16",width:"1.13em",height:"1.2em"};function Ks(i,s){return I(),G("svg",Gs,s[0]||(s[0]=[Ka('<path fill="currentColor" d="m6.22 8.14l-3.17 4.28c-.18.24 0 .58.29.58h6.32c.3 0 .47-.34.29-.58L6.8 8.14c-.14-.2-.44-.2-.58 0"></path><path fill="currentColor" d="m9.72 10.09l-1.9 2.57c-.11.14 0 .35.17.35h3.79c.18 0 .28-.2.17-.35l-1.89-2.57a.215.215 0 0 0-.35 0Z"></path><circle cx="10" cy="8" r="1" fill="currentColor"></circle><path fill="currentColor" d="M12.5 16h-10c-.83 0-1.5-.67-1.5-1.5v-13C1 .67 1.67 0 2.5 0h7.09c.4 0 .78.16 1.06.44l2.91 2.91c.28.28.44.66.44 1.06V14.5c0 .83-.67 1.5-1.5 1.5M2.5 1c-.28 0-.5.22-.5.5v13c0 .28.22.5.5.5h10c.28 0 .5-.22.5-.5V4.41a.47.47 0 0 0-.15-.35L9.94 1.15A.5.5 0 0 0 9.59 1z"></path><path fill="currentColor" d="M13.38 5h-2.91C9.66 5 9 4.34 9 3.53V.62c0-.28.22-.5.5-.5s.5.22.5.5v2.91c0 .26.21.47.47.47h2.91c.28 0 .5.22.5.5s-.22.5-.5.5"></path>',5)]))}const Qs=ot({name:"formkit-fileimage",render:Ks}),Ys={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Xs(i,s){return I(),G("svg",Ys,s[0]||(s[0]=[_("path",{fill:"currentColor",d:"M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h6l2 2h8q.825 0 1.413.588T22 8v10q0 .825-.587 1.413T20 20zm0-2h16V8h-8.825l-2-2H4zm0 0V6z"},null,-1)]))}const La=ot({name:"material-symbols-folder-outline",render:Xs}),Js={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ei(i,s){return I(),G("svg",Js,s[0]||(s[0]=[_("path",{fill:"currentColor",d:"M12 .037C5.373.037 0 5.394 0 12s5.373 11.963 12 11.963c6.628 0 12-5.357 12-11.963S18.627.037 12 .037m-.541 4.8c1.91-.13 3.876.395 5.432 1.934c1.426 1.437 2.51 3.44 2.488 5.317h2.133l-4.444 4.963l-4.445-4.963h2.313c-.001-1.724-.427-2.742-1.78-4.076c-1.325-1.336-2.667-2.11-4.978-2.303a9.2 9.2 0 0 1 3.281-.871zM6.934 6.95l4.445 4.963H9.066c0 1.724.426 2.742 1.778 4.076c1.326 1.336 2.667 2.112 4.978 2.305c-2.684 1.268-6.22 1.398-8.71-1.064c-1.427-1.437-2.512-3.44-2.489-5.317H2.488z"},null,-1)]))}const ti=ot({name:"simple-icons-convertio",render:ei}),un=new Set,ni=new Set,oi=new Set,Lt=new Map;function ai(i){const s=Lt.get(i);s&&(Lt.delete(i),s(),Ct==null||Ct(),Ct=null)}function li(){for(const i of Lt.keys())ai(i)}let Ct=null;function $a(){li();for(const i of un)i.onmessage=null,i.terminate();un.clear(),ni.clear(),oi.clear(),Lt.clear()}function si(i){return new Worker("/avif2jpeg/dist/assets/worker.zip-Bt_6u_43.js",{name:i==null?void 0:i.name})}function ii(i){return new Worker("/avif2jpeg/dist/assets/worker.loader-ClWxlXFI.js",{name:i==null?void 0:i.name})}function ri(){return typeof window.showDirectoryPicker=="function"}async function ui(i=!0){let s;try{if(s=await window.showDirectoryPicker(),s&&i&&await Fa(s))return s}catch{}return null}async function Fa(i){let s;try{s=await i.queryPermission({mode:"readwrite"})}catch{}if(s!=="granted")try{s=await i.requestPermission({mode:"readwrite"})}catch{}return s==="granted"}async function ci(i,s,u){const l=s.split("/"),o=l.pop();let a=i;for(const c of l)a=await a.getDirectoryHandle(c);const r=await a.getFileHandle(o);return u?r.getFile():r}async function di(i,s){const u=s.split("/"),l=u.pop();let o=i;for(const a of u)o=await o.getDirectoryHandle(a);return await o.getDirectoryHandle(l)}async function pi(i,s,u,l,o){const r=await(await i.getFileHandle(s,{create:!0})).createWritable();return await r.write(u),await r.close(),!0}async function fi(i,s,u,l){const o=u===!0;let a;try{if(a=await i.getDirectoryHandle(s,{create:o}),o)return a;!u||typeof u=="function"&&await u(i,s,l)}catch(r){if(r.name==="NotFoundError")a=await i.getDirectoryHandle(s,{create:!0});else throw r}return a}const cn=new Map;async function gi(i,s,u,l){let o=cn.get(i);o||(o={},cn.set(i,o));const a=[];let r=i,c;const f=typeof s=="string"?s.split("/"):s;c=f.join("/");do{if(o[c]){r=o[c],c+="/";break}a.unshift(f.pop()),c=f.join("/")}while(f.length);for(const w of a){if(!w)throw new Error("folderName is empty");if(r=await fi(r,w,u,c),!r)return null;o[c+w]=r,c+=w+"/"}return r}async function mi(i,s,u,l){const o=s.split("/"),a=o.pop();if(!a)throw new Error("fileName is empty");const r=o.length?await gi(i,o,l):i;return r?await pi(r,a,u,l,o.length?o.join("/")+"/":""):!1}async function vi(i){try{for await(const s of i.entries())break;return!0}catch(s){if(s.name==="NotFoundError")return!1;throw s}}function hi(i){const s=new Set;for(const u of i){const o=u.webkitRelativePath.split("/");do{o.pop();const a=o.join("/");if(s.has(a))break;s.add(a)}while(o.length>=2)}return s}async function yi(i,s){const l=[...hi(s)].sort(),o=new Set;let a,r="";for(let c of l){let f=c;r&&c.startsWith(r+"/")?f=f.slice(r.length+1):a=i;try{a=await di(a,f),o.add(c),r=c}catch{r=""}}return o}const Qt="avif2jpeg-db",Yt=1,bt="output-dirs",Ea="last-used";async function _i(){return new Promise(i=>{const s=indexedDB.open(Qt,Yt);s.onupgradeneeded=u=>{u.target.result.createObjectStore(bt)},s.onsuccess=s.onerror=i})}async function dn(i){return new Promise(async(s,u)=>{const l=indexedDB.open(Qt,Yt);l.onsuccess=o=>{o.target.result.transaction([bt],"readwrite").objectStore(bt).put(i,Ea),s()},l.onerror=u})}async function wi(){return new Promise(async(i,s)=>{const u=await indexedDB.open(Qt,Yt);u.onsuccess=l=>{const o=l.target.result;let a;try{a=o.transaction([bt],"readonly")}catch(f){s(f);return}const c=a.objectStore(bt).get(Ea);c.onsuccess=f=>{const w=f.target.result;i(w)},c.onerror=s},u.onerror=s}).catch(i=>null)}const bi=1e3*10;let tt;const je=new Map,kt=new Map,$t=new Map;let N;function Mt(i){tt=null,je.clear(),kt.clear(),$t.clear(),kt.clear(),$t.clear(),N={...i}}async function ki(i){Mt(i),N.completedFileIdSet.clear(),N.completedFileDat.length=0;let s;try{s=await zi()}catch{return Mt(),{exception:new Error("worker-load-error"),callbackToClearConverter:new Function,callbackToGenerateFailedZips:new Function}}const[u,l]=s;tt=l;const o=new Promise(m=>{l.onmessage=T=>{const F=T.data,{action:p}=F;switch(p){case"squeeze-zip":case"zip-squeeze-error":m(void 0);break}}}),a=new Promise(m=>{u.onmessage=T=>{const{data:{action:F}}=T;F==="close-loader"&&m()}}),r=N.files.map(m=>[m._id,m.webkitRelativePath]);N.files.forEach(m=>kt.set(m._id,m));const c=we(N.canceled,m=>{if(!m)return;c();const T={action:"cancel-convert"};u.postMessage(T)}),f={action:"start-convert",list:N.files,extraPropsForList:r,outputQuality:N.quality,outputType:N.format,keepExt:N.props.retainExtension,outputExt:N.outputExt,fsysDirHandler:N.fsysDirHandler,existingFolders:N.existingFolders,threads:N.props.threads,maxSize:W.shrinkImage?{width:W.maxWidth,height:W.maxHeight}:null};u.postMessage(f),await a,l.postMessage({action:"squeeze"}),await o,c();const w=()=>{$a(),l.onmessage=null,l.terminate(),u.onmessage=null,u.terminate(),Mt()};let k=!1;return{callbackToClearConverter:w,callbackToGenerateFailedZips:async m=>{k||(k=!0,await Ei(m,l,{},N.ConvStats))}}}async function zi(){$a();const i=new ii,s=new si,u=new Promise((r,c)=>{const f=T=>{s.removeEventListener("message",z),i.removeEventListener("message",z),clearTimeout(m),T?r(T):c(T)};let w=!1,k=!1;const z=T=>{T.target===s&&(w=!0),T.target===i&&(k=!0),w&&k&&f(!0)};let m=0;s.addEventListener("message",z),i.addEventListener("message",z),m=window.setTimeout(()=>f(!1),bi)}),{port1:l,port2:o}=new MessageChannel,a={action:"set-zip-port"};return s.postMessage({action:"set-port-loader"},[l]),i.postMessage(a,[o]),await u,s.postMessage({action:"set-config",zipSize:N.props.maxZipSizeMB*1024*1024,keepExt:N.props.retainExtension,outputExt:N.outputExt,imageType:N.imageType}),i.addEventListener("message",Ci),s.addEventListener("message",Si),[i,s]}const Si=i=>{const s=i.data,{action:u}=s;switch(u){case"add-zip-completed":{const{fileId:r,entireIndex:c,storedPath:f}=s;return}case"respond-image":{const{url:r,index:c,path:f,size:w,fileId:k}=s;N.ConvStats.convertedImageUrl=r,N.ConvStats.convertedImageSize=w,N.ConvStats.convertedImageIndex=c,N.ConvStats.convertedImageName=f;let z="",m=0,T="";const F=je.get(k);if(k>=0){const p=kt.get(k);z=URL.createObjectURL(p),m=p.size,T=p.webkitRelativePath||p.name}N.ConvStats.convertedImageOrgUrl=z,N.ConvStats.convertedImageOrgSize=m,N.ConvStats.convertedImageOrgName=T,N.ConvStats.convertedImageShrinked=F==null?void 0:F.shrinked;return}case"respond-delete":{const{index:r,success:c,fileId:f}=s;je.get(f).command="❌deleted",je.get(f).completed=!1;return}}switch(u){case"error-push-filelist-zip":const{path:r}=s;N.ConvStats.failedZipDone=!0,N.message.error(`an error occurred "${r}"`,{duration:3e3});return}const{size:l,count:o}=s,a="url"in i.data?i.data.url:"";switch(u){case"push-zip":N.ConvStats.zips.push({url:a,size:l,count:o}),N.ConvStats.zippedTotalCount+=o,N.ConvStats.zippedTotalSize+=l;break;case"squeeze-zip":o>0&&(N.ConvStats.zips.push({url:a,size:l,count:o}),N.ConvStats.zippedTotalCount+=o,N.ConvStats.zippedTotalSize+=l);break;case"push-filelist":N.ConvStats.failedFileZippedCount++;break;case"squeeze-filelist-zip":N.ConvStats.failedZipDone=!0;case"push-filelist-zip":N.ConvStats.failedZips.push({url:a,size:l,count:o});break;case"zip-error":case"zip-squeeze-error":N.ConvStats.zippingErrorCount+=o;break}},Ci=async i=>{const s=i.target,{data:u}=i,{action:l}=u;switch(l){case"list-start":break;case"list-end":break;case"file-start":{const{index:o,path:a,fileId:r}=u;xi(o,a,r);break}case"file-load":{const{thumbnail:o,width:a,height:r,fileId:c,workerId:f,inputsize:w}=u,k=je.get(c);k.core=f,k.command="🖼️loaded",k.width=a,k.height=r,k.size=w,o&&(N.ConvStats.thumbnail=o);break}case"file-converted":{const{index:o,path:a,fileId:r,shrinked:c,outputWidth:f,outputHeight:w,outputsize:k,convertedImageBlob:z}=u,m=je.get(r);m.command="🔃converted",m.shrinked=m.shrinked==null?c:m.shrinked,m.outputWidth=f,m.outputHeight=w,m.outputSize=k,N.ConvStats.converted++;break}case"file-sys-completed":case"file-completed":{const{inputsize:o,outputsize:a,fileId:r,storedPath:c}=u,f=je.get(r);if(f&&(f.command="✅completed",f.completed=!0,f.fileId=r),N.ConvStats.inputTotalSize+=o,N.ConvStats.outputTotalSize+=a,N.ConvStats.done++,N.ConvStats.success++,N.completedFileIdSet.add(r),l==="file-sys-completed"&&(f.zippedIndex=N.completedFileDat.length,N.completedFileDat.push({path:c,id:r})),l==="file-completed"){const{entireIndex:w}=u;f.zippedIndex=w,N.ConvStats.ziplogs[w]={fileId:r,storedPath:c}}break}case"file-retry":{const{index:o,path:a,fileId:r}=u;Ai(o,a,r);break}case"file-error":{const{index:o,path:a,fileId:r}=u;Ii(o,a,r);break}case"file-canceled":{const{fileId:o,path:a}=u;Li(o);break}case"file-skip":{const{fileId:o,path:a}=u;$i(o);break}case"confirm-overwrite":{const{target:o,type:a,path:r,fileId:c,workerId:f}=u,w=await new Promise(k=>N.enqueueOverwriteConfirmation(k,o,a,r));s.postMessage({action:"respond-overwrite",command:w,target:o,path:r,fileId:c,workerId:f,skippedFolderPath:a==="folder"&&w.startsWith("skip")?o:""});break}}};let Ti=0;function xi(i,s,u){const l={key:Ti++,core:-1,index:i,path:s,command:"➡️started"};je.set(u,l),N.ConvStats.logs.push(l),$t.has(u)||N.canceled.value||N.ConvStats.startedCount++}function Ai(i,s,u){const l=je.get(u);l.command="⚠️retry",l.error=!0,N.ConvStats.retried++,$t.set(u,1)}function Ii(i,s,u){const l=je.get(u);N.ConvStats.done++,N.ConvStats.failure++,l.command="❗failed",l.error=!0}function Li(i){const s=je.get(i);N.ConvStats.done++,N.ConvStats.failure++,s.command="❗canceled",s.error=!0}function $i(i){const s=je.get(i);N.ConvStats.done++,N.ConvStats.failure++,s.command="⚠skipped",s.error=!0}async function Fi(i){if(N.fsysDirHandler){const s=N.completedFileDat[i];if(!s)return;const u=s.id;let l="",o=0,a="";if(je.get(u),u>=0){const w=kt.get(u);l=URL.createObjectURL(w),o=w.size,a=w.webkitRelativePath||w.name}N.ConvStats.convertedImageOrgUrl=l,N.ConvStats.convertedImageOrgSize=o,N.ConvStats.convertedImageOrgName=a;const r=s.path,c=await ci(N.fsysDirHandler,r,!0),f=URL.createObjectURL(c);N.ConvStats.convertedImageUrl=f,N.ConvStats.convertedImageSize=c.size,N.ConvStats.convertedImageIndex=i,N.ConvStats.convertedImageName=s.path}else tt==null||tt.postMessage({action:"request-image",index:i})}function Ut(i){tt==null||tt.postMessage({action:"delete-image",index:i})}async function Ei(i,s,u,l){let o=0;for(const a of i){const r=(a.webkitRelativePath||a.name).replace(/^\//,"");if(l.failedZipDone)break;if(u.value)return;o-l.failedFileZippedCount>20&&await new Promise(c=>setTimeout(c,10)),s.postMessage({action:"add-filelist",file:a,path:r}),o++}if(l.failedZipDone){N.message.error("Zipping error files was aborted",{duration:5e3});return}s.postMessage({action:"squeeze-filelist"})}let wt;async function Di(i,s,u,l,o){let a="";const r=document.createElement("canvas"),c=r.getContext("2d");let f=new Nt;const w=[f],k=new Zl,z=u.format,m=u.quality/100,T=[...z.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),F=i.length,p=u.maxZipSizeMB*1024*1024;let $=0,h=null,g="",S="",y=0,x=0,U=0,q=0,H=0,ne=!1;wt=Y=>{const[j,Z]=k.get(Y),R=w[j],ie=R.get(Z,z);o.convertedImageIndex=Y,o.convertedImageName=R.getPathByIndex(Z),o.convertedImageUrl=URL.createObjectURL(ie),o.convertedImageSize=ie.size;let ue="",ce=0,_e="";const Q=O[Y];ue=URL.createObjectURL(Q),ce=Q.size,_e=Q.webkitRelativePath||Q.name,o.convertedImageOrgUrl=ue,o.convertedImageOrgSize=ce,o.convertedImageOrgName=_e};const O=[];for(const Y of i){if(l.value)break;const j=Y.name;let Z="";const R=Y.size,ie=(Y.webkitRelativePath||Y.relativePath||j).replace(/^\//,""),ue=document.createElement("img"),ce={key:U++,core:-1,index:$++,path:ie,command:"➡️start"};o.startedCount=$,o.logs.push(ce),o.logs.length-1,a&&(URL.revokeObjectURL(a),a=""),a=URL.createObjectURL(Y),S=a,y=Y.size,ue.src=a;const _e=await Da(ue).then(()=>!0).catch(()=>!1);if(!ue.complete||!_e||l.value){o.done++,o.failure++,ce.command="❗failed";continue}const Q=ue.width,De=ue.height;r.width=Q,r.height=De,c.drawImage(ue,0,0,Q,De,0,0,Q,De),ce.command="🖼️imgload",ce.width=Q,ce.height=De,ce.size=Y.size,o.thumbnail=ue;const de=await new Promise(ve=>{const Me=Ue=>{h=Ue,ve(Ue)};r.toBlob(Me,z,m)});if(l.value)break;if(!de){o.failure++;continue}x=de.size,o.converted++,ce.outputSize=x;let be="";if(H+x>=p){try{await f.wait(),be=await f.url()}catch{ne=!0,alert("memory problem occurred");break}o.zips.push({url:be,size:H,count:q}),o.zippedTotalCount+=q,o.zippedTotalSize+=H,H=0,q=0,k.split(),f=new Nt,w.push(f)}H+=x;const Le=ie||j;for(let ve=1;ve<255&&(Z=Le.replace(u.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+(ve>1?`(${ve})`:"")+"."+T,!!f.has(Z));ve++);o.done++;try{q++,f.add(Z,de)}catch{continue}k.increase(),O.push(Y),o.inputTotalSize+=R,o.outputTotalSize+=x,o.ziplogs.push({fileId:Y._id,storedPath:Z}),g=Z,ce.zippedIndex=o.success,o.success++,ce.command="✅completed",ce.completed=!0,ce.fileId=Y._id,s.add(Y._id)}if(o.success>0)if(F===1)h&&(o.convertedImageIndex=0,o.convertedImageName=g.replace(/^.*\/(?=[^/]+$)/,"").replace(u.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+T,o.convertedImageUrl=URL.createObjectURL(h),o.convertedImageOrgUrl=S,o.convertedImageOrgSize=y);else try{if(ne)throw new Error("terminated zipping process for memory problems");await f.wait();const Y=await f.url();o.zips.push({url:Y,count:q,size:H}),o.zippedTotalCount+=q,o.zippedTotalSize+=H}catch{}const D={value:!1},C=()=>{D.value=!0,w.forEach(Y=>Y.clear()),w.length=0,O.length=0,wt=null};let le=!1;return{callbackToClearConverter:C,callbackToGenerateFailedZips:async Y=>{le||(le=!0,Oi(Y,p,o,D))}}}function Pi(i){wt==null||wt(i)}async function Oi(i,s,u,l){let o=0,a=0,r=new Nt;for(let c=0;c<i.length;c++){const f=i[c],w=(f.webkitRelativePath||f.name).replace(/^\//,"");if(l.value)return;try{await r.add(w,f)}catch{alert(`an error occurred during access to "${w}"`);break}if(a+=f.size,o++,u.failedFileZippedCount++,a>=s||c===i.length-1){await r.zip();const k=await r.url();u.failedZips.push({url:k,size:a,count:o}),r.clear(),a=0,o=0}}u.failedZipDone=!0}function Da(i){if(typeof i.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((s,u)=>{i.onload=s,i.onerror=u})}const Mi=["href","download","title"],Ui='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',Bi=ye({__name:"thumbnail",props:{src:{},width:{},height:{},maxWidth:{default:100},maxHeight:{default:100},expand:{type:Boolean,default:!1},loading:{type:Boolean},fileName:{},allowNext:{type:Boolean},allowPrev:{type:Boolean},hidden:{type:Boolean}},emits:["load","error","next","prev"],setup(i,{expose:s,emit:u}){const{t:l}=Ze(),o=i,a=u,r=v();v();const c=v(!0),f=v(""),w=v(o.width||100),k=v(o.height||100),z=v(!1),m=Ft({width:w.value+"px",height:k.value+"px",minWidth:"50px",minHeight:"50px"});et(()=>{var S,y,x;(y=(S=r.value)==null?void 0:S.previewInstRef)==null||y.setPreviewSrc(Ui),URL.revokeObjectURL((((x=r.value)==null?void 0:x.imageRef)||{}).src),r.value=null});const T=v(!0);Qa(()=>{T.value=!1}),Ya(()=>{T.value=!0}),we(o,(S,y)=>{m.width=(o.width||100)+"px",m.height=(o.height||100)+"px"}),we(()=>o.src,(S,y)=>{T.value&&$(S)},{immediate:!0}),s({download:h,openPreview:g,active:T});async function F(S){const y=S.target,x=y.naturalWidth,U=y.naturalHeight,{width:q,height:H}=On({width:x,height:U},{width:o.maxWidth||100,height:o.maxHeight||100},o.expand);w.value=q,k.value=H,a("load",{src:y.src,width:x,height:U}),c.value=!1,await new Promise(ne=>setTimeout(ne,100)),!c.value&&(z.value=!0)}function p(S){const y=S.target;a("error",y.src)}async function $(S){c.value=!0,z.value=!1,f.value=S}function h(){const S=document.createElement("a");S.href=f.value,S.download=o.fileName,S.click()}function g(){var S;(S=r.value)==null||S.click()}return(S,y)=>{const x=zn,U=Sn,q=Ce,H=Vt;return Ke((I(),G("div",null,[n(t(Se),null,{trigger:e(()=>[n(H,{show:t(c)||o.loading},{default:e(()=>[n(q,{justify:"center",align:"center",style:pe([t(m),{"line-height":"0px"}])},{default:e(()=>[Ke(_("a",{href:t(f),onClick:y[0]||(y[0]=ct(()=>{},["left","prevent"])),target:"_blank",download:o.fileName,title:o.fileName},[n(Ge,{mode:"in-out"},{default:e(()=>[Ke(n(x,{ref_key:"nImageRef",ref:r,"show-toolbar-tooltip":"",onLoad:F,onError:p,src:t(f),width:t(w),height:t(k),style:{border:"1px solid silver"}},null,8,["src","width","height"]),[[Qe,t(z)]])]),_:1})],8,Mi),[[Qe,!(t(c)||o.loading)]]),Ke(n(U,null,null,512),[[Qe,t(c)||o.loading]])]),_:1},8,["style"])]),_:1},8,["show"])]),default:e(()=>[L(" "+d(o.fileName),1)]),_:1})],512)),[[Qe,!S.hidden]])}}}),pn=Re(Bi,[["__scopeId","data-v-a62add3a"]]),Ri=["href","download","title"],Ni={class:"left-num"},ji={class:"right-num"},Zi=["href","download","title"],Hi={class:"left-num"},Wi={class:"right-num"},Vi=["href","download"],qi=ye({__name:"image-viewer",props:{url:{},originalUrl:{},name:{},originalName:{},size:{},originalSize:{},length:{},index:{},isSingle:{type:Boolean},variousInfo:{}},emits:["demand-image","delete-image","close"],setup(i,{expose:s,emit:u}){const l=at(Ye),o=i,a=u;s({download:De,cleanup:re,openPreview:V,isPreviewing(){return q.value},changeIndex(B){T.value=B}});const r=pt(),{t:c}=Ze();Et();const f=v(),w=v(),k=v(),z=dt("viewerItemContainer"),m=v(!0),T=v(Math.max(o.index,0)+1),F=v(1),p=v(1),$=v(""),h=v(""),g=v(1),S=v(1),y=v(!1),x=v(!1),U=v(!1),q=ze(()=>{var B,P;return(P=(B=k.value)==null?void 0:B.previewInstRef)==null?void 0:P.displayed}),H=ze(()=>{var B,P;return((P=(B=k==null?void 0:k.value)==null?void 0:B.previewInstRef)==null?void 0:P.previewSrc)===$.value}),ne=ze(()=>T.value<o.length),O=ze(()=>T.value>1),D=v("viewer-item-init"),C=v(0),le=v(!0);v({width:"auto",height:"auto"});const J=v(!1);Be(()=>{document.body.addEventListener("keydown",ce),document.body.addEventListener("keydown",ue),R(T.value-1),ie()}),et(()=>{clearTimeout(Y),document.body.removeEventListener("keydown",ce),document.body.removeEventListener("keydown",ue),J.value=!0}),At(()=>{URL.revokeObjectURL(o.url),URL.revokeObjectURL(o.originalUrl)});let Y=-1;we(T,(B,P)=>{T.value<1||T.value>o.length||B===P||(clearTimeout(Y),B>P?D.value="viewer-item-next":D.value="viewer-item-prev",Y=setTimeout(()=>{o.index!==T.value-1&&(C.value=m.value?C.value:~C.value,le.value=!1,R(T.value-1))},50))});let j="",Z="";we(()=>o.url,()=>{var b,E;let B="";o.index===0&&m.value?(m.value=!1,T.value=1,B=o.url):o.index===T.value-1?(m.value=!1,y.value=!1,B=o.url):(URL.revokeObjectURL(o.url),URL.revokeObjectURL(o.originalUrl));const P=j,te=Z;if(URL.revokeObjectURL(P),URL.revokeObjectURL(te),j=o.url,Z=o.originalUrl,B){try{if((E=(b=k.value)==null?void 0:b.previewInstRef)!=null&&E.displayed){H.value?k.value.previewInstRef.setPreviewSrc(B):k.value.previewInstRef.setPreviewSrc(o.originalUrl);try{const ee=k.value.previewInstRef.displayed;k.value.previewInstRef.handleAfterLeave(),k.value.previewInstRef.displayed=ee}catch{}}}catch{}$.value=B,h.value=o.originalUrl}},{immediate:!0});function R(B){y.value=!0,x.value=!1,U.value=!1,Fe(()=>a("demand-image",B))}function ie(){if(!l.IS_SP)return;let B=z.value.$el,P=0,te=0,b=0,E=0,ee=0;const he=oe=>{P=oe.touches[0].pageX,te=oe.touches[0].pageY,ee=Date.now()};B.addEventListener("touchstart",he);const M=oe=>{b=oe.touches[0].pageX,E=oe.touches[0].pageY,K()};window.addEventListener("touchmove",M);const A=()=>{K();const oe=b-P,ae=Math.abs(oe),me=E-te,ge=Math.abs(me);ae<ge||ae<30||be(oe>0?-1:1)};window.addEventListener("touchend",A);const K=()=>{const oe=Date.now();oe-ee>500&&(P=b,te=E),ee=oe};et(()=>{B.removeEventListener("touchstart",he),window.removeEventListener("touchmove",M),window.removeEventListener("touchend",A),B=null})}function ue(B){var P,te,b,E;if(B.key==="Escape")try{(te=(P=k.value)==null?void 0:P.previewInstRef)!=null&&te.displayed&&(B.stopPropagation(),(E=(b=k.value)==null?void 0:b.previewInstRef)==null||E.toggleShow(!1))}catch{}}function ce(B){switch(B.code){case"ArrowRight":be(1);break;case"ArrowLeft":be(-1);break;case"Home":T.value=1;break;case"End":T.value=o.length;break;case"Space":case"Enter":case"NumpadEnter":if(!q.value)return;ve();break;case"ArrowUp":case"ArrowDown":default:return}B.stopPropagation(),B.preventDefault()}function _e({width:B,height:P}){F.value=B,p.value=P,x.value=!0}function Q({width:B,height:P}){g.value=B,S.value=P,U.value=!0}function De(){H.value?f.value.download():w.value.download()}async function de(B){try{const P=await fetch(B).then(te=>te.blob()).then(te=>new Promise(b=>{const E=new FileReader;E.onload=b,E.readAsDataURL(te)})).then(te=>te.target.result);navigator.clipboard.writeText(P),r.info({title:c("copiedDataURLDialogTitle"),content:()=>se("div",[se("div",c("copiedDataURLMessage"))]),positiveText:"OK"})}catch{r.error({title:"failed to copy Data URL",content:"could not copy Data URL",positiveText:"OK"})}}function be(B){B>0?T.value=Math.min(o.length,T.value+B)|0:B<0&&(T.value=Math.max(1,T.value+B)|0)}let Le="";const ve=()=>{var P,te,b,E;Le=(b=window.getComputedStyle((te=(P=k==null?void 0:k.value)==null?void 0:P.previewInstRef)==null?void 0:te.previewRef))==null?void 0:b.transform;const B=H.value;(E=k==null?void 0:k.value)==null||E.next(),Fe(()=>{var ee;H.value===B&&((ee=k==null?void 0:k.value)==null||ee.next())})};function Me(){try{Fe(()=>k.value.previewInstRef.previewRef.style.transform=Le)}catch{}}function Ue({nodes:B}){const P=se(Tn,{color:H.value?"green":"gray",offset:[-20,-12],value:H.value?c("status.Converted"):c("status.Original")},()=>se(Ee,{round:!0,onClick(){ve()},textColor:"white",size:"small",style:{marginLeft:"4px"}},{icon:()=>se(H.value?tl:nl)}));B.next=se(Ee,{onClick(){be(1)},disabled:!ne.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>se(on)}),B.prev=se(Ee,{onClick(){be(-1)},disabled:!O.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>se(ol)});try{const te=B.download.children;te.default=()=>c("save");const b=te.trigger();b.props.onClick=De,te.trigger=()=>b}catch{}return qe(),[P,...Object.values(B)]}const ke="#pathbox-"+String(Math.random()).substring(2);let Oe;function qe(){var B,P,te;try{if(Oe=(te=(P=(B=k.value)==null?void 0:B.previewInstRef)==null?void 0:P.previewWrapperRef)==null?void 0:te.parentNode,!Oe||Oe.querySelector(ke))return;let b=se("div",{id:ke,onMousedown:E=>{E.stopPropagation()},className:"__preview-injected-pathbox"+(H.value?" converted":"")},[se("div",`${String(T.value).padStart(String(o.length).length,"0")}/${String(o.length).padStart(String(o.length).length,"0")}`),se("div",We(H.value?o.size:o.originalSize,0)),se("div",H.value?o.name:o.originalName)]);an(b,Oe),b=null}catch{}}et(()=>{Oe&&(an(null,Oe),Oe=null)});function V(){f.value.openPreview()}function re(){}return(B,P)=>{const te=xe,b=Ce,E=Cn,ee=lt,he=Dt,M=Xa;return I(),X(b,{justify:"center",align:"stretch",vertical:"",style:pe([{visibility:m.value?"hidden":"visible"},{overflow:"visible"}]),class:"body",ref:"body"},{default:e(()=>[n(M,{ref_key:"nImageGroupRef",ref:k,"show-toolbar-tooltip":"","render-toolbar":Ue,onPreviewNext:Me},{default:e(()=>[n(b,{wrap:!1,align:"center",justify:"space-between",style:{overflow:"visible"}},{default:e(()=>[n(t(Ee),{onClick:P[0]||(P[0]=A=>be(-1)),bordered:!1,disabled:!t(O),class:nt({"thumb-arrow":!0,pale:!t(O)}),title:B.$t("Prev")},{icon:e(()=>[n(te,{size:"30"},{default:e(()=>[n(t(Ja))]),_:1})]),_:1},8,["disabled","class","title"]),n(b,{justify:"center",ref_key:"viewerItemContainer",ref:z,class:"viewer-item-container",style:{width:"100%"}},{default:e(()=>[n(Ge,{name:D.value},{default:e(()=>[(I(),X(b,{vertical:"",key:C.value},{default:e(()=>[n(b,{align:"center",wrap:!1},{default:e(()=>[n(b,{vertical:""},{default:e(()=>[n(b,{align:"center",justify:"center",wrap:!1},{default:e(()=>[n(b,{align:"center",justify:"center",vertical:"",class:"original-thumb"},{default:e(()=>[_("a",{href:B.originalUrl,onClick:P[4]||(P[4]=ct(A=>{w.value.openPreview()},["prevent"])),download:B.originalName,title:B.originalName,class:"imglink"},[n(b,{align:"center",justify:"center",wrap:!1},{default:e(()=>[n(pn,{ref:A=>{A!=null&&A.active&&(w.value=A)},src:h.value,width:1,"max-width":1,"max-height":1,loading:y.value,"file-name":B.originalName,"allow-next":T.value<o.length,"allow-prev":T.value>1,onLoad:Q,onNext:P[1]||(P[1]=A=>be(1)),onPrev:P[2]||(P[2]=A=>be(-1)),hidden:!0},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(b,{vertical:"",align:"center"},{default:e(()=>[n(b,{class:"imglink-label"},{default:e(()=>[L(d(t(c)("status.Original")),1)]),_:1}),n(b,{justify:"center",class:"img-size",wrap:!1,size:2},{default:e(()=>[_("span",Ni,d(U.value?g.value:"?"),1),P[11]||(P[11]=L(" × ")),_("span",ji,d(U.value?S.value:"?"),1)]),_:1,__:[11]}),n(b,{justify:"center"},{default:e(()=>[P[3]||(nn(-1,!0),(P[3]=n(b,null,{default:e(()=>[L(d(U.value?t(We)(o.originalSize,0):"?"),1)]),_:1})).cacheIndex=3,nn(1),P[3])]),_:1})]),_:1})]),_:1})],8,Ri)]),_:1}),n(b,{vertical:"",align:"center",class:"original-thumb"},{default:e(()=>[n(te,{size:"20",color:"silver",component:t(on)},null,8,["component"])]),_:1}),_("a",{href:$.value,onClick:P[5]||(P[5]=ct(A=>V(),["prevent"])),download:o.name,title:o.name,class:"imglink"},[n(b,{vertical:"",align:"center",justify:"center"},{default:e(()=>[n(b,{class:"imglink-label"},{default:e(()=>[L(d(t(c)("status.Converted")),1)]),_:1}),n(b,{vertical:"",align:"center",justify:"center",size:0},{default:e(()=>[n(b,{justify:"center"},{default:e(()=>{var A;return[n(b,{wrap:!1,style:pe((A=o.variousInfo)!=null&&A.shrinked?{color:"blue"}:{}),class:"img-size",size:2},{default:e(()=>[_("span",Hi,d(x.value?F.value:"?"),1),P[12]||(P[12]=L(" × ")),_("span",Wi,d(x.value?p.value:"?"),1)]),_:1,__:[12]},8,["style"])]}),_:1})]),_:1}),n(b,{justify:"center"},{default:e(()=>[L(d(x.value?t(We)(o.size,0):"?"),1)]),_:1})]),_:1})],8,Zi)]),_:1}),n(b,{ref:"fileNameContainer",justify:"center",align:"center",class:"pathbox",title:o.name,style:{overflow:"hidden"}},{default:e(()=>[n(E,{"x-scrollable":!0,trigger:"hover",style:{"text-align":"center","font-size":"smaller",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},{default:e(()=>[L(d(x.value?o.name:"?"),1)]),_:1})]),_:1},8,["title"])]),_:1}),n(b,{vertical:"",style:{overflow:"visible"}},{default:e(()=>[n(pn,{ref:A=>{A!=null&&A.active&&(f.value=A)},src:$.value,width:142,"max-width":140,"max-height":100,loading:y.value,"file-name":o.name,"allow-next":T.value<o.length,"allow-prev":T.value>1,onLoad:_e,onNext:P[6]||(P[6]=A=>be(1)),onPrev:P[7]||(P[7]=A=>be(-1))},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(b,{justify:"center",align:"center",wrap:!1},{default:e(()=>[n(ee,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:e(()=>[_("a",{href:o.url,ref:"saveImg",target:"_blank",download:o.name,style:{"line-height":"1em"}},[n(t(Ee),{disabled:!x.value,round:"",size:"tiny"},{default:e(()=>[L(d(B.$t("save")),1)]),_:1},8,["disabled"])],8,Vi)]),default:e(()=>[L(" "+d(B.$t("save")),1)]),_:1}),n(ee,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:e(()=>[n(t(Ee),{disabled:!x.value,onClick:P[8]||(P[8]=A=>de(o.url)),round:"",size:"tiny"},{default:e(()=>P[13]||(P[13]=[L("DataURL")])),_:1,__:[13]},8,["disabled"])]),default:e(()=>[L(" "+d(B.$t("convertedImageDataUrlTooltip")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1},8,["name"])]),_:1},512),n(t(Ee),{bordered:!1,onClick:P[9]||(P[9]=A=>be(1)),disabled:!t(ne),class:nt({"thumb-arrow":!0,next:!0,pale:!t(ne)}),title:B.$t("Next")},{icon:e(()=>[n(te,{size:"30"},{default:e(()=>[n(t(el))]),_:1})]),_:1},8,["disabled","class","title"])]),_:1}),B.isSingle?fe("",!0):(I(),X(b,{key:0,justify:"center",align:"center",wrap:!1,size:4},{default:e(()=>[n(he,{value:T.value,"onUpdate:value":P[10]||(P[10]=A=>T.value=A),tooltip:!1,step:1,min:1,max:o.length,keyboard:!1,class:"index-slider"},null,8,["value","max"]),n(b,{class:"index",align:"center",justify:"center",wrap:!1,size:3},{default:e(()=>[n(b,null,{default:e(()=>[L(d(t(c)("status.index"))+":",1)]),_:1}),n(b,{justify:"end",align:"center",class:"counter"},{default:e(()=>[L(d(T.value),1)]),_:1}),n(b,null,{default:e(()=>P[14]||(P[14]=[L("/")])),_:1,__:[14]}),n(b,{justify:"start",align:"center",class:"counter"},{default:e(()=>[L(d(o.length),1)]),_:1})]),_:1})]),_:1}))]),_:1},512)]),_:1},8,["style"])}}}),Gi=Re(qi,[["__scopeId","data-v-493984f3"]]),Ki={key:0},Qi={style:{}},Yi={key:1},Xi={key:2,style:{color:"red"}},Ji={key:1,style:{width:"106px",height:"80px",opacity:"0.15",border:"1px solid gray"}},er=ye({__name:"status.progress",props:{processing:{type:Boolean},successPerc:{},elapsedTime:{},threads:{},fileType:{},shrink:{},zipSize:{},outputToDir:{type:Boolean},inputTotalSize:{},outputTotalSize:{},rateColor:{},difColor:{},totalSizeDifStr:{},thumbnail:{},opened:{type:Boolean}},setup(i){const s=i,u=v(null),l={W:110,H:80};let o;return we(()=>[s.thumbnail,s.opened],()=>{if(!s.thumbnail||!s.opened||s.thumbnail===o||!u.value)return;const{width:a,height:r}=On(s.thumbnail,{width:l.W,height:l.H});u.value.width=a,u.value.height=r,u.value.style.width=a+"px",u.value.style.height=r+"px",s.thumbnail instanceof HTMLImageElement?u.value.getContext("2d").drawImage(s.thumbnail,0,0,a,r):(u.value.getContext("bitmaprenderer").transferFromImageBitmap(s.thumbnail),o=s.thumbnail,s.thumbnail.close())}),(a,r)=>{const c=Ce,f=al,w=ft;return I(),X(w,{name:"progress",style:{"white-space":"nowrap"}},{header:e(({collapsed:k})=>[n(c,{align:"center"},{default:e(()=>[L(d(a.$t("status.Progress"))+" ",1),k?(I(),G(Pe,{key:0},[L(" ("+d(a.successPerc|0)+"%) ",1)],64)):fe("",!0)]),_:2},1024)]),default:e(()=>[n(c,{justify:"center",align:"center",size:0,wrap:!1,style:{"white-space":"nowrap","margin-top":"-1em","padding-bottom":"5px"}},{default:e(()=>[r[0]||(r[0]=_("div",{class:"grow"},null,-1)),n(c,{justify:"center",class:"grow",wrap:!1,style:{"z-index":"1"}},{default:e(()=>[n(c,{vertical:"",justify:"center",class:"left-column"},{default:e(()=>[n(f,{"tabular-nums":"",label:a.$t("status.elapsedTime")},{default:e(()=>[n(c,null,{default:e(()=>[L(d(a.elapsedTime),1)]),_:1})]),_:1},8,["label"]),n(f,{"tabular-nums":"",label:a.$t("status.multiThreading")},{default:e(()=>[n(c,{style:pe({color:a.threads?"":"red",fontSize:"0.7rem"})},{default:e(()=>[L(d(a.threads?a.$rt("{n} @:threads",a.threads):a.$t("disabled")),1)]),_:1},8,["style"])]),_:1},8,["label"]),n(f,{"tabular-nums":"",label:a.$t("status.outputSettings")},{default:e(()=>[n(c,{vertical:"",justify:"end",style:{"font-size":"0.6rem","line-height":"0.6rem"}},{default:e(()=>[_("div",null,d(a.$t("settings.imageType"))+": "+d(a.fileType),1),a.shrink?(I(),G("div",Ki,[L(d(a.$t("status.Shrinking"))+": ",1),_("span",Qi,d(a.shrink[0])+"×"+d(a.shrink[1]),1)])):fe("",!0),a.outputToDir?(I(),G("div",Xi,d(a.$t("status.outputToDir")),1)):(I(),G("div",Yi,"Zip: "+d(a.zipSize)+"MB",1))]),_:1})]),_:1},8,["label"])]),_:1}),st(a.$slots,"center",{},void 0,!0),n(c,{vertical:"",style:{height:"100%"},justify:"center",class:"right-column"},{default:e(()=>[n(f,{"tabular-nums":"",label:a.$t("status.inputSize")},{default:e(()=>[n(c,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:e(()=>[L(d((a.inputTotalSize/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(f,{"tabular-nums":"",label:a.$t("status.outputSize")},{default:e(()=>[n(c,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:e(()=>[L(d((a.outputTotalSize/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(f,{"tabular-nums":"",label:a.$t("status.outInRate")},{default:e(()=>[n(c,{vertical:"",align:"end",justify:"start",style:{"font-size":"0.8em","font-family":"v-mono","line-height":"50%"}},{default:e(()=>[_("span",{style:pe({color:a.rateColor,fontSize:"larger"})},"× "+d((a.outputTotalSize/a.inputTotalSize||1).toFixed(2)),5),_("span",{style:pe({color:a.difColor})},"("+d(a.totalSizeDifStr)+")",5)]),_:1})]),_:1},8,["label"])]),_:1})]),_:3}),n(c,{class:"thumb-container",align:"center",style:{position:"relative"}},{default:e(()=>[n(c,{justify:"center",align:"center",class:"grow thumbnail",style:pe({width:l.W+"px",height:l.H+"px"})},{default:e(()=>[n(Ge,{name:"fade",mode:"out-in"},{default:e(()=>[a.processing?(I(),G("canvas",{key:0,ref_key:"thumbcanvas",ref:u,width:"106",height:"80",class:"thumb-canvas"},null,512)):(I(),G("div",Ji))]),_:1})]),_:1},8,["style"])]),_:1})]),_:3,__:[0]})]),_:3})}}}),tr=Re(er,[["__scopeId","data-v-51e086be"]]),nr={class:"status-table"},or={class:"started"},ar={class:"mini-counter"},lr={class:"failure"},sr={class:"mini-counter"},ir={colspan:"2"},rr={class:"completed"},ur={class:"main-counter"},cr={class:"total"},dr={class:"main-counter"},pr=ye({__name:"status.progress-center",props:{processing:{type:Boolean},interval:{},statusColor:{},success:{},successTo:{},successFrom:{},index:{},length:{},failure:{},retried:{},successPercTo:{},successPercFrom:{}},setup(i){const s=i,u=Et(),l=v(u.value.successColor),o=v(!1);return we(()=>s.processing,a=>{a||(s.success===s.length?o.value=!0:l.value=u.value.errorColor)}),(a,r)=>{const c=lt,f=xe,w=wn,k=Ce,z=xn;return I(),X(z,{type:"multiple-circle","stroke-width":2,percentage:[a.successTo/a.length*100|0,a.index/a.length*100|0],color:[t(u).successColor,a.statusColor],"rail-style":[{stroke:t(l),opacity:.3}],style:{width:"12em"}},{default:e(()=>[n(k,{vertical:"",align:"center",justify:"center",size:0,style:{"white-space":"nowrap"},wrap:!1,"wrap-item":!1},{default:e(()=>[_("table",nr,[_("tbody",null,[_("tr",or,[_("td",null,d(a.$t("status.started"))+":",1),_("td",ar,[n(c,{trigger:"hover",style:pe({color:t(u).infoColor}),placement:"left"},{trigger:e(()=>[_("span",{style:pe({color:t(u).infoColor})},d(a.index.toLocaleString("en-us")),5)]),default:e(()=>[L(" "+d(a.$t("status.progressStarted"))+" ("+d(a.index.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])])]),_("tr",lr,[_("td",null,d(a.$t("status.failure"))+":",1),_("td",sr,[n(c,{trigger:"hover",style:pe({color:t(u).errorColor}),placement:"left"},{trigger:e(()=>[_("span",{style:pe({color:t(u).errorColor})},d(a.failure.toLocaleString("en-us")),5)]),default:e(()=>[L(" "+d(a.$t("status.progressErrors"))+" ("+d(a.failure.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"]),a.retried>0?(I(),X(c,{key:0,trigger:"hover",style:pe({color:t(u).warningColor}),placement:"left"},{trigger:e(()=>[_("span",{style:pe({color:t(u).warningColor})}," ("+d(a.retried.toLocaleString("en-us"))+") ",5)]),default:e(()=>[L(" "+d(a.$t("status.progressRetries"))+" ("+d(a.retried.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):fe("",!0)])]),_("tr",null,[_("td",ir,[n(k,{size:0,align:"center",justify:"center",style:pe({color:a.processing?a.statusColor:t(l)}),wrap:!1,class:"percent"},{default:e(()=>[t(o)?(I(),X(f,{key:0,component:t(ll)},null,8,["component"])):fe("",!0),n(w,{duration:a.interval*3|0,from:a.successPercFrom|0,to:a.successPercTo|0,active:!0},null,8,["duration","from","to"]),r[0]||(r[0]=L("% "))]),_:1,__:[0]},8,["style"])])]),_("tr",rr,[_("td",null,d(a.$t("status.success"))+":",1),_("td",ur,[n(c,{trigger:"hover",duration:0,delay:0,style:pe({color:t(u).successColor}),placement:"bottom"},{trigger:e(()=>[_("span",{style:pe({color:t(u).successColor})},[n(w,{duration:a.interval*3|0,from:a.successFrom,to:a.successTo,active:!0,"show-separator":!0},null,8,["duration","from","to"])],4)]),default:e(()=>[L(" "+d(a.$t("status.progressSuccess"))+" ("+d(a.successTo.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])])]),_("tr",cr,[_("td",null,d(a.$t("status.all"))+":",1),_("td",dr,[n(c,{trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:e(()=>[L(d(a.length.toLocaleString("en-us")),1)]),default:e(()=>[L(" "+d(a.$t("status.progressTotal"))+" ("+d(a.length.toLocaleString("en-us"))+") ",1)]),_:1})])])])])]),_:1})]),_:1},8,["percentage","color","rail-style"])}}}),fr={key:0,class:"log-table",ref:"table"},gr={class:"log-tr label"},mr=["title"],vr={style:{"min-width":"7em"},class:"log-th"},hr={style:{"padding-left":"2em"},class:"log-th"},yr=["data-index-loglist"],_r={class:"log-td"},wr={class:"log-td"},br={class:"log-td"},kr={class:"log-td"},zr={key:0,class:"log-td log-extra",style:{"padding-left":"0.5em"}},Sr={key:0},Cr={key:1,style:{color:"blue"}},Tr={key:1},fn=2,gn=3e3,Bt=80,xr=100,Ar=ye({__name:"status.log",props:Ve({processing:{type:Boolean},opened:{type:Boolean},previewCollapsed:{type:Boolean},logs:{},imageIndex:{}},{expanded:{type:Boolean,required:!1},expandedModifiers:{},"auto-scroll":{type:Boolean,required:!1},"auto-scrollModifiers":{},order:{required:!1,default:"processed"},orderModifiers:{}}),emits:Ve(["open-preview","change-index"],["update:expanded","update:auto-scroll","update:order"]),setup(i,{emit:s}){const{t:u}=Ze(),l=i,o=Te(i,"expanded"),a=Te(i,"auto-scroll"),r=s;dt("table");const c=dt("tbody"),f=v(),w=v(null),k=v(40),z=ze(()=>o.value?k.value:Bt),m=v(Bt),T=ze(()=>{let b=l.logs;switch(S.value){case"success":b=b.filter(E=>E.completed);break;case"error":b=b.filter(E=>!E.completed);break}return b}),F=Vl(!1),$=v([{type:"group",label:()=>u("status.sort"),key:"sort",children:[{label:()=>u("status.sortByStart"),value:"processed"},{label:()=>u("status.sortByCompletion"),value:"zipped"},{label:()=>u("status.sortByName"),value:"name"},{label:()=>u("status.sortBySize"),value:"size"},{label:()=>u("status.sortByOutputSize"),value:"outputsize"},{label:()=>u("status.sortByStatus"),value:"status"}]}]),h=Te(i,"order");we(h,()=>{Ue()});const g=[{label:()=>u("status.showAll"),value:""},{label:()=>u("status.showOnlySuccess"),value:"success"},{label:()=>u("status.showOnlyError"),value:"error"}],S=v(g[0].value);let y;Be(()=>{y=rl(),O(),window.addEventListener("resize",()=>O());const b=new ResizeObserver(()=>O());b.observe(y.parent.parent.vnode.el),et(()=>{window.removeEventListener("resize",()=>O()),b.disconnect()})}),et(()=>{clearTimeout(q),clearTimeout(ce),clearTimeout(C)});let x=0;we(()=>l.imageIndex,b=>U(b));async function U(b){var A;const E=b||l.imageIndex;let ee=T.value.findIndex(K=>K.zippedIndex===E);ee===-1&&(ee=E);const he=ee<=Z.value,M=ee>Z.value+R.value;if(he||M){const K=ee*ie.value-(M?z.value:0);(A=f.value)==null||A.scrollTo({behavior:"instant",top:K,left:V}),await Fe(),de(!0),await Fe()}Fe(()=>{var oe,ae;let K=w.value;K&&(x>ee&&(K=K.previousSibling||K,K instanceof HTMLElement||((oe=f.value)==null||oe.scrollTo(V,0),K=null)),(ae=K==null?void 0:K.scrollIntoView)==null||ae.call(K,{behavior:"instant",block:"nearest"}),x=ee)})}we(()=>l.opened,b=>{Fe(()=>{b&&(U(),de())})});let q;const H=v(document.documentElement.clientHeight),ne=v(100);function O(){clearTimeout(q),q=setTimeout(()=>{if(!l.opened||!f.value)return;const b=f.value.$parent.$el.offsetHeight,E=window.innerHeight-y.parent.parent.parent.parent.parent.vnode.el.offsetHeight-8,ee=Math.min(ie.value*Math.max(5,l.logs.length+2),Math.max(200,b+E));H.value=document.documentElement.clientHeight,ne.value=Math.min(ie.value*Math.max(5,l.logs.length),Math.max(Bt,ee)),l.opened&&(k.value=Math.max(ee,m.value))},100)}function D(){J(!0),O(),F.value=!0}let C=0,le=!1;function J(b=!1){if(!le){if(C){le=!0;return}Fe(()=>{!b&&!a.value||(f.value.scrollTo({behavior:"instant",top:l.logs.length*50,left:V}),C=window.setTimeout(()=>{C=0,le&&(le=!1,J())},xr))})}}const Y=v({height:"0px"}),j=v({height:"0px"}),Z=v(0),R=ze(()=>z.value/ie.value+fn*2|0),ie=v(15);let ue=0,ce=0,_e=0,Q=-999,De=-1;function de(b){const E=Date.now();if(b!==!0){if(ce)return;if(E-_e<30){ce=window.setTimeout(()=>{ce=0,de()},30-(E-_e));return}}_e=E,!ue&&l.logs.length&&(ue=c.value.rows[1].offsetHeight,ie.value=ue);const ee=T.value.length,M=f.value.scrollbarInstRef.containerRef.scrollTop;if(!b&&ee===De&&Math.abs(M-Q)<ie.value*.5)return;Q=M,De=ee;const A=Math.max(0,(M/ie.value|0)-fn);Z.value=A,Y.value.height=A*ie.value+"px",j.value.height=Math.max(0,ee-(A+R.value))*ie.value+"px"}function be(){var b;(b=f.value)==null||b.scrollTo(0,0),de()}we(()=>l.logs,()=>{l.opened&&(Fe(de),a.value&&J(),Me())});let Le=0,ve=0;function Me(){if(h.value==="processed"||!h.value)return;const b=Date.now();if(b-ve<gn){if(Le)return;Le=window.setTimeout(Me,gn-(b-ve));return}Le=0,ve=b,Ue()}function Ue(){switch(h.value){case"zipped":l.logs.sort((b,E)=>b.zippedIndex-E.zippedIndex);break;case"status":l.logs.sort((b,E)=>b.command>E.command?1:-1);break;case"name":l.logs.sort((b,E)=>b.path>E.path?1:-1);break;case"size":l.logs.sort((b,E)=>b.size-E.size);break;case"outputsize":l.logs.sort((b,E)=>b.outputSize-E.outputSize);break;case"processed":default:l.logs.sort((b,E)=>b.index-E.index);break}}function ke(b){const E=l.logs,ee=E.findIndex(ae=>ae.zippedIndex===l.imageIndex);let he=0,M=1;switch(b.code){case"ArrowUp":he=-1;break;case"ArrowDown":he=1;break;case"PageUp":he=-1,M=z.value/ie.value-1|0;break;case"PageDown":he=1,M=z.value/ie.value-1|0;break;case"Enter":case"NumpadEnter":if(ee>=0&&l.previewCollapsed){Fe(()=>r("open-preview")),b.stopPropagation(),b.preventDefault();return}break;default:return}let A=ee,K=-1;const oe=E.length;do{if(A+=he,A<0||A>oe-1||A===ee)break;if(E[A].completed){if(K=A,--M>0)continue;break}}while(!0);if(K>=0){const ae=E[K];r("change-index",!0,ae.path,ae.fileId,ae.zippedIndex),b.preventDefault()}}let Oe=-1,qe=-1,V=0,re=!1;function B(b){var he,M;if(de(),re){re=!1;return}const{scrollLeft:E=0,scrollTop:ee=0}=(M=(he=f.value)==null?void 0:he.scrollbarInstRef)==null?void 0:M.containerRef;(E!==Oe||Oe<0)&&(ee===qe||qe<0)&&(V=E),Oe=E,qe=ee,Fe(()=>{var K,oe;re=!0;const A=(oe=(K=f.value)==null?void 0:K.scrollbarInstRef)==null?void 0:oe.containerRef;A&&(A.scrollLeft=V)})}function P(b){a.value=!1}function te(b,E){var ae,me;const he=(me=(ae=b.target.closest("tr"))==null?void 0:ae.dataset)==null?void 0:me.indexLoglist;if(!/^\d+$/.test(he))return;const{completed:M,path:A,fileId:K,zippedIndex:oe}=T.value[he];M&&(l.imageIndex!==oe&&r("change-index",M,A,K,oe),E&&r("open-preview"))}return(b,E)=>{const ee=Ce,he=xe,M=Pt,A=Tt,K=Se,oe=Dt,ae=lt,me=ft;return I(),X(me,{name:"log",style:{"white-space":"nowrap"}},{header:e(()=>[n(ee,{align:"center",wrap:!1},{default:e(()=>[L(d(b.$t("status.Log")),1)]),_:1})]),"header-extra":e(()=>[l.opened?(I(),X(ee,{key:0,align:"center",justify:"end",wrap:!0,style:{"margin-top":"0.2em","margin-left":"0.5em"}},{default:e(()=>[n(M,{value:h.value,"onUpdate:value":[E[0]||(E[0]=ge=>h.value=ge),Ue],options:t($),style:{width:"auto"},"consistent-menu-width":!1,"show-on-focus":!1,size:"tiny"},{arrow:e(()=>[n(he,{component:t(sl)},null,8,["component"])]),_:1},8,["value","options"]),n(M,{value:t(S),"onUpdate:value":[E[1]||(E[1]=ge=>Ie(S)?S.value=ge:null),E[2]||(E[2]=ge=>be())],options:g,placeholder:b.$t("status.filterLogSelect"),size:"tiny",style:{width:"auto"},"consistent-menu-width":!1,"show-on-focus":!1},{arrow:e(()=>[n(he,{component:t(il)},null,8,["component"])]),_:1},8,["value","placeholder"]),n(A,{key:"b",checked:a.value,"onUpdate:checked":[E[3]||(E[3]=ge=>a.value=ge),E[4]||(E[4]=ge=>ge&&J(!0))],size:"small",style:{"font-size":"0.9em"}},{default:e(()=>[L(d(b.$t("status.autoScroll")),1)]),_:1},8,["checked"]),n(ae,{trigger:"hover",show:t(F),disabled:!o.value,placement:"top",delay:0,duration:1e3},{trigger:e(()=>[n(K,{style:{"max-width":"30em"},disabled:!0},{trigger:e(()=>[n(A,{size:"small",checked:o.value,"onUpdate:checked":[E[5]||(E[5]=ge=>o.value=ge),D],style:{"font-size":"0.9em"}},{default:e(()=>[L(d(b.$t("status.expandLog")),1)]),_:1},8,["checked"])]),default:e(()=>[L(d(b.$t("status.expandLog")),1)]),_:1})]),default:e(()=>[n(ee,{wrap:!1,align:"center",style:{"font-size":"0.8em"}},{default:e(()=>[n(oe,{value:t(m),"onUpdate:value":E[6]||(E[6]=ge=>Ie(m)?m.value=ge:null),onUpdateValue:E[7]||(E[7]=ge=>O()),disabled:!o.value,"format-tooltip":ge=>`Log size: ${ge}`,tooltip:!0,step:1,min:t(ne),max:t(H),style:{"z-index":"3",width:"100px"}},null,8,["value","disabled","format-tooltip","min","max"])]),_:1})]),_:1},8,["show","disabled"])]),_:1})):fe("",!0)]),default:e(()=>[n(ee,{wrap:!1,align:"stretch",class:nt({"log-container":1,"expand-log":o.value}),style:pe({height:t(z)+"px"}),onKeydown:ke,tabindex:"-1"},{default:e(()=>[n(t(Cn),{ref_key:"scrollref",ref:f,distance:10,"x-scrollable":!0,onMousedownCapture:P,onWheel:E[9]||(E[9]=ge=>a.value=!1),onScroll:B,load:"handleLogLoad",trigger:"none",style:pe([{"z-index":"2","padding-right":"10px",height:"100%"},{height:t(z)+"px"}]),size:50},{default:e(()=>[l.opened?(I(),G("table",fr,[_("thead",null,[_("tr",gr,[_("th",{class:"log-th",title:b.$t("status.table.core")},"th",8,mr),E[10]||(E[10]=_("th",{class:"log-th"},"no.",-1)),_("th",vr,d(b.$t("status.table.status")),1),_("th",hr,d(b.$t("status.table.details")),1),E[11]||(E[11]=_("th",{class:"log-th"},"size",-1))])]),_("tbody",{ref:"tbody",onClick:te,onDblclick:E[8]||(E[8]=ge=>te(ge,!0))},[_("tr",{style:pe(t(Y))},null,4),(I(!0),G(Pe,null,it(t(T).slice(t(Z),t(Z)+t(R)),({index:ge,key:He,command:Xe,path:gt,core:$e,zippedIndex:rt,completed:mt,fileId:Je,shrinked:Ma,width:Jt,height:Ua,outputWidth:Ba,outputHeight:Ra,size:Na,outputSize:en},tn)=>(I(),G("tr",{key:He,class:nt({"log-tr":1,completed:mt,selected:b.imageIndex===rt,stripe:(t(Z)+tn)%2}),ref_for:!0,ref:ja=>{b.imageIndex===rt&&(w.value=ja)},"data-index-loglist":t(Z)+tn},[_("td",_r,d($e>=0?$e+1:"-"),1),_("td",wr,d(ge+1),1),_("td",br,d(Xe),1),_("td",kr,d(gt),1),Jt?(I(),G("td",zr,[L(d(`[${Jt}×${Ua}] (${t(We)(Na,0)})`)+" ",1),en?(I(),G("span",Sr,[E[12]||(E[12]=L(" → ")),_("span",null," ("+d(t(We)(en,0))+") ",1)])):fe("",!0),Ma?(I(),G("span",Cr,d(` [${Ba}×${Ra}]`),1)):fe("",!0)])):(I(),G("td",Tr))],10,yr))),128)),_("tr",{style:pe(t(j))},null,4)],544)],512)):fe("",!0),E[13]||(E[13]=_("div",{style:{height:"1em"}},null,-1))]),_:1,__:[13]},8,["style"])]),_:1},8,["class","style"])]),_:1})}}}),Ir={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Lr(i,s){return I(),G("svg",Ir,s[0]||(s[0]=[_("path",{fill:"currentColor",d:"M4 18h8.13L11 19.13V20H4a2 2 0 0 1-2-2V6c0-1.11.89-2 2-2h6l2 2h8a2 2 0 0 1 2 2v2.15c-.26-.09-.54-.15-.83-.15c-.42 0-.81.11-1.17.3V8H4zm18.85-4.53l-1.32-1.32c-.2-.2-.53-.2-.72 0l-.98.98l2.04 2.04l.98-.98c.2-.19.2-.52 0-.72M13 19.96V22h2.04l6.13-6.12l-2.04-2.05z"},null,-1)]))}const Pa=ot({name:"mdi-folder-edit-outline",render:Lr}),$r={class:"container"},Fr={__name:"zipicon",setup(i){return(s,u)=>(I(),G("span",$r,[n(t(xe),null,{default:e(()=>[n(t(jt))]),_:1}),u[0]||(u[0]=_("span",{class:"text"},"ZIP",-1))]))}},Er=Re(Fr,[["__scopeId","data-v-8b8df2f0"]]),Dr=["innerHTML"],Pr={style:{margin:"1px"}},Or=["href","download","onClick"],Mr={key:0,style:{position:"relative"}},Ur=["href","download"],Br=["href","download"],Rr={style:{"margin-left":"0.5em"}},Nr={key:0,style:{margin:"1px"}},jr=["href","download","onClick"],Zr=ye({__name:"status.result",props:{processing:{type:Boolean},listLength:{},zippingFlag:{type:Boolean},converted:{},success:{},zippedTotalCount:{},zippedTotalSize:{},baseZipName:{},zips:{},unconvertedListText:{},unconvertedFileCount:{},unconvertedTotalSize:{},failedZips:{},failedZipDone:{type:Boolean},failedToCreateFailedZip:{type:Boolean},failedFileZippedCount:{},imgUrl:{},imgName:{},type:{},outputToDir:{type:Boolean},outputDirName:{}},emits:["all-zips-clicked","demand-zip-errors"],setup(i,{emit:s}){const u=pt(),{t:l}=Ze(),o=Et(),a=i,r=s,c=v(!1),f=v([]),w=v([]),k=v(void 0),z=ze(()=>[{key:"open",label:l("status.openFailedList"),icon:()=>se(xe,()=>se(An)),onSelect(){F()}},{key:"download",label:l("status.saveFailedList"),icon:()=>se(xe,()=>se(ul)),onSelect(){F(!0)}},{key:"zip",label:`${l("status.zipFailedList")}`+(a.failedZipDone?`(✔${l("status.done")})`:""),icon:()=>se(Vt,{show:c.value&&!a.failedZipDone,size:"small"},()=>se(xe,()=>se(jt))),disabled:c.value,onSelect(p){return c.value=!0,r("demand-zip-errors"),!1}}]);we([()=>a.zips.length,()=>a.failedZips.length],()=>{{f.value.length>a.zips.length&&(f.value.length=0);let p=0;const $=a.zips.length===1&&a.zippedTotalCount===a.listLength;for(let h=f.value.length;h<a.zips.length;h++){const g=a.zips[h],S=a.baseZipName+($?"":"-"+String(h+1).padStart(2,"0"))+".zip";p+=g.size,f.value[h]={url:g.url,size:g.size,number:$?0:h+1,sizeByUnit:We(g.size),name:S,count:g.count,clicked:!1}}}{w.value.length>a.failedZips.length&&(w.value.length=0);let p=0;const $=a.failedZipDone&&a.failedZips.length===1;for(let h=w.value.length;h<a.failedZips.length;h++){const g=a.failedZips[h],S=a.baseZipName+"-error"+($?"":"-"+String(h+1).padStart(2,"0"))+".zip";p+=g.size,w.value[h]={url:g.url,size:g.size,number:$?0:h+1,sizeByUnit:We(g.size),name:S,count:g.count,clicked:!1}}}});function m(p,$=!1){const{url:h,name:g}=p;if($){const S=document.createElement("a");S.href=h,S.download=g,S.click()}p.clicked||(p.clicked=!0,a.processing||f.value.every(S=>S.clicked)&&r("all-zips-clicked"))}async function T(p){if(a.zippingFlag){if(f.value.length>=2&&!await new Promise((g,S)=>u.warning({title:l("Download"),content:l("status.confirmDownloadMessage",[f.value.length]),positiveText:"OK",negativeText:l("cancel"),onPositiveClick:()=>g(!0),onNegativeClick:()=>S()})))return;const $=f.value;for(const h of $)m(h,!0)}}function F(p=!1){const $=new Blob([a.unconvertedListText],{type:"text/plain;charset=utf8"}),h=URL.createObjectURL($),g=document.createElement("a");g.href=h,g.target="_blank",p&&(g.download=a.baseZipName+"-error.txt"),g.click()}return(p,$)=>{const h=xn,g=lt,S=Ee,y=Ce,x=Er,U=Tn,q=Pa,H=Ln,ne=cl,O=ft;return I(),X(O,{name:"output",style:{"white-space":"nowrap"},disabled:""},{header:e(()=>[_("span",{style:{color:"black"},innerHTML:p.$t("status.Output")},null,8,Dr)]),default:e(()=>[n(y,{wrap:!1,vertical:"",style:{"margin-top":"-1.3em"}},{default:e(()=>[p.outputToDir?fe("",!0):(I(),X(y,{key:0,justify:"center"},{default:e(()=>[Ke(n(y,{vertical:"",align:"center"},{default:e(()=>[n(g,{placement:"left"},{trigger:e(()=>[n(h,{type:"line","indicator-placement":"inside",color:"lime","rail-color":"rgba(99, 255, 99, 0.5)","indicator-text-color":a.zippedTotalCount===p.listLength?"white":"green",processing:a.processing,percentage:a.zippedTotalCount/p.listLength*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:e(()=>[_("span",Pr,d(a.zippedTotalCount/p.listLength*100|0)+"% "+d(p.$t("status.zippingProgress"))+" ("+d(a.zippedTotalCount)+"/"+d(a.converted)+")",1)]),_:1},8,["indicator-text-color","processing","percentage"])]),default:e(()=>[L(" "+d(p.$t("status.zippingProgress"))+" ("+d(a.zippedTotalCount/a.listLength*100|0)+"%) ",1)]),_:1}),t(f).length>=2||a.processing?(I(),X(xt,{key:0,name:"zips",class:"zip-buttons-parent",tag:"div"},{default:e(()=>[(I(!0),G(Pe,null,it(t(f),(D,C)=>(I(),G("span",{key:C},[n(g,{trigger:"hover",duration:0,delay:0},{trigger:e(()=>[_("a",{href:D.url,download:D.name,class:"in-button-anchor",onClick:le=>m(D)},[n(S,{class:"zip-button",size:"tiny",color:D.clicked?"#050":"lime","text-color":D.clicked?"gray":"white",onClick:ct(le=>m(D),["stop"]),round:""},{default:e(()=>[n(t(xe),{size:"tiny"},{default:e(()=>[n(t(jt))]),_:1}),L("ZIP"+d(D.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Or)]),default:e(()=>[_("div",{style:pe({color:t(o).successColor})},[_("div",null,"ZIP "+d(D.number||"")+" ("+d(p.$t("success"))+")",1),_("div",null,d(D.name),1),_("div",null,d(D.sizeByUnit),1),_("div",null,d(p.$rt("{n} @:files",D.count)),1)],4)]),_:2},1024)]))),128))]),_:1})):fe("",!0)]),_:1},512),[[Qe,p.zippingFlag]])]),_:1})),n(Ge,null,{default:e(()=>[Ke(n(y,{justify:"center",align:"center"},{default:e(()=>[p.outputToDir?(I(),X(g,{key:1,trigger:"hover",duration:0,delay:0,placement:"left",style:pe({color:"white",backgroundColor:t(o).successColor}),"arrow-style":{backgroundColor:t(o).successColor}},{trigger:e(()=>[n(y,{align:"center",size:1,style:pe(`border: 1px solid ${t(o).successColor}; border-radius:4px; padding:0.3em;`)},{default:e(()=>[n(q,{style:{"vertical-align":"middle"}}),n(H,{style:{"font-size":"smaller","max-width":"25em"}},{default:e(()=>[L(d(p.outputDirName),1)]),_:1}),_("span",Rr,[_("span",{style:pe({color:t(o).successColor})},d(p.success),5),L(" "+d(t(l)("files",p.success)),1)])]),_:1},8,["style"])]),default:e(()=>[L(d(p.$t("status.numberOfFilesWrittenToDir")),1)]),_:1},8,["style","arrow-style"])):(I(),X(g,{key:0,trigger:"hover",duration:0,delay:0,placement:"left",style:pe({color:"white",backgroundColor:t(o).successColor}),"arrow-style":{backgroundColor:t(o).successColor}},{trigger:e(()=>[n(Ge,{name:"save"},{default:e(()=>[p.success>0?(I(),G("span",Mr,[n(U,{value:p.zippingFlag?a.zippedTotalCount.toLocaleString("en-us"):a.type.replace(/\(.+\)/,""),color:t(o).successColorHover,offset:[-20,-3]},{default:e(()=>[p.zippingFlag?(I(),X(S,{key:0,size:"medium",onClick:T,color:t(o).successColor,round:""},{default:e(()=>[t(f).length?(I(),G("a",{key:0,href:t(f)[0].url,download:t(f)[0].name,class:"in-button-anchor",onClick:$[0]||($[0]=ct(()=>{},["prevent"]))},[n(x),L(" × "+d(t(f).length)+" "+d(p.$t("status.saveAll")),1)],8,Ur)):fe("",!0)]),_:1},8,["color"])):(I(),G("a",{key:1,href:a.imgUrl,download:a.imgName,class:"in-button-anchor"},[n(S,{size:"medium",color:t(o).successColor,round:""},{default:e(()=>[n(t(xe),{size:"tiny",component:t(In)},null,8,["component"]),L(" "+d(p.$t("save")),1)]),_:1},8,["color"])],8,Br))]),_:1},8,["value","color"])])):fe("",!0)]),_:1})]),default:e(()=>[a.listLength>=2?(I(),G(Pe,{key:0},[_("div",null,d(t(l)("success"))+": "+d(p.zippedTotalCount.toLocaleString()),1),_("div",null,d(t(l)("status.totalSize"))+": "+d(t(We)(a.zippedTotalSize)),1),_("div",null,"ZIP × "+d(t(f).length),1),_("div",null,d(t(l)("status.saveAllZipsTooltip")),1)],64)):(I(),G(Pe,{key:1},[L(d(p.$t("status.downloadConvertedImage",t(f).length)),1)],64))]),_:1},8,["style","arrow-style"])),!a.processing&&a.success!==p.listLength?(I(),X(ne,{key:2,options:t(z),onSelect:$[1]||($[1]=(D,C)=>{var le;return(le=t(z).find(({key:J})=>D===J))==null?void 0:le.onSelect()}),"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start"},{default:e(()=>[n(g,{show:t(k),duration:0,delay:0,placement:"right",style:pe({color:"white",backgroundColor:t(o).errorColor}),"arrow-style":{backgroundColor:t(o).errorColor}},{trigger:e(()=>[n(U,{value:a.unconvertedFileCount.toLocaleString(),color:t(o).errorColorHover,offset:[-0,-3]},{default:e(()=>[n(S,{size:"small",color:t(o).errorColor},{default:e(()=>[n(t(xe),{size:"medium",style:{"vertical-align":"middle"},component:t(dl)},null,8,["component"])]),_:1},8,["color"])]),_:1},8,["value","color"])]),default:e(()=>[_("div",null,[_("div",null,d(t(l)("failed"))+": "+d(a.unconvertedFileCount.toLocaleString()),1),_("div",null,d(t(l)("status.totalSize"))+": "+d(t(We)(a.unconvertedTotalSize)),1)])]),_:1},8,["show","style","arrow-style"])]),_:1},8,["options"])):fe("",!0)]),_:1},512),[[Qe,!a.processing||p.outputToDir]])]),_:1}),n(Ge,{name:"zipcontainer"},{default:e(()=>[Ke(n(y,{vertical:"",align:"center"},{default:e(()=>[n(g,{placement:"left"},{trigger:e(()=>[n(h,{type:"line","indicator-placement":"inside",color:"red","rail-color":"rgba(255, 0, 0, 0.5)","indicator-text-color":a.failedFileZippedCount===a.unconvertedFileCount?"white":"#500",processing:t(c)&&!a.failedZipDone&&!a.failedToCreateFailedZip,percentage:a.failedFileZippedCount/a.unconvertedFileCount*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:e(()=>[a.failedToCreateFailedZip?(I(),G("div",{key:1,style:pe({color:t(o).errorColor})},d(p.$t("status.failureZippingFailedFiles")),5)):(I(),G("span",Nr,d(a.failedFileZippedCount/a.unconvertedFileCount*100|0)+"% "+d(p.$t("status.zipped"))+" ("+d(a.failedFileZippedCount)+"/"+d(a.unconvertedFileCount)+")",1))]),_:1},8,["indicator-text-color","processing","percentage"])]),default:e(()=>[L(" "+d(p.$t("status.zippingProgress"))+" ("+d(a.failedFileZippedCount/a.unconvertedFileCount*100|0)+"%) ",1)]),_:1}),n(xt,{name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:e(()=>[(I(!0),G(Pe,null,it(t(w),(D,C)=>(I(),G("span",{key:C},[n(g,{trigger:"hover",duration:0,delay:0},{trigger:e(()=>[_("a",{href:D.url,download:D.name,class:"in-button-anchor",onClick:le=>m(D)},[n(S,{class:"zip-button",size:"tiny",color:D.clicked?"#551122":"#F00","text-color":D.clicked?"gray":"white",onClick:ct(le=>m(D),["stop"]),round:""},{default:e(()=>[n(t(xe),{size:"tiny",component:t(pl)},null,8,["component"]),L("ZIP"+d(D.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,jr)]),default:e(()=>[_("div",{style:pe({color:t(o).errorColor})},[_("div",null,"ZIP "+d(D.number||"")+" ("+d(p.$t("failed"))+")",1),_("div",null,d(D.name),1),_("div",null,d(D.sizeByUnit),1),_("div",null,d(p.$rt("{n} @:files",D.count)),1)],4)]),_:2},1024)]))),128))]),_:1})]),_:1},512),[[Qe,t(c)]])]),_:1})]),_:1})]),_:1})}}}),Hr=Re(Zr,[["__scopeId","data-v-1aee218a"]]),Wr=ye({__name:"status",props:{processing:{type:Boolean},status:{},interval:{}},emits:["all-zips-clicked","demand-zip-errors","demand-image","delete-image"],setup(i,{expose:s,emit:u}){const l={itemMargin:"1px",titlePadding:"2px",titleFontSize:"0.8rem"},{t:o}=Ze(),a=Et(),r=i,c=u;s({cleanup:qe});const f=v(!1),w=v([]),k=v(!1),z=v(!1),m=v([0,0]),T=v([0,0]),F=v([0,0]),p=v([0,0]),$=v([0,0]),h=v([0,0]),g=v(0),S=v(0),y=v([0,0]),x=v(0),U=v(a.value.infoColor),q=v("#000000"),H=v("#000000"),ne=v(0),O=v(0),D=v(""),C=v("00:00:00"),le=v(null),J=v(["progress","log","output"]),Y=V=>J.value.includes(V),j=V=>J.value.push(V),Z=V=>{const re=J.value.findIndex(B=>B===V);re>=0&&J.value.splice(re,1)},R=ze(()=>J.value.includes("log")),ie=ze(()=>J.value.includes("progress")),ue=v(!1),ce=v(!0),_e=v("processed"),Q=Ft({name:"",originalName:"",size:0,url:"",originalUrl:"",originalSize:0,dataUrl:"",index:0,various:{shrinked:!1}}),De=dt("body"),de=dt("imageViewer");Be(()=>{we(r.status,()=>Me(),{deep:!1});let V=0;const re=()=>{if(V)return;const B=Date.now();C.value="00:00:00",V=window.setInterval(()=>{const P=(Date.now()-B)/1e3;C.value=`${String(P/3600|0).padStart(2,"0")}:${String(P/60%60|0).padStart(2,"0")}:${String(P%60|0).padStart(2,"0")}`},300)};re(),z.value=!0,we(()=>r.processing,(B,P)=>{B||Ue(),B?(re(),w.value.length=0,f.value=!1,k.value=!1):(clearInterval(V),V=0)}),et(()=>{clearInterval(V),clearTimeout(ve)}),At(()=>clearInterval(V))}),et(()=>{qe()}),At(()=>{clearTimeout(ve)});const be=r.interval||100;let Le=!1,ve=0;function Me(){if(Le)return;if(ve){Le=!0;return}ve=window.setTimeout(()=>{ve=0,Le&&(Le=!1,Me())},be);const V=r.status;f.value=V.length>=2,T.value[1]=T.value[0],T.value[0]=V.startedCount,F.value[1]=F.value[0],F.value[0]=V.success,p.value[1]=p.value[0],p.value[0]=V.failure,$.value[1]=$.value[0],$.value[0]=V.done,h.value[1]=h.value[0],h.value[0]=V.converted,g.value=V.retried,S.value=V.length,y.value[1]=y.value[0],y.value[0]=V.zippedTotalCount,ne.value=V.inputTotalSize,O.value=V.outputTotalSize,x.value=V.failedFileZippedCount;const re=O.value-ne.value;D.value=(re>=0?"+ ":"")+We(re);const B=O.value/ne.value,P=(256|Math.min(255,Math.max(0,B-1.5)*255|0)).toString(16).substring(1);q.value="#"+P+"0000";const te=1024*1024,b=(256|Math.min(255,Math.max(0,re/1024/te)*255|0)).toString(16).substring(1);H.value="#"+b+"0000",m.value[1]=m.value[0],m.value[0]=F.value[0]/S.value*100,(R.value||!r.processing)&&(w.value=w.value.concat(V.logs),V.logs.length=0),le.value=V.thumbnail,r.processing?U.value=p.value[0]?a.value.errorColor:g.value?a.value.warningColor:a.value.infoColor:z.value=!1,V.convertedImageUrl!==Q.url&&(Q.url=V.convertedImageUrl,Q.name=V.convertedImageName,Q.dataUrl=V.convertedImageDataUrl,Q.size=V.convertedImageSize||V.outputTotalSize,Q.originalSize=V.convertedImageOrgSize,Q.originalName=V.convertedImageOrgName,Q.index=V.convertedImageIndex,Q.originalUrl=V.convertedImageOrgUrl,Q.various={shrinked:V.convertedImageShrinked})}function Ue(){const V=r.status;U.value=r.status.success===r.status.length?a.value.successColor:a.value.errorColor,_e.value==="processed"&&(_e.value="zipped"),V.success>0&&(ce.value&&(Z("log"),ue.value=!0),j("preview"))}async function ke(V,re,B,P){var b;if(!V)return;const te=P;Y("preview")||(j("preview"),await Fe()),(b=de.value)==null||b.changeIndex(te+1),await Fe(()=>{var E;try{(E=de.value)==null||E.$el.scrollIntoView({behavior:"instant",block:"nearest"})}catch{}})}const Oe=v(!1);function qe(){Oe.value=!0,URL.revokeObjectURL(Q.url),URL.revokeObjectURL(Q.originalName),Q.originalUrl="",Q.url="",Q.index=0,r.status.logs.length=0,w.value.length=0}return(V,re)=>{const B=Ce,P=ft,te=qt;return I(),X(B,{ref_key:"body",ref:De,vertical:"",justify:"center"},{default:e(()=>[n(te,{"display-directive":"show","trigger-areas":["arrow","main"],"expanded-names":t(J),"onUpdate:expandedNames":re[7]||(re[7]=b=>Ie(J)?J.value=b:null),"theme-overrides":l},{default:e(()=>[n(tr,{processing:t(z),"elapsed-time":t(C),"success-perc":t(m)[0],"input-total-size":t(ne),"output-total-size":t(O),"file-type":r.status.type,shrink:r.status.shrink,threads:r.status.threads,"zip-size":r.status.zipSize,"output-to-dir":r.status.outputToDir,"rate-color":t(q),"dif-color":t(H),"total-size-dif-str":t(D),thumbnail:t(le),opened:t(ie)},{center:e(()=>[t(Oe)?fe("",!0):(I(),X(pr,{key:0,index:t(T)[0],success:t(F)[0],length:V.status.length,"success-to":t(F)[0],"success-from":t(F)[1],failure:t(p)[0],"success-perc-to":t(m)[0],"success-perc-from":t(m)[1],retried:t(g),processing:t(z),interval:t(be),"status-color":t(U),class:"center-column"},null,8,["index","success","length","success-to","success-from","failure","success-perc-to","success-perc-from","retried","processing","interval","status-color"]))]),_:1},8,["processing","elapsed-time","success-perc","input-total-size","output-total-size","file-type","shrink","threads","zip-size","output-to-dir","rate-color","dif-color","total-size-dif-str","thumbnail","opened"]),n(Ar,{processing:t(z),"image-index":t(Q).index,opened:t(R),"preview-collapsed":Y("preview"),logs:t(w),expanded:t(ue),"onUpdate:expanded":re[0]||(re[0]=b=>Ie(ue)?ue.value=b:null),"auto-scroll":t(ce),"onUpdate:autoScroll":re[1]||(re[1]=b=>Ie(ce)?ce.value=b:null),order:t(_e),onChangeIndex:ke,onOpenPreview:re[2]||(re[2]=b=>{var E;return(E=t(de))==null?void 0:E.openPreview()}),name:"log",style:{"white-space":"nowrap"}},null,8,["processing","image-index","opened","preview-collapsed","logs","expanded","auto-scroll","order"]),n(P,{title:V.$t("status.PreviewImage"),name:"preview",style:{"white-space":"nowrap"},disabled:!(t(F)[0]>0)},{default:e(()=>[n(B,{justify:"center",align:"center",vertical:"",style:{"margin-top":"-1em"}},{default:e(()=>[n(Gi,{"_v-else-if":"imageViewerStarted && status.success > 0 /*&& (props.status.threads || !zippingFlag)*/ && !cleaningUp",ref_key:"imageViewer",ref:de,url:t(Q).url,size:t(Q).size,"original-url":t(Q).originalUrl,"original-size":t(Q).originalSize,name:t(Q).name,originalName:t(Q).originalName,length:t(F)[0],index:t(Q).index,"various-info":t(Q).various,"is-single":!t(f),onDemandImage:re[3]||(re[3]=b=>c("demand-image",b)),on_deleteImage:re[4]||(re[4]=b=>c("delete-image",b)),_close:"imageViewerStarted=false"},null,8,["url","size","original-url","original-size","name","originalName","length","index","various-info","is-single"])]),_:1})]),_:1},8,["title","disabled"]),n(Hr,{processing:t(z),"list-length":t(S),zippingFlag:t(f),zips:r.status.zips,"img-url":t(Q).url,"img-name":t(Q).name,success:t(F)[0],failure:t(p)[0],done:t($)[0],converted:t(h)[0],retried:t(g),"zipped-total-count":t(y)[0],"zipped-total-size":r.status.zippedTotalSize,"base-zip-name":r.status.baseZipName,"failed-file-zipped-count":t(x),"failed-to-create-failed-zip":r.status.failedToCreateFailedZip,"failed-zip-done":r.status.failedZipDone,"failed-zips":r.status.failedZips,"unconverted-file-count":r.status.unconvertedFileCount,"unconverted-list-text":r.status.unconvertedListText,"unconverted-total-size":r.status.unconvertedTotalSize,"output-to-dir":V.status.outputToDir,"output-dir-name":V.status.outputDirName,type:r.status.type,onAllZipsClicked:re[5]||(re[5]=b=>c("all-zips-clicked")),onDemandZipErrors:re[6]||(re[6]=b=>c("demand-zip-errors"))},null,8,["processing","list-length","zippingFlag","zips","img-url","img-name","success","failure","done","converted","retried","zipped-total-count","zipped-total-size","base-zip-name","failed-file-zipped-count","failed-to-create-failed-zip","failed-zip-done","failed-zips","unconverted-file-count","unconverted-list-text","unconverted-total-size","output-to-dir","output-dir-name","type"])]),_:1},8,["expanded-names"])]),_:1},512)}}}),Vr=Re(Wr,[["__scopeId","data-v-a067ea79"]]),qr=["innerHTML"],Gr={style:{color:"red"}},Kr=ye({__name:"converter",props:Ve({input:{},format:{},quality:{},retainExtension:{type:Boolean},maxZipSizeMB:{},autoStart:{type:Boolean},threads:{},outputToDir:{type:Boolean},outputDirHandle:{}},{showNote:{type:Boolean},showNoteModifiers:{}}),emits:Ve(["start","end"],["update:showNote"]),setup(i,{expose:s,emit:u}){at(Ye);const{t:l}=Ze(),o=pt(),a=$n(),r=10,c=navigator.hardwareConcurrency,f=typeof OffscreenCanvas=="function",w=100,k=v([[()=>l("dupAction_overwrite"),"overwrite"],[()=>l("dupAction_skip"),"skip"],[()=>l("cancel"),"cancel"]]),z=i,m=Te(i,"showNote"),T=u;s({beginConversion:Le});const F=v(!1),p=v(!1),$=v(!1),h=v(!1),g=v(!1),S=v(()=>"initializing"),y=v("info"),x=Ft(Me()),U=dt("stat"),q=v(0),H=ze(()=>{var M;return(M=z.input)==null?void 0:M.length}),ne=v(),O=v(""),D=v(!1),C=v(!0),le=v(!1);let J=()=>{};const Y=v(!1);let j=!1,Z=!1,R,ie=()=>{},ue,ce=0,_e=!1;we(()=>z.input.length,(M,A)=>{M>=A&&z.autoStart&&Le()}),we(h,M=>{document.body.style.overflowY=M?"hidden":"auto"}),Be(async()=>{await V(),re()});async function Q(){let M=!0;if(ce>r*1e3&&!z.outputToDir&&!_e&&x.success>0&&(M=!1,await new Promise(A=>{o.warning({title:l("confirmCloseDialogTitle"),autoFocus:!0,maskClosable:!1,positiveText:l("close"),negativeText:l("back"),onPositiveClick:()=>M=!0,onAfterLeave:A,content:l("confirmCloseDialog")})})),!M)return!1;a.destroyAll(),h.value=!1,m.value=!1}function De(M){ue==null||ue(M)}function de(M){Ut==null||Ut(M)}function be(){!p.value&&F.value?p.value=!0:Q()}async function Le(){var M;if(!((M=z.input)!=null&&M.length)||F.value){o.error({title:"error",positiveText:"OK",content:"An unexpected error occurred."});return}if(z.outputToDir&&!z.outputDirHandle){o.error({title:"error",positiveText:"OK",content:l("errMsgOutputDirNotFound")});return}if(F.value){o.error({title:"Busy",positiveText:"OK",content:l("interfered")});return}if(z.outputToDir){if(!Y.value&&(await new Promise(A=>{le.value=!0,j=!1,J=A}),!j)){Y.value=!1;return}if(!await Fa(z.outputDirHandle)||!await vi(z.outputDirHandle)){await o.warning({title:"Rejected",positiveText:"OK",maskClosable:!0,content:l("settings.permissionDenied")});return}}ke(z.input)}let ve=v(()=>{});function Me(M){const A={logs:[],ziplogs:[],startedCount:0,converted:0,success:0,failure:0,retried:0,done:0,length:0,zippedTotalCount:0,zippingErrorCount:0,zippedTotalSize:0,processing:!1,zips:[],inputTotalSize:0,outputTotalSize:0,thumbnail:null,baseZipName:"testzipname",type:"image/any",startedTime:Date.now(),convertedImageDataUrl:"",convertedImageName:"",convertedImageUrl:"",convertedImageOrgUrl:"",convertedImageIndex:-1,convertedImageShrinked:!1,zipSize:z.maxZipSizeMB,shrink:W.multithread&&W.shrinkImage?[W.maxWidth,W.maxHeight]:void 0,unconvertedListText:"",failedZipDone:!1,failedZips:[],unconvertedFileCount:0,unconvertedTotalSize:0,failedFileZippedCount:0,failedToCreateFailedZip:!1,outputToDir:z.outputToDir,outputDirName:z.outputDirHandle?z.outputDirHandle.name:""};return Object.assign(M||{},A)}function Ue(){g.value=!1,URL.revokeObjectURL(x.convertedImageUrl),URL.revokeObjectURL(x.convertedImageOrgUrl);for(const M of x.zips)URL.revokeObjectURL(M.url);x.zips.length=0;for(const M of x.failedZips)URL.revokeObjectURL(M.url);x.failedZips.length=0,Me(x),ie(),ie=()=>{},ue=null,_e=!1,$.value=!1,p.value=!1,P=!1,te.length=0,R=void 0,E.clear(),ee.clear()}async function ke(M){h.value&&(q.value^=1);let A=M.concat();Me(x),Ue(),h.value=!0,g.value=!0,F.value=!0,x.processing=!0,y.value="info",S.value=()=>l("processing");const K=new Set,oe=[],ae=z.format,me=z.quality,ge=[...ae.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),He=qe(ae,me,A[0].webkitRelativePath);let Xe=new Set;z.outputDirHandle&&(Xe=await yi(z.outputDirHandle,A)),x.length=A.length,x.baseZipName=He,x.type=ae.replace(/image\//,"").toUpperCase()+(/jpe?g|webp/i.test(ae)?" ("+me+")":""),x.threads=Z?0:z.threads;const gt=Date.now();T("start");let $e,rt,mt;if(!Z&&z.threads>=2?(ue=Fi,mt=await ki({files:A,completedFileIdSet:K,completedFileDat:oe,ConvStats:x,canceled:p,props:z,imageType:ae,quality:me,outputExt:ge,format:ae,message:a,fsysDirHandler:z.outputDirHandle,writeUsingFileSystem:B,enqueueOverwriteConfirmation:b,existingFolders:Xe})):(ue=Pi,mt=await Di(A,K,z,p,x)),{exception:rt,callbackToGenerateFailedZips:$e,callbackToClearConverter:ie}=mt,rt){let Je;switch(rt.message){case"worker-load-error":Je=l("errMsgWorkerLoadError");break;default:Je="unexpected error"}o.error({title:"Error",autoFocus:!0,maskClosable:!1,closable:!1,content:()=>se("div",[se("p",Je),se(Ee,{onClick(){location.reload()}},l("Reload"))])})}if(x.success===x.length?(y.value="success",S.value=()=>l("completed")):(y.value="error",S.value=()=>p.value?l("aborted"):l("incomplete")),K.size!==A.length){const Je=Oe(M,K);ve.value=()=>{!Je||!Je.length||$e(Je)}}F.value=!1,x.processing=!1,$.value=!0,A.length=0,ce=Date.now()-gt,T("end")}function Oe(M,A){const K=[],oe=[];let ae=0;for(const me of M)A.has(me._id)||(K.push(me),oe.push(me.webkitRelativePath||me.relativePath||me.name),ae+=me.size);return oe.length&&(x.unconvertedListText=oe.join(`
`),x.unconvertedFileCount=K.length,x.unconvertedTotalSize=ae),K}function qe(M,A,K){var He;const oe=new Date;M=M.replace(/^image\//,"").toLowerCase();const ae=W.useFolderNameForZip&&((He=String(K).match(/^\/?([^/]+)\//))==null?void 0:He[1])||"avif2jpg",me=`
    ${oe.getFullYear().toString().substring(2)}
    ${String((oe.getMonth()+1)*100+oe.getDate()).padStart(4,"0")}
    ${String(oe.getHours()*1e4+oe.getMinutes()*100+oe.getSeconds()).padStart(6,"0")}
    -
    ${M+(/jpe?g|webp/i.test(M)?A:"")}
  `.replace(/\s/g,"");return`${ae}-${me}`.replace(/\s+/g," ")}async function V(){const M="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",A=document.createElement("img"),K=Da(A).then(()=>!0,()=>!1);A.src=M,await K||o.warning({title:"Unsupported",positiveText:"OK",maskClosable:!1,content:l("avifUnsupported")})}function re(){(!f||c<2||!Promise.any)&&(Z=!0),Z&&(Ne.value=0)}async function B(M,A){const K=z.outputDirHandle;if(!K)throw new Error("Directory Handle is empty");await mi(K,M,A,!0)}let P=!1;const te=[];async function b(M,A,K,oe){P?te.push({resolver:M,target:A,type:K,path:oe}):(P=!0,he(M,A,K))}const E=new Set,ee=new Set;async function he(M,A,K,oe){let ae="";if(p.value?ae="cancel":E.has(A)?ae="overwrite":ee.has(A)?ae="skip":(O.value=A,C.value=K==="folder",ae=R||await ne.value.start(),ae.startsWith("cancel")&&(p.value=!0),ae==="overwrite"&&E.add(A),ae==="skip"&&ee.add(A),ae==="close"&&(D.value=!1),await Fe(),!R&&D.value&&(ae+="-all",R=ae)),M(ae),te.length){const{resolver:me,target:ge,type:He,path:Xe}=te.shift();he(me,ge,He)}else P=!1}return(M,A)=>{const K=ti,oe=xe,ae=Se,me=Ce,ge=Vt,He=zt,Xe=La,gt=Qs;return I(),G(Pe,null,[t(F)?fe("",!0):(I(),X(me,{key:0,justify:"center",align:"center",style:{"margin-top":"0.4em"}},{default:e(()=>[n(ae,{trigger:"hover",placement:"top","keep-alive-on-hover":!1,duration:0,delay:50},{trigger:e(()=>[n(Ge,null,{default:e(()=>[n(t(Ee),{disabled:!t(H),onClick:Le,round:"",size:"large",style:{"font-size":"1.5em",padding:"1em"},type:t(H)?"success":void 0,"_:class":"{'button-ready': isReadyToConvert}"},{icon:e(()=>[n(oe,{size:"1.2em"},{default:e(()=>[n(K)]),_:1})]),default:e(()=>[L(" "+d(t(l)("StartConversion")),1)]),_:1},8,["disabled","type"])]),_:1})]),default:e(()=>[_("div",{innerHTML:t(H)?t(l)("convertTooltip"):t(l)("convertUnpreparedTooltip")},null,8,qr)]),_:1})]),_:1})),n(He,{ref:"processingModal","display-directive":"show",show:t(h),"onUpdate:show":A[2]||(A[2]=$e=>Ie(h)?h.value=$e:null),closable:t($),"close-on-esc":!1,preset:"dialog",onClick:A[3]||(A[3]=$e=>{t(a).destroyAll()}),onMaskClick:A[4]||(A[4]=$e=>{t(a).destroyAll()}),onClose:Q,onEsc:be,title:t(S),type:t(y),"mask-closable":!1,onAfterLeave:Ue,onBeforeLeave:A[5]||(A[5]=$e=>{t(U).cleanup()}),class:"processing-dialog"},{default:e(()=>[n(me,{vertical:"",style:{"flex-grow":"1"}},{default:e(()=>[t(g)?(I(),X(Vr,{ref_key:"stat",ref:U,key:t(q),processing:t(F),status:t(x),interval:w,onAllZipsClicked:A[0]||(A[0]=$e=>Ie(_e)?_e.value=!0:_e=!0),onDemandZipErrors:t(ve),onDemandImage:De,onDeleteImage:de},null,8,["processing","status","onDemandZipErrors"])):fe("",!0),n(me,{justify:"end",align:"center",wrap:!1},{default:e(()=>[t(F)?(I(),X(t(Ee),{key:0,disabled:t(p),ref:"cancelbutton",round:"",size:"large",onClick:A[1]||(A[1]=$e=>p.value=!0)},{default:e(()=>[n(ge,{show:t(p)&&!t($),size:"small"},{default:e(()=>[L(d(t(l)("cancel")),1)]),_:1},8,["show"])]),_:1},8,["disabled"])):t($)?(I(),X(t(Ee),{key:1,onClick:Q,round:"",size:"large"},{default:e(()=>[L(d(t(l)("close")),1)]),_:1})):fe("",!0)]),_:1})]),_:1})]),_:1},8,["show","closable","title","type"]),n(Mn,{ref_key:"promptref",ref:ne,closable:"",draggable:"",type:"warning","close-on-esc":"",buttons:t(k),"show-apply-all":"","label-apply-all":M.$t("confirmApplyAllLabel"),"apply-all-checked":t(D),"onUpdate:applyAllChecked":A[6]||(A[6]=$e=>Ie(D)?D.value=$e:null)},{header:e(()=>[L(d(M.$t("confirmFileOverwriteTitle",{type:t(C)?M.$t("folder"):M.$t("file")})),1)]),default:e(()=>[_("div",null,d(M.$t("confirmFileOverwriteMsg",{type:t(C)?M.$t("folder"):M.$t("file")})),1),n(me,{class:"path",align:"center",size:1,wrap:!1},{default:e(()=>[t(C)?(I(),X(Xe,{key:0})):(I(),X(gt,{key:1})),L(" "+d(t(O)),1)]),_:1})]),_:1},8,["buttons","label-apply-all","apply-all-checked"]),n(He,{preset:"dialog",type:"warning",show:t(le),"onUpdate:show":A[7]||(A[7]=$e=>Ie(le)?le.value=$e:null),title:M.$t("warnAboutFileSysTitle"),onAfterLeave:A[8]||(A[8]=$e=>t(J)()),"positive-text":M.$t("Continue"),"negative-text":M.$t("cancel"),onPositiveClick:A[9]||(A[9]=$e=>void(Ie(j)?j.value=!0:j=!0)),onNegativeClick:A[10]||(A[10]=$e=>void(Ie(j)?j.value=!1:j=!1))},{default:e(()=>[_("p",null,d(M.$t("warnAboutFileSysBeforeConversion1")),1),n(me,{class:"path",align:"center",size:1,wrap:!1},{default:e(()=>[n(Xe),L(" "+d(M.outputDirHandle.name),1)]),_:1}),_("p",Gr,d(M.$t("warnAboutFileSysBeforeConversion2")),1)]),_:1},8,["show","title","positive-text","negative-text"])],64)}}}),Qr={class:"container-1"},Yr={style:{color:"gray",padding:"0.2em","font-size":"smaller","text-align":"center"}},Xr=["innerHTML"],Jr={style:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","font-size":"xx-small","white-space":"nowrap"}},eu=ye({__name:"droptarget",props:{forbidden:{type:Boolean},dropTarget:{}},emits:["drop"],setup(i,{emit:s}){at(Ye);const u=i,l=s,o=fl(),a=v(!1),r=v(0),c=v("");Be(()=>{f(u.dropTarget||document)});function f(k){document.ondragstart=z=>z.preventDefault(),document.ondragover=z=>z.preventDefault(),k.ondrop=async z=>{var T;if(z.preventDefault(),a.value||u.forbidden)return;a.value=!0,r.value=0,c.value="";let m;try{const F=[...z.dataTransfer.items].map(p=>p.webkitGetAsEntry());o.start(),m=await w(F),o.finish()}catch{m=[...((T=z.dataTransfer)==null?void 0:T.files)??[]],o.error()}a.value&&(a.value=!1,l("drop",m))}}async function w(k,z){z=z||[];for(const m of k)if(m.isFile){const T=await new Promise(F=>m.file(p=>F(p)));Object.defineProperty(T,"webkitRelativePath",{value:m.fullPath.replace(/^\//,"")}),z.push(T),r.value++}else if(m.isDirectory){c.value=m.fullPath;const T=m.createReader();do{const F=await new Promise(p=>T.readEntries($=>p($)));if(!F.length)break;await w(F,z)}while(!0)}return z}return(k,z)=>{const m=Se,T=Ce,F=zt;return I(),G("div",Qr,[n(m,{to:!1,"display-directive":"show",trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:e(()=>[_("div",Yr," ("+d(k.$t("droptargetLabel"))+") ",1)]),default:e(()=>[_("h3",{innerHTML:k.$t("droptargetTooltip"),style:{"max-width":"200px","text-align":"center","word-break":"keep-all","overflow-wrap":"break-word"}},null,8,Xr)]),_:1}),n(F,{show:t(a),"onUpdate:show":z[0]||(z[0]=p=>Ie(a)?a.value=p:null),closable:!0,preset:"dialog",title:"Parsing dropped items.",type:"info","mask-closable":!1,"negative-text":k.$t("cancel")},{default:e(()=>[n(T,{vertical:"",align:"center"},{default:e(()=>[_("div",Jr,d(t(c)),1),_("div",null,"found "+d(t(r))+" files",1)]),_:1})]),_:1},8,["show","negative-text"])])}}}),tu=Re(eu,[["__scopeId","data-v-bf1cf34d"]]),nu={class:"container-1"},ou={class:"container-2"},au=["innerHTML"],lu=["innerHTML"],su={style:{"white-space":"nowrap"}},iu={style:{"padding-left":"1em"}},ru=["innerHTML"],uu=["accept"],cu=ye({__name:"file-selector",props:Ve({target:{},userExtensions:{},forbidden:{type:Boolean}},{"auto-start-opt":{type:Boolean,required:!0},"auto-start-optModifiers":{},expanded:{type:Boolean,required:!1},expandedModifiers:{},disableNotifyingFolderSelect:{type:Boolean},disableNotifyingFolderSelectModifiers:{}}),emits:Ve(["input","click","cancel","on-change-accept","update:target","update:userExtensions"],["update:auto-start-opt","update:expanded","update:disableNotifyingFolderSelect"]),setup(i,{emit:s}){const u=pt(),{t:l}=Ze(),o=at(Ye),a=["avif_only","all_images","all_files","edit_type"],r=[];for(const j of a)r.push({label:()=>l("fileTypeRadioOptions."+j),value:j});const c=({node:j,option:Z})=>se(Se,{placement:"right"},{trigger:()=>j,default:()=>D(Z.value).replace(/,/g,", ")}),f=i,w=Te(i,"auto-start-opt"),k=s,z=v(0),m=v(!1),T=v(!1),F=ze(()=>D(h.value)),p=ze(()=>g.value.split(",").every(Z=>/^\s*(\.[\w\-]+)*\s*$/.test(Z))?"success":"error"),$=ze(()=>!f.forbidden&&!T.value);Te(i,"expanded");const h=ze({get:()=>a.indexOf(f.target)>=0?f.target:a[0],set:j=>{k("update:target",j)}}),g=ze({get:()=>f.userExtensions,set:j=>{k("update:userExtensions",j)}}),S=Te(i,"disableNotifyingFolderSelect"),y=v(null),x=v(null),U=v(O());we(h,j=>{k("on-change-accept",F.value)}),Be(()=>{});async function q(j){if(k("click"),j===x.value&&!S.value){let Z=!1;if(await new Promise(R=>{u.info({title:l("loadfolderNotifyingTitle"),positiveText:l("Continue"),negativeText:l("Cancel"),onAfterLeave:()=>R(Z),onPositiveClick:()=>Z=!0,content:()=>se("div",[se("p",{},l("loadfolderNotifyingMessageTerm1")),se("div",[se(zn,{width:250,style:{border:"3px solid gray"},src:"/avif2jpeg/dist//notification-folder.png"})]),se("p",{},l("loadfolderNotifyingMessageTerm2")),se("p",[se(Tt,{onUpdateChecked:ie=>S.value=ie,checked:S.value},()=>l("checkboxTextDontShowThis"))])])})}),!Z){S.value=!1,k("cancel");return}}j.click()}function H(){k("cancel")}function ne(j){const R=[...j.target.files];y.value.value="",x.value.value="",le(R)}function O(){return"webkitdirectory"in document.createElement("input")}function D(j){switch(j){case"avif_only":return".avif, .webp";case"all_images":return".jpg, .jpeg, .jfif, .pjpeg, .pjp, .gif, .png, .webp, .avif, .bmp, .apng, .ico, .svg";case"edit_type":return g.value;case"all_files":default:return".*"}}async function C(j){const Z=String(F.value).toLowerCase().replace(/\s+/g,"");if(Z&&F.value!==".*"){const R=Z.split(",");j=j.filter(ie=>R.includes(ie.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),j.length||(await new Promise(ie=>{u.error({title:"Images Not Found",positiveText:"OK",onAfterLeave:ie,content:()=>se("div",[se(Sn,{description:"NO IMAGES"}),`${l("noimage")}`,se("br"),F.value])})}),H())}return j}async function le(j){T.value=!0,j=await C(j),z.value=j.length,j.length>0&&k("input",Y(j)),T.value=!1}let J=0;function Y(j){const Z=[];for(const R of j)R.hasOwnProperty("_id")||Object.defineProperty(R,"_id",{value:J++}),Z.push(R);return Z}return(j,Z)=>{const R=Ce,ie=xe,ue=Ee,ce=Pt,_e=gl,Q=Gt,De=lt;return I(),G(Pe,null,[_("div",nu,[_("div",ou,[n(R,{vertical:"",align:"center",justify:"center",inline:"",size:"large"},{default:e(()=>[n(R,{justify:"center"},{default:e(()=>[n(t(Se),{placement:"top-start"},{trigger:e(()=>[n(t(Tt),{checked:w.value,"onUpdate:checked":Z[0]||(Z[0]=de=>w.value=de),size:"small",style:{}},{default:e(()=>[L(d(j.$t("settings.autoStartConversion")),1)]),_:1},8,["checked"])]),default:e(()=>[L(d(j.$t("settings.autoStartConversionTooltip")),1)]),_:1})]),_:1}),n(R,{align:"center",justify:"space-around",class:"main-buttons"},{default:e(()=>[n(R,{vertical:"",align:"stretch",justify:"center"},{default:e(()=>[n(t(Se),{to:!1,"display-directive":"show",show:t(o).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:"top",duration:0,delay:0,"z-index":10},{trigger:e(()=>[n(ue,{disabled:!t($),size:"large",onClick:Z[1]||(Z[1]=de=>q(t(y))),round:"",style:{width:"100%","background-color":"white","font-size":"1.3em"}},{icon:e(()=>[n(ie,{size:"large",color:"gray"},{default:e(()=>[n(t(Fn))]),_:1})]),default:e(()=>[L(" "+d(j.$t("loadbutton")),1)]),_:1},8,["disabled"])]),default:e(()=>[_("div",{innerHTML:j.$t("loadbuttontooltip")},null,8,au)]),_:1},8,["show"]),t(U)||t(o).SSR?(I(),G(Pe,{key:0},[n(t(Se),{to:!1,"display-directive":"show",trigger:"hover",placement:t(o).LANDSCAPE?"left":"bottom","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:t(o).showTooltipsBeforeMounted.value},{trigger:e(()=>[n(ue,{disabled:!t($),size:"large",onClick:Z[2]||(Z[2]=de=>q(t(x))),round:"",style:{width:"100%","background-color":"white","font-size":"1.3em"}},{icon:e(()=>[n(ie,{size:"large",color:"gray"},{default:e(()=>[n(t(En))]),_:1})]),default:e(()=>[L(" "+d(j.$t("loadfolderbutton")),1)]),_:1},8,["disabled"])]),default:e(()=>[_("div",{innerHTML:j.$t("loadfoldertooltip")},null,8,lu)]),_:1},8,["placement","show"]),t(o).IS_SP?fe("",!0):(I(),X(tu,{key:0,onDrop:le,forbidden:!t($),_class:"drop-target"},null,8,["forbidden"]))],64)):fe("",!0)]),_:1})]),_:1}),n(R,{vertical:""},{default:e(()=>[n(R,{wrap:t(o).IS_SP,align:"center",justify:"stretch"},{default:e(()=>[n(t(Se),{to:!1,"display-directive":"show",trigger:"hover","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:t(o).showTooltipsBeforeMounted.value},{trigger:e(()=>[_("span",su,d(j.$t("TargetFileTypeExt"))+": ",1)]),default:e(()=>[L(d(j.$t("TargetFileTypeExtTooltip")),1)]),_:1},8,["show"]),n(t(Se),{"keep-alive-on-hover":!1,placement:"right",style:{"max-width":"200px"},duration:0,delay:0},{trigger:e(()=>[n(ce,{trigger:"click",width:"trigger",size:"tiny",value:t(h),"onUpdate:value":Z[3]||(Z[3]=de=>Ie(h)?h.value=de:null),options:r,"render-option":c,"consistent-menu-width":!1},null,8,["value"])]),default:e(()=>[L(" "+d(D(t(h)).replace(/,/g,", ")),1)]),_:1})]),_:1},8,["wrap"]),t(h)==="edit_type"?(I(),X(t(Se),{key:0,trigger:"hover","keep-alive-on-hover":!1,placement:"bottom-start",show:t(m),duration:0,delay:0},{trigger:e(()=>[_("div",iu,[n(De,{trigger:"manual",placement:"right-end",show:t(h)==="edit_type"&&t(p)!=="success"&&!!t(m)},{trigger:e(()=>[n(_e,{value:t(g),"onUpdate:value":Z[4]||(Z[4]=de=>Ie(g)?g.value=de:null),status:t(p),disabled:t(h)!=="edit_type",onFocus:Z[5]||(Z[5]=de=>m.value=!0),onBlur:Z[6]||(Z[6]=de=>m.value=void 0),clearable:!0,size:"small",placeholder:".jpg, .gif, .png",spellcheck:"false"},null,8,["value","status","disabled"])]),default:e(()=>[n(Q,{type:"error","show-icon":!0,title:"Validation error"},{default:e(()=>Z[7]||(Z[7]=[L(" Please correct the extension list."),_("br",null,null,-1),_("ul",null,[_("li",null,"Each extension must begin with a period. "),_("li",null,"Separate each extension with a comma. "),_("li",null,"Use alphameric characters.")],-1)])),_:1,__:[7]})]),_:1},8,["show"])])]),default:e(()=>[_("span",{innerHTML:j.$t("editAcceptTypes")},null,8,ru)]),_:1},8,["show"])):fe("",!0)]),_:1})]),_:1})])]),_("input",{ref_key:"fileinput",ref:y,onInput:ne,onCancel:H,type:"file",multiple:"",accept:t(F),style:{display:"none"}},null,40,uu),_("input",{ref_key:"folderinput",ref:x,webkitdirectory:"",directory:"",onInput:ne,onCancel:H,type:"file",style:{display:"none"}},null,544)],64)}}}),du=Re(cu,[["__scopeId","data-v-79e449e5"]]),pu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function fu(i,s){return I(),G("svg",pu,s[0]||(s[0]=[_("path",{fill:"currentColor","fill-rule":"evenodd",d:"M9.293 7.293a1 1 0 0 1 1.414 0L15.414 12l-4.707 4.707a1 1 0 0 1-1.414-1.414L12.586 12L9.293 8.707a1 1 0 0 1 0-1.414","clip-rule":"evenodd"},null,-1)]))}const gu=ot({name:"stash-chevron-right-duotone",render:fu}),mu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function vu(i,s){return I(),G("svg",mu,s[0]||(s[0]=[_("path",{fill:"currentColor",d:"M5 21q-1.275 0-1.812-1.137t.262-2.113L9 11V5H8q-.425 0-.712-.288T7 4t.288-.712T8 3h8q.425 0 .713.288T17 4t-.288.713T16 5h-1v6l5.55 6.75q.8.975.263 2.113T19 21zm2-3h10l-3.4-4h-3.2zm-2 1h14l-6-7.3V5h-2v6.7zm7-7"},null,-1)]))}const hu=ot({name:"material-symbols-experiment-outline",render:vu}),yu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function _u(i,s){return I(),G("svg",yu,s[0]||(s[0]=[_("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"},[_("path",{d:"M19.5 11c0-.818 0-1.57-.152-1.937s-.441-.657-1.02-1.235l-4.736-4.736c-.499-.499-.748-.748-1.058-.896a2 2 0 0 0-.197-.082C12.014 2 11.661 2 10.956 2c-3.245 0-4.868 0-5.967.886a4 4 0 0 0-.603.603C3.5 4.59 3.5 6.211 3.5 9.456V14c0 3.771 0 5.657 1.172 6.828S7.729 22 11.5 22h8m-7-19.5V3c0 2.828 0 4.243.879 5.121C14.257 9 15.672 9 18.5 9h.5"}),_("path",{d:"M14.5 13.999v5M12 19H9l3-5H9m8 3v-3h2a1.5 1.5 0 0 1 0 3zm0 0v2"})],-1)]))}const wu=ot({name:"hugeicons-zip02",render:_u}),bu={style:{"white-space":"nowrap"}},ku=ye({__name:"settings-output",props:Ve({quality:{},format:{},isMultithreadEnabled:{type:Boolean}},{method:{required:!0},methodModifiers:{},"target-folder-handle":{},"target-folder-handleModifiers":{},"action-on-duplicate":{default:"prompt"},"action-on-duplicateModifiers":{}}),emits:Ve(["update:format","update:quality"],["update:method","update:target-folder-handle","update:action-on-duplicate"]),setup(i,{emit:s}){const u=i,l=Te(i,"method"),o=Te(i,"target-folder-handle");Te(i,"action-on-duplicate");const a=s,{t:r}=Ze(),c=pt();$n();const f=at(Ye),w=v([]),k=["image/jpeg","image/png","image/gif","image/bmp","image/avif","image/webp"],z=ze({get:()=>u.format,set:O=>{O=y(O),a("update:format",O)}}),m=ze({get:()=>u.quality,set:O=>{a("update:quality",O)}}),T=ze(()=>/png|bmp/i.test(z.value)),F=v(null),p=v(!1),$=ze(()=>l.value==="fs"&&!o.value),h=ze(()=>l.value==="fs");we(()=>u.isMultithreadEnabled,O=>{O||(l.value="zip")});const g=ri();g&&S(),Be(()=>{x(),!g&&h.value&&(l.value="zip"),h.value&&q()});async function S(){await _i();const O=await wi();O?o.value=O:l.value="zip"}function y(O){return w.value.indexOf(O)<0&&(O=w.value[0]),O}function x(){for(const O of k)F.value.toDataURL(O).indexOf(O)>=0&&w.value.push(O);w.value.length===0&&w.value.push(k[0])}function U(){return o.value.name}function q(){l.value="fs",Wl(p,200,!1)}async function H(){const O=await ui();if(!O){if(await c.warning({title:"Rejected",positiveText:"OK",maskClosable:!0,content:r("settings.outputFolderDenied")}),o.value)return;l.value="zip"}o.value=O,dn(O)}function ne(){o.value=null,dn(null)}return(O,D)=>{const C=xe,le=Pt,J=Ce,Y=Se,j=Dt,Z=Dn,R=wu,ie=ml,ue=Pa,ce=hu,_e=gu,Q=La,De=Ln,de=Ee,be=Gt,Le=lt,ve=Pn,Me=ft,Ue=qt;return I(),G(Pe,null,[n(J,{vertical:"",justify:"center",class:"body"},{default:e(()=>[n(J,{vertical:""},{default:e(()=>[n(Y,{to:!1,"display-directive":"show",show:t(f).showTooltipsBeforeMounted.value,trigger:"hover",placement:t(f).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:e(()=>[n(J,{align:"center",wrap:!1},{default:e(()=>[n(C,null,{default:e(()=>[n(t(Fn))]),_:1}),L(d(t(r)("settings.outputType"))+": ",1),n(le,{value:z.value,"onUpdate:value":D[0]||(D[0]=ke=>z.value=ke),options:w.value.map(ke=>({value:ke,label:ke})),"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),_:1})]),default:e(()=>[L(" "+d(t(r)("settings.imageTypeTooltip")),1)]),_:1},8,["show","placement"]),n(Y,{to:!1,"display-directive":"show",show:t(f).showTooltipsBeforeMounted.value,trigger:"hover",placement:t(f).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:e(()=>[n(J,{align:"center"},{default:e(()=>[n(J,{align:"start",wrap:!1},{default:e(()=>[n(C,null,{default:e(()=>[n(t(In))]),_:1}),_("span",bu,d(t(r)("settings.outputQuality"))+":",1),n(J,{align:"center",justify:"space-between"},{default:e(()=>[n(j,{tooltip:!1,value:m.value,"onUpdate:value":D[1]||(D[1]=ke=>m.value=ke),step:1,style:{width:"120px"},disabled:T.value},null,8,["value","disabled"]),n(Z,{onBlur:D[2]||(D[2]=ke=>m.value=m.value==null?0:m.value),value:m.value,"onUpdate:value":D[3]||(D[3]=ke=>m.value=ke),step:"1",min:"0",max:"100",disabled:T.value,style:{width:"90px"},size:"small"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:e(()=>[L(" "+d(t(r)("settings.qualitytooltip")),1)]),_:1},8,["show","placement"])]),_:1}),n(Ue,{"trigger-areas":["arrow","main"],"default-expanded-names":h.value?"def":void 0},{default:e(()=>[n(Me,{name:"def",disabled:h.value},{header:e(()=>[L(d(O.$t("settings.changeSaveMethod")),1)]),default:e(()=>[n(J,{vertical:"",align:"stretch",class:"method-box",size:1},{default:e(()=>[n(ie,{checked:l.value==="zip","onUpdate:checked":D[4]||(D[4]=ke=>ke&&(l.value="zip"))},{default:e(()=>[n(J,{align:"center",size:2,class:nt(l.value==="zip"?"method-active":"method-inactive")},{default:e(()=>[n(C,{size:"1.5em"},{default:e(()=>[n(R)]),_:1}),_("span",null,d(O.$t("settings.saveAsZIP"))+" ("+d(O.$t("Default"))+") ",1)]),_:1},8,["class"])]),_:1},8,["checked"]),n(ie,{disabled:!t(g)||!O.isMultithreadEnabled,checked:h.value,"onUpdate:checked":D[5]||(D[5]=ke=>ke&&t(g)&&q())},{default:e(()=>[n(J,{align:"center",size:2,wrap:!1,class:nt(h.value?"method-active":"method-inactive")},{default:e(()=>[n(C,{size:"1.5em"},{default:e(()=>[n(ue)]),_:1}),n(J,{align:"center",size:1},{default:e(()=>[L(d(O.$t("settings.saveToSpecifiedFolder"))+" ",1),n(J,{style:{"font-size":"0.8em",color:"gray","font-weight":"normal"},size:0,align:"center"},{default:e(()=>[D[7]||(D[7]=L(" (")),n(ce),L(d(O.$t("experimental"))+") ",1)]),_:1,__:[7]})]),_:1})]),_:1},8,["class"])]),_:1},8,["disabled","checked"]),n(Ge,null,{default:e(()=>[h.value?(I(),X(J,{key:0,style:{"margin-left":"2em"},wrap:!1},{default:e(()=>[n(Le,{trigger:"manual",placement:"right-start",show:p.value&&$.value,"keep-alive-on-hover":!0},{trigger:e(()=>[n(de,{onClick:D[6]||(D[6]=ke=>H()),size:"small",ghost:"",color:o.value?"green":"red",style:{"justify-content":"start","flex-grow":"1"}},{icon:e(()=>[n(_e)]),default:e(()=>[o.value?(I(),X(J,{key:0,wrap:!1,size:2,align:"center"},{default:e(()=>[n(Q),n(De,{style:{"max-width":"15em"}},{default:e(()=>[L(d(U()),1)]),_:1})]),_:1})):(I(),X(J,{key:1,wrap:!1,size:2,align:"center"},{default:e(()=>[L(d(O.$t("settings.chooseOutputFolder")),1)]),_:1}))]),_:1},8,["color"])]),default:e(()=>[n(be,{type:"error","show-icon":!0,title:O.$t("settings.chooseOutputFolderTooltip")},null,8,["title"])]),_:1},8,["show"]),o.value?(I(),X(de,{key:0,size:"small",onClick:ne,title:O.$t("Cancel")},{icon:e(()=>[n(ve)]),_:1},8,["title"])):fe("",!0)]),_:1})):fe("",!0)]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1},8,["default-expanded-names"])]),_:1}),_("canvas",{ref_key:"canvas",ref:F,width:"1",height:"1",style:{display:"none"}},null,512)],64)}}}),zu=Re(ku,[["__scopeId","data-v-31d6c0c9"]]),Su={style:{"font-size":"1.1em"}},Cu={style:{"font-size":"1.1em"}},Tu={style:{width:"4em","text-align":"left"}},xu={style:{width:"4em","text-align":"left"}},Rt=100,mn=2e3,vn=4096,hn=4096,Au=100,Iu=100,Lu=ye({__name:"settings-adv",props:{expanded:{type:Boolean,required:!1},expandedModifiers:{},multithread:{type:Boolean,required:!0},multithreadModifiers:{},threadCount:{required:!0},threadCountModifiers:{},maxZipSize:{required:!0},maxZipSizeModifiers:{},retainExt:{type:Boolean,required:!0},retainExtModifiers:{},useFolderNameForZip:{type:Boolean,required:!0},useFolderNameForZipModifiers:{},shrinkImage:{type:Boolean,required:!0},shrinkImageModifiers:{},maxWidth:{required:!0},maxWidthModifiers:{},maxHeight:{required:!0},maxHeightModifiers:{}},emits:["update:expanded","update:multithread","update:threadCount","update:maxZipSize","update:retainExt","update:useFolderNameForZip","update:shrinkImage","update:maxWidth","update:maxHeight"],setup(i){const s=at(Ye),u={trigger:"hover",keepAliveOnHover:!1},l=Te(i,"expanded"),o=Te(i,"multithread"),a=Te(i,"threadCount"),r=Te(i,"maxZipSize"),c=Te(i,"retainExt"),f=Te(i,"useFolderNameForZip"),w=Te(i,"shrinkImage"),k=Te(i,"maxWidth"),z=Te(i,"maxHeight");we(Ne,h=>{h>1||(o.value=!1),a.value>h&&(a.value=h)},{immediate:!0});const m=v(!1);let T=!1,F=()=>{};const p=ze(()=>o.value&&Ne.value>1);Be(()=>{Ne.value>1&&typeof a.value>"u"&&(a.value=Math.max(Ne.value,2))});async function $(){T=!1,await new Promise(h=>{m.value=!0,F=h}),T&&as()}return(h,g)=>{const S=xe,y=Ee,x=yl,U=Ce,q=Dt,H=Dn,ne=ft,O=qt,D=zt;return I(),G(Pe,null,[n(U,{justify:"center"},{default:e(()=>[n(O,{"display-directive":"show","default-expanded-names":l.value?["collapitem"]:"","on-update:expanded-names":C=>l.value=!!String(C),"trigger-areas":["arrow","main"],class:nt(["settings-body",l.value?"expand-adv-settings":""])},vl({arrow:e(()=>[_("span",Su,[n(S,{style:pe(l.value&&{top:"8px"})},{default:e(()=>[n(t(bl))]),_:1},8,["style"]),n(S,null,{default:e(()=>[n(t(kl))]),_:1})])]),default:e(()=>[n(ne,{name:"collapitem"},{header:e(()=>[_("span",Cu,d(h.$t("settings.advancedSettings")),1)]),default:e(()=>[n(U,{vertical:"",style:{"padding-left":"2em"}},{default:e(()=>[n(t(Se),vt(ht(u)),{trigger:e(()=>[n(U,{vertical:""},{default:e(()=>[n(U,{wrap:!1,align:"center"},{default:e(()=>[n(y,{text:"",disabled:!t(Ne),style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:g[2]||(g[2]=C=>o.value=!o.value)},{icon:e(()=>[n(S,null,{default:e(()=>[n(t(hl))]),_:1})]),default:e(()=>[L(" "+d(h.$t("settings.enableMultiThreads")),1)]),_:1},8,["disabled"]),n(x,{value:o.value,"onUpdate:value":g[3]||(g[3]=C=>o.value=C),disabled:!t(Ne),size:"small"},null,8,["value","disabled"])]),_:1}),n(U,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:e(()=>[n(q,{value:a.value,"onUpdate:value":g[4]||(g[4]=C=>a.value=C),disabled:!t(Ne)||!o.value,step:1,min:2,max:t(Ne),style:{width:"120px"}},null,8,["value","disabled","max"]),n(H,{onBlur:g[5]||(g[5]=C=>a.value=a.value==null?2:a.value),size:"tiny",value:a.value,"onUpdate:value":g[6]||(g[6]=C=>a.value=C),disabled:!t(Ne)||!o.value,step:1,min:2,max:t(Ne),style:{width:"10em"}},{suffix:e(()=>[L(d(h.$t("threads",a.value)),1)]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:e(()=>[L(" "+d(h.$t("settings.multiThreadsTooltip")),1)]),_:1},16),n(t(Se),vt(ht(u)),{trigger:e(()=>[n(U,{vertical:""},{default:e(()=>[n(U,{wrap:!1,align:"center"},{default:e(()=>[n(y,{text:"",focusable:!1,style:{"white-space":"nowrap","font-size":"smaller"}},{icon:e(()=>[n(S,{style:{"vertical-align":"middle"}},{default:e(()=>[n(t(_l))]),_:1})]),default:e(()=>[L(" "+d(h.$t("settings.maxZipFileSize"))+": ",1)]),_:1})]),_:1}),n(U,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:e(()=>[n(q,{tooltip:!1,value:r.value,"onUpdate:value":g[7]||(g[7]=C=>r.value=C),step:1,min:Rt,max:mn,style:{width:"120px"}},null,8,["value"]),n(H,{onBlur:g[8]||(g[8]=C=>r.value=r.value==null?Rt:r.value),size:"tiny",value:r.value,"onUpdate:value":g[9]||(g[9]=C=>r.value=C),step:"1",min:Rt,max:mn,style:{width:"10em"}},{suffix:e(()=>g[25]||(g[25]=[L("(MB)")])),_:1},8,["value"])]),_:1})]),_:1})]),default:e(()=>[L(" "+d(h.$t("settings.maxZipFileSizeTooltip")),1)]),_:1},16),n(t(Se),vt(ht(u)),{trigger:e(()=>[n(U,{wrap:!1,align:"center"},{default:e(()=>[n(y,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:g[10]||(g[10]=C=>f.value=!f.value)},{icon:e(()=>[n(S,null,{default:e(()=>[n(t(En))]),_:1})]),default:e(()=>[L(" "+d(h.$t("settings.useFolderNameForZip")),1)]),_:1}),n(x,{value:f.value,"onUpdate:value":g[11]||(g[11]=C=>f.value=C),size:"small"},null,8,["value"])]),_:1})]),default:e(()=>[L(" "+d(h.$t("settings.useFolderNameForZipTooltip")),1)]),_:1},16),n(t(Se),vt(ht(u)),{trigger:e(()=>[n(U,{wrap:!1,align:"center"},{default:e(()=>[n(y,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:g[12]||(g[12]=C=>c.value=!c.value)},{icon:e(()=>[n(S,null,{default:e(()=>[n(t(An))]),_:1})]),default:e(()=>[L(" "+d(h.$t("settings.retainOriginalExtension")),1)]),_:1}),n(x,{value:c.value,"onUpdate:value":g[13]||(g[13]=C=>c.value=C),size:"small"},null,8,["value"])]),_:1})]),default:e(()=>[L(" "+d(h.$t("settings.retainExtTooltip")),1)]),_:1},16),n(t(Se),vt(ht(u)),{trigger:e(()=>[n(U,{vertical:""},{default:e(()=>[n(U,{wrap:!1,align:"center"},{default:e(()=>[n(y,{disabled:!p.value,text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:g[14]||(g[14]=C=>w.value=!w.value)},{icon:e(()=>[n(S,null,{default:e(()=>[n(t(wl))]),_:1})]),default:e(()=>[L(" "+d(h.$t("settings.shrinkImage")),1)]),_:1},8,["disabled"]),n(x,{disabled:!p.value,value:w.value,"onUpdate:value":g[15]||(g[15]=C=>w.value=C),size:"small"},null,8,["disabled","value"])]),_:1}),n(U,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:e(()=>[n(q,{value:k.value,"onUpdate:value":g[16]||(g[16]=C=>k.value=C),disabled:!w.value||!p.value,step:1,min:Au,max:vn,style:{width:"120px"}},null,8,["value","disabled"]),n(H,{size:"tiny",onBlur:g[17]||(g[17]=C=>k.value=k.value==null?8:k.value),value:k.value,"onUpdate:value":g[18]||(g[18]=C=>k.value=C),disabled:!w.value||!p.value,step:1,min:8,max:vn*4,style:{"max-width":"15em","text-align":"right"}},{prefix:e(()=>[_("span",Tu,d(h.$t("width")),1)]),suffix:e(()=>g[26]||(g[26]=[L("px")])),_:1},8,["value","disabled","max"])]),_:1}),n(U,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:e(()=>[n(q,{value:z.value,"onUpdate:value":g[19]||(g[19]=C=>z.value=C),disabled:!w.value||!p.value,step:1,min:Iu,max:hn,style:{width:"120px"}},null,8,["value","disabled"]),n(H,{size:"tiny",onBlur:g[20]||(g[20]=C=>z.value=z.value==null?8:z.value),value:z.value,"onUpdate:value":g[21]||(g[21]=C=>z.value=C),disabled:!w.value||!p.value,step:1,min:8,max:hn*4,style:{"max-width":"15em","text-align":"right"}},{prefix:e(()=>[_("span",xu,d(h.$t("height")),1)]),suffix:e(()=>g[27]||(g[27]=[L("px")])),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:e(()=>[L(" "+d(h.$t("settings.shrinkImageTooltip")),1)]),_:1},16)]),_:1})]),_:1})]),_:2},[l.value?{name:"header-extra",fn:e(()=>[n(t(Se),{"keep-alive-on-hover":!1,duration:0,delay:0},{trigger:e(()=>[n(y,{onClick:g[0]||(g[0]=C=>$()),size:"tiny",style:{"font-size":"xx-small"}},{default:e(()=>[L(d(h.$t("reset")),1)]),_:1})]),default:e(()=>[L(" "+d(h.$t("settings.resetButtonTooltip")),1)]),_:1}),t(s).IS_DEV?(I(),G("button",{key:0,onClick:g[1]||(g[1]=C=>t(ls)())},"delcfg")):fe("",!0)]),key:"0"}:void 0]),1032,["default-expanded-names","on-update:expanded-names","class"])]),_:1}),n(D,{preset:"confirm",type:"info",show:t(m),"onUpdate:show":g[22]||(g[22]=C=>Ie(m)?m.value=C:null),title:h.$t("reset"),"positive-text":h.$t("OK"),"negative-text":h.$t("cancel"),onPositiveClick:g[23]||(g[23]=C=>Ie(T)?T.value=!0:T=!0),onAfterLeave:g[24]||(g[24]=C=>t(F)())},{default:e(()=>[L(d(h.$t("warnAboutResetMsg")),1)]),_:1},8,["show","title","positive-text","negative-text"])],64)}}}),$u=Re(Lu,[["__scopeId","data-v-58cc8d3c"]]),Fu={},Eu={style:{color:"gray","padding-left":"20px"}},Du=["innerHTML"];function Pu(i,s){const u=kn,l=Ce;return I(),X(l,{vertical:"",justify:"end"},{default:e(()=>[n(u,{style:{margin:"0px"}}),n(l,{justify:"center"},{default:e(()=>[_("ul",Eu,[(I(!0),G(Pe,null,it(i.$tm("descriptions"),o=>(I(),G("li",{key:o,style:{"text-align":"left"},innerHTML:o},null,8,Du))),128))])]),_:1})]),_:1})}const Ou=Re(Fu,[["render",Pu]]);function Mu(i={}){const{immediate:s=!1,onNeedRefresh:u,onOfflineReady:l,onRegistered:o,onRegisteredSW:a,onRegisterError:r}=i;let c,f,w;const k=async(m=!0)=>{await f,w==null||w()};async function z(){if("serviceWorker"in navigator){if(c=await Ae(async()=>{const{Workbox:m}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:m}},[]).then(({Workbox:m})=>new m("/avif2jpeg/dist/sw.js",{scope:"/avif2jpeg/dist/",type:"classic"})).catch(m=>{r==null||r(m)}),!c)return;w=()=>{c==null||c.messageSkipWaiting()};{let m=!1;const T=()=>{m=!0,c==null||c.addEventListener("controlling",F=>{F.isUpdate&&window.location.reload()}),u==null||u()};c.addEventListener("installed",F=>{typeof F.isUpdate>"u"?typeof F.isExternal<"u"&&F.isExternal?T():!m&&(l==null||l()):F.isUpdate||l==null||l()}),c.addEventListener("waiting",T)}c.register({immediate:s}).then(m=>{a?a("/avif2jpeg/dist/sw.js",m):o==null||o(m)}).catch(m=>{r==null||r(m)})}}return f=z(),k}function Uu(i={}){const{immediate:s=!0,onNeedRefresh:u,onOfflineReady:l,onRegistered:o,onRegisteredSW:a,onRegisterError:r}=i,c=v(!1),f=v(!1);return{updateServiceWorker:Mu({immediate:s,onNeedRefresh(){c.value=!0,u==null||u()},onOfflineReady(){f.value=!0,l==null||l()},onRegistered:o,onRegisteredSW:a,onRegisterError:r}),offlineReady:f,needRefresh:c}}const Bu={style:{"line-height":"0px"}},Ru=["innerHTML"],Nu=ye({__name:"PWAPrompt",setup(i){const s=v(null),u=v(!1),l=v(void 0),o=v(!1),a=v("unknown");window.addEventListener("beforeinstallprompt",p=>{p.preventDefault(),s.value=p,u.value=!0,l.value=!1}),window.addEventListener("appinstalled",p=>{m()});const{needRefresh:r,updateServiceWorker:c}=Uu({onOfflineReady(){},async onNeedRefresh(){const p=await fetch(location.origin+"/avif2jpeg/dist/version.txt",{cache:"no-store"});if(p.status!==200)return;const $=await p.text();$&&(a.value=$)},onRegisterError(p){}});Be(async()=>{setTimeout(f,100)});async function f(){await w()&&(l.value=!!(k()||!u.value),l.value)}async function w(){var $;return await(($=navigator.userAgentData)==null?void 0:$.getHighEntropyValues(["brands"]).then(h=>h.brands.some(g=>g.brand.includes("Chromium")||g.brand.includes("Google Chrome")||g.brand.includes("Microsoft Edge"))))||/Chrome|Chromium|Edg\//.test(navigator.userAgent)}function k(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0}async function z(){if(s.value){s.value.prompt();const p=await s.value.userChoice;s.value=null,p.outcome==="accepted"&&setTimeout(m,500)}}function m(){var p;(p=navigator.serviceWorker)==null||p.ready.then($=>{var h;l.value||((h=$.active)==null||h.postMessage("app-installed"),l.value=!0)})}function T(){o.value=!0,setTimeout(()=>o.value=!1,60*60*1e3)}async function F(){r.value=!1,await c()}return(p,$)=>{const h=xe,g=Ce,S=Se,y=Ee,x=Gt;return I(),G("div",Bu,[l.value===!0?(I(),X(S,{key:0,placement:"bottom"},{trigger:e(()=>[n(g,{id:"app-installed",align:"center",size:1},{default:e(()=>[n(h,{component:t(ln)},null,8,["component"]),$[0]||($[0]=L("PWA "))]),_:1,__:[0]})]),default:e(()=>[L(d(p.$t("PWAInstalledTooltip")),1)]),_:1})):l.value===!1&&s.value&&!t(r)?(I(),X(S,{key:1,placement:"bottom","keep-alive-on-hover":!0,style:{"max-width":"40vw"},delay:300,duration:150,"z-index":10},{trigger:e(()=>[n(y,{onClick:z,size:"tiny"},{icon:e(()=>[n(h,{component:t(ln)},null,8,["component"])]),default:e(()=>[L(" "+d(p.$t("installAsApp")),1)]),_:1})]),default:e(()=>[_("div",{id:"pwa-tooltip",innerHTML:p.$t("PWAinstallAsAppTooltip")},null,8,Ru)]),_:1})):fe("",!0),n(Ge,null,{default:e(()=>[t(r)&&!o.value?(I(),X(x,{key:0,onClose:T,type:"info",closable:""},{default:e(()=>[n(g,{justify:"space-between",align:"center"},{default:e(()=>[n(g,{vertical:"",class:"message",size:1},{default:e(()=>[_("span",null,d(a.value),1),_("span",null,d(p.$t("PWAUpdateMessage")),1)]),_:1}),n(g,{size:8},{default:e(()=>[n(y,{onClick:F,round:"",type:"primary",size:"small"},{default:e(()=>[L(d(p.$t("Reload")),1)]),_:1}),n(y,{onClick:T,round:"",size:"small"},{default:e(()=>[L(d(p.$t("close")),1)]),_:1})]),_:1})]),_:1})]),_:1})):fe("",!0)]),_:1})])}}}),ju=["innerHTML"],Zu=ye({__name:"switch-lang",props:{delay:{}},emits:["ready","lang-ready","lang-change","lang-change-by-user"],async setup(i,{emit:s}){let u,l;const o=at(Ye),a=Wt(),{locale:r,t:c}=Ze(),f=pt(),w=i,k=s,z=Object.entries(Rs).map(([S,y])=>({label:y,value:S}));z.sort((S,y)=>{const x=S.label,U=y.label;return x>U?1:x<U?-1:0});let m="";Be(()=>{a.afterEach((S,y,x)=>{p(),o.switchToolTipVisibility()})}),[u,l]=zl(()=>p()),await u,l(),T(),k("ready");function T(){const S="/avif2jpeg/dist/",y=[];for(const x of _t){if(a.currentRoute.value.path.includes(x))continue;const U={rel:"alternate",hreflang:x,href:S+x};y.push(U)}y.push({rel:"alternate",hreflang:"x-default",href:S}),Sl({title:c("title"),meta:[{property:"og:title",content:c("title")},{property:"og:description",content:c("metaDescription")}],link:[...y]})}async function F(S){if(S!==r.value||It.global.availableLocales.indexOf(S)===-1){if(k("lang-change",S),await Hl(w.delay),!await Ns(S))return f.error({title:c("Failed to get language file"),positiveText:"OK",content:()=>se("div",[`lang: ${S}`])}),k("lang-ready",""),!1;r.value=S,document.title=c("title"),document.documentElement.lang=S,await Fe()}return k("lang-ready",S),!0}async function p(){var x;const y=((x=(a.currentRoute.value.path||"").match(/([^/]+)\/?$/))==null?void 0:x[1])||"";y&&_t.includes(y)?await F(y)&&m===y&&k("lang-change-by-user",y):await $()}async function $(){const S=h().toLowerCase(),y=S.split(/[-_]/)[0];if(_t.includes(y)){let x=y;if(y==="zh")switch(S){case"zh-hant":case"zh-mo":case"zh-hk":case"zh-tw":x="zh-hant"}await F(x)}}function h(){const S=window.navigator;return S.language||S.userLanguage||S.browserLanguage}function g(S){m=S;const y=S?S+"/":"";a.push("/"+y)}return(S,y)=>{const x=xe,U=Ht("router-link"),q=Se,H=Pt,ne=Ce;return I(),X(ne,{align:"center",size:2},{default:e(()=>[t(a).currentRoute.value.path!=="/"?(I(),X(q,{key:0,trigger:"hover","keep-alive-on-hover":!1,placement:"left",duration:0,delay:50},{trigger:e(()=>[n(U,{to:"/",onClick:y[0]||(y[0]=O=>k("lang-change-by-user","")),style:{color:"gray","line-height":"0px","font-size":"1.2em"}},{default:e(()=>[n(x,{component:t(Cl)},null,8,["component"])]),_:1})]),default:e(()=>[L(d(t(c)("selectLangCloseTooltip")),1)]),_:1})):fe("",!0),n(q,{to:!1,trigger:"hover","keep-alive-on-hover":!1,placement:t(o).LANDSCAPE.value?"left":"bottom",duration:0,delay:50},{trigger:e(()=>[n(H,{ref:"langselect",size:"tiny",style:{width:"auto"},"consistent-menu-width":!1,options:t(z),value:t(r),"onUpdate:value":g},{arrow:e(()=>[n(x,null,{default:e(()=>[n(t(Tl))]),_:1})]),_:1},8,["options","value"])]),default:e(()=>[_("div",{innerHTML:S.$t("selectLanguage")},null,8,ju)]),_:1},8,["placement"])]),_:1})}}}),Ye=Symbol("global variables"),Hu=ye({__name:"Avif2Jpeg",emits:["ready"],setup(i,{emit:s}){const{t:u,locale:l}=Ze(),o=200,a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),r=!1,c=v([]),f=v([]);v(0);let w=v(void 0);const k=v(!0),z=v(!1),m=v(!1),T=v(!1),F=v(!0);v(!1);const p=v(null),$=v(!1),h=v();Il(Ye,{showTooltipsBeforeMounted:w,LANDSCAPE:k,IS_SP:a,IS_DEV:r,switchToolTipVisibility:q,SSR:!1}),Be(()=>{H(),window.addEventListener("resize",H),q(),setTimeout(()=>m.value=!0,3e3)}),At(()=>{window.removeEventListener("resize",H)});function g(){var le;!((le=bn().path.match(/[^/]+(?=\/?$)/))==null?void 0:le[0])&&W.lang&&Wt().push("/"+W.lang)}let S=0;function y(){T.value=!1,S=Date.now()}function x(D){W.lang=D}function U(){const D=F.value?0:Math.max(0,o-(Date.now()-S));F.value=!1,Fe(()=>{setTimeout(()=>T.value=!0,D)})}async function q(){}function H(){const D=document.body.clientWidth,C=document.body.clientHeight;k.value=D*.75>C||D>900}async function ne(D){W.autoStartConversion&&(c.value.length=0,await Fe()),f.value=D}function O(D){$.value=D}return(D,C)=>{const le=Ht("ClientOnly"),J=es,Y=Ce,j=xe,Z=lt;return I(),X(Y,{vertical:"",align:"stretch",class:"avif2jpeg"},{default:e(()=>[n(Zs,null,{"lang-switch":e(()=>[(I(),X(xl,null,{default:e(()=>[n(Zu,{onLangChange:y,onLangReady:U,onLangChangeByUser:x,onReady:g,delay:t(F)?0:o},null,8,["delay"])]),_:1}))]),_:1}),n(le,null,{default:e(()=>[n(Nu)]),_:1}),n(Ge,{name:"fade"},{default:e(()=>[Ke(n(Y,{vertical:"",align:"stretch",justify:"space-between",style:{height:"100%"}},{default:e(()=>[n(Y,{justify:"space-around",vertical:"",style:{height:"100%"}},{default:e(()=>[n(qs),n(Y,{justify:"center",align:"center",style:{"margin-top":"0.3em"}},{default:e(()=>[n(du,{key:"key-fselector",target:t(W).acceptTypeValue,"onUpdate:target":C[0]||(C[0]=R=>t(W).acceptTypeValue=R),userExtensions:t(W).editedAcceptTypes,"onUpdate:userExtensions":C[1]||(C[1]=R=>t(W).editedAcceptTypes=R),"disable-notifying-folder-select":t(W).disableNotifyingFolderSelect,"onUpdate:disableNotifyingFolderSelect":C[2]||(C[2]=R=>t(W).disableNotifyingFolderSelect=R),"auto-start-opt":t(W).autoStartConversion,"onUpdate:autoStartOpt":C[3]||(C[3]=R=>t(W).autoStartConversion=R),forbidden:t(z),onInput:ne,onClick:C[4]||(C[4]=R=>O(!0)),onCancel:C[5]||(C[5]=R=>O(!1))},null,8,["target","userExtensions","disable-notifying-folder-select","auto-start-opt","forbidden"]),n(xt,null,{default:e(()=>[Ke(n(J,{key:"key-filelist","file-list":t(c),"onUpdate:fileList":C[6]||(C[6]=R=>Ie(c)?c.value=R:null),"additional-files":t(f)},null,8,["file-list","additional-files"]),[[Qe,t(c).length]])]),_:1})]),_:1}),n(Y,{vertical:"",align:"center"},{default:e(()=>[n(Z,{trigger:"manual",placement:"top","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:e(()=>[n(j,{size:"5vh",color:"#DADADA",style:{margin:"0px"}},{default:e(()=>[n(t(Al))]),_:1})]),default:e(()=>[C[22]||(C[22]=_("span",null,"CONVERT TO👇",-1))]),_:1,__:[22]})]),_:1}),n(Y,{vertical:"",align:"center"},{default:e(()=>[n(zu,{format:t(W).imageFormat,"onUpdate:format":C[7]||(C[7]=R=>t(W).imageFormat=R),quality:t(W).imageQuality,"onUpdate:quality":C[8]||(C[8]=R=>t(W).imageQuality=R),method:t(W).outputMethod,"onUpdate:method":C[9]||(C[9]=R=>t(W).outputMethod=R),"target-folder-handle":t(p),"onUpdate:targetFolderHandle":C[10]||(C[10]=R=>Ie(p)?p.value=R:null),"is-multithread-enabled":t(W).multithread},null,8,["format","quality","method","target-folder-handle","is-multithread-enabled"])]),_:1}),n(Kr,{input:t(c),format:t(W).imageFormat,quality:t(W).imageQuality,"retain-extension":t(W).retainExtension,maxZipSizeMB:t(W).maxZipSizeMB,threads:t(W).multithread?t(W).threadCount:0,"auto-start":t(W).autoStartConversion,"output-to-dir":t(W).outputMethod==="fs","output-dir-handle":t(W).outputMethod==="fs"?t(p):null,onStart:C[11]||(C[11]=R=>z.value=!0),onEnd:C[12]||(C[12]=R=>z.value=!1)},{"lang-switch":e(()=>C[23]||(C[23]=[])),_:1},8,["input","format","quality","retain-extension","maxZipSizeMB","threads","auto-start","output-to-dir","output-dir-handle"]),n(Y,{vertical:"",align:t(h)?"center":"end",style:{"padding-right":"1em"}},{default:e(()=>[n($u,{"retain-ext":t(W).retainExtension,"onUpdate:retainExt":C[13]||(C[13]=R=>t(W).retainExtension=R),"use-folder-name-for-zip":t(W).useFolderNameForZip,"onUpdate:useFolderNameForZip":C[14]||(C[14]=R=>t(W).useFolderNameForZip=R),"max-zip-size":t(W).maxZipSizeMB,"onUpdate:maxZipSize":C[15]||(C[15]=R=>t(W).maxZipSizeMB=R),multithread:t(W).multithread,"onUpdate:multithread":C[16]||(C[16]=R=>t(W).multithread=R),"thread-count":t(W).threadCount,"onUpdate:threadCount":C[17]||(C[17]=R=>t(W).threadCount=R),expanded:t(h),"onUpdate:expanded":C[18]||(C[18]=R=>Ie(h)?h.value=R:null),"shrink-image":t(W).shrinkImage,"onUpdate:shrinkImage":C[19]||(C[19]=R=>t(W).shrinkImage=R),"max-width":t(W).maxWidth,"onUpdate:maxWidth":C[20]||(C[20]=R=>t(W).maxWidth=R),"max-height":t(W).maxHeight,"onUpdate:maxHeight":C[21]||(C[21]=R=>t(W).maxHeight=R)},null,8,["retain-ext","use-folder-name-for-zip","max-zip-size","multithread","thread-count","expanded","shrink-image","max-width","max-height"])]),_:1},8,["align"]),n(Ou)]),_:1})]),_:1},512),[[Qe,t(T)]])]),_:1})]),_:1})}}}),Wu={key:0,style:{"text-align":"center"}},Xt=ye({__name:"App",setup(i){const s={Statistic:{valueFontSize:"1em"},Popover:{borderRadius:"0.4em",boxShadow:"2px 2px 5px 0px #555555"},Tooltip:{},Image:{toolbarColor:"#00000099"}},u=v(!0);return Be(()=>{u.value=!1}),(l,o)=>{const a=El,r=Fl,c=$l,f=Ll,w=Dl;return I(),G(Pe,null,[t(u)?(I(),G("div",Wu," Rendering the page… please wait. ")):fe("",!0),n(w,{"theme-overrides":s,style:{width:"100%",height:"100%"}},{default:e(()=>[n(f,null,{default:e(()=>[n(c,{placement:"top-left",closable:!0,max:50},{default:e(()=>[n(r,null,{default:e(()=>[n(a,null,{default:e(()=>[n(Hu,{class:nt({hide:t(u)})},null,8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}}}),Oa=[{path:"/",name:"Home",component:Xt}];for(const i of _t)Oa.push({path:"/"+i+"/",strict:!0,name:i,component:Xt});Pl(Xt,{routes:Oa,base:"/avif2jpeg/dist/"},({app:i,router:s,routes:u,isClient:l,initialState:o})=>{i.use(It)});
