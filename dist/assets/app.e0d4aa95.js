var Ye=(o,n)=>()=>(n||o((n={exports:{}}).exports,n),n.exports);import{d as de,r as f,u as Ke,a as Xe,o as ze,w as se,b as L,c as V,e as A,f as et,n as tt,F as ee,g as u,h as t,i as he,j as e,N as K,t as y,k as ut,l as at,m as ot,p as De,q as xe,s as lt,v as ke,x as Ie,y as Le,z as Se,A as E,B as nt,C as $,D as Te,E as M,G as Q,H as Ne,I as F,J as Y,K as it,L as J,M as rt,O as st,P as ct,Q as dt,R as ft,S as pt,T as gt,U as vt,V as mt,W as At,X as ht,Y as yt,Z as Et,_ as Ft,$ as _t,a0 as Bt,a1 as bt}from"./vendor.d9c76061.js";var vu=Ye((Pe,Fe)=>{(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))g(l);new MutationObserver(l=>{for(const v of l)if(v.type==="childList")for(const p of v.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&g(p)}).observe(document,{childList:!0,subtree:!0});function s(l){const v={};return l.integrity&&(v.integrity=l.integrity),l.referrerpolicy&&(v.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?v.credentials="include":l.crossorigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function g(l){if(l.ep)return;l.ep=!0;const v=s(l);fetch(l.href,v)}})();var wt=function(){typeof Fe=="object"&&typeof Pe=="object"&&(Fe.exports=B);for(var o=typeof Uint8Array<"u",n=o?Uint8Array:Array,s=new(o?Uint32Array:Array)(256),g=0;g<256;g++){for(var l=g,v=0;v<8;v++)l=1&l?3988292384^l>>>1:l>>>1;s[g]=l}function p(c){var d=[];return encodeURIComponent(c).replace(/%(..)|(.)/g,function(C,_,b){d.push(_?parseInt(_,16):b.charCodeAt(0))}),o?new n(d):d}function I(c){return[255&c,c>>8&255,c>>16&255,c>>24&255]}function B(){this._d={},this._lfh=[],this._curLFHind=0,this._cdh=[],this._cdhLen=0,this._c=0}return B.prototype={add:function(c,d){if(!c)throw new Error("path is empty");if(c=String(c).replace(/\\/g,"/"),/\/{2,}|\\|^\/|^[a-z]+:/i.test(c))throw new Error('invalid path. containing a drive letter, a leading slash, or empty directory name: "'+c+'"');var C=0,_=0;if(d!==void 0){if(!/[^/]+$/.test(c))throw new Error('needs a file name: "'+c+'"');if(!((d=typeof d=="string"?p(d):d)instanceof n))try{if(!(d.buffer||d instanceof Array||d instanceof ArrayBuffer||d instanceof Buffer))throw new Error;d=new Uint8Array(d.buffer||d)}catch{throw new Error("data must be one of type Array, TypedArray, ArrayBuffer, Buffer, or string.")}if(this.has(c))throw new Error("the file already exists: "+c);C=d.length,_=function(N){for(var k=4294967295,j=0,O=N.length;j<O;j++)k=s[255&(k^N[j])]^k>>>8;return(4294967295^k)>>>0}(d)}for(var b=new Date,S=I(b.getFullYear()-1980<<25|b.getMonth()+1<<21|b.getDate()<<16|b.getHours()<<11|b.getMinutes()<<5|b.getSeconds()/2),D=c.replace(/\/+$/,"").split("/"),T="";D.length;){T+=D.shift();var P,z,x,w,U=d&&D.length===0;T+=U?"":"/",this._d[T]||(this._d[T]=!0,this._c++,z=(P=p(T)).length,w=I(x=U?C:0),this._lfh.push([80,75,3,4]),w=[10,0,0,8,0,0].concat(S,I(U?_:0),w,w,[255&z,z>>8&255,0,0]),this._lfh.push(w,P),this._cdh.push([80,75,1,2,10,0].concat(w,[0,0,0,0,0,0,U?0:16,0,0,0],I(this._curLFHind)),P),this._cdhLen+=46+z,this._curLFHind+=30+z+x)}d&&this._lfh.push(d)},has:function(c){return!!this._d[c.replace(/\/+$/,"")]},zip:function(){var c=[80,75,5,6,0,0,0,0,255&this._c,this._c>>8,255&this._c,this._c>>8].concat(I(this._cdhLen),I(this._curLFHind),[0,0]),d=this._lfh.concat(this._cdh,[c]);if(n===Array)_=[].concat.apply([],d);else for(var C=0,_=new n(this._curLFHind+this._cdhLen+c.length),b=0;b<d.length;b++){var S=d[b];_.set(S,C),C+=S.length}return _},url:function(){if(typeof Blob!="function"||typeof URL!="function")return null;var c=this.zip(),c=new Blob([c],{type:"application/zip"});return window.URL.createObjectURL(c)}},B}();let ye=!1,X=!1,re=["image/png"];const Ct=de({name:"converter",emits:["mounted","start","progress","success","failure","complete","prevent","noimage","avifsupport","imgload"],props:{target:[HTMLElement,HTMLDocument],format:{type:String,default:re[0],validator(o){return re.includes(o)}},quality:{type:Number,default:95,validator(o){return o>=0&&o<=100}},accept:String,processing:Boolean,input:Array,sendmessage:Array,style:Object,retainExtension:Boolean},setup(o,n){const s=f(null);let g,l;if(o.target&&!(o.target instanceof Node))throw new Error("target attribute must be a HTMLElement");const v=f(null),p=f(null);Ke();const I=Xe();return ze(async()=>{l=s.value.getContext("2d"),p.value=o.style;const B=v.value;g=o.target||B,Dt(g,l,n,o),re=Lt(),n.emit("mounted",{formats:re}),n.emit("avifsupport",await It())}),se(()=>o.input,B=>{B.length&&Ue(B,l,n,o)}),se(()=>o.sendmessage,([B={},c="info"])=>{if(/destroy/.test(B)){I.destroyAll();return}I[c](B)}),se(()=>o.processing,B=>{B||(X=!0)}),{container:v,canvas:s}}});function Dt(o,n,s,g){document.ondragstart=l=>l.preventDefault(),document.ondragover=l=>l.preventDefault(),o.ondrop=async l=>{var v;l.preventDefault(),Ue((v=l.dataTransfer)==null?void 0:v.files,n,s,g)}}function Ue(o,n,s,g){if(ye){s.emit("prevent");return}let l=xt(o);if(g.accept&&(String(g.accept).toLowerCase(),l=l.filter(v=>g.accept.includes(v.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),!l.length)){s.emit("noimage");return}ye=!0,X=!1,kt(l,n,s,g)}function xt(o){let n;if(o instanceof Event)n=o.target.files;else if(o instanceof File)n=[o];else if(o instanceof FileList||o instanceof Array)n=o;else return console.log("could not find any file"),[];return[...n]}async function kt(o,n,s,g){const l=n.canvas,v=new wt,p=g.format,I=g.quality/100,B=[...p.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg");s.emit("start",{list:o,length:o.length});const c=o.length;let d=0,C=0,_=0,b=null,S="",D="";for(const x of o){if(X)break;const w=x.name,U=x.size,N=x.relativePath||x.webkitRelativePath,k=document.createElement("img");s.emit("progress",{name:w,index:d,length:c,success:C,failure:_}),d++,URL.revokeObjectURL(D),D=URL.createObjectURL(x),k.src=D;const j=await Ee(k).then(()=>!0).catch(()=>!1);if(!k.complete||!j||X){if(_++,s.emit("failure",{file:x,name:w,success:C,failure:_,index:d,length:c}),X)break;continue}const O=k.width,te=k.height;l.width=O,l.height=te,n.drawImage(k,0,0,O,te,0,0,O,te),s.emit("imgload",{width:k.width,height:k.height,img:k});const H=await new Promise(W=>{const q=R=>{b=R,W(R==null?void 0:R.arrayBuffer())};l.toBlob(q,p,I)});if(!H){console.log("failed to toBlob",w),_++,s.emit("failure",{name:w});continue}const ae=H.byteLength,G=(N||w).replace(g.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+B;v.add(G,H),C++,S=G,s.emit("success",{name:w,success:C,failure:_,index:d,length:c,inputSize:U,outputSize:ae})}let T,P;if(b){T=URL.createObjectURL(b);const x=new FileReader;x.readAsDataURL(b),P=await Ee(x).then(w=>w.target.result)}const z=v.url();s.emit("complete",{aborted:X,success:C,failure:_,index:d,length:c,zip:z,lastImage:T,lastImageDataURL:P,name:S}),ye=!1}function It(){const o="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",n=document.createElement("img"),s=Ee(n).then(()=>!0,()=>!1);return n.src=o,s}function Lt(){const o=["image/png","image/jpeg","image/gif","image/bmp","image/avif","image/webp"],n=document.createElement("canvas");n.width=1,n.height=1;const s=[];for(const g of o)n.toDataURL(g).indexOf(g)>=0&&s.push(g);return s}function Ee(o){if(typeof o.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((n,s)=>{o.onload=n,o.onerror=s})}const St=(o,n)=>{const s=o.__vccOpts||o;for(const[g,l]of n)s[g]=l;return s},Tt={ref:"canvas",style:{position:"absolute",width:"1px",height:"1px"}};function Nt(o,n,s,g,l,v){return L(),V(ee,null,[A("div",{ref:"container",class:"droptarget",style:tt(o.style)},[et(o.$slots,"default",{},void 0,!0)],4),A("canvas",Tt,null,512)],64)}const zt=St(Ct,[["render",Nt],["__scopeId","data-v-db3b391d"]]),Ut=A("h3",null,"Used Framework and Libraries",-1),Pt=["href"],jt=de({__name:"licenses",setup(o){const n=f(!1),s={Vue:"https://github.com/vuejs/core/blob/main/LICENSE",Vite:"https://github.com/vitejs/vite/blob/main/LICENSE","Vite SSG":"https://github.com/antfu/vite-ssg/blob/main/LICENSE","Naive UI":"https://github.com/TuSimple/naive-ui/blob/main/LICENSE",Ionicons:"https://github.com/ionic-team/ionicons/blob/main/LICENSE"};return(g,l)=>(L(),V(ee,null,[A("a",{href:"#",onClick:l[0]||(l[0]=v=>n.value=!0),style:{color:"black","font-size":"small"}},"Licenses"),u(e(K),{preset:"dialog",ref:"dialog",show:n.value,"onUpdate:show":l[1]||(l[1]=v=>n.value=v),"positive-text":"OK",title:"Licenses"},{default:t(()=>[Ut,A("ul",null,[(L(),V(ee,null,he(s,(v,p)=>A("li",null,[A("a",{href:v},y(p),9,Pt)])),64))])]),_:1},8,["show"])],64))}}),Ot=0,Rt=32,$t="",Ae={major:Ot,build:Rt,tag:$t},Mt=de({__name:"version",setup(o){const n=`${Ae.major}.${String(Ae.build).padStart(3,"0")}${Ae.tag}`;return(s,g)=>" v"+y(n)}}),Ht=F(" English "),Vt=F(" Switch to English "),Gt=F(" \u65E5\u672C\u8A9E "),Qt=F(" \u65E5\u672C\u8A9E\u306B\u5207\u308A\u66FF\u3048 "),Jt={style:{"text-decoration":"underline",padding:"0px",margin:"0px","text-decoration-style":"double","text-align":"center"}},Wt={style:{color:"black","word-break":"keep-all","overflow-wrap":"break-word"},href:"https://gitcobra.github.io/avif2jpeg/dist/"},qt=["accept"],Zt=["innerHTML"],Yt=["innerHTML"],Kt=A("span",null,"Drag & Drop",-1),Xt=A("span",null,"AVIF Images",-1),eu=["innerHTML"],tu={style:{"white-space":"nowrap"}},uu={style:{color:"gray","padding-left":"20px"}},au=["innerHTML"],ou={style:{"font-size":"x-small","text-align":"center",margin:"0px"}},lu=F("GitHub"),nu=A("br",null,null,-1),iu=["href"],ru=F("DataURI"),su={style:{"text-align":"right"}},cu={style:{"text-align":"right"}},du={style:{position:"relative",width:"1px",height:"1px",overflow:"visible"}},fu={style:{position:"absolute",left:"4px",top:"-16px",transform:"rotate(25deg)",overflow:"visible"}},pu=A("span",{style:{position:"absolute",left:"28px",bottom:"4px",transform:"rotate(25deg)","white-space":"nowrap","font-size":"small","font-family":"impact",color:"rgba(0,255,0, 0.5)"}},"ZIP",-1),ce=de({__name:"App",setup(o){const n={title:'AVIF to JPEG "Offline" Batch Converter',metaDescription:"It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",droptarget:"Drag & Drop AVIF Images to Convert",descriptions:["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data will be sent</strong> to a server and is therefore <strong>fast</strong> and <strong>safe</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/?search=avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.'],fileTypeRadioTitle:"Choose Target File Extentions",fileTypeRadioOptions:{avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types"},quality:"Image Quality",qualitytooltip:"Set image quality for output",imageType:"Image Type",imageTypeTooltip:"Choose image format for output",retainOriginalExtension:"Keep Original File Extension",retainExtTooltip:"New extension will be appended to original extension",ignoreFileExtensions:"Load All File Types",ignoreExtTooltip:"Try to load files that don't have image file extension",loadbutton:"Load Images",loadbuttontooltip:"Select your images from a dialog window.<br>*Multiple selection allowed.",loadfolderbutton:"Load A Whole Folder",loadfoldertooltip:`
    Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>
    *It will show "Upload" button, but it actually doesn't upload anything to a server.
  `,processing:"Converting images",aborted:"Aborted",incomplete:"Some files failed to convert",completed:"Completed",interfered:"Currently Busy",noimage:"No files with the extentions were found.",avifUnsupported:"Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",cancel:"Cancel",inputSize:"Input Size",outputSize:"Output Size",save:"Save",close:"Close",open:"Open",confirmCloseDialog:"You have not saved the converted images yet.",confirmCloseDialogTitle:"Data have not been saved"},s={title:"AVIF\u304B\u3089JPEG\u3078 \u30AA\u30D5\u30E9\u30A4\u30F3\u4E00\u62EC\u753B\u50CF\u5909\u63DB",metaDescription:"AVIF\u30FBWebP\u5F62\u5F0F\u306E\u753B\u50CF\u3092JPEG\u3084PNG\u7B49\u3078\u30AA\u30D5\u30E9\u30A4\u30F3\u3067\u4E00\u62EC\u5909\u63DB\u3059\u308B\u7121\u6599\u30C4\u30FC\u30EB",droptarget:"\u5909\u63DB\u3057\u305F\u3044AVIF\u753B\u50CF\u3092\u30C9\u30E9\u30C3\u30B0&\u30C9\u30ED\u30C3\u30D7\u3057\u3066\u4E0B\u3055\u3044",descriptions:["\u3053\u308C\u306FAVIF\u3001\u53C8\u306FWebP\u5F62\u5F0F\u306E\u753B\u50CF\u3092\u3001JPEG\u3001PNG\u7B49\u306E\u4E00\u822C\u7684\u306A\u5F62\u5F0F\u3078\u4E00\u62EC\u5909\u63DB\u3059\u308B\u305F\u3081\u306E\u7121\u6599Web\u30A2\u30D7\u30EA\u3067\u3059\u3002","\u5909\u63DB\u51E6\u7406\u306F\u30D6\u30E9\u30A6\u30B6\u306E\u7D44\u307F\u8FBC\u307F\u6A5F\u80FD\u3092\u5229\u7528\u3059\u308B\u305F\u3081\u3001\u753B\u50CF\u30C7\u30FC\u30BF\u304C\u30B5\u30FC\u30D0\u30FC\u3078<strong>\u9001\u4FE1\u3055\u308C\u308B\u4E8B\u306F\u306A\u304F</strong>\u3001\u307E\u305F\u305D\u308C\u3086\u3048\u306B<strong>\u9AD8\u901F</strong>\u304B\u3064<strong>\u5B89\u5168</strong>\u3067\u3059\u3002","\u8907\u6570\u679A\u306E\u753B\u50CF\u304C\u8AAD\u307F\u8FBC\u307E\u308C\u305F\u5834\u5408\u3001\u5909\u63DB\u3057\u305F\u753B\u50CF\u306F<strong>ZIP\u30D5\u30A1\u30A4\u30EB</strong>\u306B\u7E8F\u3081\u3066\u51FA\u529B\u3055\u308C\u307E\u3059\u3002",'AVIF\u753B\u50CF\u306E\u30ED\u30FC\u30C9\u306B\u306F<a href="https://caniuse.com/?search=avif" target="_self" style="color:red">\u6700\u65B0</a>\u306EFirefox\u53C8\u306FChrome\u304C\u5FC5\u8981\u3067\u3059\u3002'],fileTypeRadioTitle:"\u5909\u63DB\u5BFE\u8C61\u30D5\u30A1\u30A4\u30EB\u306E\u62E1\u5F35\u5B50\u3092\u6307\u5B9A",fileTypeRadioOptions:{avif_only:'".avif" \u53C8\u306F ".webp" \u306E\u307F',all_images:"\u5168\u3066\u306E\u753B\u50CF\u5F62\u5F0F",all_files:"\u5168\u3066\u306E\u5F62\u5F0F"},quality:"\u753B\u8CEA\u8A2D\u5B9A",qualitytooltip:"\u51FA\u529B\u3059\u308B\u753B\u50CF\u306E\u30AF\u30AA\u30EA\u30C6\u30A3\u3092\u6307\u5B9A\u3057\u307E\u3059",imageType:"\u753B\u50CF\u5F62\u5F0F",imageTypeTooltip:"\u51FA\u529B\u3059\u308B\u753B\u50CF\u306E\u5F62\u5F0F\u3092\u6307\u5B9A\u3057\u307E\u3059",retainOriginalExtension:"\u5143\u306E\u62E1\u5F35\u5B50\u3092\u4FDD\u6301\u3059\u308B",retainExtTooltip:"\u5143\u306E\u62E1\u5F35\u5B50\u306E\u5F8C\u308D\u306B\u65B0\u3057\u3044\u62E1\u5F35\u5B50\u3092\u4ED8\u52A0\u3057\u307E\u3059",ignoreFileExtensions:"\u5168\u3066\u306E\u62E1\u5F35\u5B50\u3092\u8AAD\u307F\u8FBC\u3080",ignoreExtTooltip:"\u753B\u50CF\u62E1\u5F35\u5B50\u4EE5\u5916\u306E\u30D5\u30A1\u30A4\u30EB\u3082\u30ED\u30FC\u30C9\u3067\u304D\u308B\u304B\u8A66\u884C\u3057\u307E\u3059",loadbutton:"\u753B\u50CF\u3092\u30ED\u30FC\u30C9",loadbuttontooltip:"\u30C0\u30A4\u30A2\u30ED\u30B0\u3092\u958B\u3044\u3066\u753B\u50CF\u3092\u9078\u629E\u3057\u307E\u3059<br>\u203B\u8907\u6570\u30D5\u30A1\u30A4\u30EB\u9078\u629E\u53EF",loadfolderbutton:"\u30D5\u30A9\u30EB\u30C0\u3054\u3068\u30ED\u30FC\u30C9",loadfoldertooltip:`
    \u9078\u629E\u3057\u305F\u30D5\u30A9\u30EB\u30C0\u3068\u30B5\u30D6\u30D5\u30A9\u30EB\u30C0\u306E\u5168\u3066\u306E\u753B\u50CF\u306B\u5BFE\u3057\u3066\u5909\u63DB\u51E6\u7406\u3092\u884C\u3044\u3001ZIP\u66F8\u5EAB\u3078\u76F8\u5BFE\u30D1\u30B9\u3067\u683C\u7D0D\u3057\u307E\u3059\u3002<br>
    \u203B\u300C\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u300D\u3068\u3044\u3046\u30DC\u30BF\u30F3\u304C\u8868\u793A\u3055\u308C\u307E\u3059\u304C\u5B9F\u969B\u306B\u306F\u30B5\u30FC\u30D0\u30FC\u3078\u306E\u30D5\u30A1\u30A4\u30EB\u306E\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u306F\u884C\u308F\u308C\u307E\u305B\u3093\u3002
  `,processing:"\u753B\u50CF\u5909\u63DB\u4E2D",aborted:"\u4E2D\u65AD",incomplete:"\u5909\u63DB\u306B\u5931\u6557\u3057\u305F\u30D5\u30A1\u30A4\u30EB\u304C\u3042\u308A\u307E\u3059",completed:"\u5909\u63DB\u7D42\u4E86",interfered:"\u65E2\u306B\u51E6\u7406\u4E2D\u3067\u3059",noimage:"\u3053\u306E\u62E1\u5F35\u5B50\u306E\u30D5\u30A1\u30A4\u30EB\u306F\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002",avifUnsupported:"\u3053\u306E\u30D6\u30E9\u30A6\u30B6\u306FAVIF\u5F62\u5F0F\u306B\u5BFE\u5FDC\u3057\u3066\u3044\u307E\u305B\u3093\u3002AVIF\u753B\u50CF\u3092\u5909\u63DB\u3059\u308B\u5834\u5408\u306F\u6700\u65B0\u7248\u306EFirefox\u53C8\u306FGoogle Chrome\u3092\u4F7F\u7528\u3057\u3066\u4E0B\u3055\u3044\u3002",cancel:"\u30AD\u30E3\u30F3\u30BB\u30EB",inputSize:"\u5165\u529B\u30B5\u30A4\u30BA",outputSize:"\u51FA\u529B\u30B5\u30A4\u30BA",save:"\u4FDD\u5B58",close:"\u9589\u3058\u308B",open:"\u958B\u304F",confirmCloseDialog:"\u307E\u3060\u5909\u63DB\u3057\u305F\u30D5\u30A1\u30A4\u30EB\u3092\u4FDD\u5B58\u3057\u3066\u3044\u307E\u305B\u3093\u3002",confirmCloseDialogTitle:"\u5909\u63DB\u30D5\u30A1\u30A4\u30EB\u304C\u672A\u4FDD\u5B58"},g=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),l=document,v=f([{label:"image/png",value:"image/png"}]),p=ut({imageFormat:"image/png",imageQuality:90,retainExtension:!1,expandExtButtons:!1});f(!1);const I=["avif_only","all_images","all_files"],B=f(I[0]),c={avif_only:".avif,.webp",all_images:".jpg,.jpeg,.gif,.png,.webp,.avif,.bmp",all_files:""},d=f(0),C=f(0),_=f(0),b=f(0),S=f(!0),D=f(!1),T=f(!1),P=f(!1),z=f(!1),x=f(!1);f(!1);const w=f(!1),U=f(!1),N=f(""),k=f(""),j=f(0),O=f(0),te=at(()=>{switch(N.value){case r.value.completed:return b.value===C.value?"success":"warning";case r.value.aborted:return"error";case r.value.incomplete:return"warning";default:return"info"}}),H=f("lime"),ae=f(null),G=f([]),W=f(null),q=f(""),R=f(""),oe=f(null),le=f(null),ne=f(null),r=f(n),Z=f(!1);let fe=f(Le),pe=f(Se),ge=!1;se(Z,(m,a)=>{m?(fe.value=De,pe.value=xe,r.value=s):(fe.value=Le,pe.value=Se,r.value=n)});const _e=ot().currentRoute.value.path;(/\/ja\b/.test(_e)||/^\/?$/.test(_e)&&/^ja\b/i.test(qe()))&&(Z.value=!0,fe.value=De,pe.value=xe,r.value=s),lt({title:r.value.title,meta:[{property:"og:title",content:r.value.title},{property:"og:description",content:r.value.metaDescription}]}),ze(()=>{document.querySelector("head").removeChild(document.getElementById("svgfix")),oe.value.oninput=le.value.oninput=je,Be(),window.addEventListener("resize",Be);const m="avif2jpeg",a=JSON.parse(localStorage.getItem(m)||"{}");for(const h in p)a.hasOwnProperty(h)&&(p[h]=a[h]);window.addEventListener("unload",()=>{const h={};for(const i in p)h[i]=p[i];localStorage.setItem(m,JSON.stringify(h))})});function je(m){const h=[...m.target.files];ae.value=h,oe.value.value="",le.value.value=""}function Oe({formats:m}){v.value=m.map(h=>({value:h,label:h}));const a=m.find(h=>/jpeg/i.test(h));a&&(p.imageFormat=a)}function Re(){D.value=!1}function $e({length:m}){C.value=0,_.value=0,b.value=m,U.value=!0,D.value=!0,x.value=!1,d.value=0,q.value="",R.value="",j.value=0,O.value=0,ge=!1,z.value=!1,N.value=r.value.processing,ue=null,H.value="lime"}function Me({length:m,index:a,name:h,success:i}){C.value=a,d.value=a/m*100|0,N.value=r.value.processing,k.value=`${h}`}let ue=null;function He({img:m,width:a,height:h}){ue&&(ue.remove(),ue.src="");const i=a/h;a>h?(a=120,h=a/i):(h=90,a=h*i),m.style.width=a+"px",m.style.height=h+"px",ne.value&&(ne.value.innerHTML="",ne.value.appendChild(m)),ue=m}function Ve({name:m,index:a,success:h,inputSize:i,outputSize:ve}){_.value=h,j.value+=i,O.value+=ve}function Ge({name:m}){G.value=[{description:`${m}`,duration:0},"warning"],H.value="orange"}function Qe({index:m,zip:a,aborted:h,success:i,length:ve,lastImage:we,lastImageDataURL:Ce,name:Ze}){const ie=W.value;if(i===1){ie.download=Ze;let me=we;ie.href=me,q.value=we,Ce&&(R.value=Ce)}else{const me=new Date;ie.download="avif2jpeg_"+p.imageFormat.replace(/^image\//,"")+"_"+me.getTime()+".zip",ie.href=a,z.value=!0}h?H.value="red":d.value=100,C.value=m,i===ve?N.value=r.value.completed:N.value=h?r.value.aborted:r.value.incomplete,D.value=!1}function Be(){const m=document.body.clientWidth,a=document.body.clientHeight;S.value=m*.75>a||m>900}function Je(){G.value=["destroy"],_.value>1&&!ge?x.value=!0:W.value.href=""}function be(){W.value.click(),ge=!0}function We(m){try{navigator.clipboard.writeText(m)}catch{}}function qe(){const m=window.navigator;return m.language||m.userLanguage||m.browserLanguage}return(m,a)=>{const h=_t("router-link");return L(),V(ee,null,[u(e(E),{vertical:"",align:"stretch",justify:"space-between",style:{height:"100%",width:"100%"}},{default:t(()=>[u(e(E),{justify:"end",align:"end",style:{"box-sizing":"border-box",padding:"4px",margin:"0px"}},{default:t(()=>[u(e(nt),{size:"tiny",style:{padding:"4px"}},{default:t(()=>[u(e($),{trigger:"hover","keep-alive-on-hover":!1},{trigger:t(()=>[u(h,{to:{path:"/en"}},{default:t(()=>[u(e(Te),null,{default:t(()=>[u(e(M),{color:Z.value?"":"red",onClick:a[0]||(a[0]=i=>Z.value=!1)},{default:t(()=>[Ht]),_:1},8,["color"])]),_:1})]),_:1})]),default:t(()=>[Vt]),_:1}),u(h,{to:{path:"/ja"}},{default:t(()=>[u(e($),{trigger:"hover","keep-alive-on-hover":!1},{trigger:t(()=>[u(e(M),{color:Z.value?"red":"",onClick:a[1]||(a[1]=i=>Z.value=!0)},{default:t(()=>[Gt]),_:1},8,["color"])]),default:t(()=>[Qt]),_:1})]),_:1})]),_:1})]),_:1}),u(e(E),{vertical:"",justify:"center"},{default:t(()=>[A("h1",Jt,[A("a",Wt,y(r.value.title),1)])]),_:1}),u(e(E),{vertical:"",align:"center",justify:"center"},{default:t(()=>[u(e(E),{vertical:"",align:"stretch",justify:"center"},{default:t(()=>[A("input",{ref_key:"fileinput",ref:oe,type:"file",multiple:"",accept:c[B.value],style:{display:"none"}},null,8,qt),u(e($),{trigger:"hover","keep-alive-on-hover":!1,placement:S.value?"left":"top",duration:0,delay:300},{trigger:t(()=>[u(e(M),{round:"",onClick:a[2]||(a[2]=i=>oe.value.click()),style:{width:"100%"}},{default:t(()=>[u(e(Q),{size:"large",color:"gray"},{default:t(()=>[u(e(Ne))]),_:1}),F(" "+y(r.value.loadbutton),1)]),_:1})]),default:t(()=>[A("div",{innerHTML:r.value.loadbuttontooltip},null,8,Zt)]),_:1},8,["placement"]),A("input",{webkitdirectory:"",directory:"",ref_key:"folderinput",ref:le,type:"file",style:{display:"none"}},null,512),e(g)?J("",!0):(L(),Y(e($),{key:0,trigger:"hover",placement:"bottom","keep-alive-on-hover":!1,style:{"max-width":"90vw"},duration:0,delay:300},{trigger:t(()=>[u(e(M),{round:"",onClick:a[3]||(a[3]=i=>le.value.click()),style:{width:"100%"}},{default:t(()=>[u(e(Q),{size:"large",color:"gray"},{default:t(()=>[u(e(it))]),_:1}),F(" "+y(r.value.loadfolderbutton),1)]),_:1})]),default:t(()=>[A("div",{innerHTML:r.value.loadfoldertooltip},null,8,Yt)]),_:1}))]),_:1}),u(e(rt),{"display-directive":"show","expanded-names":p.expandExtButtons?["extItem"]:"","on-update:expanded-names":i=>p.expandExtButtons=!!String(i)},{default:t(()=>[u(e(st),{title:r.value.fileTypeRadioTitle,name:"extItem"},{default:t(()=>[u(e(ct),{value:B.value,"onUpdate:value":a[4]||(a[4]=i=>B.value=i),name:"filetyperadios",size:"small"},{default:t(()=>[u(e(E),{vertical:"",style:{"padding-left":"1em"}},{default:t(()=>[(L(),V(ee,null,he(I,i=>u(e($),{key:i,trigger:"hover","keep-alive-on-hover":!1},{trigger:t(()=>[u(e(Bt),{value:i},{default:t(()=>[F(y(r.value.fileTypeRadioOptions[i]),1)]),_:2},1032,["value"])]),default:t(()=>[F(" "+y(c[i]||".*"),1)]),_:2},1024)),64))]),_:1})]),_:1},8,["value"])]),_:1},8,["title"])]),_:1},8,["expanded-names","on-update:expanded-names"])]),_:1}),u(e(dt),{placement:"top-right"},{default:t(()=>[u(e(ft),{closable:!0,"container-style":"font-size:xx-small;"},{default:t(()=>[u(zt,{target:e(l),format:p.imageFormat,quality:p.imageQuality,input:ae.value,sendmessage:G.value,processing:D.value,accept:c[B.value],"retain-extension":p.retainExtension,onMounted:Oe,onStart:$e,onProgress:Me,onSuccess:Ve,onFailure:Ge,onComplete:Qe,onPrevent:a[5]||(a[5]=i=>{T.value=!0}),onNoimage:a[6]||(a[6]=i=>P.value=!0),onAvifsupport:a[7]||(a[7]=i=>w.value=!i),onImgload:He},{default:t(()=>[e(g)?J("",!0):(L(),Y(e($),{key:0,trigger:"hover","keep-alive-on-hover":!1,placement:"bottom",duration:0,delay:300},{trigger:t(()=>[u(e(E),{align:"stretch",style:{"text-align":"center",color:"silver",padding:"2em","overflow-wrap":"break-word","word-break":"keep-all",border:"6px dashed #EEE","border-radius":"1em"}},{default:t(()=>[u(e(E),null,{default:t(()=>[u(e(Q),{size:"64",color:"silver",class:"test"},{default:t(()=>[u(e(pt))]),_:1})]),_:1}),u(e(E),{vertical:"",style:{"font-weight":"bold","font-size":"x-large"}},{default:t(()=>[Kt,Xt]),_:1})]),_:1})]),default:t(()=>[A("h3",{innerHTML:r.value.droptarget},null,8,eu)]),_:1}))]),_:1},8,["target","format","quality","input","sendmessage","processing","accept","retain-extension"])]),_:1})]),_:1}),u(e(E),{justify:"center"},{default:t(()=>[u(e(E),{vertical:"",align:"start"},{default:t(()=>[u(e($),{trigger:"hover",placement:S.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:300},{trigger:t(()=>[u(e(E),{align:"center"},{default:t(()=>[u(e(Q),null,{default:t(()=>[u(e(Ne))]),_:1}),F(y(r.value.imageType)+": ",1),u(e(gt),{size:"small",value:p.imageFormat,"onUpdate:value":a[8]||(a[8]=i=>p.imageFormat=i),options:v.value,"consistent-menu-width":!1},null,8,["value","options"])]),_:1})]),default:t(()=>[F(" "+y(r.value.imageTypeTooltip),1)]),_:1},8,["placement"]),u(e($),{trigger:"hover",placement:S.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:300},{trigger:t(()=>[u(e(E),{align:"center"},{default:t(()=>[u(e(E),{align:"start",wrap:!1},{default:t(()=>[u(e(Q),null,{default:t(()=>[u(e(vt))]),_:1}),A("span",tu,y(r.value.quality)+":",1),u(e(E),{align:"center",justify:"space-between"},{default:t(()=>[u(e(mt),{tooltip:!1,value:p.imageQuality,"onUpdate:value":a[9]||(a[9]=i=>p.imageQuality=i),step:1,style:{width:"120px"},disabled:/png|bmp/.test(p.imageFormat)},null,8,["value","disabled"]),u(e(At),{style:{width:"90px"},size:"small",value:p.imageQuality,"onUpdate:value":a[10]||(a[10]=i=>p.imageQuality=i),step:"1",min:"0",max:"100",disabled:/png/.test(p.imageFormat)},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:t(()=>[F(" "+y(r.value.qualitytooltip),1)]),_:1},8,["placement"]),u(e($),{trigger:"hover",placement:S.value?"left":"bottom-start","keep-alive-on-hover":!1,duration:0,delay:300},{trigger:t(()=>[u(e(ht),{checked:p.retainExtension,"onUpdate:checked":a[11]||(a[11]=i=>p.retainExtension=i)},{default:t(()=>[F(y(r.value.retainOriginalExtension),1)]),_:1},8,["checked"])]),default:t(()=>[F(" "+y(r.value.retainExtTooltip),1)]),_:1},8,["placement"])]),_:1})]),_:1}),u(e(E),{justify:"center"},{default:t(()=>[A("ul",uu,[(L(!0),V(ee,null,he(r.value.descriptions,i=>(L(),V("li",{key:i,style:{"text-align":"left"},innerHTML:i},null,8,au))),128))])]),_:1}),u(e(E),{justify:"center",align:"baseline"},{default:t(()=>[A("p",ou,[u(Mt)]),u(e(E),{align:"center"},{default:t(()=>[u(e(E),{align:"center"},{default:t(()=>[u(e(Te),{href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-size":"small"}},{default:t(()=>[u(e(Q),null,{default:t(()=>[u(e(yt))]),_:1}),lu]),_:1})]),_:1}),u(e(E),{align:"center"},{default:t(()=>[u(jt)]),_:1})]),_:1})]),_:1})]),_:1}),u(e(K),{show:P.value,"onUpdate:show":a[12]||(a[12]=i=>P.value=i),preset:"dialog",type:"error",title:"Images Not Found","positive-text":"OK"},{default:t(()=>[F(y(r.value.noimage),1),nu,F(y(c[B.value]||"*."),1)]),_:1},8,["show"]),u(e(K),{show:w.value,"onUpdate:show":a[13]||(a[13]=i=>w.value=i),preset:"dialog",type:"warning",title:"Unsupported","positive-text":"OK"},{default:t(()=>[F(y(r.value.avifUnsupported),1)]),_:1},8,["show"]),u(e(K),{show:x.value,"onUpdate:show":a[14]||(a[14]=i=>x.value=i),preset:"dialog",type:"warning",title:r.value.confirmCloseDialogTitle,"positive-text":r.value.save,"negative-text":r.value.close,maskClosable:!1,onPositiveClick:be},{default:t(()=>[F(y(r.value.confirmCloseDialog),1)]),_:1},8,["show","title","positive-text","negative-text"]),u(e(K),{show:U.value,"onUpdate:show":a[17]||(a[17]=i=>U.value=i),closable:!D.value,"close-on-esc":!D.value,onMaskClick:a[18]||(a[18]=i=>G.value=["destroy"]),preset:"dialog",title:N.value,type:e(te),"mask-closable":!1,"on-after-leave":Je},{default:t(()=>[u(e(E),{vertical:"",align:"center"},{default:t(()=>[u(e(Et),{type:"circle",percentage:d.value,color:H.value,"indicator-text-color":"black","rail-color":"silver"},{default:t(()=>[u(e(E),{vertical:"",align:"center",justify:"center"},{default:t(()=>[u(e(E),{style:{"font-size":"x-large"}},{default:t(()=>[F(y(d.value)+"%",1)]),_:1}),u(e(E),{style:{"font-size":"xx-small"}},{default:t(()=>[F("( "+y(_.value)+" / "+y(b.value)+" )",1)]),_:1})]),_:1})]),_:1},8,["percentage","color"]),u(e(E),{vertical:"",align:"center","item-style":"overflow:hidden; text-overflow: ellipsis; white-space:nowrap;"},{default:t(()=>[u(e(E),{style:{"font-size":"x-small"}},{default:t(()=>[A("span",null,y(k.value),1)]),_:1}),u(e(E),{vertical:"",style:{height:"90px"},align:"center",justify:"center"},{default:t(()=>[A("div",{ref_key:"thumbnail",ref:ne},null,512)]),_:1}),u(e(E),null,{default:t(()=>[q.value?(L(),V("a",{key:0,href:q.value,target:"_blank"},[u(e(M),{round:"",size:"tiny"},{default:t(()=>[F(y(r.value.open),1)]),_:1})],8,iu)):J("",!0),R.value?(L(),Y(e(M),{key:1,round:"",size:"tiny",onClick:a[15]||(a[15]=i=>We(R.value))},{default:t(()=>[ru]),_:1})):J("",!0)]),_:1})]),_:1}),A("table",null,[A("tr",null,[A("td",null,y(r.value.inputSize)+": ",1),A("td",su,y((j.value/1024|0).toLocaleString())+"KB",1)]),A("tr",null,[A("td",null,y(r.value.outputSize)+": ",1),A("td",cu,y((O.value/1024|0).toLocaleString())+"KB",1)])]),D.value?(L(),Y(e(M),{key:0,size:"large",ref:"cancelbutton",round:"",onClick:Re},{default:t(()=>[F(y(r.value.cancel),1)]),_:1},512)):J("",!0),u(e(E),{align:"center",vertical:""},{default:t(()=>[A("div",null,[!D.value&&_.value?(L(),Y(e(M),{key:0,size:"large",round:"",onClick:be,color:"lime"},{default:t(()=>[F(y(r.value.save),1)]),_:1})):J("",!0),ke(A("span",du,[A("span",fu,[u(e(Q),{depth:"4",size:"30",color:"lime"},{default:t(()=>[u(e(Ft))]),_:1}),pu])],512),[[Ie,z.value]])]),D.value?J("",!0):(L(),Y(e(M),{key:0,onClick:a[16]||(a[16]=i=>U.value=!1),round:"",size:"small",style:{"font-size":"small","margin-top":"1em"}},{default:t(()=>[F(y(r.value.close),1)]),_:1}))]),_:1})]),_:1})]),_:1},8,["show","closable","close-on-esc","title","type"]),ke(A("a",{ref_key:"downloadlink",ref:W,href:""},null,512),[[Ie,!1]]),u(e(K),{show:T.value,"onUpdate:show":a[19]||(a[19]=i=>T.value=i),preset:"dialog",type:"error","positive-text":"OK",title:"Busy"},{default:t(()=>[F(y(r.value.interfered),1)]),_:1},8,["show"])],64)}}}),gu=[{path:"/",name:"Home",component:ce},{path:"/ja",name:"Japanese",component:ce,meta:{title:"jpn"}},{path:"/en",name:"English",component:ce,meta:{title:"eng"}}];bt(ce,{routes:gu,base:"/avif2jpeg/dist/"},({app:o,router:n,routes:s,isClient:g,initialState:l})=>{})});export default vu();
