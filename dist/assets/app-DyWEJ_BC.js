var za=Object.defineProperty;var Ia=(l,r,u)=>r in l?za(l,r,{enumerable:!0,configurable:!0,writable:!0,value:u}):l[r]=u;var qe=(l,r,u)=>Ia(l,typeof r!="symbol"?r+"":r,u);import{r as w,a as Nt,d as $e,i as ut,c as te,o as F,_ as Ie,u as e,w as t,b as x,t as d,e as n,f as xa,N as ze,L as Ta,g as ae,B as Ee,h as tn,j as v,F as Oe,k as At,l as Sa,m as G,n as La,p as Ue,q as pe,s as Ca,v as nn,x as En,y as Ce,z as Fe,A as Xt,C as Qt,D as nt,E as ft,G as $a,H as Ea,I as Be,J as zt,K as se,M as it,T as Je,O as Fn,P as Ze,Q as on,R as Dt,S as an,U as It,V as He,W as Pn,X as Ke,Y as Fa,Z as mt,$ as Pa,a0 as hn,a1 as _n,a2 as On,a3 as ht,a4 as Oa,a5 as ln,a6 as Ua,a7 as Ma,a8 as Ra,a9 as sn,aa as Na,ab as wn,ac as Un,ad as Da,ae as ja,af as yn,ag as Mn,ah as Ba,ai as Za,aj as Rn,ak as Nn,al as Vt,am as jt,an as Ye,ao as Dn,ap as jn,aq as Wa,ar as Ha,as as Va,at as Ot,au as qa,av as Ga,aw as Re,ax as Ka,ay as Ya,az as rn,aA as Bn,aB as Xa,aC as Qa,aD as Zn,aE as Ja,aF as wt,aG as yt,aH as el,aI as tl,aJ as nl,aK as ol,aL as al,aM as ll,aN as sl,aO as il,aP as rl,aQ as ul,aR as bn,aS as cl,aT as dl,aU as pl,aV as fl,aW as gl,aX as ml,aY as vl,aZ as hl,a_ as _l}from"./vendor-PQxa0JYr.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))g(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const p of a.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&g(p)}).observe(document,{childList:!0,subtree:!0});function u(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function g(o){if(o.ep)return;o.ep=!0;const a=u(o);fetch(o.href,a)}})();const Pe=w(navigator.hardwareConcurrency?Math.min(navigator.hardwareConcurrency,12):0),bt={threadCount:{min:2,max:Math.max(2,Pe.value)}},wl={imageFormat:"image/jpeg",imageQuality:90,expandExtButtons:!1,acceptTypeValue:void 0,editedAcceptTypes:"",expandAdvSettings:!1,retainExtension:!1,maxZipSizeMB:1e3,useFolderNameForZip:!1,multithread:!0,threadCount:Pe.value,shrinkImage:!1,maxWidth:4096,maxHeight:4096,disableNotifyingFolderSelect:!1},W=Nt(Wn({}));function yl(){Wn(W)}function Wn(l){return Object.assign(l,wl)}const Hn="avif2jpeg",qt=JSON.parse(localStorage.getItem(Hn)||"{}");for(const l in W)if(qt.hasOwnProperty(l)&&qt[l]!==void 0){let r=qt[l];bt.hasOwnProperty(l)&&(bt[l].min>r&&(r=bt[l].min),bt[l].max<r&&(r=bt[l].max)),W[l]=r}const bl=()=>{const l={};for(const r in W)l[r]=W[r];localStorage.setItem(Hn,JSON.stringify(l))};window.addEventListener("beforeunload",bl);const kl=$e({__name:"github",setup(l){const r=ut(ot);return(u,g)=>{const o=ze,a=xa,p=Ie;return F(),te(p,{to:!1,"display-directive":"show",show:e(r).showTooltipsBeforeMounted.value,trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(a,{href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-size":"small","font-weight":"bolder"}},{default:t(()=>[n(o,null,{default:t(()=>[n(e(Ta))]),_:1}),g[0]||(g[0]=x("GitHub"))]),_:1})]),default:t(()=>[x(" "+d(u.$t("githubOpenSource")),1)]),_:1},8,["show"])}}}),Al=["href"],zl=$e({__name:"licenses",setup(l){const r=w(!1),u={Vue:"https://github.com/vuejs/core/blob/main/LICENSE",Vite:"https://github.com/vitejs/vite/blob/main/LICENSE","Vite SSG":"https://github.com/antfu/vite-ssg/blob/main/LICENSE","Naive UI":"https://github.com/TuSimple/naive-ui/blob/main/LICENSE",Ionicons:"https://github.com/ionic-team/ionicons/blob/main/LICENSE"};return(g,o)=>{const a=Ee;return F(),ae(Oe,null,[n(a,{text:"",onClick:o[0]||(o[0]=p=>r.value=!0),style:{color:"black","font-size":"small"}},{default:t(()=>o[2]||(o[2]=[x("Licenses")])),_:1}),n(e(tn),{preset:"dialog",ref:"dialog",show:r.value,"onUpdate:show":o[1]||(o[1]=p=>r.value=p),"positive-text":"OK",title:"Licenses"},{default:t(()=>[o[3]||(o[3]=v("h3",null,"Used Framework and Libraries",-1)),v("ul",null,[(F(),ae(Oe,null,At(u,(p,c)=>v("li",null,[v("a",{href:p},d(c),9,Al)])),64))])]),_:1},8,["show"])],64)}}}),Il=1,xl=9,Tl=1,Sl="",Pt={major:Il,minor:xl,build:Tl,tag:Sl},Ll={style:{"font-size":"x-small","user-select":"none"}},Cl=$e({__name:"version",setup(l){const r=["0.0.118"],u=`${Pt.major}.${Pt.minor}.${Pt.build}${Pt.tag}`,g=r.map(c=>({label:`v${c}`,key:c,value:c}));function o(c){const{key:b,label:_}=c,f=p(b),m=G("a",{href:f},_),h=G("div",null,m);return G("div",null,h)}function a(c){location.href=p(c)}function p(c){return`/avif2jpeg/old/${c}/`}return(c,b)=>{const _=Sa;return F(),te(_,{"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start",options:e(g),"render-label":o,"onUpdate:value":a},{header:t(()=>[v("span",Ll,d(c.$t("previousVersion")),1)]),default:t(()=>[v("span",{style:{cursor:"pointer"}},"v"+d(u))]),_:1},8,["options"])}}}),$l={key:0,href:"/"},El=$e({__name:"header",setup(l){const r=La();return(u,g)=>{const o=Ue,a=nn;return F(),te(o,{vertical:"",justify:"start"},{default:t(()=>[n(o,{justify:"space-between",align:"center",wrap:!1},{default:t(()=>[n(o,{align:"center"},{default:t(()=>[n(kl),n(Cl),n(zl),n(o,{style:{"font-size":"small"}},{default:t(()=>[e(r).path!=="/"?(F(),ae("a",$l,"HOME")):pe("",!0)]),_:1})]),_:1}),n(o,{align:"end",style:{"font-size":"x-small"}},{default:t(()=>[Ca(u.$slots,"lang-switch")]),_:3})]),_:3}),n(a,{style:{margin:"0px"}})]),_:3})}}}),Fl={style:{padding:"0px",margin:"0px","text-align":"center"}},Pl=$e({__name:"title",setup(l){const r=En();return Ce(()=>{const u=r.currentRoute.value.path||"";return!String(u.match(new RegExp("(?<=^\\/)[^/]+"))||"")}),(u,g)=>{const o=Ue;return F(),te(o,{align:"center",justify:"center",style:{margin:"0px"}},{default:t(()=>[v("h1",Fl,d(u.$t("title")),1)]),_:1})}}});function Ol(l){return new Worker("/avif2jpeg/dist/assets/worker.canvas-ByxzuV0b.js",{name:l==null?void 0:l.name})}let Vn=0;class Ul extends Ol{constructor(u){super();qe(this,"id",Vn++);qe(this,"priority");this.priority=u||!1}release(){Bt(this)}}class Ml extends Promise{constructor(){super(...arguments);qe(this,"wid",-1)}}const Jt=new Set,gt=new Set,rt=new Set,Tt=new Map,qn=[];function Rl(l){const r=new Ul;return Jt.add(r),Gn(r,l),Bt(r),l&&qn.push(r.id),r}function Gn(l,r){const u=r?rt:gt,g=new Ml(o=>{Tt.set(l,()=>o([l,g,!!r]))});g.wid=l.id,u.add(g)}async function Nl(l){let r;if(!l)r=new Set([...rt,...gt]);else if(typeof l=="number"){const a=qn.slice(0,l);r=new Set([...rt].filter(p=>a.includes(p.wid)))}else r=l?rt:gt;const[u,g,o]=await Promise.any(r);return(o?rt:gt).delete(g),Gn(u,o),u}function Bt(l){const r=Tt.get(l);r&&(Tt.delete(l),r())}function Dl(){for(const l of Tt.keys())Bt(l)}async function kn(){return await Promise.all([...gt,...rt])}function Kn(){Dl();for(const l of Jt)l.onmessage=null,l.terminate();Jt.clear(),gt.clear(),rt.clear(),Tt.clear(),Vn=0}function jl(l){return new Worker("/avif2jpeg/dist/assets/worker.zip-D63RBKXe.js",{name:l==null?void 0:l.name})}const Bl=1e3*10,Zl=1,un=2e3*2e3*5,Wl=5,Hl=2,Vl=un*1,An=un*6,ql=300,St=new Map,Ut=new Map;let kt=0,tt;const We=new Map,vt=new Map,Lt=new Map,Ct=new Map;let cn,ee,je,$t,Ge,Yn,Xn,Qn,Jn,eo,to;function Gt(l){if({files:Ge,completedFileIdSet:cn,ConvStats:ee,canceled:je,props:$t,format:Yn,quality:Xn,outputExt:Qn,imageType:Jn,message:eo,notification:to}=l||{},tt=null,St.clear(),Ut.clear(),We.clear(),vt.clear(),Lt.clear(),Ct.clear(),vt.clear(),Lt.clear(),Ct.clear(),l)for(const u in l)delete l[u]}async function Gl(l){Gt(l),cn.clear();const r=Math.min($t.threads-1,Ge.length),u=Math.min(Wl,r),g=Xl(ee,je);let o;try{o=await Kl(r,u,g)}catch{return Gt(),{exception:new Error("worker-load-error"),callbackToClearConverter:new Function,callbackToGenerateFailedZips:new Function}}const a=Yl(o);tt=o;const p=Fe(je,T=>{T&&p()}),b=Ge.length===1;let _=0,f=0,m="",h=0;for(kt=0,St.clear();h<Ge.length;){if(kt>An&&!je.value){await new Promise(H=>setTimeout(H,100));continue}const T=[],M=[];let P=!1;const C=Ge.length-h,X=Math.min(h+Math.max(Math.min(Hl,C/$t.threads|0),1),Ge.length);let A=0,k=!1;for(;h<X&&!((A>Vl||kt>An)&&!je.value);h++){const H=Ge[h],re=H.webkitRelativePath||H.name,R=Ut.get(H);k=k||!!R;const ye=0;je.value;const be=H._id;if(A+=H.size,P=h===Ge.length-1,vt.has(be)||vt.set(be,H),no(h,re,be),Lt.has(H)||(_++,ee.index=_),je.value){ao(be);continue}let ke;try{ke=await createImageBitmap(H)}catch{oo(h,re,be);continue}M.push(ke);const S=ke.width*ke.height*4;A+=S+H.size,kt+=S+H.size;let N=!1;const q=Date.now();q-f>ql&&(f=q,N=!0),T.push({index:h,bitmap:ke,file:H,fileId:be,outputPath:m,type:Yn,quality:Xn/100,demandThumbnail:N||P,isSingleImage:b,maxSize:W.shrinkImage?{width:W.maxWidth,height:W.maxHeight}:null,retriedTime:Ut.get(H)||0,webkitRelativePath:H.webkitRelativePath}),N=!1}let K;if(T.length){const H=A>un;K=await Nl(u>0&&(k?1:H)),St.set(K,A)}if(K&&(K.postMessage(T,M),M.forEach(H=>H.close()),M.length=0),P&&(await kn(),je.value))break}if(!je.value){let T;await new Promise(M=>{T=Fe([()=>ee.done,je],()=>{(ee.done>=_||je.value)&&M(void 0)},{immediate:!0})}),T()}p(),o.postMessage({action:"squeeze"}),await a,await kn();const s={value:!1},z=()=>{s.value=!0,Kn(),o.onmessage=null,o.terminate(),Gt()};let y=!1;return{callbackToClearConverter:z,callbackToGenerateFailedZips:async T=>{y||(y=!0,await es(T,o,s,ee))}}}async function Kl(l,r,u){Kn();const g=new jl;g.postMessage({action:"set-config",zipSize:$t.maxZipSizeMB*1024*1024,keepExt:$t.retainExtension,outputExt:Qn,imageType:Jn});let o;for(let p=0;p<l;p++){const c=Rl(r>p);o??(o=c),c.onmessage=u;const{port1:b,port2:_}=new MessageChannel;g.postMessage({action:"set-port"},[b]),c.postMessage({},[_])}return await new Promise((p,c)=>{const b=s=>{g.removeEventListener("message",m),o.removeEventListener("message",m),clearTimeout(h),s?p(s):c(s)};let _=!1,f=!1;const m=s=>{s.target===g&&(_=!0),s.target===o&&(f=!0),_&&f&&b(!0)};let h=0;g.addEventListener("message",m),o.addEventListener("message",m),h=window.setTimeout(()=>b(!1),Bl)}),g}function Yl(l){return new Promise(u=>{l.onmessage=g=>{var _;const o=g.data,{action:a}=o;switch(a){case"add-zip-completed":{const{fileId:f,entireIndex:m,storedPath:h}=o;ee.done++,ee.success++,cn.add(f);const s=We.get(f);s.zippedIndex=m,ee.ziplogs.push({fileId:f,storedPath:h});return}case"respond-image":{const{url:f,index:m,path:h,size:s,fileId:z}=o;ee.convertedImageUrl=f,ee.convertedImageSize=s,ee.convertedImageIndex=m,ee.convertedImageName=h;let y="",E=0,T="";if(z>=0){const M=vt.get(z);y=URL.createObjectURL(M),E=M.size,T=M.webkitRelativePath||M.name}ee.convertedImageOrgUrl=y,ee.convertedImageOrgSize=E,ee.convertedImageOrgName=T,ee.convertedImageShrinked=(_=Ct.get(z))==null?void 0:_.shrinked;return}case"respond-delete":{const{index:f,success:m,fileId:h}=o;We.get(h).command="❌deleted",We.get(h).completed=!1;return}}const{size:p,count:c}=o,b="url"in g.data?g.data.url:"";switch(a){case"push-zip":ee.zips.push({url:b,size:p,count:c}),ee.zippedTotalCount+=c,ee.zippedTotalSize+=p;break;case"squeeze-zip":c>0&&(ee.zips.push({url:b,size:p,count:c}),ee.zippedTotalCount+=c,ee.zippedTotalSize+=p),u(void 0);break;case"push-filelist":ee.failedFileZippedCount++;break;case"squeeze-filelist-zip":ee.failedZipDone=!0;case"push-filelist-zip":ee.failedZips.push({url:b,size:p,count:c});break;case"zip-error":case"zip-squeeze-error":ee.zippingErrorCount+=c,a==="zip-squeeze-error"&&u(void 0);break}}})}function Xl(l,r,u,g){return a=>{const p=a.target,{data:c}=a,{action:b}=c;switch(r.value,b){case"list-start":break;case"file-start":{const{index:_,path:f,fileId:m}=c;no(_,f,m);break}case"file-load":{const{thumbnail:_,width:f,height:m,fileId:h,shrinked:s}=c,z=We.get(h);z.core=p.id,z.command="🖼️loaded",_&&(l.thumbnail=_);let y=Ct.get(h);y||(y={},Ct.set(h,y)),y.shrinked??(y.shrinked=s);break}case"file-converted":{const{index:_,path:f,fileId:m}=c,h=We.get(m);h.command="🔃converted",l.converted++;break}case"file-completed":{const{inputsize:_,outputsize:f,fileId:m}=c,h=We.get(m);h&&(h.command="✅completed",h.completed=!0,h.fileId=m),l.inputTotalSize+=_,l.outputTotalSize+=f;break}case"file-error":{const{index:_,path:f,fileId:m}=c;oo(_,f,m);break}case"file-canceled":{const{fileId:_,path:f}=c;ao(_);break}case"list-end":{Bt(p),kt-=St.get(p)||0,St.delete(p);break}}}}let Ql=0;function no(l,r,u){const g={key:Ql++,core:-1,index:l,path:r,command:"➡️started"};We.set(u,g),ee.logs.push(g)}function oo(l,r,u){const g=vt.get(u);if(!g)throw new Error(`the file doesn't exist in the Map. "${u}":"${r}"`);const o=Lt.get(g)||0,a=We.get(u);o<Zl?(Lt.set(g,o+1),Ge.push(g),Ut.set(g,Date.now()),a.command="⚠️retrying",a.error=!0,eo.warning(`retrying "${r}"`,{duration:3e3}),ee.retried++):(ee.done++,ee.failure++,a.command="❗failed",a.error=!0,to.error({content:`failed to load "${r}"`,duration:5e3}))}function ao(l){const r=We.get(l);ee.done++,ee.failure++,r.command="❗canceled",r.error=!0}function Jl(l){tt==null||tt.postMessage({action:"request-image",index:l})}function Kt(l){tt==null||tt.postMessage({action:"delete-image",index:l})}async function es(l,r,u,g){let o=0;for(const a of l){const p=(a.webkitRelativePath||a.name).replace(/^\//,"");if(u.value)return;o-g.failedFileZippedCount>20&&await new Promise(c=>setTimeout(c,10)),r.postMessage({action:"add-filelist",file:a,path:p}),o++}r.postMessage({action:"squeeze-filelist"})}function et(l,r=2){const u=Math.sign(l);l=Math.abs(l);const g=["Bytes","KB","MB","GB"],o=l?Math.floor(Math.log(l)/Math.log(1024)):0;return`${(l/Math.pow(1024,o)*u).toFixed(r)}${g[o]}`}function lo(l,r=100,u=!1){r=typeof r=="number"?{width:r,height:r}:r;const{width:g,height:o}=r;let{width:a,height:p}=l;const c=a/p,b=g/o;return c>=b?(a=u?Math.min(g,a):g,p=a/c|0):(p=u?Math.min(o,p):o,a=p*c|0),{width:a,height:p}}class ts{constructor(){qe(this,"_currentFileCount",0);qe(this,"_currentZipIndex",0);qe(this,"_totalFileCount",0);qe(this,"_zipLengthSumList",[]);qe(this,"_pathBank",{})}increase(r){return r&&(this._pathBank[r]=[this._zipLengthSumList.length,this._currentFileCount]),this._currentFileCount++,this._totalFileCount++}split(){this._zipLengthSumList.push(this._totalFileCount),this._currentZipIndex++,this._currentFileCount=0}get(r){if(typeof r=="number"){let u=this._zipLengthSumList.findIndex((a,p)=>r<a);u===-1&&(u=this._zipLengthSumList.length);const g=this._zipLengthSumList[u-1]||0,o=r-g;return[u,o]}else{const u=this._pathBank[String(r)];if(u)return u}return null}getZipIndex(){return this._currentZipIndex}getIndex(){return this._totalFileCount}}let xt;async function ns(l,r,u,g,o){let a="";const p=document.createElement("canvas"),c=p.getContext("2d");let b=new Xt;const _=[b],f=new ts,m=u.format,h=u.quality/100,s=[...m.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),z=l.length,y=u.maxZipSizeMB*1024*1024;let E=0,T=null,M="",P="",C=0,X=0,A=0,k=0,K=0,H=!1;xt=S=>{const[N,q]=f.get(S),le=_[N],oe=le.get(q,m);o.convertedImageIndex=S,o.convertedImageName=le.getPathByIndex(q),o.convertedImageUrl=URL.createObjectURL(oe),o.convertedImageSize=oe.size;let ge="",Ae=0,he="";const B=re[S];ge=URL.createObjectURL(B),Ae=B.size,he=B.webkitRelativePath||B.name,o.convertedImageOrgUrl=ge,o.convertedImageOrgSize=Ae,o.convertedImageOrgName=he};const re=[];for(const S of l){if(g.value)break;const N=S.name;let q="";const le=S.size,oe=(S.webkitRelativePath||S.relativePath||N).replace(/^\//,""),ge=document.createElement("img"),Ae={key:A++,core:-1,index:E,path:oe,command:"➡️start"};o.index=E,E++,o.logs.push(Ae),o.logs.length-1,a&&(URL.revokeObjectURL(a),a=""),a=URL.createObjectURL(S),P=a,C=S.size,ge.src=a;const he=await so(ge).then(()=>!0).catch(()=>!1);if(!ge.complete||!he||g.value){o.done++,o.failure++,Ae.command="❗failed";continue}const B=ge.width,xe=ge.height;p.width=B,p.height=xe,c.drawImage(ge,0,0,B,xe,0,0,B,xe),Ae.command="🖼️imgload",o.thumbnail=ge;const O=await new Promise(Y=>{const me=ue=>{T=ue,Y(ue)};p.toBlob(me,m,h)});if(g.value)break;if(!O){o.failure++;continue}X=O.size,o.converted++;let Z="";if(K+X>=y){try{await b.wait(),Z=await b.url()}catch{H=!0,alert("memory problem occurred");break}o.zips.push({url:Z,size:K,count:k}),o.zippedTotalCount+=k,o.zippedTotalSize+=K,K=0,k=0,f.split(),b=new Xt,_.push(b)}K+=X;const ie=oe||N;for(let Y=1;Y<255&&(q=ie.replace(u.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+(Y>1?`(${Y})`:"")+"."+s,!!b.has(q));Y++);o.done++;try{k++,b.add(q,O)}catch{continue}f.increase(),re.push(S),o.inputTotalSize+=le,o.outputTotalSize+=X,o.ziplogs.push({fileId:S._id,storedPath:q}),M=q,Ae.zippedIndex=o.success,o.success++,Ae.command="✅completed",Ae.completed=!0,Ae.fileId=S._id,r.add(S._id)}if(o.success>0)if(z===1)T&&(o.convertedImageIndex=0,o.convertedImageName=M.replace(/^.*\/(?=[^/]+$)/,"").replace(u.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+s,o.convertedImageUrl=URL.createObjectURL(T),o.convertedImageOrgUrl=P,o.convertedImageOrgSize=C);else try{if(H)throw new Error("terminated zipping process for memory problems");await b.wait();const S=await b.url();o.zips.push({url:S,count:k,size:K}),o.zippedTotalCount+=k,o.zippedTotalSize+=K}catch{}const R={value:!1},ye=()=>{R.value=!0,_.forEach(S=>S.clear()),_.length=0,re.length=0,xt=null};let be=!1;return{callbackToClearConverter:ye,callbackToGenerateFailedZips:async S=>{be||(be=!0,as(S,y,o,R))}}}function os(l){xt==null||xt(l)}async function as(l,r,u,g){let o=0,a=0,p=new Xt;for(let c=0;c<l.length;c++){const b=l[c],_=(b.webkitRelativePath||b.name).replace(/^\//,"");if(g.value)return;if(await p.add(_,b),a+=b.size,o++,u.failedFileZippedCount++,a>=r||c===l.length-1){await p.zip();const f=await p.url();u.failedZips.push({url:f,size:a,count:o}),p.clear(),a=0,o=0}}u.failedZipDone=!0}function so(l){if(typeof l.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((r,u)=>{l.onload=r,l.onerror=u})}const Xe=(l,r)=>{const u=l.__vccOpts||l;for(const[g,o]of r)u[g]=o;return u},ls={class:"container"},ss={__name:"zipicon",setup(l){return(r,u)=>(F(),ae("span",ls,[n(e(ze),null,{default:t(()=>[n(e(Qt))]),_:1}),u[0]||(u[0]=v("span",{class:"text"},"ZIP",-1))]))}},is=Xe(ss,[["__scopeId","data-v-65f599bb"]]),rs=["href","download","title"],us='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',cs=$e({__name:"thumbnail",props:{src:{},width:{},height:{},maxWidth:{default:100},maxHeight:{default:100},expand:{type:Boolean,default:!1},loading:{type:Boolean},fileName:{},allowNext:{type:Boolean},allowPrev:{type:Boolean},hidden:{type:Boolean}},emits:["load","error","next","prev"],setup(l,{expose:r,emit:u}){const{t:g}=nt(),o=l,a=u,p=w();w();const c=w(!0),b=w(""),_=w(o.width||100),f=w(o.height||100),m=w(!1),h=Nt({width:_.value+"px",height:f.value+"px",minWidth:"50px",minHeight:"50px"});ft(()=>{var P,C,X;(C=(P=p.value)==null?void 0:P.previewInstRef)==null||C.setPreviewSrc(us),URL.revokeObjectURL((((X=p.value)==null?void 0:X.imageRef)||{}).src),p.value=null});const s=w(!0);$a(()=>{s.value=!1}),Ea(()=>{s.value=!0}),Fe(o,(P,C)=>{h.width=(o.width||100)+"px",h.height=(o.height||100)+"px"}),Fe(()=>o.src,(P,C)=>{s.value&&E(P)},{immediate:!0}),r({download:T,openPreview:M,active:s});async function z(P){const C=P.target,X=C.naturalWidth,A=C.naturalHeight,{width:k,height:K}=lo({width:X,height:A},{width:o.maxWidth||100,height:o.maxHeight||100},o.expand);_.value=k,f.value=K,a("load",{src:C.src,width:X,height:A}),c.value=!1,await new Promise(H=>setTimeout(H,100)),!c.value&&(m.value=!0)}function y(P){const C=P.target;a("error",C.src)}async function E(P){c.value=!0,m.value=!1,b.value=P}function T(){const P=document.createElement("a");P.href=b.value,P.download=o.fileName,P.click()}function M(){var P;(P=p.value)==null||P.click()}return(P,C)=>{const X=Fn,A=on,k=Ue,K=zt;return Be((F(),ae("div",null,[n(e(Ie),null,{trigger:t(()=>[n(K,{show:e(c)||o.loading},{default:t(()=>[n(k,{justify:"center",align:"center",style:se(e(h))},{default:t(()=>[v("a",{"_v-show":"!(imgloading || props.loading)",href:e(b),onClick:C[0]||(C[0]=it(()=>{},["left","prevent"])),target:"_blank",download:o.fileName,title:o.fileName,style:{"line-height":"0px"}},[n(Je,{mode:"in-out"},{default:t(()=>[Be(n(X,{ref_key:"nImageRef",ref:p,"show-toolbar-tooltip":"",onLoad:z,onError:y,src:e(b),width:e(_),height:e(f),style:{border:"1px solid silver"}},null,8,["src","width","height"]),[[Ze,e(m)]])]),_:1})],8,rs),e(c)||o.loading?(F(),te(A,{key:0})):pe("",!0)]),_:1},8,["style"])]),_:1},8,["show"])]),default:t(()=>[x(" "+d(o.fileName),1)]),_:1})],512)),[[Ze,!P.hidden]])}}}),zn=Xe(cs,[["__scopeId","data-v-6dbc6481"]]),ds=["href","download","title"],ps={class:"left-num"},fs={class:"right-num"},gs=["href","download","title"],ms={class:"left-num"},vs={class:"right-num"},hs=["href","download"],_s=$e({__name:"image-viewer",props:{url:{},originalUrl:{},name:{},originalName:{},size:{},originalSize:{},length:{},index:{},isSingle:{type:Boolean},variousInfo:{}},emits:["demand-image","delete-image","close"],setup(l,{expose:r,emit:u}){const g=ut(ot),o=l,a=u;r({download:B,cleanup:at,openPreview:ce,changeIndex(I){s.value=I}});const p=Dt(),{t:c}=nt();an();const b=w(),_=w(),f=w(),m=It("viewerItemContainer"),h=w(!0),s=w(Math.max(o.index,0)+1),z=w(1),y=w(1),E=w(""),T=w(1),M=w(1),P=w(!1),C=w(!1),X=w(!1),A=Ce(()=>{var I,L;return(L=(I=f.value)==null?void 0:I.previewInstRef)==null?void 0:L.displayed}),k=Ce(()=>{var I,L;return((L=(I=f==null?void 0:f.value)==null?void 0:I.previewInstRef)==null?void 0:L.previewSrc)===E.value}),K=Ce(()=>s.value<o.length),H=Ce(()=>s.value>1),re=w("viewer-item-init"),R=w(0),ye=w(!0);w({width:"auto",height:"auto"});const be=w(!1);He(()=>{document.body.addEventListener("keydown",ge),document.body.addEventListener("keydown",oe),q(s.value-1),le()}),ft(()=>{clearTimeout(ke),document.body.removeEventListener("keydown",ge),document.body.removeEventListener("keydown",oe),be.value=!0}),Pn(()=>{URL.revokeObjectURL(o.url),URL.revokeObjectURL(o.originalUrl)});let ke=-1;Fe(s,(I,L)=>{s.value<1||s.value>o.length||I===L||(clearTimeout(ke),I>L?re.value="viewer-item-next":re.value="viewer-item-prev",ke=setTimeout(()=>{o.index!==s.value-1&&(R.value=h.value?R.value:~R.value,ye.value=!1,q(s.value-1))},50))});let S="",N="";Fe(()=>o.url,()=>{var U,de;let I="";o.index===0&&h.value?(h.value=!1,s.value=1,I=o.url):o.index===s.value-1?(h.value=!1,P.value=!1,I=o.url):(URL.revokeObjectURL(o.url),URL.revokeObjectURL(o.originalUrl));const L=S,Q=N;if(URL.revokeObjectURL(L),URL.revokeObjectURL(Q),S=o.url,N=o.originalUrl,I){try{if((de=(U=f.value)==null?void 0:U.previewInstRef)!=null&&de.displayed){k.value?f.value.previewInstRef.setPreviewSrc(I):f.value.previewInstRef.setPreviewSrc(o.originalUrl);try{const ve=f.value.previewInstRef.displayed;f.value.previewInstRef.handleAfterLeave(),f.value.previewInstRef.displayed=ve}catch{}}}catch{}E.value=I}},{immediate:!0});function q(I){P.value=!0,C.value=!1,X.value=!1,Ke(()=>a("demand-image",I))}function le(){if(!g.IS_SP)return;let I=m.value.$el,L=0,Q=0,U=0,de=0,ve=0;const ct=Te=>{L=Te.touches[0].pageX,Q=Te.touches[0].pageY,ve=Date.now()};I.addEventListener("touchstart",ct);const lt=Te=>{U=Te.touches[0].pageX,de=Te.touches[0].pageY,st()};window.addEventListener("touchmove",lt);const ne=()=>{st();const Te=U-L,Ve=Math.abs(Te),Et=de-Q,i=Math.abs(Et);Ve<i||Ve<30||O(Te>0?-1:1)};window.addEventListener("touchend",ne);const st=()=>{const Te=Date.now();Te-ve>500&&(L=U,Q=de),ve=Te};ft(()=>{I.removeEventListener("touchstart",ct),window.removeEventListener("touchmove",lt),window.removeEventListener("touchend",ne),I=null})}function oe(I){var L,Q,U,de;if(I.key==="Escape")try{(Q=(L=f.value)==null?void 0:L.previewInstRef)!=null&&Q.displayed&&(I.stopPropagation(),(de=(U=f.value)==null?void 0:U.previewInstRef)==null||de.toggleShow(!1))}catch{}}function ge(I){switch(I.code){case"ArrowRight":O(1);break;case"ArrowLeft":O(-1);break;case"Home":s.value=1;break;case"End":s.value=o.length;break;case"Space":if(!A.value)return;Y();break;case"ArrowUp":case"ArrowDown":default:return}I.stopPropagation(),I.preventDefault()}function Ae({width:I,height:L}){z.value=I,y.value=L,C.value=!0}function he({width:I,height:L}){T.value=I,M.value=L,X.value=!0}function B(){k.value?b.value.download():_.value.download()}async function xe(I){try{const L=await fetch(I).then(Q=>Q.blob()).then(Q=>new Promise(U=>{const de=new FileReader;de.onload=U,de.readAsDataURL(Q)})).then(Q=>Q.target.result);navigator.clipboard.writeText(L),p.info({title:c("copiedDataURLDialogTitle"),content:()=>G("div",[G("div",c("copiedDataURLMessage")),G("p",{style:{padding:"1em"}},G("a",{onClick(Q){Z(L),Q.stopPropagation()},href:L,style:{}},"URL"))]),positiveText:"OK"})}catch{p.error({title:"failed to copy Data URL",content:"could not copy Data URL",positiveText:"OK"})}}function O(I){I>0?s.value=Math.min(o.length,s.value+I)|0:I<0&&(s.value=Math.max(1,s.value+I)|0)}function Z(I){window.open(I,"_blank").document.write(`<img src="${I}">`)}let ie="";const Y=()=>{var L,Q,U,de;ie=(U=window.getComputedStyle((Q=(L=f==null?void 0:f.value)==null?void 0:L.previewInstRef)==null?void 0:Q.previewRef))==null?void 0:U.transform;const I=k.value;(de=f==null?void 0:f.value)==null||de.next(),Ke(()=>{var ve;k.value===I&&((ve=f==null?void 0:f.value)==null||ve.next())})};function me(){try{Ke(()=>f.value.previewInstRef.previewRef.style.transform=ie)}catch{}}function ue({nodes:I}){const L=G(sn,{color:k.value?"green":"gray",offset:[-20,-12],value:k.value?c("status.Converted"):c("status.Original")},()=>G(Ee,{round:!0,onClick(){Y()},textColor:"white",size:"small",style:{marginLeft:"4px"}},{icon:()=>G(k.value?Ma:Ra)}));I.next=G(Ee,{onClick(){O(1)},disabled:!K.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>G(_n)}),I.prev=G(Ee,{onClick(){O(-1)},disabled:!H.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>G(Na)});try{const Q=I.download.children;Q.default=()=>c("save");const U=Q.trigger();U.props.onClick=B,Q.trigger=()=>U}catch{}return Ne(),[L,...Object.values(I)]}const Me="#pathbox-"+String(Math.random()).substring(2);let _e;function Ne(){var I,L,Q;try{if(_e=(Q=(L=(I=f.value)==null?void 0:I.previewInstRef)==null?void 0:L.previewWrapperRef)==null?void 0:Q.parentNode,!_e||_e.querySelector(Me))return;let U=G("div",{id:Me,onMousedown:de=>{de.stopPropagation()},className:"__preview-injected-pathbox"+(k.value?" converted":"")},[G("div",`${String(s.value).padStart(String(o.length).length,"0")}/${String(o.length).padStart(String(o.length).length,"0")}`),G("div",et(k.value?o.size:o.originalSize,0)),G("div",k.value?o.name:o.originalName)]);wn(U,_e),U=null}catch{}}ft(()=>{_e&&(wn(null,_e),_e=null)});function ce(){b.value.openPreview()}function at(){}return(I,L)=>{const Q=ze,U=Ue,de=On,ve=ht,ct=ln,lt=Fa;return F(),te(U,{justify:"center",align:"center",vertical:"",style:se({visibility:h.value?"hidden":"visible"}),class:"body",ref:"body"},{default:t(()=>[n(lt,{ref_key:"nImageGroupRef",ref:f,"show-toolbar-tooltip":"","render-toolbar":ue,onPreviewNext:me},{default:t(()=>[n(U,{wrap:!1,align:"center",justify:"center"},{default:t(()=>[n(e(Ee),{onClick:L[0]||(L[0]=ne=>O(-1)),disabled:!e(H),block:"",class:mt({"thumb-arrow":!0,pale:!e(H)}),title:I.$t("Prev")},{icon:t(()=>[n(Q,{size:"30"},{default:t(()=>[n(e(Pa))]),_:1})]),_:1},8,["disabled","class","title"]),n(U,{justify:"center",ref_key:"viewerItemContainer",ref:m,class:"viewer-item-container"},{default:t(()=>[n(Je,{name:re.value},{default:t(()=>[(F(),te(U,{vertical:"",key:R.value,"_v-show":"viewerItemVisibility"},{default:t(()=>[n(U,{align:"center",wrap:!1},{default:t(()=>[n(U,{vertical:""},{default:t(()=>[n(U,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(U,{align:"center",justify:"center",vertical:"",class:"original-thumb"},{default:t(()=>[v("a",{href:I.originalUrl,onClick:L[4]||(L[4]=it(ne=>{_.value.openPreview()},["prevent"])),download:I.originalName,title:I.originalName,class:"imglink"},[n(U,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(zn,{ref:ne=>{ne!=null&&ne.active&&(_.value=ne)},src:I.originalUrl,width:1,"max-width":1,"max-height":1,loading:P.value,"file-name":I.originalName,"allow-next":s.value<o.length,"allow-prev":s.value>1,onLoad:he,onNext:L[1]||(L[1]=ne=>O(1)),onPrev:L[2]||(L[2]=ne=>O(-1)),hidden:!0},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(U,{vertical:"",align:"center"},{default:t(()=>[n(U,{class:"imglink-label"},{default:t(()=>[x(d(e(c)("status.Original")),1)]),_:1}),n(U,{justify:"center",class:"img-size",wrap:!1},{default:t(()=>[v("span",ps,d(X.value?T.value:"?"),1),L[12]||(L[12]=x(" × ")),v("span",fs,d(X.value?M.value:"?"),1)]),_:1}),n(U,{justify:"center"},{default:t(()=>[L[3]||(hn(-1,!0),(L[3]=n(U,null,{default:t(()=>[x(d(X.value?e(et)(o.originalSize,0):"?"),1)]),_:1})).cacheIndex=3,hn(1),L[3])]),_:1})]),_:1})]),_:1})],8,ds)]),_:1}),n(U,{vertical:"",align:"center",style:{margin:"1em"},class:"original-thumb"},{default:t(()=>[n(Q,{size:"20",color:"silver",component:e(_n)},null,8,["component"])]),_:1}),v("a",{href:E.value,onClick:L[5]||(L[5]=it(ne=>ce(),["prevent"])),download:o.name,title:o.name,class:"imglink"},[n(U,{vertical:"",align:"center",justify:"center"},{default:t(()=>[n(U,{class:"imglink-label"},{default:t(()=>[x(d(e(c)("status.Converted")),1)]),_:1}),n(U,{vertical:"",align:"center",justify:"center",size:0},{default:t(()=>[n(U,{justify:"center"},{default:t(()=>{var ne;return[n(U,{wrap:!1,style:se((ne=o.variousInfo)!=null&&ne.shrinked?{color:"blue"}:{}),class:"img-size"},{default:t(()=>[v("span",ms,d(C.value?z.value:"?"),1),L[13]||(L[13]=x(" × ")),v("span",vs,d(C.value?y.value:"?"),1)]),_:1},8,["style"])]}),_:1})]),_:1}),n(U,{justify:"center"},{default:t(()=>[x(d(C.value?e(et)(o.size,0):"?"),1)]),_:1})]),_:1})],8,gs)]),_:1}),n(U,{ref:"fileNameContainer",justify:"center",align:"center",class:"pathbox",title:o.name},{default:t(()=>[n(de,{"x-scrollable":!0,trigger:"hover",style:{"text-align":"center","font-size":"smaller",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},{default:t(()=>[x(d(C.value?o.name:"?"),1)]),_:1})]),_:1},8,["title"])]),_:1}),n(U,{vertical:""},{default:t(()=>[n(zn,{ref:ne=>{ne!=null&&ne.active&&(b.value=ne)},src:E.value,width:142,"max-width":140,"max-height":100,loading:P.value,"file-name":o.name,"allow-next":s.value<o.length,"allow-prev":s.value>1,onLoad:Ae,onNext:L[6]||(L[6]=ne=>O(1)),onPrev:L[7]||(L[7]=ne=>O(-1))},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(U,{justify:"center",wrap:!0},{default:t(()=>[n(ve,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[v("a",{href:o.url,ref:"saveImg",target:"_blank",download:o.name},[n(e(Ee),{disabled:!C.value,round:"",size:"tiny"},{default:t(()=>[x(d(I.$t("save")),1)]),_:1},8,["disabled"])],8,hs)]),default:t(()=>[x(" "+d(I.$t("save")),1)]),_:1}),n(ve,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(e(Ee),{disabled:!C.value,onClick:L[8]||(L[8]=ne=>xe(o.url)),round:"",size:"tiny"},{default:t(()=>L[14]||(L[14]=[x("DataURL")])),_:1},8,["disabled"])]),default:t(()=>[x(" "+d(I.$t("convertedImageDataUrlTooltip")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1},8,["name"])]),_:1},512),n(e(Ee),{onClick:L[9]||(L[9]=ne=>O(1)),disabled:!e(K),block:"",class:mt({"thumb-arrow":!0,next:!0,pale:!e(K)}),title:I.$t("Next")},{icon:t(()=>[n(Q,{size:"30"},{default:t(()=>[n(e(Oa))]),_:1})]),_:1},8,["disabled","class","title"])]),_:1}),Be(n(U,{style:{width:"100%"},wrap:!1},{default:t(()=>[n(ct,{value:s.value,"onUpdate:value":L[10]||(L[10]=ne=>s.value=ne),tooltip:!1,step:1,min:1,max:o.length,keyboard:!1,class:"index-slider"},null,8,["value","max"]),n(U,{class:"index",align:"center",justify:"center",wrap:!1,size:3},{default:t(()=>[n(U,null,{default:t(()=>[x(d(e(c)("status.index"))+":",1)]),_:1}),n(U,{justify:"end",align:"center",class:"counter"},{default:t(()=>[x(d(s.value),1)]),_:1}),n(U,null,{default:t(()=>L[15]||(L[15]=[x("/")])),_:1}),n(U,{justify:"start",align:"center",class:"counter"},{default:t(()=>[x(d(o.length),1)]),_:1})]),_:1})]),_:1},512),[[Ze,!I.isSingle]]),n(e(Ee),{onClick:L[11]||(L[11]=ne=>{a("close")}),circle:"",size:"tiny",color:"silver",class:"close-button",title:I.$t("close")},{icon:t(()=>[n(Q,{size:"12"},{default:t(()=>[n(e(Ua))]),_:1})]),_:1},8,["title"])]),_:1},512)]),_:1},8,["style"])}}}),ws=Xe(_s,[["__scopeId","data-v-155e3f08"]]),ys={class:"status-table"},bs={class:"started"},ks={class:"mini-counter"},As={class:"failure"},zs={class:"mini-counter"},Is={colspan:"2"},xs={class:"completed"},Ts={class:"main-counter"},Ss={class:"total"},Ls={class:"main-counter"},Cs=$e({__name:"status.center-column",props:{processing:{type:Boolean},interval:{},statusColor:{},success:{},successTo:{},successFrom:{},index:{},length:{},failure:{},retried:{},successPercTo:{},successPercFrom:{}},setup(l){const r=l,u=an(),g=w(u.value.successColor),o=w(!1);return Fe(()=>r.processing,a=>{a||(r.success===r.length?o.value=!0:g.value=u.value.errorColor)}),(a,p)=>{const c=ht,b=ze,_=ja,f=Ue,m=Un;return F(),te(m,{type:"multiple-circle","stroke-width":2,percentage:[a.successTo/a.length*100|0,a.index/a.length*100|0],color:[e(u).successColor,a.statusColor],"rail-style":[{stroke:e(g),opacity:.3}]},{default:t(()=>[n(f,{vertical:"",align:"center",justify:"center",size:0,style:{"font-family":"v-mono","white-space":"nowrap"},wrap:!1,"wrap-item":!1},{default:t(()=>[v("table",ys,[v("tbody",null,[v("tr",bs,[v("td",null,d(a.$t("status.started"))+":",1),v("td",ks,[n(c,{trigger:"hover",style:se({color:e(u).infoColor}),placement:"left"},{trigger:t(()=>[v("span",{style:se({color:e(u).infoColor})},d(a.index.toLocaleString("en-us")),5)]),default:t(()=>[x(" "+d(a.$t("status.progressStarted"))+" ("+d(a.index.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])])]),v("tr",As,[v("td",null,d(a.$t("status.failure"))+":",1),v("td",zs,[n(c,{trigger:"hover",style:se({color:e(u).errorColor}),placement:"left"},{trigger:t(()=>[v("span",{style:se({color:e(u).errorColor})},d(a.failure.toLocaleString("en-us")),5)]),default:t(()=>[x(" "+d(a.$t("status.progressErrors"))+" ("+d(a.failure.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"]),a.retried>0?(F(),te(c,{key:0,trigger:"hover",style:se({color:e(u).warningColor}),placement:"left"},{trigger:t(()=>[v("span",{style:se({color:e(u).warningColor})}," ("+d(a.retried.toLocaleString("en-us"))+") ",5)]),default:t(()=>[x(" "+d(a.$t("status.progressRetries"))+" ("+d(a.retried.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):pe("",!0)])]),v("tr",null,[v("td",Is,[n(f,{size:0,align:"center",justify:"center",style:se({color:a.processing?a.statusColor:e(g)}),wrap:!1,class:"perc"},{default:t(()=>[e(o)?(F(),te(b,{key:0,component:e(Da)},null,8,["component"])):pe("",!0),n(_,{duration:a.interval*3|0,from:a.successPercFrom|0,to:a.successPercTo|0,active:!0},null,8,["duration","from","to"]),p[0]||(p[0]=x("% "))]),_:1},8,["style"])])]),v("tr",xs,[v("td",null,d(a.$t("status.success"))+":",1),v("td",Ts,[n(c,{trigger:"hover",duration:0,delay:0,style:se({color:e(u).successColor}),placement:"bottom"},{trigger:t(()=>[v("span",{style:se({color:e(u).successColor})},[n(_,{duration:a.interval*3|0,from:a.successFrom,to:a.successTo,active:!0,"show-separator":!0},null,8,["duration","from","to"])],4)]),default:t(()=>[x(" "+d(a.$t("status.progressSuccess"))+" ("+d(a.successTo.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])])]),v("tr",Ss,[v("td",null,d(a.$t("status.all"))+":",1),v("td",Ls,[n(c,{trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:t(()=>[x(d(a.length.toLocaleString("en-us")),1)]),default:t(()=>[x(" "+d(a.$t("status.progressTotal"))+" ("+d(a.length.toLocaleString("en-us"))+") ",1)]),_:1})])])])])]),_:1})]),_:1},8,["percentage","color","rail-style"])}}}),$s={key:0},Es={style:{}},Fs={key:0,class:"log-table",ref:"table"},Ps={class:"log-tr label"},Os={class:"log-th"},Us={style:{"min-width":"7em"},class:"log-th"},Ms={style:{"padding-left":"2em"},class:"log-th"},Rs=["onClick"],Ns={class:"log-td"},Ds={class:"log-td"},js={class:"log-td"},Bs={class:"log-td"},Zs={style:{margin:"1px"}},Ws=["href","download","onClick"],Hs={key:0,style:{position:"relative"}},Vs=["href","download"],qs=["href","download"],Gs={key:0,style:{margin:"1px"}},Ks=["href","download","onClick"],Ys=99999,Xs=250,Qs=100,Js=$e({__name:"status",props:{processing:{type:Boolean},status:{},interval:{}},emits:["all-zips-clicked","demand-zip-errors","demand-image","delete-image"],setup(l,{expose:r,emit:u}){const g=Dt(),{t:o}=nt(),a=an(),p={W:160,H:80},c=l,b=u;r({cleanup:Et});const _=w(!1),f=w([]),m=w(!1);It("table");const h=w(null),s=w([]),z=w([]),y=w([0,0]),E=w([0,0]),T=w([0,0]),M=w([0,0]),P=w([0,0]),C=w([0,0]),X=w(0),A=w(0),k=w([0,0]),K=w(a.value.infoColor),H=w("#000000"),re=w("#000000"),R=w(0),ye=w(0),be=w(""),ke=w("00:00:00"),S=w(void 0),N=w(!1),q=w(!0);w(!1);const le=w("16em"),oe=w(!0),ge=Ce(()=>N.value?99999:5),Ae=Ce(()=>{let i=f.value;switch(U.value){case"success":i=i.filter($=>$.completed);break;case"error":i=i.filter($=>!$.completed);break}return i.slice(-ge.value)}),he=w(!1),B=Nt({name:"",originalName:"",size:0,url:"",originalUrl:"",originalSize:0,dataUrl:"",index:0,various:{shrinked:!1}}),xe=It("body"),O=w(null),Z=w(null),ie=w(),Y=It("imageViewer");He(()=>{Fe(c.status,()=>Ne(),{deep:!1}),Fe([Z,oe],()=>{if(!Z.value||!oe.value)return;const{width:Se,height:Le}=lo(Z.value,{width:p.W,height:p.H});O.value.width=Se,O.value.height=Le,O.value.style.width=Se+"px",O.value.style.height=Le+"px",Z.value instanceof HTMLImageElement?O.value.getContext("2d").drawImage(Z.value,0,0,Se,Le):(O.value.getContext("bitmaprenderer").transferFromImageBitmap(Z.value),Z.value.close(),Z.value=null,c.status.thumbnail=null)});let i=0;const $=()=>{if(i)return;const Se=Date.now();ke.value="00:00:00",i=window.setInterval(()=>{const Le=(Date.now()-Se)/1e3;ke.value=`${String(Le/3600|0).padStart(2,"0")}:${String(Le/60%60|0).padStart(2,"0")}:${String(Le%60|0).padStart(2,"0")}`},300)};$(),Fe(()=>c.processing,(Se,Le)=>{Se?($(),f.value=[],_.value=!1,m.value=!1,s.value=[],z.value=[]):(clearInterval(i),i=0),c.processing||at()});const j=yn();let V;const J=()=>{clearTimeout(V),V=setTimeout(()=>{if(!oe.value||De)return;const Se=ie.value.$parent.$el.offsetHeight,Le=window.innerHeight-j.parent.parent.vnode.el.offsetHeight-8;le.value=Math.max(Se+Le,Xs)+"px"},100)};J(),window.addEventListener("resize",J);const fe=new ResizeObserver(J);fe.observe(j.parent.parent.vnode.el);let De=!1;ft(()=>{De=!0,fe.disconnect(),clearInterval(i),clearTimeout(V),clearTimeout(_e),clearTimeout(ne),window.removeEventListener("resize",J)})}),ft(()=>{Et()}),Fe([()=>c.status.zips.length,()=>c.status.failedZips.length],()=>{const i=c.status;{s.value.length>i.zips.length&&(s.value.length=0);let $=0;const j=i.zips.length===1&&i.zippedTotalCount===i.length;for(let V=s.value.length;V<i.zips.length;V++){const J=i.zips[V],fe=i.baseZipName+(j?"":"-"+String(V+1).padStart(2,"0"))+".zip";$+=J.size,s.value[V]={url:J.url,size:J.size,number:j?0:V+1,sizeByUnit:et(J.size),name:fe,count:J.count,clicked:!1}}}{z.value.length>i.failedZips.length&&(z.value.length=0);let $=0;const j=i.failedZipDone&&i.failedZips.length===1;for(let V=z.value.length;V<i.failedZips.length;V++){const J=i.failedZips[V],fe=i.baseZipName+"-error"+(j?"":"-"+String(V+1).padStart(2,"0"))+".zip";$+=J.size,z.value[V]={url:J.url,size:J.size,number:j?0:V+1,sizeByUnit:et(J.size),name:fe,count:J.count,clicked:!1}}}});let me=null;Fe(()=>B.index,()=>{Ke(()=>{var $,j;let i=h.value;(me==null?void 0:me.offsetTop)>(i==null?void 0:i.offsetTop)&&(i=i.previousSibling||i,i instanceof HTMLElement||(($=ie.value)==null||$.scrollTo(0,0),i=null)),(j=i==null?void 0:i.scrollIntoView)==null||j.call(i,{behavior:"auto",block:"nearest"}),me=h.value})});const ue=c.interval||100;let Me=!1,_e=0;function Ne(){if(Me)return;if(_e){Me=!0;return}_e=window.setTimeout(()=>{_e=0,Me&&(Me=!1,Ne())},ue);const i=c.status;_.value=i.length>=2,E.value[1]=E.value[0],E.value[0]=i.index,T.value[1]=T.value[0],T.value[0]=i.success,M.value[1]=M.value[0],M.value[0]=i.failure,P.value[1]=P.value[0],P.value[0]=i.done,C.value[1]=C.value[0],C.value[0]=i.converted,X.value=i.retried,A.value=i.length,k.value[1]=k.value[0],k.value[0]=i.zippedTotalCount,R.value=i.inputTotalSize,ye.value=i.outputTotalSize;const $=ye.value-R.value;be.value=($>=0?"+ ":"")+et($);const j=ye.value/R.value,V=(256|Math.min(255,Math.max(0,j-1.5)*255|0)).toString(16).substring(1);H.value="#"+V+"0000";const J=1024*1024,fe=(256|Math.min(255,Math.max(0,$/1024/J)*255|0)).toString(16).substring(1);if(re.value="#"+fe+"0000",y.value[1]=y.value[0],y.value[0]=T.value[0]/A.value*100,oe.value||!c.processing){const De=i.logs.slice(-99999);f.value.push(...De);const Se=f.value.length-Ys;Se>0&&f.value.splice(0,Se),q.value&&De.length&&Te()}i.logs.length=0,Z.value=i.thumbnail,c.processing&&(K.value=M.value[0]?a.value.errorColor:X.value?a.value.warningColor:a.value.infoColor),i.convertedImageUrl!==B.url&&(B.url=i.convertedImageUrl,B.name=i.convertedImageName,B.dataUrl=i.convertedImageDataUrl,B.size=i.convertedImageSize||i.outputTotalSize,B.originalSize=i.convertedImageOrgSize,B.originalName=i.convertedImageOrgName,B.index=i.convertedImageIndex,B.originalUrl=i.convertedImageOrgUrl,B.various={shrinked:i.convertedImageShrinked})}let ce=yn();function at(){c.status,K.value=c.status.success===c.status.length?a.value.successColor:a.value.errorColor,N.value||(oe.value=!1,N.value=!0),he.value=!0,oe.value&&(setTimeout(Te,500),ce.proxy.$forceUpdate(),ce=null),Ne()}async function I(i,$,j,V){var J;if(i){const fe=c.status.ziplogs.findIndex(De=>De.fileId===j);if(fe===-1)return;he.value||(he.value=!0,await Ke()),(J=Y.value)==null||J.changeIndex(fe+1)}}function L(i){var Se;const $=f.value,j=$.findIndex(Le=>Le.zippedIndex===B.index);let V=0,J=1;switch(i.code){case"ArrowUp":V=-1;break;case"ArrowDown":V=1;break;case"PageUp":V=-1,J=10;break;case"PageDown":V=1,J=10;break;case"Enter":j>=0&&Ke(()=>{var Le;return(Le=Y.value)==null?void 0:Le.openPreview()});break;default:return}let fe=j;const De=$.length;do{if(fe+=V,fe<0||fe>De-1||fe===j)break;if($[fe].completed){if((Se=Y.value)==null||Se.changeIndex($[fe].zippedIndex+1),i.preventDefault(),--J>0)continue;break}}while(!0)}const Q=[{label:o("status.showAll"),value:""},{label:o("status.showOnlySuccess"),value:"success"},{label:o("status.showOnlyError"),value:"error"}],U=w(Q[0].value),de=Ce(()=>[{key:"open",label:o("status.openFailedList"),icon:()=>G(ze,()=>G(Mn)),onSelect(){lt()}},{key:"download",label:o("status.saveFailedList"),icon:()=>G(ze,()=>G(Ba)),onSelect(){lt(!0)}},{key:"zip",label:`${o("status.zipFailedList")}`+(c.status.failedZipDone?`(✔${o("status.done")})`:""),icon:()=>G(zt,{show:m.value&&!c.status.failedZipDone,size:"small"},()=>G(ze,()=>G(Qt))),disabled:m.value,onSelect(i){return m.value=!0,b("demand-zip-errors"),!1}}]);function ve(i,$=!1){const{url:j,name:V}=i;if($){const J=document.createElement("a");J.href=j,J.download=V,J.click()}i.clicked||(i.clicked=!0,c.processing||s.value.every(J=>J.clicked)&&b("all-zips-clicked"))}async function ct(){if(_.value){if(s.value.length>=2&&!await new Promise((j,V)=>g.warning({title:o("Download"),content:o("status.confirmDownloadMessage",[s.value.length]),positiveText:"OK",negativeText:o("cancel"),onPositiveClick:()=>j(!0),onNegativeClick:()=>V()})))return;const i=s.value;for(const $ of i)ve($,!0)}else Y.value.download()}function lt(i=!1){const $=new Blob([c.status.unconvertedListText],{type:"text/plain;charset=utf8"}),j=URL.createObjectURL($),V=document.createElement("a");V.href=j,V.target="_blank",i&&(V.download=c.status.baseZipName+"-error.txt"),V.click()}let ne=0,st=!1;function Te(i=!1){if(!st){if(ne){st=!0;return}Ke(()=>{!i&&(!N.value||!q.value)||(ie.value.scrollTo({behavior:"instant",top:f.value.length*50}),ne=window.setTimeout(()=>{ne=0,st&&(st=!1,Te())},Qs))})}}const Ve=w(!1);function Et(){Ve.value=!0,URL.revokeObjectURL(B.url),URL.revokeObjectURL(B.originalName),B.originalUrl="",B.url="",B.index=0,c.status.logs.length=0,f.value.length=0,z.value.length=0,s.value.length=0,N.value=!1,he.value=!1,me=null}return(i,$)=>{const j=Ue,V=Za,J=jt,fe=Dn,De=Ie,Se=on,Le=Nn,Zt=Rn,ya=nn,_t=Ee,fn=Un,dt=ht,ba=is,gn=sn,ka=Wa;return F(),te(j,{ref_key:"body",ref:xe,vertical:"",justify:"center"},{default:t(()=>[n(j,{justify:"center",align:"center",wrap:!1,style:{"white-space":"nowrap"}},{default:t(()=>[n(j,{vertical:"",justify:"center",class:"left-column"},{default:t(()=>[n(V,{"tabular-nums":"",label:i.$t("status.elapsedTime")},{default:t(()=>[n(j,null,{default:t(()=>[x(d(e(ke)),1)]),_:1})]),_:1},8,["label"]),n(V,{"tabular-nums":"",label:i.$t("status.multiThreading")},{default:t(()=>[n(j,{style:se({color:c.status.threads?"":"red",fontSize:"0.7em"})},{default:t(()=>[x(d(c.status.threads?i.$rt("{n} @:threads",c.status.threads):i.$t("disabled")),1)]),_:1},8,["style"])]),_:1},8,["label"]),n(V,{"tabular-nums":"",label:i.$t("status.outputSettings")},{default:t(()=>[n(j,{vertical:"",justify:"end",style:{"font-size":"0.6em","line-height":"0.6em"}},{default:t(()=>[v("div",null,d(i.$t("settings.imageType"))+": "+d(c.status.type),1),i.status.shrink?(F(),ae("div",$s,[x(d(i.$t("status.Shrinking"))+": ",1),v("span",Es,d(i.status.shrink[0])+"×"+d(i.status.shrink[1]),1)])):pe("",!0),v("div",null,"Zip: "+d(c.status.zipSize)+"MB",1)]),_:1})]),_:1},8,["label"])]),_:1}),e(Ve)?pe("",!0):(F(),te(Cs,{key:0,index:e(E)[0],success:i.status.success,length:i.status.length,"success-to":e(T)[0],"success-from":e(T)[1],failure:e(M)[0],"success-perc-to":e(y)[0],"success-perc-from":e(y)[1],retried:e(X),processing:i.processing,interval:e(ue),"status-color":e(K),class:"center-column"},null,8,["index","success","length","success-to","success-from","failure","success-perc-to","success-perc-from","retried","processing","interval","status-color"])),n(j,{vertical:"",style:{height:"100%"},justify:"center"},{default:t(()=>[n(V,{"tabular-nums":"",label:i.$t("status.inputSize")},{default:t(()=>[n(j,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[x(d((e(R)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(V,{"tabular-nums":"",label:i.$t("status.outputSize")},{default:t(()=>[n(j,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[x(d((e(ye)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(V,{"tabular-nums":"",label:i.$t("status.outInRate")},{default:t(()=>[n(j,{vertical:"",align:"end",justify:"start",style:{"font-size":"xx-small","font-family":"v-mono","line-height":"50%"}},{default:t(()=>[v("span",{style:se({color:e(H),fontSize:"larger"})},"× "+d((e(ye)/e(R)||1).toFixed(2)),5),v("span",{style:se({color:e(re)})},"("+d(e(be))+")",5)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1}),n(Zt,{"display-directive":"show","trigger-areas":["arrow","main"],"default-expanded-names":"log-collapse","expanded-names":e(oe)?["log-collapse"]:[],onUpdateExpandedNames:$[8]||($[8]=D=>{oe.value=!!String(D)})},{default:t(()=>[n(Le,{title:"Log",name:"log-collapse",style:{"white-space":"nowrap"}},{header:t(()=>[n(j,{align:"center",wrap:!1},{default:t(()=>[x(d(i.$t("status.log")),1),Be(n(e(zt),{size:16},null,512),[[Ze,i.processing&&!e(oe)]])]),_:1})]),"header-extra":t(()=>[Be(n(j,{align:"center",justify:"end",wrap:!0,style:{"margin-left":"0.5em"}},{default:t(()=>[n(Vt,null,{default:t(()=>[n(J,{value:e(U),"onUpdate:value":$[0]||($[0]=D=>Ye(U)?U.value=D:null),placeholder:i.$t("status.filterLogSelect"),options:Q,size:"tiny",style:{width:"auto","font-size":"smaller"},"consistent-menu-width":!1,"show-on-focus":!1},null,8,["value","placeholder"]),Be(n(fe,{key:"b",checked:e(q),"onUpdate:checked":[$[1]||($[1]=D=>Ye(q)?q.value=D:null),$[2]||($[2]=D=>D&&Te(!0))],size:"small",style:{"font-size":"smaller"}},{default:t(()=>[x(d(i.$t("status.autoScroll")),1)]),_:1},8,["checked"]),[[Ze,e(N)]])]),_:1}),n(De,{style:{"max-width":"30em"}},{trigger:t(()=>[n(fe,{size:"small",checked:e(N),"onUpdate:checked":[$[3]||($[3]=D=>Ye(N)?N.value=D:null),$[4]||($[4]=D=>{q.value=D,Te(!0)})],style:{"font-size":"smaller"}},{default:t(()=>[x(d(i.$t("status.expandLog")),1)]),_:1},8,["checked"])]),default:t(()=>[x(d(i.$t("status.expandLogTooltip")),1)]),_:1})]),_:1},512),[[Ze,e(oe)]])]),default:t(()=>[n(j,{wrap:!1,class:mt({"log-container":1,"expand-log":e(N)}),align:"stretch",style:se(e(N)?{height:e(le),maxHeight:e(le)}:{}),onKeydown:L,tabindex:"-1"},{default:t(()=>[n(e(On),{ref_key:"scrollref",ref:ie,distance:10,"x-scrollable":!0,onMouseup:$[6]||($[6]=D=>q.value=!1),onWheel:$[7]||($[7]=D=>q.value=!1),load:"handleLogLoad",trigger:"none",style:se([{"z-index":"2","padding-right":"10px","min-height":"7em"},{maxHeight:e(le)}]),size:50},{default:t(()=>[e(oe)?(F(),ae("table",Fs,[v("thead",null,[v("tr",Ps,[v("th",Os,d(i.$t("status.table.core")),1),$[16]||($[16]=v("th",{class:"log-th"},"no.",-1)),v("th",Us,d(i.$t("status.table.status")),1),v("th",Ms,d(i.$t("status.table.details")),1)])]),v("tbody",null,[(F(!0),ae(Oe,null,At(e(Ae),({index:D,key:pt,command:Qe,path:Ft,core:mn,zippedIndex:Wt,completed:vn,fileId:Aa},rr)=>(F(),ae("tr",{key:pt,class:mt({"log-tr":1,completed:vn,selected:e(B).index===Wt}),ref_for:!0,ref:Ht=>{e(B).index===Wt&&(h.value=Ht)},onClick:Ht=>I(vn,Ft,Aa,Wt),onDblclick:$[5]||($[5]=Ht=>e(Y).openPreview())},[v("td",Ns,d(mn>=0?mn+1:"-"),1),v("td",Ds,d(D+1),1),v("td",js,d(Qe),1),v("td",Bs,d(Ft),1)],42,Rs))),128))])],512)):pe("",!0),$[17]||($[17]=v("div",{style:{height:"1em"}},null,-1))]),_:1},8,["style"]),n(j,{style:se([{"align-self":"center",position:"absolute","z-index":"0","margin-top":"0.5em",right:"0.1em","line-height":"0px"},{width:p.W+"px",height:p.H+"px"}]),justify:"center",align:"center"},{default:t(()=>[n(e(zt),{size:"small",show:i.processing},{default:t(()=>[c.status.thumbnail===void 0?(F(),te(Se,{key:0,description:"EMPTY"})):pe("",!0),Be(v("canvas",{ref_key:"thumbcanvas",ref:O,width:"106",height:"80",style:se({border:"1px solid gray",filter:i.processing?"":"opacity(0.35)"})},null,4),[[Ze,c.status.thumbnail!==void 0]])]),_:1},8,["show"])]),_:1},8,["style"])]),_:1},8,["class","style"])]),_:1})]),_:1},8,["expanded-names"]),n(ya,{style:{margin:"0em"}}),n(j,{wrap:!1,vertical:""},{default:t(()=>[n(j,{justify:"center",align:"center",vertical:""},{default:t(()=>[n(Je,null,{default:t(()=>[e(he)?e(he)&&i.status.success>0&&!e(Ve)?(F(),te(ws,{key:1,ref_key:"imageViewer",ref:Y,url:e(B).url,size:e(B).size,"original-url":e(B).originalUrl,"original-size":e(B).originalSize,name:e(B).name,originalName:e(B).originalName,length:c.status.success,index:e(B).index,"various-info":e(B).various,"is-single":!e(_),onDemandImage:$[10]||($[10]=D=>b("demand-image",D)),on_deleteImage:$[11]||($[11]=D=>b("delete-image",D)),onClose:$[12]||($[12]=D=>he.value=!1)},null,8,["url","size","original-url","original-size","name","originalName","length","index","various-info","is-single"])):pe("",!0):(F(),te(_t,{key:0,tertiary:"",type:"success",size:"small",disabled:!(i.status.success>0),onClick:$[9]||($[9]=D=>he.value=!0)},{default:t(()=>[x(d(i.$t("status.browseConvertedImages")),1)]),_:1},8,["disabled"]))]),_:1})]),_:1}),e(Ve)?pe("",!0):(F(),te(j,{key:0,justify:"center"},{default:t(()=>[Be(n(j,{vertical:"",align:"center"},{default:t(()=>[n(dt,{placement:"left"},{trigger:t(()=>[n(fn,{type:"line","indicator-placement":"inside",color:"lime","rail-color":"rgba(99, 255, 99, 0.5)","indicator-text-color":e(k)[0]===e(A)?"white":"green",processing:i.processing,percentage:e(k)[0]/e(A)*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[v("span",Zs,d(e(k)[0]/e(A)*100|0)+"% "+d(i.$t("status.zipped"))+" ("+d(e(k)[0])+"/"+d(e(C)[0])+")",1)]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[x(" "+d(i.$t("status.zippingProgress"))+" ("+d(e(k)[0]/e(A)*100|0)+"%) ",1)]),_:1}),n(Je,{name:"zipcontainer"},{default:t(()=>[e(s).length>=1||c.processing?(F(),te(Vt,{key:0,name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(F(!0),ae(Oe,null,At(e(s),(D,pt)=>(F(),ae("span",{key:pt},[n(dt,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[v("a",{href:D.url,download:D.name,class:"in-button-anchor",onClick:Qe=>ve(D)},[n(_t,{class:"zip-button",size:"tiny",color:D.clicked?"#050":"lime","text-color":D.clicked?"gray":"white",onClick:it(Qe=>ve(D),["stop"]),round:""},{default:t(()=>[n(e(ze),{size:"tiny"},{default:t(()=>[n(e(Qt))]),_:1}),x("ZIP"+d(D.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Ws)]),default:t(()=>[v("div",{style:se({color:e(a).successColor})},[v("div",null,"ZIP "+d(D.number||"")+" ("+d(i.$t("success"))+")",1),v("div",null,d(D.name),1),v("div",null,d(D.sizeByUnit),1),v("div",null,d(i.$rt("{n} @:files",D.count)),1)],4)]),_:2},1024)]))),128))]),_:1})):pe("",!0)]),_:1})]),_:1},512),[[Ze,e(_)]])]),_:1})),n(Je,null,{default:t(()=>[e(Ve)?pe("",!0):Be((F(),te(j,{key:0,justify:"center",align:"center"},{default:t(()=>[n(dt,{trigger:"hover",duration:0,delay:0,placement:"left",style:se({color:"white",backgroundColor:e(a).successColor}),"arrow-style":{backgroundColor:e(a).successColor}},{trigger:t(()=>[n(Je,{name:"save"},{default:t(()=>[e(T)[0]>0?(F(),ae("span",Hs,[n(gn,{value:e(_)?e(k)[0].toLocaleString("en-us"):c.status.type.replace(/\(.+\)/,""),color:e(a).successColorHover,offset:[-20,-3]},{default:t(()=>[n(_t,{size:"medium",onClick:ct,color:e(a).successColor,round:""},{default:t(()=>[e(_)?(F(),ae(Oe,{key:0},[e(s).length?(F(),ae("a",{key:0,href:e(s)[0].url,download:e(s)[0].name,class:"in-button-anchor",onClick:$[13]||($[13]=it(()=>{},["prevent"]))},[n(ba),x(" × "+d(e(s).length)+" "+d(i.$t("status.saveAll")),1)],8,Vs)):pe("",!0)],64)):(F(),ae("a",{key:1,href:e(B).url,download:e(B).name,class:"in-button-anchor",onClick:$[14]||($[14]=it(()=>{},["prevent"]))},[n(e(ze),{size:"tiny"},{default:t(()=>[n(e(jn))]),_:1}),x(" "+d(i.$t("save")),1)],8,qs))]),_:1},8,["color"])]),_:1},8,["value","color"])])):pe("",!0)]),_:1})]),default:t(()=>[i.status.length>=2?(F(),ae(Oe,{key:0},[v("div",null,d(e(o)("success"))+": "+d(e(k)[0].toLocaleString()),1),v("div",null,d(e(o)("status.totalSize"))+": "+d(e(et)(i.status.zippedTotalSize)),1),v("div",null,"ZIP × "+d(e(s).length),1),v("div",null,d(e(o)("status.saveAllZipsTooltip")),1)],64)):(F(),ae(Oe,{key:1},[x(d(i.$t("status.downloadConvertedImage",e(s).length)),1)],64))]),_:1},8,["style","arrow-style"]),!i.processing&&i.status.success!==e(A)?(F(),te(ka,{key:0,options:e(de),onSelect:$[15]||($[15]=(D,pt)=>{var Qe;return(Qe=e(de).find(({key:Ft})=>D===Ft))==null?void 0:Qe.onSelect()}),"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start"},{default:t(()=>[n(dt,{show:e(S),duration:0,delay:0,placement:"right",style:se({color:"white",backgroundColor:e(a).errorColor}),"arrow-style":{backgroundColor:e(a).errorColor}},{trigger:t(()=>[n(gn,{value:i.status.unconvertedFileCount.toLocaleString(),color:e(a).errorColorHover,offset:[-0,-3]},{default:t(()=>[n(_t,{size:"small",color:e(a).errorColor},{default:t(()=>[n(e(ze),{size:"medium",style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Ha))]),_:1})]),_:1},8,["color"])]),_:1},8,["value","color"])]),default:t(()=>[v("div",null,[v("div",null,d(e(o)("failed"))+": "+d(i.status.unconvertedFileCount.toLocaleString()),1),v("div",null,d(e(o)("status.totalSize"))+": "+d(e(et)(i.status.unconvertedTotalSize)),1)])]),_:1},8,["show","style","arrow-style"])]),_:1},8,["options"])):pe("",!0)]),_:1},512)),[[Ze,!c.processing]])]),_:1}),n(Je,{name:"zipcontainer"},{default:t(()=>[e(Ve)?pe("",!0):Be((F(),te(j,{key:0,vertical:"",align:"center"},{default:t(()=>[n(dt,{placement:"left"},{trigger:t(()=>[n(fn,{type:"line","indicator-placement":"inside",color:"red","rail-color":"rgba(255, 0, 0, 0.5)","indicator-text-color":i.status.failedFileZippedCount===i.status.unconvertedFileCount?"white":"#500",processing:e(m)&&!i.status.failedZipDone&&!i.status.failedToCreateFailedZip,percentage:i.status.failedFileZippedCount/i.status.unconvertedFileCount*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[i.status.failedToCreateFailedZip?(F(),ae("div",{key:1,style:se({color:e(a).errorColor})},d(i.$t("status.failureZippingFailedFiles")),5)):(F(),ae("span",Gs,d(i.status.failedFileZippedCount/i.status.unconvertedFileCount*100|0)+"% "+d(i.$t("status.zipped"))+" ("+d(i.status.failedFileZippedCount)+"/"+d(i.status.unconvertedFileCount)+")",1))]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[x(" "+d(i.$t("status.zippingProgress"))+" ("+d(i.status.failedFileZippedCount/i.status.unconvertedFileCount*100|0)+"%) ",1)]),_:1}),n(Vt,{name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(F(!0),ae(Oe,null,At(e(z),(D,pt)=>(F(),ae("span",{key:pt},[n(dt,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[v("a",{href:D.url,download:D.name,class:"in-button-anchor",onClick:Qe=>ve(D)},[n(_t,{class:"zip-button",size:"tiny",color:D.clicked?"#551122":"#F00","text-color":D.clicked?"gray":"white",onClick:it(Qe=>ve(D),["stop"]),round:""},{default:t(()=>[n(e(ze),{size:"tiny"},{default:t(()=>[n(e(Va))]),_:1}),x("ZIP"+d(D.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Ks)]),default:t(()=>[v("div",{style:se({color:e(a).errorColor})},[v("div",null,"ZIP "+d(D.number||"")+" ("+d(i.$t("failed"))+")",1),v("div",null,d(D.name),1),v("div",null,d(D.sizeByUnit),1),v("div",null,d(i.$rt("{n} @:files",D.count)),1)],4)]),_:2},1024)]))),128))]),_:1})]),_:1},512)),[[Ze,e(m)]])]),_:1})]),_:1})]),_:1},512)}}}),ei=Xe(Js,[["__scopeId","data-v-e05fb4cc"]]),ti=["innerHTML"],ni=$e({__name:"converter",props:Ot({input:{},format:{},quality:{},retainExtension:{type:Boolean},maxZipSizeMB:{},threads:{}},{showNote:{type:Boolean},showNoteModifiers:{}}),emits:Ot(["start","end"],["update:showNote"]),setup(l,{emit:r}){ut(ot);const{t:u}=nt(),g=Dt(),o=qa(),a=Ga(),p=10,c=navigator.hardwareConcurrency,b=typeof OffscreenCanvas=="function",_=100,f=l,m=Re(l,"showNote"),h=r,s=w(!1),z=w(!1),y=w(!1),E=w(!1),T=w(!1),M=w("initializing"),P=w("info"),C=Nt(le()),X=It("stat"),A=w(0);let k=!1,K=()=>{},H,re=0,R=!1;Fe(()=>f.input,O=>{O!=null&&O.length&&ge(O)}),Fe(E,O=>{document.body.style.overflowY=O?"hidden":"auto"}),He(async()=>{await B(),xe()});async function ye(){let O=!0;if(re>p*1e3&&!R&&C.success>0&&(O=!1,await new Promise(Z=>{g.warning({title:u("confirmCloseDialogTitle"),autoFocus:!0,maskClosable:!1,positiveText:u("close"),negativeText:u("back"),onPositiveClick:()=>O=!0,onAfterLeave:Z,content:u("confirmCloseDialog")})})),!O)return!1;a.destroyAll(),o.destroyAll(),E.value=!1,m.value=!1}function be(O){H==null||H(O)}function ke(O){Kt==null||Kt(O)}function S(){!z.value&&s.value?z.value=!0:ye()}function N(){ge(f.input)}let q=w(()=>{});function le(O){const Z={logs:[],ziplogs:[],index:0,converted:0,success:0,failure:0,retried:0,done:0,length:0,zippedTotalCount:0,zippingErrorCount:0,zippedTotalSize:0,processing:!1,zips:[],inputTotalSize:0,outputTotalSize:0,thumbnail:null,baseZipName:"testzipname",type:"image/any",startedTime:Date.now(),convertedImageDataUrl:"",convertedImageName:"",convertedImageUrl:"",convertedImageOrgUrl:"",convertedImageIndex:-1,convertedImageShrinked:!1,zipSize:f.maxZipSizeMB,shrink:W.multithread&&W.shrinkImage?[W.maxWidth,W.maxHeight]:void 0,unconvertedListText:"",failedZipDone:!1,failedZips:[],unconvertedFileCount:0,unconvertedTotalSize:0,failedFileZippedCount:0,failedToCreateFailedZip:!1};return Object.assign(O||{},Z)}function oe(){T.value=!1,URL.revokeObjectURL(C.convertedImageUrl),URL.revokeObjectURL(C.convertedImageOrgUrl);for(const O of C.zips)URL.revokeObjectURL(O.url);C.zips.length=0;for(const O of C.failedZips)URL.revokeObjectURL(O.url);C.failedZips.length=0,le(C),K(),K=()=>{},H=null,R=!1,y.value=!1,z.value=!1}async function ge(O){if(s.value){g.error({title:"Busy",positiveText:"OK",content:u("interfered")});return}E.value&&(A.value^=1);let Z=O.concat();le(C),oe(),E.value=!0,T.value=!0,s.value=!0,C.processing=!0,P.value="info",M.value=u("processing");const ie=new Set,Y=f.format,me=f.quality,ue=[...Y.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),Me=he(Y,me,Z[0].webkitRelativePath);C.length=Z.length,C.baseZipName=Me,C.type=Y.replace(/image\//,"").toUpperCase()+(/jpe?g|webp/i.test(Y)?" ("+me+")":""),C.threads=k?0:f.threads;const _e=Date.now();h("start");let Ne,ce,at;if(!k&&f.threads>=2?(H=Jl,at=await Gl({files:Z,completedFileIdSet:ie,ConvStats:C,canceled:z,props:f,imageType:Y,quality:me,outputExt:ue,format:Y,message:o,notification:a})):(H=os,at=await ns(Z,ie,f,z,C)),{exception:ce,callbackToGenerateFailedZips:Ne,callbackToClearConverter:K}=at,ce){let I;switch(ce.message){case"worker-load-error":I=u("errMsgWorkerLoadError");break;default:I="unexpected error"}g.error({title:"Error",autoFocus:!0,maskClosable:!1,closable:!1,content:()=>G("div",[G("p",I),G(Ee,{onClick(){location.reload()}},u("Reload"))])})}if(C.length,C.success===C.length?(P.value="success",M.value=u("completed")):(P.value="error",M.value=z.value?u("aborted"):u("incomplete")),ie.size!==Z.length){const I=Ae(O,ie);q.value=()=>{!I||!I.length||Ne(I)}}s.value=!1,C.processing=!1,y.value=!0,Z.length=0,re=Date.now()-_e,h("end")}function Ae(O,Z){const ie=[],Y=[];let me=0;for(const ue of O)Z.has(ue._id)||(ie.push(ue),Y.push(ue.webkitRelativePath||ue.relativePath||ue.name),me+=ue.size);return Y.length&&(C.unconvertedListText=Y.join(`
`),C.unconvertedFileCount=ie.length,C.unconvertedTotalSize=me),ie}function he(O,Z,ie){var _e;const Y=new Date;O=O.replace(/^image\//,"").toLowerCase();const me=W.useFolderNameForZip&&((_e=String(ie).match(/^\/?([^/]+)\//))==null?void 0:_e[1])||"avif2jpg",ue=`
    ${Y.getFullYear().toString().substring(2)}
    ${String((Y.getMonth()+1)*100+Y.getDate()).padStart(4,"0")}
    ${String(Y.getHours()*1e4+Y.getMinutes()*100+Y.getSeconds()).padStart(6,"0")}
    -
    ${O+(/jpe?g|webp/i.test(O)?Z:"")}
  `.replace(/\s/g,"");return`${me}-${ue}`.replace(/\s+/g," ")}async function B(){const O="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",Z=document.createElement("img"),ie=so(Z).then(()=>!0,()=>!1);Z.src=O,await ie||g.warning({title:"Unsupported",positiveText:"OK",maskClosable:!1,content:u("avifUnsupported")})}function xe(){(!b||c<2||!Promise.any)&&(k=!0),k&&(Pe.value=0)}return(O,Z)=>{var Ne;const ie=ze,Y=sn,me=Ie,ue=Ue,Me=zt,_e=tn;return F(),ae(Oe,null,[!e(s)&&((Ne=f.input)!=null&&Ne.length)?(F(),te(ue,{key:0,justify:"center",align:"center",style:{"margin-top":"0.4em"}},{default:t(()=>[n(me,{trigger:"hover",placement:"top","keep-alive-on-hover":!1,duration:0,delay:50},{trigger:t(()=>{var ce;return[n(Y,{value:((ce=O.input)==null?void 0:ce.length)||0,offset:[-12,-5],color:"#99999966"},{default:t(()=>[n(e(Ee),{onClick:N,round:"",size:"medium"},{icon:t(()=>[n(ie,{size:"1.2em",color:"#CCCCCC"},{default:t(()=>[n(e(Ka))]),_:1})]),default:t(()=>[x(" "+d(e(u)("convertAgain")),1)]),_:1})]),_:1},8,["value"])]}),default:t(()=>{var ce;return[v("div",{innerHTML:e(u)("reconvertTip",(ce=f.input)==null?void 0:ce.length)},null,8,ti)]}),_:1})]),_:1})):pe("",!0),n(_e,{ref:"processingModal","display-directive":"show",show:e(E),"onUpdate:show":Z[2]||(Z[2]=ce=>Ye(E)?E.value=ce:null),closable:e(y),"close-on-esc":!1,preset:"dialog",onClick:Z[3]||(Z[3]=ce=>{e(a).destroyAll(),e(o).destroyAll()}),onMaskClick:Z[4]||(Z[4]=ce=>{e(a).destroyAll(),e(o).destroyAll()}),onClose:ye,onEsc:S,title:e(M),type:e(P),"mask-closable":!1,onAfterLeave:oe,onBeforeLeave:Z[5]||(Z[5]=ce=>{e(X).cleanup()}),class:"processing-dialog"},{default:t(()=>[n(ue,{vertical:"",style:{"flex-grow":"1"}},{default:t(()=>[e(T)?(F(),te(ei,{ref_key:"stat",ref:X,key:e(A),processing:e(s),status:e(C),interval:_,onAllZipsClicked:Z[0]||(Z[0]=ce=>Ye(R)?R.value=!0:R=!0),onDemandZipErrors:e(q),onDemandImage:be,onDeleteImage:ke},null,8,["processing","status","onDemandZipErrors"])):pe("",!0),n(ue,{justify:"end",align:"center",wrap:!1},{default:t(()=>[e(s)?(F(),te(e(Ee),{key:0,disabled:e(z),ref:"cancelbutton",round:"",size:"large",onClick:Z[1]||(Z[1]=ce=>z.value=!0)},{default:t(()=>[n(Me,{show:e(z)&&!e(y),size:"small"},{default:t(()=>[x(d(e(u)("cancel")),1)]),_:1},8,["show"])]),_:1},8,["disabled"])):e(y)?(F(),te(e(Ee),{key:1,onClick:ye,round:"",size:"large",style:{"font-size":"small","margin-top":"1em"}},{default:t(()=>[x(d(e(u)("close")),1)]),_:1})):pe("",!0)]),_:1})]),_:1})]),_:1},8,["show","closable","title","type"])],64)}}}),oi="/avif2jpeg/dist/avif.png",ai={class:"container-1"},li={style:{position:"relative"}},si={style:{position:"absolute","font-size":"0.5em",right:"-3.5em",bottom:"-1.5em","white-space":"nowrap"}},ii={style:{color:"#666666"}},ri=["innerHTML"],ui={style:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","font-size":"xx-small","white-space":"nowrap"}},ci=$e({__name:"droptarget",props:{forbidden:{type:Boolean},dropTarget:{}},emits:["drop"],setup(l,{emit:r}){ut(ot);const u=l,g=r,o=Ya(),a=w(!1),p=w(0),c=w("");He(()=>{b(u.dropTarget||document)});function b(f){document.ondragstart=m=>m.preventDefault(),document.ondragover=m=>m.preventDefault(),f.ondrop=async m=>{var s;if(m.preventDefault(),a.value||u.forbidden)return;a.value=!0,p.value=0,c.value="";let h;try{const z=[...m.dataTransfer.items].map(y=>y.webkitGetAsEntry());o.start(),h=await _(z),o.finish()}catch{h=[...((s=m.dataTransfer)==null?void 0:s.files)??[]],o.error()}a.value&&(a.value=!1,g("drop",h))}}async function _(f,m){m=m||[];for(const h of f)if(h.isFile){const s=await new Promise(z=>h.file(y=>z(y)));Object.defineProperty(s,"webkitRelativePath",{value:h.fullPath}),m.push(s),p.value++}else if(h.isDirectory){c.value=h.fullPath;const s=h.createReader();do{const z=await new Promise(y=>s.readEntries(E=>y(E)));if(!z.length)break;await _(z,m)}while(!0)}return m}return(f,m)=>{const h=ze,s=ht,z=Ue,y=Ie,E=tn;return F(),ae("div",ai,[n(y,{to:!1,"display-directive":"show",trigger:"hover",duration:0,delay:0,placement:"bottom-end"},{trigger:t(()=>[n(z,{vertical:"",class:"container-2"},{default:t(()=>[n(z,{align:"center",wrap:!1,class:"container-3"},{default:t(()=>[n(z,{vertical:"",align:"center",wrap:!1,style:{"font-weight":"bold","font-size":"1em","line-height":"90%","white-space":"nowrap"}},{default:t(()=>[m[5]||(m[5]=v("span",null,"Drag & Drop",-1)),v("span",li,[m[4]||(m[4]=x(" AVIF Images ")),v("span",si,[m[3]||(m[3]=x(" or ")),n(s,{placement:"bottom-end"},{trigger:t(()=>[v("span",ii,[n(h,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(rn))]),_:1}),m[1]||(m[1]=x(" Folders "))])]),default:t(()=>[m[2]||(m[2]=x(" You can drag and drop your local folders "))]),_:1})])])]),_:1}),n(z,null,{default:t(()=>m[6]||(m[6]=[v("img",{src:oi,class:"avif"},null,-1)])),_:1})]),_:1})]),_:1})]),default:t(()=>[v("h3",{innerHTML:f.$t("droptarget"),style:{"max-width":"200px","text-align":"center","word-break":"keep-all","overflow-wrap":"break-word"}},null,8,ri)]),_:1}),n(E,{show:e(a),"onUpdate:show":m[0]||(m[0]=T=>Ye(a)?a.value=T:null),closable:!0,preset:"dialog",title:"Parsing dropped items.",type:"info","mask-closable":!1,"negative-text":f.$t("cancel")},{default:t(()=>[n(z,{vertical:"",align:"center"},{default:t(()=>[v("div",ui,d(e(c)),1),v("div",null,"found "+d(e(p))+" files",1)]),_:1})]),_:1},8,["show","negative-text"])])}}}),di=Xe(ci,[["__scopeId","data-v-963c44a5"]]),pi={class:"container-1"},fi={class:"container-2"},gi=["innerHTML"],mi=["innerHTML"],vi={style:{"white-space":"nowrap"}},hi={style:{"padding-left":"1em"}},_i=["innerHTML"],wi=["accept"],yi=$e({__name:"file-selector",props:Ot({target:{},userExtensions:{},forbidden:{type:Boolean}},{expanded:{type:Boolean,required:!1},expandedModifiers:{},disableNotifyingFolderSelect:{type:Boolean},disableNotifyingFolderSelectModifiers:{}}),emits:Ot(["input","click","cancel","on-change-accept","update:target","update:userExtensions"],["update:expanded","update:disableNotifyingFolderSelect"]),setup(l,{emit:r}){const u=Dt(),{t:g}=nt(),o=ut(ot),a=["avif_only","all_images","all_files","edit_type"],p=[];for(const S of a)p.push({label:()=>g("fileTypeRadioOptions."+S),value:S});const c=({node:S,option:N})=>G(Ie,{placement:"right"},{trigger:()=>S,default:()=>re(N.value).replace(/,/g,", ")}),b=l,_=r,f=w(0),m=w(!1),h=w(!1),s=Ce(()=>re(E.value)),z=Ce(()=>T.value.split(",").every(N=>/^\s*(\.[\w\-]+)*\s*$/.test(N))?"success":"error"),y=Ce(()=>!b.forbidden&&!h.value);Re(l,"expanded");const E=Ce({get:()=>a.indexOf(b.target)>=0?b.target:a[0],set:S=>{_("update:target",S)}}),T=Ce({get:()=>b.userExtensions,set:S=>{_("update:userExtensions",S)}}),M=Re(l,"disableNotifyingFolderSelect"),P=w(null),C=w(null),X=w(H());Fe(E,S=>{_("on-change-accept",s.value)}),He(()=>{});async function A(S){if(_("click"),S===C.value&&!M.value){let N=!1;if(await new Promise(q=>{u.info({title:g("loadfolderNotifyingTitle"),positiveText:g("Continue"),negativeText:g("Cancel"),onAfterLeave:()=>q(N),onPositiveClick:()=>N=!0,content:()=>G("div",[G("p",{},g("loadfolderNotifyingMessageTerm1")),G("div",[G(Fn,{width:250,style:{border:"3px solid gray"},src:"/avif2jpeg/dist//notification-folder.png"})]),G("p",{},g("loadfolderNotifyingMessageTerm2")),G("p",[G(Dn,{onUpdateChecked:le=>M.value=le,checked:M.value},()=>g("checkboxTextDontShowThis"))])])})}),!N){M.value=!1,_("cancel");return}}S.click()}function k(){_("cancel")}function K(S){const q=[...S.target.files];P.value.value="",C.value.value="",ye(q)}function H(){return"webkitdirectory"in document.createElement("input")}function re(S){switch(S){case"avif_only":return".avif, .webp";case"all_images":return".jpg, .jpeg, .jfif, .pjpeg, .pjp, .gif, .png, .webp, .avif, .bmp, .apng, .ico";case"edit_type":return T.value;case"all_files":default:return".*"}}async function R(S){const N=String(s.value).toLowerCase().replace(/\s+/g,"");if(N&&s.value!==".*"){const q=N.split(",");S=S.filter(le=>q.includes(le.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),S.length||(await new Promise(le=>{u.error({title:"Images Not Found",positiveText:"OK",onAfterLeave:le,content:()=>G("div",[G(on,{description:"NO IMAGES"}),`${g("noimage")}`,G("br"),s.value])})}),k())}return S}async function ye(S){h.value=!0,S=await R(S),f.value=S.length,S.length>0&&_("input",ke(S)),h.value=!1}let be=0;function ke(S){const N=[];for(const q of S)q.hasOwnProperty("_id")||Object.defineProperty(q,"_id",{value:be++}),N.push(q);return N}return(S,N)=>{const q=ze,le=Ee,oe=Ue,ge=jt,Ae=Qa,he=Xa,B=ht;return F(),ae(Oe,null,[v("div",pi,[v("div",fi,[n(oe,{vertical:"",align:"center",justify:"center",inline:"",size:"large"},{default:t(()=>[n(oe,{align:"center",justify:"space-around",class:"main-buttons"},{default:t(()=>[n(oe,{vertical:"",align:"stretch",justify:"center"},{default:t(()=>[n(e(Ie),{to:!1,"display-directive":"show",show:e(o).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(o).LANDSCAPE.value?"right":"top",duration:0,delay:0,"z-index":10},{trigger:t(()=>[n(le,{disabled:!e(y),size:"large",onClick:N[0]||(N[0]=xe=>A(e(P))),round:"",style:{width:"100%","background-color":"white","font-size":"large"}},{icon:t(()=>[n(q,{size:"large",color:"gray"},{default:t(()=>[n(e(Bn))]),_:1})]),default:t(()=>[x(" "+d(S.$t("loadbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[v("div",{innerHTML:S.$t("loadbuttontooltip")},null,8,gi)]),_:1},8,["show","placement"]),!e(o).IS_SP&&e(X)||e(o).SSR?(F(),ae(Oe,{key:0},[n(oe,{align:"center",justify:"center",style:{color:"gray",margin:"0em"}},{default:t(()=>[x(d(S.$t("or")),1)]),_:1}),n(e(Ie),{to:!1,"display-directive":"show",trigger:"hover",placement:"left","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:e(o).showTooltipsBeforeMounted.value},{trigger:t(()=>[n(le,{disabled:!e(y),size:"large",onClick:N[1]||(N[1]=xe=>A(e(C))),round:"",style:{width:"100%","background-color":"white","font-size":"large"}},{icon:t(()=>[n(q,{size:"large",color:"gray"},{default:t(()=>[n(e(rn))]),_:1})]),default:t(()=>[x(" "+d(S.$t("loadfolderbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[v("div",{innerHTML:S.$t("loadfoldertooltip")},null,8,mi)]),_:1},8,["show"])],64)):pe("",!0)]),_:1}),e(o).IS_SP?pe("",!0):(F(),te(di,{key:0,onDrop:ye,forbidden:!e(y),class:"drop-target"},null,8,["forbidden"]))]),_:1}),n(oe,{vertical:""},{default:t(()=>[n(oe,{wrap:e(o).IS_SP,align:"center",justify:"stretch"},{default:t(()=>[v("span",vi,d(S.$t("TargetFileTypeExt"))+": ",1),n(e(Ie),{"keep-alive-on-hover":!1,placement:"right",style:{"max-width":"200px"},duration:0,delay:0},{trigger:t(()=>[n(ge,{trigger:"click",width:"trigger",size:"small",value:e(E),"onUpdate:value":N[2]||(N[2]=xe=>Ye(E)?E.value=xe:null),options:p,"render-option":c,"consistent-menu-width":!1},null,8,["value"])]),default:t(()=>[x(" "+d(re(e(E)).replace(/,/g,", ")),1)]),_:1})]),_:1},8,["wrap"]),e(E)==="edit_type"?(F(),te(e(Ie),{key:0,trigger:"hover","keep-alive-on-hover":!1,placement:"bottom-start",show:e(m),duration:0,delay:0},{trigger:t(()=>[v("div",hi,[n(B,{trigger:"manual",placement:"right-end",show:e(E)==="edit_type"&&e(z)!=="success"&&!!e(m)},{trigger:t(()=>[n(Ae,{value:e(T),"onUpdate:value":N[3]||(N[3]=xe=>Ye(T)?T.value=xe:null),status:e(z),disabled:e(E)!=="edit_type",onFocus:N[4]||(N[4]=xe=>m.value=!0),onBlur:N[5]||(N[5]=xe=>m.value=void 0),clearable:!0,size:"small",placeholder:".jpg, .gif, .png",spellcheck:"false"},null,8,["value","status","disabled"])]),default:t(()=>[n(he,{type:"error","show-icon":!0,title:"Validation error"},{default:t(()=>N[6]||(N[6]=[x(" Please correct the extension list."),v("br",null,null,-1),v("ul",null,[v("li",null,"Each extension must begin with a period. "),v("li",null,"Separate each extension with a comma. "),v("li",null,"Use alphameric characters.")],-1)])),_:1})]),_:1},8,["show"])])]),default:t(()=>[v("span",{innerHTML:S.$t("editAcceptTypes")},null,8,_i)]),_:1},8,["show"])):pe("",!0)]),_:1})]),_:1})])]),v("input",{ref_key:"fileinput",ref:P,onInput:K,onCancel:k,type:"file",multiple:"",accept:e(s),style:{display:"none"}},null,40,wi),v("input",{ref_key:"folderinput",ref:C,webkitdirectory:"",directory:"",onInput:K,onCancel:k,type:"file",style:{display:"none"}},null,544)],64)}}}),bi=Xe(yi,[["__scopeId","data-v-6c233c11"]]),ki={style:{"white-space":"nowrap"}},Ai=$e({__name:"settings-output",props:{quality:{},format:{}},emits:["update:format","update:quality"],setup(l,{emit:r}){const u=l,g=r,{t:o}=nt(),a=ut(ot),p=w([]),c=["image/jpeg","image/png","image/gif","image/bmp","image/avif","image/webp"],b=Ce({get:()=>u.format,set:z=>{z=h(z),g("update:format",z)}}),_=Ce({get:()=>u.quality,set:z=>{g("update:quality",z)}}),f=Ce(()=>/png|bmp/i.test(b.value)),m=w(null);He(()=>{s()});function h(z){return p.value.indexOf(z)<0&&(z=p.value[0]),z}function s(){for(const z of c)m.value.toDataURL(z).indexOf(z)>=0&&p.value.push(z);p.value.length===0&&p.value.push(c[0])}return(z,y)=>{const E=ze,T=jt,M=Ue,P=Ie,C=ln,X=Zn;return F(),ae(Oe,null,[n(M,{justify:"center",class:"body"},{default:t(()=>[n(M,{vertical:""},{default:t(()=>[n(P,{to:!1,"display-directive":"show",show:e(a).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(a).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(M,{align:"center",wrap:!1},{default:t(()=>[n(E,null,{default:t(()=>[n(e(Bn))]),_:1}),x(d(e(o)("settings.imageType"))+": ",1),n(T,{value:b.value,"onUpdate:value":y[0]||(y[0]=A=>b.value=A),options:p.value.map(A=>({value:A,label:A})),"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),_:1})]),default:t(()=>[x(" "+d(e(o)("settings.imageTypeTooltip")),1)]),_:1},8,["show","placement"]),n(P,{to:!1,"display-directive":"show",show:e(a).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(a).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(M,{align:"center"},{default:t(()=>[n(M,{align:"start",wrap:!1},{default:t(()=>[n(E,null,{default:t(()=>[n(e(jn))]),_:1}),v("span",ki,d(e(o)("settings.quality"))+":",1),n(M,{align:"center",justify:"space-between"},{default:t(()=>[n(C,{tooltip:!1,value:_.value,"onUpdate:value":y[1]||(y[1]=A=>_.value=A),step:1,style:{width:"120px"},disabled:f.value},null,8,["value","disabled"]),n(X,{onBlur:y[2]||(y[2]=A=>_.value??(_.value=0)),value:_.value,"onUpdate:value":y[3]||(y[3]=A=>_.value=A),step:"1",min:"0",max:"100",disabled:f.value,style:{width:"90px"},size:"small"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:t(()=>[x(" "+d(e(o)("settings.qualitytooltip")),1)]),_:1},8,["show","placement"])]),_:1})]),_:1}),v("canvas",{ref_key:"canvas",ref:m,width:"1",height:"1",style:{display:"none"}},null,512)],64)}}}),zi=Xe(Ai,[["__scopeId","data-v-060333f5"]]),Ii={style:{width:"4em","text-align":"left"}},xi={style:{width:"4em","text-align":"left"}},Yt=100,In=2e3,xn=4096,Tn=4096,Ti=100,Si=100,Li=$e({__name:"settings-adv",props:{expanded:{type:Boolean,required:!1},expandedModifiers:{},multithread:{type:Boolean,required:!0},multithreadModifiers:{},threadCount:{required:!0},threadCountModifiers:{},maxZipSize:{required:!0},maxZipSizeModifiers:{},retainExt:{type:Boolean,required:!0},retainExtModifiers:{},useFolderNameForZip:{type:Boolean,required:!0},useFolderNameForZipModifiers:{},shrinkImage:{type:Boolean,required:!0},shrinkImageModifiers:{},maxWidth:{required:!0},maxWidthModifiers:{},maxHeight:{required:!0},maxHeightModifiers:{}},emits:["update:expanded","update:multithread","update:threadCount","update:maxZipSize","update:retainExt","update:useFolderNameForZip","update:shrinkImage","update:maxWidth","update:maxHeight"],setup(l){const r={trigger:"hover",placement:"left",keepAliveOnHover:!1,duration:0,delay:0,style:"max-width: 20vw;"},u=Re(l,"expanded"),g=Re(l,"multithread"),o=Re(l,"threadCount"),a=Re(l,"maxZipSize"),p=Re(l,"retainExt"),c=Re(l,"useFolderNameForZip"),b=Re(l,"shrinkImage"),_=Re(l,"maxWidth"),f=Re(l,"maxHeight");Fe(Pe,h=>{h>1||(g.value=!1),o.value>h&&(o.value=h)},{immediate:!0});const m=Ce(()=>g.value&&Pe.value>1);return He(()=>{Pe.value>1&&typeof o.value>"u"&&(o.value=Math.max(Pe.value,2))}),(h,s)=>{const z=ze,y=Ee,E=tl,T=Ue,M=ln,P=Zn,C=Nn,X=Rn;return F(),te(T,{justify:"center"},{default:t(()=>[n(X,{"display-directive":"show","default-expanded-names":u.value?["collapitem"]:"","on-update:expanded-names":A=>u.value=!!String(A),"trigger-areas":["arrow","main"],class:mt(["settings-body",u.value?"expand-adv-settings":""])},Ja({arrow:t(()=>[n(z,{style:se(u.value&&{top:"8px"})},{default:t(()=>[n(e(al))]),_:1},8,["style"]),n(z,null,{default:t(()=>[n(e(ll))]),_:1})]),default:t(()=>[n(C,{title:h.$t("settings.advancedSettings"),name:"collapitem"},{default:t(()=>[n(T,{vertical:"",style:{"padding-left":"2em"}},{default:t(()=>[n(e(Ie),wt(yt(r)),{trigger:t(()=>[n(T,{vertical:""},{default:t(()=>[n(T,{wrap:!1,align:"center"},{default:t(()=>[n(y,{text:"",disabled:!e(Pe),style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:s[0]||(s[0]=A=>g.value=!g.value)},{icon:t(()=>[n(z,null,{default:t(()=>[n(e(el))]),_:1})]),default:t(()=>[x(" "+d(h.$t("settings.enableMultiThreads")),1)]),_:1},8,["disabled"]),n(E,{value:g.value,"onUpdate:value":s[1]||(s[1]=A=>g.value=A),disabled:!e(Pe),size:"small"},null,8,["value","disabled"])]),_:1}),n(T,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(M,{value:o.value,"onUpdate:value":s[2]||(s[2]=A=>o.value=A),disabled:!e(Pe)||!g.value,step:1,min:2,max:e(Pe),style:{width:"120px"}},null,8,["value","disabled","max"]),n(P,{onBlur:s[3]||(s[3]=A=>o.value??(o.value=2)),size:"tiny",value:o.value,"onUpdate:value":s[4]||(s[4]=A=>o.value=A),disabled:!e(Pe)||!g.value,step:1,min:2,max:e(Pe),style:{width:"10em"}},{suffix:t(()=>[x(d(h.$t("threads",o.value)),1)]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[x(" "+d(h.$t("settings.multiThreadsTooltip")),1)]),_:1},16),n(e(Ie),wt(yt(r)),{trigger:t(()=>[n(T,{vertical:""},{default:t(()=>[n(T,{wrap:!1,align:"center"},{default:t(()=>[n(y,{text:"",focusable:!1,style:{"white-space":"nowrap","font-size":"smaller"}},{icon:t(()=>[n(z,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(nl))]),_:1})]),default:t(()=>[x(" "+d(h.$t("settings.maxZipFileSize"))+": ",1)]),_:1})]),_:1}),n(T,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(M,{tooltip:!1,value:a.value,"onUpdate:value":s[5]||(s[5]=A=>a.value=A),step:1,min:Yt,max:In,style:{width:"120px"}},null,8,["value"]),n(P,{onBlur:s[6]||(s[6]=A=>a.value??(a.value=Yt)),size:"tiny",value:a.value,"onUpdate:value":s[7]||(s[7]=A=>a.value=A),step:"1",min:Yt,max:In,style:{width:"10em"}},{suffix:t(()=>s[20]||(s[20]=[x("(MB)")])),_:1},8,["value"])]),_:1})]),_:1})]),default:t(()=>[x(" "+d(h.$t("settings.maxZipFileSizeTooltip")),1)]),_:1},16),n(e(Ie),wt(yt(r)),{trigger:t(()=>[n(T,{wrap:!1,align:"center"},{default:t(()=>[n(y,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:s[8]||(s[8]=A=>c.value=!c.value)},{icon:t(()=>[n(z,null,{default:t(()=>[n(e(rn))]),_:1})]),default:t(()=>[x(" "+d(h.$t("settings.useFolderNameForZip")),1)]),_:1}),n(E,{value:c.value,"onUpdate:value":s[9]||(s[9]=A=>c.value=A),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[x(" "+d(h.$t("settings.useFolderNameForZipTooltip")),1)]),_:1},16),n(e(Ie),wt(yt(r)),{trigger:t(()=>[n(T,{wrap:!1,align:"center"},{default:t(()=>[n(y,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:s[10]||(s[10]=A=>p.value=!p.value)},{icon:t(()=>[n(z,null,{default:t(()=>[n(e(Mn))]),_:1})]),default:t(()=>[x(" "+d(h.$t("settings.retainOriginalExtension")),1)]),_:1}),n(E,{value:p.value,"onUpdate:value":s[11]||(s[11]=A=>p.value=A),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[x(" "+d(h.$t("settings.retainExtTooltip")),1)]),_:1},16),n(e(Ie),wt(yt(r)),{trigger:t(()=>[n(T,{vertical:""},{default:t(()=>[n(T,{wrap:!1,align:"center"},{default:t(()=>[n(y,{disabled:!m.value,text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:s[12]||(s[12]=A=>b.value=!b.value)},{icon:t(()=>[n(z,null,{default:t(()=>[n(e(ol))]),_:1})]),default:t(()=>[x(" "+d(h.$t("settings.shrinkImage")),1)]),_:1},8,["disabled"]),n(E,{disabled:!m.value,value:b.value,"onUpdate:value":s[13]||(s[13]=A=>b.value=A),size:"small"},null,8,["disabled","value"])]),_:1}),n(T,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(M,{value:_.value,"onUpdate:value":s[14]||(s[14]=A=>_.value=A),disabled:!b.value||!m.value,step:1,min:Ti,max:xn,style:{width:"120px"}},null,8,["value","disabled"]),n(P,{size:"tiny",onBlur:s[15]||(s[15]=A=>_.value??(_.value=8)),value:_.value,"onUpdate:value":s[16]||(s[16]=A=>_.value=A),disabled:!b.value||!m.value,step:1,min:8,max:xn*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[v("span",Ii,d(h.$t("width")),1)]),suffix:t(()=>s[21]||(s[21]=[x("px")])),_:1},8,["value","disabled","max"])]),_:1}),n(T,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(M,{value:f.value,"onUpdate:value":s[17]||(s[17]=A=>f.value=A),disabled:!b.value||!m.value,step:1,min:Si,max:Tn,style:{width:"120px"}},null,8,["value","disabled"]),n(P,{size:"tiny",onBlur:s[18]||(s[18]=A=>f.value??(f.value=8)),value:f.value,"onUpdate:value":s[19]||(s[19]=A=>f.value=A),disabled:!b.value||!m.value,step:1,min:8,max:Tn*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[v("span",xi,d(h.$t("height")),1)]),suffix:t(()=>s[22]||(s[22]=[x("px")])),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[x(" "+d(h.$t("settings.shrinkImageTooltip")),1)]),_:1},16)]),_:1})]),_:1},8,["title"])]),_:2},[u.value?{name:"header-extra",fn:t(()=>[n(e(Ie),{"keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(y,{onClick:e(yl),size:"tiny",style:{"font-size":"xx-small"}},{default:t(()=>[x(d(h.$t("reset")),1)]),_:1},8,["onClick"])]),default:t(()=>[x(" "+d(h.$t("settings.resetButtonTooltip")),1)]),_:1})]),key:"0"}:void 0]),1032,["default-expanded-names","on-update:expanded-names","class"])]),_:1})}}}),Ci=Xe(Li,[["__scopeId","data-v-661ec94b"]]),$i={},Ei={style:{color:"gray","padding-left":"20px"}},Fi=["innerHTML"];function Pi(l,r){const u=nn,g=Ue;return F(),te(g,{vertical:"",justify:"end"},{default:t(()=>[n(u,{style:{margin:"0px"}}),n(g,{justify:"center"},{default:t(()=>[v("ul",Ei,[(F(!0),ae(Oe,null,At(l.$tm("descriptions"),o=>(F(),ae("li",{key:o,style:{"text-align":"left"},innerHTML:o},null,8,Fi))),128))])]),_:1})]),_:1})}const Oi=Xe($i,[["render",Pi]]),Ui="modulepreload",Mi=function(l){return"/avif2jpeg/dist/"+l},Sn={},we=function(r,u,g){let o=Promise.resolve();if(u&&u.length>0){document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),c=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));o=Promise.allSettled(u.map(b=>{if(b=Mi(b),b in Sn)return;Sn[b]=!0;const _=b.endsWith(".css"),f=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${f}`))return;const m=document.createElement("link");if(m.rel=_?"stylesheet":Ui,_||(m.as="script"),m.crossOrigin="",m.href=b,c&&m.setAttribute("nonce",c),document.head.appendChild(m),_)return new Promise((h,s)=>{m.addEventListener("load",h),m.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${b}`)))})}))}function a(p){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=p,window.dispatchEvent(c),!c.defaultPrevented)throw p}return o.then(p=>{for(const c of p||[])c.status==="rejected"&&a(c.reason);return r().catch(a)})},io="English",ro="🇬🇧",uo='AVIF to JPEG "Offline" Batch Converter',co="It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",po="Drag & Drop AVIF Images to Convert",fo=["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data is sent to any server</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.'],go="Select your language",mo="Choose Target File Extentions",vo={avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types",edit_type:"Edit File Extension List"},ho="Input a list of comma separated file extentions to load.<br>e.g.) .jpg,.gif,.png",_o="Load Images",wo="Select your images from a dialog window.<br>*Multiple selection allowed.",yo="Load a Whole Folder",bo=`Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>*It will show "Upload" button, but it actually doesn't upload anything to any server.`,ko="Converting images",Ao="Aborted",zo="Some files failed to convert",Io="Completed",xo="Currently Busy",To="No files with the extentions were found.",So="Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",Lo="Cancel",Co="Save",$o="Close",Eo="Open",Fo="Re-convert",Po="Convert previous selected {n} @:files again",Oo="File | Files",Uo="thread | threads",Mo="You have not saved the converted images yet.",Ro="Data have not been saved",No="Open Source",Do="Open the converted image",jo="Copied to clipboard",Bo="The converted image was copied to your clipboard as DataURL.",Zo="Copy the converted image as DataURL",Wo="Convert Again",Ho={expandLogTooltip:"Displaying the entire log may severely reduce conversion speed.",expandLog:"Show entire log",autoScroll:"Auto scroll",showOnlyErrors:"Show only errors",log:"Log",outInRate:"Out / In Ratio",elapsedTime:"Elapsed Time",multiThreading:"Multi-Threading",outputSettings:"Output Settings",totalSize:"Total Size",totalFiles:"Number of Files",confirmDownloadMessage:"It will start to download {0} zip files.",inputSize:"Input Size",outputSize:"Output Size",filterSuccess:"Hide completed item",progressErrors:"Failed items",progressStarted:"Started Items",progressTotal:"Total number of files",zippingProgress:"Zipping progress",zipped:"ZIPPED",openFailedList:"Open failed file list",zipFailedList:"Pack failed files into Zips",table:{index:"index",status:"status",core:"thread",details:"file"},saveFailedList:"Save failed file list",done:"done",convertedZips:"successfully completed ZIP",progressSuccess:"Completed Files",downloadConvertedImage:"Download Converted Image",failureZippingFailedFiles:"Failure while zipping the failed files.",browseConvertedImages:"Browse converted images",index:"Index",Original:"Original",Converted:"Converted",saveAllZipsTooltip:"Save all ZIP files",Shrinked:"Shrinked",Shrinking:"Shrinking",saveAll:"Save All",progressRetries:"Retrying files",success:"success",started:"started",total:"total",files:"files",failure:"failure",all:"all",filterLogSelect:"filter",showOnlySuccess:"Only successes",showOnlyError:"Only errors",showAll:"Show all"},Vo={maxZipFileSize:"Max zip file size",retainExtTooltip:"New extension will be appended to original extension",retainOriginalExtension:"Keep Original File Extension",qualitytooltip:"Set image quality for output",quality:"Image Quality",maxZipFileSizeTooltip:"Set smaller value if memory problems occur.",ignoreExtTooltip:'Try to load files that don"t have image file extension',ignoreFileExtensions:"Load All File Types",imageTypeTooltip:"Choose image format for output",imageType:"Image Type",advancedSettings:"Advanced Settings",enableMultiThreads:"Enable multi-threading",resetButtonTooltip:"Restore all settings to default.",multiThreadsTooltip:"Convert images in multi-threaded",shrinkImageTooltip:"If the image dimensions are larger than the specified value, shrink the image to that value",shrinkImage:"Shrink images that exceed the following dimensions",useFolderNameForZip:"Use dropped folder name for the zip file",useFolderNameForZipTooltip:"If a folder is dropped or selected, its name is used as the name of the output ZIP file"},qo="Disabled",Go="Download",Ko="Reset",Yo="Back",Xo="Failed",Qo="Success",Jo="Previous version",ea=`
Height`,ta="Width",na="Don't show this message again",oa="About the warning when selecting a folder",aa="OK",la={},sa="You must press the “Upload” button here to load all the images in the folder, but the data loaded by this application is never actually uploaded to the server.",ia="Continue",ra="Cancel",ua="When you select a folder instead of a file as input on a website, major web browsers will display a warning like the image below.",ca="This page may be an outdated version. Please reload the page.",da="Reload",pa='If the conversion process frequently fails and an “Out of Memory” message appears, try reducing or disabling the number of "multi-threads" in the "Advanced Settings".',fa="Next",ga="Previous",ma="or",va="Target File Extensions",ha={lang:io,flags:ro,title:uo,metaDescription:co,droptarget:po,descriptions:fo,selectLanguage:go,fileTypeRadioTitle:mo,fileTypeRadioOptions:vo,editAcceptTypes:ho,loadbutton:_o,loadbuttontooltip:wo,loadfolderbutton:yo,loadfoldertooltip:bo,processing:ko,aborted:Ao,incomplete:zo,completed:Io,interfered:xo,noimage:To,avifUnsupported:So,cancel:Lo,save:Co,close:$o,open:Eo,reconvert:Fo,reconvertTip:Po,files:Oo,threads:Uo,confirmCloseDialog:Mo,confirmCloseDialogTitle:Ro,githubOpenSource:No,convertedImageUrlTooltip:Do,copiedDataURLDialogTitle:jo,copiedDataURLMessage:Bo,convertedImageDataUrlTooltip:Zo,convertAgain:Wo,status:Ho,settings:Vo,disabled:qo,Download:Go,reset:Ko,back:Yo,failed:Xo,success:Qo,previousVersion:Jo,height:ea,width:ta,checkboxTextDontShowThis:na,loadfolderNotifyingTitle:oa,OK:aa,loadfolderNotifyingMessage:la,loadfolderNotifyingMessageTerm2:sa,Continue:ia,Cancel:ra,loadfolderNotifyingMessageTerm1:ua,errMsgWorkerLoadError:ca,Reload:da,annotationOutOfMemory:pa,Next:fa,Prev:ga,or:ma,TargetFileTypeExt:va},Ri=Object.freeze(Object.defineProperty({__proto__:null,Cancel:ra,Continue:ia,Download:Go,Next:fa,OK:aa,Prev:ga,Reload:da,TargetFileTypeExt:va,aborted:Ao,annotationOutOfMemory:pa,avifUnsupported:So,back:Yo,cancel:Lo,checkboxTextDontShowThis:na,close:$o,completed:Io,confirmCloseDialog:Mo,confirmCloseDialogTitle:Ro,convertAgain:Wo,convertedImageDataUrlTooltip:Zo,convertedImageUrlTooltip:Do,copiedDataURLDialogTitle:jo,copiedDataURLMessage:Bo,default:ha,descriptions:fo,disabled:qo,droptarget:po,editAcceptTypes:ho,errMsgWorkerLoadError:ca,failed:Xo,fileTypeRadioOptions:vo,fileTypeRadioTitle:mo,files:Oo,flags:ro,githubOpenSource:No,height:ea,incomplete:zo,interfered:xo,lang:io,loadbutton:_o,loadbuttontooltip:wo,loadfolderNotifyingMessage:la,loadfolderNotifyingMessageTerm1:ua,loadfolderNotifyingMessageTerm2:sa,loadfolderNotifyingTitle:oa,loadfolderbutton:yo,loadfoldertooltip:bo,metaDescription:co,noimage:To,open:Eo,or:ma,previousVersion:Jo,processing:ko,reconvert:Fo,reconvertTip:Po,reset:Ko,save:Co,selectLanguage:go,settings:Vo,status:Ho,success:Qo,threads:Uo,title:uo,width:ta},Symbol.toStringTag,{value:"Module"})),Ni="Arabic",Di="German",ji="English",Bi="Spanish",Zi="Finnish",Wi="French",Hi="Hindi",Vi="Indonesian",qi="Italian",Gi="Japanese",Ki="Korean",Yi="Dutch",Xi="Polish",Qi="Portuguese",Ji="Russian",er="Turkish",tr="Ukrainian",nr="Chinese",or={ar:Ni,de:Di,en:ji,es:Bi,fi:Zi,fr:Wi,hi:Hi,id:Vi,it:qi,ja:Gi,ko:Ki,nl:Yi,pl:Xi,pt:Qi,ru:Ji,tr:er,uk:tr,"zh-hant":"Chinese(hant)",zh:nr},Mt=[],_a={en:ha},dn={},Ln=Object.assign({"./locales/ar.json":()=>we(()=>import("./ar-C78fP3LK.js"),[]),"./locales/de.json":()=>we(()=>import("./de-CPV-8SYu.js"),[]),"./locales/en.json":()=>we(()=>Promise.resolve().then(()=>Ri),void 0),"./locales/es.json":()=>we(()=>import("./es-C0boWjDe.js"),[]),"./locales/fi.json":()=>we(()=>import("./fi-D05XNGRh.js"),[]),"./locales/fr.json":()=>we(()=>import("./fr-BEqLAr7y.js"),[]),"./locales/hi.json":()=>we(()=>import("./hi-DjBIdZbE.js"),[]),"./locales/id.json":()=>we(()=>import("./id-Duo1PSaB.js"),[]),"./locales/it.json":()=>we(()=>import("./it-C6_aLOfH.js"),[]),"./locales/ja.json":()=>we(()=>import("./ja-CHn1DBsj.js"),[]),"./locales/ko.json":()=>we(()=>import("./ko-DS3ozm9C.js"),[]),"./locales/nl.json":()=>we(()=>import("./nl-BrhyCE4u.js"),[]),"./locales/pl.json":()=>we(()=>import("./pl-DUwaEY2r.js"),[]),"./locales/pt.json":()=>we(()=>import("./pt-D8lds0IU.js"),[]),"./locales/ru.json":()=>we(()=>import("./ru-Bc1QouAP.js"),[]),"./locales/tr.json":()=>we(()=>import("./tr-BkG3oLsO.js"),[]),"./locales/uk.json":()=>we(()=>import("./uk-CbphezhA.js"),[]),"./locales/zh-hant.json":()=>we(()=>import("./zh-hant-C8kPepIS.js"),[]),"./locales/zh.json":()=>we(()=>import("./zh-Cb5l96e8.js"),[])});var $n;for(const l in Ln){const r=($n=l.match(/\/([a-z]{2}(?:-[a-z]+)?)\.json$/i))==null?void 0:$n[1];r&&(Mt.push(r),!(r in _a)&&(dn[r]=Ln[l]))}let en=lr();en in dn||(en="en");const Rt=sl({legacy:!1,globalInjection:!0,locale:en,fallbackLocale:"en",messages:_a,warnHtmlMessage:!1,missingWarn:!1,fallbackWarn:!1});async function ar(l){if(Rt.global.availableLocales.indexOf(l)>=0)return;const r=await dn[l]();Rt.global.setLocaleMessage(l,r),await Ke()}function lr(){const l=location.pathname;return String(l.match(/[^/]+(?=\/?$)/)||"").toLowerCase()}const sr=["innerHTML"],Cn=$e({__name:"switch-lang",emits:["lang-ready","lang-change"],async setup(l,{emit:r}){let u,g;const o=ut(ot),a=En(),{locale:p,t:c}=nt(),b=r,_=Object.entries(or).map(([y,E])=>({label:E,value:y}));_.sort((y,E)=>{const T=y.label,M=E.label;return T>M?1:T<M?-1:0}),He(()=>{a.afterEach((y,E,T)=>{m(),o.switchToolTipVisibility()})}),il(async()=>{}),[u,g]=rl(()=>m()),await u,g();async function f(y){(y!==p.value||Rt.global.availableLocales.indexOf(y)===-1)&&(b("lang-change",y),await ar(y),p.value=y,document.title=c("title"),await Ke()),b("lang-ready",y)}async function m(){const y=a.currentRoute.value.path||"",E=String(y.match(new RegExp("(?<=^\\/)[^/]+"))||"");E&&Mt.includes(E)?(await f(E),p.value=E):await h()}async function h(){const y=s().toLowerCase(),E=y.split(/[-_]/)[0];if(Mt.includes(E)){let T=E;if(E==="zh")switch(y){case"zh-hant":case"zh-mo":case"zh-hk":case"zh-tw":T="zh-hant"}await f(T)}}function s(){const y=window.navigator;return y.language||y.userLanguage||y.browserLanguage}function z(y){a.push("/"+y+"/")}return(y,E)=>{const T=ze,M=jt,P=Ie;return F(),te(P,{to:!1,"display-directive":"show",show:e(o).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(o).LANDSCAPE.value?"left":"bottom",duration:0,delay:50},{trigger:t(()=>[n(M,{ref:"langselect",size:"tiny",style:{width:"100%"},"consistent-menu-width":!1,options:e(_),"_v-model:value":"locale",value:e(p),"onUpdate:value":z},{arrow:t(()=>[n(T,null,{default:t(()=>[n(e(ul))]),_:1})]),_:1},8,["options","value"])]),default:t(()=>[v("div",{innerHTML:y.$t("selectLanguage")},null,8,sr)]),_:1},8,["show","placement"])}}}),ot=Symbol("global variables"),ir=$e({__name:"Avif2Jpeg",emits:["ready"],setup(l,{emit:r}){const{t:u,locale:g}=nt(),o=r,a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),p=w(null);w(0);let c=w(void 0);const b=w(!0),_=w(!1),f=w(!1),m=w(!0),h=w(!1);dl(ot,{showTooltipsBeforeMounted:c,LANDSCAPE:b,IS_SP:a,switchToolTipVisibility:M,SSR:!1}),He(()=>{P(),window.addEventListener("resize",P),M(),setTimeout(()=>f.value=!0,3e3)}),Pn(()=>{window.removeEventListener("resize",P)});const s=200;let z=0,y=!0;function E(){m.value=!1,z=Date.now()}function T(){const A=y?0:Math.max(0,s-(Date.now()-z));y=!1,setTimeout(()=>m.value=!0,A),o("ready")}async function M(){}function P(){const A=document.body.clientWidth,k=document.body.clientHeight;b.value=A*.75>k||A>900}function C(A){p.value=A}function X(A){h.value=A}return(A,k)=>{const K=Ue,H=ze,re=ht;return F(),te(K,{vertical:"",align:"stretch",class:"avif2jpeg"},{default:t(()=>[n(El,null,{"lang-switch":t(()=>[(F(),te(bn,null,{default:t(()=>[n(Cn,{onLangChange:E,onLangReady:T})]),_:1}))]),_:1}),n(Je,{name:"fade"},{default:t(()=>[Be(n(K,{vertical:"",align:"stretch",justify:"space-between",style:{height:"100%"}},{default:t(()=>[n(K,{justify:"space-around",vertical:"",style:{height:"100%"}},{default:t(()=>[n(Pl),n(K,{justify:"center"},{default:t(()=>[n(bi,{"_v-model:expanded":"UserSettings.expandExtButtons",target:e(W).acceptTypeValue,"onUpdate:target":k[0]||(k[0]=R=>e(W).acceptTypeValue=R),userExtensions:e(W).editedAcceptTypes,"onUpdate:userExtensions":k[1]||(k[1]=R=>e(W).editedAcceptTypes=R),"disable-notifying-folder-select":e(W).disableNotifyingFolderSelect,"onUpdate:disableNotifyingFolderSelect":k[2]||(k[2]=R=>e(W).disableNotifyingFolderSelect=R),forbidden:e(_),onInput:C,onClick:k[3]||(k[3]=R=>X(!0)),onCancel:k[4]||(k[4]=R=>X(!1))},null,8,["target","userExtensions","disable-notifying-folder-select","forbidden"])]),_:1}),n(ni,{input:e(p),format:e(W).imageFormat,quality:e(W).imageQuality,"retain-extension":e(W).retainExtension,maxZipSizeMB:e(W).maxZipSizeMB,threads:e(W).multithread?e(W).threadCount:0,"show-note":e(h),"onUpdate:showNote":k[5]||(k[5]=R=>Ye(h)?h.value=R:null),onStart:k[6]||(k[6]=R=>_.value=!0),onEnd:k[7]||(k[7]=R=>_.value=!1),"_:multi-thread-count":"val => availableThreadCount = val"},{"lang-switch":t(()=>[(F(),te(bn,null,{default:t(()=>[n(Cn)]),_:1}))]),_:1},8,["input","format","quality","retain-extension","maxZipSizeMB","threads","show-note"]),n(K,{vertical:"",align:"center"},{default:t(()=>[n(re,{trigger:"manual",placement:"top","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(H,{size:"5vh",color:"#DADADA",style:{margin:"0px"}},{default:t(()=>[n(e(cl))]),_:1})]),default:t(()=>[k[18]||(k[18]=v("span",null,"CONVERT TO👇",-1))]),_:1})]),_:1}),n(K,{vertical:"",align:"center"},{default:t(()=>[n(zi,{format:e(W).imageFormat,"onUpdate:format":k[8]||(k[8]=R=>e(W).imageFormat=R),quality:e(W).imageQuality,"onUpdate:quality":k[9]||(k[9]=R=>e(W).imageQuality=R)},null,8,["format","quality"]),n(Ci,{"retain-ext":e(W).retainExtension,"onUpdate:retainExt":k[10]||(k[10]=R=>e(W).retainExtension=R),"use-folder-name-for-zip":e(W).useFolderNameForZip,"onUpdate:useFolderNameForZip":k[11]||(k[11]=R=>e(W).useFolderNameForZip=R),"max-zip-size":e(W).maxZipSizeMB,"onUpdate:maxZipSize":k[12]||(k[12]=R=>e(W).maxZipSizeMB=R),"_v-model:expanded":"UserSettings.expandAdvSettings",multithread:e(W).multithread,"onUpdate:multithread":k[13]||(k[13]=R=>e(W).multithread=R),"thread-count":e(W).threadCount,"onUpdate:threadCount":k[14]||(k[14]=R=>e(W).threadCount=R),"_:thread-max":"availableThreadCount","shrink-image":e(W).shrinkImage,"onUpdate:shrinkImage":k[15]||(k[15]=R=>e(W).shrinkImage=R),"max-width":e(W).maxWidth,"onUpdate:maxWidth":k[16]||(k[16]=R=>e(W).maxWidth=R),"max-height":e(W).maxHeight,"onUpdate:maxHeight":k[17]||(k[17]=R=>e(W).maxHeight=R)},null,8,["retain-ext","use-folder-name-for-zip","max-zip-size","multithread","thread-count","shrink-image","max-width","max-height"])]),_:1}),n(Oi)]),_:1})]),_:1},512),[[Ze,e(m)]])]),_:1})]),_:1})}}}),pn=$e({__name:"App",setup(l){const r={Statistic:{valueFontSize:"1em"},Popover:{borderRadius:"0.4em",boxShadow:"2px 2px 5px 0px #555555"},Tooltip:{},Image:{toolbarColor:"#00000099"}},u=w(!0);return He(()=>{u.value=!1}),(g,o)=>{const a=vl,p=ml,c=gl,b=fl,_=pl,f=hl;return F(),te(f,{"theme-overrides":r,style:{width:"100%",height:"100%"}},{default:t(()=>[n(_,null,{default:t(()=>[n(b,{placement:"top-right",max:20},{default:t(()=>[n(c,{placement:"top-left",closable:!0,max:50},{default:t(()=>[n(p,null,{default:t(()=>[n(a,null,{default:t(()=>[n(ir,{class:mt({hide:e(u)})},null,8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),wa=[{path:"/",name:"Home",component:pn}];for(const l of Mt)wa.push({path:"/"+l+"/",strict:!0,name:l,component:pn});_l(pn,{routes:wa,base:"/avif2jpeg/dist/"},({app:l,router:r,routes:u,isClient:g,initialState:o})=>{l.use(Rt)});
