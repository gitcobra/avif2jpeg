var ta=Object.defineProperty;var na=(l,r,s)=>r in l?ta(l,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[r]=s;var Je=(l,r,s)=>na(l,typeof r!="symbol"?r+"":r,s);import{r as _,a as zt,d as xe,i as Ke,c as ae,o as F,_ as Se,u as e,w as t,b as C,t as c,e as b,f as n,g as Ae,N as be,L as oa,h as aa,j as Q,k as Me,l as Ye,m as ne,n as la,p as sa,q as ia,s as we,v as sn,x as rn,y as un,z as ze,A as ke,B as Le,C as Et,D as Ve,E as qe,F as ra,G as ua,H as je,I as kt,J as de,K as et,T as Qe,M as dn,O as Ze,P as cn,Q as rt,R as xt,S as tt,U as ft,V as da,W as Pe,X as nt,Y as ca,Z as Wt,$ as qt,a0 as pn,a1 as pa,a2 as Tt,a3 as ga,a4 as fa,a5 as Ot,a6 as ma,a7 as Gt,a8 as ut,a9 as va,aa as Re,ab as gn,ac as ha,ad as _a,ae as ot,af as Fe,ag as wa,ah as mt,ai as It,aj as ya,ak as De,al as ba,am as fn,an as Ft,ao as mn,ap as za,aq as Kt,ar as vn,as as ka,at as xa,au as Ta,av as hn,aw as Ia,ax as Sa,ay as _n,az as Aa,aA as Ut,aB as wn,aC as La,aD as Ca,aE as yn,aF as $a,aG as at,aH as lt,aI as Ea,aJ as Fa,aK as Pa,aL as Oa,aM as Ua,aN as Ma,aO as Ra,aP as Da,aQ as Ba,aR as Na,aS as ja,aT as Za,aU as Ha,aV as Va,aW as Wa,aX as qa,aY as Ga,aZ as Ka}from"./vendor-BgqkfPiU.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}})();const Ue=_(navigator.hardwareConcurrency?Math.min(navigator.hardwareConcurrency,12):0),st={threadCount:{min:2,max:Math.max(2,Ue.value)}},Ya={imageFormat:"image/jpeg",imageQuality:90,expandExtButtons:!1,acceptTypeValue:void 0,editedAcceptTypes:"",expandAdvSettings:!1,retainExtension:!1,maxZipSizeMB:1e3,useFolderNameForZip:!1,multithread:!0,threadCount:Ue.value,shrinkImage:!1,maxWidth:4096,maxHeight:4096,disableNotifyingFolderSelect:!1,changeLogCheckedDate:0},N=zt(bn({}));function Qa(){bn(N)}function bn(l){return Object.assign(l,Ya)}const zn="avif2jpeg",St=JSON.parse(localStorage.getItem(zn)||"{}");for(const l in N)if(St.hasOwnProperty(l)&&St[l]!==void 0){let r=St[l];st.hasOwnProperty(l)&&(st[l].min>r&&(r=st[l].min),st[l].max<r&&(r=st[l].max)),N[l]=r}const kn=()=>{const l={};for(const r in N)l[r]=N[r];localStorage.setItem(zn,JSON.stringify(l)),console.log(N.changeLogCheckedDate)};window.addEventListener("beforeunload",kn);function Xa(){localStorage.clear(),window.removeEventListener("beforeunload",kn)}const Ja={href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-weight":"bolder"}},el=xe({__name:"github",setup(l){const r=Ke(We);return(s,i)=>{const a=be,o=Ae,u=Se;return F(),ae(u,{to:!1,"display-directive":"show",show:e(r).showTooltipsBeforeMounted.value,trigger:"hover",duration:0,delay:0},{trigger:t(()=>[b("a",Ja,[n(o,{align:"center",size:0},{default:t(()=>[n(a,{size:"1.2em"},{default:t(()=>[n(e(oa))]),_:1}),i[0]||(i[0]=C("GitHub "))]),_:1})])]),default:t(()=>[C(" "+c(s.$t("githubOpenSource")),1)]),_:1},8,["show"])}}}),tl=1,nl=10,ol=26,al="",ct={major:tl,minor:nl,build:ol,tag:al},ll={style:{"font-size":"x-small","user-select":"none"}},sl=xe({__name:"version",setup(l){const r=["0.0.118"],s=`${ct.major}.${ct.minor}.${ct.build}${ct.tag}`,i=r.map(v=>({label:`v${v}`,key:v,value:v}));function a(v){const{key:p,label:f}=v,w=u(p),y=Q("a",{href:w},f),z=Q("div",null,y);return Q("div",null,z)}function o(v){location.href=u(v)}function u(v){return`/avif2jpeg/old/${v}/`}return(v,p)=>{const f=aa;return F(),ae(f,{"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start",options:e(i),"render-label":a,"onUpdate:value":o},{header:t(()=>[b("span",ll,c(v.$t("previousVersion")),1)]),default:t(()=>[b("span",{style:{cursor:"pointer"}},"v"+c(s))]),_:1},8,["options"])}}}),il={key:0,style:{color:"red"}},rl=["innerHTML"],ul=xe({__name:"changelog",props:{url:{}},setup(l){const r=l,s=_("fetching..."),i=_(!1);Me(()=>o(r.url));let a=0;async function o(v){const p=await fetch(v,{headers:{Accept:"application/vnd.github.v3+json"}}).then(f=>f.ok?f.text():null);s.value="",p&&(console.log(p),s.value=p.replace(/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2}) \+\d+$/mg,(f,w)=>{const y=new Date(f),z=y.getTime(),m=y.toLocaleString();let g="";return z>N.changeLogCheckedDate&&(i.value=!0,z>a&&(a=z),g="update"),`<span class="date ${g}">${m}</span>`}))}function u(){a>N.changeLogCheckedDate&&(N.changeLogCheckedDate=a),i.value=!1}return(v,p)=>{const f=be,w=Ae,y=Ye;return F(),ae(y,{trigger:"click",placement:"bottom","arrow-point-to-center":"","onUpdate:show":u,style:{"margin-left":"-1em","max-width":"80%","white-space":"initial"}},{trigger:t(()=>[n(w,{align:"center",size:1,style:{cursor:"pointer"}},{default:t(()=>[n(f,{component:e(la),size:"1.5em",color:e(i)?"blue":"silver",style:{transition:"color 0.5s"}},null,8,["component","color"]),C(" "+c(v.$t("changelog")),1)]),_:1})]),default:t(()=>[e(s)?(F(),ne("pre",{key:1,innerHTML:e(s),class:"commits"},null,8,rl)):(F(),ne("div",il," connection error "))]),_:1})}}}),dl=xe({__name:"header",setup(l){const r=sa();return(s,i)=>{const a=ia("router-link"),o=Ae,u=rn;return F(),ae(o,{vertical:"",justify:"start"},{default:t(()=>[n(o,{justify:"space-between",align:"center",wrap:!1},{default:t(()=>[n(o,{align:"center"},{default:t(()=>[n(el),n(ul,{url:"/avif2jpeg/dist/commits.txt"}),n(sl),n(o,{style:{"font-size":"1em"}},{default:t(()=>[e(r).path!=="/"?(F(),ae(a,{key:0,to:"/",style:{color:"black"}},{default:t(()=>i[0]||(i[0]=[C("HOME")])),_:1})):we("",!0)]),_:1})]),_:1}),n(o,{align:"end"},{default:t(()=>[sn(s.$slots,"lang-switch")]),_:3})]),_:3}),n(u,{style:{margin:"0px"}})]),_:3})}}}),cl={style:{padding:"0px",margin:"0px","text-align":"center"}},pl=xe({__name:"title",setup(l){const r=un();return ze(()=>{const s=r.currentRoute.value.path||"";return!String(s.match(new RegExp("(?<=^\\/)[^/]+"))||"")}),(s,i)=>{const a=Ae;return F(),ae(a,{align:"center",justify:"center",style:{margin:"0px"}},{default:t(()=>[b("h1",cl,c(s.$t("title")),1)]),_:1})}}}),Yt=new Set,gl=new Set,fl=new Set,vt=new Map;function ml(l){const r=vt.get(l);if(!r){console.warn("the worker was already released.",l.id);return}vt.delete(l),r(),pt==null||pt(),pt=null}function vl(){for(const l of vt.keys())ml(l)}let pt=null;function xn(){vl();for(const l of Yt)l.onmessage=null,l.terminate();Yt.clear(),gl.clear(),fl.clear(),vt.clear()}function hl(l){return new Worker("/avif2jpeg/dist/assets/worker.zip-BpG-kYFu.js",{name:l==null?void 0:l.name})}function _l(l){return new Worker("/avif2jpeg/dist/assets/worker.loader-DUC36Gvq.js",{name:l==null?void 0:l.name})}const wl=1e3*10;let Ge;const Be=new Map,ht=new Map,_t=new Map;let Mt,J,Rt,wt,gt,Tn,In,Sn,An,dt;function At(l){if({files:gt,completedFileIdSet:Mt,ConvStats:J,canceled:Rt,props:wt,format:Tn,quality:In,outputExt:Sn,imageType:An,message:dt}=l||{},Ge=null,Be.clear(),ht.clear(),_t.clear(),ht.clear(),_t.clear(),l)for(const s in l)delete l[s]}async function yl(l){At(l),Mt.clear();let r;try{r=await bl()}catch{return At(),{exception:new Error("worker-load-error"),callbackToClearConverter:new Function,callbackToGenerateFailedZips:new Function}}const[s,i]=r;Ge=i;const a=new Promise(z=>{i.onmessage=m=>{const g=m.data,{action:k}=g;switch(k){case"squeeze-zip":case"zip-squeeze-error":z(void 0);break}}}),o=new Promise(z=>{s.onmessage=m=>{const{data:{action:g}}=m;g==="close-loader"&&z()}}),u=gt.map(z=>z._id);gt.forEach(z=>ht.set(z._id,z));const v=ke(Rt,z=>{if(!z)return;v();const m={action:"cancel-convert"};s.postMessage(m)}),p={action:"start-convert",list:gt,fileIdList:u,outputQuality:In,outputType:Tn,threads:wt.threads,maxSize:N.shrinkImage?{width:N.maxWidth,height:N.maxHeight}:null};s.postMessage(p),await o,console.log("end loader worker"),i.postMessage({action:"squeeze"}),await a,console.log("end zip worker"),v();const f=()=>{xn(),i.onmessage=null,i.terminate(),s.onmessage=null,s.terminate(),At()};let w=!1;return{callbackToClearConverter:f,callbackToGenerateFailedZips:async z=>{w||(w=!0,await Cl(z,i,{},J))}}}async function bl(){xn();const l=new _l,r=new hl,s=new Promise((u,v)=>{const p=m=>{r.removeEventListener("message",y),l.removeEventListener("message",y),clearTimeout(z),m?(console.log("workers are avialble"),u(m)):(console.error("couldn't get responses from workers"),v(m))};let f=!1,w=!1;const y=m=>{m.target===r&&(console.log("got a message from zip worker"),f=!0),m.target===l&&(console.log("got a message from loader worker"),w=!0),f&&w&&p(!0)};let z=0;r.addEventListener("message",y),l.addEventListener("message",y),z=window.setTimeout(()=>p(!1),wl)}),{port1:i,port2:a}=new MessageChannel,o={action:"set-zip-port"};return r.postMessage({action:"set-port-loader"},[i]),l.postMessage(o,[a]),console.log("test workers' availability"),await s,r.postMessage({action:"set-config",zipSize:wt.maxZipSizeMB*1024*1024,keepExt:wt.retainExtension,outputExt:Sn,imageType:An}),l.addEventListener("message",kl),r.addEventListener("message",zl),[l,r]}const zl=l=>{const r=l.data,{action:s}=r;switch(s){case"add-zip-completed":{const{fileId:u,entireIndex:v,storedPath:p}=r;return}case"respond-image":{const{url:u,index:v,path:p,size:f,fileId:w}=r;J.convertedImageUrl=u,J.convertedImageSize=f,J.convertedImageIndex=v,J.convertedImageName=p;let y="",z=0,m="";const g=Be.get(w);if(w>=0){const k=ht.get(w);y=URL.createObjectURL(k),z=k.size,m=k.webkitRelativePath||k.name}J.convertedImageOrgUrl=y,J.convertedImageOrgSize=z,J.convertedImageOrgName=m,J.convertedImageShrinked=g==null?void 0:g.shrinked;return}case"respond-delete":{const{index:u,success:v,fileId:p}=r;Be.get(p).command="âŒdeleted",Be.get(p).completed=!1;return}}switch(s){case"error-push-filelist-zip":const{path:u}=r;J.failedZipDone=!0,dt.error(`an error occurred "${u}"`,{duration:3e3});return}const{size:i,count:a}=r,o="url"in l.data?l.data.url:"";switch(s){case"push-zip":J.zips.push({url:o,size:i,count:a}),J.zippedTotalCount+=a,J.zippedTotalSize+=i;break;case"squeeze-zip":a>0&&(J.zips.push({url:o,size:i,count:a}),J.zippedTotalCount+=a,J.zippedTotalSize+=i);break;case"push-filelist":J.failedFileZippedCount++;break;case"squeeze-filelist-zip":J.failedZipDone=!0;case"push-filelist-zip":console.log("push-filelist-zip",a),J.failedZips.push({url:o,size:i,count:a}),console.log(a);break;case"zip-error":case"zip-squeeze-error":J.zippingErrorCount+=a;break}},kl=l=>{l.target;const{data:r}=l,{action:s}=r;switch(s){case"list-start":break;case"list-end":break;case"file-start":{const{index:i,path:a,fileId:o}=r;Tl(i,a,o);break}case"file-load":{const{thumbnail:i,width:a,height:o,fileId:u,workerId:v,inputsize:p}=r,f=Be.get(u);f.core=v,f.command="ðŸ–¼ï¸loaded",f.width=a,f.height=o,f.size=p,i&&(J.thumbnail=i);break}case"file-converted":{const{index:i,path:a,fileId:o,shrinked:u,outputWidth:v,outputHeight:p,outputsize:f}=r,w=Be.get(o);w.command="ðŸ”ƒconverted",w.shrinked??(w.shrinked=u),w.outputWidth=v,w.outputHeight=p,w.outputSize=f,J.converted++;break}case"file-completed":{const{inputsize:i,outputsize:a,fileId:o,entireIndex:u,storedPath:v}=r,p=Be.get(o);p&&(p.command="âœ…completed",p.completed=!0,p.fileId=o),J.inputTotalSize+=i,J.outputTotalSize+=a,J.done++,J.success++,Mt.add(o),p.zippedIndex=u,J.ziplogs[u]={fileId:o,storedPath:v};break}case"file-retry":{const{index:i,path:a,fileId:o}=r;Il(i,a,o);break}case"file-error":{const{index:i,path:a,fileId:o}=r;Sl(i,a,o);break}case"file-canceled":{const{fileId:i,path:a}=r;Al(i);break}}};let xl=0;function Tl(l,r,s){const i={key:xl++,core:-1,index:l,path:r,command:"âž¡ï¸started"};Be.set(s,i),J.logs.push(i),_t.has(s)?console.warn(`retry "${r}".`):Rt.value||J.startedCount++}function Il(l,r,s){const i=Be.get(s);i.command="âš ï¸retrying",i.error=!0,dt.warning(`retrying "${r}"`,{duration:3e3}),J.retried++,_t.set(s,1)}function Sl(l,r,s){console.error(`failed to load "${r}". the image may be corrupted or cannot be read by some reason.`);const i=Be.get(s);J.done++,J.failure++,i.command="â—failed",i.error=!0,dt.error(`failed to load "${r}"`,{duration:5e3})}function Al(l){const r=Be.get(l);J.done++,J.failure++,r.command="â—canceled",r.error=!0}function Ll(l){Ge==null||Ge.postMessage({action:"request-image",index:l})}function Lt(l){Ge==null||Ge.postMessage({action:"delete-image",index:l})}async function Cl(l,r,s,i){let a=0;for(const o of l){const u=(o.webkitRelativePath||o.name).replace(/^\//,"");if(i.failedZipDone)break;if(s.value)return;a-i.failedFileZippedCount>20&&await new Promise(v=>setTimeout(v,10)),r.postMessage({action:"add-filelist",file:o,path:u}),a++}if(i.failedZipDone){dt.error("Zipping error files was aborted",{duration:5e3});return}r.postMessage({action:"squeeze-filelist"})}function He(l,r=2){const s=Math.sign(l);l=Math.abs(l);const i=["Bytes","KB","MB","GB"],a=l?Math.floor(Math.log(l)/Math.log(1024)):0;return`${(l/Math.pow(1024,a)*s).toFixed(r)}${i[a]}`}function Ln(l,r=100,s=!1){r=typeof r=="number"?{width:r,height:r}:r;const{width:i,height:a}=r;let{width:o,height:u}=l;const v=o/u,p=i/a;return v>=p?(o=s?Math.min(i,o):i,u=o/v|0):(u=s?Math.min(a,u):a,o=u*v|0),{width:o,height:u}}class $l{constructor(){Je(this,"_currentFileCount",0);Je(this,"_currentZipIndex",0);Je(this,"_totalFileCount",0);Je(this,"_zipLengthSumList",[]);Je(this,"_pathBank",{})}increase(r){return r&&(this._pathBank[r]=[this._zipLengthSumList.length,this._currentFileCount]),this._currentFileCount++,this._totalFileCount++}split(){this._zipLengthSumList.push(this._totalFileCount),this._currentZipIndex++,this._currentFileCount=0}get(r){if(typeof r=="number"){let s=this._zipLengthSumList.findIndex((o,u)=>r<o);s===-1&&(s=this._zipLengthSumList.length);const i=this._zipLengthSumList[s-1]||0,a=r-i;return[s,a]}else{const s=this._pathBank[String(r)];if(s)return s}return null}getZipIndex(){return this._currentZipIndex}getIndex(){return this._totalFileCount}}function El(l){return new Promise(r=>setTimeout(r,l))}function Fl(l,r=0){const s=_(l);return ke(s,i=>{i!==void 0&&Le(()=>{setTimeout(()=>s.value=void 0,r)})},{immediate:!0}),s}let it;async function Pl(l,r,s,i,a){let o="";const u=document.createElement("canvas"),v=u.getContext("2d");let p=new Et;const f=[p],w=new $l,y=s.format,z=s.quality/100,m=[...y.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),g=l.length,k=s.maxZipSizeMB*1024*1024;let I=0,A=null,S="",x="",M=0,q=0,R=0,h=0,j=0,D=!1;it=E=>{const[H,K]=w.get(E),re=f[H],le=re.get(K,y);a.convertedImageIndex=E,a.convertedImageName=re.getPathByIndex(K),a.convertedImageUrl=URL.createObjectURL(le),a.convertedImageSize=le.size;let ue="",se=0,Ie="";const V=X[E];ue=URL.createObjectURL(V),se=V.size,Ie=V.webkitRelativePath||V.name,a.convertedImageOrgUrl=ue,a.convertedImageOrgSize=se,a.convertedImageOrgName=Ie};const X=[];for(const E of l){if(i.value)break;const H=E.name;let K="";const re=E.size,le=(E.webkitRelativePath||E.relativePath||H).replace(/^\//,""),ue=document.createElement("img"),se={key:R++,core:-1,index:I++,path:le,command:"âž¡ï¸start"};a.startedCount=I,a.logs.push(se),a.logs.length-1,o&&(URL.revokeObjectURL(o),o=""),o=URL.createObjectURL(E),x=o,M=E.size,ue.src=o;const Ie=await Cn(ue).then(()=>!0).catch(()=>!1);if(!ue.complete||!Ie||i.value){a.done++,a.failure++,se.command="â—failed";continue}const V=ue.width,O=ue.height;u.width=V,u.height=O,v.drawImage(ue,0,0,V,O,0,0,V,O),se.command="ðŸ–¼ï¸imgload",se.width=V,se.height=O,se.size=E.size,a.thumbnail=ue;const B=await new Promise(te=>{const pe=Ee=>{A=Ee,te(Ee)};u.toBlob(pe,y,z)});if(i.value)break;if(!B){console.log("failed to toBlob",H),a.failure++;continue}q=B.size,a.converted++,se.outputSize=q;let ee="";if(j+q>=k){try{await p.wait(),ee=await p.url()}catch(te){D=!0,console.warn(te.message,j),alert("memory problem occurred");break}a.zips.push({url:ee,size:j,count:h}),a.zippedTotalCount+=h,a.zippedTotalSize+=j,j=0,h=0,w.split(),p=new Et,f.push(p)}j+=q;const oe=le||H;for(let te=1;te<255&&(K=oe.replace(s.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+(te>1?`(${te})`:"")+"."+m,!!p.has(K));te++);a.done++;try{h++,p.add(K,B)}catch(te){console.error(te.message);continue}w.increase(),X.push(E),a.inputTotalSize+=re,a.outputTotalSize+=q,a.ziplogs.push({fileId:E._id,storedPath:K}),S=K,se.zippedIndex=a.success,a.success++,se.command="âœ…completed",se.completed=!0,se.fileId=E._id,r.add(E._id)}if(a.success>0)if(g===1)A&&(a.convertedImageIndex=0,a.convertedImageName=S.replace(/^.*\/(?=[^/]+$)/,"").replace(s.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+m,a.convertedImageUrl=URL.createObjectURL(A),a.convertedImageOrgUrl=x,a.convertedImageOrgSize=M);else try{if(D)throw new Error("terminated zipping process for memory problems");await p.wait();const E=await p.url();a.zips.push({url:E,count:h,size:j}),a.zippedTotalCount+=h,a.zippedTotalSize+=j}catch(E){console.error(E.message)}const U={value:!1},me=()=>{U.value=!0,f.forEach(E=>E.clear()),f.length=0,X.length=0,it=null};let Ce=!1;return{callbackToClearConverter:me,callbackToGenerateFailedZips:async E=>{Ce||(Ce=!0,Ul(E,k,a,U))}}}function Ol(l){it==null||it(l)}async function Ul(l,r,s,i){let a=0,o=0,u=new Et;for(let v=0;v<l.length;v++){const p=l[v],f=(p.webkitRelativePath||p.name).replace(/^\//,"");if(i.value)return;try{await u.add(f,p)}catch{alert(`an error occurred during access to "${f}"`);break}if(o+=p.size,a++,s.failedFileZippedCount++,o>=r||v===l.length-1){await u.zip();const w=await u.url();s.failedZips.push({url:w,size:o,count:a}),u.clear(),o=0,a=0}}s.failedZipDone=!0}function Cn(l){if(typeof l.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((r,s)=>{l.onload=r,l.onerror=s})}const Ml=["href","download","title"],Rl='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',Dl=xe({__name:"thumbnail",props:{src:{},width:{},height:{},maxWidth:{default:100},maxHeight:{default:100},expand:{type:Boolean,default:!1},loading:{type:Boolean},fileName:{},allowNext:{type:Boolean},allowPrev:{type:Boolean},hidden:{type:Boolean}},emits:["load","error","next","prev"],setup(l,{expose:r,emit:s}){const{t:i}=Ve(),a=l,o=s,u=_();_();const v=_(!0),p=_(""),f=_(a.width||100),w=_(a.height||100),y=_(!1),z=zt({width:f.value+"px",height:w.value+"px",minWidth:"50px",minHeight:"50px"});qe(()=>{var x,M,q;(M=(x=u.value)==null?void 0:x.previewInstRef)==null||M.setPreviewSrc(Rl),URL.revokeObjectURL((((q=u.value)==null?void 0:q.imageRef)||{}).src),u.value=null});const m=_(!0);ra(()=>{m.value=!1}),ua(()=>{m.value=!0}),ke(a,(x,M)=>{z.width=(a.width||100)+"px",z.height=(a.height||100)+"px"}),ke(()=>a.src,(x,M)=>{m.value&&I(x)},{immediate:!0}),r({download:A,openPreview:S,active:m});async function g(x){const M=x.target,q=M.naturalWidth,R=M.naturalHeight,{width:h,height:j}=Ln({width:q,height:R},{width:a.maxWidth||100,height:a.maxHeight||100},a.expand);f.value=h,w.value=j,o("load",{src:M.src,width:q,height:R}),v.value=!1,await new Promise(D=>setTimeout(D,100)),!v.value&&(y.value=!0)}function k(x){const M=x.target;o("error",M.src)}async function I(x){v.value=!0,y.value=!1,p.value=x,console.log("changeSrc:",p.value)}function A(){const x=document.createElement("a");x.href=p.value,x.download=a.fileName,x.click()}function S(){var x;(x=u.value)==null||x.click()}return(x,M)=>{const q=dn,R=cn,h=Ae,j=kt;return je((F(),ne("div",null,[n(e(Se),null,{trigger:t(()=>[n(j,{show:e(v)||a.loading},{default:t(()=>[n(h,{justify:"center",align:"center",style:de([e(z),{"line-height":"0px"}])},{default:t(()=>[je(b("a",{href:e(p),onClick:M[0]||(M[0]=et(()=>{},["left","prevent"])),target:"_blank",download:a.fileName,title:a.fileName},[n(Qe,{mode:"in-out"},{default:t(()=>[je(n(q,{ref_key:"nImageRef",ref:u,"show-toolbar-tooltip":"",onLoad:g,onError:k,src:e(p),width:e(f),height:e(w),style:{border:"1px solid silver"}},null,8,["src","width","height"]),[[Ze,e(y)]])]),_:1})],8,Ml),[[Ze,!(e(v)||a.loading)]]),je(n(R,null,null,512),[[Ze,e(v)||a.loading]])]),_:1},8,["style"])]),_:1},8,["show"])]),default:t(()=>[C(" "+c(a.fileName),1)]),_:1})],512)),[[Ze,!x.hidden]])}}}),Ne=(l,r)=>{const s=l.__vccOpts||l;for(const[i,a]of r)s[i]=a;return s},Qt=Ne(Dl,[["__scopeId","data-v-a62add3a"]]),Bl=["href","download","title"],Nl={class:"left-num"},jl={class:"right-num"},Zl=["href","download","title"],Hl={class:"left-num"},Vl={class:"right-num"},Wl=["href","download"],ql=xe({__name:"image-viewer",props:{url:{},originalUrl:{},name:{},originalName:{},size:{},originalSize:{},length:{},index:{},isSingle:{type:Boolean},variousInfo:{}},emits:["demand-image","delete-image","close"],setup(l,{expose:r,emit:s}){const i=Ke(We),a=l,o=s;r({download:O,cleanup:G,openPreview:P,isPreviewing(){return h.value},changeIndex($){m.value=$}});const u=rt(),{t:v}=Ve();xt();const p=_(),f=_(),w=_(),y=tt("viewerItemContainer"),z=_(!0),m=_(Math.max(a.index,0)+1),g=_(1),k=_(1),I=_(""),A=_(""),S=_(1),x=_(1),M=_(!1),q=_(!1),R=_(!1),h=ze(()=>{var $,L;return(L=($=w.value)==null?void 0:$.previewInstRef)==null?void 0:L.displayed}),j=ze(()=>{var $,L;return((L=($=w==null?void 0:w.value)==null?void 0:$.previewInstRef)==null?void 0:L.previewSrc)===I.value}),D=ze(()=>m.value<a.length),X=ze(()=>m.value>1),U=_("viewer-item-init"),me=_(0),Ce=_(!0);_({width:"auto",height:"auto"});const he=_(!1);Me(()=>{document.body.addEventListener("keydown",se),document.body.addEventListener("keydown",ue),re(m.value-1),le()}),qe(()=>{clearTimeout(E),document.body.removeEventListener("keydown",se),document.body.removeEventListener("keydown",ue),he.value=!0}),ft(()=>{URL.revokeObjectURL(a.url),URL.revokeObjectURL(a.originalUrl)});let E=-1;ke(m,($,L)=>{m.value<1||m.value>a.length||$===L||(clearTimeout(E),$>L?U.value="viewer-item-next":U.value="viewer-item-prev",E=setTimeout(()=>{a.index!==m.value-1&&(me.value=z.value?me.value:~me.value,Ce.value=!1,re(m.value-1))},50))});let H="",K="";ke(()=>a.url,()=>{var d,T;let $="";a.index===0&&z.value?(z.value=!1,m.value=1,$=a.url):a.index===m.value-1?(z.value=!1,M.value=!1,$=a.url):(URL.revokeObjectURL(a.url),URL.revokeObjectURL(a.originalUrl));const L=H,Y=K;if(URL.revokeObjectURL(L),URL.revokeObjectURL(Y),H=a.url,K=a.originalUrl,$){try{if((T=(d=w.value)==null?void 0:d.previewInstRef)!=null&&T.displayed){j.value?w.value.previewInstRef.setPreviewSrc($):w.value.previewInstRef.setPreviewSrc(a.originalUrl);try{const W=w.value.previewInstRef.displayed;w.value.previewInstRef.handleAfterLeave(),w.value.previewInstRef.displayed=W}catch(W){console.error(W)}}}catch{}I.value=$,A.value=a.originalUrl}},{immediate:!0});function re($){M.value=!0,q.value=!1,R.value=!1,Le(()=>o("demand-image",$))}function le(){if(!i.IS_SP)return;let $=y.value.$el,L=0,Y=0,d=0,T=0,W=0;const _e=fe=>{L=fe.touches[0].pageX,Y=fe.touches[0].pageY,W=Date.now()};$.addEventListener("touchstart",_e);const ge=fe=>{d=fe.touches[0].pageX,T=fe.touches[0].pageY,ie()};window.addEventListener("touchmove",ge);const Z=()=>{ie();const fe=d-L,$e=Math.abs(fe),Xe=T-Y,ve=Math.abs(Xe);$e<ve||$e<30||ee(fe>0?-1:1)};window.addEventListener("touchend",Z);const ie=()=>{const fe=Date.now();fe-W>500&&(L=d,Y=T),W=fe};qe(()=>{$.removeEventListener("touchstart",_e),window.removeEventListener("touchmove",ge),window.removeEventListener("touchend",Z),$=null})}function ue($){var L,Y,d,T;if($.key==="Escape")try{(Y=(L=w.value)==null?void 0:L.previewInstRef)!=null&&Y.displayed&&($.stopPropagation(),(T=(d=w.value)==null?void 0:d.previewInstRef)==null||T.toggleShow(!1))}catch{}}function se($){switch($.code){case"ArrowRight":ee(1);break;case"ArrowLeft":ee(-1);break;case"Home":m.value=1;break;case"End":m.value=a.length;break;case"Space":case"Enter":case"NumpadEnter":if(!h.value)return;te();break;case"ArrowUp":case"ArrowDown":default:return}$.stopPropagation(),$.preventDefault()}function Ie({width:$,height:L}){g.value=$,k.value=L,q.value=!0}function V({width:$,height:L}){S.value=$,x.value=L,R.value=!0}function O(){j.value?p.value.download():f.value.download()}async function B($){try{const L=await fetch($).then(Y=>Y.blob()).then(Y=>new Promise(d=>{const T=new FileReader;T.onload=d,T.readAsDataURL(Y)})).then(Y=>Y.target.result);navigator.clipboard.writeText(L),u.info({title:v("copiedDataURLDialogTitle"),content:()=>Q("div",[Q("div",v("copiedDataURLMessage"))]),positiveText:"OK"})}catch(L){console.error(L),u.error({title:"failed to copy Data URL",content:"could not copy Data URL",positiveText:"OK"})}}function ee($){$>0?m.value=Math.min(a.length,m.value+$)|0:$<0&&(m.value=Math.max(1,m.value+$)|0)}let oe="";const te=()=>{var L,Y,d,T;oe=(d=window.getComputedStyle((Y=(L=w==null?void 0:w.value)==null?void 0:L.previewInstRef)==null?void 0:Y.previewRef))==null?void 0:d.transform;const $=j.value;(T=w==null?void 0:w.value)==null||T.next(),Le(()=>{var W;j.value===$&&((W=w==null?void 0:w.value)==null||W.next())})};function pe(){try{Le(()=>w.value.previewInstRef.previewRef.style.transform=oe)}catch{}}function Ee({nodes:$}){const L=Q(Ot,{color:j.value?"green":"gray",offset:[-20,-12],value:j.value?v("status.Converted"):v("status.Original")},()=>Q(Pe,{round:!0,onClick(){te()},textColor:"white",size:"small",style:{marginLeft:"4px"}},{icon:()=>Q(j.value?ga:fa)}));$.next=Q(Pe,{onClick(){ee(1)},disabled:!D.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>Q(qt)}),$.prev=Q(Pe,{onClick(){ee(-1)},disabled:!X.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>Q(ma)});try{const Y=$.download.children;Y.default=()=>v("save");const d=Y.trigger();d.props.onClick=O,Y.trigger=()=>d}catch{}return ce(),[L,...Object.values($)]}const Oe="#pathbox-"+String(Math.random()).substring(2);let ye;function ce(){var $,L,Y;try{if(ye=(Y=(L=($=w.value)==null?void 0:$.previewInstRef)==null?void 0:L.previewWrapperRef)==null?void 0:Y.parentNode,!ye||ye.querySelector(Oe))return;let d=Q("div",{id:Oe,onMousedown:T=>{T.stopPropagation()},className:"__preview-injected-pathbox"+(j.value?" converted":"")},[Q("div",`${String(m.value).padStart(String(a.length).length,"0")}/${String(a.length).padStart(String(a.length).length,"0")}`),Q("div",He(j.value?a.size:a.originalSize,0)),Q("div",j.value?a.name:a.originalName)]);Gt(d,ye),d=null}catch(d){console.error(d)}}qe(()=>{ye&&(Gt(null,ye),ye=null)});function P(){p.value.openPreview()}function G(){}return($,L)=>{const Y=be,d=Ae,T=pn,W=Ye,_e=Tt,ge=da;return F(),ae(d,{justify:"center",align:"stretch",vertical:"",style:de([{visibility:z.value?"hidden":"visible"},{overflow:"visible"}]),class:"body",ref:"body"},{default:t(()=>[n(ge,{ref_key:"nImageGroupRef",ref:w,"show-toolbar-tooltip":"","render-toolbar":Ee,onPreviewNext:pe},{default:t(()=>[n(d,{wrap:!1,align:"center",justify:"space-between",style:{overflow:"visible"}},{default:t(()=>[n(e(Pe),{onClick:L[0]||(L[0]=Z=>ee(-1)),bordered:!1,disabled:!e(X),class:nt({"thumb-arrow":!0,pale:!e(X)}),title:$.$t("Prev")},{icon:t(()=>[n(Y,{size:"30"},{default:t(()=>[n(e(ca))]),_:1})]),_:1},8,["disabled","class","title"]),n(d,{justify:"center",ref_key:"viewerItemContainer",ref:y,class:"viewer-item-container",style:{width:"100%"}},{default:t(()=>[n(Qe,{name:U.value},{default:t(()=>[(F(),ae(d,{vertical:"",key:me.value},{default:t(()=>[n(d,{align:"center",wrap:!1},{default:t(()=>[n(d,{vertical:""},{default:t(()=>[n(d,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(d,{align:"center",justify:"center",vertical:"",class:"original-thumb"},{default:t(()=>[b("a",{href:$.originalUrl,onClick:L[4]||(L[4]=et(Z=>{f.value.openPreview()},["prevent"])),download:$.originalName,title:$.originalName,class:"imglink"},[n(d,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(Qt,{ref:Z=>{Z!=null&&Z.active&&(f.value=Z)},src:A.value,width:1,"max-width":1,"max-height":1,loading:M.value,"file-name":$.originalName,"allow-next":m.value<a.length,"allow-prev":m.value>1,onLoad:V,onNext:L[1]||(L[1]=Z=>ee(1)),onPrev:L[2]||(L[2]=Z=>ee(-1)),hidden:!0},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(d,{vertical:"",align:"center"},{default:t(()=>[n(d,{class:"imglink-label"},{default:t(()=>[C(c(e(v)("status.Original")),1)]),_:1}),n(d,{justify:"center",class:"img-size",wrap:!1,size:2},{default:t(()=>[b("span",Nl,c(R.value?S.value:"?"),1),L[11]||(L[11]=C(" Ã— ")),b("span",jl,c(R.value?x.value:"?"),1)]),_:1}),n(d,{justify:"center"},{default:t(()=>[L[3]||(Wt(-1,!0),(L[3]=n(d,null,{default:t(()=>[C(c(R.value?e(He)(a.originalSize,0):"?"),1)]),_:1})).cacheIndex=3,Wt(1),L[3])]),_:1})]),_:1})]),_:1})],8,Bl)]),_:1}),n(d,{vertical:"",align:"center",class:"original-thumb"},{default:t(()=>[n(Y,{size:"20",color:"silver",component:e(qt)},null,8,["component"])]),_:1}),b("a",{href:I.value,onClick:L[5]||(L[5]=et(Z=>P(),["prevent"])),download:a.name,title:a.name,class:"imglink"},[n(d,{vertical:"",align:"center",justify:"center"},{default:t(()=>[n(d,{class:"imglink-label"},{default:t(()=>[C(c(e(v)("status.Converted")),1)]),_:1}),n(d,{vertical:"",align:"center",justify:"center",size:0},{default:t(()=>[n(d,{justify:"center"},{default:t(()=>{var Z;return[n(d,{wrap:!1,style:de((Z=a.variousInfo)!=null&&Z.shrinked?{color:"blue"}:{}),class:"img-size",size:2},{default:t(()=>[b("span",Hl,c(q.value?g.value:"?"),1),L[12]||(L[12]=C(" Ã— ")),b("span",Vl,c(q.value?k.value:"?"),1)]),_:1},8,["style"])]}),_:1})]),_:1}),n(d,{justify:"center"},{default:t(()=>[C(c(q.value?e(He)(a.size,0):"?"),1)]),_:1})]),_:1})],8,Zl)]),_:1}),n(d,{ref:"fileNameContainer",justify:"center",align:"center",class:"pathbox",title:a.name,style:{overflow:"hidden"}},{default:t(()=>[n(T,{"x-scrollable":!0,trigger:"hover",style:{"text-align":"center","font-size":"smaller",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},{default:t(()=>[C(c(q.value?a.name:"?"),1)]),_:1})]),_:1},8,["title"])]),_:1}),n(d,{vertical:"",style:{overflow:"visible"}},{default:t(()=>[n(Qt,{ref:Z=>{Z!=null&&Z.active&&(p.value=Z)},src:I.value,width:142,"max-width":140,"max-height":100,loading:M.value,"file-name":a.name,"allow-next":m.value<a.length,"allow-prev":m.value>1,onLoad:Ie,onNext:L[6]||(L[6]=Z=>ee(1)),onPrev:L[7]||(L[7]=Z=>ee(-1))},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(d,{justify:"center",align:"center",wrap:!1},{default:t(()=>[n(W,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[b("a",{href:a.url,ref:"saveImg",target:"_blank",download:a.name,style:{"line-height":"1em"}},[n(e(Pe),{disabled:!q.value,round:"",size:"tiny"},{default:t(()=>[C(c($.$t("save")),1)]),_:1},8,["disabled"])],8,Wl)]),default:t(()=>[C(" "+c($.$t("save")),1)]),_:1}),n(W,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(e(Pe),{disabled:!q.value,onClick:L[8]||(L[8]=Z=>B(a.url)),round:"",size:"tiny"},{default:t(()=>L[13]||(L[13]=[C("DataURL")])),_:1},8,["disabled"])]),default:t(()=>[C(" "+c($.$t("convertedImageDataUrlTooltip")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1},8,["name"])]),_:1},512),n(e(Pe),{bordered:!1,onClick:L[9]||(L[9]=Z=>ee(1)),disabled:!e(D),class:nt({"thumb-arrow":!0,next:!0,pale:!e(D)}),title:$.$t("Next")},{icon:t(()=>[n(Y,{size:"30"},{default:t(()=>[n(e(pa))]),_:1})]),_:1},8,["disabled","class","title"])]),_:1}),$.isSingle?we("",!0):(F(),ae(d,{key:0,justify:"center",align:"center",wrap:!1,size:4},{default:t(()=>[n(_e,{value:m.value,"onUpdate:value":L[10]||(L[10]=Z=>m.value=Z),tooltip:!1,step:1,min:1,max:a.length,keyboard:!1,class:"index-slider"},null,8,["value","max"]),n(d,{class:"index",align:"center",justify:"center",wrap:!1,size:3},{default:t(()=>[n(d,null,{default:t(()=>[C(c(e(v)("status.index"))+":",1)]),_:1}),n(d,{justify:"end",align:"center",class:"counter"},{default:t(()=>[C(c(m.value),1)]),_:1}),n(d,null,{default:t(()=>L[14]||(L[14]=[C("/")])),_:1}),n(d,{justify:"start",align:"center",class:"counter"},{default:t(()=>[C(c(a.length),1)]),_:1})]),_:1})]),_:1}))]),_:1},512)]),_:1},8,["style"])}}}),Gl=Ne(ql,[["__scopeId","data-v-1394ec38"]]),Kl={key:0},Yl={style:{}},Ql={key:1,style:{width:"106px",height:"80px",opacity:"0.15",border:"1px solid gray"}},Xl=xe({__name:"status.progress",props:{processing:{type:Boolean},successPerc:{},elapsedTime:{},threads:{},fileType:{},shrink:{},zipSize:{},inputTotalSize:{},outputTotalSize:{},rateColor:{},difColor:{},totalSizeDifStr:{},thumbnail:{},opened:{type:Boolean}},setup(l){const r=l,s=_(null),i={W:110,H:80};let a;return ke(()=>[r.thumbnail,r.opened],()=>{if(!r.thumbnail||!r.opened||r.thumbnail===a||!s.value)return;const{width:o,height:u}=Ln(r.thumbnail,{width:i.W,height:i.H});s.value.width=o,s.value.height=u,s.value.style.width=o+"px",s.value.style.height=u+"px",r.thumbnail instanceof HTMLImageElement?s.value.getContext("2d").drawImage(r.thumbnail,0,0,o,u):(s.value.getContext("bitmaprenderer").transferFromImageBitmap(r.thumbnail),a=r.thumbnail,r.thumbnail.close())}),(o,u)=>{const v=kt,p=Ae,f=va,w=ut;return F(),ae(w,{name:"progress",style:{"white-space":"nowrap"}},{header:t(({collapsed:y})=>[n(p,{align:"center"},{default:t(()=>[C(c(o.$t("status.Progress"))+" ",1),y?(F(),ne(Re,{key:0},[C(" ("+c(o.successPerc|0)+"%) ",1)],64)):we("",!0),je(n(v,{size:16},null,512),[[Ze,o.processing&&!r.opened]])]),_:2},1024)]),default:t(()=>[n(p,{justify:"center",align:"center",size:0,wrap:!1,style:{"white-space":"nowrap","margin-top":"-1em","padding-bottom":"5px"}},{default:t(()=>[u[0]||(u[0]=b("div",{class:"grow"},null,-1)),n(p,{justify:"center",class:"grow",wrap:!1,style:{"z-index":"1"}},{default:t(()=>[n(p,{vertical:"",justify:"center",class:"left-column"},{default:t(()=>[n(f,{"tabular-nums":"",label:o.$t("status.elapsedTime")},{default:t(()=>[n(p,null,{default:t(()=>[C(c(o.elapsedTime),1)]),_:1})]),_:1},8,["label"]),n(f,{"tabular-nums":"",label:o.$t("status.multiThreading")},{default:t(()=>[n(p,{style:de({color:o.threads?"":"red",fontSize:"0.7rem"})},{default:t(()=>[C(c(o.threads?o.$rt("{n} @:threads",o.threads):o.$t("disabled")),1)]),_:1},8,["style"])]),_:1},8,["label"]),n(f,{"tabular-nums":"",label:o.$t("status.outputSettings")},{default:t(()=>[n(p,{vertical:"",justify:"end",style:{"font-size":"0.6rem","line-height":"0.6rem"}},{default:t(()=>[b("div",null,c(o.$t("settings.imageType"))+": "+c(o.fileType),1),o.shrink?(F(),ne("div",Kl,[C(c(o.$t("status.Shrinking"))+": ",1),b("span",Yl,c(o.shrink[0])+"Ã—"+c(o.shrink[1]),1)])):we("",!0),b("div",null,"Zip: "+c(o.zipSize)+"MB",1)]),_:1})]),_:1},8,["label"])]),_:1}),sn(o.$slots,"center",{},void 0,!0),n(p,{vertical:"",style:{height:"100%"},justify:"center",class:"right-column"},{default:t(()=>[n(f,{"tabular-nums":"",label:o.$t("status.inputSize")},{default:t(()=>[n(p,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[C(c((o.inputTotalSize/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(f,{"tabular-nums":"",label:o.$t("status.outputSize")},{default:t(()=>[n(p,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[C(c((o.outputTotalSize/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(f,{"tabular-nums":"",label:o.$t("status.outInRate")},{default:t(()=>[n(p,{vertical:"",align:"end",justify:"start",style:{"font-size":"0.8em","font-family":"v-mono","line-height":"50%"}},{default:t(()=>[b("span",{style:de({color:o.rateColor,fontSize:"larger"})},"Ã— "+c((o.outputTotalSize/o.inputTotalSize||1).toFixed(2)),5),b("span",{style:de({color:o.difColor})},"("+c(o.totalSizeDifStr)+")",5)]),_:1})]),_:1},8,["label"])]),_:1})]),_:3}),n(p,{class:"thumb-container",align:"center",style:{position:"relative"}},{default:t(()=>[n(p,{justify:"center",align:"center",class:"grow thumbnail",style:de({width:i.W+"px",height:i.H+"px"})},{default:t(()=>[n(Qe,{name:"fade",mode:"out-in"},{default:t(()=>[o.processing?(F(),ne("canvas",{key:0,ref_key:"thumbcanvas",ref:s,width:"106",height:"80",class:"thumb-canvas"},null,512)):(F(),ne("div",Ql))]),_:1})]),_:1},8,["style"])]),_:1})]),_:3})]),_:3})}}}),Jl=Ne(Xl,[["__scopeId","data-v-eecf6b58"]]),es={class:"status-table"},ts={class:"started"},ns={class:"mini-counter"},os={class:"failure"},as={class:"mini-counter"},ls={colspan:"2"},ss={class:"completed"},is={class:"main-counter"},rs={class:"total"},us={class:"main-counter"},ds=xe({__name:"status.progress-center",props:{processing:{type:Boolean},interval:{},statusColor:{},success:{},successTo:{},successFrom:{},index:{},length:{},failure:{},retried:{},successPercTo:{},successPercFrom:{}},setup(l){const r=l,s=xt(),i=_(s.value.successColor),a=_(!1);return ke(()=>r.processing,o=>{o||(r.success===r.length?a.value=!0:i.value=s.value.errorColor)}),(o,u)=>{const v=Ye,p=be,f=_a,w=Ae,y=gn;return F(),ae(y,{type:"multiple-circle","stroke-width":2,percentage:[o.successTo/o.length*100|0,o.index/o.length*100|0],color:[e(s).successColor,o.statusColor],"rail-style":[{stroke:e(i),opacity:.3}],style:{width:"12em"}},{default:t(()=>[n(w,{vertical:"",align:"center",justify:"center",size:0,style:{"white-space":"nowrap"},wrap:!1,"wrap-item":!1},{default:t(()=>[b("table",es,[b("tbody",null,[b("tr",ts,[b("td",null,c(o.$t("status.started"))+":",1),b("td",ns,[n(v,{trigger:"hover",style:de({color:e(s).infoColor}),placement:"left"},{trigger:t(()=>[b("span",{style:de({color:e(s).infoColor})},c(o.index.toLocaleString("en-us")),5)]),default:t(()=>[C(" "+c(o.$t("status.progressStarted"))+" ("+c(o.index.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])])]),b("tr",os,[b("td",null,c(o.$t("status.failure"))+":",1),b("td",as,[n(v,{trigger:"hover",style:de({color:e(s).errorColor}),placement:"left"},{trigger:t(()=>[b("span",{style:de({color:e(s).errorColor})},c(o.failure.toLocaleString("en-us")),5)]),default:t(()=>[C(" "+c(o.$t("status.progressErrors"))+" ("+c(o.failure.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"]),o.retried>0?(F(),ae(v,{key:0,trigger:"hover",style:de({color:e(s).warningColor}),placement:"left"},{trigger:t(()=>[b("span",{style:de({color:e(s).warningColor})}," ("+c(o.retried.toLocaleString("en-us"))+") ",5)]),default:t(()=>[C(" "+c(o.$t("status.progressRetries"))+" ("+c(o.retried.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):we("",!0)])]),b("tr",null,[b("td",ls,[n(w,{size:0,align:"center",justify:"center",style:de({color:o.processing?o.statusColor:e(i)}),wrap:!1,class:"percent"},{default:t(()=>[e(a)?(F(),ae(p,{key:0,component:e(ha)},null,8,["component"])):we("",!0),n(f,{duration:o.interval*3|0,from:o.successPercFrom|0,to:o.successPercTo|0,active:!0},null,8,["duration","from","to"]),u[0]||(u[0]=C("% "))]),_:1},8,["style"])])]),b("tr",ss,[b("td",null,c(o.$t("status.success"))+":",1),b("td",is,[n(v,{trigger:"hover",duration:0,delay:0,style:de({color:e(s).successColor}),placement:"bottom"},{trigger:t(()=>[b("span",{style:de({color:e(s).successColor})},[n(f,{duration:o.interval*3|0,from:o.successFrom,to:o.successTo,active:!0,"show-separator":!0},null,8,["duration","from","to"])],4)]),default:t(()=>[C(" "+c(o.$t("status.progressSuccess"))+" ("+c(o.successTo.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])])]),b("tr",rs,[b("td",null,c(o.$t("status.all"))+":",1),b("td",us,[n(v,{trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:t(()=>[C(c(o.length.toLocaleString("en-us")),1)]),default:t(()=>[C(" "+c(o.$t("status.progressTotal"))+" ("+c(o.length.toLocaleString("en-us"))+") ",1)]),_:1})])])])])]),_:1})]),_:1},8,["percentage","color","rail-style"])}}}),cs={key:0,class:"log-table",ref:"table"},ps={class:"log-tr label"},gs=["title"],fs={style:{"min-width":"7em"},class:"log-th"},ms={style:{"padding-left":"2em"},class:"log-th"},vs=["data-index-loglist"],hs={class:"log-td"},_s={class:"log-td"},ws={class:"log-td"},ys={class:"log-td"},bs={key:0,class:"log-td log-extra",style:{"padding-left":"0.5em"}},zs={key:0},ks={key:1,style:{color:"blue"}},xs={key:1},Xt=2,Jt=3e3,Ct=80,Ts=100,Is=xe({__name:"status.log",props:ot({processing:{type:Boolean},opened:{type:Boolean},previewCollapsed:{type:Boolean},logs:{},imageIndex:{}},{expanded:{type:Boolean,required:!1},expandedModifiers:{},"auto-scroll":{type:Boolean,required:!1},"auto-scrollModifiers":{},order:{required:!1,default:"processed"},orderModifiers:{}}),emits:ot(["open-preview","change-index"],["update:expanded","update:auto-scroll","update:order"]),setup(l,{emit:r}){const{t:s}=Ve(),i=l,a=Fe(l,"expanded"),o=Fe(l,"auto-scroll"),u=r;tt("table");const v=tt("tbody"),p=_(),f=_(null),w=_(40),y=ze(()=>a.value?w.value:Ct),z=_(Ct),m=ze(()=>{let d=i.logs;switch(x.value){case"success":d=d.filter(T=>T.completed);break;case"error":d=d.filter(T=>!T.completed);break}return d}),g=Fl(!1),I=_([{type:"group",label:()=>s("status.sort"),key:"sort",children:[{label:()=>s("status.sortByStart"),value:"processed"},{label:()=>s("status.sortByCompletion"),value:"zipped"},{label:()=>s("status.sortByName"),value:"name"},{label:()=>s("status.sortBySize"),value:"size"},{label:()=>s("status.sortByOutputSize"),value:"outputsize"},{label:()=>s("status.sortByStatus"),value:"status"}]}]),A=Fe(l,"order");ke(A,()=>{console.log("sortValue changed"),Ee()});const S=[{label:()=>s("status.showAll"),value:""},{label:()=>s("status.showOnlySuccess"),value:"success"},{label:()=>s("status.showOnlyError"),value:"error"}],x=_(S[0].value);Me(()=>{h=wa(),X(),window.addEventListener("resize",()=>X());const d=new ResizeObserver(()=>X());d.observe(h.parent.parent.vnode.el),qe(()=>{window.removeEventListener("resize",()=>X()),d.disconnect()})}),qe(()=>{clearTimeout(R),clearTimeout(se),clearTimeout(me)});let M=0;ke(()=>i.imageIndex,d=>q(d));async function q(d){var Z;const T=d||i.imageIndex;let W=m.value.findIndex(ie=>ie.zippedIndex===T);W===-1&&(W=T);const _e=W<=K.value,ge=W>K.value+re.value;if(_e||ge){const ie=W*le.value-(ge?y.value:0);(Z=p.value)==null||Z.scrollTo({behavior:"instant",top:ie,left:P}),await Le(),B(!0),await Le()}Le(()=>{var fe,$e;let ie=f.value;ie&&(M>W&&(ie=ie.previousSibling||ie,ie instanceof HTMLElement||((fe=p.value)==null||fe.scrollTo(P,0),ie=null)),($e=ie==null?void 0:ie.scrollIntoView)==null||$e.call(ie,{behavior:"instant",block:"nearest"}),M=W)})}ke(()=>i.opened,d=>{Le(()=>{d&&(q(),B())})});let R,h;const j=_(document.documentElement.clientHeight),D=_(100);function X(){clearTimeout(R),R=setTimeout(()=>{if(!i.opened||!p.value)return;const d=p.value.$parent.$el.offsetHeight,T=window.innerHeight-h.parent.parent.parent.parent.vnode.el.offsetHeight-8,W=Math.min(le.value*Math.max(5,i.logs.length),Math.max(200,d+T));j.value=document.documentElement.clientHeight,D.value=Math.min(le.value*Math.max(5,i.logs.length),Math.max(Ct,W)),i.opened&&(w.value=Math.max(W,z.value))},100)}function U(){he(!0),X(),g.value=!0}let me=0,Ce=!1;function he(d=!1){if(!Ce){if(me){Ce=!0;return}Le(()=>{!d&&!o.value||(p.value.scrollTo({behavior:"instant",top:i.logs.length*50,left:P}),me=window.setTimeout(()=>{me=0,Ce&&(Ce=!1,he())},Ts))})}}const E=_({height:"0px"}),H=_({height:"0px"}),K=_(0),re=ze(()=>y.value/le.value+Xt*2|0),le=_(15);let ue=0,se=0,Ie=0,V=-999,O=-1;function B(d){const T=Date.now();if(d!==!0){if(se)return;if(T-Ie<30){se=window.setTimeout(()=>{se=0,B()},30-(T-Ie));return}}Ie=T,ue||(ue=v.value.rows[1].offsetHeight,le.value=ue);const W=m.value.length,ge=p.value.scrollbarInstRef.containerRef.scrollTop;if(!d&&W===O&&Math.abs(ge-V)<le.value*.5)return;V=ge,O=W;const Z=Math.max(0,(ge/le.value|0)-Xt);K.value=Z,E.value.height=Z*le.value+"px",H.value.height=Math.max(0,W-(Z+re.value))*le.value+"px"}function ee(){var d;(d=p.value)==null||d.scrollTo(0,0),B()}ke(()=>i.logs,()=>{i.opened&&(Le(B),o.value&&he(),pe())}),ke(()=>i.opened,d=>{d&&B()});let oe=0,te=0;function pe(){if(A.value==="processed"||!A.value)return;const d=Date.now();if(d-te<Jt){if(oe)return;oe=window.setTimeout(pe,Jt-(d-te));return}oe=0,te=d,Ee()}function Ee(){switch(console.log("sortList",A.value),A.value){case"zipped":i.logs.sort((d,T)=>d.zippedIndex-T.zippedIndex);break;case"status":i.logs.sort((d,T)=>d.command>T.command?1:-1);break;case"name":i.logs.sort((d,T)=>d.path>T.path?1:-1);break;case"size":i.logs.sort((d,T)=>d.size-T.size);break;case"outputsize":i.logs.sort((d,T)=>d.outputSize-T.outputSize);break;case"processed":default:i.logs.sort((d,T)=>d.index-T.index);break}}function Oe(d){const T=i.logs,W=T.findIndex($e=>$e.zippedIndex===i.imageIndex);let _e=0,ge=1;switch(d.code){case"ArrowUp":_e=-1;break;case"ArrowDown":_e=1;break;case"PageUp":_e=-1,ge=y.value/le.value-1|0;break;case"PageDown":_e=1,ge=y.value/le.value-1|0;break;case"Enter":case"NumpadEnter":if(W>=0&&i.previewCollapsed){Le(()=>u("open-preview")),d.stopPropagation(),d.preventDefault();return}break;default:return}let Z=W,ie=-1;const fe=T.length;do{if(Z+=_e,Z<0||Z>fe-1||Z===W)break;if(T[Z].completed){if(ie=Z,--ge>0)continue;break}}while(!0);if(console.log("lastTargetedIndex",ie),ie>=0){const $e=T[ie];u("change-index",!0,$e.path,$e.fileId,$e.zippedIndex),d.preventDefault()}}let ye=-1,ce=-1,P=0,G=!1;function $(d){var _e,ge;if(B(),G){G=!1;return}const{scrollLeft:T=0,scrollTop:W=0}=(ge=(_e=p.value)==null?void 0:_e.scrollbarInstRef)==null?void 0:ge.containerRef;(T!==ye||ye<0)&&(W===ce||ce<0)&&(P=T,console.log(P,"storedLogTableScrollLeft")),ye=T,ce=W,Le(()=>{var ie,fe;G=!0;const Z=(fe=(ie=p.value)==null?void 0:ie.scrollbarInstRef)==null?void 0:fe.containerRef;Z&&(Z.scrollLeft=P)})}function L(d){o.value=!1}function Y(d,T){var $e,Xe;const _e=((Xe=($e=d.target.closest("tr"))==null?void 0:$e.dataset)==null?void 0:Xe.indexLoglist)||0,{completed:ge,path:Z,fileId:ie,zippedIndex:fe}=m.value[_e];ge&&(i.imageIndex!==fe&&u("change-index",ge,Z,ie,fe),T&&u("open-preview"))}return(d,T)=>{const W=Ae,_e=be,ge=It,Z=fn,ie=Se,fe=Tt,$e=Ye,Xe=ut;return F(),ae(Xe,{name:"log",style:{"white-space":"nowrap"}},{header:t(()=>[n(W,{align:"center",wrap:!1},{default:t(()=>[C(c(d.$t("status.Log")),1)]),_:1})]),"header-extra":t(()=>[je(n(W,{align:"center",justify:"end",wrap:!0,style:{"margin-top":"0.2em","margin-left":"0.5em"}},{default:t(()=>[n(ge,{value:A.value,"onUpdate:value":[T[0]||(T[0]=ve=>A.value=ve),Ee],options:e(I),style:{width:"auto"},"consistent-menu-width":!1,"show-on-focus":!1,size:"tiny"},{arrow:t(()=>[n(_e,{component:e(ya)},null,8,["component"])]),_:1},8,["value","options"]),n(ge,{value:e(x),"onUpdate:value":[T[1]||(T[1]=ve=>De(x)?x.value=ve:null),T[2]||(T[2]=ve=>ee())],options:S,placeholder:d.$t("status.filterLogSelect"),size:"tiny",style:{width:"auto"},"consistent-menu-width":!1,"show-on-focus":!1},{arrow:t(()=>[n(_e,{component:e(ba)},null,8,["component"])]),_:1},8,["value","placeholder"]),n(Z,{key:"b",checked:o.value,"onUpdate:checked":[T[3]||(T[3]=ve=>o.value=ve),T[4]||(T[4]=ve=>ve&&he(!0))],size:"small",style:{"font-size":"0.9em"}},{default:t(()=>[C(c(d.$t("status.autoScroll")),1)]),_:1},8,["checked"]),n($e,{trigger:"hover",show:e(g),disabled:!a.value,placement:"top",delay:0,duration:1e3},{trigger:t(()=>[n(ie,{style:{"max-width":"30em"},disabled:!0},{trigger:t(()=>[n(Z,{size:"small",checked:a.value,"onUpdate:checked":[T[5]||(T[5]=ve=>a.value=ve),U],style:{"font-size":"0.9em"}},{default:t(()=>[C(c(d.$t("status.expandLog")),1)]),_:1},8,["checked"])]),default:t(()=>[C(c(d.$t("status.expandLog")),1)]),_:1})]),default:t(()=>[n(W,{wrap:!1,align:"center",style:{"font-size":"0.8em"}},{default:t(()=>[n(fe,{value:e(z),"onUpdate:value":T[6]||(T[6]=ve=>De(z)?z.value=ve:null),onUpdateValue:T[7]||(T[7]=ve=>X()),disabled:!a.value,"format-tooltip":ve=>`Log size: ${ve}`,tooltip:!0,step:1,min:e(D),max:e(j),style:{"z-index":"3",width:"100px"}},null,8,["value","disabled","format-tooltip","min","max"])]),_:1})]),_:1},8,["show","disabled"])]),_:1},512),[[Ze,i.opened]])]),default:t(()=>[n(W,{wrap:!1,align:"stretch",class:nt({"log-container":1,"expand-log":a.value}),style:de({height:e(y)+"px"}),onKeydown:Oe,tabindex:"-1"},{default:t(()=>[n(e(pn),{ref_key:"scrollref",ref:p,distance:10,"x-scrollable":!0,onMousedownCapture:L,onWheel:T[9]||(T[9]=ve=>o.value=!1),onScroll:$,load:"handleLogLoad",trigger:"none",style:de([{"z-index":"2","padding-right":"10px",height:"100%"},{height:e(y)+"px"}]),size:50},{default:t(()=>[i.opened?(F(),ne("table",cs,[b("thead",null,[b("tr",ps,[b("th",{class:"log-th",title:d.$t("status.table.core")},"th",8,gs),T[10]||(T[10]=b("th",{class:"log-th"},"no.",-1)),b("th",fs,c(d.$t("status.table.status")),1),b("th",ms,c(d.$t("status.table.details")),1),T[11]||(T[11]=b("th",{class:"log-th"},"size",-1))])]),b("tbody",{ref:"tbody",onClick:Y,onDblclick:T[8]||(T[8]=ve=>Y(ve,!0))},[b("tr",{style:de(e(E))},null,4),(F(!0),ne(Re,null,mt(e(m).slice(e(K),e(K)+e(re)),({index:ve,key:Vo,command:Wo,path:qo,core:Nt,zippedIndex:jt,completed:Go,fileId:Yi,shrinked:Ko,width:Zt,height:Yo,outputWidth:Qo,outputHeight:Xo,size:Jo,outputSize:Ht},Vt)=>(F(),ne("tr",{key:Vo,class:nt({"log-tr":1,completed:Go,selected:d.imageIndex===jt,stripe:(e(K)+Vt)%2}),ref_for:!0,ref:ea=>{d.imageIndex===jt&&(f.value=ea)},"data-index-loglist":e(K)+Vt},[b("td",hs,c(Nt>=0?Nt+1:"-"),1),b("td",_s,c(ve+1),1),b("td",ws,c(Wo),1),b("td",ys,c(qo),1),Zt?(F(),ne("td",bs,[C(c(`[${Zt}Ã—${Yo}] (${e(He)(Jo,0)})`)+" ",1),Ht?(F(),ne("span",zs,[T[12]||(T[12]=C(" â†’ ")),b("span",null," ("+c(e(He)(Ht,0))+") ",1)])):we("",!0),Ko?(F(),ne("span",ks,c(` [${Qo}Ã—${Xo}]`),1)):we("",!0)])):(F(),ne("td",xs))],10,vs))),128)),b("tr",{style:de(e(H))},null,4)],544)],512)):we("",!0),T[13]||(T[13]=b("div",{style:{height:"1em"}},null,-1))]),_:1},8,["style"])]),_:1},8,["class","style"])]),_:1})}}}),Ss={class:"container"},As={__name:"zipicon",setup(l){return(r,s)=>(F(),ne("span",Ss,[n(e(be),null,{default:t(()=>[n(e(Ft))]),_:1}),s[0]||(s[0]=b("span",{class:"text"},"ZIP",-1))]))}},Ls=Ne(As,[["__scopeId","data-v-8b8df2f0"]]),Cs=["innerHTML"],$s={style:{margin:"1px"}},Es=["href","download","onClick"],Fs={key:0,style:{position:"relative"}},Ps=["href","download"],Os=["href","download"],Us={key:0,style:{margin:"1px"}},Ms=["href","download","onClick"],Rs=xe({__name:"status.result",props:{processing:{type:Boolean},listLength:{},zippingFlag:{type:Boolean},converted:{},success:{},zippedTotalCount:{},zippedTotalSize:{},baseZipName:{},zips:{},unconvertedListText:{},unconvertedFileCount:{},unconvertedTotalSize:{},failedZips:{},failedZipDone:{type:Boolean},failedToCreateFailedZip:{type:Boolean},failedFileZippedCount:{},imgUrl:{},imgName:{},type:{}},emits:["all-zips-clicked","demand-zip-errors"],setup(l,{emit:r}){const s=rt(),{t:i}=Ve(),a=xt(),o=l,u=r,v=_(!1),p=_([]),f=_([]),w=_(void 0),y=ze(()=>[{key:"open",label:i("status.openFailedList"),icon:()=>Q(be,()=>Q(mn)),onSelect(){g()}},{key:"download",label:i("status.saveFailedList"),icon:()=>Q(be,()=>Q(za)),onSelect(){g(!0)}},{key:"zip",label:`${i("status.zipFailedList")}`+(o.failedZipDone?`(âœ”${i("status.done")})`:""),icon:()=>Q(kt,{show:v.value&&!o.failedZipDone,size:"small"},()=>Q(be,()=>Q(Ft))),disabled:v.value,onSelect(k){return v.value=!0,u("demand-zip-errors"),!1}}]);ke([()=>o.zips.length,()=>o.failedZips.length],()=>{{p.value.length>o.zips.length&&(p.value.length=0);let k=0;const I=o.zips.length===1&&o.zippedTotalCount===o.listLength;for(let A=p.value.length;A<o.zips.length;A++){const S=o.zips[A],x=o.baseZipName+(I?"":"-"+String(A+1).padStart(2,"0"))+".zip";k+=S.size,p.value[A]={url:S.url,size:S.size,number:I?0:A+1,sizeByUnit:He(S.size),name:x,count:S.count,clicked:!1}}}{f.value.length>o.failedZips.length&&(f.value.length=0);let k=0;const I=o.failedZipDone&&o.failedZips.length===1;for(let A=f.value.length;A<o.failedZips.length;A++){const S=o.failedZips[A],x=o.baseZipName+"-error"+(I?"":"-"+String(A+1).padStart(2,"0"))+".zip";k+=S.size,f.value[A]={url:S.url,size:S.size,number:I?0:A+1,sizeByUnit:He(S.size),name:x,count:S.count,clicked:!1}}}});function z(k,I=!1){const{url:A,name:S}=k;if(I){const x=document.createElement("a");x.href=A,x.download=S,x.click()}k.clicked||(k.clicked=!0,o.processing||p.value.every(x=>x.clicked)&&u("all-zips-clicked"))}async function m(k){if(o.zippingFlag){if(p.value.length>=2&&!await new Promise((S,x)=>s.warning({title:i("Download"),content:i("status.confirmDownloadMessage",[p.value.length]),positiveText:"OK",negativeText:i("cancel"),onPositiveClick:()=>S(!0),onNegativeClick:()=>x()})))return;const I=p.value;for(const A of I)z(A,!0)}}function g(k=!1){const I=new Blob([o.unconvertedListText],{type:"text/plain;charset=utf8"}),A=URL.createObjectURL(I),S=document.createElement("a");S.href=A,S.target="_blank",k&&(S.download=o.baseZipName+"-error.txt"),S.click()}return(k,I)=>{const A=gn,S=Ye,x=Pe,M=Ae,q=Ls,R=Ot,h=ka,j=ut;return F(),ae(j,{name:"output",style:{"white-space":"nowrap"},disabled:""},{header:t(()=>[b("span",{style:{color:"black"},innerHTML:k.$t("status.Output")},null,8,Cs)]),default:t(()=>[n(M,{wrap:!1,vertical:"",style:{"margin-top":"-1.3em"}},{default:t(()=>[n(M,{justify:"center"},{default:t(()=>[je(n(M,{vertical:"",align:"center"},{default:t(()=>[n(S,{placement:"left"},{trigger:t(()=>[n(A,{type:"line","indicator-placement":"inside",color:"lime","rail-color":"rgba(99, 255, 99, 0.5)","indicator-text-color":o.zippedTotalCount===k.listLength?"white":"green",processing:o.processing,percentage:o.zippedTotalCount/k.listLength*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[b("span",$s,c(o.zippedTotalCount/k.listLength*100|0)+"% "+c(k.$t("status.zippingProgress"))+" ("+c(o.zippedTotalCount)+"/"+c(o.converted)+")",1)]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[C(" "+c(k.$t("status.zippingProgress"))+" ("+c(o.zippedTotalCount/o.listLength*100|0)+"%) ",1)]),_:1}),e(p).length>=2||o.processing?(F(),ae(Kt,{key:0,name:"zips",class:"zip-buttons-parent",tag:"div"},{default:t(()=>[(F(!0),ne(Re,null,mt(e(p),(D,X)=>(F(),ne("span",{key:X},[n(S,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[b("a",{href:D.url,download:D.name,class:"in-button-anchor",onClick:U=>z(D)},[n(x,{class:"zip-button",size:"tiny",color:D.clicked?"#050":"lime","text-color":D.clicked?"gray":"white",onClick:et(U=>z(D),["stop"]),round:""},{default:t(()=>[n(e(be),{size:"tiny"},{default:t(()=>[n(e(Ft))]),_:1}),C("ZIP"+c(D.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Es)]),default:t(()=>[b("div",{style:de({color:e(a).successColor})},[b("div",null,"ZIP "+c(D.number||"")+" ("+c(k.$t("success"))+")",1),b("div",null,c(D.name),1),b("div",null,c(D.sizeByUnit),1),b("div",null,c(k.$rt("{n} @:files",D.count)),1)],4)]),_:2},1024)]))),128))]),_:1})):we("",!0)]),_:1},512),[[Ze,k.zippingFlag]])]),_:1}),n(Qe,null,{default:t(()=>[je(n(M,{justify:"center",align:"center"},{default:t(()=>[n(S,{trigger:"hover",duration:0,delay:0,placement:"left",style:de({color:"white",backgroundColor:e(a).successColor}),"arrow-style":{backgroundColor:e(a).successColor}},{trigger:t(()=>[n(Qe,{name:"save"},{default:t(()=>[k.success>0?(F(),ne("span",Fs,[n(R,{value:k.zippingFlag?o.zippedTotalCount.toLocaleString("en-us"):o.type.replace(/\(.+\)/,""),color:e(a).successColorHover,offset:[-20,-3]},{default:t(()=>[k.zippingFlag?(F(),ae(x,{key:0,size:"medium",onClick:m,color:e(a).successColor,round:""},{default:t(()=>[e(p).length?(F(),ne("a",{key:0,href:e(p)[0].url,download:e(p)[0].name,class:"in-button-anchor",onClick:I[0]||(I[0]=et(()=>{},["prevent"]))},[n(q),C(" Ã— "+c(e(p).length)+" "+c(k.$t("status.saveAll")),1)],8,Ps)):we("",!0)]),_:1},8,["color"])):(F(),ne("a",{key:1,href:o.imgUrl,download:o.imgName,class:"in-button-anchor"},[n(x,{size:"medium",color:e(a).successColor,round:""},{default:t(()=>[n(e(be),{size:"tiny",component:e(vn)},null,8,["component"]),C(" "+c(k.$t("save")),1)]),_:1},8,["color"])],8,Os))]),_:1},8,["value","color"])])):we("",!0)]),_:1})]),default:t(()=>[o.listLength>=2?(F(),ne(Re,{key:0},[b("div",null,c(e(i)("success"))+": "+c(k.zippedTotalCount.toLocaleString()),1),b("div",null,c(e(i)("status.totalSize"))+": "+c(e(He)(o.zippedTotalSize)),1),b("div",null,"ZIP Ã— "+c(e(p).length),1),b("div",null,c(e(i)("status.saveAllZipsTooltip")),1)],64)):(F(),ne(Re,{key:1},[C(c(k.$t("status.downloadConvertedImage",e(p).length)),1)],64))]),_:1},8,["style","arrow-style"]),!o.processing&&o.success!==k.listLength?(F(),ae(h,{key:0,options:e(y),onSelect:I[1]||(I[1]=(D,X)=>{var U;return(U=e(y).find(({key:me})=>D===me))==null?void 0:U.onSelect()}),"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start"},{default:t(()=>[n(S,{show:e(w),duration:0,delay:0,placement:"right",style:de({color:"white",backgroundColor:e(a).errorColor}),"arrow-style":{backgroundColor:e(a).errorColor}},{trigger:t(()=>[n(R,{value:o.unconvertedFileCount.toLocaleString(),color:e(a).errorColorHover,offset:[-0,-3]},{default:t(()=>[n(x,{size:"small",color:e(a).errorColor},{default:t(()=>[n(e(be),{size:"medium",style:{"vertical-align":"middle"},component:e(xa)},null,8,["component"])]),_:1},8,["color"])]),_:1},8,["value","color"])]),default:t(()=>[b("div",null,[b("div",null,c(e(i)("failed"))+": "+c(o.unconvertedFileCount.toLocaleString()),1),b("div",null,c(e(i)("status.totalSize"))+": "+c(e(He)(o.unconvertedTotalSize)),1)])]),_:1},8,["show","style","arrow-style"])]),_:1},8,["options"])):we("",!0)]),_:1},512),[[Ze,!o.processing]])]),_:1}),n(Qe,{name:"zipcontainer"},{default:t(()=>[je(n(M,{vertical:"",align:"center"},{default:t(()=>[n(S,{placement:"left"},{trigger:t(()=>[n(A,{type:"line","indicator-placement":"inside",color:"red","rail-color":"rgba(255, 0, 0, 0.5)","indicator-text-color":o.failedFileZippedCount===o.unconvertedFileCount?"white":"#500",processing:e(v)&&!o.failedZipDone&&!o.failedToCreateFailedZip,percentage:o.failedFileZippedCount/o.unconvertedFileCount*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[o.failedToCreateFailedZip?(F(),ne("div",{key:1,style:de({color:e(a).errorColor})},c(k.$t("status.failureZippingFailedFiles")),5)):(F(),ne("span",Us,c(o.failedFileZippedCount/o.unconvertedFileCount*100|0)+"% "+c(k.$t("status.zipped"))+" ("+c(o.failedFileZippedCount)+"/"+c(o.unconvertedFileCount)+")",1))]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[C(" "+c(k.$t("status.zippingProgress"))+" ("+c(o.failedFileZippedCount/o.unconvertedFileCount*100|0)+"%) ",1)]),_:1}),n(Kt,{name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(F(!0),ne(Re,null,mt(e(f),(D,X)=>(F(),ne("span",{key:X},[n(S,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[b("a",{href:D.url,download:D.name,class:"in-button-anchor",onClick:U=>z(D)},[n(x,{class:"zip-button",size:"tiny",color:D.clicked?"#551122":"#F00","text-color":D.clicked?"gray":"white",onClick:et(U=>z(D),["stop"]),round:""},{default:t(()=>[n(e(be),{size:"tiny",component:e(Ta)},null,8,["component"]),C("ZIP"+c(D.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Ms)]),default:t(()=>[b("div",{style:de({color:e(a).errorColor})},[b("div",null,"ZIP "+c(D.number||"")+" ("+c(k.$t("failed"))+")",1),b("div",null,c(D.name),1),b("div",null,c(D.sizeByUnit),1),b("div",null,c(k.$rt("{n} @:files",D.count)),1)],4)]),_:2},1024)]))),128))]),_:1})]),_:1},512),[[Ze,e(v)]])]),_:1})]),_:1})]),_:1})}}}),Ds=Ne(Rs,[["__scopeId","data-v-1d58375d"]]),Bs=xe({__name:"status",props:{processing:{type:Boolean},status:{},interval:{}},emits:["all-zips-clicked","demand-zip-errors","demand-image","delete-image"],setup(l,{expose:r,emit:s}){const i={itemMargin:"1px",titlePadding:"2px",titleFontSize:"0.8rem"};rt();const{t:a}=Ve(),o=xt(),u=l,v=s;r({cleanup:ce});const p=_(!1),f=_([]),w=_(!1),y=_(!1),z=_([0,0]),m=_([0,0]),g=_([0,0]),k=_([0,0]),I=_([0,0]),A=_([0,0]),S=_(0),x=_(0),M=_([0,0]),q=_(0),R=_(o.value.infoColor),h=_("#000000"),j=_("#000000"),D=_(0),X=_(0),U=_(""),me=_("00:00:00"),Ce=_(null),he=_(["progress","log","output"]),E=P=>he.value.includes(P),H=P=>he.value.push(P),K=P=>{const G=he.value.findIndex($=>$===P);G>=0&&he.value.splice(G,1)},re=ze(()=>he.value.includes("log")),le=ze(()=>he.value.includes("progress")),ue=_(!1),se=_(!0),Ie=_("processed"),V=zt({name:"",originalName:"",size:0,url:"",originalUrl:"",originalSize:0,dataUrl:"",index:0,various:{shrinked:!1}}),O=tt("body"),B=tt("imageViewer");Me(()=>{ke(u.status,()=>pe(),{deep:!1});let P=0;const G=()=>{if(P)return;const $=Date.now();me.value="00:00:00",P=window.setInterval(()=>{const L=(Date.now()-$)/1e3;me.value=`${String(L/3600|0).padStart(2,"0")}:${String(L/60%60|0).padStart(2,"0")}:${String(L%60|0).padStart(2,"0")}`},300)};G(),y.value=!0,ke(()=>u.processing,($,L)=>{$||Ee(),$?(G(),f.value.length=0,p.value=!1,w.value=!1):(clearInterval(P),P=0)}),qe(()=>{clearInterval(P),clearTimeout(te)}),ft(()=>clearInterval(P))}),qe(()=>{ce()}),ft(()=>{clearTimeout(te)});const ee=u.interval||100;let oe=!1,te=0;function pe(){if(oe)return;if(te){oe=!0;return}te=window.setTimeout(()=>{te=0,oe&&(oe=!1,pe())},ee);const P=u.status;p.value=P.length>=2,m.value[1]=m.value[0],m.value[0]=P.startedCount,g.value[1]=g.value[0],g.value[0]=P.success,k.value[1]=k.value[0],k.value[0]=P.failure,I.value[1]=I.value[0],I.value[0]=P.done,A.value[1]=A.value[0],A.value[0]=P.converted,S.value=P.retried,x.value=P.length,M.value[1]=M.value[0],M.value[0]=P.zippedTotalCount,D.value=P.inputTotalSize,X.value=P.outputTotalSize,q.value=P.failedFileZippedCount;const G=X.value-D.value;U.value=(G>=0?"+ ":"")+He(G);const $=X.value/D.value,L=(256|Math.min(255,Math.max(0,$-1.5)*255|0)).toString(16).substring(1);h.value="#"+L+"0000";const Y=1024*1024,d=(256|Math.min(255,Math.max(0,G/1024/Y)*255|0)).toString(16).substring(1);j.value="#"+d+"0000",z.value[1]=z.value[0],z.value[0]=g.value[0]/x.value*100,(re.value||!u.processing)&&(f.value=f.value.concat(P.logs),P.logs.length=0),Ce.value=P.thumbnail,u.processing?R.value=k.value[0]?o.value.errorColor:S.value?o.value.warningColor:o.value.infoColor:y.value=!1,P.convertedImageUrl!==V.url&&(V.url=P.convertedImageUrl,V.name=P.convertedImageName,V.dataUrl=P.convertedImageDataUrl,V.size=P.convertedImageSize||P.outputTotalSize,V.originalSize=P.convertedImageOrgSize,V.originalName=P.convertedImageOrgName,V.index=P.convertedImageIndex,V.originalUrl=P.convertedImageOrgUrl,V.various={shrinked:P.convertedImageShrinked})}function Ee(){const P=u.status;R.value=u.status.success===u.status.length?o.value.successColor:o.value.errorColor,Ie.value==="processed"&&(Ie.value="zipped"),P.success>0&&(se.value&&(K("log"),f.value.length>=5&&(ue.value=!0)),H("preview"))}async function Oe(P,G,$,L){var d;if(!P)return;const Y=L;E("preview")||(H("preview"),await Le()),(d=B.value)==null||d.changeIndex(Y+1),await Le(()=>{var T;try{(T=B.value)==null||T.$el.scrollIntoView({behavior:"instant",block:"nearest"})}catch{}})}const ye=_(!1);function ce(){ye.value=!0,URL.revokeObjectURL(V.url),URL.revokeObjectURL(V.originalName),V.originalUrl="",V.url="",V.index=0,u.status.logs.length=0,f.value.length=0}return(P,G)=>{const $=Ae,L=ut,Y=hn;return F(),ae($,{ref_key:"body",ref:O,vertical:"",justify:"center"},{default:t(()=>[n(Y,{"display-directive":"show","trigger-areas":["arrow","main"],"expanded-names":e(he),"onUpdate:expandedNames":G[7]||(G[7]=d=>De(he)?he.value=d:null),"theme-overrides":i},{default:t(()=>[n(Jl,{processing:e(y),"elapsed-time":e(me),"success-perc":e(z)[0],"input-total-size":e(D),"output-total-size":e(X),"file-type":u.status.type,shrink:u.status.shrink,threads:u.status.threads,"zip-size":u.status.zipSize,"rate-color":e(h),"dif-color":e(j),"total-size-dif-str":e(U),thumbnail:e(Ce),opened:e(le)},{center:t(()=>[e(ye)?we("",!0):(F(),ae(ds,{key:0,index:e(m)[0],success:e(g)[0],length:P.status.length,"success-to":e(g)[0],"success-from":e(g)[1],failure:e(k)[0],"success-perc-to":e(z)[0],"success-perc-from":e(z)[1],retried:e(S),processing:e(y),interval:e(ee),"status-color":e(R),class:"center-column"},null,8,["index","success","length","success-to","success-from","failure","success-perc-to","success-perc-from","retried","processing","interval","status-color"]))]),_:1},8,["processing","elapsed-time","success-perc","input-total-size","output-total-size","file-type","shrink","threads","zip-size","rate-color","dif-color","total-size-dif-str","thumbnail","opened"]),n(Is,{processing:e(y),"image-index":e(V).index,opened:e(re),"preview-collapsed":E("preview"),logs:e(f),expanded:e(ue),"onUpdate:expanded":G[0]||(G[0]=d=>De(ue)?ue.value=d:null),"auto-scroll":e(se),"onUpdate:autoScroll":G[1]||(G[1]=d=>De(se)?se.value=d:null),order:e(Ie),onChangeIndex:Oe,onOpenPreview:G[2]||(G[2]=d=>{var T;return(T=e(B))==null?void 0:T.openPreview()}),name:"log",style:{"white-space":"nowrap"}},null,8,["processing","image-index","opened","preview-collapsed","logs","expanded","auto-scroll","order"]),n(L,{title:P.$t("status.PreviewImage"),name:"preview",style:{"white-space":"nowrap"},disabled:!(e(g)[0]>0)},{default:t(()=>[n($,{justify:"center",align:"center",vertical:"",style:{"margin-top":"-1em"}},{default:t(()=>[n(Gl,{"_v-else-if":"imageViewerStarted && status.success > 0 /*&& (props.status.threads || !zippingFlag)*/ && !cleaningUp",ref_key:"imageViewer",ref:B,url:e(V).url,size:e(V).size,"original-url":e(V).originalUrl,"original-size":e(V).originalSize,name:e(V).name,originalName:e(V).originalName,length:e(g)[0],index:e(V).index,"various-info":e(V).various,"is-single":!e(p),onDemandImage:G[3]||(G[3]=d=>v("demand-image",d)),on_deleteImage:G[4]||(G[4]=d=>v("delete-image",d)),_close:"imageViewerStarted=false"},null,8,["url","size","original-url","original-size","name","originalName","length","index","various-info","is-single"])]),_:1})]),_:1},8,["title","disabled"]),n(Ds,{processing:e(y),"list-length":e(x),zippingFlag:e(p),zips:u.status.zips,"img-url":e(V).url,"img-name":e(V).name,success:e(g)[0],failure:e(k)[0],done:e(I)[0],converted:e(A)[0],retried:e(S),"zipped-total-count":e(M)[0],"zipped-total-size":u.status.zippedTotalSize,"base-zip-name":u.status.baseZipName,"failed-file-zipped-count":e(q),"failed-to-create-failed-zip":u.status.failedToCreateFailedZip,"failed-zip-done":u.status.failedZipDone,"failed-zips":u.status.failedZips,"unconverted-file-count":u.status.unconvertedFileCount,"unconverted-list-text":u.status.unconvertedListText,"unconverted-total-size":u.status.unconvertedTotalSize,type:u.status.type,onAllZipsClicked:G[5]||(G[5]=d=>v("all-zips-clicked")),onDemandZipErrors:G[6]||(G[6]=d=>v("demand-zip-errors"))},null,8,["processing","list-length","zippingFlag","zips","img-url","img-name","success","failure","done","converted","retried","zipped-total-count","zipped-total-size","base-zip-name","failed-file-zipped-count","failed-to-create-failed-zip","failed-zip-done","failed-zips","unconverted-file-count","unconverted-list-text","unconverted-total-size","type"])]),_:1},8,["expanded-names"])]),_:1},512)}}}),Ns=Ne(Bs,[["__scopeId","data-v-8749b422"]]),js=["innerHTML"],Zs=xe({__name:"converter",props:ot({input:{},format:{},quality:{},retainExtension:{type:Boolean},maxZipSizeMB:{},threads:{}},{showNote:{type:Boolean},showNoteModifiers:{}}),emits:ot(["start","end"],["update:showNote"]),setup(l,{emit:r}){Ke(We);const{t:s}=Ve(),i=rt(),a=Ia(),o=10,u=navigator.hardwareConcurrency,v=typeof OffscreenCanvas=="function",p=100,f=l,w=Fe(l,"showNote"),y=r,z=_(!1),m=_(!1),g=_(!1),k=_(!1),I=_(!1),A=_(()=>"initializing"),S=_("info"),x=zt(K()),M=tt("stat"),q=_(0);let R=!1,h=()=>{},j,D=0,X=!1;ke(()=>f.input,O=>{O!=null&&O.length&&le(O)}),ke(k,O=>{document.body.style.overflowY=O?"hidden":"auto"}),Me(async()=>{await Ie(),V()});async function U(){let O=!0;if(D>o*1e3&&!X&&x.success>0&&(O=!1,await new Promise(B=>{i.warning({title:s("confirmCloseDialogTitle"),autoFocus:!0,maskClosable:!1,positiveText:s("close"),negativeText:s("back"),onPositiveClick:()=>O=!0,onAfterLeave:B,content:s("confirmCloseDialog")})})),!O)return!1;a.destroyAll(),k.value=!1,w.value=!1}function me(O){j==null||j(O),console.log(O,"demanded")}function Ce(O){Lt==null||Lt(O),console.log(O,"delete")}function he(){!m.value&&z.value?m.value=!0:U()}function E(){le(f.input)}let H=_(()=>{});function K(O){const B={logs:[],ziplogs:[],startedCount:0,converted:0,success:0,failure:0,retried:0,done:0,length:0,zippedTotalCount:0,zippingErrorCount:0,zippedTotalSize:0,processing:!1,zips:[],inputTotalSize:0,outputTotalSize:0,thumbnail:null,baseZipName:"testzipname",type:"image/any",startedTime:Date.now(),convertedImageDataUrl:"",convertedImageName:"",convertedImageUrl:"",convertedImageOrgUrl:"",convertedImageIndex:-1,convertedImageShrinked:!1,zipSize:f.maxZipSizeMB,shrink:N.multithread&&N.shrinkImage?[N.maxWidth,N.maxHeight]:void 0,unconvertedListText:"",failedZipDone:!1,failedZips:[],unconvertedFileCount:0,unconvertedTotalSize:0,failedFileZippedCount:0,failedToCreateFailedZip:!1};return Object.assign(O||{},B)}function re(){I.value=!1,URL.revokeObjectURL(x.convertedImageUrl),URL.revokeObjectURL(x.convertedImageOrgUrl);for(const O of x.zips)URL.revokeObjectURL(O.url);x.zips.length=0;for(const O of x.failedZips)URL.revokeObjectURL(O.url);x.failedZips.length=0,K(x),h(),h=()=>{},j=null,X=!1,g.value=!1,m.value=!1}async function le(O){if(z.value){i.error({title:"Busy",positiveText:"OK",content:s("interfered")});return}k.value&&(q.value^=1);let B=O.concat();K(x),re(),k.value=!0,I.value=!0,z.value=!0,x.processing=!0,S.value="info",A.value=()=>s("processing");const ee=new Set,oe=f.format,te=f.quality,pe=[...oe.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),Ee=se(oe,te,B[0].webkitRelativePath);x.length=B.length,x.baseZipName=Ee,x.type=oe.replace(/image\//,"").toUpperCase()+(/jpe?g|webp/i.test(oe)?" ("+te+")":""),x.threads=R?0:f.threads;const Oe=Date.now();y("start");let ye,ce,P;if(!R&&f.threads>=2?(j=Ll,P=await yl({files:B,completedFileIdSet:ee,ConvStats:x,canceled:m,props:f,imageType:oe,quality:te,outputExt:pe,format:oe,message:a})):(j=Ol,P=await Pl(B,ee,f,m,x)),{exception:ce,callbackToGenerateFailedZips:ye,callbackToClearConverter:h}=P,ce){let G;switch(ce.message){case"worker-load-error":G=s("errMsgWorkerLoadError");break;default:G="unexpected error"}i.error({title:"Error",autoFocus:!0,maskClosable:!1,closable:!1,content:()=>Q("div",[Q("p",G),Q(Pe,{onClick(){location.reload()}},s("Reload"))])})}if(x.success===x.length?(S.value="success",A.value=()=>s("completed")):(S.value="error",A.value=()=>m.value?s("aborted"):s("incomplete")),ee.size!==B.length){const G=ue(O,ee);H.value=()=>{!G||!G.length||ye(G)}}z.value=!1,x.processing=!1,g.value=!0,B.length=0,D=Date.now()-Oe,y("end")}function ue(O,B){const ee=[],oe=[];let te=0;for(const pe of O)B.has(pe._id)||(ee.push(pe),oe.push(pe.webkitRelativePath||pe.relativePath||pe.name),te+=pe.size);return oe.length&&(x.unconvertedListText=oe.join(`
`),x.unconvertedFileCount=ee.length,x.unconvertedTotalSize=te),ee}function se(O,B,ee){var Oe;const oe=new Date;O=O.replace(/^image\//,"").toLowerCase();const te=N.useFolderNameForZip&&((Oe=String(ee).match(/^\/?([^/]+)\//))==null?void 0:Oe[1])||"avif2jpg",pe=`
    ${oe.getFullYear().toString().substring(2)}
    ${String((oe.getMonth()+1)*100+oe.getDate()).padStart(4,"0")}
    ${String(oe.getHours()*1e4+oe.getMinutes()*100+oe.getSeconds()).padStart(6,"0")}
    -
    ${O+(/jpe?g|webp/i.test(O)?B:"")}
  `.replace(/\s/g,"");return`${te}-${pe}`.replace(/\s+/g," ")}async function Ie(){const O="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",B=document.createElement("img"),ee=Cn(B).then(()=>!0,()=>!1);B.src=O,await ee||i.warning({title:"Unsupported",positiveText:"OK",maskClosable:!1,content:s("avifUnsupported")})}function V(){(!v||u<2||!Promise.any)&&(R=!0),R&&(Ue.value=0)}return(O,B)=>{var ye;const ee=be,oe=Ot,te=Se,pe=Ae,Ee=kt,Oe=_n;return F(),ne(Re,null,[!e(z)&&((ye=f.input)!=null&&ye.length)?(F(),ae(pe,{key:0,justify:"center",align:"center",style:{"margin-top":"0.4em"}},{default:t(()=>[n(te,{trigger:"hover",placement:"top","keep-alive-on-hover":!1,duration:0,delay:50},{trigger:t(()=>{var ce;return[n(oe,{value:((ce=O.input)==null?void 0:ce.length)||0,offset:[-12,-5],color:"#99999966"},{default:t(()=>[n(e(Pe),{onClick:E,round:"",size:"medium"},{icon:t(()=>[n(ee,{size:"1.2em",color:"#CCCCCC"},{default:t(()=>[n(e(Sa))]),_:1})]),default:t(()=>[C(" "+c(e(s)("convertAgain")),1)]),_:1})]),_:1},8,["value"])]}),default:t(()=>{var ce;return[b("div",{innerHTML:e(s)("reconvertTip",(ce=f.input)==null?void 0:ce.length)},null,8,js)]}),_:1})]),_:1})):we("",!0),n(Oe,{ref:"processingModal","display-directive":"show",show:e(k),"onUpdate:show":B[2]||(B[2]=ce=>De(k)?k.value=ce:null),closable:e(g),"close-on-esc":!1,preset:"dialog",onClick:B[3]||(B[3]=ce=>{e(a).destroyAll()}),onMaskClick:B[4]||(B[4]=ce=>{e(a).destroyAll()}),onClose:U,onEsc:he,title:e(A),type:e(S),"mask-closable":!1,onAfterLeave:re,onBeforeLeave:B[5]||(B[5]=ce=>{e(M).cleanup()}),class:"processing-dialog"},{default:t(()=>[n(pe,{vertical:"",style:{"flex-grow":"1"}},{default:t(()=>[e(I)?(F(),ae(Ns,{ref_key:"stat",ref:M,key:e(q),processing:e(z),status:e(x),interval:p,onAllZipsClicked:B[0]||(B[0]=ce=>De(X)?X.value=!0:X=!0),onDemandZipErrors:e(H),onDemandImage:me,onDeleteImage:Ce},null,8,["processing","status","onDemandZipErrors"])):we("",!0),n(pe,{justify:"end",align:"center",wrap:!1},{default:t(()=>[e(z)?(F(),ae(e(Pe),{key:0,disabled:e(m),ref:"cancelbutton",round:"",size:"large",onClick:B[1]||(B[1]=ce=>m.value=!0)},{default:t(()=>[n(Ee,{show:e(m)&&!e(g),size:"small"},{default:t(()=>[C(c(e(s)("cancel")),1)]),_:1},8,["show"])]),_:1},8,["disabled"])):e(g)?(F(),ae(e(Pe),{key:1,onClick:U,round:"",size:"large"},{default:t(()=>[C(c(e(s)("close")),1)]),_:1})):we("",!0)]),_:1})]),_:1})]),_:1},8,["show","closable","title","type"])],64)}}}),Hs="/avif2jpeg/dist/avif.png",Vs={class:"container-1"},Ws={style:{position:"relative"}},qs={style:{position:"absolute","font-size":"0.5em",right:"-3.5em",bottom:"-1.5em","white-space":"nowrap"}},Gs={style:{color:"#666666"}},Ks=["innerHTML"],Ys={style:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","font-size":"xx-small","white-space":"nowrap"}},Qs=xe({__name:"droptarget",props:{forbidden:{type:Boolean},dropTarget:{}},emits:["drop"],setup(l,{emit:r}){Ke(We);const s=l,i=r,a=Aa(),o=_(!1),u=_(0),v=_("");Me(()=>{p(s.dropTarget||document)});function p(w){document.ondragstart=y=>y.preventDefault(),document.ondragover=y=>y.preventDefault(),w.ondrop=async y=>{var m;if(y.preventDefault(),o.value||s.forbidden)return;o.value=!0,u.value=0,v.value="";let z;try{const g=[...y.dataTransfer.items].map(k=>k.webkitGetAsEntry());a.start(),z=await f(g),a.finish()}catch{z=[...((m=y.dataTransfer)==null?void 0:m.files)??[]],a.error()}o.value&&(o.value=!1,i("drop",z))}}async function f(w,y){y=y||[];for(const z of w)if(z.isFile){const m=await new Promise(g=>z.file(k=>g(k)));Object.defineProperty(m,"webkitRelativePath",{value:z.fullPath}),y.push(m),u.value++}else if(z.isDirectory){v.value=z.fullPath;const m=z.createReader();do{const g=await new Promise(k=>m.readEntries(I=>k(I)));if(!g.length)break;await f(g,y)}while(!0)}return y}return(w,y)=>{const z=be,m=Ye,g=Ae,k=Se,I=_n;return F(),ne("div",Vs,[n(k,{to:!1,"display-directive":"show",trigger:"hover",duration:0,delay:0,placement:"bottom-end"},{trigger:t(()=>[n(g,{vertical:"",class:"container-2"},{default:t(()=>[n(g,{align:"center",wrap:!1,class:"container-3"},{default:t(()=>[n(g,{vertical:"",align:"center",wrap:!1,style:{"font-weight":"bold","font-size":"1em","line-height":"90%","white-space":"nowrap"}},{default:t(()=>[y[5]||(y[5]=b("span",null,"Drag & Drop",-1)),b("span",Ws,[y[4]||(y[4]=C(" AVIF Images ")),b("span",qs,[y[3]||(y[3]=C(" or ")),n(m,{placement:"bottom-end"},{trigger:t(()=>[b("span",Gs,[n(z,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Ut))]),_:1}),y[1]||(y[1]=C(" Folders "))])]),default:t(()=>[y[2]||(y[2]=C(" You can drag and drop your local folders "))]),_:1})])])]),_:1}),n(g,null,{default:t(()=>y[6]||(y[6]=[b("img",{src:Hs,class:"avif"},null,-1)])),_:1})]),_:1})]),_:1})]),default:t(()=>[b("h3",{innerHTML:w.$t("droptarget"),style:{"max-width":"200px","text-align":"center","word-break":"keep-all","overflow-wrap":"break-word"}},null,8,Ks)]),_:1}),n(I,{show:e(o),"onUpdate:show":y[0]||(y[0]=A=>De(o)?o.value=A:null),closable:!0,preset:"dialog",title:"Parsing dropped items.",type:"info","mask-closable":!1,"negative-text":w.$t("cancel")},{default:t(()=>[n(g,{vertical:"",align:"center"},{default:t(()=>[b("div",Ys,c(e(v)),1),b("div",null,"found "+c(e(u))+" files",1)]),_:1})]),_:1},8,["show","negative-text"])])}}}),Xs=Ne(Qs,[["__scopeId","data-v-963c44a5"]]),Js={class:"container-1"},ei={class:"container-2"},ti=["innerHTML"],ni=["innerHTML"],oi={style:{"white-space":"nowrap"}},ai={style:{"padding-left":"1em"}},li=["innerHTML"],si=["accept"],ii=xe({__name:"file-selector",props:ot({target:{},userExtensions:{},forbidden:{type:Boolean}},{expanded:{type:Boolean,required:!1},expandedModifiers:{},disableNotifyingFolderSelect:{type:Boolean},disableNotifyingFolderSelectModifiers:{}}),emits:ot(["input","click","cancel","on-change-accept","update:target","update:userExtensions"],["update:expanded","update:disableNotifyingFolderSelect"]),setup(l,{emit:r}){const s=rt(),{t:i}=Ve(),a=Ke(We),o=["avif_only","all_images","all_files","edit_type"],u=[];for(const E of o)u.push({label:()=>i("fileTypeRadioOptions."+E),value:E});const v=({node:E,option:H})=>Q(Se,{placement:"right"},{trigger:()=>E,default:()=>X(H.value).replace(/,/g,", ")}),p=l,f=r,w=_(0),y=_(!1),z=_(!1),m=ze(()=>X(I.value)),g=ze(()=>A.value.split(",").every(H=>/^\s*(\.[\w\-]+)*\s*$/.test(H))?"success":"error"),k=ze(()=>!p.forbidden&&!z.value);Fe(l,"expanded");const I=ze({get:()=>o.indexOf(p.target)>=0?p.target:o[0],set:E=>{f("update:target",E)}}),A=ze({get:()=>p.userExtensions,set:E=>{f("update:userExtensions",E)}}),S=Fe(l,"disableNotifyingFolderSelect"),x=_(null),M=_(null),q=_(D());ke(I,E=>{f("on-change-accept",m.value)}),Me(()=>{});async function R(E){if(f("click"),E===M.value&&!S.value){let H=!1;if(await new Promise(K=>{s.info({title:i("loadfolderNotifyingTitle"),positiveText:i("Continue"),negativeText:i("Cancel"),onAfterLeave:()=>K(H),onPositiveClick:()=>H=!0,content:()=>Q("div",[Q("p",{},i("loadfolderNotifyingMessageTerm1")),Q("div",[Q(dn,{width:250,style:{border:"3px solid gray"},src:"/avif2jpeg/dist//notification-folder.png"})]),Q("p",{},i("loadfolderNotifyingMessageTerm2")),Q("p",[Q(fn,{onUpdateChecked:re=>S.value=re,checked:S.value},()=>i("checkboxTextDontShowThis"))])])})}),!H){S.value=!1,f("cancel");return}}E.click()}function h(){f("cancel")}function j(E){const K=[...E.target.files];x.value.value="",M.value.value="",me(K)}function D(){return"webkitdirectory"in document.createElement("input")}function X(E){switch(E){case"avif_only":return".avif, .webp";case"all_images":return".jpg, .jpeg, .jfif, .pjpeg, .pjp, .gif, .png, .webp, .avif, .bmp, .apng, .ico";case"edit_type":return A.value;case"all_files":default:return".*"}}async function U(E){const H=String(m.value).toLowerCase().replace(/\s+/g,"");if(H&&m.value!==".*"){const K=H.split(",");E=E.filter(re=>K.includes(re.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),E.length||(await new Promise(re=>{s.error({title:"Images Not Found",positiveText:"OK",onAfterLeave:re,content:()=>Q("div",[Q(cn,{description:"NO IMAGES"}),`${i("noimage")}`,Q("br"),m.value])})}),h())}return E}async function me(E){z.value=!0,E=await U(E),w.value=E.length,E.length>0&&f("input",he(E)),z.value=!1}let Ce=0;function he(E){const H=[];for(const K of E)K.hasOwnProperty("_id")||Object.defineProperty(K,"_id",{value:Ce++}),H.push(K);return H}return(E,H)=>{const K=be,re=Pe,le=Ae,ue=It,se=Ca,Ie=La,V=Ye;return F(),ne(Re,null,[b("div",Js,[b("div",ei,[n(le,{vertical:"",align:"center",justify:"center",inline:"",size:"large"},{default:t(()=>[n(le,{align:"center",justify:"space-around",class:"main-buttons"},{default:t(()=>[n(le,{vertical:"",align:"stretch",justify:"center"},{default:t(()=>[n(e(Se),{to:!1,"display-directive":"show",show:e(a).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(a).LANDSCAPE.value?"right":"top",duration:0,delay:0,"z-index":10},{trigger:t(()=>[n(re,{disabled:!e(k),size:"large",onClick:H[0]||(H[0]=O=>R(e(x))),round:"",style:{width:"100%","background-color":"white","font-size":"1.5em"}},{icon:t(()=>[n(K,{size:"large",color:"gray"},{default:t(()=>[n(e(wn))]),_:1})]),default:t(()=>[C(" "+c(E.$t("loadbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[b("div",{innerHTML:E.$t("loadbuttontooltip")},null,8,ti)]),_:1},8,["show","placement"]),!e(a).IS_SP&&e(q)||e(a).SSR?(F(),ne(Re,{key:0},[n(le,{align:"center",justify:"center",style:{color:"gray",margin:"0em"}},{default:t(()=>[C(c(E.$t("or")),1)]),_:1}),n(e(Se),{to:!1,"display-directive":"show",trigger:"hover",placement:"left","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:e(a).showTooltipsBeforeMounted.value},{trigger:t(()=>[n(re,{disabled:!e(k),size:"large",onClick:H[1]||(H[1]=O=>R(e(M))),round:"",style:{width:"100%","background-color":"white","font-size":"1.5em"}},{icon:t(()=>[n(K,{size:"large",color:"gray"},{default:t(()=>[n(e(Ut))]),_:1})]),default:t(()=>[C(" "+c(E.$t("loadfolderbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[b("div",{innerHTML:E.$t("loadfoldertooltip")},null,8,ni)]),_:1},8,["show"])],64)):we("",!0)]),_:1}),e(a).IS_SP?we("",!0):(F(),ae(Xs,{key:0,onDrop:me,forbidden:!e(k),class:"drop-target"},null,8,["forbidden"]))]),_:1}),n(le,{vertical:""},{default:t(()=>[n(le,{wrap:e(a).IS_SP,align:"center",justify:"stretch"},{default:t(()=>[b("span",oi,c(E.$t("TargetFileTypeExt"))+": ",1),n(e(Se),{"keep-alive-on-hover":!1,placement:"right",style:{"max-width":"200px"},duration:0,delay:0},{trigger:t(()=>[n(ue,{trigger:"click",width:"trigger",size:"small",value:e(I),"onUpdate:value":H[2]||(H[2]=O=>De(I)?I.value=O:null),options:u,"render-option":v,"consistent-menu-width":!1},null,8,["value"])]),default:t(()=>[C(" "+c(X(e(I)).replace(/,/g,", ")),1)]),_:1})]),_:1},8,["wrap"]),e(I)==="edit_type"?(F(),ae(e(Se),{key:0,trigger:"hover","keep-alive-on-hover":!1,placement:"bottom-start",show:e(y),duration:0,delay:0},{trigger:t(()=>[b("div",ai,[n(V,{trigger:"manual",placement:"right-end",show:e(I)==="edit_type"&&e(g)!=="success"&&!!e(y)},{trigger:t(()=>[n(se,{value:e(A),"onUpdate:value":H[3]||(H[3]=O=>De(A)?A.value=O:null),status:e(g),disabled:e(I)!=="edit_type",onFocus:H[4]||(H[4]=O=>y.value=!0),onBlur:H[5]||(H[5]=O=>y.value=void 0),clearable:!0,size:"small",placeholder:".jpg, .gif, .png",spellcheck:"false"},null,8,["value","status","disabled"])]),default:t(()=>[n(Ie,{type:"error","show-icon":!0,title:"Validation error"},{default:t(()=>H[6]||(H[6]=[C(" Please correct the extension list."),b("br",null,null,-1),b("ul",null,[b("li",null,"Each extension must begin with a period. "),b("li",null,"Separate each extension with a comma. "),b("li",null,"Use alphameric characters.")],-1)])),_:1})]),_:1},8,["show"])])]),default:t(()=>[b("span",{innerHTML:E.$t("editAcceptTypes")},null,8,li)]),_:1},8,["show"])):we("",!0)]),_:1})]),_:1})])]),b("input",{ref_key:"fileinput",ref:x,onInput:j,onCancel:h,type:"file",multiple:"",accept:e(m),style:{display:"none"}},null,40,si),b("input",{ref_key:"folderinput",ref:M,webkitdirectory:"",directory:"",onInput:j,onCancel:h,type:"file",style:{display:"none"}},null,544)],64)}}}),ri=Ne(ii,[["__scopeId","data-v-e613e1ac"]]),ui={style:{"white-space":"nowrap"}},di=xe({__name:"settings-output",props:{quality:{},format:{}},emits:["update:format","update:quality"],setup(l,{emit:r}){const s=l,i=r,{t:a}=Ve(),o=Ke(We),u=_([]),v=["image/jpeg","image/png","image/gif","image/bmp","image/avif","image/webp"],p=ze({get:()=>s.format,set:g=>{g=z(g),i("update:format",g)}}),f=ze({get:()=>s.quality,set:g=>{i("update:quality",g)}}),w=ze(()=>/png|bmp/i.test(p.value)),y=_(null);Me(()=>{m()});function z(g){return u.value.indexOf(g)<0&&(g=u.value[0]),g}function m(){for(const g of v)y.value.toDataURL(g).indexOf(g)>=0&&u.value.push(g);u.value.length===0&&u.value.push(v[0])}return(g,k)=>{const I=be,A=It,S=Ae,x=Se,M=Tt,q=yn;return F(),ne(Re,null,[n(S,{justify:"center",class:"body"},{default:t(()=>[n(S,{vertical:""},{default:t(()=>[n(x,{to:!1,"display-directive":"show",show:e(o).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(o).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(S,{align:"center",wrap:!1},{default:t(()=>[n(I,null,{default:t(()=>[n(e(wn))]),_:1}),C(c(e(a)("settings.imageType"))+": ",1),n(A,{value:p.value,"onUpdate:value":k[0]||(k[0]=R=>p.value=R),options:u.value.map(R=>({value:R,label:R})),"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),_:1})]),default:t(()=>[C(" "+c(e(a)("settings.imageTypeTooltip")),1)]),_:1},8,["show","placement"]),n(x,{to:!1,"display-directive":"show",show:e(o).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(o).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(S,{align:"center"},{default:t(()=>[n(S,{align:"start",wrap:!1},{default:t(()=>[n(I,null,{default:t(()=>[n(e(vn))]),_:1}),b("span",ui,c(e(a)("settings.quality"))+":",1),n(S,{align:"center",justify:"space-between"},{default:t(()=>[n(M,{tooltip:!1,value:f.value,"onUpdate:value":k[1]||(k[1]=R=>f.value=R),step:1,style:{width:"120px"},disabled:w.value},null,8,["value","disabled"]),n(q,{onBlur:k[2]||(k[2]=R=>f.value??(f.value=0)),value:f.value,"onUpdate:value":k[3]||(k[3]=R=>f.value=R),step:"1",min:"0",max:"100",disabled:w.value,style:{width:"90px"},size:"small"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:t(()=>[C(" "+c(e(a)("settings.qualitytooltip")),1)]),_:1},8,["show","placement"])]),_:1})]),_:1}),b("canvas",{ref_key:"canvas",ref:y,width:"1",height:"1",style:{display:"none"}},null,512)],64)}}}),ci=Ne(di,[["__scopeId","data-v-060333f5"]]),pi={style:{width:"4em","text-align":"left"}},gi={style:{width:"4em","text-align":"left"}},$t=100,en=2e3,tn=4096,nn=4096,fi=100,mi=100,vi=xe({__name:"settings-adv",props:{expanded:{type:Boolean,required:!1},expandedModifiers:{},multithread:{type:Boolean,required:!0},multithreadModifiers:{},threadCount:{required:!0},threadCountModifiers:{},maxZipSize:{required:!0},maxZipSizeModifiers:{},retainExt:{type:Boolean,required:!0},retainExtModifiers:{},useFolderNameForZip:{type:Boolean,required:!0},useFolderNameForZipModifiers:{},shrinkImage:{type:Boolean,required:!0},shrinkImageModifiers:{},maxWidth:{required:!0},maxWidthModifiers:{},maxHeight:{required:!0},maxHeightModifiers:{}},emits:["update:expanded","update:multithread","update:threadCount","update:maxZipSize","update:retainExt","update:useFolderNameForZip","update:shrinkImage","update:maxWidth","update:maxHeight"],setup(l){const r=Ke(We),s={trigger:"hover",placement:"left",keepAliveOnHover:!1,duration:0,delay:0,style:"max-width: 20vw;"},i=Fe(l,"expanded"),a=Fe(l,"multithread"),o=Fe(l,"threadCount"),u=Fe(l,"maxZipSize"),v=Fe(l,"retainExt"),p=Fe(l,"useFolderNameForZip"),f=Fe(l,"shrinkImage"),w=Fe(l,"maxWidth"),y=Fe(l,"maxHeight");ke(Ue,m=>{m>1||(a.value=!1),o.value>m&&(o.value=m)},{immediate:!0});const z=ze(()=>a.value&&Ue.value>1);return Me(()=>{Ue.value>1&&typeof o.value>"u"&&(o.value=Math.max(Ue.value,2))}),(m,g)=>{const k=be,I=Pe,A=Fa,S=Ae,x=Tt,M=yn,q=ut,R=hn;return F(),ae(S,{justify:"center"},{default:t(()=>[n(R,{"display-directive":"show","default-expanded-names":i.value?["collapitem"]:"","on-update:expanded-names":h=>i.value=!!String(h),"trigger-areas":["arrow","main"],class:nt(["settings-body",i.value?"expand-adv-settings":""])},$a({arrow:t(()=>[n(k,{style:de(i.value&&{top:"8px"})},{default:t(()=>[n(e(Ua))]),_:1},8,["style"]),n(k,null,{default:t(()=>[n(e(Ma))]),_:1})]),default:t(()=>[n(q,{title:m.$t("settings.advancedSettings"),name:"collapitem"},{default:t(()=>[n(S,{vertical:"",style:{"padding-left":"2em"}},{default:t(()=>[n(e(Se),at(lt(s)),{trigger:t(()=>[n(S,{vertical:""},{default:t(()=>[n(S,{wrap:!1,align:"center"},{default:t(()=>[n(I,{text:"",disabled:!e(Ue),style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:g[1]||(g[1]=h=>a.value=!a.value)},{icon:t(()=>[n(k,null,{default:t(()=>[n(e(Ea))]),_:1})]),default:t(()=>[C(" "+c(m.$t("settings.enableMultiThreads")),1)]),_:1},8,["disabled"]),n(A,{value:a.value,"onUpdate:value":g[2]||(g[2]=h=>a.value=h),disabled:!e(Ue),size:"small"},null,8,["value","disabled"])]),_:1}),n(S,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(x,{value:o.value,"onUpdate:value":g[3]||(g[3]=h=>o.value=h),disabled:!e(Ue)||!a.value,step:1,min:2,max:e(Ue),style:{width:"120px"}},null,8,["value","disabled","max"]),n(M,{onBlur:g[4]||(g[4]=h=>o.value??(o.value=2)),size:"tiny",value:o.value,"onUpdate:value":g[5]||(g[5]=h=>o.value=h),disabled:!e(Ue)||!a.value,step:1,min:2,max:e(Ue),style:{width:"10em"}},{suffix:t(()=>[C(c(m.$t("threads",o.value)),1)]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[C(" "+c(m.$t("settings.multiThreadsTooltip")),1)]),_:1},16),n(e(Se),at(lt(s)),{trigger:t(()=>[n(S,{vertical:""},{default:t(()=>[n(S,{wrap:!1,align:"center"},{default:t(()=>[n(I,{text:"",focusable:!1,style:{"white-space":"nowrap","font-size":"smaller"}},{icon:t(()=>[n(k,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Pa))]),_:1})]),default:t(()=>[C(" "+c(m.$t("settings.maxZipFileSize"))+": ",1)]),_:1})]),_:1}),n(S,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(x,{tooltip:!1,value:u.value,"onUpdate:value":g[6]||(g[6]=h=>u.value=h),step:1,min:$t,max:en,style:{width:"120px"}},null,8,["value"]),n(M,{onBlur:g[7]||(g[7]=h=>u.value??(u.value=$t)),size:"tiny",value:u.value,"onUpdate:value":g[8]||(g[8]=h=>u.value=h),step:"1",min:$t,max:en,style:{width:"10em"}},{suffix:t(()=>g[21]||(g[21]=[C("(MB)")])),_:1},8,["value"])]),_:1})]),_:1})]),default:t(()=>[C(" "+c(m.$t("settings.maxZipFileSizeTooltip")),1)]),_:1},16),n(e(Se),at(lt(s)),{trigger:t(()=>[n(S,{wrap:!1,align:"center"},{default:t(()=>[n(I,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:g[9]||(g[9]=h=>p.value=!p.value)},{icon:t(()=>[n(k,null,{default:t(()=>[n(e(Ut))]),_:1})]),default:t(()=>[C(" "+c(m.$t("settings.useFolderNameForZip")),1)]),_:1}),n(A,{value:p.value,"onUpdate:value":g[10]||(g[10]=h=>p.value=h),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[C(" "+c(m.$t("settings.useFolderNameForZipTooltip")),1)]),_:1},16),n(e(Se),at(lt(s)),{trigger:t(()=>[n(S,{wrap:!1,align:"center"},{default:t(()=>[n(I,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:g[11]||(g[11]=h=>v.value=!v.value)},{icon:t(()=>[n(k,null,{default:t(()=>[n(e(mn))]),_:1})]),default:t(()=>[C(" "+c(m.$t("settings.retainOriginalExtension")),1)]),_:1}),n(A,{value:v.value,"onUpdate:value":g[12]||(g[12]=h=>v.value=h),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[C(" "+c(m.$t("settings.retainExtTooltip")),1)]),_:1},16),n(e(Se),at(lt(s)),{trigger:t(()=>[n(S,{vertical:""},{default:t(()=>[n(S,{wrap:!1,align:"center"},{default:t(()=>[n(I,{disabled:!z.value,text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:g[13]||(g[13]=h=>f.value=!f.value)},{icon:t(()=>[n(k,null,{default:t(()=>[n(e(Oa))]),_:1})]),default:t(()=>[C(" "+c(m.$t("settings.shrinkImage")),1)]),_:1},8,["disabled"]),n(A,{disabled:!z.value,value:f.value,"onUpdate:value":g[14]||(g[14]=h=>f.value=h),size:"small"},null,8,["disabled","value"])]),_:1}),n(S,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(x,{value:w.value,"onUpdate:value":g[15]||(g[15]=h=>w.value=h),disabled:!f.value||!z.value,step:1,min:fi,max:tn,style:{width:"120px"}},null,8,["value","disabled"]),n(M,{size:"tiny",onBlur:g[16]||(g[16]=h=>w.value??(w.value=8)),value:w.value,"onUpdate:value":g[17]||(g[17]=h=>w.value=h),disabled:!f.value||!z.value,step:1,min:8,max:tn*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[b("span",pi,c(m.$t("width")),1)]),suffix:t(()=>g[22]||(g[22]=[C("px")])),_:1},8,["value","disabled","max"])]),_:1}),n(S,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(x,{value:y.value,"onUpdate:value":g[18]||(g[18]=h=>y.value=h),disabled:!f.value||!z.value,step:1,min:mi,max:nn,style:{width:"120px"}},null,8,["value","disabled"]),n(M,{size:"tiny",onBlur:g[19]||(g[19]=h=>y.value??(y.value=8)),value:y.value,"onUpdate:value":g[20]||(g[20]=h=>y.value=h),disabled:!f.value||!z.value,step:1,min:8,max:nn*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[b("span",gi,c(m.$t("height")),1)]),suffix:t(()=>g[23]||(g[23]=[C("px")])),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[C(" "+c(m.$t("settings.shrinkImageTooltip")),1)]),_:1},16)]),_:1})]),_:1},8,["title"])]),_:2},[i.value?{name:"header-extra",fn:t(()=>[n(e(Se),{"keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(I,{onClick:e(Qa),size:"tiny",style:{"font-size":"xx-small"}},{default:t(()=>[C(c(m.$t("reset")),1)]),_:1},8,["onClick"])]),default:t(()=>[C(" "+c(m.$t("settings.resetButtonTooltip")),1)]),_:1}),e(r).IS_DEV?(F(),ne("button",{key:0,onClick:g[0]||(g[0]=h=>e(Xa)())},"delcfg")):we("",!0)]),key:"0"}:void 0]),1032,["default-expanded-names","on-update:expanded-names","class"])]),_:1})}}}),hi=Ne(vi,[["__scopeId","data-v-31f045db"]]),_i={},wi={style:{color:"gray","padding-left":"20px"}},yi=["innerHTML"];function bi(l,r){const s=rn,i=Ae;return F(),ae(i,{vertical:"",justify:"end"},{default:t(()=>[n(s,{style:{margin:"0px"}}),n(i,{justify:"center"},{default:t(()=>[b("ul",wi,[(F(!0),ne(Re,null,mt(l.$tm("descriptions"),a=>(F(),ne("li",{key:a,style:{"text-align":"left"},innerHTML:a},null,8,yi))),128))])]),_:1})]),_:1})}const zi=Ne(_i,[["render",bi]]),ki="modulepreload",xi=function(l){return"/avif2jpeg/dist/"+l},on={},Te=function(r,s,i){let a=Promise.resolve();if(s&&s.length>0){let u=function(f){return Promise.all(f.map(w=>Promise.resolve(w).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const v=document.querySelector("meta[property=csp-nonce]"),p=(v==null?void 0:v.nonce)||(v==null?void 0:v.getAttribute("nonce"));a=u(s.map(f=>{if(f=xi(f),f in on)return;on[f]=!0;const w=f.endsWith(".css"),y=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const z=document.createElement("link");if(z.rel=w?"stylesheet":ki,w||(z.as="script"),z.crossOrigin="",z.href=f,p&&z.setAttribute("nonce",p),document.head.appendChild(z),w)return new Promise((m,g)=>{z.addEventListener("load",m),z.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(u){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=u,window.dispatchEvent(v),!v.defaultPrevented)throw u}return a.then(u=>{for(const v of u||[])v.status==="rejected"&&o(v.reason);return r().catch(o)})},$n="English",En="ðŸ‡¬ðŸ‡§",Fn='AVIF to JPEG "Offline" Batch Converter',Pn="It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",On="Drag & Drop AVIF Images to Convert",Un=["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data is sent to any server</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.'],Mn="Select your language",Rn="Choose Target File Extentions",Dn={avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types",edit_type:"Edit File Extension List"},Bn="Input a list of comma separated file extentions to load.<br>e.g.) .jpg,.gif,.png",Nn="Load Images",jn="Select your images from a dialog window.<br>*Multiple selection allowed.",Zn="Load a Whole Folder",Hn=`Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>*It will show "Upload" button, but it actually doesn't upload anything to any server.`,Vn="Converting images",Wn="Aborted",qn="Some files failed to convert",Gn="Completed",Kn="Currently Busy",Yn="No files with the extentions were found.",Qn="Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",Xn="Cancel",Jn="Save",eo="Close",to="Open",no="Re-convert",oo="Convert previous selected {n} @:files again",ao="File | Files",lo="thread | threads",so="You have not saved the converted images yet.",io="Data have not been saved",ro="Open Source",uo="Open the converted image",co="Copied to clipboard",po="The converted image was copied to your clipboard as DataURL.",go="Copy the converted image as DataURL",fo="Convert Again",mo={expandLogTooltip:"Displaying the entire log may severely reduce conversion speed.",showOnlyErrors:"Show only errors",outInRate:"Out / In Ratio",elapsedTime:"Elapsed Time",multiThreading:"Multi-Threading",outputSettings:"Output Settings",totalSize:"Total Size",totalFiles:"Number of Files",confirmDownloadMessage:"It will start to download {0} zip files.",inputSize:"Input Size",outputSize:"Output Size",filterSuccess:"Hide completed item",progressErrors:"Failed items",progressStarted:"Started Items",progressTotal:"Total number of files",zippingProgress:"Zipping progress",zipped:"ZIPPED",openFailedList:"Open failed file list",zipFailedList:"Pack failed files into Zips",table:{index:"index",status:"status",core:"thread",details:"file"},saveFailedList:"Save failed file list",done:"done",convertedZips:"successfully completed ZIP",progressSuccess:"Completed Files",downloadConvertedImage:"Download Converted Image",failureZippingFailedFiles:"Failure while zipping the failed files.",browseConvertedImages:"Browse converted images",index:"Index",Original:"Original",Converted:"Converted",saveAllZipsTooltip:"Save all ZIP files",Shrinked:"Shrinked",Shrinking:"Shrinking",saveAll:"Save All",progressRetries:"Retrying files",success:"success",started:"started",total:"total",files:"files",failure:"failure",all:"all",filterLogSelect:"filter",showOnlySuccess:"Only successes",showOnlyError:"Only errors",showAll:"Show all",Progress:"Progress",PreviewImage:"Preview Images",Log:"Log",log:"Log",Output:"Output Results",expandLog:"expand log size",autoScroll:"auto-scroll",sortByStatus:"status",sort:"Sort list by",sortByName:"name",sortBySize:"size",sortByOutputSize:"size(output)",sortByStart:"starting order",sortByCompletion:"output order"},vo={maxZipFileSize:"Max zip file size",retainExtTooltip:"New extension will be appended to original extension",retainOriginalExtension:"Keep Original File Extension",qualitytooltip:"Set image quality for output",quality:"Image Quality",maxZipFileSizeTooltip:"Set smaller value if memory problems occur.",ignoreExtTooltip:'Try to load files that don"t have image file extension',ignoreFileExtensions:"Load All File Types",imageTypeTooltip:"Choose image format for output",imageType:"Image Type",advancedSettings:"Advanced Settings",enableMultiThreads:"Enable multi-threading",resetButtonTooltip:"Restore all settings to default.",multiThreadsTooltip:"Convert images in multi-threaded",shrinkImageTooltip:"If the image dimensions are larger than the specified value, shrink the image to that value",shrinkImage:"Shrink images that exceed the following dimensions",useFolderNameForZip:"Use dropped folder name for the zip file",useFolderNameForZipTooltip:"If a folder is dropped or selected, its name is used as the name of the output ZIP file"},ho="Disabled",_o="Download",wo="Reset",yo="Back",bo="Failed",zo="Success",ko="Previous version",xo=`
Height`,To="Width",Io="Don't show this message again",So="About the warning when selecting a folder",Ao="OK",Lo={},Co="You must press the â€œUploadâ€ button here to load all the images in the folder, but the data loaded by this application is never actually uploaded to the server.",$o="Continue",Eo="Cancel",Fo="When you select a folder instead of a file as input on a website, major web browsers will display a warning like the image below.",Po="This page may be an outdated version. Please reload the page.",Oo="Reload",Uo='If the conversion process frequently fails and an â€œOut of Memoryâ€ message appears, try reducing or disabling the number of "multi-threads" in the "Advanced Settings".',Mo="Next",Ro="Previous",Do="or",Bo="Target File Extensions",No="Changelog",jo={lang:$n,flags:En,title:Fn,metaDescription:Pn,droptarget:On,descriptions:Un,selectLanguage:Mn,fileTypeRadioTitle:Rn,fileTypeRadioOptions:Dn,editAcceptTypes:Bn,loadbutton:Nn,loadbuttontooltip:jn,loadfolderbutton:Zn,loadfoldertooltip:Hn,processing:Vn,aborted:Wn,incomplete:qn,completed:Gn,interfered:Kn,noimage:Yn,avifUnsupported:Qn,cancel:Xn,save:Jn,close:eo,open:to,reconvert:no,reconvertTip:oo,files:ao,threads:lo,confirmCloseDialog:so,confirmCloseDialogTitle:io,githubOpenSource:ro,convertedImageUrlTooltip:uo,copiedDataURLDialogTitle:co,copiedDataURLMessage:po,convertedImageDataUrlTooltip:go,convertAgain:fo,status:mo,settings:vo,disabled:ho,Download:_o,reset:wo,back:yo,failed:bo,success:zo,previousVersion:ko,height:xo,width:To,checkboxTextDontShowThis:Io,loadfolderNotifyingTitle:So,OK:Ao,loadfolderNotifyingMessage:Lo,loadfolderNotifyingMessageTerm2:Co,Continue:$o,Cancel:Eo,loadfolderNotifyingMessageTerm1:Fo,errMsgWorkerLoadError:Po,Reload:Oo,annotationOutOfMemory:Uo,Next:Mo,Prev:Ro,or:Do,TargetFileTypeExt:Bo,changelog:No},Ti=Object.freeze(Object.defineProperty({__proto__:null,Cancel:Eo,Continue:$o,Download:_o,Next:Mo,OK:Ao,Prev:Ro,Reload:Oo,TargetFileTypeExt:Bo,aborted:Wn,annotationOutOfMemory:Uo,avifUnsupported:Qn,back:yo,cancel:Xn,changelog:No,checkboxTextDontShowThis:Io,close:eo,completed:Gn,confirmCloseDialog:so,confirmCloseDialogTitle:io,convertAgain:fo,convertedImageDataUrlTooltip:go,convertedImageUrlTooltip:uo,copiedDataURLDialogTitle:co,copiedDataURLMessage:po,default:jo,descriptions:Un,disabled:ho,droptarget:On,editAcceptTypes:Bn,errMsgWorkerLoadError:Po,failed:bo,fileTypeRadioOptions:Dn,fileTypeRadioTitle:Rn,files:ao,flags:En,githubOpenSource:ro,height:xo,incomplete:qn,interfered:Kn,lang:$n,loadbutton:Nn,loadbuttontooltip:jn,loadfolderNotifyingMessage:Lo,loadfolderNotifyingMessageTerm1:Fo,loadfolderNotifyingMessageTerm2:Co,loadfolderNotifyingTitle:So,loadfolderbutton:Zn,loadfoldertooltip:Hn,metaDescription:Pn,noimage:Yn,open:to,or:Do,previousVersion:ko,processing:Vn,reconvert:no,reconvertTip:oo,reset:wo,save:Jn,selectLanguage:Mn,settings:vo,status:mo,success:zo,threads:lo,title:Fn,width:To},Symbol.toStringTag,{value:"Module"})),Ii="Arabic",Si="German",Ai="English",Li="Spanish",Ci="Finnish",$i="French",Ei="Hindi",Fi="Indonesian",Pi="Italian",Oi="Japanese",Ui="Korean",Mi="Dutch",Ri="Polish",Di="Portuguese",Bi="Russian",Ni="Turkish",ji="Ukrainian",Zi="Chinese",Hi={ar:Ii,de:Si,en:Ai,es:Li,fi:Ci,fr:$i,hi:Ei,id:Fi,it:Pi,ja:Oi,ko:Ui,nl:Mi,pl:Ri,pt:Di,ru:Bi,tr:Ni,uk:ji,"zh-hant":"Chinese(hant)",zh:Zi},yt=[],Zo={en:jo},Dt={},an=Object.assign({"./locales/ar.json":()=>Te(()=>import("./ar-Bs-dVZYB.js"),[]),"./locales/de.json":()=>Te(()=>import("./de-BQPc6VLI.js"),[]),"./locales/en.json":()=>Te(()=>Promise.resolve().then(()=>Ti),void 0),"./locales/es.json":()=>Te(()=>import("./es-CqBg_y9a.js"),[]),"./locales/fi.json":()=>Te(()=>import("./fi-Ds7g1iCb.js"),[]),"./locales/fr.json":()=>Te(()=>import("./fr-D8EtgegO.js"),[]),"./locales/hi.json":()=>Te(()=>import("./hi-Ezqk50Rr.js"),[]),"./locales/id.json":()=>Te(()=>import("./id-BsMMe9nO.js"),[]),"./locales/it.json":()=>Te(()=>import("./it-BdKCrqWM.js"),[]),"./locales/ja.json":()=>Te(()=>import("./ja-C5lmyrcu.js"),[]),"./locales/ko.json":()=>Te(()=>import("./ko-CNwBvC5L.js"),[]),"./locales/nl.json":()=>Te(()=>import("./nl-C-Lgg7BA.js"),[]),"./locales/pl.json":()=>Te(()=>import("./pl-OSkpSBPS.js"),[]),"./locales/pt.json":()=>Te(()=>import("./pt-BO4nYfyj.js"),[]),"./locales/ru.json":()=>Te(()=>import("./ru-DEYnX-lF.js"),[]),"./locales/tr.json":()=>Te(()=>import("./tr-XAfWKbVj.js"),[]),"./locales/uk.json":()=>Te(()=>import("./uk-f9rkog-K.js"),[]),"./locales/zh-hant.json":()=>Te(()=>import("./zh-hant-eBVV34fF.js"),[]),"./locales/zh.json":()=>Te(()=>import("./zh-k4YjZC5w.js"),[])});var ln;for(const l in an){const r=(ln=l.match(/\/([a-z]{2}(?:-[a-z]+)?)\.json$/i))==null?void 0:ln[1];r&&(yt.push(r),!(r in Zo)&&(Dt[r]=an[l]))}let Pt=Wi();Pt in Dt||(Pt="en");const bt=Ra({legacy:!1,globalInjection:!0,locale:Pt,fallbackLocale:"en",messages:Zo,warnHtmlMessage:!1,missingWarn:!1,fallbackWarn:!1});async function Vi(l){if(bt.global.availableLocales.indexOf(l)>=0)return;const r=await Dt[l]();bt.global.setLocaleMessage(l,r),await Le()}function Wi(){const l=location.pathname;return String(l.match(/[^/]+(?=\/?$)/)||"").toLowerCase()}const qi=["innerHTML"],Gi=xe({__name:"switch-lang",props:{delay:{}},emits:["lang-ready","lang-change"],async setup(l,{emit:r}){let s,i;const a=Ke(We),o=un(),{locale:u,t:v}=Ve(),p=l,f=r,w=Object.entries(Hi).map(([I,A])=>({label:A,value:I}));w.sort((I,A)=>{const S=I.label,x=A.label;return S>x?1:S<x?-1:0}),Me(()=>{o.afterEach((I,A,S)=>{z(),a.switchToolTipVisibility()})}),[s,i]=Da(()=>z()),await s,i();async function y(I){(I!==u.value||bt.global.availableLocales.indexOf(I)===-1)&&(f("lang-change",I),await El(p.delay),await Vi(I),u.value=I,document.title=v("title"),await Le()),f("lang-ready",I)}async function z(){const I=o.currentRoute.value.path||"",A=String(I.match(new RegExp("(?<=^\\/)[^/]+"))||"");A&&yt.includes(A)?(await y(A),u.value=A):await m()}async function m(){const I=g().toLowerCase(),A=I.split(/[-_]/)[0];if(yt.includes(A)){let S=A;if(A==="zh")switch(I){case"zh-hant":case"zh-mo":case"zh-hk":case"zh-tw":S="zh-hant"}await y(S)}}function g(){const I=window.navigator;return I.language||I.userLanguage||I.browserLanguage}function k(I){console.log(`changeRoute: ${o.currentRoute.value.fullPath} => ${I}`),o.push("/"+I+"/")}return(I,A)=>{const S=be,x=It,M=Se;return F(),ae(M,{to:!1,"display-directive":"show",show:e(a).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(a).LANDSCAPE.value?"left":"bottom",duration:0,delay:50},{trigger:t(()=>[n(x,{ref:"langselect",size:"tiny",style:{width:"auto"},"consistent-menu-width":!1,options:e(w),"_v-model:value":"locale",value:e(u),"onUpdate:value":k},{arrow:t(()=>[n(S,null,{default:t(()=>[n(e(Ba))]),_:1})]),_:1},8,["options","value"])]),default:t(()=>[b("div",{innerHTML:I.$t("selectLanguage")},null,8,qi)]),_:1},8,["show","placement"])}}}),We=Symbol("global variables"),Ki=xe({__name:"Avif2Jpeg",emits:["ready"],setup(l,{emit:r}){const{t:s,locale:i}=Ve(),a=200,o=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),u=!1,v=_(null);_(0);let p=_(void 0);const f=_(!0),w=_(!1),y=_(!1),z=_(!1),m=_(!0),g=_(!1);Za(We,{showTooltipsBeforeMounted:p,LANDSCAPE:f,IS_SP:o,IS_DEV:u,switchToolTipVisibility:S,SSR:!1}),Me(()=>{x(),window.addEventListener("resize",x),S(),setTimeout(()=>y.value=!0,3e3)}),ft(()=>{window.removeEventListener("resize",x)});let k=0;function I(){z.value=!1,k=Date.now()}function A(){const R=m.value?0:Math.max(0,a-(Date.now()-k));m.value=!1,Le(()=>{setTimeout(()=>z.value=!0,R)})}async function S(){}function x(){const R=document.body.clientWidth,h=document.body.clientHeight;f.value=R*.75>h||R>900}function M(R){v.value=R}function q(R){g.value=R}return(R,h)=>{const j=Ae,D=be,X=Ye;return F(),ae(j,{vertical:"",align:"stretch",class:"avif2jpeg"},{default:t(()=>[n(dl,null,{"lang-switch":t(()=>[(F(),ae(Na,null,{default:t(()=>[n(Gi,{onLangChange:I,onLangReady:A,delay:e(m)?0:a},null,8,["delay"])]),_:1}))]),_:1}),n(Qe,{name:"fade"},{default:t(()=>[je(n(j,{vertical:"",align:"stretch",justify:"space-between",style:{height:"100%"}},{default:t(()=>[n(j,{justify:"space-around",vertical:"",style:{height:"100%"}},{default:t(()=>[n(pl),n(j,{justify:"center"},{default:t(()=>[n(ri,{"_v-model_expanded":"UserSettings.expandExtButtons",target:e(N).acceptTypeValue,"onUpdate:target":h[0]||(h[0]=U=>e(N).acceptTypeValue=U),userExtensions:e(N).editedAcceptTypes,"onUpdate:userExtensions":h[1]||(h[1]=U=>e(N).editedAcceptTypes=U),"disable-notifying-folder-select":e(N).disableNotifyingFolderSelect,"onUpdate:disableNotifyingFolderSelect":h[2]||(h[2]=U=>e(N).disableNotifyingFolderSelect=U),forbidden:e(w),onInput:M,onClick:h[3]||(h[3]=U=>q(!0)),onCancel:h[4]||(h[4]=U=>q(!1))},null,8,["target","userExtensions","disable-notifying-folder-select","forbidden"])]),_:1}),n(Zs,{input:e(v),format:e(N).imageFormat,quality:e(N).imageQuality,"retain-extension":e(N).retainExtension,maxZipSizeMB:e(N).maxZipSizeMB,threads:e(N).multithread?e(N).threadCount:0,"show-note":e(g),"onUpdate:showNote":h[5]||(h[5]=U=>De(g)?g.value=U:null),onStart:h[6]||(h[6]=U=>w.value=!0),onEnd:h[7]||(h[7]=U=>w.value=!1)},{"lang-switch":t(()=>h[18]||(h[18]=[])),_:1},8,["input","format","quality","retain-extension","maxZipSizeMB","threads","show-note"]),n(j,{vertical:"",align:"center"},{default:t(()=>[n(X,{trigger:"manual",placement:"top","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(D,{size:"5vh",color:"#DADADA",style:{margin:"0px"}},{default:t(()=>[n(e(ja))]),_:1})]),default:t(()=>[h[19]||(h[19]=b("span",null,"CONVERT TOðŸ‘‡",-1))]),_:1})]),_:1}),n(j,{vertical:"",align:"center"},{default:t(()=>[n(ci,{format:e(N).imageFormat,"onUpdate:format":h[8]||(h[8]=U=>e(N).imageFormat=U),quality:e(N).imageQuality,"onUpdate:quality":h[9]||(h[9]=U=>e(N).imageQuality=U)},null,8,["format","quality"]),n(hi,{"retain-ext":e(N).retainExtension,"onUpdate:retainExt":h[10]||(h[10]=U=>e(N).retainExtension=U),"use-folder-name-for-zip":e(N).useFolderNameForZip,"onUpdate:useFolderNameForZip":h[11]||(h[11]=U=>e(N).useFolderNameForZip=U),"max-zip-size":e(N).maxZipSizeMB,"onUpdate:maxZipSize":h[12]||(h[12]=U=>e(N).maxZipSizeMB=U),"_v-model:expanded":"UserSettings.expandAdvSettings",multithread:e(N).multithread,"onUpdate:multithread":h[13]||(h[13]=U=>e(N).multithread=U),"thread-count":e(N).threadCount,"onUpdate:threadCount":h[14]||(h[14]=U=>e(N).threadCount=U),"_:thread-max":"availableThreadCount","shrink-image":e(N).shrinkImage,"onUpdate:shrinkImage":h[15]||(h[15]=U=>e(N).shrinkImage=U),"max-width":e(N).maxWidth,"onUpdate:maxWidth":h[16]||(h[16]=U=>e(N).maxWidth=U),"max-height":e(N).maxHeight,"onUpdate:maxHeight":h[17]||(h[17]=U=>e(N).maxHeight=U)},null,8,["retain-ext","use-folder-name-for-zip","max-zip-size","multithread","thread-count","shrink-image","max-width","max-height"])]),_:1}),n(zi)]),_:1})]),_:1},512),[[Ze,e(z)]])]),_:1})]),_:1})}}}),Bt=xe({__name:"App",setup(l){const r={Statistic:{valueFontSize:"1em"},Popover:{borderRadius:"0.4em",boxShadow:"2px 2px 5px 0px #555555"},Tooltip:{},Image:{toolbarColor:"#00000099"}},s=_(!0);return Me(()=>{s.value=!1}),(i,a)=>{const o=qa,u=Wa,v=Va,p=Ha,f=Ga;return F(),ae(f,{"theme-overrides":r,style:{width:"100%",height:"100%"}},{default:t(()=>[n(p,null,{default:t(()=>[n(v,{placement:"top-left",closable:!0,max:50},{default:t(()=>[n(u,null,{default:t(()=>[n(o,null,{default:t(()=>[n(Ki,{class:nt({hide:e(s)})},null,8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),Ho=[{path:"/",name:"Home",component:Bt}];for(const l of yt)Ho.push({path:"/"+l+"/",strict:!0,name:l,component:Bt});Ka(Bt,{routes:Ho,base:"/avif2jpeg/dist/"},({app:l,router:r,routes:s,isClient:i,initialState:a})=>{l.use(bt)});
