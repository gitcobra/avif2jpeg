var to=Object.defineProperty;var no=(o,u,g)=>u in o?to(o,u,{enumerable:!0,configurable:!0,writable:!0,value:g}):o[u]=g;var Ne=(o,u,g)=>no(o,typeof u!="symbol"?u+"":u,g);import{r as wt,d as xe,i as Ye,o as F,c as q,w as t,a as n,u as e,b as S,t as d,N as be,_ as pn,e as Ie,L as ao,f as k,g as oe,h as w,F as Te,j as Ge,B as we,k as Ot,l as K,m as oo,n as lo,p as $e,q as Ut,s as fn,v as ke,x as io,y as ze,z as Tt,A as St,C as Nt,D as Dt,E as De,G as Ct,H as Lt,I as pe,T as je,J as Ze,K as gn,M as Xe,O as Ke,P as bt,Q as mn,R as Ee,S as vn,U as rt,V as He,W as fe,X as hn,Y as so,Z as ro,$ as Rt,a0 as Qt,a1 as uo,a2 as _n,a3 as ct,a4 as jt,a5 as co,a6 as po,a7 as fo,a8 as go,a9 as mo,aa as yn,ab as vo,ac as wn,ad as zt,ae as Pe,af as ho,ag as _o,ah as yo,ai as wo,aj as bn,ak as kn,al as Bt,am as Zt,an as bo,ao as xn,ap as ko,aq as xo,ar as ut,as as zo,at as Ao,au as Ce,av as Io,aw as To,ax as Wt,ay as So,az as Co,aA as Lo,aB as zn,aC as $o,aD as Eo,aE as An,aF as In,aG as nt,aH as at,aI as Fo,aJ as Mo,aK as Po,aL as Oo,aM as Uo,aN as No,aO as Do,aP as Ro,aQ as jo,aR as Bo,aS as Zo,aT as Wo,aU as Ho,aV as Vo,aW as qo,aX as Go,aY as Ko,aZ as Qo,a_ as Yo}from"./vendor-C-C92SCQ.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function g(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(l){if(l.ep)return;l.ep=!0;const s=g(l);fetch(l.href,s)}})();const Xo={imageFormat:"image/jpeg",imageQuality:90,expandExtButtons:!1,acceptTypeValue:void 0,editedAcceptTypes:"",expandAdvSettings:!1,retainExtension:!1,maxZipSizeMB:1e3,useFolderNameForZip:!1,multithread:!0,threadCount:void 0,shrinkImage:!1,maxWidth:4096,maxHeight:4096,disableNotifyingFolderSelect:!1},ot={threadCount:{min:2,max:16}},N=wt(Tn({}));function Jo(){Tn(N)}function Tn(o){return Object.assign(o,Xo)}const Sn="avif2jpeg",At=JSON.parse(localStorage.getItem(Sn)||"{}");for(const o in N)if(At.hasOwnProperty(o)&&At[o]!==void 0){let u=At[o];ot.hasOwnProperty(o)&&(ot[o].min>u&&(u=ot[o].min),ot[o].max<u&&(u=ot[o].max)),N[o]=u}window.addEventListener("unload",()=>{const o={};for(const u in N)o[u]=N[u];localStorage.setItem(Sn,JSON.stringify(o))});const el=xe({__name:"github",setup(o){const u=Ye(Ve);return(g,a)=>{const l=be,s=pn,i=Ie;return F(),q(i,{to:!1,"display-directive":"show",show:e(u).showTooltipsBeforeMounted.value,trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(s,{href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-size":"small","font-weight":"bolder"}},{default:t(()=>[n(l,null,{default:t(()=>[n(e(ao))]),_:1}),S("GitHub")]),_:1})]),default:t(()=>[S(" "+d(g.$t("githubOpenSource")),1)]),_:1},8,["show"])}}}),tl=w("h3",null,"Used Framework and Libraries",-1),nl=["href"],al=xe({__name:"licenses",setup(o){const u=k(!1),g={Vue:"https://github.com/vuejs/core/blob/main/LICENSE",Vite:"https://github.com/vitejs/vite/blob/main/LICENSE","Vite SSG":"https://github.com/antfu/vite-ssg/blob/main/LICENSE","Naive UI":"https://github.com/TuSimple/naive-ui/blob/main/LICENSE",Ionicons:"https://github.com/ionic-team/ionicons/blob/main/LICENSE"};return(a,l)=>{const s=we;return F(),oe(Te,null,[n(s,{text:"",onClick:l[0]||(l[0]=i=>u.value=!0),style:{color:"black","font-size":"small"}},{default:t(()=>[S("Licenses")]),_:1}),n(e(Ot),{preset:"dialog",ref:"dialog",show:u.value,"onUpdate:show":l[1]||(l[1]=i=>u.value=i),"positive-text":"OK",title:"Licenses"},{default:t(()=>[tl,w("ul",null,[(F(),oe(Te,null,Ge(g,(i,p)=>w("li",null,[w("a",{href:i},d(p),9,nl)])),64))])]),_:1},8,["show"])],64)}}}),ol=1,ll=8,il=3,sl="",gt={major:ol,minor:ll,build:il,tag:sl},rl={style:{"font-size":"x-small","user-select":"none"}},ul=xe({__name:"version",setup(o){const u=["0.0.118"],g=`${gt.major}.${gt.minor}.${gt.build}${gt.tag}`,a=u.map(p=>({label:`v${p}`,key:p,value:p}));function l(p){const{key:z,label:_}=p,A=i(z),r=K("a",{href:A},_),T=K("div",null,r);return K("div",null,T)}function s(p){location.href=i(p)}function i(p){return`/avif2jpeg/old/${p}/`}return(p,z)=>{const _=oo;return F(),q(_,{"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start",options:e(a),"render-label":l,"onUpdate:value":s},{header:t(()=>[w("span",rl,d(p.$t("previousVersion")),1)]),default:t(()=>[w("span",{style:{cursor:"pointer"}},"v"+d(g))]),_:1},8,["options"])}}}),dl=xe({__name:"header",setup(o){return(u,g)=>{const a=$e,l=Ut;return F(),q(a,{vertical:"",justify:"start"},{default:t(()=>[n(a,{justify:"space-between",style:{"box-sizing":"border-box",padding:"4px",margin:"0px"}},{default:t(()=>[n(a,{align:"start"},{default:t(()=>[n(el),n(ul),n(a,{align:"center"},{default:t(()=>[n(al)]),_:1})]),_:1}),n(a,{align:"end",style:{"font-size":"x-small"}},{default:t(()=>[lo(u.$slots,"lang-switch")]),_:3})]),_:3}),n(l,{style:{margin:"0px"}})]),_:3})}}}),cl={style:{padding:"0px",margin:"0px","text-align":"center"}},pl={key:0},fl=xe({__name:"title",setup(o){const u=fn(),g=ke(()=>{const a=u.currentRoute.value.path||"";return!String(a.match(new RegExp("(?<=^\\/)[^/]+"))||"")});return(a,l)=>{const s=pn,i=io("router-link"),p=$e;return F(),q(p,{align:"center",justify:"center",style:{margin:"0px"}},{default:t(()=>[w("h1",cl,[e(g)?(F(),oe("span",pl,d(a.$t("title")),1)):(F(),q(i,{key:1,to:"../",custom:""},{default:t(({navigate:z,href:_})=>[n(s,{href:_,onClick:z,style:{color:"black","word-break":"keep-all","overflow-wrap":"break-word"}},{default:t(()=>[S(d(a.$t("title")),1)]),_:2},1032,["href","onClick"])]),_:1}))])]),_:1})}}});function gl(o){return new Worker("/avif2jpeg/dist/assets/worker.canvas-geeReHlU.js",{name:o==null?void 0:o.name})}let Cn=0;class ml extends gl{constructor(g){super();Ne(this,"id",Cn++);Ne(this,"priority");this.priority=g||!1}release(){pt(this)}}class vl extends Promise{constructor(){super(...arguments);Ne(this,"wid",-1)}}const $t=new Set,Qe=new Set,We=new Set,dt=new Map,Ln=[];function hl(o){const u=new ml;return $t.add(u),$n(u,o),pt(u),o&&Ln.push(u.id),u}function $n(o,u){const g=u?We:Qe,a=new vl(l=>{dt.set(o,()=>l([o,a,!!u]))});a.wid=o.id,g.add(a)}async function _l(o){let u;if(!o)u=new Set([...We,...Qe]);else if(typeof o=="number"){const s=Ln.slice(0,o);u=new Set([...We].filter(i=>s.includes(i.wid)))}else u=o?We:Qe;const[g,a,l]=await Promise.any(u);return(l?We:Qe).delete(a),$n(g,l),g}function pt(o){const u=dt.get(o);u&&(dt.delete(o),u())}function En(){for(const o of dt.keys())pt(o)}async function Yt(){return await Promise.all([...Qe,...We])}function Et(){En();for(const o of $t)o.terminate();$t.clear(),Qe.clear(),We.clear(),dt.clear(),Cn=0}function yl(o){return new Worker("/avif2jpeg/dist/assets/worker.zip-D4CHLUmx.js",{name:o==null?void 0:o.name})}const wl=1e3*10,bl=1,Ht=2e3*2e3*4,kl=5,xl=3,zl=Ht*1,Xt=Ht*8,Al=300,mt=new Map,Ft=new Map;let lt=0;const it=new Map,vt=new Map,ht=new Map;let Mt,J,Fe,st,Me,Jt,en,Fn,Mn,tn,nn;async function Il(o){({files:Me,completedFileIdSet:Mt,ConvStats:J,canceled:Fe,props:st,format:Jt,quality:en,outputExt:Fn,imageType:Mn,message:tn,notification:nn}=o),it.clear(),vt.clear(),ht.clear(),Mt.clear();const u=Math.min(st.threads-1,Me.length),g=Math.min(kl,u),a=Cl(J,Fe,tn,nn,Me);let l;try{l=await Tl(u,g,a)}catch{return{exception:new Error("worker-load-error"),callbackToClearConverter:new Function,callbackToGenerateFailedZips:new Function}}const s=Sl(l),i=ze(Fe,h=>{h&&(i(),En())});J.demandImage=h=>{l.postMessage({action:"request-image",index:h})};const z=Me.length===1;let _=0,A=0,r="",T=0,y=0;for(lt=0,mt.clear();T<Me.length&&!Fe.value;){if(lt>Xt){await new Promise(C=>setTimeout(C,100));continue}const h=[],U=[];let D=!1;const Z=Me.length-T,v=Math.min(T+Math.max(Math.min(xl,Z/st.threads|0),1),Me.length);let M=0;const ee=[],te=[];let se=!1;for(;T<v&&!(M>zl||lt>Xt);T++){const C=Me[T],B=Ft.get(C);se=se||!!B;const Q=B?Math.max(0,100-(Date.now()-(y||B))):0;Q&&await new Promise(I=>setTimeout(I,Q)),se&&(y=Date.now());const re=C._id;M+=C.size,D=T===Me.length-1,it.has(re)||it.set(re,C);const H={data:{action:"file-start",path:C.webkitRelativePath||C.name,fileId:re,index:T}};ee.push(H);let le;try{le=await createImageBitmap(C)}catch{const x={data:{action:"file-error",path:C.webkitRelativePath||C.name,fileId:re,index:T}};te.push(x);continue}U.push(le);const ce=le.width*le.height*4;M+=ce+C.size,lt+=ce+C.size;let he=!1;const ue=Date.now();ue-A>Al&&(A=ue,he=!0),h.push({index:T,bitmap:le,file:C,fileId:re,outputPath:r,type:Jt,quality:en/100,demandThumbnail:he||D,isSingleImage:z,maxSize:N.shrinkImage?{width:N.maxWidth,height:N.maxHeight}:null,retriedTime:Ft.get(C)||0,webkitRelativePath:C.webkitRelativePath}),C.webkitRelativePath||C.name,vt.has(C)||(_++,J.index=_),he=!1}let E;if(h.length){const C=M>Ht;E=await _l(g>0&&(se?1:C)),mt.set(E,M)}if(Fe.value){pt(E);break}for(const C of ee.concat(te))C.target=E||{id:-1},a(C);if(E&&(E.postMessage(h,U),U.length=0),D&&(await Yt(),Fe.value))break}if(await Yt(),!Fe.value){let h;await new Promise(U=>{h=ze([()=>J.done,Fe],()=>{(J.done>=_||Fe.value)&&U(void 0)},{immediate:!0})}),h()}i(),setTimeout(()=>Et(),500),l.postMessage({action:"squeeze"}),await s;const f={value:!1},m=()=>{f.value=!0,Et(),l.terminate()};let b=!1;return{callbackToClearConverter:m,callbackToGenerateFailedZips:async h=>{b||(b=!0,await Ll(h,l,f,J))}}}async function Tl(o,u,g){Et();const a=new yl;a.postMessage({action:"set-config",zipSize:st.maxZipSizeMB*1024*1024,keepExt:st.retainExtension,outputExt:Fn,imageType:Mn});let l;for(let i=0;i<o;i++){const p=hl(u>i);l??(l=p),p.onmessage=g;const{port1:z,port2:_}=new MessageChannel;a.postMessage({action:"set-port"},[z]),p.postMessage({},[_])}return await new Promise((i,p)=>{const z=y=>{a.removeEventListener("message",r),l.removeEventListener("message",r),clearTimeout(T),y?i(y):p(y)};let _=!1,A=!1;const r=y=>{y.target===a&&(_=!0),y.target===l&&(A=!0),_&&A&&z(!0)};let T=0;a.addEventListener("message",r),l.addEventListener("message",r),T=window.setTimeout(()=>z(!1),wl)}),a}function Sl(o){return new Promise(g=>{o.onmessage=a=>{var _;const l=a.data,{action:s}=l;if(s==="add-zip-completed"){const{fileId:A}=l;J.done++,J.success++,Mt.add(A);return}if(s==="respond-image"){const{url:A,index:r,path:T,size:y,fileId:f}=l;J.convertedImageUrl=A,J.convertedImageSize=y,J.convertedImageIndex=r,J.convertedImageName=T,J.convertedImageFileId=f;let m="",b=0,L="";if(f>=0){const h=it.get(f);m=URL.createObjectURL(h),b=h.size,L=h.name}J.convertedImageOrgUrl=m,J.convertedImageOrgSize=b,J.convertedImageOrgName=L,J.convertedImageShrinked=(_=ht.get(f))==null?void 0:_.shrinked;return}const{size:i,count:p}=l,z="url"in a.data?a.data.url:"";switch(s){case"push-zip":J.zips.push({url:z,size:i,count:p}),J.zippedTotalCount+=p,J.zippedTotalSize+=i;break;case"squeeze-zip":p>0&&(J.zips.push({url:z,size:i,count:p}),J.zippedTotalCount+=p,J.zippedTotalSize+=i),g(void 0);break;case"push-filelist":J.failedFileZippedCount++;break;case"squeeze-filelist-zip":J.failedZipDone=!0;case"push-filelist-zip":J.failedZips.push({url:z,size:i,count:p});break;case"zip-error":case"zip-squeeze-error":J.zippingErrorCount+=p,s==="zip-squeeze-error"&&g(void 0);break}}})}function Cl(o,u,g,a,l){let s=0;const i=k(new Map),p=k(new Map);return _=>{const A=_.target,{data:r}=_,{action:T}=r;if(u.value)switch(T){case"file-canceled":o.done++;return}switch(T){case"list-start":break;case"file-start":{const{index:y,path:f,fileId:m}=r,b={key:s++,core:A.id,index:y,path:f,command:"➡️started"};i.value.set(m,b),o.logs.push(b);break}case"file-load":{const{thumbnail:y,width:f,height:m,fileId:b,shrinked:L}=r;i.value.get(b).command="🖼️loaded",y&&(o.thumbnail=y);let h=ht.get(b);h||(h={},ht.set(b,h)),h.shrinked??(h.shrinked=L);break}case"file-converted":{const{index:y,path:f,fileId:m}=r,b=i.value.get(m);b.command="🔃converted",p.value.set(m,b),o.converted++;break}case"file-completed":{const{inputsize:y,outputsize:f,fileId:m}=r;o.inputTotalSize+=y,o.outputTotalSize+=f;const b=p.value.get(m);b&&(b.command="✅completed",b.completed=!0);break}case"file-error":{const{index:y,path:f,fileId:m}=r,b=it.get(m);if(!b)throw new Error(`the file doesn't exist in the Map. "${m}":"${f}"`);const L=vt.get(b)||0,h=i.value.get(m);L<bl?(vt.set(b,L+1),l.push(b),Ft.set(b,Date.now()),h.command="⚠️retrying",h.error=!0,g.warning(`retrying "${f}"`,{duration:3e3})):(o.done++,o.failure++,h.command="❗failed",h.error=!0,a.error({content:`failed to load "${f}"`,duration:5e3}));break}case"file-canceled":{const{fileId:y,path:f}=r,m=p.value.get(y);o.done++,o.failure++,m.command="❗zip-aborted",m.error=!0;break}case"list-end":{pt(A),lt-=mt.get(A)||0,mt.delete(A);break}}}}async function Ll(o,u,g,a){let l=0;for(const s of o){const i=(s.webkitRelativePath||s.name).replace(/^\//,"");if(g.value)return;l-a.failedFileZippedCount>20&&await new Promise(p=>setTimeout(p,10)),u.postMessage({action:"add-filelist",file:s,path:i}),l++}u.postMessage({action:"squeeze-filelist"})}function Be(o,u=2){const g=Math.sign(o);o=Math.abs(o);const a=["Bytes","KB","MB","GB"],l=o?Math.floor(Math.log(o)/Math.log(1024)):0;return`${(o/Math.pow(1024,l)*g).toFixed(u)}${a[l]}`}function Pn(o,u=100,g=!1){u=typeof u=="number"?{width:u,height:u}:u;const{width:a,height:l}=u;let{width:s,height:i}=o;const p=s/i,z=a/l;return p>=z?(s=g?Math.min(a,s):a,i=s/p|0):(i=g?Math.min(l,i):l,s=i*p|0),{width:s,height:i}}class $l{constructor(){Ne(this,"_currentFileCount",0);Ne(this,"_totalFileCount",0);Ne(this,"_zipLengthSumList",[]);Ne(this,"_pathBank",{})}increase(u){u&&(this._pathBank[u]=[this._zipLengthSumList.length,this._currentFileCount]),this._currentFileCount++,this._totalFileCount++}split(){this._zipLengthSumList.push(this._totalFileCount),this._currentFileCount=0}get(u){if(typeof u=="number"){let g=this._zipLengthSumList.findIndex((s,i)=>u<s);g===-1&&(g=this._zipLengthSumList.length);const a=this._zipLengthSumList[g-1]||0,l=u-a;return[g,l]}else{const g=this._pathBank[String(u)];if(g)return g}return null}}async function El(o,u,g,a,l,s){let i="";const p=document.createElement("canvas"),z=p.getContext("2d");let _=new Tt;const A=[_],r=new $l,T=a.format,y=a.quality/100,f=[...T.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),m=o.length,b=a.maxZipSizeMB*1024*1024;let L=0,h=null,U="",D="",Z=0,v=0,M=0,ee=0,te=0,se=!1;const E=[];s.demandImage=H=>{const[le,ce]=r.get(H),he=A[le];s.convertedImageIndex=H,s.convertedImageName=he.getPathByIndex(ce),s.convertedImageUrl=URL.createObjectURL(new Blob([he.get(ce)],{type:T}));let ue="",I=0,x="";const W=E[H];ue=URL.createObjectURL(W),I=W.size,x=W.name,s.convertedImageOrgUrl=ue,s.convertedImageOrgSize=I,s.convertedImageOrgName=x};for(const H of o){if(l.value)break;const le=H.name;let ce="";const he=H.size,ue=(H.webkitRelativePath||H.relativePath||le).replace(/^\//,""),I=document.createElement("img");L++;const x={key:M++,core:-1,index:L,path:ue,command:"➡️start"};s.index=L,s.logs.push(x),s.logs.length-1,i&&(URL.revokeObjectURL(i),i=""),i=URL.createObjectURL(H),D=i,Z=H.size,I.src=i;const W=await On(I).then(()=>!0).catch(()=>!1);if(!I.complete||!W||l.value){s.done++,s.failure++,x.command="❗failed";continue}const P=I.width,O=I.height;p.width=P,p.height=O,z.drawImage(I,0,0,P,O,0,0,P,O),x.command="🖼️imgload",s.thumbnail=I;const $=await new Promise(G=>{const ie=de=>{h=de,G(de)};p.toBlob(ie,T,y)});if(l.value)break;if(!$){s.failure++;continue}v=$.size,s.converted++;let X="";if(te+v>=b){try{await _.wait(),X=_.url()}catch{se=!0,alert("memory problem occurred");break}s.zips.push({url:X,size:te,count:ee}),s.zippedTotalCount+=ee,s.zippedTotalSize+=te,te=0,ee=0,r.split(),_=new Tt,A.push(_)}te+=v;const Y=ue||le;for(let G=1;G<255&&(ce=Y.replace(a.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+(G>1?`(${G})`:"")+"."+f,!!_.has(ce));G++);s.done++;try{ee++,_.add(ce,$),r.increase(),E.push(H),s.inputTotalSize+=he,s.outputTotalSize+=v}catch{continue}U=ce,s.success++,x.command="✅completed",x.completed=!0,u.add(H._id)}if(s.success>0)if(m===1)h&&(s.convertedImageIndex=0,s.convertedImageName=U.replace(/^.*\/(?=[^/]+$)/,"").replace(a.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+f,s.convertedImageUrl=URL.createObjectURL(h),s.convertedImageOrgUrl=D,s.convertedImageOrgSize=Z);else try{if(se)throw new Error("terminated zipping process for memory problems");await _.wait();const H=_.url();s.zips.push({url:H,count:ee,size:te}),s.zippedTotalCount+=ee,s.zippedTotalSize+=te}catch{}const C={value:!1},B=()=>{C.value=!0,A.forEach(H=>H.clear()),A.length=0,E.length=0};let Q=!1;return{callbackToClearConverter:B,callbackToGenerateFailedZips:async H=>{Q||(Q=!0,Fl(H,b,s,C))}}}async function Fl(o,u,g,a){let l=0,s=0,i=new Tt;for(let p=0;p<o.length;p++){const z=o[p],_=(z.webkitRelativePath||z.name).replace(/^\//,"");if(a.value)return;if(await i.add(_,z),s+=z.size,l++,g.failedFileZippedCount++,s>=u||p===o.length-1){await i.zip();const A=i.url();g.failedZips.push({url:A,size:s,count:l}),i.clear(),s=0,l=0}}g.failedZipDone=!0}function On(o){if(typeof o.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((u,g)=>{o.onload=u,o.onerror=g})}const Re=(o,u)=>{const g=o.__vccOpts||o;for(const[a,l]of u)g[a]=l;return g},Ml=o=>(Nt("data-v-5dab19ad"),o=o(),Dt(),o),Pl={class:"container"},Ol=Ml(()=>w("span",{class:"text"},"ZIP",-1)),Ul={__name:"zipicon",setup(o){return(u,g)=>(F(),oe("span",Pl,[n(e(be),null,{default:t(()=>[n(e(St))]),_:1}),Ol]))}},Nl=Re(Ul,[["__scopeId","data-v-5dab19ad"]]),Dl=["href","download","title"],Rl=xe({__name:"thumbnail",props:{src:{},width:{},height:{},maxWidth:{default:100},maxHeight:{default:100},expand:{type:Boolean,default:!1},loading:{type:Boolean},fileName:{},allowNext:{type:Boolean},allowPrev:{type:Boolean},hidden:{type:Boolean}},emits:["load","error","next","prev"],setup(o,{expose:u,emit:g}){De();const a=o,l=g;u({download:m,openPreview:b});const s=k(),i=k(!0),p=k(""),z=k(a.width||100),_=k(a.height||100),A=k(!1),r=wt({width:z.value+"px",height:_.value+"px",minWidth:"50px",minHeight:"50px"});ze(a,(L,h)=>{r.width=(a.width||100)+"px",r.height=(a.height||100)+"px"}),ze(()=>a.src,()=>{f(a.src)},{immediate:!0});async function T(L){const h=L.target,U=h.naturalWidth,D=h.naturalHeight,{width:Z,height:v}=Pn({width:U,height:D},{width:a.maxWidth||100,height:a.maxHeight||100},a.expand);z.value=Z,_.value=v,l("load",{src:h.src,width:U,height:D}),i.value=!1,await new Promise(M=>setTimeout(M,100)),!i.value&&(A.value=!0)}function y(L){const h=L.target;l("error",h.src)}async function f(L){i.value=!0,A.value=!1,await new Promise(h=>setTimeout(h,150)),p.value=L}function m(){const L=document.createElement("a");L.href=p.value,L.download=a.fileName,L.click()}function b(){var L;(L=s.value)==null||L.click()}return(L,h)=>{const U=gn,D=Xe,Z=Ke;return Ct((F(),oe("div",null,[n(e(Ie),null,{trigger:t(()=>[n(Z,{show:e(i)||a.loading},{default:t(()=>[n(D,{justify:"center",align:"center",style:pe(e(r))},{default:t(()=>[w("a",{href:e(p),onClick:h[0]||(h[0]=Ze(()=>{},["left","prevent"])),target:"_blank",download:a.fileName,title:a.fileName,style:{"line-height":"0px"}},[n(je,{mode:"in-out"},{default:t(()=>[Ct(n(U,{ref_key:"nImageRef",ref:s,"show-toolbar-tooltip":"",onLoad:T,onError:y,src:e(p),width:e(z),height:e(_),style:{border:"1px solid silver"}},null,8,["src","width","height"]),[[Lt,e(A)]])]),_:1})],8,Dl)]),_:1},8,["style"])]),_:1},8,["show"])]),default:t(()=>[S(" "+d(a.fileName),1)]),_:1})],512)),[[Lt,!L.hidden]])}}}),an=Re(Rl,[["__scopeId","data-v-823a733d"]]),jl={style:{"font-size":"smaller"}},Bl={style:{"font-family":"v-mono","font-size":"smaller"}},Zl=["href","download","title"],Wl={style:{"font-weight":"bold",color:"gray"}},Hl=["href","download","title"],Vl={style:{"font-weight":"bold",color:"gray"}},ql=["href","download"],Gl=xe({__name:"image-viewer",props:{url:{},originalUrl:{},name:{},originalName:{},size:{},originalSize:{},length:{},index:{},isSingle:{type:Boolean},variousInfo:{}},emits:["demand-image","close"],setup(o,{expose:u,emit:g}){const a=o,l=g;u({download:Q});const s=k(),i=k(),p=k(),z=bt(),{t:_}=De();mn();const A=k(!0),r=k(Math.max(a.index,0)+1),T=k(1),y=k(1),f=k(""),m=k(1),b=k(1),L=k(!1),h=k(!1),U=k(!1),D=ke(()=>{var I,x;return((x=(I=p==null?void 0:p.value)==null?void 0:I.previewInstRef)==null?void 0:x.previewSrc)===f.value}),Z=ke(()=>r.value<a.length),v=ke(()=>r.value>1);Ee(()=>{if(document.body.addEventListener("keydown",E),document.body.addEventListener("keydown",se),a.url&&a.index>=0){A.value=!1,f.value=a.url;return}l("demand-image",r.value-1)});let M=-1;ze(r,()=>{r.value<1||r.value>a.length||(clearTimeout(M),M=setTimeout(()=>{a.index!==r.value-1&&(l("demand-image",r.value-1),L.value=!0,h.value=!1,U.value=!1)},100))}),ze(()=>a.index,()=>{var x,W;let I="";if(a.index===0&&A.value?(A.value=!1,r.value=1,I=a.url):a.index===r.value-1&&(L.value=!1,I=a.url),I){try{(W=(x=p.value)==null?void 0:x.previewInstRef)!=null&&W.displayed&&(D.value?p.value.previewInstRef.setPreviewSrc(I):p.value.previewInstRef.setPreviewSrc(a.originalUrl))}catch{}f.value=I}},{immediate:!0});let ee="",te="";ze(()=>a.url,()=>{if(a.url!==ee){const I=ee,x=te;setTimeout(()=>{URL.revokeObjectURL(I),URL.revokeObjectURL(x)},1e3),ee=a.url,te=a.originalUrl}a.isSingle&&(A.value=!1,f.value=a.url)}),vn(()=>{document.body.removeEventListener("keydown",E),document.body.removeEventListener("keydown",se)});function se(I){var x,W,P,O;if(I.key==="Escape")try{(W=(x=p.value)==null?void 0:x.previewInstRef)!=null&&W.displayed&&(I.stopPropagation(),(O=(P=p.value)==null?void 0:P.previewInstRef)==null||O.toggleShow(!1))}catch{}}function E(I){var x,W;switch(I.key){case"ArrowRight":case"PageDown":H(1);break;case"ArrowLeft":case"PageUp":H(-1);break;case"ArrowUp":case"Home":r.value=1;break;case"ArrowDown":case"End":r.value=a.length;break;case" ":case"Enter":ce();break;default:return}I.stopPropagation(),(W=(x=p.value)==null?void 0:x.previewInstRef)!=null&&W.displayed&&I.preventDefault()}function C({width:I,height:x}){T.value=I,y.value=x,h.value=!0}function B({width:I,height:x}){m.value=I,b.value=x,U.value=!0}function Q(){D.value?s.value.download():i.value.download()}async function re(I){try{const x=await fetch(I).then(P=>P.blob()).then(P=>new Promise(O=>{const $=new FileReader;$.onload=O,$.readAsDataURL(P)})).then(P=>P.target.result);navigator.clipboard.writeText(x);const W=P=>{P.target.focus(),P.target.select()};z.info({title:_("copiedDataURLDialogTitle"),content:()=>K("div",[K("div",_("copiedDataURLMessage")),K(hn,{onFocus:W,onClick:W,type:"textarea",value:x,readonly:!0,size:"small",style:{marginTop:"2em"}})]),positiveText:"OK"})}catch{z.error({title:"failed to copy Data URL",content:"could not copy Data URL",positiveText:"OK"})}}function H(I){I>0&&r.value<a.length&&r.value++,I<0&&r.value>1&&r.value--}let le="";const ce=()=>{var x,W,P,O,$,X;le=(P=window.getComputedStyle((W=(x=p==null?void 0:p.value)==null?void 0:x.previewInstRef)==null?void 0:W.previewRef))==null?void 0:P.transform;const I=D.value;(X=($=(O=p==null?void 0:p.value)==null?void 0:O.previewInstRef)==null?void 0:$.handleSwitchNext)==null||X.call($),rt(()=>{var Y,G,ie;D.value===I&&((ie=(G=(Y=p==null?void 0:p.value)==null?void 0:Y.previewInstRef)==null?void 0:G.handleSwitchNext)==null||ie.call(G))})};function he(){try{rt(()=>p.value.previewInstRef.previewRef.style.transform=le)}catch{}}function ue({nodes:I}){const x=K(Rt,{color:D.value?"green":"gray",offset:[-20,-12],value:(D.value?_("status.Converted"):_("status.Original"))+" "+r.value},()=>K(we,{round:!0,onClick(){ce()},textColor:"white",size:"small",style:{marginLeft:"4px"}},{icon:()=>K(D.value?so:ro)}));I.next=K(we,{onClick(){H(1)},disabled:!Z.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>K(Qt)}),I.prev=K(we,{onClick(){H(-1)},disabled:!v.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>K(uo)});try{const W=I.download.children;W.default=()=>_("save");const P=W.trigger();P.props.onClick=Q,W.trigger=()=>P}catch{}return[x,...Object.values(I)]}return(I,x)=>{const W=be,P=Xe,O=$e,$=_n,X=ct,Y=jt,G=co,ie=Ke;return F(),q(ie,{size:"large",show:A.value,class:"body"},{default:t(()=>[n(G,{ref_key:"nImageGroupRef",ref:p,"show-toolbar-tooltip":"","render-toolbar":ue,onPreviewNext:he},{default:t(()=>[n(P,{justify:"center",align:"center",vertical:"",style:pe({visibility:A.value?"hidden":"visible"})},{default:t(()=>[n(P,{wrap:!1,align:"center"},{default:t(()=>[n(e(we),{onClick:x[0]||(x[0]=de=>H(-1)),disabled:!e(v),block:"",style:{"max-width":"1em",height:"10em"},class:He({pale:!e(v)}),title:I.$t("Prev")},{icon:t(()=>[n(W,{size:"30"},{default:t(()=>[n(e(po))]),_:1})]),_:1},8,["disabled","class","title"]),n(P,{vertical:""},{default:t(()=>[n(P,{align:"center",wrap:!1},{default:t(()=>[n(P,{vertical:"",align:"center",style:{overflow:"hidden"}},{default:t(()=>[I.isSingle?fe("",!0):(F(),q(P,{key:0,style:{"white-space":"nowrap"},align:"center",wrap:!1},{default:t(()=>[w("span",jl,d(e(_)("status.index"))+":",1),w("span",Bl,d(r.value)+" / "+d(a.length),1)]),_:1})),n(P,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(P,{align:"center",justify:"center",vertical:""},{default:t(()=>[w("a",{href:I.originalUrl,onClick:x[3]||(x[3]=Ze(de=>{i.value.openPreview()},["prevent"])),download:I.originalName,title:I.originalName},[n(P,{align:"center",justify:"center",wrap:!1,style:{},class:"original-thumb"},{default:t(()=>[n(an,{ref_key:"thumbOrgRef",ref:i,src:I.originalUrl,width:1,"max-width":1,"max-height":1,loading:L.value,"file-name":I.originalName,"allow-next":r.value<a.length,"allow-prev":r.value>1,onLoad:B,onNext:x[1]||(x[1]=de=>H(1)),onPrev:x[2]||(x[2]=de=>H(-1)),hidden:!0},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(O,{vertical:"",align:"center"},{default:t(()=>[w("span",Wl,d(e(_)("status.Original")),1),n(O,{justify:"center",style:{"font-size":"smaller","white-space":"nowrap","font-family":"v-mono",width:"10em"}},{default:t(()=>[S(d(String(m.value).padStart(5," "))+" × "+d(String(b.value).padStart(5," ")),1)]),_:1}),n(O,{justify:"center"},{default:t(()=>[S(d(e(Be)(a.originalSize,0)),1)]),_:1})]),_:1})]),_:1})],8,Zl)]),_:1}),n(P,{style:{margin:"1em"},class:"original-thumb"},{default:t(()=>[n(W,{size:"20",color:"silver"},{default:t(()=>[n(e(Qt))]),_:1})]),_:1}),w("a",{href:f.value,onClick:x[4]||(x[4]=Ze(de=>{s.value.openPreview()},["prevent"])),download:a.name,title:a.name},[n(P,{vertical:"",align:"center",justify:"center"},{default:t(()=>[n(P,{justify:"center",align:"center",size:0},{default:t(()=>[w("span",Vl,d(e(_)("status.Converted")),1)]),_:1}),n(P,{vertical:"",align:"center",justify:"center",size:0},{default:t(()=>[n(P,{justify:"center",style:{"font-size":"smaller","white-space":"nowrap","font-family":"v-mono",width:"10em"}},{default:t(()=>{var de;return[w("span",{style:pe((de=a.variousInfo)!=null&&de.shrinked?{color:"blue"}:{})},d(String(T.value).padStart(5," "))+" × "+d(String(y.value).padStart(5," ")),5)]}),_:1})]),_:1}),n(P,{justify:"center"},{default:t(()=>[S(d(e(Be)(a.size,0)),1)]),_:1})]),_:1})],8,Hl)]),_:1}),n(P,{ref:"fileNameContainer",align:"center",class:"pathbox",title:a.name},{default:t(()=>[n($,{"x-scrollable":!0,trigger:"hover",style:{"font-size":"smaller",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},{default:t(()=>[S(d(a.name),1)]),_:1})]),_:1},8,["title"])]),_:1}),n(P,{vertical:""},{default:t(()=>[n(an,{ref_key:"thumbConvRef",ref:s,src:f.value,width:140,"max-width":140,"max-height":100,loading:L.value,"file-name":a.name,"allow-next":r.value<a.length,"allow-prev":r.value>1,onLoad:C,onNext:x[5]||(x[5]=de=>H(1)),onPrev:x[6]||(x[6]=de=>H(-1))},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(P,{justify:"center",wrap:!0},{default:t(()=>[a.url?(F(),q(X,{key:0,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[w("a",{href:a.url,ref:"saveImg",target:"_blank",download:a.name},[n(e(we),{round:"",size:"tiny"},{default:t(()=>[S(d(I.$t("save")),1)]),_:1})],8,ql)]),default:t(()=>[S(" "+d(I.$t("save")),1)]),_:1})):fe("",!0),a.url?(F(),q(X,{key:1,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(e(we),{onClick:x[7]||(x[7]=de=>re(a.url)),round:"",size:"tiny"},{default:t(()=>[S("DataURL")]),_:1})]),default:t(()=>[S(" "+d(I.$t("convertedImageDataUrlTooltip")),1)]),_:1})):fe("",!0)]),_:1})]),_:1})]),_:1}),I.isSingle?fe("",!0):(F(),q(P,{key:0,align:"center",justify:"center",style:{padding:"0px 1em"}},{default:t(()=>[n(Y,{value:r.value,"onUpdate:value":x[8]||(x[8]=de=>r.value=de),tooltip:!1,step:1,min:1,max:a.length},null,8,["value","max"])]),_:1}))]),_:1}),n(e(we),{onClick:x[9]||(x[9]=de=>H(1)),disabled:!e(Z),block:"",style:{"max-width":"1em",height:"9em"},class:He({pale:!e(Z)}),title:I.$t("Next")},{icon:t(()=>[n(W,{size:"30"},{default:t(()=>[n(e(fo))]),_:1})]),_:1},8,["disabled","class","title"])]),_:1})]),_:1},8,["style"]),n(e(we),{onClick:x[10]||(x[10]=de=>{l("close")}),circle:"",size:"tiny",color:"silver",style:{position:"absolute",right:"-16px",top:"-8px",opacity:"0.7"},title:I.$t("close")},{icon:t(()=>[n(W,{size:"12"},{default:t(()=>[n(e(go))]),_:1})]),_:1},8,["title"])]),_:1},512)]),_:1},8,["show"])}}}),Kl=Re(Gl,[["__scopeId","data-v-c143f030"]]),Ql={key:0},Yl={style:{"font-size":"smaller"}},Xl={class:"log-table"},Jl={class:"log-tr"},ei={class:"log-th"},ti={class:"log-th"},ni={style:{"min-width":"7em"},class:"log-th"},ai={style:{"padding-left":"2em"},class:"log-th"},oi={class:"log-td"},li={class:"log-td"},ii={class:"log-td"},si={class:"log-td"},ri={style:{margin:"1px"}},ui=["href","download","onClick"],di={key:0,style:{position:"relative"}},ci=["href","download"],pi=["href","download"],fi={key:0,style:{margin:"1px"}},gi=["href","download","onClick"],on=99999,mi=100,vi=xe({__name:"status",props:{processing:{type:Boolean},status:{},interval:{}},emits:["all-zips-clicked","demand-zip-errors","demand-image"],setup(o,{emit:u}){const g=bt(),{t:a}=De(),l=mn(),s={W:160,H:80},i=o,p=u,z=k(!1),_=k([]),A=k(!1),r=k([]),T=k([]),y=k([0,0]),f=k([0,0]),m=k([0,0]),b=k([0,0]),L=k([0,0]),h=k([0,0]),U=k(0),D=k([0,0]),Z=k(l.value.infoColor),v=k("#000000"),M=k("#000000"),ee=k(0),te=k(0),se=k(""),E=k("00:00:00");k(""),k("");const C=k(void 0),B=k(!1),Q=k(!0),re=k(!1),H=ke(()=>B.value?he.value:ce.value),le=k("16em"),ce=k(5),he=k(1e3),ue=k(!0),I=k(!1),x=wt({name:"",originalName:"",size:0,url:"",originalUrl:"",originalSize:0,dataUrl:"",index:-1,various:{shrinked:!1}}),W=k(null),P=k(null),O=k(),$=k();Ee(()=>{ze(i.status,()=>ie(),{deep:!1}),ze([P,ue],()=>{if(!P.value||!ue.value)return;const{width:ye,height:Ae}=Pn(P.value,{width:s.W,height:s.H});W.value.width=ye,W.value.height=Ae,W.value.style.width=ye+"px",W.value.style.height=Ae+"px",P.value instanceof HTMLImageElement?W.value.getContext("2d").drawImage(P.value,0,0,ye,Ae):(W.value.getContext("bitmaprenderer").transferFromImageBitmap(P.value),P.value=null,i.status.thumbnail=null)});let c=0;const j=()=>{if(c)return;const ye=Date.now();E.value="00:00:00",c=window.setInterval(()=>{const Ae=(Date.now()-ye)/1e3;E.value=`${String(Ae/3600|0).padStart(2,"0")}:${String(Ae/60%60|0).padStart(2,"0")}:${String(Ae%60|0).padStart(2,"0")}`},300)};j(),ze(()=>i.processing,(ye,Ae)=>{ye?(j(),_.value=[],z.value=!1,A.value=!1,r.value=[],T.value=[]):(clearInterval(c),ie(),c=0),ue.value=!1,I.value=!0,i.processing||de()});const ne=ho();let V;const ae=()=>{clearTimeout(V),V=setTimeout(()=>{if(!ue.value||ge)return;const ye=O.value.$parent.$el.offsetHeight,Ae=window.innerHeight-ne.parent.parent.vnode.el.offsetHeight-8;le.value=Math.max(ye+Ae,50)+"px"},100)};ae(),window.addEventListener("resize",ae);const me=new ResizeObserver(ae);me.observe(ne.parent.parent.vnode.el);let ge=!1;mo(()=>{ge=!0,me.disconnect(),clearInterval(c),clearTimeout(V),clearTimeout(G),clearTimeout(Oe),window.removeEventListener("resize",ae)})}),ze([()=>i.status.zips.length,()=>i.status.failedZips.length],()=>{const c=i.status;{r.value.length>c.zips.length&&(r.value.length=0);let j=0;const ne=c.zips.length===1&&c.zippedTotalCount===c.length;for(let V=r.value.length;V<c.zips.length;V++){const ae=c.zips[V],me=c.baseZipName+(ne?"":"-"+String(V+1).padStart(2,"0"))+".zip";j+=ae.size,r.value[V]={url:ae.url,size:ae.size,number:ne?0:V+1,sizeByUnit:Be(ae.size),name:me,count:ae.count,clicked:!1}}}{T.value.length>c.failedZips.length&&(T.value.length=0);let j=0;const ne=c.failedZipDone&&c.failedZips.length===1;for(let V=T.value.length;V<c.failedZips.length;V++){const ae=c.failedZips[V],me=c.baseZipName+"-error"+(ne?"":"-"+String(V+1).padStart(2,"0"))+".zip";j+=ae.size,T.value[V]={url:ae.url,size:ae.size,number:ne?0:V+1,sizeByUnit:Be(ae.size),name:me,count:ae.count,clicked:!1}}}});const X=i.interval||100;let Y=!1,G=0;function ie(){if(Y)return;if(G){Y=!0;return}G=window.setTimeout(()=>{G=0,Y&&(Y=!1,ie())},X);const c=i.status;z.value=c.length>=2,f.value[1]=f.value[0],f.value[0]=c.index,m.value[1]=m.value[0],m.value[0]=c.success,b.value[1]=b.value[0],b.value[0]=c.failure,L.value[1]=L.value[0],L.value[0]=c.done,h.value[1]=h.value[0],h.value[0]=c.converted,U.value=c.length,D.value[1]=D.value[0],D.value[0]=c.zippedTotalCount,ee.value=c.inputTotalSize,te.value=c.outputTotalSize;const j=te.value-ee.value;se.value=(j>=0?"+ ":"")+Be(j);const ne=te.value/ee.value,V=(256|Math.min(255,Math.max(0,ne-1.5)*255|0)).toString(16).substring(1);v.value="#"+V+"0000";const ae=1024*1024,me=(256|Math.min(255,Math.max(0,j/1024/ae)*255|0)).toString(16).substring(1);if(M.value="#"+me+"0000",y.value[1]=y.value[0],y.value[0]=m.value[0]/U.value*100,ue.value||!i.processing){const ge=c.logs.slice(-on);_.value.push(...ge);const ye=_.value.length-on;ye>0&&_.value.splice(0,ye),Q.value&&ge.length&&Se(),_.value.length>he.value&&(he.value*=2)}c.logs.length=0,P.value=c.thumbnail,i.processing&&(Z.value=b.value[0]?l.value.warningColor:l.value.infoColor),c.convertedImageUrl!==x.url&&(x.url=c.convertedImageUrl,x.name=c.convertedImageName,x.dataUrl=c.convertedImageDataUrl,x.size=c.convertedImageSize||c.outputTotalSize,x.originalSize=c.convertedImageOrgSize,x.originalName=c.convertedImageOrgName,x.index=c.convertedImageIndex,x.originalUrl=c.convertedImageOrgUrl,x.various={shrinked:c.convertedImageShrinked})}function de(){const c=i.status;Z.value=i.status.success===i.status.length?l.value.successColor:l.value.errorColor,c.unconvertedFileCount>0,b.value[0]>0||(m.value[0],U.value),B.value||(B.value=!0)}const _e=ke(()=>[{key:"open",label:a("status.openFailedList"),icon:()=>K(be,()=>K(yn)),onSelect(){Je()}},{key:"download",label:a("status.saveFailedList"),icon:()=>K(be,()=>K(vo)),onSelect(){Je(!0)}},{key:"zip",label:`${a("status.zipFailedList")}`+(i.status.failedZipDone?`(✔${a("status.done")})`:""),icon:()=>K(Ke,{show:A.value&&!i.status.failedZipDone,size:"small"},()=>K(be,()=>K(St))),disabled:A.value,onSelect(c){return A.value=!0,p("demand-zip-errors"),!1}}]);function Le(c,j=!1){const{url:ne,name:V}=c;if(j){const ae=document.createElement("a");ae.href=ne,ae.download=V,ae.click()}c.clicked||(c.clicked=!0,i.processing||r.value.every(ae=>ae.clicked)&&p("all-zips-clicked"))}async function ft(){if(z.value){if(r.value.length>=2&&!await new Promise((ne,V)=>g.warning({title:a("Download"),content:a("status.confirmDownloadMessage",[r.value.length]),positiveText:"OK",negativeText:a("cancel"),onPositiveClick:()=>ne(!0),onNegativeClick:()=>V()})))return;const c=r.value;for(const j of c)Le(j,!0)}else $.value.download()}function Je(c=!1){const j=new Blob([i.status.unconvertedListText],{type:"text/plain;charset=utf8"}),ne=URL.createObjectURL(j),V=document.createElement("a");V.href=ne,V.target="_blank",c&&(V.download=i.status.baseZipName+"-error.txt"),V.click()}let Oe=0,et=!1;function Se(c=!1){if(!et){if(Oe){et=!0;return}rt(()=>{!c&&(!B.value||!Q.value)||(O.value.scrollTo({behavior:"instant",top:_.value.length*50}),Oe=window.setTimeout(()=>{Oe=0,et&&(et=!1,Se())},mi))})}}return(c,j)=>{const ne=$e,V=_o,ae=yo,me=ct,ge=Xe,ye=wo,Ae=bn,kt=Ie,Ka=kn,Qa=Bt,Ya=Zt,Xa=Ut,tt=we,Ja=Nl,Gt=Rt,eo=bo;return F(),q(ge,{vertical:"",justify:"center"},{default:t(()=>[n(ne,{justify:"center",align:"center",wrap:!1,style:{"white-space":"nowrap"}},{default:t(()=>[n(ne,{vertical:"",justify:"center",class:"left-column"},{default:t(()=>[n(V,{"tabular-nums":"",label:c.$t("status.elapsedTime")},{default:t(()=>[n(ne,null,{default:t(()=>[S(d(e(E)),1)]),_:1})]),_:1},8,["label"]),n(V,{"tabular-nums":"",label:c.$t("status.multiThreading")},{default:t(()=>[n(ne,{style:pe({color:i.status.threads?"":"red",fontSize:"smaller"})},{default:t(()=>[S(d(i.status.threads?c.$rt("{n} @:threads",i.status.threads):c.$t("disabled")),1)]),_:1},8,["style"])]),_:1},8,["label"]),n(V,{"tabular-nums":"",label:c.$t("status.outputSettings")},{default:t(()=>[n(ne,{vertical:"",justify:"end",style:{"font-size":"smaller","line-height":"1em"}},{default:t(()=>[w("div",null,d(c.$t("settings.imageType"))+": "+d(i.status.type),1),c.status.shrink?(F(),oe("div",Ql,[S(d(c.$t("status.Shrinking"))+": ",1),w("span",Yl,d(c.status.shrink[0])+"×"+d(c.status.shrink[1]),1)])):fe("",!0),w("div",null,"Zip: "+d(i.status.zipSize)+"MB",1)]),_:1})]),_:1},8,["label"])]),_:1}),n(ye,{type:"multiple-circle","stroke-width":1,percentage:[e(m)[0]/e(U)*100|0,e(f)[0]/e(U)*100|0],color:[e(l).successColor,e(Z)],"rail-style":[{stroke:c.processing?e(l).successColor:e(Z),opacity:.3},{stroke:e(Z),opacity:.3}],class:"center-column"},{default:t(()=>[n(ne,{vertical:"",align:"center",style:{"font-family":"v-mono","white-space":"nowrap"},wrap:!1,"wrap-item":!1},{default:t(()=>[w("span",{style:pe({color:e(b)[0]?e(Z):c.processing?e(l).successColor:e(Z)})},[n(ae,{duration:e(X)*3|0,from:e(y)[1]|0,to:e(y)[0]|0,active:!0},null,8,["duration","from","to"]),S("% ")],4),n(ge,{wrap:!1,style:{border:"0px solid"}},{default:t(()=>[n(ge,{vertical:"",size:"small",justify:"end"},{default:t(()=>[n(ge,{justify:"end",wrap:!1},{default:t(()=>[e(b)[0]>0?(F(),q(me,{key:0,trigger:"hover",duration:0,delay:0,style:pe({color:e(l).errorColor}),placement:"left"},{trigger:t(()=>[w("span",{style:pe({fontSize:"xx-small",color:e(l).errorColor,lineHeight:"0"})}," ("+d(e(b)[0].toLocaleString("en-us"))+") ",5)]),default:t(()=>[S(" "+d(c.$t("status.progressErrors"))+" ("+d(e(b)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):fe("",!0),n(me,{trigger:"hover",duration:0,delay:0,style:pe({color:e(l).infoColor}),placement:"left"},{trigger:t(()=>[w("span",{style:pe({fontSize:"xx-small",color:e(l).infoColor,lineHeight:"0"})},d(e(f)[0].toLocaleString("en-us")),5)]),default:t(()=>[S(" "+d(c.$t("status.progressStarted"))+" ("+d(e(f)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])]),_:1}),n(ge,{justify:"end"},{default:t(()=>[n(me,{trigger:"hover",duration:0,delay:0,style:pe({color:e(l).successColor}),placement:"bottom"},{trigger:t(()=>[w("span",{style:pe({fontSize:"medium",color:e(l).successColor})},[n(ae,{duration:e(X)*3|0,from:e(m)[1],to:e(m)[0],active:!0,"show-separator":!0},null,8,["duration","from","to"])],4)]),default:t(()=>[S(" "+d(c.$t("status.progressSuccess"))+" ("+d(e(m)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])]),_:1})]),_:1}),n(ge,{align:"end",style:{"font-size":"medium",border:"0px solid"}},{default:t(()=>[n(me,{trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:t(()=>[S(" / "+d(e(U).toLocaleString("en-us")),1)]),default:t(()=>[S(" "+d(c.$t("status.progressTotal"))+" ("+d(e(U).toLocaleString("en-us"))+") ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["percentage","color","rail-style"]),n(ne,{vertical:"",style:{height:"100%"},justify:"center"},{default:t(()=>[n(V,{"tabular-nums":"",label:c.$t("status.inputSize")},{default:t(()=>[n(ne,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[S(d((e(ee)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(V,{"tabular-nums":"",label:c.$t("status.outputSize")},{default:t(()=>[n(ne,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[S(d((e(te)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(V,{"tabular-nums":"",label:c.$t("status.outInRate")},{default:t(()=>[n(ne,{vertical:"",align:"end",justify:"start",style:{"font-size":"xx-small","font-family":"v-mono","line-height":"50%"}},{default:t(()=>[w("span",{style:pe({color:e(v),fontSize:"larger"})},"× "+d((e(te)/e(ee)||1).toFixed(2)),5),w("span",{style:pe({color:e(M)})},"("+d(e(se))+")",5)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1}),n(Ya,{"display-directive":"show","trigger-areas":["arrow","main"],"default-expanded-names":"log-collapse","expanded-names":e(ue)?["log-collapse"]:[],"onUpdate:expandedNames":j[7]||(j[7]=R=>{ue.value=!!String(R)})},{default:t(()=>[n(Qa,{title:"Log",name:"log-collapse",style:{"white-space":"nowrap"}},wn({header:t(()=>[n(ge,{align:"center",wrap:!1},{default:t(()=>[S(d(c.$t("status.log")),1),c.processing&&!e(ue)?(F(),q(e(Ke),{key:0,size:16})):fe("",!0)]),_:1})]),default:t(()=>[n(ge,{wrap:!1,class:He({"log-container":1,"expand-log":e(B)}),align:"stretch",style:pe(e(B)?{height:e(le),maxHeight:e(le)}:{})},{default:t(()=>[n(e(_n),{ref_key:"scrollref",ref:O,"x-scrollable":!0,onMouseup:j[5]||(j[5]=R=>Q.value=!1),onWheel:j[6]||(j[6]=R=>Q.value=!1),trigger:"none",style:pe([{"z-index":"2","padding-right":"10px","min-height":"7em"},{maxHeight:e(le)}]),size:50},{default:t(()=>[w("table",Xl,[w("tr",Jl,[w("th",ei,d(c.$t("status.table.core")),1),w("th",ti,d(c.$t("status.table.index")),1),w("th",ni,d(c.$t("status.table.status")),1),w("th",ai,d(c.$t("status.table.details")),1)]),(F(!0),oe(Te,null,Ge((e(re)?e(_).filter(R=>!R.completed):e(_)).slice(-e(H)),({index:R,key:qe,command:Ue,path:xt,core:Kt})=>(F(),oe("tr",{key:qe,class:"log-tr"},[w("td",oi,d(Kt>=0?Kt+1:"-"),1),w("td",li,d(R+1),1),w("td",ii,d(Ue),1),w("td",si,d(xt),1)]))),128))])]),_:1},8,["style"]),n(ge,{style:pe([{"align-self":"center",position:"absolute","z-index":"0","margin-top":"0.5em",right:"0.1em","line-height":"0px"},{width:s.W+"px",height:s.H+"px"}]),justify:"center",align:"center"},{default:t(()=>[n(e(Ke),{size:"small",show:c.processing},{default:t(()=>[i.status.thumbnail===void 0?(F(),q(Ka,{key:0,description:"EMPTY"})):fe("",!0),Ct(w("canvas",{ref_key:"thumbcanvas",ref:W,width:"106",height:"80",style:pe({border:"1px solid gray",filter:c.processing?"":"opacity(0.35)"})},null,4),[[Lt,i.status.thumbnail!==void 0]])]),_:1},8,["show"])]),_:1},8,["style"])]),_:1},8,["class","style"])]),_:2},[e(ue)?{name:"header-extra",fn:t(()=>[n(ge,{align:"center",wrap:!1},{default:t(()=>[n(zt,null,{default:t(()=>[n(Ae,{key:"a",checked:e(re),"onUpdate:checked":j[0]||(j[0]=R=>Pe(re)?re.value=R:null),size:"small",style:{"font-size":"smaller"},class:"hide-mobile"},{default:t(()=>[S(d(c.$t("status.filterSuccess")),1)]),_:1},8,["checked"]),e(B)?(F(),q(Ae,{key:"b",checked:e(Q),"onUpdate:checked":[j[1]||(j[1]=R=>Pe(Q)?Q.value=R:null),j[2]||(j[2]=R=>R&&Se(!0))],size:"small",style:{"font-size":"smaller"}},{default:t(()=>[S(d(c.$t("status.autoScroll")),1)]),_:1},8,["checked"])):fe("",!0)]),_:1}),n(kt,{style:{"max-width":"30em"}},{trigger:t(()=>[n(Ae,{size:"small",checked:e(B),"onUpdate:checked":[j[3]||(j[3]=R=>Pe(B)?B.value=R:null),j[4]||(j[4]=R=>{Q.value=R,Se(!0)})],style:{"font-size":"smaller"}},{default:t(()=>[S(d(c.$t("status.expandLog")),1)]),_:1},8,["checked"])]),default:t(()=>[S(d(c.$t("status.expandLogTooltip")),1)]),_:1})]),_:1})]),key:"0"}:void 0]),1024)]),_:1},8,["expanded-names"]),n(Xa,{style:{margin:"0.2em"}}),n(ge,{wrap:!1,vertical:""},{default:t(()=>[n(ge,{justify:"center",align:"center",vertical:""},{default:t(()=>[n(je,null,{default:t(()=>[e(I)?e(I)&&c.status.success>0?(F(),q(Kl,{key:1,ref_key:"imageViewer",ref:$,url:e(x).url,size:e(x).size,"original-url":e(x).originalUrl,"original-size":e(x).originalSize,name:e(x).name,originalName:e(x).originalName,length:i.status.success,index:e(x).index,"various-info":e(x).various,"is-single":!e(z),onDemandImage:j[9]||(j[9]=R=>p("demand-image",R)),onClose:j[10]||(j[10]=R=>I.value=!1)},null,8,["url","size","original-url","original-size","name","originalName","length","index","various-info","is-single"])):fe("",!0):(F(),q(tt,{key:0,tertiary:"",type:"success",size:"small",disabled:!(c.status.success>0),onClick:j[8]||(j[8]=R=>I.value=!0)},{default:t(()=>[S(d(c.$t("status.browseConvertedImages")),1)]),_:1},8,["disabled"]))]),_:1})]),_:1}),n(ge,{justify:"center"},{default:t(()=>[e(z)?(F(),q(ge,{key:0,vertical:"",align:"center"},{default:t(()=>[n(me,{placement:"left"},{trigger:t(()=>[n(ye,{type:"line","indicator-placement":"inside",color:"lime","rail-color":"rgba(99, 255, 99, 0.5)","indicator-text-color":e(D)[0]===e(U)?"white":"green",processing:c.processing,percentage:e(D)[0]/e(U)*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[w("span",ri,d(e(D)[0]/e(U)*100|0)+"% "+d(c.$t("status.zipped"))+" ("+d(e(D)[0])+"/"+d(e(h)[0])+")",1)]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[S(" "+d(c.$t("status.zippingProgress"))+" ("+d(e(D)[0]/e(U)*100|0)+"%) ",1)]),_:1}),n(je,{name:"zipcontainer"},{default:t(()=>[e(r).length>=1||i.processing?(F(),q(zt,{key:0,name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(F(!0),oe(Te,null,Ge(e(r),(R,qe)=>(F(),oe("span",{key:qe},[n(me,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[w("a",{href:R.url,download:R.name,class:"in-button-anchor",onClick:Ue=>Le(R)},[n(tt,{class:"zip-button",size:"tiny",color:R.clicked?"#050":"lime","text-color":R.clicked?"gray":"white",onClick:Ze(Ue=>Le(R),["stop"]),round:""},{default:t(()=>[n(e(be),{size:"tiny"},{default:t(()=>[n(e(St))]),_:1}),S("ZIP"+d(R.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,ui)]),default:t(()=>[w("div",{style:pe({color:e(l).successColor})},[w("div",null,"ZIP "+d(R.number||"")+" ("+d(c.$t("success"))+")",1),w("div",null,d(R.name),1),w("div",null,d(R.sizeByUnit),1),w("div",null,d(c.$rt("{n} @:files",R.count)),1)],4)]),_:2},1024)]))),128))]),_:1})):fe("",!0)]),_:1})]),_:1})):fe("",!0)]),_:1}),n(je,null,{default:t(()=>[i.processing?fe("",!0):(F(),q(ge,{key:0,justify:"center",align:"center"},{default:t(()=>[n(me,{trigger:"hover",duration:0,delay:0,placement:"left",style:pe({color:"white",backgroundColor:e(l).successColor}),"arrow-style":{backgroundColor:e(l).successColor}},{trigger:t(()=>[n(je,{name:"save"},{default:t(()=>[e(m)[0]>0?(F(),oe("span",di,[n(Gt,{value:e(z)?e(D)[0].toLocaleString("en-us"):i.status.type.replace(/\(.+\)/,""),color:e(l).successColorHover,offset:[-20,-3]},{default:t(()=>[n(tt,{size:"medium",onClick:ft,color:e(l).successColor,round:""},{default:t(()=>[e(z)?(F(),oe(Te,{key:0},[e(r).length?(F(),oe("a",{key:0,href:e(r)[0].url,download:e(r)[0].name,class:"in-button-anchor",onClick:j[11]||(j[11]=Ze(()=>{},["prevent"]))},[n(Ja),S(" × "+d(e(r).length)+" "+d(c.$t("save")),1)],8,ci)):fe("",!0)],64)):(F(),oe("a",{key:1,href:e(x).url,download:e(x).name,class:"in-button-anchor",onClick:j[12]||(j[12]=Ze(()=>{},["prevent"]))},[n(e(be),{size:"tiny"},{default:t(()=>[n(e(xn))]),_:1}),S(" "+d(c.$t("save")),1)],8,pi))]),_:1},8,["color"])]),_:1},8,["value","color"])])):fe("",!0)]),_:1})]),default:t(()=>[c.status.length>=2?(F(),oe(Te,{key:0},[w("div",null,d(e(a)("success"))+": "+d(e(D)[0].toLocaleString()),1),w("div",null,d(e(a)("status.totalSize"))+": "+d(e(Be)(c.status.zippedTotalSize)),1),w("div",null,"ZIP × "+d(e(r).length),1),w("div",null,d(e(a)("status.saveAllZipsTooltip")),1)],64)):(F(),oe(Te,{key:1},[S(d(c.$t("status.downloadConvertedImage",e(r).length)),1)],64))]),_:1},8,["style","arrow-style"]),!c.processing&&c.status.success!==e(U)?(F(),q(eo,{key:0,options:e(_e),onSelect:j[13]||(j[13]=(R,qe)=>{var Ue;return(Ue=e(_e).find(({key:xt})=>R===xt))==null?void 0:Ue.onSelect()}),"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start"},{default:t(()=>[n(me,{show:e(C),duration:0,delay:0,placement:"right",style:pe({color:"white",backgroundColor:e(l).errorColor}),"arrow-style":{backgroundColor:e(l).errorColor}},{trigger:t(()=>[n(Gt,{value:c.status.unconvertedFileCount.toLocaleString(),color:e(l).errorColorHover,offset:[-0,-3]},{default:t(()=>[n(tt,{size:"small",color:e(l).errorColor},{default:t(()=>[n(e(be),{size:"medium",style:{"vertical-align":"middle"}},{default:t(()=>[n(e(ko))]),_:1})]),_:1},8,["color"])]),_:1},8,["value","color"])]),default:t(()=>[w("div",null,[w("div",null,d(e(a)("failed"))+": "+d(c.status.unconvertedFileCount.toLocaleString()),1),w("div",null,d(e(a)("status.totalSize"))+": "+d(e(Be)(c.status.unconvertedTotalSize)),1)])]),_:1},8,["show","style","arrow-style"])]),_:1},8,["options"])):fe("",!0)]),_:1}))]),_:1}),n(je,{name:"zipcontainer"},{default:t(()=>[e(A)?(F(),q(ge,{key:0,vertical:"",align:"center"},{default:t(()=>[n(me,{placement:"left"},{trigger:t(()=>[n(ye,{type:"line","indicator-placement":"inside",color:"red","rail-color":"rgba(255, 0, 0, 0.5)","indicator-text-color":c.status.failedFileZippedCount===c.status.unconvertedFileCount?"white":"#500",processing:e(A)&&!c.status.failedZipDone&&!c.status.failedToCreateFailedZip,percentage:c.status.failedFileZippedCount/c.status.unconvertedFileCount*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[c.status.failedToCreateFailedZip?(F(),oe("div",{key:1,style:pe({color:e(l).errorColor})},d(c.$t("status.failureZippingFailedFiles")),5)):(F(),oe("span",fi,d(c.status.failedFileZippedCount/c.status.unconvertedFileCount*100|0)+"% "+d(c.$t("status.zipped"))+" ("+d(c.status.failedFileZippedCount)+"/"+d(c.status.unconvertedFileCount)+")",1))]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[S(" "+d(c.$t("status.zippingProgress"))+" ("+d(c.status.failedFileZippedCount/c.status.unconvertedFileCount*100|0)+"%) ",1)]),_:1}),n(zt,{name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(F(!0),oe(Te,null,Ge(e(T),(R,qe)=>(F(),oe("span",{key:qe},[n(me,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[w("a",{href:R.url,download:R.name,class:"in-button-anchor",onClick:Ue=>Le(R)},[n(tt,{class:"zip-button",size:"tiny",color:R.clicked?"#551122":"#F00","text-color":R.clicked?"gray":"white",onClick:Ze(Ue=>Le(R),["stop"]),round:""},{default:t(()=>[n(e(be),{size:"tiny"},{default:t(()=>[n(e(xo))]),_:1}),S("ZIP"+d(R.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,gi)]),default:t(()=>[w("div",{style:pe({color:e(l).errorColor})},[w("div",null,"ZIP "+d(R.number||"")+" ("+d(c.$t("failed"))+")",1),w("div",null,d(R.name),1),w("div",null,d(R.sizeByUnit),1),w("div",null,d(c.$rt("{n} @:files",R.count)),1)],4)]),_:2},1024)]))),128))]),_:1})]),_:1})):fe("",!0)]),_:1})]),_:1})]),_:1})}}}),hi=Re(vi,[["__scopeId","data-v-cfb5ed59"]]),_i=["innerHTML"],yi={style:{"flex-grow":"1"}},wi=xe({__name:"converter",props:ut({input:{},format:{},quality:{},retainExtension:{type:Boolean},maxZipSizeMB:{},threads:{}},{showNote:{type:Boolean},showNoteModifiers:{}}),emits:ut(["start","end","multi-thread-count"],["update:showNote"]),setup(o,{emit:u}){Ye(Ve);const{t:g}=De(),a=bt(),l=zo(),s=Ao(),i=10,p=navigator.hardwareConcurrency,z=typeof OffscreenCanvas=="function",_=100,A=16,r=o,T=Ce(o,"showNote"),y=u,f=k(!1),m=k(!1),b=k(!1),L=k(0),h=k(!1),U=k(!1),D=k("initializing"),Z=k("info"),v=wt(H());let M=!1,ee=()=>{},te=0,se=!1;ze(()=>r.input,O=>{O!=null&&O.length&&ce(O)}),Ee(async()=>{await W(),P()});async function E(){let O=!0;if(te>i*1e3&&!se&&v.success>0&&(O=!1,await new Promise($=>{a.warning({title:g("confirmCloseDialogTitle"),autoFocus:!0,maskClosable:!1,positiveText:g("close"),negativeText:g("back"),onPositiveClick:()=>O=!0,onAfterLeave:$,content:g("confirmCloseDialog")})})),!O)return!1;s.destroyAll(),l.destroyAll(),h.value=!1,T.value=!1}function C(O){v.demandImage(O)}function B(){!m.value&&f.value?m.value=!0:E()}function Q(){ce(r.input)}let re=k(()=>{});function H(O){const $={logs:[],index:0,converted:0,success:0,failure:0,done:0,length:0,zippedTotalCount:0,zippingErrorCount:0,zippedTotalSize:0,processing:!1,zips:[],inputTotalSize:0,outputTotalSize:0,thumbnail:null,baseZipName:"testzipname",type:"image/any",startedTime:Date.now(),convertedImageDataUrl:"",convertedImageName:"",convertedImageUrl:"",convertedImageOrgUrl:"",convertedImageIndex:-1,convertedImageFileId:-1,convertedImageShrinked:!1,zipSize:r.maxZipSizeMB,shrink:N.multithread&&N.shrinkImage?[N.maxWidth,N.maxHeight]:void 0,unconvertedListText:"",failedZipDone:!1,failedZips:[],unconvertedFileCount:0,unconvertedTotalSize:0,failedFileZippedCount:0,failedToCreateFailedZip:!1,demandImage:()=>{}};return Object.assign(O||{},$)}function le(){U.value=!1,URL.revokeObjectURL(v.convertedImageUrl),URL.revokeObjectURL(v.convertedImageOrgUrl);for(const O of v.zips)URL.revokeObjectURL(O.url);v.zips.length=0;for(const O of v.failedZips)URL.revokeObjectURL(O.url);v.failedZips.length=0,H(v),ee(),ee=()=>{},se=!1,b.value=!1,m.value=!1}async function ce(O){if(f.value){a.error({title:"Busy",positiveText:"OK",content:g("interfered")});return}let $=I(O);H(v),le();const X={convertedImageBlob:null,convertedImageWidth:0,convertedImageHeight:0,convertedImageName:""};L.value++,h.value=!0,U.value=!0,f.value=!0,v.processing=!0,Z.value="info",D.value=g("processing");const Y=new Set,G=r.format,ie=r.quality,de=[...G.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),_e=x(G,ie,$[0].webkitRelativePath);v.length=$.length,v.baseZipName=_e,v.type=G.replace(/image\//,"").toUpperCase()+(/jpe?g|webp/i.test(G)?" ("+ie+")":""),v.threads=M?0:r.threads;const Le=Date.now();y("start");const ft=$.concat();let Je,Oe;if({exception:Oe,callbackToGenerateFailedZips:Je,callbackToClearConverter:ee}=!M&&r.threads>=2?await Il({files:ft,completedFileIdSet:Y,ConvStats:v,canceled:m,props:r,imageType:G,quality:ie,outputExt:de,format:G,message:l,notification:s}):await El(ft,Y,X,r,m,v),Oe){let Se;switch(Oe.message){case"worker-load-error":Se=g("errMsgWorkerLoadError");break;default:Se="unexpected error"}a.error({title:"Error",autoFocus:!0,maskClosable:!1,closable:!1,content:()=>K("div",[K("p",Se),K(we,{onClick(){location.reload()}},g("Reload"))])})}if(v.length,v.success===v.length?(Z.value="success",D.value=g("completed")):(Z.value="error",D.value=m.value?g("aborted"):g("incomplete")),Y.size!==$.length){const Se=he($,Y);re.value=()=>{!Se||!Se.length||Je(Se)}}f.value=!1,v.processing=!1,b.value=!0,te=Date.now()-Le,y("end")}function he(O,$){const X=[],Y=[];let G=0;for(const ie of O)$.has(ie._id)||(X.push(ie),Y.push(ie.webkitRelativePath||ie.relativePath||ie.name),G+=ie.size);return Y.length&&(v.unconvertedListText=Y.join(`
`),v.unconvertedFileCount=X.length,v.unconvertedTotalSize=G),X}let ue=0;function I(O){const $=[];for(const X of O)X.hasOwnProperty("_id")||Object.defineProperty(X,"_id",{value:ue++}),$.push(X);return $}function x(O,$,X){var _e;const Y=new Date;O=O.replace(/^image\//,"").toLowerCase();const G=N.useFolderNameForZip&&((_e=String(X).match(/^\/?([^/]+)\//))==null?void 0:_e[1])||"avif2jpg",ie=`
    ${Y.getFullYear().toString().substring(2)}
    ${String((Y.getMonth()+1)*100+Y.getDate()).padStart(4,"0")}
    ${String(Y.getHours()*1e4+Y.getMinutes()*100+Y.getSeconds()).padStart(6,"0")}
    -
    ${O+(/jpe?g|webp/i.test(O)?$:"")}
  `.replace(/\s/g,"");return`${G}-${ie}`.replace(/\s+/g," ")}async function W(){const O="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",$=document.createElement("img"),X=On($).then(()=>!0,()=>!1);$.src=O,await X||a.warning({title:"Unsupported",positiveText:"OK",maskClosable:!1,content:g("avifUnsupported")})}function P(){(!z||p<2||!Promise.any)&&(M=!0),y("multi-thread-count",M?0:Math.min(p,A))}return(O,$)=>{const X=Ie,Y=$e,G=Ke,ie=Xe,de=Ot;return F(),oe(Te,null,[n(Y,{justify:"center",align:"center"},{default:t(()=>{var _e;return[!e(f)&&((_e=r.input)!=null&&_e.length)?(F(),q(X,{key:0,trigger:"hover",placement:"top","keep-alive-on-hover":!1,duration:0,delay:50},{trigger:t(()=>[n(e(we),{onClick:Q,round:""},{default:t(()=>[S(d(e(g)("convertAgain")),1)]),_:1})]),default:t(()=>{var Le;return[w("div",{innerHTML:e(g)("reconvertTip",(Le=r.input)==null?void 0:Le.length)},null,8,_i)]}),_:1})):fe("",!0)]}),_:1}),n(de,{ref:"processingModal",show:e(h),"onUpdate:show":$[2]||($[2]=_e=>Pe(h)?h.value=_e:null),closable:e(b),"close-on-esc":!1,preset:"dialog","display-directive":"show",onClick:$[3]||($[3]=_e=>{e(s).destroyAll(),e(l).destroyAll()}),onMaskClick:$[4]||($[4]=_e=>{e(s).destroyAll(),e(l).destroyAll()}),onClose:E,onEsc:B,title:e(D),type:e(Z),"mask-closable":!1,"on-after-leave":le,class:"processing-dialog"},{default:t(()=>[n(ie,{vertical:"",style:{"flex-grow":"1"}},{default:t(()=>[w("div",yi,[e(U)?(F(),q(hi,{key:e(L),processing:e(f),status:e(v),interval:_,onAllZipsClicked:$[0]||($[0]=_e=>Pe(se)?se.value=!0:se=!0),onDemandZipErrors:e(re),onDemandImage:C},null,8,["processing","status","onDemandZipErrors"])):fe("",!0)]),n(ie,{justify:"end"},{default:t(()=>[e(f)?(F(),q(e(we),{key:0,disabled:e(m),ref:"cancelbutton",round:"",size:"large",onClick:$[1]||($[1]=_e=>m.value=!0)},{default:t(()=>[n(G,{show:e(m)&&!e(b),size:"small"},{default:t(()=>[S(d(e(g)("cancel")),1)]),_:1},8,["show"])]),_:1},8,["disabled"])):e(b)?(F(),q(e(we),{key:1,onClick:E,round:"",size:"large",style:{"font-size":"small","margin-top":"1em"}},{default:t(()=>[S(d(e(g)("close")),1)]),_:1})):fe("",!0)]),_:1})]),_:1})]),_:1},8,["show","closable","title","type"])],64)}}}),bi="/avif2jpeg/dist/avif.png",Un=o=>(Nt("data-v-892702c9"),o=o(),Dt(),o),ki={class:"container-1"},xi=Un(()=>w("span",null,"Drag & Drop",-1)),zi={style:{position:"relative"}},Ai={style:{position:"absolute","font-size":"0.5em",right:"-3.5em",bottom:"-1.5em","white-space":"nowrap"}},Ii={style:{color:"#666666"}},Ti=Un(()=>w("img",{src:bi,class:"avif"},null,-1)),Si=["innerHTML"],Ci={style:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","font-size":"xx-small","white-space":"nowrap"}},Li=xe({__name:"droptarget",props:{forbidden:{type:Boolean},dropTarget:{}},emits:["drop"],setup(o,{emit:u}){Ye(Ve);const g=o,a=u,l=Io(),s=k(!1),i=k(0),p=k("");Ee(()=>{z(g.dropTarget||document)});function z(A){document.ondragstart=r=>r.preventDefault(),document.ondragover=r=>r.preventDefault(),A.ondrop=async r=>{var y;if(r.preventDefault(),s.value||g.forbidden)return;s.value=!0,i.value=0,p.value="";let T;try{const f=[...r.dataTransfer.items].map(m=>m.webkitGetAsEntry());l.start(),T=await _(f),l.finish()}catch{T=[...((y=r.dataTransfer)==null?void 0:y.files)??[]],l.error()}s.value&&(s.value=!1,a("drop",T))}}async function _(A,r){r=r||[];for(const T of A)if(T.isFile){const y=await new Promise(f=>T.file(m=>f(m)));Object.defineProperty(y,"webkitRelativePath",{value:T.fullPath}),r.push(y),i.value++}else if(T.isDirectory){p.value=T.fullPath;const y=T.createReader();do{const f=await new Promise(m=>y.readEntries(b=>m(b)));if(!f.length)break;await _(f,r)}while(!0)}return r}return(A,r)=>{const T=be,y=$e,f=ct,m=Ie,b=Ot;return F(),oe(Te,null,[w("div",ki,[n(m,{to:!1,"display-directive":"show",trigger:"hover",duration:0,delay:0,placement:"left"},{trigger:t(()=>[n(y,{vertical:"",class:"container-2"},{default:t(()=>[n(y,{align:"center",wrap:!1,class:"container-3"},{default:t(()=>[n(y,{align:"center"},{default:t(()=>[n(T,{size:"64",color:"white"},{default:t(()=>[n(e(To))]),_:1})]),_:1}),n(y,{vertical:"",align:"center",wrap:!1,style:{"font-weight":"bold","font-size":"1em","line-height":"90%","white-space":"nowrap"}},{default:t(()=>[xi,w("span",zi,[S(" AVIF Images "),w("span",Ai,[S(" or "),n(f,{placement:"bottom-end"},{trigger:t(()=>[w("span",Ii,[n(T,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Wt))]),_:1}),S(" Folders ")])]),default:t(()=>[S(" You can drag and drop your local folders ")]),_:1})])])]),_:1}),n(y,null,{default:t(()=>[Ti]),_:1})]),_:1})]),_:1})]),default:t(()=>[w("h3",{innerHTML:A.$t("droptarget"),style:{"max-width":"200px","text-align":"center","word-break":"keep-all","overflow-wrap":"break-word"}},null,8,Si)]),_:1})]),n(b,{show:e(s),"onUpdate:show":r[0]||(r[0]=L=>Pe(s)?s.value=L:null),closable:!0,preset:"dialog",title:"Parsing dropped items.",type:"info","mask-closable":!1,"negative-text":A.$t("cancel")},{default:t(()=>[n(y,{vertical:"",align:"center"},{default:t(()=>[w("div",Ci,d(e(p)),1),w("div",null,"found "+d(e(i))+" files",1)]),_:1})]),_:1},8,["show","negative-text"])],64)}}}),$i=Re(Li,[["__scopeId","data-v-892702c9"]]),Nn=o=>(Nt("data-v-dec671e4"),o=o(),Dt(),o),Ei={class:"container-1"},Fi={class:"container-2"},Mi=["innerHTML"],Pi=["innerHTML"],Oi={style:{"padding-left":"1em"}},Ui=Nn(()=>w("br",null,null,-1)),Ni=Nn(()=>w("ul",null,[w("li",null,"Each extension must begin with a period. "),w("li",null,"Separate each extension with a comma. "),w("li",null,"Use alphameric characters.")],-1)),Di=["innerHTML"],Ri=["accept"],ji=xe({__name:"file-selector",props:ut({expanded:{type:Boolean},target:{},userExtensions:{},forbidden:{type:Boolean}},{disableNotifyingFolderSelect:{type:Boolean},disableNotifyingFolderSelectModifiers:{}}),emits:ut(["input","click","cancel","on-change-accept","update:target","update:userExtensions","update:expanded"],["update:disableNotifyingFolderSelect"]),setup(o,{emit:u}){const g=bt(),{t:a}=De(),l=Ye(Ve),s=["avif_only","all_images","all_files","edit_type"],i=o,p=u,z=k(0),_=k(!1),A=k(!1),r=ke(()=>te(m.value)),T=ke(()=>b.value.split(",").every(B=>/^\s*(\.[\w\-]+)*\s*$/.test(B))?"success":"error"),y=ke(()=>!i.forbidden&&!A.value),f=ke({get:()=>i.expanded,set:C=>{p("update:expanded",C)}}),m=ke({get:()=>s.indexOf(i.target)>=0?i.target:s[0],set:C=>{p("update:target",C)}}),b=ke({get:()=>i.userExtensions,set:C=>{p("update:userExtensions",C)}}),L=Ce(o,"disableNotifyingFolderSelect"),h=k(null),U=k(null),D=k(ee());ze(m,C=>{p("on-change-accept",r.value)}),Ee(()=>{});async function Z(C){if(p("click"),C===U.value&&!L.value){let B=!1;if(await new Promise(Q=>{g.info({title:a("loadfolderNotifyingTitle"),positiveText:a("Continue"),negativeText:a("Cancel"),onAfterLeave:()=>Q(B),onPositiveClick:()=>B=!0,content:()=>K("div",[K("p",{},a("loadfolderNotifyingMessageTerm1")),K("div",[K(gn,{width:250,style:{border:"3px solid gray"},src:"/avif2jpeg/dist//notification-folder.png"})]),K("p",{},a("loadfolderNotifyingMessageTerm2")),K("p",[K(bn,{onUpdateChecked:re=>L.value=re,checked:L.value},()=>a("checkboxTextDontShowThis"))])])})}),!B){L.value=!1,p("cancel");return}}C.click()}function v(){p("cancel")}function M(C){const Q=[...C.target.files];h.value.value="",U.value.value="",E(Q)}function ee(){return"webkitdirectory"in document.createElement("input")}function te(C){switch(C){case"avif_only":return".avif, .webp";case"all_images":return".jpg, .jpeg, .jfif, .pjpeg, .pjp, .gif, .png, .webp, .avif, .bmp, .apng, .ico";case"edit_type":return b.value;case"all_files":default:return".*"}}async function se(C){const B=String(r.value).toLowerCase().replace(/\s+/g,"");if(B&&r.value!==".*"){const Q=B.split(",");C=C.filter(re=>Q.includes(re.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),C.length||(await new Promise(re=>{g.error({title:"Images Not Found",positiveText:"OK",onAfterLeave:re,content:()=>K("div",[K(kn,{description:"NO IMAGES"}),`${a("noimage")}`,K("br"),r.value])})}),v())}return C}async function E(C){A.value=!0,C=await se(C),z.value=C.length,C.length>0&&p("input",C),A.value=!1}return(C,B)=>{const Q=be,re=Rt,H=we,le=Ie,ce=$e,he=Eo,ue=hn,I=So,x=ct,W=Co,P=Bt,O=Zt;return F(),oe(Te,null,[w("div",Ei,[w("div",Fi,[n(ce,{vertical:"",align:"center",justify:"center",inline:""},{default:t(()=>[n(ce,{align:"center",justify:"space-around"},{default:t(()=>[n(re,{value:e(z),max:999,offset:[-8,0],color:"#999999",style:{"margin-right":"1em"}},{default:t(()=>[n(Q,{size:"4em",color:"#CCCCCC"},{default:t(()=>[n(e(Lo))]),_:1})]),_:1},8,["value"]),n(ce,{vertical:"",align:"stretch",justify:"center"},{default:t(()=>[n(le,{to:!1,"display-directive":"show",show:e(l).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(l).LANDSCAPE.value?"right":"top",duration:0,delay:0,"z-index":10},{trigger:t(()=>[n(H,{disabled:!e(y),onClick:B[0]||(B[0]=$=>Z(e(h))),round:"",style:{width:"100%","background-color":"white"}},{icon:t(()=>[n(Q,{size:"large",color:"gray"},{default:t(()=>[n(e(zn))]),_:1})]),default:t(()=>[S(" "+d(C.$t("loadbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[w("div",{innerHTML:C.$t("loadbuttontooltip")},null,8,Mi)]),_:1},8,["show","placement"]),!e(l).IS_SP&&e(D)||e(l).SSR?(F(),q(le,{key:0,to:!1,"display-directive":"show",trigger:"hover",placement:"left","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:e(l).showTooltipsBeforeMounted.value},{trigger:t(()=>[n(H,{disabled:!e(y),onClick:B[1]||(B[1]=$=>Z(e(U))),round:"",style:{width:"100%","background-color":"white"}},{icon:t(()=>[n(Q,{size:"large",color:"gray"},{default:t(()=>[n(e(Wt))]),_:1})]),default:t(()=>[S(" "+d(C.$t("loadfolderbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[w("div",{innerHTML:C.$t("loadfoldertooltip")},null,8,Pi)]),_:1},8,["show"])):fe("",!0)]),_:1})]),_:1}),w("div",{class:He({"expand-ext-list-container":e(f)})},[n(O,{"display-directive":"show","expanded-names":e(f)?["extItem"]:"","on-update:expanded-names":$=>{f.value=!!(""+$)},class:He({"expand-ext-list":e(f)})},{"header-extra":t(()=>[n(Q,{size:"large"},{default:t(()=>[n(e($o))]),_:1})]),default:t(()=>[n(P,{title:C.$t("fileTypeRadioTitle"),name:"extItem"},{default:t(()=>[n(W,{value:e(m),"onUpdate:value":B[5]||(B[5]=$=>Pe(m)?m.value=$:null),name:"filetyperadios",size:"small"},{default:t(()=>[n(ce,{vertical:"",style:{"padding-left":"1em"}},{default:t(()=>[(F(),oe(Te,null,Ge(s,$=>n(le,{key:$,trigger:"hover","keep-alive-on-hover":!1,"z-index":5,placement:"left",style:{"max-width":"200px"},duration:0,delay:0},{trigger:t(()=>[n(he,{value:$},{default:t(()=>[S(d(C.$t("fileTypeRadioOptions."+$)),1)]),_:2},1032,["value"])]),default:t(()=>[S(" "+d(te($).replace(/,/g,", ")),1)]),_:2},1024)),64)),n(le,{trigger:"hover","keep-alive-on-hover":!1,placement:"bottom-start",show:e(_),duration:0,delay:0},{trigger:t(()=>[w("div",Oi,[n(x,{trigger:"manual",placement:"right-end",show:e(m)==="edit_type"&&e(T)!=="success"&&!!e(_)},{trigger:t(()=>[n(ue,{value:e(b),"onUpdate:value":B[2]||(B[2]=$=>Pe(b)?b.value=$:null),status:e(T),disabled:e(m)!=="edit_type",onFocus:B[3]||(B[3]=$=>_.value=!0),onBlur:B[4]||(B[4]=$=>_.value=void 0),clearable:!0,size:"small",placeholder:".jpg, .gif, .png",spellcheck:"false"},null,8,["value","status","disabled"])]),default:t(()=>[n(I,{type:"error","show-icon":!0,title:"Validation error"},{default:t(()=>[S(" Please correct the extension list."),Ui,Ni]),_:1})]),_:1},8,["show"])])]),default:t(()=>[w("span",{innerHTML:C.$t("editAcceptTypes")},null,8,Di)]),_:1},8,["show"])]),_:1})]),_:1},8,["value"])]),_:1},8,["title"])]),_:1},8,["expanded-names","on-update:expanded-names","class"])],2),e(l).IS_SP?fe("",!0):(F(),q($i,{key:0,onDrop:E,forbidden:!e(y)},null,8,["forbidden"]))]),_:1})])]),w("input",{ref_key:"fileinput",ref:h,onInput:M,onCancel:v,type:"file",multiple:"",accept:e(r),style:{display:"none"}},null,40,Ri),w("input",{ref_key:"folderinput",ref:U,webkitdirectory:"",directory:"",onInput:M,onCancel:v,type:"file",style:{display:"none"}},null,544)],64)}}}),Bi=Re(ji,[["__scopeId","data-v-dec671e4"]]),Zi={style:{"white-space":"nowrap"}},Wi=xe({__name:"settings-output",props:{quality:{},format:{}},emits:["update:format","update:quality"],setup(o,{emit:u}){const g=o,a=u,{t:l}=De(),s=Ye(Ve),i=k([]),p=["image/jpeg","image/png","image/gif","image/bmp","image/avif","image/webp"],z=ke({get:()=>g.format,set:f=>{f=T(f),a("update:format",f)}}),_=ke({get:()=>g.quality,set:f=>{a("update:quality",f)}}),A=ke(()=>/png|bmp/i.test(z.value)),r=k(null);Ee(()=>{y()});function T(f){return i.value.indexOf(f)<0&&(f=i.value[0]),f}function y(){for(const f of p)r.value.toDataURL(f).indexOf(f)>=0&&i.value.push(f);i.value.length===0&&i.value.push(p[0])}return(f,m)=>{const b=be,L=An,h=$e,U=Ie,D=jt,Z=In;return F(),oe(Te,null,[n(h,{justify:"center"},{default:t(()=>[n(h,{vertical:""},{default:t(()=>[n(U,{to:!1,"display-directive":"show",show:e(s).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(s).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(h,{align:"center"},{default:t(()=>[n(b,null,{default:t(()=>[n(e(zn))]),_:1}),S(d(e(l)("settings.imageType"))+": ",1),n(L,{value:z.value,"onUpdate:value":m[0]||(m[0]=v=>z.value=v),options:i.value.map(v=>({value:v,label:v})),"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),_:1})]),default:t(()=>[S(" "+d(e(l)("settings.imageTypeTooltip")),1)]),_:1},8,["show","placement"]),n(U,{to:!1,"display-directive":"show",show:e(s).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(s).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(h,{align:"center"},{default:t(()=>[n(h,{align:"start",wrap:!1},{default:t(()=>[n(b,null,{default:t(()=>[n(e(xn))]),_:1}),w("span",Zi,d(e(l)("settings.quality"))+":",1),n(h,{align:"center",justify:"space-between"},{default:t(()=>[n(D,{tooltip:!1,value:_.value,"onUpdate:value":m[1]||(m[1]=v=>_.value=v),step:1,style:{width:"120px"},disabled:A.value},null,8,["value","disabled"]),n(Z,{onBlur:m[2]||(m[2]=v=>_.value??(_.value=0)),value:_.value,"onUpdate:value":m[3]||(m[3]=v=>_.value=v),step:"1",min:"0",max:"100",disabled:A.value,style:{width:"90px"},size:"small"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:t(()=>[S(" "+d(e(l)("settings.qualitytooltip")),1)]),_:1},8,["show","placement"])]),_:1})]),_:1}),w("canvas",{ref_key:"canvas",ref:r,width:"1",height:"1",style:{display:"none"}},null,512)],64)}}}),Hi={style:{width:"4em","text-align":"left"}},Vi={style:{width:"4em","text-align":"left"}},It=100,ln=2e3,sn=4096,rn=4096,qi=100,Gi=100,Ki=xe({__name:"settings-adv",props:ut({threadMax:{}},{expanded:{type:Boolean,required:!0},expandedModifiers:{},multithread:{type:Boolean,required:!0},multithreadModifiers:{},threadCount:{required:!0},threadCountModifiers:{},maxZipSize:{required:!0},maxZipSizeModifiers:{},retainExt:{type:Boolean,required:!0},retainExtModifiers:{},useFolderNameForZip:{type:Boolean,required:!0},useFolderNameForZipModifiers:{},shrinkImage:{type:Boolean,required:!0},shrinkImageModifiers:{},maxWidth:{required:!0},maxWidthModifiers:{},maxHeight:{required:!0},maxHeightModifiers:{}}),emits:["update:expanded","update:multithread","update:threadCount","update:maxZipSize","update:retainExt","update:useFolderNameForZip","update:shrinkImage","update:maxWidth","update:maxHeight"],setup(o){const u={trigger:"hover",placement:"left",keepAliveOnHover:!1,duration:0,delay:0,style:"max-width: 20vw;"},g=Ce(o,"expanded"),a=Ce(o,"multithread"),l=Ce(o,"threadCount"),s=Ce(o,"maxZipSize"),i=Ce(o,"retainExt"),p=Ce(o,"useFolderNameForZip"),z=Ce(o,"shrinkImage"),_=Ce(o,"maxWidth"),A=Ce(o,"maxHeight"),r=o;ze(()=>r.threadMax,()=>{r.threadMax>1||(a.value=!1)},{immediate:!0}),ze(l,y=>{y===void 0&&(l.value=Math.max(2,Math.min(r.threadMax,16)))});const T=ke(()=>a.value&&r.threadMax>1);return Ee(()=>{r.threadMax>1&&typeof l.value>"u"&&(l.value=Math.max(r.threadMax/2|0,2))}),(y,f)=>{const m=be,b=we,L=Fo,h=Xe,U=jt,D=In,Z=Bt,v=Zt;return F(),q(h,{justify:"center"},{default:t(()=>[n(v,{"display-directive":"show","default-expanded-names":g.value?["collapitem"]:"","on-update:expanded-names":M=>g.value=!!String(M),"trigger-areas":["arrow","main"],class:He(["settings-body",g.value?"expand-adv-settings":""])},wn({arrow:t(()=>[n(m,{style:pe(g.value&&{top:"8px"})},{default:t(()=>[n(e(Mo))]),_:1},8,["style"]),n(m,null,{default:t(()=>[n(e(Po))]),_:1})]),default:t(()=>[n(Z,{title:y.$t("settings.advancedSettings"),name:"collapitem"},{default:t(()=>[n(h,{vertical:"",style:{"padding-left":"2em"}},{default:t(()=>[n(e(Ie),nt(at(u)),{trigger:t(()=>[n(h,{vertical:""},{default:t(()=>[n(h,{wrap:!1,align:"center"},{default:t(()=>[n(b,{text:"",disabled:!y.threadMax,style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:f[0]||(f[0]=M=>a.value=!a.value)},{icon:t(()=>[n(m,null,{default:t(()=>[n(e(Oo))]),_:1})]),default:t(()=>[S(" "+d(y.$t("settings.enableMultiThreads")),1)]),_:1},8,["disabled"]),n(L,{value:a.value,"onUpdate:value":f[1]||(f[1]=M=>a.value=M),disabled:!y.threadMax,size:"small"},null,8,["value","disabled"])]),_:1}),n(h,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(U,{value:l.value,"onUpdate:value":f[2]||(f[2]=M=>l.value=M),disabled:!y.threadMax||!a.value,step:1,min:2,max:y.threadMax,style:{width:"120px"}},null,8,["value","disabled","max"]),n(D,{onBlur:f[3]||(f[3]=M=>l.value??(l.value=2)),size:"tiny",value:l.value,"onUpdate:value":f[4]||(f[4]=M=>l.value=M),disabled:!y.threadMax||!a.value,step:1,min:2,max:y.threadMax,style:{width:"10em"}},{suffix:t(()=>[S(d(y.$t("threads",l.value)),1)]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[S(" "+d(y.$t("settings.multiThreadsTooltip")),1)]),_:1},16),n(e(Ie),nt(at(u)),{trigger:t(()=>[n(h,{vertical:""},{default:t(()=>[n(h,{wrap:!1,align:"center"},{default:t(()=>[n(b,{text:"",focusable:!1,style:{"white-space":"nowrap","font-size":"smaller"}},{icon:t(()=>[n(m,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Uo))]),_:1})]),default:t(()=>[S(" "+d(y.$t("settings.maxZipFileSize"))+": ",1)]),_:1})]),_:1}),n(h,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(U,{tooltip:!1,value:s.value,"onUpdate:value":f[5]||(f[5]=M=>s.value=M),step:1,min:It,max:ln,style:{width:"120px"}},null,8,["value"]),n(D,{onBlur:f[6]||(f[6]=M=>s.value??(s.value=It)),size:"tiny",value:s.value,"onUpdate:value":f[7]||(f[7]=M=>s.value=M),step:"1",min:It,max:ln,style:{width:"10em"}},{suffix:t(()=>[S("(MB)")]),_:1},8,["value"])]),_:1})]),_:1})]),default:t(()=>[S(" "+d(y.$t("settings.maxZipFileSizeTooltip")),1)]),_:1},16),n(e(Ie),nt(at(u)),{trigger:t(()=>[n(h,{wrap:!1,align:"center"},{default:t(()=>[n(b,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:f[8]||(f[8]=M=>p.value=!p.value)},{icon:t(()=>[n(m,null,{default:t(()=>[n(e(Wt))]),_:1})]),default:t(()=>[S(" "+d(y.$t("settings.useFolderNameForZip")),1)]),_:1}),n(L,{value:p.value,"onUpdate:value":f[9]||(f[9]=M=>p.value=M),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[S(" "+d(y.$t("settings.useFolderNameForZipTooltip")),1)]),_:1},16),n(e(Ie),nt(at(u)),{trigger:t(()=>[n(h,{wrap:!1,align:"center"},{default:t(()=>[n(b,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:f[10]||(f[10]=M=>i.value=!i.value)},{icon:t(()=>[n(m,null,{default:t(()=>[n(e(yn))]),_:1})]),default:t(()=>[S(" "+d(y.$t("settings.retainOriginalExtension")),1)]),_:1}),n(L,{value:i.value,"onUpdate:value":f[11]||(f[11]=M=>i.value=M),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[S(" "+d(y.$t("settings.retainExtTooltip")),1)]),_:1},16),n(e(Ie),nt(at(u)),{trigger:t(()=>[n(h,{vertical:""},{default:t(()=>[n(h,{wrap:!1,align:"center"},{default:t(()=>[n(b,{disabled:!e(T),text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:f[12]||(f[12]=M=>z.value=!z.value)},{icon:t(()=>[n(m,null,{default:t(()=>[n(e(No))]),_:1})]),default:t(()=>[S(" "+d(y.$t("settings.shrinkImage")),1)]),_:1},8,["disabled"]),n(L,{disabled:!e(T),value:z.value,"onUpdate:value":f[13]||(f[13]=M=>z.value=M),size:"small"},null,8,["disabled","value"])]),_:1}),n(h,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(U,{value:_.value,"onUpdate:value":f[14]||(f[14]=M=>_.value=M),disabled:!z.value||!e(T),step:1,min:qi,max:sn,style:{width:"120px"}},null,8,["value","disabled"]),n(D,{size:"tiny",onBlur:f[15]||(f[15]=M=>_.value??(_.value=8)),value:_.value,"onUpdate:value":f[16]||(f[16]=M=>_.value=M),disabled:!z.value||!e(T),step:1,min:8,max:sn*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[w("span",Hi,d(y.$t("width")),1)]),suffix:t(()=>[S("px")]),_:1},8,["value","disabled","max"])]),_:1}),n(h,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(U,{value:A.value,"onUpdate:value":f[17]||(f[17]=M=>A.value=M),disabled:!z.value||!e(T),step:1,min:Gi,max:rn,style:{width:"120px"}},null,8,["value","disabled"]),n(D,{size:"tiny",onBlur:f[18]||(f[18]=M=>A.value??(A.value=8)),value:A.value,"onUpdate:value":f[19]||(f[19]=M=>A.value=M),disabled:!z.value||!e(T),step:1,min:8,max:rn*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[w("span",Vi,d(y.$t("height")),1)]),suffix:t(()=>[S("px")]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[S(" "+d(y.$t("settings.shrinkImageTooltip")),1)]),_:1},16)]),_:1})]),_:1},8,["title"])]),_:2},[g.value?{name:"header-extra",fn:t(()=>[n(e(Ie),{"keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(b,{onClick:e(Jo),size:"tiny",style:{"font-size":"xx-small"}},{default:t(()=>[S(d(y.$t("reset")),1)]),_:1},8,["onClick"])]),default:t(()=>[S(" "+d(y.$t("settings.resetButtonTooltip")),1)]),_:1})]),key:"0"}:void 0]),1032,["default-expanded-names","on-update:expanded-names","class"])]),_:1})}}}),Qi=Re(Ki,[["__scopeId","data-v-a8f8d2db"]]),Yi={},Xi={style:{color:"gray","padding-left":"20px"}},Ji=["innerHTML"];function es(o,u){const g=Ut,a=$e;return F(),q(a,{vertical:"",justify:"end"},{default:t(()=>[n(g,{style:{margin:"0px"}}),n(a,{justify:"center"},{default:t(()=>[w("ul",Xi,[(F(!0),oe(Te,null,Ge(o.$tm("descriptions"),l=>(F(),oe("li",{key:l,style:{"text-align":"left"},innerHTML:l},null,8,Ji))),128))])]),_:1})]),_:1})}const ts=Re(Yi,[["render",es]]),ns="modulepreload",as=function(o){return"/avif2jpeg/dist/"+o},un={},ve=function(u,g,a){let l=Promise.resolve();if(g&&g.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),p=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));l=Promise.allSettled(g.map(z=>{if(z=as(z),z in un)return;un[z]=!0;const _=z.endsWith(".css"),A=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${z}"]${A}`))return;const r=document.createElement("link");if(r.rel=_?"stylesheet":ns,_||(r.as="script"),r.crossOrigin="",r.href=z,p&&r.setAttribute("nonce",p),document.head.appendChild(r),_)return new Promise((T,y)=>{r.addEventListener("load",T),r.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${z}`)))})}))}function s(i){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=i,window.dispatchEvent(p),!p.defaultPrevented)throw i}return l.then(i=>{for(const p of i||[])p.status==="rejected"&&s(p.reason);return u().catch(s)})},Dn="English",Rn="🇬🇧",jn='AVIF to JPEG "Offline" Batch Converter',Bn="It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",Zn="Drag & Drop AVIF Images to Convert",Wn=["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data is sent to any server</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.'],Hn="Select your language",Vn="Choose Target File Extentions",qn={avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types",edit_type:"Edit File Extension List"},Gn="Input a list of comma separated file extentions to load.<br>e.g.) .jpg,.gif,.png",Kn="Load Images",Qn="Select your images from a dialog window.<br>*Multiple selection allowed.",Yn="Load a Whole Folder",Xn=`Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>*It will show "Upload" button, but it actually doesn't upload anything to any server.`,Jn="Converting images",ea="Aborted",ta="Some files failed to convert",na="Completed",aa="Currently Busy",oa="No files with the extentions were found.",la="Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",ia="Cancel",sa="Save",ra="Close",ua="Open",da="Re-convert",ca="Convert previous selected {n} @:files again",pa="File | Files",fa="thread | threads",ga="You have not saved the converted images yet.",ma="Data have not been saved",va="Open Source",ha="Open the converted image",_a="Copied to clipboard",ya="The converted image was copied to your clipboard as DataURL.",wa="Copy the converted image as DataURL",ba="Convert Again",ka={expandLogTooltip:"Displaying the entire log may severely reduce conversion speed.",expandLog:"Show entire log",autoScroll:"Auto scroll",showOnlyErrors:"Show only errors",log:"Log",outInRate:"Out / In Ratio",elapsedTime:"Elapsed Time",multiThreading:"Multi-Threading",outputSettings:"Output Settings",totalSize:"Total Size",totalFiles:"Number of Files",confirmDownloadMessage:"It will start to download {0} zip files.",inputSize:"Input Size",outputSize:"Output Size",filterSuccess:"Hide completed item",progressErrors:"Failed items",progressStarted:"Started Items",progressTotal:"Total number of files",zippingProgress:"Zipping progress",zipped:"ZIPPED",openFailedList:"Open failed file list",zipFailedList:"Pack failed files into Zips",table:{index:"index",status:"status",core:"thread",details:"file"},saveFailedList:"Save failed file list",done:"done",convertedZips:"successfully completed ZIP",progressSuccess:"Completed Files",downloadConvertedImage:"Download Converted Image",failureZippingFailedFiles:"Failure while zipping the failed files.",browseConvertedImages:"Browse converted images",index:"Index",Original:"Original",Converted:"Converted",saveAllZipsTooltip:"Save all ZIP files",Shrinked:"Shrinked",Shrinking:"Shrinking"},xa={maxZipFileSize:"Max zip file size",retainExtTooltip:"New extension will be appended to original extension",retainOriginalExtension:"Keep Original File Extension",qualitytooltip:"Set image quality for output",quality:"Image Quality",maxZipFileSizeTooltip:"Set smaller value if memory problems occur.",ignoreExtTooltip:'Try to load files that don"t have image file extension',ignoreFileExtensions:"Load All File Types",imageTypeTooltip:"Choose image format for output",imageType:"Image Type",advancedSettings:"Advanced Settings",enableMultiThreads:"Enable multi-threading",resetButtonTooltip:"Restore all settings to default.",multiThreadsTooltip:"Convert images in multi-threaded",shrinkImageTooltip:"If the image dimensions are larger than the specified value, shrink the image to that value",shrinkImage:"Shrink images that exceed the following dimensions",useFolderNameForZip:"Use dropped folder name for the zip file",useFolderNameForZipTooltip:"If a folder is dropped or selected, its name is used as the name of the output ZIP file"},za="Disabled",Aa="Download",Ia="Reset",Ta="Back",Sa="Failed",Ca="Success",La="Previous version",$a=`
Height`,Ea="Width",Fa="Don't show this message again",Ma="About the warning when selecting a folder",Pa="OK",Oa={},Ua="You must press the “Upload” button here to load all the images in the folder, but the data loaded by this application is never actually uploaded to the server.",Na="Continue",Da="Cancel",Ra="When you select a folder instead of a file as input on a website, major web browsers will display a warning like the image below.",ja="This page may be an outdated version. Please reload the page.",Ba="Reload",Za='If the conversion process frequently fails and an “Out of Memory” message appears, try reducing or disabling the number of "multi-threads" in the "Advanced Settings".',Wa="Next",Ha="Previous",Va={lang:Dn,flags:Rn,title:jn,metaDescription:Bn,droptarget:Zn,descriptions:Wn,selectLanguage:Hn,fileTypeRadioTitle:Vn,fileTypeRadioOptions:qn,editAcceptTypes:Gn,loadbutton:Kn,loadbuttontooltip:Qn,loadfolderbutton:Yn,loadfoldertooltip:Xn,processing:Jn,aborted:ea,incomplete:ta,completed:na,interfered:aa,noimage:oa,avifUnsupported:la,cancel:ia,save:sa,close:ra,open:ua,reconvert:da,reconvertTip:ca,files:pa,threads:fa,confirmCloseDialog:ga,confirmCloseDialogTitle:ma,githubOpenSource:va,convertedImageUrlTooltip:ha,copiedDataURLDialogTitle:_a,copiedDataURLMessage:ya,convertedImageDataUrlTooltip:wa,convertAgain:ba,status:ka,settings:xa,disabled:za,Download:Aa,reset:Ia,back:Ta,failed:Sa,success:Ca,previousVersion:La,height:$a,width:Ea,checkboxTextDontShowThis:Fa,loadfolderNotifyingTitle:Ma,OK:Pa,loadfolderNotifyingMessage:Oa,loadfolderNotifyingMessageTerm2:Ua,Continue:Na,Cancel:Da,loadfolderNotifyingMessageTerm1:Ra,errMsgWorkerLoadError:ja,Reload:Ba,annotationOutOfMemory:Za,Next:Wa,Prev:Ha},os=Object.freeze(Object.defineProperty({__proto__:null,Cancel:Da,Continue:Na,Download:Aa,Next:Wa,OK:Pa,Prev:Ha,Reload:Ba,aborted:ea,annotationOutOfMemory:Za,avifUnsupported:la,back:Ta,cancel:ia,checkboxTextDontShowThis:Fa,close:ra,completed:na,confirmCloseDialog:ga,confirmCloseDialogTitle:ma,convertAgain:ba,convertedImageDataUrlTooltip:wa,convertedImageUrlTooltip:ha,copiedDataURLDialogTitle:_a,copiedDataURLMessage:ya,default:Va,descriptions:Wn,disabled:za,droptarget:Zn,editAcceptTypes:Gn,errMsgWorkerLoadError:ja,failed:Sa,fileTypeRadioOptions:qn,fileTypeRadioTitle:Vn,files:pa,flags:Rn,githubOpenSource:va,height:$a,incomplete:ta,interfered:aa,lang:Dn,loadbutton:Kn,loadbuttontooltip:Qn,loadfolderNotifyingMessage:Oa,loadfolderNotifyingMessageTerm1:Ra,loadfolderNotifyingMessageTerm2:Ua,loadfolderNotifyingTitle:Ma,loadfolderbutton:Yn,loadfoldertooltip:Xn,metaDescription:Bn,noimage:oa,open:ua,previousVersion:La,processing:Jn,reconvert:da,reconvertTip:ca,reset:Ia,save:sa,selectLanguage:Hn,settings:xa,status:ka,success:Ca,threads:fa,title:jn,width:Ea},Symbol.toStringTag,{value:"Module"})),ls="Arabic",is="German",ss="English",rs="Spanish",us="Finnish",ds="French",cs="Hindi",ps="Indonesian",fs="Italian",gs="Japanese",ms="Korean",vs="Dutch",hs="Polish",_s="Portuguese",ys="Russian",ws="Turkish",bs="Ukrainian",ks="Chinese",xs={ar:ls,de:is,en:ss,es:rs,fi:us,fr:ds,hi:cs,id:ps,it:fs,ja:gs,ko:ms,nl:vs,pl:hs,pt:_s,ru:ys,tr:ws,uk:bs,"zh-hant":"Chinese(hant)",zh:ks},_t=[],qa={en:Va},Vt={},dn=Object.assign({"./locales/ar.json":()=>ve(()=>import("./ar-o1J2_y2K.js"),[]),"./locales/de.json":()=>ve(()=>import("./de-CIPfPXnr.js"),[]),"./locales/en.json":()=>ve(()=>Promise.resolve().then(()=>os),void 0),"./locales/es.json":()=>ve(()=>import("./es-BxsMluep.js"),[]),"./locales/fi.json":()=>ve(()=>import("./fi-BCB3yhOL.js"),[]),"./locales/fr.json":()=>ve(()=>import("./fr-B8ziLCrb.js"),[]),"./locales/hi.json":()=>ve(()=>import("./hi-Ou6svNEh.js"),[]),"./locales/id.json":()=>ve(()=>import("./id-uTMRsydH.js"),[]),"./locales/it.json":()=>ve(()=>import("./it-5NICtYyi.js"),[]),"./locales/ja.json":()=>ve(()=>import("./ja-BCYS2GeR.js"),[]),"./locales/ko.json":()=>ve(()=>import("./ko-ByYcImY5.js"),[]),"./locales/nl.json":()=>ve(()=>import("./nl-CqJvtXZt.js"),[]),"./locales/pl.json":()=>ve(()=>import("./pl-BnzrWnsX.js"),[]),"./locales/pt.json":()=>ve(()=>import("./pt-ODLVMKlw.js"),[]),"./locales/ru.json":()=>ve(()=>import("./ru-wmPb7Tog.js"),[]),"./locales/tr.json":()=>ve(()=>import("./tr-g5G_lfFw.js"),[]),"./locales/uk.json":()=>ve(()=>import("./uk-DM12DBO5.js"),[]),"./locales/zh-hant.json":()=>ve(()=>import("./zh-hant-C9K8Sxzu.js"),[]),"./locales/zh.json":()=>ve(()=>import("./zh-MxYcCZAs.js"),[])});var cn;for(const o in dn){const u=(cn=o.match(/\/([a-z]{2}(?:-[a-z]+)?)\.json$/i))==null?void 0:cn[1];u&&(_t.push(u),!(u in qa)&&(Vt[u]=dn[o]))}let Pt=As();Pt in Vt||(Pt="en");const yt=Do({legacy:!1,globalInjection:!0,locale:Pt,fallbackLocale:"en",messages:qa,warnHtmlMessage:!1,missingWarn:!1,fallbackWarn:!1});async function zs(o){if(yt.global.availableLocales.indexOf(o)>=0)return;const u=await Vt[o]();yt.global.setLocaleMessage(o,u),await rt()}function As(){const o=location.pathname;return String(o.match(/[^/]+(?=\/?$)/)||"").toLowerCase()}const Is=["innerHTML"],Ts=xe({__name:"switch-lang",emits:["lang-ready","lang-change"],async setup(o,{emit:u}){let g,a;const l=Ye(Ve),s=fn(),{locale:i,t:p}=De(),z=u,_=Object.entries(xs).map(([m,b])=>({label:b,value:m}));_.sort((m,b)=>{const L=m.label,h=b.label;return L>h?1:L<h?-1:0}),Ee(()=>{s.afterEach((m,b,L)=>{r(),l.switchToolTipVisibility()})}),vn(async()=>{}),[g,a]=Ro(()=>r()),await g,a();async function A(m){(m!==i.value||yt.global.availableLocales.indexOf(m)===-1)&&(z("lang-change",m),await zs(m),i.value=m,document.title=p("title"),await rt()),z("lang-ready",m)}async function r(){const m=s.currentRoute.value.path||"",b=String(m.match(new RegExp("(?<=^\\/)[^/]+"))||"");b&&_t.includes(b)?(await A(b),i.value=b):await T()}async function T(){const m=y().toLowerCase(),b=m.split(/[-_]/)[0];if(_t.includes(b)){let L=b;if(b==="zh")switch(m){case"zh-hant":case"zh-mo":case"zh-hk":case"zh-tw":L="zh-hant"}await A(L)}}function y(){const m=window.navigator;return m.language||m.userLanguage||m.browserLanguage}function f(m){s.push("/"+m+"/")}return(m,b)=>{const L=be,h=An,U=Ie;return F(),q(U,{to:!1,"display-directive":"show",show:e(l).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(l).LANDSCAPE.value?"left":"bottom",duration:0,delay:50},{trigger:t(()=>[n(h,{ref:"langselect",size:"tiny",style:{width:"100%"},"consistent-menu-width":!1,options:e(_),"_v-model:value":"locale",value:e(i),"onUpdate:value":f},{arrow:t(()=>[n(L,null,{default:t(()=>[n(e(jo))]),_:1})]),_:1},8,["options","value"])]),default:t(()=>[w("div",{innerHTML:m.$t("selectLanguage")},null,8,Is)]),_:1},8,["show","placement"])}}}),Ss=w("span",null,"CONVERT TO👇",-1),Ve=Symbol("global variables"),Cs=xe({__name:"Avif2Jpeg",emits:["ready"],setup(o,{emit:u}){De();const g=u,a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),l=k(null),s=k(2);let i=k(void 0);const p=k(!0),z=k(!1),_=k(!1),A=k(!1),r=k(!1);Bo(Ve,{showTooltipsBeforeMounted:i,LANDSCAPE:p,IS_SP:a,switchToolTipVisibility:L,SSR:!1}),Ee(()=>{h(),window.addEventListener("resize",h),L(),setTimeout(()=>_.value=!0,3e3)});const T=200;let y=0,f=!0;function m(){A.value=!1,y=Date.now()}function b(){const Z=f?0:Math.max(0,T-(Date.now()-y));f=!1,setTimeout(()=>A.value=!0,Z),g("ready")}async function L(){}function h(){const Z=document.body.clientWidth,v=document.body.clientHeight;p.value=Z*.75>v||Z>900}function U(Z){l.value=Z}function D(Z){r.value=Z}return(Z,v)=>{const M=$e,ee=be,te=ct,se=Xe;return F(),q(se,{vertical:"",align:"stretch",justify:"start",style:{height:"100%",position:"relative"}},{default:t(()=>[n(dl,null,{"lang-switch":t(()=>[(F(),q(Zo,null,{default:t(()=>[n(Ts,{onLangChange:m,onLangReady:b})]),_:1}))]),_:1}),n(je,{name:"fade"},{default:t(()=>[e(A)?(F(),q(se,{key:0,vertical:"",align:"stretch",justify:"space-between",style:{height:"100%"}},{default:t(()=>[n(fl),n(M,{justify:"center"},{default:t(()=>[n(Bi,{expanded:e(N).expandExtButtons,"onUpdate:expanded":v[0]||(v[0]=E=>e(N).expandExtButtons=E),target:e(N).acceptTypeValue,"onUpdate:target":v[1]||(v[1]=E=>e(N).acceptTypeValue=E),userExtensions:e(N).editedAcceptTypes,"onUpdate:userExtensions":v[2]||(v[2]=E=>e(N).editedAcceptTypes=E),"disable-notifying-folder-select":e(N).disableNotifyingFolderSelect,"onUpdate:disableNotifyingFolderSelect":v[3]||(v[3]=E=>e(N).disableNotifyingFolderSelect=E),forbidden:e(z),onInput:U,onClick:v[4]||(v[4]=E=>D(!0)),onCancel:v[5]||(v[5]=E=>D(!1))},null,8,["expanded","target","userExtensions","disable-notifying-folder-select","forbidden"])]),_:1}),n(wi,{input:e(l),format:e(N).imageFormat,quality:e(N).imageQuality,"retain-extension":e(N).retainExtension,maxZipSizeMB:e(N).maxZipSizeMB,threads:e(N).multithread?e(N).threadCount:0,"show-note":e(r),"onUpdate:showNote":v[6]||(v[6]=E=>Pe(r)?r.value=E:null),onStart:v[7]||(v[7]=E=>z.value=!0),onEnd:v[8]||(v[8]=E=>z.value=!1),onMultiThreadCount:v[9]||(v[9]=E=>s.value=E)},null,8,["input","format","quality","retain-extension","maxZipSizeMB","threads","show-note"]),n(M,{vertical:"",align:"center"},{default:t(()=>[n(te,{trigger:"manual",placement:"top","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(ee,{size:"4vh",color:"#DADADA",style:{margin:"0px"}},{default:t(()=>[n(e(Wo))]),_:1})]),default:t(()=>[Ss]),_:1})]),_:1}),n(M,{vertical:"",align:"center"},{default:t(()=>[n(Wi,{format:e(N).imageFormat,"onUpdate:format":v[10]||(v[10]=E=>e(N).imageFormat=E),quality:e(N).imageQuality,"onUpdate:quality":v[11]||(v[11]=E=>e(N).imageQuality=E)},null,8,["format","quality"]),n(Qi,{"retain-ext":e(N).retainExtension,"onUpdate:retainExt":v[12]||(v[12]=E=>e(N).retainExtension=E),"use-folder-name-for-zip":e(N).useFolderNameForZip,"onUpdate:useFolderNameForZip":v[13]||(v[13]=E=>e(N).useFolderNameForZip=E),"max-zip-size":e(N).maxZipSizeMB,"onUpdate:maxZipSize":v[14]||(v[14]=E=>e(N).maxZipSizeMB=E),expanded:e(N).expandAdvSettings,"onUpdate:expanded":v[15]||(v[15]=E=>e(N).expandAdvSettings=E),multithread:e(N).multithread,"onUpdate:multithread":v[16]||(v[16]=E=>e(N).multithread=E),"thread-count":e(N).threadCount,"onUpdate:threadCount":v[17]||(v[17]=E=>e(N).threadCount=E),"thread-max":e(s)||0,"shrink-image":e(N).shrinkImage,"onUpdate:shrinkImage":v[18]||(v[18]=E=>e(N).shrinkImage=E),"max-width":e(N).maxWidth,"onUpdate:maxWidth":v[19]||(v[19]=E=>e(N).maxWidth=E),"max-height":e(N).maxHeight,"onUpdate:maxHeight":v[20]||(v[20]=E=>e(N).maxHeight=E)},null,8,["retain-ext","use-folder-name-for-zip","max-zip-size","expanded","multithread","thread-count","thread-max","shrink-image","max-width","max-height"])]),_:1}),n(ts)]),_:1})):fe("",!0)]),_:1})]),_:1})}}}),qt=xe({__name:"App",setup(o){const u={Statistic:{valueFontSize:"1em"},Popover:{borderRadius:"0.4em",boxShadow:"2px 2px 5px 0px #555555"},Tooltip:{},Image:{toolbarColor:"#00000099"}},g=k(!0);return Ee(()=>{g.value=!1}),(a,l)=>{const s=Vo,i=qo,p=Go,z=Ko,_=Qo,A=Ho;return F(),q(A,{"theme-overrides":u,style:{width:"100%",height:"100%"}},{default:t(()=>[n(_,null,{default:t(()=>[n(z,{placement:"top-right",max:20},{default:t(()=>[n(p,{placement:"top-left",closable:!0,max:50},{default:t(()=>[n(i,null,{default:t(()=>[n(s,null,{default:t(()=>[n(Cs,{class:He({hide:e(g)})},null,8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),Ga=[{path:"/",name:"Home",component:qt}];for(const o of _t)Ga.push({path:"/"+o+"/",strict:!0,name:o,component:qt});Yo(qt,{routes:Ga,base:"/avif2jpeg/dist/"},({app:o,router:u,routes:g,isClient:a,initialState:l})=>{o.use(yt)});
