var Za=Object.defineProperty;var Ha=(i,s,u)=>s in i?Za(i,s,{enumerable:!0,configurable:!0,writable:!0,value:u}):i[s]=u;var ut=(i,s,u)=>Ha(i,typeof s!="symbol"?s+"":s,u);import{m as Xe,c as W,o as x,a as h,d as be,u as _n,r as y,b as Re,w as ze,e as t,n as de,f as De,g as qe,h as xe,i as J,_ as zt,j as e,k as st,l as pe,p as Ae,q as o,N as Tt,s as L,t as p,F as Oe,v as it,B as Me,x as He,y as wn,T as At,z as Te,A as Ie,C as Fe,D as Ft,E as at,L as Va,G as Wa,H as re,I as lt,J as qa,K as Ga,M as bn,O as Ht,P as kn,Q as Vt,R as ke,S as Ka,U as Nt,V as nt,W as Qa,X as Ya,Y as Ke,Z as Wt,$ as ct,a0 as Ge,a1 as zn,a2 as Qe,a3 as Sn,a4 as pt,a5 as Et,a6 as dt,a7 as xt,a8 as Xa,a9 as Ye,aa as Ja,ab as on,ac as an,ad as Cn,ae as el,af as Dt,ag as tl,ah as nl,ai as Tn,aj as ol,ak as ln,al as ft,am as al,an as An,ao as ll,ap as Mt,aq as sl,ar as il,as as rl,at as jt,au as xn,av as ul,aw as In,ax as Ln,ay as cl,az as dl,aA as pl,aB as qt,aC as $n,aD as fl,aE as Fn,aF as En,aG as Gt,aH as gl,aI as Dn,aJ as ml,aK as vl,aL as vt,aM as ht,aN as hl,aO as yl,aP as _l,aQ as wl,aR as bl,aS as kl,aT as sn,aU as zl,aV as Sl,aW as Cl,aX as Tl,aY as Al,aZ as xl,a_ as Il,a$ as Ll,b0 as $l,b1 as Fl,b2 as El,b3 as Dl,b4 as Ml}from"./vendor-D3o1LRaX.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function u(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(n){if(n.ep)return;n.ep=!0;const a=u(n);fetch(n.href,a)}})();const Pl={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Ol(i,s){return x(),W("svg",Pl,s[0]||(s[0]=[h("path",{fill:"currentColor",d:"m12 13.4l-4.9 4.9q-.275.275-.7.275t-.7-.275t-.275-.7t.275-.7l4.9-4.9l-4.9-4.9q-.275-.275-.275-.7t.275-.7t.7-.275t.7.275l4.9 4.9l4.9-4.9q.275-.275.7-.275t.7.275t.275.7t-.275.7L13.4 12l4.9 4.9q.275.275.275.7t-.275.7t-.7.275t-.7-.275z"},null,-1)]))}const Mn=Xe({name:"material-symbols-close-rounded",render:Ol}),Ul=["width","height"],Bl={key:1,class:"error"},Rl=["height"],Nl=be({__name:"canvas-thumbnail",props:{source:{},width:{},height:{},fit:{}},setup(i,{expose:s,emit:u}){const l=i;s({}),_n();const n=z(),a=y(!1),r=y(),c=y(100),v=y(100);let b,S;Re(async()=>{await n?b=r.value.getContext("bitmaprenderer"):S=r.value.getContext("2d"),ze(()=>l.source,async d=>{a.value=!1,await n?g(d):T(d)},{immediate:!0})});async function z(){if(typeof window.createImageBitmap!="function"||/firefox/i.test(navigator.userAgent))return!1;const d=new ImageData(1,1);try{return(await createImageBitmap(d,{resizeWidth:1})).close(),!0}catch{return!1}}async function g(d){try{let $,_,f;d instanceof Blob?(f=await createImageBitmap(d,{resizeWidth:Math.max(200,l.width),resizeQuality:"pixelated"}),{width:$,height:_}=f,d=f):d instanceof VideoFrame?($=d.displayWidth,_=d.displayHeight):{width:$,height:_}=d;const{tw:C,th:w,cropx:A,cropy:O,cropw:V,croph:G}=F($,_,l.width,l.height),te=await createImageBitmap(d,A,O,V,G,{resizeWidth:C,resizeHeight:w,resizeQuality:"pixelated"});c.value=C,v.value=w,r.value.style.width=C+"px",r.value.style.height=w+"px",b.transferFromImageBitmap(te),f&&f.close()}catch{a.value=!0}}async function T(d){let $;if(d instanceof Blob){const te=URL.createObjectURL(d);$=new Image,await new Promise(P=>{$.onload=$.onerror=P,$.src=te,setTimeout(P,1e4)}).finally(()=>{}),$.complete,d=$,URL.revokeObjectURL(te)}else if(d instanceof ImageData||d instanceof VideoFrame||d instanceof SVGElement)return;const{width:_,height:f}=d,{tw:C,th:w,sx:A,sy:O,sw:V,sh:G}=F(_,f,l.width,l.height);r.value.width=C,r.value.height=w,r.value.style.width=C+"px",r.value.style.height=w+"px",S.drawImage(d,A,O,V,G),$&&($.src="",$=null)}function F(d,$,_,f){const C=d/$,w=_/f;let A,O,V=0,G=0,te=d,P=$,Z=0,m=0,Q=0,se=0;return C>w?(O=f,A=O*C,V=(A-_)/2*(d/A),te=_*(d/A),se=f,Q=f*C,Z=-(Q-_)/2):(A=_,O=A/C,G=(O-f)/2*($/O),P=f*($/O),Q=_,se=_/C,m=-(se-f)/2),{tw:_,th:f,cropx:V,cropy:G,cropw:te,croph:P,sx:Z,sy:m,sw:Q,sh:se}}return(d,$)=>t(a)?(x(),W("div",Bl,[(x(),W("svg",{xmlns:"http://www.w3.org/2000/svg",style:de({width:Math.min(d.width,d.height)+"px"}),height:Math.min(d.width,d.height),viewBox:"0 0 32 32"},$[0]||($[0]=[h("path",{fill:"currentColor",d:"M2 16A14 14 0 1 0 16 2A14 14 0 0 0 2 16m23.15 7.75L8.25 6.85a12 12 0 0 1 16.9 16.9M8.24 25.16a12 12 0 0 1-1.4-16.89l16.89 16.89a12 12 0 0 1-15.49 0"},null,-1)]),12,Rl))])):(x(),W("canvas",{key:0,ref_key:"canvas",ref:r,width:t(c),height:t(v)},null,8,Ul))}}),Ne=(i,s)=>{const u=i.__vccOpts||i;for(const[l,n]of s)u[l]=n;return u},jl=Ne(Nl,[["__scopeId","data-v-642e679e"]]);function We(i,s=2){const u=Math.sign(i);i=Math.abs(i);const l=["Bytes","KB","MB","GB"],n=i?Math.floor(Math.log(i)/Math.log(1024)):0;return`${(i/Math.pow(1024,n)*u).toFixed(s)}${l[n]}`}function Pn(i,s=100,u=!1){s=typeof s=="number"?{width:s,height:s}:s;const{width:l,height:n}=s;let{width:a,height:r}=i;const c=a/r,v=l/n;return c>=v?(a=u?Math.min(l,a):l,r=a/c|0):(r=u?Math.min(n,r):n,a=r*c|0),{width:a,height:r}}class Zl{constructor(){ut(this,"_currentFileCount",0);ut(this,"_currentZipIndex",0);ut(this,"_totalFileCount",0);ut(this,"_zipLengthSumList",[]);ut(this,"_pathBank",{})}increase(s){return s&&(this._pathBank[s]=[this._zipLengthSumList.length,this._currentFileCount]),this._currentFileCount++,this._totalFileCount++}split(){this._zipLengthSumList.push(this._totalFileCount),this._currentZipIndex++,this._currentFileCount=0}get(s){if(typeof s=="number"){let u=this._zipLengthSumList.findIndex((a,r)=>s<a);u===-1&&(u=this._zipLengthSumList.length);const l=this._zipLengthSumList[u-1]||0,n=s-l;return[u,n]}else{const u=this._pathBank[String(s)];if(u)return u}return null}getZipIndex(){return this._currentZipIndex}getIndex(){return this._totalFileCount}}function Hl(i){return new Promise(s=>setTimeout(s,i))}function Vl(i,s=0,u,l){i.value=u;const n=setTimeout(()=>{i.value=!0},s);return()=>clearTimeout(n)}function Wl(i,s=0){const u=y(i);return ze(u,l=>{l!==void 0&&De(()=>{setTimeout(()=>u.value=void 0,s)})},{immediate:!0}),u}const On=be({__name:"prompt-on-dup",props:qe({preset:{default:"dialog"},title:{},content:{},type:{},show:{type:Boolean},buttons:{},defaultButtons:{},closable:{type:Boolean},draggable:{type:Boolean},closeOnEsc:{type:Boolean},maskClosable:{type:Boolean},showApplyAll:{type:Boolean},labelApplyAll:{default:"Apply this action to all"}},{applyAllChecked:{type:Boolean},applyAllCheckedModifiers:{}}),emits:qe(["start","close","applyAllChange"],["update:applyAllChecked"]),setup(i,{expose:s,emit:u}){const l=i,n=xe(i,"applyAllChecked"),a=u;s({start:g,click:$,close:T,isApplyAllChecked:C});const r=_n(),c={overwrite:"Overwrite",skip:"Skip",rename:"Rename",cancel:"Cancel"},v=y(),b=y(!1);let S,z;ze(()=>l.show,(w,A)=>{w?g():T()},{immediate:l.show});function g(){v.value=F(),b.value=!0,z=void 0,n.value=!1;const w=new Promise(A=>{S=A});return a("start",w),w}function T(){b.value=!1;const w=z;return setTimeout(()=>{S(w),a("close",w)},50),z}function F(){const w=[];if(l.buttons)for(const A of l.buttons){let O,V;if(typeof A=="string"?O=V=A:A instanceof Array?([V,O]=A,typeof O>"u"&&(O=V)):A&&({key:O,label:V}=A),!O||!V)throw new Error("unexpected button item");w.push([V,O])}else(l.defaultButtons||["overwrite","skip","cancel"]).forEach(O=>{if(!(O in c))throw new Error(`${O} doen't exist in DEF_LABELS`);w.push([c[O],O])});return w}function d(w){return typeof w=="function"?w():w}function $(w){z=w,T()}function _(){z="close",T()}function f(w){a("applyAllChange",w)}function C(){return n.value}return(w,A)=>{const O=Me,V=Tt,G=Ae,te=zt;return x(),J(te,{show:t(b),closable:w.closable,draggable:w.draggable,preset:w.preset,title:w.title,content:w.content,type:w.type,onClose:A[1]||(A[1]=P=>w.closable&&_()),onEsc:A[2]||(A[2]=P=>w.closeOnEsc&&_()),onMaskClick:A[3]||(A[3]=P=>w.maskClosable&&_())},{action:e(()=>[r.action?st(w.$slots,"action",{key:0}):(x(!0),W(Oe,{key:1},it(t(v),P=>(x(),J(O,{onClick:Z=>$(typeof P[1]<"u"?P[1]:P[0])},{default:e(()=>[L(p(d(P[0])),1)]),_:2},1032,["onClick"]))),256))]),default:e(()=>[st(w.$slots,"default"),w.showApplyAll?(x(),J(G,{key:0,justify:"end",style:{padding:"1em","font-size":"0.8em"}},{default:e(()=>[o(V,{checked:n.value,"onUpdate:checked":A[0]||(A[0]=P=>n.value=P),onUpdateChecked:f},{default:e(()=>[L(p(w.labelApplyAll),1)]),_:1},8,["checked"])]),_:1})):pe("",!0)]),header:e(()=>[st(w.$slots,"header")]),icon:e(()=>[st(w.$slots,"icon")]),close:e(()=>[st(w.$slots,"close")]),_:3},8,["show","closable","draggable","preset","title","content","type"])}}}),ql={class:"list-label"},Gl={class:"sum"},Kl={class:"size"},Ql={class:"files"},Yl={class:"path"},Xl=3,Jl=be({__name:"file-list",props:qe({additionalFiles:{}},{"file-list":{required:!0},"file-listModifiers":{}}),emits:["update:file-list"],setup(i){const{t:s}=He(),u=i,l=xe(i,"file-list"),n=y([]),a=y(""),r=y(0),c=y(),v=y(!1),b=y(""),S=y([[()=>s("dupAction_replace"),"overwrite"],[()=>s("dupAction_skip"),"skip"],[()=>s("cancel"),"cancel"]]);Re(()=>{ze(()=>u.additionalFiles,async g=>{const T=new Map(l.value.map($=>[$.webkitRelativePath||$.name,$]));let F=!1,d="";for(const $ of g){const _=$.webkitRelativePath||$.name;if(T.has(_)){b.value=_;const f=d||await c.value.start();switch(!d&&v.value&&(d=f),f){case"overwrite":F=!0;break;case"cancel":return;case"skip":default:continue}}T.delete(_),T.set(_,$)}(T.size>l.value.length||F)&&(l.value=[...T.values()])}),ze(()=>l.value[l.value.length-1],()=>{const g=l.value.slice(-3);for(const F of g){const d=F.name;n.value.push({file:F,name:d})}const T=Math.min(Xl,l.value.length);n.value.length>T&&(n.value=n.value.slice(-T)),a.value=We(l.value.reduce((F,d)=>F+d.size,0))})});function z(){l.value.length=0,n.value.length=0}return(g,T)=>{const F=wn,d=Ae,$=Mn,_=Ie,f=Me,C=Te;return x(),W("div",null,[o(d,{class:"container",justify:"stretch",align:"stretch",wrap:!1,size:1},{default:e(()=>[o(d,{class:"list-box",wrap:!1,size:0},{default:e(()=>[h("span",ql,p(g.$t("SourceImageList")),1),o(d,{class:"list-status",vertical:"",size:4,align:"end",justify:"end"},{default:e(()=>[h("div",Gl,p(g.$t("status.total")),1),h("div",Kl,p(t(a)),1),h("div",Ql,[o(F,{active:!0,duration:1e3,"show-separator":"",to:l.value.length,from:t(r),onFinish:T[0]||(T[0]=w=>r.value=l.value.length)},null,8,["to","from"]),L(" "+p(g.$t("files",l.value.length)),1)])]),_:1}),o(At,{name:"list"},{default:e(()=>[(x(!0),W(Oe,null,it(t(n),(w,A)=>(x(),J(jl,{key:w.file._id,source:w.file,width:67,height:100,class:"image-item"},null,8,["source"]))),128))]),_:1})]),_:1}),o(d,{class:"button-box",align:"center",justify:"center"},{default:e(()=>[o(C,{trigger:"hover",placement:"top","keep-alive-on-hover":!1,delay:100},{trigger:e(()=>[o(f,{class:"close-button",bordered:!1,color:"gray",ghost:"",size:"tiny",onClick:T[1]||(T[1]=w=>z())},{default:e(()=>[o(d,{vertical:"",align:"center"},{default:e(()=>[o(_,{size:"1.6em"},{default:e(()=>[o($)]),_:1}),h("span",null,p(g.$t("reset")),1)]),_:1})]),_:1})]),default:e(()=>[L(p(g.$t("resetListButtonTooltip")),1)]),_:1})]),_:1})]),_:1}),o(On,{ref_key:"promptdup",ref:c,closable:"",buttons:t(S),"close-on-esc":"","show-apply-all":"","label-apply-all":g.$t("confirmApplyAllLabel"),"apply-all-checked":t(v),"onUpdate:applyAllChecked":T[2]||(T[2]=w=>Fe(v)?v.value=w:null)},{header:e(()=>[L(p(g.$t("confirmListOverwrite")),1)]),default:e(()=>[h("div",null,p(g.$t("confirmListOverwriteMsg")),1),h("p",Yl,p(t(b)),1)]),_:1},8,["buttons","label-apply-all","apply-all-checked"])])}}}),es=Ne(Jl,[["__scopeId","data-v-3209b149"]]),ts=10,je=y(navigator.hardwareConcurrency?Math.min(navigator.hardwareConcurrency,ts):0),yt={threadCount:{min:2,max:Math.max(2,je.value)}},ns={imageFormat:"image/jpeg",imageQuality:90,expandExtButtons:!1,acceptTypeValue:void 0,editedAcceptTypes:"",expandAdvSettings:!1,retainExtension:!1,maxZipSizeMB:1e3,useFolderNameForZip:!1,multithread:!0,threadCount:je.value,shrinkImage:!1,maxWidth:4096,maxHeight:4096,disableNotifyingFolderSelect:!1,changeLogCheckedDate:0,lang:"",autoStartConversion:!1,outputMethod:"zip",actionOnDuplicate:"prompt"},os=["actionOnDuplicate"],H=Ft(Un({}));function as(){Un(H)}function Un(i){return Object.assign(i,ns)}const Bn="avif2jpeg",Pt=JSON.parse(localStorage.getItem(Bn)||"{}");for(const i in H)if(Pt.hasOwnProperty(i)&&Pt[i]!==void 0){let s=Pt[i];yt.hasOwnProperty(i)&&(yt[i].min>s&&(s=yt[i].min),yt[i].max<s&&(s=yt[i].max)),H[i]=s}function Rn(){const i={};for(const s in H)os.includes(s)||(i[s]=H[s]);localStorage.setItem(Bn,JSON.stringify(i))}window.addEventListener("beforeunload",Rn);function ls(){localStorage.clear(),window.removeEventListener("beforeunload",Rn)}const ss={href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-weight":"bolder"}},is=be({__name:"github",setup(i){const s=at(Je);return(u,l)=>{const n=Ie,a=Ae,r=Te;return x(),J(r,{to:!1,"display-directive":"show",show:t(s).showTooltipsBeforeMounted.value,trigger:"hover",duration:0,delay:0},{trigger:e(()=>[h("a",ss,[o(a,{align:"center",size:0},{default:e(()=>[o(n,{size:"1.2em"},{default:e(()=>[o(t(Va))]),_:1}),l[0]||(l[0]=L("GitHub "))]),_:1,__:[0]})])]),default:e(()=>[L(" "+p(u.$t("githubOpenSource")),1)]),_:1},8,["show"])}}}),rs=["href"],us=be({__name:"licenses",setup(i){const s=y(!1),u={Vue:"https://github.com/vuejs/core/blob/main/LICENSE",Vite:"https://github.com/vitejs/vite/blob/main/LICENSE","Vite SSG":"https://github.com/antfu/vite-ssg/blob/main/LICENSE","Naive UI":"https://github.com/TuSimple/naive-ui/blob/main/LICENSE",Ionicons:"https://github.com/ionic-team/ionicons/blob/main/LICENSE"};return(l,n)=>{const a=Me;return x(),W(Oe,null,[o(a,{text:"",onClick:n[0]||(n[0]=r=>s.value=!0),style:{color:"black","font-size":"small"}},{default:e(()=>n[2]||(n[2]=[L("Licenses")])),_:1,__:[2]}),o(t(zt),{preset:"dialog",ref:"dialog",show:s.value,"onUpdate:show":n[1]||(n[1]=r=>s.value=r),"positive-text":"OK",title:"Licenses"},{default:e(()=>[n[3]||(n[3]=h("h3",null,"Frameworks and Libraries",-1)),h("ul",null,[(x(),W(Oe,null,it(u,(r,c)=>h("li",null,[h("a",{href:r},p(c),9,rs)])),64))]),n[4]||(n[4]=h("h3",null,"App icon",-1)),n[5]||(n[5]=h("div",null,[L(" The app icon is derived from "),h("a",{href:"https://aomediacodec.github.io/av1-avif/"},"AVIF logo"),L(". ")],-1))]),_:1,__:[3,4,5]},8,["show"])],64)}}}),cs=1,ds=12,ps=5,fs="",St={major:cs,minor:ds,build:ps,tag:fs},gs={style:{"font-size":"x-small","user-select":"none"}},ms=be({__name:"version",setup(i){const s=["0.0.118"],u=`${St.major}.${St.minor}.${St.build}${St.tag}`,l=s.map(c=>({label:`v${c}`,key:c,value:c}));function n(c){const{key:v,label:b}=c,S=r(v),z=re("a",{href:S},b),g=re("div",null,z);return re("div",null,g)}function a(c){location.href=r(c)}function r(c){return`/avif2jpeg/old/${c}/`}return(c,v)=>{const b=Wa;return x(),J(b,{"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start",options:t(l),"render-label":n,"onUpdate:value":a},{header:e(()=>[h("span",gs,p(c.$t("previousVersion")),1)]),default:e(()=>[h("span",{style:{cursor:"pointer"}},"v"+p(u))]),_:1},8,["options"])}}}),vs={key:0,style:{color:"red"}},hs=["innerHTML"],ys=be({__name:"changelog",props:{url:{}},setup(i){const s=i,u=y("fetching..."),l=y(!1);Re(()=>a(s.url));let n=0;async function a(c){const v=await fetch(c,{headers:{Accept:"application/vnd.github.v3+json"}}).then(b=>b.ok?b.text():null);u.value="",v&&(u.value=v.replace(/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2}) \+\d+$/mg,(b,S)=>{const z=new Date(b),g=z.getTime(),T=z.toLocaleString();let F="";return g>H.changeLogCheckedDate&&(l.value=!0,g>n&&(n=g),F="update"),`<span class="date ${F}">${T}</span>`}))}function r(){n>H.changeLogCheckedDate&&(H.changeLogCheckedDate=n),l.value=!1}return(c,v)=>{const b=Ie,S=Ae,z=lt;return x(),J(z,{trigger:"click",placement:"bottom","arrow-point-to-center":"","onUpdate:show":r,style:{"margin-left":"-1em","max-width":"80%","white-space":"initial"}},{trigger:e(()=>[o(S,{align:"center",size:1,style:{cursor:"pointer"}},{default:e(()=>[o(b,{component:t(qa),size:"1.5em",color:t(l)?"blue":"silver",style:{transition:"color 0.5s"}},null,8,["component","color"]),L(" "+p(c.$t("changelog")),1)]),_:1})]),default:e(()=>[t(u)?(x(),W("pre",{key:1,innerHTML:t(u),class:"commits"},null,8,hs)):(x(),W("div",vs," connection error "))]),_:1})}}}),_s="modulepreload",ws=function(i){return"/avif2jpeg/dist/"+i},rn={},$e=function(s,u,l){let n=Promise.resolve();if(u&&u.length>0){let r=function(b){return Promise.all(b.map(S=>Promise.resolve(S).then(z=>({status:"fulfilled",value:z}),z=>({status:"rejected",reason:z}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),v=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));n=r(u.map(b=>{if(b=ws(b),b in rn)return;rn[b]=!0;const S=b.endsWith(".css"),z=S?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${z}`))return;const g=document.createElement("link");if(g.rel=S?"stylesheet":_s,S||(g.as="script"),g.crossOrigin="",g.href=b,v&&g.setAttribute("nonce",v),document.head.appendChild(g),S)return new Promise((T,F)=>{g.addEventListener("load",T),g.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${b}`)))})}))}function a(r){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=r,window.dispatchEvent(c),!c.defaultPrevented)throw r}return n.then(r=>{for(const c of r||[])c.status==="rejected"&&a(c.reason);return s().catch(a)})},Nn="English",jn="🇬🇧",Zn='AVIF to JPEG "Offline" Batch Converter',Hn="It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",Vn=["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data is sent to any server</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.',"Use this app at your own risk."],Wn="Select your language",qn="Choose Target File Extentions",Gn={avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types",edit_type:"Edit File Extension List"},Kn="Input a list of comma separated file extentions to load.<br>e.g.) .jpg,.gif,.png",Qn="Select your images from a dialog window.<br>*Multiple selection allowed.",Yn=`Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>*It will show "Upload" button, but it actually doesn't upload anything to any server.`,Xn="Converting images",Jn="Aborted",eo="Some files failed to convert",to="Completed",no="Currently Busy",oo="No files with the extentions were found.",ao="Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",lo="Cancel",so="Save",io="Close",ro="Open",uo="Re-convert",co="Convert previous selected {n} @:files again",po="File | Files",fo="thread | threads",go="You have not saved the converted images yet.",mo="Data have not been saved",vo="Open Source",ho="Open the converted image",yo="Copied to clipboard",_o="The converted image was copied to your clipboard as DataURL.",wo="Copy the converted image as DataURL",bo="Convert Again",ko={expandLogTooltip:"Displaying the entire log may severely reduce conversion speed.",showOnlyErrors:"Show only errors",outInRate:"Out / In Ratio",elapsedTime:"Elapsed Time",multiThreading:"Multi-Threading",outputSettings:"Output Settings",totalSize:"Total Size",totalFiles:"Number of Files",confirmDownloadMessage:"It will start to download {0} zip files.",inputSize:"Input Size",outputSize:"Output Size",filterSuccess:"Hide completed item",progressErrors:"Failed items",progressStarted:"Started Items",progressTotal:"Total number of files",zippingProgress:"Zipping progress",zipped:"ZIPPED",openFailedList:"Open failed file list",zipFailedList:"Pack failed files into Zips",table:{index:"index",status:"status",core:"thread",details:"file"},saveFailedList:"Save failed file list",done:"done",convertedZips:"successfully completed ZIP",progressSuccess:"Completed Files",downloadConvertedImage:"Download Converted Image",failureZippingFailedFiles:"Failure while zipping the failed files.",browseConvertedImages:"Browse converted images",index:"Index",Original:"Original",Converted:"Converted",saveAllZipsTooltip:"Save all ZIP files",Shrinked:"Shrinked",Shrinking:"Shrinking",saveAll:"Save All",progressRetries:"Retrying files",success:"success",started:"started",total:"total",files:"files",failure:"failure",all:"all",filterLogSelect:"filter",showOnlySuccess:"Only successes",showOnlyError:"Only errors",showAll:"Show all",Progress:"Progress",PreviewImage:"Preview Images",Log:"Log",log:"Log",Output:"Output Results",expandLog:"expand log size",autoScroll:"auto-scroll",sortByStatus:"status",sort:"Sort list by",sortByName:"name",sortBySize:"size",sortByOutputSize:"size(output)",sortByStart:"starting order",sortByCompletion:"output order",outputToDir:"Export to Folder",numberOfFilesWrittenToDir:"Number of files written to the folder"},zo={maxZipFileSize:"Max zip file size",retainExtTooltip:"New extension will be appended to original extension",retainOriginalExtension:"Keep Original File Extension",qualitytooltip:"Set image quality for output",quality:"Image Quality",maxZipFileSizeTooltip:"Set smaller value if memory problems occur.",ignoreExtTooltip:'Try to load files that don"t have image file extension',ignoreFileExtensions:"Load All File Types",imageTypeTooltip:"Choose image format for output",imageType:"Image Type",advancedSettings:"Advanced Settings",enableMultiThreads:"Enable multi-threading",resetButtonTooltip:"Restore all settings to default.",multiThreadsTooltip:"Convert images in multi-threaded",shrinkImageTooltip:"If the image dimensions are larger than the specified value, shrink the image to that value",shrinkImage:"Shrink images that exceed the following dimensions",useFolderNameForZip:"Use dropped folder name for the zip file",useFolderNameForZipTooltip:"If a folder is dropped or selected, its name is used as the name of the output ZIP file",useFileSystemAPI:"Directly write output files to the local folder",autoStartConversion:"Automatically start conversion after loading images",outputFolderDenied:"Output folder selection was canceled",saveAsZIP:"Save as a ZIP File",changeSaveMethod:"Change Save Method",chooseOutputFolder:"Choose an output folder",saveToSpecifiedFolder:"Write to Selected Folder Directly",actionOnDuplicate:"Action on Duplicate",autoStartConversionTooltip:"Conversion will start automatically after images are loaded. The list is reset each time you load images.",chooseOutputFolderTooltip:"No output folder selected.",outputType:"Output Type",outputQuality:"Output Quality",permissionDenied:"Failed to get access permission for the folder."},So="Disabled",Co="Download",To="Reset",Ao="Back",xo="Failed",Io="Success",Lo="Previous version",$o=`
Height`,Fo="Width",Eo="Don't show this message again",Do="About the warning when selecting a folder",Mo="OK",Po={},Oo="You must press the “Upload” button here to load all the images in the folder, but the data loaded by this application is never actually uploaded to the server.",Uo="Continue",Bo="Cancel",Ro="When you select a folder instead of a file as input on a website, major web browsers will display a warning like the image below.",No="This page may be an outdated version. Please reload the page.",jo="Reload",Zo='If the conversion process frequently fails and an “Out of Memory” message appears, try reducing or disabling the number of "multi-threads" in the "Advanced Settings".',Ho="Next",Vo="Previous",Wo="or",qo="Source Image Extensions",Go="Changelog",Ko="Choose source image extensions",Qo="Drag & Drop AVIF Images to Convert",Yo="Or just drag & drop",Xo="Install as App",Jo='Installing allows you to launch this web app directly from desktop icons or other shortcuts. The security level is the same as a regular web page, so it remains safe. For more details, please see <a href="https://support.google.com/chrome/answer/9658361">Google’s support page</a>.',ea="Use the browser’s language setting",ta="Installed as an app",na="A new version of the page is available. Click the Reload button to update.",oa="Start Conversion",aa="Default",la="Add Images",sa="Add Entire Folder",ia="Source Image List",ra="Clear the current list of source images",ua="Click here to start conversion",ca="experimental",da="Show confirmation dialog",pa="Overwrite",fa="Skip",ga="Confirm List Overwrite",ma="This path already exists in the list.",va="Replace",ha="Output folder not specified.",ya="Apply this action to all",_a="A {type} with the same name already exists.",wa="file",ba="folder",ka="Overwrite Confirmation",za="Load source images first",Sa="Converted images will be saved to the folder below.",Ca="This feature is experimental. Continue only if it is acceptable to lose data in the output folder.",Ta="Images will be written directly to folder",Aa="Restore all settings to default",xa={lang:Nn,flags:jn,title:Zn,metaDescription:Hn,descriptions:Vn,selectLanguage:Wn,fileTypeRadioTitle:qn,fileTypeRadioOptions:Gn,editAcceptTypes:Kn,loadbuttontooltip:Qn,loadfoldertooltip:Yn,processing:Xn,aborted:Jn,incomplete:eo,completed:to,interfered:no,noimage:oo,avifUnsupported:ao,cancel:lo,save:so,close:io,open:ro,reconvert:uo,reconvertTip:co,files:po,threads:fo,confirmCloseDialog:go,confirmCloseDialogTitle:mo,githubOpenSource:vo,convertedImageUrlTooltip:ho,copiedDataURLDialogTitle:yo,copiedDataURLMessage:_o,convertedImageDataUrlTooltip:wo,convertAgain:bo,status:ko,settings:zo,disabled:So,Download:Co,reset:To,back:Ao,failed:xo,success:Io,previousVersion:Lo,height:$o,width:Fo,checkboxTextDontShowThis:Eo,loadfolderNotifyingTitle:Do,OK:Mo,loadfolderNotifyingMessage:Po,loadfolderNotifyingMessageTerm2:Oo,Continue:Uo,Cancel:Bo,loadfolderNotifyingMessageTerm1:Ro,errMsgWorkerLoadError:No,Reload:jo,annotationOutOfMemory:Zo,Next:Ho,Prev:Vo,or:Wo,TargetFileTypeExt:qo,changelog:Go,TargetFileTypeExtTooltip:Ko,droptargetTooltip:Qo,droptargetLabel:Yo,installAsApp:Xo,PWAinstallAsAppTooltip:Jo,selectLangCloseTooltip:ea,PWAInstalledTooltip:ta,PWAUpdateMessage:na,StartConversion:oa,Default:aa,loadbutton:la,loadfolderbutton:sa,SourceImageList:ia,resetListButtonTooltip:ra,convertTooltip:ua,experimental:ca,dupAction_prompt:da,dupAction_overwrite:pa,dupAction_skip:fa,confirmListOverwrite:ga,confirmListOverwriteMsg:ma,dupAction_replace:va,errMsgOutputDirNotFound:ha,confirmApplyAllLabel:ya,confirmFileOverwriteMsg:_a,file:wa,folder:ba,confirmFileOverwriteTitle:ka,convertUnpreparedTooltip:za,warnAboutFileSysBeforeConversion1:Sa,warnAboutFileSysBeforeConversion2:Ca,warnAboutFileSysTitle:Ta,warnAboutResetMsg:Aa},bs=Object.freeze(Object.defineProperty({__proto__:null,Cancel:Bo,Continue:Uo,Default:aa,Download:Co,Next:Ho,OK:Mo,PWAInstalledTooltip:ta,PWAUpdateMessage:na,PWAinstallAsAppTooltip:Jo,Prev:Vo,Reload:jo,SourceImageList:ia,StartConversion:oa,TargetFileTypeExt:qo,TargetFileTypeExtTooltip:Ko,aborted:Jn,annotationOutOfMemory:Zo,avifUnsupported:ao,back:Ao,cancel:lo,changelog:Go,checkboxTextDontShowThis:Eo,close:io,completed:to,confirmApplyAllLabel:ya,confirmCloseDialog:go,confirmCloseDialogTitle:mo,confirmFileOverwriteMsg:_a,confirmFileOverwriteTitle:ka,confirmListOverwrite:ga,confirmListOverwriteMsg:ma,convertAgain:bo,convertTooltip:ua,convertUnpreparedTooltip:za,convertedImageDataUrlTooltip:wo,convertedImageUrlTooltip:ho,copiedDataURLDialogTitle:yo,copiedDataURLMessage:_o,default:xa,descriptions:Vn,disabled:So,droptargetLabel:Yo,droptargetTooltip:Qo,dupAction_overwrite:pa,dupAction_prompt:da,dupAction_replace:va,dupAction_skip:fa,editAcceptTypes:Kn,errMsgOutputDirNotFound:ha,errMsgWorkerLoadError:No,experimental:ca,failed:xo,file:wa,fileTypeRadioOptions:Gn,fileTypeRadioTitle:qn,files:po,flags:jn,folder:ba,githubOpenSource:vo,height:$o,incomplete:eo,installAsApp:Xo,interfered:no,lang:Nn,loadbutton:la,loadbuttontooltip:Qn,loadfolderNotifyingMessage:Po,loadfolderNotifyingMessageTerm1:Ro,loadfolderNotifyingMessageTerm2:Oo,loadfolderNotifyingTitle:Do,loadfolderbutton:sa,loadfoldertooltip:Yn,metaDescription:Hn,noimage:oo,open:ro,or:Wo,previousVersion:Lo,processing:Xn,reconvert:uo,reconvertTip:co,reset:To,resetListButtonTooltip:ra,save:so,selectLangCloseTooltip:ea,selectLanguage:Wn,settings:zo,status:ko,success:Io,threads:fo,title:Zn,warnAboutFileSysBeforeConversion1:Sa,warnAboutFileSysBeforeConversion2:Ca,warnAboutFileSysTitle:Ta,warnAboutResetMsg:Aa,width:Fo},Symbol.toStringTag,{value:"Module"})),ks="Arabic",zs="German",Ss="English",Cs="Spanish",Ts="Finnish",As="French",xs="Hindi",Is="Indonesian",Ls="Italian",$s="Japanese",Fs="Korean",Es="Dutch",Ds="Polish",Ms="Portuguese",Ps="Russian",Os="Turkish",Us="Ukrainian",Bs="Chinese",Rs={ar:ks,de:zs,en:Ss,es:Cs,fi:Ts,fr:As,hi:xs,id:Is,it:Ls,ja:$s,ko:Fs,nl:Es,pl:Ds,pt:Ms,ru:Ps,tr:Os,uk:Us,"zh-hant":"Chinese(hant)",zh:Bs},_t=[],Ia={en:xa},Kt={},un=Object.assign({"./locales/ar.json":()=>$e(()=>import("./ar-BlQUsQY6.js"),[]),"./locales/de.json":()=>$e(()=>import("./de-DaOkktnE.js"),[]),"./locales/en.json":()=>$e(()=>Promise.resolve().then(()=>bs),void 0),"./locales/es.json":()=>$e(()=>import("./es-Dn9bzDfa.js"),[]),"./locales/fi.json":()=>$e(()=>import("./fi-Du42DQB7.js"),[]),"./locales/fr.json":()=>$e(()=>import("./fr-BHEA5dbc.js"),[]),"./locales/hi.json":()=>$e(()=>import("./hi-DyR3vLWh.js"),[]),"./locales/id.json":()=>$e(()=>import("./id-Dt6xcqz_.js"),[]),"./locales/it.json":()=>$e(()=>import("./it-BFMcyKOK.js"),[]),"./locales/ja.json":()=>$e(()=>import("./ja-DO_GS_KB.js"),[]),"./locales/ko.json":()=>$e(()=>import("./ko-CwQBTgO-.js"),[]),"./locales/nl.json":()=>$e(()=>import("./nl-CVIx3Y2C.js"),[]),"./locales/pl.json":()=>$e(()=>import("./pl-CnCDTIkG.js"),[]),"./locales/pt.json":()=>$e(()=>import("./pt-tm5hjAzx.js"),[]),"./locales/ru.json":()=>$e(()=>import("./ru-BzO4Zv_8.js"),[]),"./locales/tr.json":()=>$e(()=>import("./tr-gEbi1tPy.js"),[]),"./locales/uk.json":()=>$e(()=>import("./uk-DXnC_6XK.js"),[]),"./locales/zh-hant.json":()=>$e(()=>import("./zh-hant-2trgrrlh.js"),[]),"./locales/zh.json":()=>$e(()=>import("./zh-C0XKYdeQ.js"),[])});var yn;for(const i in un){const s=(yn=i.match(/\/([a-z]{2}(?:-[a-z]+)?)\.json$/i))==null?void 0:yn[1];s&&(_t.push(s),!(s in Ia)&&(Kt[s]=un[i]))}let Zt=js();Zt in Kt||(Zt="en");const It=Ga({legacy:!1,globalInjection:!0,locale:Zt,fallbackLocale:"en",messages:Ia,warnHtmlMessage:!1,missingWarn:!1,fallbackWarn:!1});async function Ns(i){if(It.global.availableLocales.indexOf(i)>=0)return!0;const s=await Kt[i]().catch(u=>{});return s?(It.global.setLocaleMessage(i,s),await De(),!0):!1}function js(){const i=location.pathname;return String(i.match(/[^/]+(?=\/?$)/)||"").toLowerCase()}const Zs=be({__name:"header",setup(i){const s=bn(),{locale:u}=He();return(l,n)=>{const a=Ht("router-link"),r=Ae,c=kn;return x(),J(r,{vertical:"",justify:"start"},{default:e(()=>[o(r,{justify:"space-between",align:"center",wrap:!1},{default:e(()=>[o(r,{align:"center"},{default:e(()=>[o(is),o(ms),o(ys,{url:"/avif2jpeg/dist/commits.txt"}),o(us),o(r,{style:{"font-size":"1em"}},{default:e(()=>[t(s).path!=="/"?(x(),J(a,{key:0,to:"/",style:{color:"black"}},{default:e(()=>n[0]||(n[0]=[L("HOME")])),_:1,__:[0]})):pe("",!0)]),_:1})]),_:1}),o(r,{align:"end",id:"langtarget"},{default:e(()=>[st(l.$slots,"lang-switch")]),_:3})]),_:3}),o(c,{style:{margin:"0px"}})]),_:3})}}}),Hs="/avif2jpeg/dist/pwa-64x64.png",Vs={class:"title"},Ws=be({__name:"title",setup(i){const s=Vt();return ke(()=>{const u=s.currentRoute.value.path||"";return!String(u.match(new RegExp("(?<=^\\/)[^/]+"))||"")}),(u,l)=>{const n=Ae;return x(),J(n,{vertical:"",align:"center",justify:"center",style:{margin:"0px"},size:1},{default:e(()=>[h("h1",Vs,[l[0]||(l[0]=h("img",{src:Hs,style:{height:"1em","vertical-align":"middle"}},null,-1)),L(" "+p(u.$t("title")),1)])]),_:1})}}}),qs=Ne(Ws,[["__scopeId","data-v-0b61dfe0"]]),Gs={viewBox:"0 0 15 16",width:"1.13em",height:"1.2em"};function Ks(i,s){return x(),W("svg",Gs,s[0]||(s[0]=[Ka('<path fill="currentColor" d="m6.22 8.14l-3.17 4.28c-.18.24 0 .58.29.58h6.32c.3 0 .47-.34.29-.58L6.8 8.14c-.14-.2-.44-.2-.58 0"></path><path fill="currentColor" d="m9.72 10.09l-1.9 2.57c-.11.14 0 .35.17.35h3.79c.18 0 .28-.2.17-.35l-1.89-2.57a.215.215 0 0 0-.35 0Z"></path><circle cx="10" cy="8" r="1" fill="currentColor"></circle><path fill="currentColor" d="M12.5 16h-10c-.83 0-1.5-.67-1.5-1.5v-13C1 .67 1.67 0 2.5 0h7.09c.4 0 .78.16 1.06.44l2.91 2.91c.28.28.44.66.44 1.06V14.5c0 .83-.67 1.5-1.5 1.5M2.5 1c-.28 0-.5.22-.5.5v13c0 .28.22.5.5.5h10c.28 0 .5-.22.5-.5V4.41a.47.47 0 0 0-.15-.35L9.94 1.15A.5.5 0 0 0 9.59 1z"></path><path fill="currentColor" d="M13.38 5h-2.91C9.66 5 9 4.34 9 3.53V.62c0-.28.22-.5.5-.5s.5.22.5.5v2.91c0 .26.21.47.47.47h2.91c.28 0 .5.22.5.5s-.22.5-.5.5"></path>',5)]))}const Qs=Xe({name:"formkit-fileimage",render:Ks}),Ys={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Xs(i,s){return x(),W("svg",Ys,s[0]||(s[0]=[h("path",{fill:"currentColor",d:"M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h6l2 2h8q.825 0 1.413.588T22 8v10q0 .825-.587 1.413T20 20zm0-2h16V8h-8.825l-2-2H4zm0 0V6z"},null,-1)]))}const Qt=Xe({name:"material-symbols-folder-outline",render:Xs}),Js={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ei(i,s){return x(),W("svg",Js,s[0]||(s[0]=[h("path",{fill:"currentColor",d:"M12 .037C5.373.037 0 5.394 0 12s5.373 11.963 12 11.963c6.628 0 12-5.357 12-11.963S18.627.037 12 .037m-.541 4.8c1.91-.13 3.876.395 5.432 1.934c1.426 1.437 2.51 3.44 2.488 5.317h2.133l-4.444 4.963l-4.445-4.963h2.313c-.001-1.724-.427-2.742-1.78-4.076c-1.325-1.336-2.667-2.11-4.978-2.303a9.2 9.2 0 0 1 3.281-.871zM6.934 6.95l4.445 4.963H9.066c0 1.724.426 2.742 1.778 4.076c1.326 1.336 2.667 2.112 4.978 2.305c-2.684 1.268-6.22 1.398-8.71-1.064c-1.427-1.437-2.512-3.44-2.489-5.317H2.488z"},null,-1)]))}const ti=Xe({name:"simple-icons-convertio",render:ei}),cn=new Set,ni=new Set,oi=new Set,Lt=new Map;function ai(i){const s=Lt.get(i);s&&(Lt.delete(i),s(),Ct==null||Ct(),Ct=null)}function li(){for(const i of Lt.keys())ai(i)}let Ct=null;function La(){li();for(const i of cn)i.onmessage=null,i.terminate();cn.clear(),ni.clear(),oi.clear(),Lt.clear()}function si(i){return new Worker("/avif2jpeg/dist/assets/worker.zip-Bt_6u_43.js",{name:i==null?void 0:i.name})}function ii(i){return new Worker("/avif2jpeg/dist/assets/worker.loader-CKD_eomV.js",{name:i==null?void 0:i.name})}function ri(){return typeof window.showDirectoryPicker=="function"}async function ui(i=!0){let s;try{if(s=await window.showDirectoryPicker(),s&&i&&await $a(s))return s}catch{}return null}async function $a(i){let s;try{s=await i.queryPermission({mode:"readwrite"})}catch{}if(s!=="granted")try{s=await i.requestPermission({mode:"readwrite"})}catch{}return s==="granted"}async function Fa(i,s,u){const l=s.split("/"),n=l.pop();let a=i;for(const c of l)a=await a.getDirectoryHandle(c);const r=await a.getFileHandle(n);return u?r.getFile():r}async function ci(i,s){const u=s.split("/"),l=u.pop();let n=i;for(const a of u)n=await n.getDirectoryHandle(a);return await n.getDirectoryHandle(l)}async function di(i,s,u,l,n){if(l!==!0)try{const c=await i.getFileHandle(s);if(!l||typeof l=="function"&&!await l(c,s,n))return!1}catch(c){if(c.name!=="NotFoundError")throw c}const r=await(await i.getFileHandle(s,{create:!0})).createWritable();return await r.write(u),await r.close(),!0}async function pi(i,s,u,l){const n=u===!0;let a;try{if(a=await i.getDirectoryHandle(s,{create:n}),n)return a;if(!u||typeof u=="function"&&!await u(i,s,l))return null}catch(r){if(r.name==="NotFoundError")a=await i.getDirectoryHandle(s,{create:!0});else throw r}return a}const fi=new Map;function gi(){fi.clear()}async function mi(i,s,u){const l=[];let n=i,a;const r=s instanceof Array?s.concat():String(s).split("/");a=r.join("/");do l.unshift(r.pop()),a=r.join("/");while(r.length);for(const c of l){if(!c)throw new Error("folderName is empty");if(n=await pi(n,c,u,a),!n)return null;a+=c+"/"}return n}async function Ea(i,s,u,l){const n=s.split("/"),a=n.pop();if(!a)throw new Error("fileName is empty");const r=n.length?await mi(i,n,l):i;return r?await di(r,a,u,l,n.length?n.join("/")+"/":"afo"):!1}async function vi(i){try{for await(const s of i.entries())break;return!0}catch(s){if(s.name==="NotFoundError")return!1;throw s}}function hi(i){const s=new Set;for(const u of i){const n=u.webkitRelativePath.split("/");do{n.pop();const a=n.join("/");if(s.has(a))break;s.add(a)}while(n.length>=2)}return s}async function yi(i,s){const l=[...hi(s)].sort(),n=new Set;let a,r="";for(let c of l){let v=c;r&&c.startsWith(r+"/")?v=v.slice(r.length+1):a=i;try{a=await ci(a,v),n.add(c),r=c}catch{r=""}}return n}const Yt="avif2jpeg-db",Xt=1,bt="output-dirs",Da="last-used";async function _i(){return new Promise(i=>{const s=indexedDB.open(Yt,Xt);s.onupgradeneeded=u=>{u.target.result.createObjectStore(bt)},s.onsuccess=s.onerror=i})}async function dn(i){return new Promise(async(s,u)=>{const l=indexedDB.open(Yt,Xt);l.onsuccess=n=>{n.target.result.transaction([bt],"readwrite").objectStore(bt).put(i,Da),s()},l.onerror=u})}async function wi(){return new Promise(async(i,s)=>{const u=await indexedDB.open(Yt,Xt);u.onsuccess=l=>{const n=l.target.result;let a;try{a=n.transaction([bt],"readonly")}catch(v){s(v);return}const c=a.objectStore(bt).get(Da);c.onsuccess=v=>{const b=v.target.result;i(b)},c.onerror=s},u.onerror=s}).catch(i=>null)}const bi=1e3*10;let ot;const Ze=new Map,kt=new Map,$t=new Map;let R;function Ot(i){ot=null,Ze.clear(),kt.clear(),$t.clear(),kt.clear(),$t.clear(),R={...i}}async function ki(i){Ot(i),R.completedFileIdSet.clear(),R.completedFileDat.length=0;let s;try{s=await zi()}catch{return Ot(),{exception:new Error("worker-load-error"),callbackToClearConverter:new Function,callbackToGenerateFailedZips:new Function}}const[u,l]=s;ot=l;const n=new Promise(g=>{l.onmessage=T=>{const F=T.data,{action:d}=F;switch(d){case"squeeze-zip":case"zip-squeeze-error":g(void 0);break}}}),a=new Promise(g=>{u.onmessage=T=>{const{data:{action:F}}=T;F==="close-loader"&&g()}}),r=R.files.map(g=>[g._id,g.webkitRelativePath]);R.files.forEach(g=>kt.set(g._id,g));const c=ze(R.canceled,g=>{if(!g)return;c();const T={action:"cancel-convert"};u.postMessage(T)}),v={action:"start-convert",list:R.files,extraPropsForList:r,outputQuality:R.quality,outputType:R.format,keepExt:R.props.retainExtension,outputExt:R.outputExt,fsysDirHandler:R.fsysDirHandler,existingFolders:R.existingFolders,threads:R.props.threads,maxSize:H.shrinkImage?{width:H.maxWidth,height:H.maxHeight}:null};u.postMessage(v),await a,l.postMessage({action:"squeeze"}),await n,c();const b=()=>{La(),l.onmessage=null,l.terminate(),u.onmessage=null,u.terminate(),Ot()};let S=!1;return{callbackToClearConverter:b,callbackToGenerateFailedZips:async g=>{S||(S=!0,await Ei(g,l,{},R.ConvStats))}}}async function zi(){La();const i=new ii,s=new si,u=new Promise((r,c)=>{const v=T=>{s.removeEventListener("message",z),i.removeEventListener("message",z),clearTimeout(g),T?r(T):c(T)};let b=!1,S=!1;const z=T=>{T.target===s&&(b=!0),T.target===i&&(S=!0),b&&S&&v(!0)};let g=0;s.addEventListener("message",z),i.addEventListener("message",z),g=window.setTimeout(()=>v(!1),bi)}),{port1:l,port2:n}=new MessageChannel,a={action:"set-zip-port"};return s.postMessage({action:"set-port-loader"},[l]),i.postMessage(a,[n]),await u,s.postMessage({action:"set-config",zipSize:R.props.maxZipSizeMB*1024*1024,keepExt:R.props.retainExtension,outputExt:R.outputExt,imageType:R.imageType}),i.addEventListener("message",Ci),s.addEventListener("message",Si),[i,s]}const Si=i=>{const s=i.data,{action:u}=s;switch(u){case"add-zip-completed":{const{fileId:r,entireIndex:c,storedPath:v}=s;return}case"respond-image":{const{url:r,index:c,path:v,size:b,fileId:S}=s;R.ConvStats.convertedImageUrl=r,R.ConvStats.convertedImageSize=b,R.ConvStats.convertedImageIndex=c,R.ConvStats.convertedImageName=v;let z="",g=0,T="";const F=Ze.get(S);if(S>=0){const d=kt.get(S);z=URL.createObjectURL(d),g=d.size,T=d.webkitRelativePath||d.name}R.ConvStats.convertedImageOrgUrl=z,R.ConvStats.convertedImageOrgSize=g,R.ConvStats.convertedImageOrgName=T,R.ConvStats.convertedImageShrinked=F==null?void 0:F.shrinked;return}case"respond-delete":{const{index:r,success:c,fileId:v}=s;Ze.get(v).command="❌deleted",Ze.get(v).completed=!1;return}}switch(u){case"error-push-filelist-zip":const{path:r}=s;R.ConvStats.failedZipDone=!0,R.message.error(`an error occurred "${r}"`,{duration:3e3});return}const{size:l,count:n}=s,a="url"in i.data?i.data.url:"";switch(u){case"push-zip":R.ConvStats.zips.push({url:a,size:l,count:n}),R.ConvStats.zippedTotalCount+=n,R.ConvStats.zippedTotalSize+=l;break;case"squeeze-zip":n>0&&(R.ConvStats.zips.push({url:a,size:l,count:n}),R.ConvStats.zippedTotalCount+=n,R.ConvStats.zippedTotalSize+=l);break;case"push-filelist":R.ConvStats.failedFileZippedCount++;break;case"squeeze-filelist-zip":R.ConvStats.failedZipDone=!0;case"push-filelist-zip":R.ConvStats.failedZips.push({url:a,size:l,count:n});break;case"zip-error":case"zip-squeeze-error":R.ConvStats.zippingErrorCount+=n;break}},Ci=async i=>{const s=i.target,{data:u}=i,{action:l}=u;switch(l){case"list-start":break;case"list-end":break;case"file-start":{const{index:n,path:a,fileId:r}=u;Ai(n,a,r);break}case"file-load":{const{thumbnail:n,width:a,height:r,fileId:c,workerId:v,inputsize:b}=u,S=Ze.get(c);S.core=v,S.command="🖼️loaded",S.width=a,S.height=r,S.size=b,n&&(R.ConvStats.thumbnail=n);break}case"file-converted":{const{index:n,path:a,fileId:r,shrinked:c,outputWidth:v,outputHeight:b,outputsize:S,convertedImageBlob:z}=u,g=Ze.get(r);g.command="🔃converted",g.shrinked=g.shrinked==null?c:g.shrinked,g.outputWidth=v,g.outputHeight=b,g.outputSize=S,R.ConvStats.converted++;break}case"file-sys-completed":case"file-completed":{const{inputsize:n,outputsize:a,fileId:r,storedPath:c}=u,v=Ze.get(r);if(v&&(v.command="✅completed",v.completed=!0,v.fileId=r),R.ConvStats.inputTotalSize+=n,R.ConvStats.outputTotalSize+=a,R.ConvStats.done++,R.ConvStats.success++,R.completedFileIdSet.add(r),l==="file-sys-completed"&&(v.zippedIndex=R.completedFileDat.length,R.completedFileDat.push({path:c,id:r})),l==="file-completed"){const{entireIndex:b}=u;v.zippedIndex=b,R.ConvStats.ziplogs[b]={fileId:r,storedPath:c}}break}case"file-retry":{const{index:n,path:a,fileId:r}=u;xi(n,a,r);break}case"file-error":{const{index:n,path:a,fileId:r}=u;Ii(n,a,r);break}case"file-canceled":{const{fileId:n,path:a}=u;Li(n);break}case"file-skip":{const{fileId:n,path:a}=u;$i(n);break}case"confirm-overwrite":{const{target:n,type:a,path:r,fileId:c,workerId:v}=u,b=await R.enqueueOverwriteConfirmation(n,a,r);s.postMessage({action:"respond-overwrite",command:b,target:n,path:r,fileId:c,workerId:v,skippedFolderPath:a==="folder"&&b.startsWith("skip")?n:""});break}}};let Ti=0;function Ai(i,s,u){const l={key:Ti++,core:-1,index:i,path:s,command:"➡️started"};Ze.set(u,l),R.ConvStats.logs.push(l),$t.has(u)||R.canceled.value||R.ConvStats.startedCount++}function xi(i,s,u){const l=Ze.get(u);l.command="⚠️retry",l.error=!0,R.ConvStats.retried++,$t.set(u,1)}function Ii(i,s,u){const l=Ze.get(u);R.ConvStats.done++,R.ConvStats.failure++,l.command="❗failed",l.error=!0}function Li(i){const s=Ze.get(i);R.ConvStats.done++,R.ConvStats.failure++,s.command="❗canceled",s.error=!0}function $i(i){const s=Ze.get(i);R.ConvStats.done++,R.ConvStats.failure++,s.command="⚠skipped",s.error=!0}async function Fi(i){if(R.fsysDirHandler){const s=R.completedFileDat[i];if(!s)return;const u=s.id;let l="",n=0,a="";if(Ze.get(u),u>=0){const b=kt.get(u);l=URL.createObjectURL(b),n=b.size,a=b.webkitRelativePath||b.name}R.ConvStats.convertedImageOrgUrl=l,R.ConvStats.convertedImageOrgSize=n,R.ConvStats.convertedImageOrgName=a;const r=s.path,c=await Fa(R.fsysDirHandler,r,!0),v=URL.createObjectURL(c);R.ConvStats.convertedImageUrl=v,R.ConvStats.convertedImageSize=c.size,R.ConvStats.convertedImageIndex=i,R.ConvStats.convertedImageName=s.path}else ot==null||ot.postMessage({action:"request-image",index:i})}function Ut(i){ot==null||ot.postMessage({action:"delete-image",index:i})}async function Ei(i,s,u,l){let n=0;for(const a of i){const r=(a.webkitRelativePath||a.name).replace(/^\//,"");if(l.failedZipDone)break;if(u.value)return;n-l.failedFileZippedCount>20&&await new Promise(c=>setTimeout(c,10)),s.postMessage({action:"add-filelist",file:a,path:r}),n++}if(l.failedZipDone){R.message.error("Zipping error files was aborted",{duration:5e3});return}s.postMessage({action:"squeeze-filelist"})}let wt;async function Di(i,s,u,l,n,a){let r="";const c=document.createElement("canvas"),v=c.getContext("2d");let b=new Nt;const S=[b],z=new Zl,g=u.format,T=u.quality/100,F=[...g.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),d=i.length,$=u.maxZipSizeMB*1024*1024,_=u.outputDirHandle;let f=0,C=null,w="",A="",O=0,V=0,G=0,te=0,P=0,Z=!1;const m=[];wt=async E=>{if(_){const ie=m[E];if(!ie)return;let ae="",he=0,ve="";const q=i[ie.originalIndex];ae=URL.createObjectURL(q),he=q.size,ve=q.webkitRelativePath||q.name,n.convertedImageOrgUrl=ae,n.convertedImageOrgSize=he,n.convertedImageOrgName=ve;const Le=ie.path,X=await Fa(_,Le,!0),ge=URL.createObjectURL(X);n.convertedImageUrl=ge,n.convertedImageSize=X.size,n.convertedImageIndex=E,n.convertedImageName=ie.path}else{const[ie,ae]=z.get(E),he=S[ie],ve=he.get(ae,g);n.convertedImageIndex=E,n.convertedImageName=he.getPathByIndex(ae),n.convertedImageUrl=URL.createObjectURL(ve),n.convertedImageSize=ve.size;let q="",Le=0,X="";const ge=Q[E];q=URL.createObjectURL(ge),Le=ge.size,X=ge.webkitRelativePath||ge.name,n.convertedImageOrgUrl=q,n.convertedImageOrgSize=Le,n.convertedImageOrgName=X}};const Q=[];for(const E of i){if(l.value)break;const ie=E.name;let ae="";const he=E.size,ve=(E.webkitRelativePath||E.relativePath||ie).replace(/^\//,""),q=document.createElement("img"),Le=ve||ie,X={key:G++,core:-1,index:f++,path:ve,command:"➡️start"};n.startedCount=f,n.logs.push(X),n.logs.length-1,r&&(URL.revokeObjectURL(r),r=""),r=URL.createObjectURL(E),A=r,O=E.size,q.src=r;const ge=await Ma(q).then(()=>!0).catch(()=>!1);if(!q.complete||!ge||l.value){n.done++,n.failure++,X.command="❗failed";continue}const Se=q.width,Ce=q.height;c.width=Se,c.height=Ce,v.drawImage(q,0,0,Se,Ce,0,0,Se,Ce),X.command="🖼️imgload",X.width=Se,X.height=Ce,X.size=E.size,n.thumbnail=q;const Pe=await new Promise(ce=>{const ye=Be=>{C=Be,ce(Be)};c.toBlob(ye,g,T)});if(l.value)break;if(!Pe){n.failure++;continue}V=Pe.size,n.converted++,X.outputSize=V;const Ue=Le.replace(u.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"");if(_){ae=Ue+"."+F;try{if(!await Ea(_,ae,Pe,async(ye,Be,j)=>{const ue=ye instanceof FileSystemFileHandle?"file":"folder",U=j+Be;switch(await a(U,ue,"fname")){case"overwrite-all":case"overwrite":return!0;case"skip-all":case"close":case"cancel":case"skip":return!1;default:throw new Error("unexpected OverwriteCommand command")}})){X.command="⚠skipped",n.done++;continue}}catch{X.command="❗failed",n.done++;continue}}else{let ce="";if(P+V>=$){try{await b.wait(),ce=await b.url()}catch{Z=!0,alert("memory problem occurred");break}n.zips.push({url:ce,size:P,count:te}),n.zippedTotalCount+=te,n.zippedTotalSize+=P,P=0,te=0,z.split(),b=new Nt,S.push(b)}P+=V;for(let ye=1;ye<255&&(ae=Ue+(ye>1?`(${ye})`:"")+"."+F,!!b.has(ae));ye++);n.done++;try{te++,b.add(ae,Pe)}catch{continue}z.increase(),Q.push(E),n.ziplogs.push({fileId:E._id,storedPath:ae})}n.inputTotalSize+=he,n.outputTotalSize+=V,w=ae,X.zippedIndex=n.success,n.success++,X.command="✅completed",X.completed=!0,X.fileId=E._id,s.add(E._id),m.push({id:E._id,path:ae,originalIndex:f-1})}if(n.success>0)if(d===1)C&&(n.convertedImageIndex=0,n.convertedImageName=w.replace(/^.*\/(?=[^/]+$)/,"").replace(u.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+F,n.convertedImageUrl=URL.createObjectURL(C),n.convertedImageOrgUrl=A,n.convertedImageOrgSize=O);else try{if(Z)throw new Error("terminated zipping process for memory problems");await b.wait();const E=await b.url();n.zips.push({url:E,count:te,size:P}),n.zippedTotalCount+=te,n.zippedTotalSize+=P}catch{}const se={value:!1},fe=()=>{se.value=!0,S.forEach(E=>E.clear()),S.length=0,Q.length=0,wt=null};let N=!1;return{callbackToClearConverter:fe,callbackToGenerateFailedZips:async E=>{N||(N=!0,Pi(E,$,n,se))}}}function Mi(i){wt==null||wt(i)}async function Pi(i,s,u,l){let n=0,a=0,r=new Nt;for(let c=0;c<i.length;c++){const v=i[c],b=(v.webkitRelativePath||v.name).replace(/^\//,"");if(l.value)return;try{await r.add(b,v)}catch{alert(`an error occurred during access to "${b}"`);break}if(a+=v.size,n++,u.failedFileZippedCount++,a>=s||c===i.length-1){await r.zip();const S=await r.url();u.failedZips.push({url:S,size:a,count:n}),r.clear(),a=0,n=0}}u.failedZipDone=!0}function Ma(i){if(typeof i.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((s,u)=>{i.onload=s,i.onerror=u})}const Oi=["href","download","title"],Ui='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',Bi=be({__name:"thumbnail",props:{src:{},width:{},height:{},maxWidth:{default:100},maxHeight:{default:100},expand:{type:Boolean,default:!1},loading:{type:Boolean},fileName:{},allowNext:{type:Boolean},allowPrev:{type:Boolean},hidden:{type:Boolean}},emits:["load","error","next","prev"],setup(i,{expose:s,emit:u}){const{t:l}=He(),n=i,a=u,r=y();y();const c=y(!0),v=y(""),b=y(n.width||100),S=y(n.height||100),z=y(!1),g=Ft({width:b.value+"px",height:S.value+"px",minWidth:"50px",minHeight:"50px"});nt(()=>{var C,w,A;(w=(C=r.value)==null?void 0:C.previewInstRef)==null||w.setPreviewSrc(Ui),URL.revokeObjectURL((((A=r.value)==null?void 0:A.imageRef)||{}).src),r.value=null});const T=y(!0);Qa(()=>{T.value=!1}),Ya(()=>{T.value=!0}),ze(n,(C,w)=>{g.width=(n.width||100)+"px",g.height=(n.height||100)+"px"}),ze(()=>n.src,(C,w)=>{T.value&&$(C)},{immediate:!0}),s({download:_,openPreview:f,active:T});async function F(C){const w=C.target,A=w.naturalWidth,O=w.naturalHeight,{width:V,height:G}=Pn({width:A,height:O},{width:n.maxWidth||100,height:n.maxHeight||100},n.expand);b.value=V,S.value=G,a("load",{src:w.src,width:A,height:O}),c.value=!1,await new Promise(te=>setTimeout(te,100)),!c.value&&(z.value=!0)}function d(C){const w=C.target;a("error",w.src)}async function $(C){c.value=!0,z.value=!1,v.value=C}function _(){const C=document.createElement("a");C.href=v.value,C.download=n.fileName,C.click()}function f(){var C;(C=r.value)==null||C.click()}return(C,w)=>{const A=zn,O=Sn,V=Ae,G=Wt;return Ke((x(),W("div",null,[o(t(Te),null,{trigger:e(()=>[o(G,{show:t(c)||n.loading},{default:e(()=>[o(V,{justify:"center",align:"center",style:de([t(g),{"line-height":"0px"}])},{default:e(()=>[Ke(h("a",{href:t(v),onClick:w[0]||(w[0]=ct(()=>{},["left","prevent"])),target:"_blank",download:n.fileName,title:n.fileName},[o(Ge,{mode:"in-out"},{default:e(()=>[Ke(o(A,{ref_key:"nImageRef",ref:r,"show-toolbar-tooltip":"",onLoad:F,onError:d,src:t(v),width:t(b),height:t(S),style:{border:"1px solid silver"}},null,8,["src","width","height"]),[[Qe,t(z)]])]),_:1})],8,Oi),[[Qe,!(t(c)||n.loading)]]),Ke(o(O,null,null,512),[[Qe,t(c)||n.loading]])]),_:1},8,["style"])]),_:1},8,["show"])]),default:e(()=>[L(" "+p(n.fileName),1)]),_:1})],512)),[[Qe,!C.hidden]])}}}),pn=Ne(Bi,[["__scopeId","data-v-a62add3a"]]),Ri=["href","download","title"],Ni={class:"left-num"},ji={class:"right-num"},Zi=["href","download","title"],Hi={class:"left-num"},Vi={class:"right-num"},Wi=["href","download"],qi=be({__name:"image-viewer",props:{url:{},originalUrl:{},name:{},originalName:{},size:{},originalSize:{},length:{},index:{},isSingle:{type:Boolean},variousInfo:{}},emits:["demand-image","delete-image","close"],setup(i,{expose:s,emit:u}){const l=at(Je),n=i,a=u;s({download:Le,cleanup:ue,openPreview:j,isPreviewing(){return V.value},changeIndex(U){T.value=U}});const r=pt(),{t:c}=He();Et();const v=y(),b=y(),S=y(),z=dt("viewerItemContainer"),g=y(!0),T=y(Math.max(n.index,0)+1),F=y(1),d=y(1),$=y(""),_=y(""),f=y(1),C=y(1),w=y(!1),A=y(!1),O=y(!1),V=ke(()=>{var U,M;return(M=(U=S.value)==null?void 0:U.previewInstRef)==null?void 0:M.displayed}),G=ke(()=>{var U,M;return((M=(U=S==null?void 0:S.value)==null?void 0:U.previewInstRef)==null?void 0:M.previewSrc)===$.value}),te=ke(()=>T.value<n.length),P=ke(()=>T.value>1),Z=y("viewer-item-init"),m=y(0),Q=y(!0);y({width:"auto",height:"auto"});const se=y(!1);Re(()=>{document.body.addEventListener("keydown",he),document.body.addEventListener("keydown",ae),E(T.value-1),ie()}),nt(()=>{clearTimeout(fe),document.body.removeEventListener("keydown",he),document.body.removeEventListener("keydown",ae),se.value=!0}),xt(()=>{URL.revokeObjectURL(n.url),URL.revokeObjectURL(n.originalUrl)});let fe=-1;ze(T,(U,M)=>{T.value<1||T.value>n.length||U===M||(clearTimeout(fe),U>M?Z.value="viewer-item-next":Z.value="viewer-item-prev",fe=setTimeout(()=>{n.index!==T.value-1&&(m.value=g.value?m.value:~m.value,Q.value=!1,E(T.value-1))},50))});let N="",K="";ze(()=>n.url,()=>{var k,D;let U="";n.index===0&&g.value?(g.value=!1,T.value=1,U=n.url):n.index===T.value-1?(g.value=!1,w.value=!1,U=n.url):(URL.revokeObjectURL(n.url),URL.revokeObjectURL(n.originalUrl));const M=N,ne=K;if(URL.revokeObjectURL(M),URL.revokeObjectURL(ne),N=n.url,K=n.originalUrl,U){try{if((D=(k=S.value)==null?void 0:k.previewInstRef)!=null&&D.displayed){G.value?S.value.previewInstRef.setPreviewSrc(U):S.value.previewInstRef.setPreviewSrc(n.originalUrl);try{const ee=S.value.previewInstRef.displayed;S.value.previewInstRef.handleAfterLeave(),S.value.previewInstRef.displayed=ee}catch{}}}catch{}$.value=U,_.value=n.originalUrl}},{immediate:!0});function E(U){w.value=!0,A.value=!1,O.value=!1,De(()=>a("demand-image",U))}function ie(){if(!l.IS_SP)return;let U=z.value.$el,M=0,ne=0,k=0,D=0,ee=0;const we=oe=>{M=oe.touches[0].pageX,ne=oe.touches[0].pageY,ee=Date.now()};U.addEventListener("touchstart",we);const B=oe=>{k=oe.touches[0].pageX,D=oe.touches[0].pageY,Y()};window.addEventListener("touchmove",B);const I=()=>{Y();const oe=k-M,le=Math.abs(oe),_e=D-ne,me=Math.abs(_e);le<me||le<30||ge(oe>0?-1:1)};window.addEventListener("touchend",I);const Y=()=>{const oe=Date.now();oe-ee>500&&(M=k,ne=D),ee=oe};nt(()=>{U.removeEventListener("touchstart",we),window.removeEventListener("touchmove",B),window.removeEventListener("touchend",I),U=null})}function ae(U){var M,ne,k,D;if(U.key==="Escape")try{(ne=(M=S.value)==null?void 0:M.previewInstRef)!=null&&ne.displayed&&(U.stopPropagation(),(D=(k=S.value)==null?void 0:k.previewInstRef)==null||D.toggleShow(!1))}catch{}}function he(U){switch(U.code){case"ArrowRight":ge(1);break;case"ArrowLeft":ge(-1);break;case"Home":T.value=1;break;case"End":T.value=n.length;break;case"Space":case"Enter":case"NumpadEnter":if(!V.value)return;Ce();break;case"ArrowUp":case"ArrowDown":default:return}U.stopPropagation(),U.preventDefault()}function ve({width:U,height:M}){F.value=U,d.value=M,A.value=!0}function q({width:U,height:M}){f.value=U,C.value=M,O.value=!0}function Le(){G.value?v.value.download():b.value.download()}async function X(U){try{const M=await fetch(U).then(ne=>ne.blob()).then(ne=>new Promise(k=>{const D=new FileReader;D.onload=k,D.readAsDataURL(ne)})).then(ne=>ne.target.result);navigator.clipboard.writeText(M),r.info({title:c("copiedDataURLDialogTitle"),content:()=>re("div",[re("div",c("copiedDataURLMessage"))]),positiveText:"OK"})}catch{r.error({title:"failed to copy Data URL",content:"could not copy Data URL",positiveText:"OK"})}}function ge(U){U>0?T.value=Math.min(n.length,T.value+U)|0:U<0&&(T.value=Math.max(1,T.value+U)|0)}let Se="";const Ce=()=>{var M,ne,k,D;Se=(k=window.getComputedStyle((ne=(M=S==null?void 0:S.value)==null?void 0:M.previewInstRef)==null?void 0:ne.previewRef))==null?void 0:k.transform;const U=G.value;(D=S==null?void 0:S.value)==null||D.next(),De(()=>{var ee;G.value===U&&((ee=S==null?void 0:S.value)==null||ee.next())})};function Pe(){try{De(()=>S.value.previewInstRef.previewRef.style.transform=Se)}catch{}}function Ue({nodes:U}){const M=re(Tn,{color:G.value?"green":"gray",offset:[-20,-12],value:G.value?c("status.Converted"):c("status.Original")},()=>re(Me,{round:!0,onClick(){Ce()},textColor:"white",size:"small",style:{marginLeft:"4px"}},{icon:()=>re(G.value?tl:nl)}));U.next=re(Me,{onClick(){ge(1)},disabled:!te.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>re(an)}),U.prev=re(Me,{onClick(){ge(-1)},disabled:!P.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>re(ol)});try{const ne=U.download.children;ne.default=()=>c("save");const k=ne.trigger();k.props.onClick=Le,ne.trigger=()=>k}catch{}return Be(),[M,...Object.values(U)]}const ce="#pathbox-"+String(Math.random()).substring(2);let ye;function Be(){var U,M,ne;try{if(ye=(ne=(M=(U=S.value)==null?void 0:U.previewInstRef)==null?void 0:M.previewWrapperRef)==null?void 0:ne.parentNode,!ye||ye.querySelector(ce))return;let k=re("div",{id:ce,onMousedown:D=>{D.stopPropagation()},className:"__preview-injected-pathbox"+(G.value?" converted":"")},[re("div",`${String(T.value).padStart(String(n.length).length,"0")}/${String(n.length).padStart(String(n.length).length,"0")}`),re("div",We(G.value?n.size:n.originalSize,0)),re("div",G.value?n.name:n.originalName)]);ln(k,ye),k=null}catch{}}nt(()=>{ye&&(ln(null,ye),ye=null)});function j(){v.value.openPreview()}function ue(){}return(U,M)=>{const ne=Ie,k=Ae,D=Cn,ee=lt,we=Dt,B=Xa;return x(),J(k,{justify:"center",align:"stretch",vertical:"",style:de([{visibility:g.value?"hidden":"visible"},{overflow:"visible"}]),class:"body",ref:"body"},{default:e(()=>[o(B,{ref_key:"nImageGroupRef",ref:S,"show-toolbar-tooltip":"","render-toolbar":Ue,onPreviewNext:Pe},{default:e(()=>[o(k,{wrap:!1,align:"center",justify:"space-between",style:{overflow:"visible"}},{default:e(()=>[o(t(Me),{onClick:M[0]||(M[0]=I=>ge(-1)),bordered:!1,disabled:!t(P),class:Ye({"thumb-arrow":!0,pale:!t(P)}),title:U.$t("Prev")},{icon:e(()=>[o(ne,{size:"30"},{default:e(()=>[o(t(Ja))]),_:1})]),_:1},8,["disabled","class","title"]),o(k,{justify:"center",ref_key:"viewerItemContainer",ref:z,class:"viewer-item-container",style:{width:"100%"}},{default:e(()=>[o(Ge,{name:Z.value},{default:e(()=>[(x(),J(k,{vertical:"",key:m.value},{default:e(()=>[o(k,{align:"center",wrap:!1},{default:e(()=>[o(k,{vertical:""},{default:e(()=>[o(k,{align:"center",justify:"center",wrap:!1},{default:e(()=>[o(k,{align:"center",justify:"center",vertical:"",class:"original-thumb"},{default:e(()=>[h("a",{href:U.originalUrl,onClick:M[4]||(M[4]=ct(I=>{b.value.openPreview()},["prevent"])),download:U.originalName,title:U.originalName,class:"imglink"},[o(k,{align:"center",justify:"center",wrap:!1},{default:e(()=>[o(pn,{ref:I=>{I!=null&&I.active&&(b.value=I)},src:_.value,width:1,"max-width":1,"max-height":1,loading:w.value,"file-name":U.originalName,"allow-next":T.value<n.length,"allow-prev":T.value>1,onLoad:q,onNext:M[1]||(M[1]=I=>ge(1)),onPrev:M[2]||(M[2]=I=>ge(-1)),hidden:!0},null,8,["src","loading","file-name","allow-next","allow-prev"]),o(k,{vertical:"",align:"center"},{default:e(()=>[o(k,{class:"imglink-label"},{default:e(()=>[L(p(t(c)("status.Original")),1)]),_:1}),o(k,{justify:"center",class:"img-size",wrap:!1,size:2},{default:e(()=>[h("span",Ni,p(O.value?f.value:"?"),1),M[11]||(M[11]=L(" × ")),h("span",ji,p(O.value?C.value:"?"),1)]),_:1,__:[11]}),o(k,{justify:"center"},{default:e(()=>[M[3]||(on(-1,!0),(M[3]=o(k,null,{default:e(()=>[L(p(O.value?t(We)(n.originalSize,0):"?"),1)]),_:1})).cacheIndex=3,on(1),M[3])]),_:1})]),_:1})]),_:1})],8,Ri)]),_:1}),o(k,{vertical:"",align:"center",class:"original-thumb"},{default:e(()=>[o(ne,{size:"20",color:"silver",component:t(an)},null,8,["component"])]),_:1}),h("a",{href:$.value,onClick:M[5]||(M[5]=ct(I=>j(),["prevent"])),download:n.name,title:n.name,class:"imglink"},[o(k,{vertical:"",align:"center",justify:"center"},{default:e(()=>[o(k,{class:"imglink-label"},{default:e(()=>[L(p(t(c)("status.Converted")),1)]),_:1}),o(k,{vertical:"",align:"center",justify:"center",size:0},{default:e(()=>[o(k,{justify:"center"},{default:e(()=>{var I;return[o(k,{wrap:!1,style:de((I=n.variousInfo)!=null&&I.shrinked?{color:"blue"}:{}),class:"img-size",size:2},{default:e(()=>[h("span",Hi,p(A.value?F.value:"?"),1),M[12]||(M[12]=L(" × ")),h("span",Vi,p(A.value?d.value:"?"),1)]),_:1,__:[12]},8,["style"])]}),_:1})]),_:1}),o(k,{justify:"center"},{default:e(()=>[L(p(A.value?t(We)(n.size,0):"?"),1)]),_:1})]),_:1})],8,Zi)]),_:1}),o(k,{ref:"fileNameContainer",justify:"center",align:"center",class:"pathbox",title:n.name,style:{overflow:"hidden"}},{default:e(()=>[o(D,{"x-scrollable":!0,trigger:"hover",style:{"text-align":"center","font-size":"smaller",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},{default:e(()=>[L(p(A.value?n.name:"?"),1)]),_:1})]),_:1},8,["title"])]),_:1}),o(k,{vertical:"",style:{overflow:"visible"}},{default:e(()=>[o(pn,{ref:I=>{I!=null&&I.active&&(v.value=I)},src:$.value,width:142,"max-width":140,"max-height":100,loading:w.value,"file-name":n.name,"allow-next":T.value<n.length,"allow-prev":T.value>1,onLoad:ve,onNext:M[6]||(M[6]=I=>ge(1)),onPrev:M[7]||(M[7]=I=>ge(-1))},null,8,["src","loading","file-name","allow-next","allow-prev"]),o(k,{justify:"center",align:"center",wrap:!1},{default:e(()=>[o(ee,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:e(()=>[h("a",{href:n.url,ref:"saveImg",target:"_blank",download:n.name,style:{"line-height":"1em"}},[o(t(Me),{disabled:!A.value,round:"",size:"tiny"},{default:e(()=>[L(p(U.$t("save")),1)]),_:1},8,["disabled"])],8,Wi)]),default:e(()=>[L(" "+p(U.$t("save")),1)]),_:1}),o(ee,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:e(()=>[o(t(Me),{disabled:!A.value,onClick:M[8]||(M[8]=I=>X(n.url)),round:"",size:"tiny"},{default:e(()=>M[13]||(M[13]=[L("DataURL")])),_:1,__:[13]},8,["disabled"])]),default:e(()=>[L(" "+p(U.$t("convertedImageDataUrlTooltip")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1},8,["name"])]),_:1},512),o(t(Me),{bordered:!1,onClick:M[9]||(M[9]=I=>ge(1)),disabled:!t(te),class:Ye({"thumb-arrow":!0,next:!0,pale:!t(te)}),title:U.$t("Next")},{icon:e(()=>[o(ne,{size:"30"},{default:e(()=>[o(t(el))]),_:1})]),_:1},8,["disabled","class","title"])]),_:1}),U.isSingle?pe("",!0):(x(),J(k,{key:0,justify:"center",align:"center",wrap:!1,size:4},{default:e(()=>[o(we,{value:T.value,"onUpdate:value":M[10]||(M[10]=I=>T.value=I),tooltip:!1,step:1,min:1,max:n.length,keyboard:!1,class:"index-slider"},null,8,["value","max"]),o(k,{class:"index",align:"center",justify:"center",wrap:!1,size:3},{default:e(()=>[o(k,null,{default:e(()=>[L(p(t(c)("status.index"))+":",1)]),_:1}),o(k,{justify:"end",align:"center",class:"counter"},{default:e(()=>[L(p(T.value),1)]),_:1}),o(k,null,{default:e(()=>M[14]||(M[14]=[L("/")])),_:1,__:[14]}),o(k,{justify:"start",align:"center",class:"counter"},{default:e(()=>[L(p(n.length),1)]),_:1})]),_:1})]),_:1}))]),_:1},512)]),_:1},8,["style"])}}}),Gi=Ne(qi,[["__scopeId","data-v-493984f3"]]),Ki={key:0},Qi={style:{}},Yi={key:1},Xi={key:2,style:{color:"red"}},Ji={key:1,style:{width:"106px",height:"80px",opacity:"0.15",border:"1px solid gray"}},er=be({__name:"status.progress",props:{processing:{type:Boolean},successPerc:{},elapsedTime:{},threads:{},fileType:{},shrink:{},zipSize:{},outputToDir:{type:Boolean},inputTotalSize:{},outputTotalSize:{},rateColor:{},difColor:{},totalSizeDifStr:{},thumbnail:{},opened:{type:Boolean}},setup(i){const s=i,u=y(null),l={W:110,H:80};let n;return ze(()=>[s.thumbnail,s.opened],()=>{if(!s.thumbnail||!s.opened||s.thumbnail===n||!u.value)return;const{width:a,height:r}=Pn(s.thumbnail,{width:l.W,height:l.H});u.value.width=a,u.value.height=r,u.value.style.width=a+"px",u.value.style.height=r+"px",s.thumbnail instanceof HTMLImageElement?u.value.getContext("2d").drawImage(s.thumbnail,0,0,a,r):(u.value.getContext("bitmaprenderer").transferFromImageBitmap(s.thumbnail),n=s.thumbnail,s.thumbnail.close())}),(a,r)=>{const c=Ae,v=al,b=ft;return x(),J(b,{name:"progress",style:{"white-space":"nowrap"}},{header:e(({collapsed:S})=>[o(c,{align:"center"},{default:e(()=>[L(p(a.$t("status.Progress"))+" ",1),S?(x(),W(Oe,{key:0},[L(" ("+p(a.successPerc|0)+"%) ",1)],64)):pe("",!0)]),_:2},1024)]),default:e(()=>[o(c,{justify:"center",align:"center",size:0,wrap:!1,style:{"white-space":"nowrap","margin-top":"-1em","padding-bottom":"5px"}},{default:e(()=>[r[0]||(r[0]=h("div",{class:"grow"},null,-1)),o(c,{justify:"center",class:"grow",wrap:!1,style:{"z-index":"1"}},{default:e(()=>[o(c,{vertical:"",justify:"center",class:"left-column"},{default:e(()=>[o(v,{"tabular-nums":"",label:a.$t("status.elapsedTime")},{default:e(()=>[o(c,null,{default:e(()=>[L(p(a.elapsedTime),1)]),_:1})]),_:1},8,["label"]),o(v,{"tabular-nums":"",label:a.$t("status.multiThreading")},{default:e(()=>[o(c,{style:de({color:a.threads?"":"red",fontSize:"0.7rem"})},{default:e(()=>[L(p(a.threads?a.$rt("{n} @:threads",a.threads):a.$t("disabled")),1)]),_:1},8,["style"])]),_:1},8,["label"]),o(v,{"tabular-nums":"",label:a.$t("status.outputSettings")},{default:e(()=>[o(c,{vertical:"",justify:"end",style:{"font-size":"0.6rem","line-height":"0.6rem"}},{default:e(()=>[h("div",null,p(a.$t("settings.imageType"))+": "+p(a.fileType),1),a.shrink?(x(),W("div",Ki,[L(p(a.$t("status.Shrinking"))+": ",1),h("span",Qi,p(a.shrink[0])+"×"+p(a.shrink[1]),1)])):pe("",!0),a.outputToDir?(x(),W("div",Xi,p(a.$t("status.outputToDir")),1)):(x(),W("div",Yi,"Zip: "+p(a.zipSize)+"MB",1))]),_:1})]),_:1},8,["label"])]),_:1}),st(a.$slots,"center",{},void 0,!0),o(c,{vertical:"",style:{height:"100%"},justify:"center",class:"right-column"},{default:e(()=>[o(v,{"tabular-nums":"",label:a.$t("status.inputSize")},{default:e(()=>[o(c,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:e(()=>[L(p((a.inputTotalSize/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),o(v,{"tabular-nums":"",label:a.$t("status.outputSize")},{default:e(()=>[o(c,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:e(()=>[L(p((a.outputTotalSize/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),o(v,{"tabular-nums":"",label:a.$t("status.outInRate")},{default:e(()=>[o(c,{vertical:"",align:"end",justify:"start",style:{"font-size":"0.8em","font-family":"v-mono","line-height":"50%"}},{default:e(()=>[h("span",{style:de({color:a.rateColor,fontSize:"larger"})},"× "+p((a.outputTotalSize/a.inputTotalSize||1).toFixed(2)),5),h("span",{style:de({color:a.difColor})},"("+p(a.totalSizeDifStr)+")",5)]),_:1})]),_:1},8,["label"])]),_:1})]),_:3}),o(c,{class:"thumb-container",align:"center",style:{position:"relative"}},{default:e(()=>[o(c,{justify:"center",align:"center",class:"grow thumbnail",style:de({width:l.W+"px",height:l.H+"px"})},{default:e(()=>[o(Ge,{name:"fade",mode:"out-in"},{default:e(()=>[a.processing?(x(),W("canvas",{key:0,ref_key:"thumbcanvas",ref:u,width:"106",height:"80",class:"thumb-canvas"},null,512)):(x(),W("div",Ji))]),_:1})]),_:1},8,["style"])]),_:1})]),_:3,__:[0]})]),_:3})}}}),tr=Ne(er,[["__scopeId","data-v-51e086be"]]),nr={class:"status-table"},or={class:"started"},ar={class:"mini-counter"},lr={class:"failure"},sr={class:"mini-counter"},ir={colspan:"2"},rr={class:"completed"},ur={class:"main-counter"},cr={class:"total"},dr={class:"main-counter"},pr=be({__name:"status.progress-center",props:{processing:{type:Boolean},interval:{},statusColor:{},success:{},successTo:{},successFrom:{},index:{},length:{},failure:{},retried:{},successPercTo:{},successPercFrom:{}},setup(i){const s=i,u=Et(),l=y(u.value.successColor),n=y(!1);return ze(()=>s.processing,a=>{a||(s.success===s.length?n.value=!0:l.value=u.value.errorColor)}),(a,r)=>{const c=lt,v=Ie,b=wn,S=Ae,z=An;return x(),J(z,{type:"multiple-circle","stroke-width":2,percentage:[a.successTo/a.length*100|0,a.index/a.length*100|0],color:[t(u).successColor,a.statusColor],"rail-style":[{stroke:t(l),opacity:.3}],style:{width:"12em"}},{default:e(()=>[o(S,{vertical:"",align:"center",justify:"center",size:0,style:{"white-space":"nowrap"},wrap:!1,"wrap-item":!1},{default:e(()=>[h("table",nr,[h("tbody",null,[h("tr",or,[h("td",null,p(a.$t("status.started"))+":",1),h("td",ar,[o(c,{trigger:"hover",style:de({color:t(u).infoColor}),placement:"left"},{trigger:e(()=>[h("span",{style:de({color:t(u).infoColor})},p(a.index.toLocaleString("en-us")),5)]),default:e(()=>[L(" "+p(a.$t("status.progressStarted"))+" ("+p(a.index.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])])]),h("tr",lr,[h("td",null,p(a.$t("status.failure"))+":",1),h("td",sr,[o(c,{trigger:"hover",style:de({color:t(u).errorColor}),placement:"left"},{trigger:e(()=>[h("span",{style:de({color:t(u).errorColor})},p(a.failure.toLocaleString("en-us")),5)]),default:e(()=>[L(" "+p(a.$t("status.progressErrors"))+" ("+p(a.failure.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"]),a.retried>0?(x(),J(c,{key:0,trigger:"hover",style:de({color:t(u).warningColor}),placement:"left"},{trigger:e(()=>[h("span",{style:de({color:t(u).warningColor})}," ("+p(a.retried.toLocaleString("en-us"))+") ",5)]),default:e(()=>[L(" "+p(a.$t("status.progressRetries"))+" ("+p(a.retried.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):pe("",!0)])]),h("tr",null,[h("td",ir,[o(S,{size:0,align:"center",justify:"center",style:de({color:a.processing?a.statusColor:t(l)}),wrap:!1,class:"percent"},{default:e(()=>[t(n)?(x(),J(v,{key:0,component:t(ll)},null,8,["component"])):pe("",!0),o(b,{duration:a.interval*3|0,from:a.successPercFrom|0,to:a.successPercTo|0,active:!0},null,8,["duration","from","to"]),r[0]||(r[0]=L("% "))]),_:1,__:[0]},8,["style"])])]),h("tr",rr,[h("td",null,p(a.$t("status.success"))+":",1),h("td",ur,[o(c,{trigger:"hover",duration:0,delay:0,style:de({color:t(u).successColor}),placement:"bottom"},{trigger:e(()=>[h("span",{style:de({color:t(u).successColor})},[o(b,{duration:a.interval*3|0,from:a.successFrom,to:a.successTo,active:!0,"show-separator":!0},null,8,["duration","from","to"])],4)]),default:e(()=>[L(" "+p(a.$t("status.progressSuccess"))+" ("+p(a.successTo.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])])]),h("tr",cr,[h("td",null,p(a.$t("status.all"))+":",1),h("td",dr,[o(c,{trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:e(()=>[L(p(a.length.toLocaleString("en-us")),1)]),default:e(()=>[L(" "+p(a.$t("status.progressTotal"))+" ("+p(a.length.toLocaleString("en-us"))+") ",1)]),_:1})])])])])]),_:1})]),_:1},8,["percentage","color","rail-style"])}}}),fr={key:0,class:"log-table",ref:"table"},gr={class:"log-tr label"},mr=["title"],vr={style:{"min-width":"7em"},class:"log-th"},hr={style:{"padding-left":"2em"},class:"log-th"},yr=["data-index-loglist"],_r={class:"log-td"},wr={class:"log-td"},br={class:"log-td"},kr={class:"log-td"},zr={key:0,class:"log-td log-extra",style:{"padding-left":"0.5em"}},Sr={key:0},Cr={key:1,style:{color:"blue"}},Tr={key:1},fn=2,gn=3e3,Bt=80,Ar=100,xr=be({__name:"status.log",props:qe({processing:{type:Boolean},opened:{type:Boolean},previewCollapsed:{type:Boolean},logs:{},imageIndex:{}},{expanded:{type:Boolean,required:!1},expandedModifiers:{},"auto-scroll":{type:Boolean,required:!1},"auto-scrollModifiers":{},order:{required:!1,default:"processed"},orderModifiers:{}}),emits:qe(["open-preview","change-index"],["update:expanded","update:auto-scroll","update:order"]),setup(i,{emit:s}){const{t:u}=He(),l=i,n=xe(i,"expanded"),a=xe(i,"auto-scroll"),r=s;dt("table");const c=dt("tbody"),v=y(),b=y(null),S=y(40),z=ke(()=>n.value?S.value:Bt),g=y(Bt),T=ke(()=>{let k=l.logs;switch(C.value){case"success":k=k.filter(D=>D.completed);break;case"error":k=k.filter(D=>!D.completed);break}return k}),F=Wl(!1),$=y([{type:"group",label:()=>u("status.sort"),key:"sort",children:[{label:()=>u("status.sortByStart"),value:"processed"},{label:()=>u("status.sortByCompletion"),value:"zipped"},{label:()=>u("status.sortByName"),value:"name"},{label:()=>u("status.sortBySize"),value:"size"},{label:()=>u("status.sortByOutputSize"),value:"outputsize"},{label:()=>u("status.sortByStatus"),value:"status"}]}]),_=xe(i,"order");ze(_,()=>{Ue()});const f=[{label:()=>u("status.showAll"),value:""},{label:()=>u("status.showOnlySuccess"),value:"success"},{label:()=>u("status.showOnlyError"),value:"error"}],C=y(f[0].value);let w;Re(()=>{w=rl(),P(),window.addEventListener("resize",()=>P());const k=new ResizeObserver(()=>P());k.observe(w.parent.parent.vnode.el),nt(()=>{window.removeEventListener("resize",()=>P()),k.disconnect()})}),nt(()=>{clearTimeout(V),clearTimeout(he),clearTimeout(m)});let A=0;ze(()=>l.imageIndex,k=>O(k));async function O(k){var I;const D=k||l.imageIndex;let ee=T.value.findIndex(Y=>Y.zippedIndex===D);ee===-1&&(ee=D);const we=ee<=K.value,B=ee>K.value+E.value;if(we||B){const Y=ee*ie.value-(B?z.value:0);(I=v.value)==null||I.scrollTo({behavior:"instant",top:Y,left:j}),await De(),X(!0),await De()}De(()=>{var oe,le;let Y=b.value;Y&&(A>ee&&(Y=Y.previousSibling||Y,Y instanceof HTMLElement||((oe=v.value)==null||oe.scrollTo(j,0),Y=null)),(le=Y==null?void 0:Y.scrollIntoView)==null||le.call(Y,{behavior:"instant",block:"nearest"}),A=ee)})}ze(()=>l.opened,k=>{De(()=>{k&&(O(),X())})});let V;const G=y(document.documentElement.clientHeight),te=y(100);function P(){clearTimeout(V),V=setTimeout(()=>{if(!l.opened||!v.value)return;const k=v.value.$parent.$el.offsetHeight,D=window.innerHeight-w.parent.parent.parent.parent.parent.vnode.el.offsetHeight-8,ee=Math.min(ie.value*Math.max(5,l.logs.length+2),Math.max(200,k+D));G.value=document.documentElement.clientHeight,te.value=Math.min(ie.value*Math.max(5,l.logs.length),Math.max(Bt,ee)),l.opened&&(S.value=Math.max(ee,g.value))},100)}function Z(){se(!0),P(),F.value=!0}let m=0,Q=!1;function se(k=!1){if(!Q){if(m){Q=!0;return}De(()=>{!k&&!a.value||(v.value.scrollTo({behavior:"instant",top:l.logs.length*50,left:j}),m=window.setTimeout(()=>{m=0,Q&&(Q=!1,se())},Ar))})}}const fe=y({height:"0px"}),N=y({height:"0px"}),K=y(0),E=ke(()=>z.value/ie.value+fn*2|0),ie=y(15);let ae=0,he=0,ve=0,q=-999,Le=-1;function X(k){const D=Date.now();if(k!==!0){if(he)return;if(D-ve<30){he=window.setTimeout(()=>{he=0,X()},30-(D-ve));return}}ve=D,!ae&&l.logs.length&&(ae=c.value.rows[1].offsetHeight,ie.value=ae);const ee=T.value.length,B=v.value.scrollbarInstRef.containerRef.scrollTop;if(!k&&ee===Le&&Math.abs(B-q)<ie.value*.5)return;q=B,Le=ee;const I=Math.max(0,(B/ie.value|0)-fn);K.value=I,fe.value.height=I*ie.value+"px",N.value.height=Math.max(0,ee-(I+E.value))*ie.value+"px"}function ge(){var k;(k=v.value)==null||k.scrollTo(0,0),X()}ze(()=>l.logs,()=>{l.opened&&(De(X),a.value&&se(),Pe())});let Se=0,Ce=0;function Pe(){if(_.value==="processed"||!_.value)return;const k=Date.now();if(k-Ce<gn){if(Se)return;Se=window.setTimeout(Pe,gn-(k-Ce));return}Se=0,Ce=k,Ue()}function Ue(){switch(_.value){case"zipped":l.logs.sort((k,D)=>k.zippedIndex-D.zippedIndex);break;case"status":l.logs.sort((k,D)=>k.command>D.command?1:-1);break;case"name":l.logs.sort((k,D)=>k.path>D.path?1:-1);break;case"size":l.logs.sort((k,D)=>k.size-D.size);break;case"outputsize":l.logs.sort((k,D)=>k.outputSize-D.outputSize);break;case"processed":default:l.logs.sort((k,D)=>k.index-D.index);break}}function ce(k){const D=l.logs,ee=D.findIndex(le=>le.zippedIndex===l.imageIndex);let we=0,B=1;switch(k.code){case"ArrowUp":we=-1;break;case"ArrowDown":we=1;break;case"PageUp":we=-1,B=z.value/ie.value-1|0;break;case"PageDown":we=1,B=z.value/ie.value-1|0;break;case"Enter":case"NumpadEnter":if(ee>=0&&l.previewCollapsed){De(()=>r("open-preview")),k.stopPropagation(),k.preventDefault();return}break;default:return}let I=ee,Y=-1;const oe=D.length;do{if(I+=we,I<0||I>oe-1||I===ee)break;if(D[I].completed){if(Y=I,--B>0)continue;break}}while(!0);if(Y>=0){const le=D[Y];r("change-index",!0,le.path,le.fileId,le.zippedIndex),k.preventDefault()}}let ye=-1,Be=-1,j=0,ue=!1;function U(k){var we,B;if(X(),ue){ue=!1;return}const{scrollLeft:D=0,scrollTop:ee=0}=(B=(we=v.value)==null?void 0:we.scrollbarInstRef)==null?void 0:B.containerRef;(D!==ye||ye<0)&&(ee===Be||Be<0)&&(j=D),ye=D,Be=ee,De(()=>{var Y,oe;ue=!0;const I=(oe=(Y=v.value)==null?void 0:Y.scrollbarInstRef)==null?void 0:oe.containerRef;I&&(I.scrollLeft=j)})}function M(k){a.value=!1}function ne(k,D){var le,_e;const we=(_e=(le=k.target.closest("tr"))==null?void 0:le.dataset)==null?void 0:_e.indexLoglist;if(!/^\d+$/.test(we))return;const{completed:B,path:I,fileId:Y,zippedIndex:oe}=T.value[we];B&&(l.imageIndex!==oe&&r("change-index",B,I,Y,oe),D&&r("open-preview"))}return(k,D)=>{const ee=Ae,we=Ie,B=Mt,I=Tt,Y=Te,oe=Dt,le=lt,_e=ft;return x(),J(_e,{name:"log",style:{"white-space":"nowrap"}},{header:e(()=>[o(ee,{align:"center",wrap:!1},{default:e(()=>[L(p(k.$t("status.Log")),1)]),_:1})]),"header-extra":e(()=>[l.opened?(x(),J(ee,{key:0,align:"center",justify:"end",wrap:!0,style:{"margin-top":"0.2em","margin-left":"0.5em"}},{default:e(()=>[o(B,{value:_.value,"onUpdate:value":[D[0]||(D[0]=me=>_.value=me),Ue],options:t($),style:{width:"auto"},"consistent-menu-width":!1,"show-on-focus":!1,size:"tiny"},{arrow:e(()=>[o(we,{component:t(sl)},null,8,["component"])]),_:1},8,["value","options"]),o(B,{value:t(C),"onUpdate:value":[D[1]||(D[1]=me=>Fe(C)?C.value=me:null),D[2]||(D[2]=me=>ge())],options:f,placeholder:k.$t("status.filterLogSelect"),size:"tiny",style:{width:"auto"},"consistent-menu-width":!1,"show-on-focus":!1},{arrow:e(()=>[o(we,{component:t(il)},null,8,["component"])]),_:1},8,["value","placeholder"]),o(I,{key:"b",checked:a.value,"onUpdate:checked":[D[3]||(D[3]=me=>a.value=me),D[4]||(D[4]=me=>me&&se(!0))],size:"small",style:{"font-size":"0.9em"}},{default:e(()=>[L(p(k.$t("status.autoScroll")),1)]),_:1},8,["checked"]),o(le,{trigger:"hover",show:t(F),disabled:!n.value,placement:"top",delay:0,duration:1e3},{trigger:e(()=>[o(Y,{style:{"max-width":"30em"},disabled:!0},{trigger:e(()=>[o(I,{size:"small",checked:n.value,"onUpdate:checked":[D[5]||(D[5]=me=>n.value=me),Z],style:{"font-size":"0.9em"}},{default:e(()=>[L(p(k.$t("status.expandLog")),1)]),_:1},8,["checked"])]),default:e(()=>[L(p(k.$t("status.expandLog")),1)]),_:1})]),default:e(()=>[o(ee,{wrap:!1,align:"center",style:{"font-size":"0.8em"}},{default:e(()=>[o(oe,{value:t(g),"onUpdate:value":D[6]||(D[6]=me=>Fe(g)?g.value=me:null),onUpdateValue:D[7]||(D[7]=me=>P()),disabled:!n.value,"format-tooltip":me=>`Log size: ${me}`,tooltip:!0,step:1,min:t(te),max:t(G),style:{"z-index":"3",width:"100px"}},null,8,["value","disabled","format-tooltip","min","max"])]),_:1})]),_:1},8,["show","disabled"])]),_:1})):pe("",!0)]),default:e(()=>[o(ee,{wrap:!1,align:"stretch",class:Ye({"log-container":1,"expand-log":n.value}),style:de({height:t(z)+"px"}),onKeydown:ce,tabindex:"-1"},{default:e(()=>[o(t(Cn),{ref_key:"scrollref",ref:v,distance:10,"x-scrollable":!0,onMousedownCapture:M,onWheel:D[9]||(D[9]=me=>a.value=!1),onScroll:U,load:"handleLogLoad",trigger:"none",style:de([{"z-index":"2","padding-right":"10px",height:"100%"},{height:t(z)+"px"}]),size:50},{default:e(()=>[l.opened?(x(),W("table",fr,[h("thead",null,[h("tr",gr,[h("th",{class:"log-th",title:k.$t("status.table.core")},"th",8,mr),D[10]||(D[10]=h("th",{class:"log-th"},"no.",-1)),h("th",vr,p(k.$t("status.table.status")),1),h("th",hr,p(k.$t("status.table.details")),1),D[11]||(D[11]=h("th",{class:"log-th"},"size",-1))])]),h("tbody",{ref:"tbody",onClick:ne,onDblclick:D[8]||(D[8]=me=>ne(me,!0))},[h("tr",{style:de(t(fe))},null,4),(x(!0),W(Oe,null,it(t(T).slice(t(K),t(K)+t(E)),({index:me,key:Ve,command:et,path:gt,core:Ee,zippedIndex:rt,completed:mt,fileId:tt,shrinked:Oa,width:en,height:Ua,outputWidth:Ba,outputHeight:Ra,size:Na,outputSize:tn},nn)=>(x(),W("tr",{key:Ve,class:Ye({"log-tr":1,completed:mt,selected:k.imageIndex===rt,stripe:(t(K)+nn)%2}),ref_for:!0,ref:ja=>{k.imageIndex===rt&&(b.value=ja)},"data-index-loglist":t(K)+nn},[h("td",_r,p(Ee>=0?Ee+1:"-"),1),h("td",wr,p(me+1),1),h("td",br,p(et),1),h("td",kr,p(gt),1),en?(x(),W("td",zr,[L(p(`[${en}×${Ua}] (${t(We)(Na,0)})`)+" ",1),tn?(x(),W("span",Sr,[D[12]||(D[12]=L(" → ")),h("span",null," ("+p(t(We)(tn,0))+") ",1)])):pe("",!0),Oa?(x(),W("span",Cr,p(` [${Ba}×${Ra}]`),1)):pe("",!0)])):(x(),W("td",Tr))],10,yr))),128)),h("tr",{style:de(t(N))},null,4)],544)],512)):pe("",!0),D[13]||(D[13]=h("div",{style:{height:"1em"}},null,-1))]),_:1,__:[13]},8,["style"])]),_:1},8,["class","style"])]),_:1})}}}),Ir={viewBox:"0 0 128 128",width:"1.2em",height:"1.2em"},Lr=["id"],$r=["clip-path"],Fr=["clip-path"],Er=["clip-path"],Dr=["clip-path"],Mr=["clip-path"];function Pr(i,s){return x(),W("svg",Ir,[s[1]||(s[1]=h("defs",null,[h("path",{id:"SVGG3xBQcMr",d:"M.06 0H128v128H.06z"})],-1)),h("clipPath",{id:i.idMap.SVGp9tgcbZN},s[0]||(s[0]=[h("use",{href:"#SVGG3xBQcMr"},null,-1)]),8,Lr),h("path",{fill:"#e48c15",d:"M25.12 96.06s-2.67 14.99 10.96 10.46c22.46-7.47 23.54.68 30.43 3.49c10.29 4.19 21.86 3.73 33.82-9.19C112.79 87.35 68.96 83.61 57 82.36c-11.95-1.24-30.63 13.45-30.63 13.45","clip-path":"url(#"+i.idMap.SVGp9tgcbZN+")"},null,8,$r),h("path",{fill:"#006ca0",d:"M6.92 103.33L.76 121.09v1.12s-2.96 7.4 3.3 2.17c.42-.04.85-.19.85-.19s16.8-13.56 17.36-13.74s8.08-12.01 8.08-12.01s-14.25-11.39-16.6-7.78c-2.34 3.59-6.83 12.67-6.83 12.67","clip-path":"url(#"+i.idMap.SVGp9tgcbZN+")"},null,8,Fr),h("path",{fill:"#e48c15",d:"M69.96 47.4s-21.87-11.16-31.6-4.14c-8.56 6.18-15.61 9.71-19.92 12.2S7.85 57.47 6.98 69.16c-.74 10.09-.75 18.61-2.36 22.05c-4.56 9.71 7.66 16.34 12.2-1.87c4.66-15.44 18.06-2.24 28.51-4.73c10.46-2.49 29.84-21.24 32.05-26.27c3.04-6.92-7.42-10.94-7.42-10.94","clip-path":"url(#"+i.idMap.SVGp9tgcbZN+")"},null,8,Er),h("path",{fill:"#006ca0",d:"M16.11 85.23S65.82 8.96 70.25 3.98c3.96-4.45.97-4.64 15.39 4.48c3.62 2.29-53.87 80.06-53.87 80.06l-16.56-1.5z","clip-path":"url(#"+i.idMap.SVGp9tgcbZN+")"},null,8,Dr),h("path",{fill:"#fac036",d:"M54.3 59.7s-8.47 12.45-18.93 17.43s-23.41 6.97-21.42 15.44s11.95 14.45 27.89 2.49c8.47-5.48 13.45-1 20.92 2.49s8.96 9.46 27.39 6.47s20.26.43 28.39 4.48c7.97-4.98 8.96-19.92 8.96-29.39s-1.15-8.25-12.45-9.46c-8.96-2.99-33.01-14.98-39.44-19.01c-2.59-1.62-8.74-6.08-16.46 2.79","clip-path":"url(#"+i.idMap.SVGp9tgcbZN+")"},null,8,Mr)])}const Or=Xe({name:"noto-v1-writing-hand",render:Pr,setup(){return{idMap:{SVGp9tgcbZN:"uicons-"+Math.random().toString(36).substr(2,10)}}}}),Ur={class:"container"},Br={__name:"zipicon",setup(i){return(s,u)=>(x(),W("span",Ur,[o(t(Ie),null,{default:e(()=>[o(t(jt))]),_:1}),u[0]||(u[0]=h("span",{class:"text"},"ZIP",-1))]))}},Rr=Ne(Br,[["__scopeId","data-v-8b8df2f0"]]),Nr=["innerHTML"],jr={style:{margin:"1px"}},Zr=["href","download","onClick"],Hr={key:0,style:{position:"relative"}},Vr=["href","download"],Wr=["href","download"],qr={style:{"margin-left":"0.5em"}},Gr={title:"Writing to the folder"},Kr={key:0,style:{margin:"1px"}},Qr=["href","download","onClick"],Yr=be({__name:"status.result",props:{processing:{type:Boolean},listLength:{},zippingFlag:{type:Boolean},converted:{},success:{},zippedTotalCount:{},zippedTotalSize:{},baseZipName:{},zips:{},unconvertedListText:{},unconvertedFileCount:{},unconvertedTotalSize:{},failedZips:{},failedZipDone:{type:Boolean},failedToCreateFailedZip:{type:Boolean},failedFileZippedCount:{},imgUrl:{},imgName:{},type:{},outputToDir:{type:Boolean},outputDirName:{}},emits:["all-zips-clicked","demand-zip-errors"],setup(i,{emit:s}){const u=pt(),{t:l}=He(),n=Et(),a=i,r=s,c=y(!1),v=y([]),b=y([]),S=y(void 0),z=ke(()=>[{key:"open",label:l("status.openFailedList"),icon:()=>re(Ie,()=>re(xn)),onSelect(){F()}},{key:"download",label:l("status.saveFailedList"),icon:()=>re(Ie,()=>re(ul)),onSelect(){F(!0)}},{key:"zip",label:`${l("status.zipFailedList")}`+(a.failedZipDone?`(✔${l("status.done")})`:""),icon:()=>re(Wt,{show:c.value&&!a.failedZipDone,size:"small"},()=>re(Ie,()=>re(jt))),disabled:c.value,onSelect(d){return c.value=!0,r("demand-zip-errors"),!1}}]);ze([()=>a.zips.length,()=>a.failedZips.length],()=>{{v.value.length>a.zips.length&&(v.value.length=0);let d=0;const $=a.zips.length===1&&a.zippedTotalCount===a.listLength;for(let _=v.value.length;_<a.zips.length;_++){const f=a.zips[_],C=a.baseZipName+($?"":"-"+String(_+1).padStart(2,"0"))+".zip";d+=f.size,v.value[_]={url:f.url,size:f.size,number:$?0:_+1,sizeByUnit:We(f.size),name:C,count:f.count,clicked:!1}}}{b.value.length>a.failedZips.length&&(b.value.length=0);let d=0;const $=a.failedZipDone&&a.failedZips.length===1;for(let _=b.value.length;_<a.failedZips.length;_++){const f=a.failedZips[_],C=a.baseZipName+"-error"+($?"":"-"+String(_+1).padStart(2,"0"))+".zip";d+=f.size,b.value[_]={url:f.url,size:f.size,number:$?0:_+1,sizeByUnit:We(f.size),name:C,count:f.count,clicked:!1}}}});function g(d,$=!1){const{url:_,name:f}=d;if($){const C=document.createElement("a");C.href=_,C.download=f,C.click()}d.clicked||(d.clicked=!0,a.processing||v.value.every(C=>C.clicked)&&r("all-zips-clicked"))}async function T(d){if(a.zippingFlag){if(v.value.length>=2&&!await new Promise((f,C)=>u.warning({title:l("Download"),content:l("status.confirmDownloadMessage",[v.value.length]),positiveText:"OK",negativeText:l("cancel"),onPositiveClick:()=>f(!0),onNegativeClick:()=>C()})))return;const $=v.value;for(const _ of $)g(_,!0)}}function F(d=!1){const $=new Blob([a.unconvertedListText],{type:"text/plain;charset=utf8"}),_=URL.createObjectURL($),f=document.createElement("a");f.href=_,f.target="_blank",d&&(f.download=a.baseZipName+"-error.txt"),f.click()}return(d,$)=>{const _=An,f=lt,C=Me,w=Ae,A=Rr,O=Tn,V=Qt,G=Ln,te=Or,P=cl,Z=ft;return x(),J(Z,{name:"output",style:{"white-space":"nowrap"},disabled:""},{header:e(()=>[h("span",{style:{color:"black"},innerHTML:d.$t("status.Output")},null,8,Nr)]),default:e(()=>[o(w,{wrap:!1,vertical:"",style:{"margin-top":"-1.3em"}},{default:e(()=>[d.outputToDir?pe("",!0):(x(),J(w,{key:0,justify:"center"},{default:e(()=>[Ke(o(w,{vertical:"",align:"center"},{default:e(()=>[o(f,{placement:"left"},{trigger:e(()=>[o(_,{type:"line","indicator-placement":"inside",color:"lime","rail-color":"rgba(99, 255, 99, 0.5)","indicator-text-color":a.zippedTotalCount===d.listLength?"white":"green",processing:a.processing,percentage:a.zippedTotalCount/d.listLength*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:e(()=>[h("span",jr,p(a.zippedTotalCount/d.listLength*100|0)+"% "+p(d.$t("status.zippingProgress"))+" ("+p(a.zippedTotalCount)+"/"+p(a.converted)+")",1)]),_:1},8,["indicator-text-color","processing","percentage"])]),default:e(()=>[L(" "+p(d.$t("status.zippingProgress"))+" ("+p(a.zippedTotalCount/a.listLength*100|0)+"%) ",1)]),_:1}),t(v).length>=2||a.processing?(x(),J(At,{key:0,name:"zips",class:"zip-buttons-parent",tag:"div"},{default:e(()=>[(x(!0),W(Oe,null,it(t(v),(m,Q)=>(x(),W("span",{key:Q},[o(f,{trigger:"hover",duration:0,delay:0},{trigger:e(()=>[h("a",{href:m.url,download:m.name,class:"in-button-anchor",onClick:se=>g(m)},[o(C,{class:"zip-button",size:"tiny",color:m.clicked?"#050":"lime","text-color":m.clicked?"gray":"white",onClick:ct(se=>g(m),["stop"]),round:""},{default:e(()=>[o(t(Ie),{size:"tiny"},{default:e(()=>[o(t(jt))]),_:1}),L("ZIP"+p(m.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Zr)]),default:e(()=>[h("div",{style:de({color:t(n).successColor})},[h("div",null,"ZIP "+p(m.number||"")+" ("+p(d.$t("success"))+")",1),h("div",null,p(m.name),1),h("div",null,p(m.sizeByUnit),1),h("div",null,p(d.$rt("{n} @:files",m.count)),1)],4)]),_:2},1024)]))),128))]),_:1})):pe("",!0)]),_:1},512),[[Qe,d.zippingFlag]])]),_:1})),o(Ge,null,{default:e(()=>[Ke(o(w,{justify:"center",align:"center"},{default:e(()=>[d.outputToDir?(x(),J(f,{key:1,trigger:"hover",duration:0,delay:0,placement:"left",style:de({color:"white",backgroundColor:t(n).successColor}),"arrow-style":{backgroundColor:t(n).successColor}},{trigger:e(()=>[o(w,{align:"center",size:1,style:de(`border: 1px solid ${t(n).successColor}; border-radius:4px; padding:0.3em;`)},{default:e(()=>[o(V,{style:{"vertical-align":"middle"}}),o(G,{style:{"font-size":"smaller","max-width":"25em"}},{default:e(()=>[L(p(d.outputDirName),1)]),_:1}),h("span",qr,[h("span",{style:de({color:t(n).successColor})},p(d.success),5),L(" "+p(t(l)("files",d.success)),1)]),h("span",Gr,[o(te,{style:{"vertical-align":"middle","margin-left":"2px","margin-bottom":"2px"},class:Ye({shake:d.processing})},null,8,["class"])])]),_:1},8,["style"])]),default:e(()=>[L(p(d.$t("status.numberOfFilesWrittenToDir")),1)]),_:1},8,["style","arrow-style"])):(x(),J(f,{key:0,trigger:"hover",duration:0,delay:0,placement:"left",style:de({color:"white",backgroundColor:t(n).successColor}),"arrow-style":{backgroundColor:t(n).successColor}},{trigger:e(()=>[o(Ge,{name:"save"},{default:e(()=>[d.success>0?(x(),W("span",Hr,[o(O,{value:d.zippingFlag?a.zippedTotalCount.toLocaleString("en-us"):a.type.replace(/\(.+\)/,""),color:t(n).successColorHover,offset:[-20,-3]},{default:e(()=>[d.zippingFlag?(x(),J(C,{key:0,size:"medium",onClick:T,color:t(n).successColor,round:""},{default:e(()=>[t(v).length?(x(),W("a",{key:0,href:t(v)[0].url,download:t(v)[0].name,class:"in-button-anchor",onClick:$[0]||($[0]=ct(()=>{},["prevent"]))},[o(A),L(" × "+p(t(v).length)+" "+p(d.$t("status.saveAll")),1)],8,Vr)):pe("",!0)]),_:1},8,["color"])):(x(),W("a",{key:1,href:a.imgUrl,download:a.imgName,class:"in-button-anchor"},[o(C,{size:"medium",color:t(n).successColor,round:""},{default:e(()=>[o(t(Ie),{size:"tiny",component:t(In)},null,8,["component"]),L(" "+p(d.$t("save")),1)]),_:1},8,["color"])],8,Wr))]),_:1},8,["value","color"])])):pe("",!0)]),_:1})]),default:e(()=>[a.listLength>=2?(x(),W(Oe,{key:0},[h("div",null,p(t(l)("success"))+": "+p(d.zippedTotalCount.toLocaleString()),1),h("div",null,p(t(l)("status.totalSize"))+": "+p(t(We)(a.zippedTotalSize)),1),h("div",null,"ZIP × "+p(t(v).length),1),h("div",null,p(t(l)("status.saveAllZipsTooltip")),1)],64)):(x(),W(Oe,{key:1},[L(p(d.$t("status.downloadConvertedImage",t(v).length)),1)],64))]),_:1},8,["style","arrow-style"])),!a.processing&&a.success!==d.listLength?(x(),J(P,{key:2,options:t(z),onSelect:$[1]||($[1]=(m,Q)=>{var se;return(se=t(z).find(({key:fe})=>m===fe))==null?void 0:se.onSelect()}),"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start"},{default:e(()=>[o(f,{show:t(S),duration:0,delay:0,placement:"right",style:de({color:"white",backgroundColor:t(n).errorColor}),"arrow-style":{backgroundColor:t(n).errorColor}},{trigger:e(()=>[o(O,{value:a.unconvertedFileCount.toLocaleString(),color:t(n).errorColorHover,offset:[-0,-3]},{default:e(()=>[o(C,{size:"small",color:t(n).errorColor},{default:e(()=>[o(t(Ie),{size:"medium",style:{"vertical-align":"middle"},component:t(dl)},null,8,["component"])]),_:1},8,["color"])]),_:1},8,["value","color"])]),default:e(()=>[h("div",null,[h("div",null,p(t(l)("failed"))+": "+p(a.unconvertedFileCount.toLocaleString()),1),h("div",null,p(t(l)("status.totalSize"))+": "+p(t(We)(a.unconvertedTotalSize)),1)])]),_:1},8,["show","style","arrow-style"])]),_:1},8,["options"])):pe("",!0)]),_:1},512),[[Qe,!a.processing||d.outputToDir]])]),_:1}),o(Ge,{name:"zipcontainer"},{default:e(()=>[Ke(o(w,{vertical:"",align:"center"},{default:e(()=>[o(f,{placement:"left"},{trigger:e(()=>[o(_,{type:"line","indicator-placement":"inside",color:"red","rail-color":"rgba(255, 0, 0, 0.5)","indicator-text-color":a.failedFileZippedCount===a.unconvertedFileCount?"white":"#500",processing:t(c)&&!a.failedZipDone&&!a.failedToCreateFailedZip,percentage:a.failedFileZippedCount/a.unconvertedFileCount*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:e(()=>[a.failedToCreateFailedZip?(x(),W("div",{key:1,style:de({color:t(n).errorColor})},p(d.$t("status.failureZippingFailedFiles")),5)):(x(),W("span",Kr,p(a.failedFileZippedCount/a.unconvertedFileCount*100|0)+"% "+p(d.$t("status.zipped"))+" ("+p(a.failedFileZippedCount)+"/"+p(a.unconvertedFileCount)+")",1))]),_:1},8,["indicator-text-color","processing","percentage"])]),default:e(()=>[L(" "+p(d.$t("status.zippingProgress"))+" ("+p(a.failedFileZippedCount/a.unconvertedFileCount*100|0)+"%) ",1)]),_:1}),o(At,{name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:e(()=>[(x(!0),W(Oe,null,it(t(b),(m,Q)=>(x(),W("span",{key:Q},[o(f,{trigger:"hover",duration:0,delay:0},{trigger:e(()=>[h("a",{href:m.url,download:m.name,class:"in-button-anchor",onClick:se=>g(m)},[o(C,{class:"zip-button",size:"tiny",color:m.clicked?"#551122":"#F00","text-color":m.clicked?"gray":"white",onClick:ct(se=>g(m),["stop"]),round:""},{default:e(()=>[o(t(Ie),{size:"tiny",component:t(pl)},null,8,["component"]),L("ZIP"+p(m.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Qr)]),default:e(()=>[h("div",{style:de({color:t(n).errorColor})},[h("div",null,"ZIP "+p(m.number||"")+" ("+p(d.$t("failed"))+")",1),h("div",null,p(m.name),1),h("div",null,p(m.sizeByUnit),1),h("div",null,p(d.$rt("{n} @:files",m.count)),1)],4)]),_:2},1024)]))),128))]),_:1})]),_:1},512),[[Qe,t(c)]])]),_:1})]),_:1})]),_:1})}}}),Xr=Ne(Yr,[["__scopeId","data-v-b09bfddd"]]),Jr=be({__name:"status",props:{processing:{type:Boolean},status:{},interval:{}},emits:["all-zips-clicked","demand-zip-errors","demand-image","delete-image"],setup(i,{expose:s,emit:u}){const l={itemMargin:"1px",titlePadding:"2px",titleFontSize:"0.8rem"},{t:n}=He(),a=Et(),r=i,c=u;s({cleanup:Be});const v=y(!1),b=y([]),S=y(!1),z=y(!1),g=y([0,0]),T=y([0,0]),F=y([0,0]),d=y([0,0]),$=y([0,0]),_=y([0,0]),f=y(0),C=y(0),w=y([0,0]),A=y(0),O=y(a.value.infoColor),V=y("#000000"),G=y("#000000"),te=y(0),P=y(0),Z=y(""),m=y("00:00:00"),Q=y(null),se=y(["progress","log","output"]),fe=j=>se.value.includes(j),N=j=>se.value.push(j),K=j=>{const ue=se.value.findIndex(U=>U===j);ue>=0&&se.value.splice(ue,1)},E=ke(()=>se.value.includes("log")),ie=ke(()=>se.value.includes("progress")),ae=y(!1),he=y(!0),ve=y("processed"),q=Ft({name:"",originalName:"",size:0,url:"",originalUrl:"",originalSize:0,dataUrl:"",index:0,various:{shrinked:!1}}),Le=dt("body"),X=dt("imageViewer");Re(()=>{ze(r.status,()=>Pe(),{deep:!1});let j=0;const ue=()=>{if(j)return;const U=Date.now();m.value="00:00:00",j=window.setInterval(()=>{const M=(Date.now()-U)/1e3;m.value=`${String(M/3600|0).padStart(2,"0")}:${String(M/60%60|0).padStart(2,"0")}:${String(M%60|0).padStart(2,"0")}`},300)};ue(),z.value=!0,ze(()=>r.processing,(U,M)=>{U||Ue(),U?(ue(),b.value.length=0,v.value=!1,S.value=!1):(clearInterval(j),j=0)}),nt(()=>{clearInterval(j),clearTimeout(Ce)}),xt(()=>clearInterval(j))}),nt(()=>{Be()}),xt(()=>{clearTimeout(Ce)});const ge=r.interval||100;let Se=!1,Ce=0;function Pe(){if(Se)return;if(Ce){Se=!0;return}Ce=window.setTimeout(()=>{Ce=0,Se&&(Se=!1,Pe())},ge);const j=r.status;v.value=j.length>=2,T.value[1]=T.value[0],T.value[0]=j.startedCount,F.value[1]=F.value[0],F.value[0]=j.success,d.value[1]=d.value[0],d.value[0]=j.failure,$.value[1]=$.value[0],$.value[0]=j.done,_.value[1]=_.value[0],_.value[0]=j.converted,f.value=j.retried,C.value=j.length,w.value[1]=w.value[0],w.value[0]=j.zippedTotalCount,te.value=j.inputTotalSize,P.value=j.outputTotalSize,A.value=j.failedFileZippedCount;const ue=P.value-te.value;Z.value=(ue>=0?"+ ":"")+We(ue);const U=P.value/te.value,M=(256|Math.min(255,Math.max(0,U-1.5)*255|0)).toString(16).substring(1);V.value="#"+M+"0000";const ne=1024*1024,k=(256|Math.min(255,Math.max(0,ue/1024/ne)*255|0)).toString(16).substring(1);G.value="#"+k+"0000",g.value[1]=g.value[0],g.value[0]=F.value[0]/C.value*100,(E.value||!r.processing)&&(b.value=b.value.concat(j.logs),j.logs.length=0),Q.value=j.thumbnail,r.processing?O.value=d.value[0]?a.value.errorColor:f.value?a.value.warningColor:a.value.infoColor:z.value=!1,j.convertedImageUrl!==q.url&&(q.url=j.convertedImageUrl,q.name=j.convertedImageName,q.dataUrl=j.convertedImageDataUrl,q.size=j.convertedImageSize||j.outputTotalSize,q.originalSize=j.convertedImageOrgSize,q.originalName=j.convertedImageOrgName,q.index=j.convertedImageIndex,q.originalUrl=j.convertedImageOrgUrl,q.various={shrinked:j.convertedImageShrinked})}function Ue(){const j=r.status;O.value=r.status.success===r.status.length?a.value.successColor:a.value.errorColor,ve.value==="processed"&&(ve.value="zipped"),j.success>0&&(he.value&&(K("log"),ae.value=!0),N("preview"))}async function ce(j,ue,U,M){var k;if(!j)return;const ne=M;fe("preview")||(N("preview"),await De()),(k=X.value)==null||k.changeIndex(ne+1),await De(()=>{var D;try{(D=X.value)==null||D.$el.scrollIntoView({behavior:"instant",block:"nearest"})}catch{}})}const ye=y(!1);function Be(){ye.value=!0,URL.revokeObjectURL(q.url),URL.revokeObjectURL(q.originalName),q.originalUrl="",q.url="",q.index=0,r.status.logs.length=0,b.value.length=0}return(j,ue)=>{const U=Ae,M=ft,ne=qt;return x(),J(U,{ref_key:"body",ref:Le,vertical:"",justify:"center"},{default:e(()=>[o(ne,{"display-directive":"show","trigger-areas":["arrow","main"],"expanded-names":t(se),"onUpdate:expandedNames":ue[7]||(ue[7]=k=>Fe(se)?se.value=k:null),"theme-overrides":l},{default:e(()=>[o(tr,{processing:t(z),"elapsed-time":t(m),"success-perc":t(g)[0],"input-total-size":t(te),"output-total-size":t(P),"file-type":r.status.type,shrink:r.status.shrink,threads:r.status.threads,"zip-size":r.status.zipSize,"output-to-dir":r.status.outputToDir,"rate-color":t(V),"dif-color":t(G),"total-size-dif-str":t(Z),thumbnail:t(Q),opened:t(ie)},{center:e(()=>[t(ye)?pe("",!0):(x(),J(pr,{key:0,index:t(T)[0],success:t(F)[0],length:j.status.length,"success-to":t(F)[0],"success-from":t(F)[1],failure:t(d)[0],"success-perc-to":t(g)[0],"success-perc-from":t(g)[1],retried:t(f),processing:t(z),interval:t(ge),"status-color":t(O),class:"center-column"},null,8,["index","success","length","success-to","success-from","failure","success-perc-to","success-perc-from","retried","processing","interval","status-color"]))]),_:1},8,["processing","elapsed-time","success-perc","input-total-size","output-total-size","file-type","shrink","threads","zip-size","output-to-dir","rate-color","dif-color","total-size-dif-str","thumbnail","opened"]),o(xr,{processing:t(z),"image-index":t(q).index,opened:t(E),"preview-collapsed":fe("preview"),logs:t(b),expanded:t(ae),"onUpdate:expanded":ue[0]||(ue[0]=k=>Fe(ae)?ae.value=k:null),"auto-scroll":t(he),"onUpdate:autoScroll":ue[1]||(ue[1]=k=>Fe(he)?he.value=k:null),order:t(ve),onChangeIndex:ce,onOpenPreview:ue[2]||(ue[2]=k=>{var D;return(D=t(X))==null?void 0:D.openPreview()}),name:"log",style:{"white-space":"nowrap"}},null,8,["processing","image-index","opened","preview-collapsed","logs","expanded","auto-scroll","order"]),o(M,{title:j.$t("status.PreviewImage"),name:"preview",style:{"white-space":"nowrap"},disabled:!(t(F)[0]>0)},{default:e(()=>[o(U,{justify:"center",align:"center",vertical:"",style:{"margin-top":"-1em"}},{default:e(()=>[o(Gi,{"_v-else-if":"imageViewerStarted && status.success > 0 /*&& (props.status.threads || !zippingFlag)*/ && !cleaningUp",ref_key:"imageViewer",ref:X,url:t(q).url,size:t(q).size,"original-url":t(q).originalUrl,"original-size":t(q).originalSize,name:t(q).name,originalName:t(q).originalName,length:t(F)[0],index:t(q).index,"various-info":t(q).various,"is-single":!t(v),onDemandImage:ue[3]||(ue[3]=k=>c("demand-image",k)),on_deleteImage:ue[4]||(ue[4]=k=>c("delete-image",k)),_close:"imageViewerStarted=false"},null,8,["url","size","original-url","original-size","name","originalName","length","index","various-info","is-single"])]),_:1})]),_:1},8,["title","disabled"]),o(Xr,{processing:t(z),"list-length":t(C),zippingFlag:t(v),zips:r.status.zips,"img-url":t(q).url,"img-name":t(q).name,success:t(F)[0],failure:t(d)[0],done:t($)[0],converted:t(_)[0],retried:t(f),"zipped-total-count":t(w)[0],"zipped-total-size":r.status.zippedTotalSize,"base-zip-name":r.status.baseZipName,"failed-file-zipped-count":t(A),"failed-to-create-failed-zip":r.status.failedToCreateFailedZip,"failed-zip-done":r.status.failedZipDone,"failed-zips":r.status.failedZips,"unconverted-file-count":r.status.unconvertedFileCount,"unconverted-list-text":r.status.unconvertedListText,"unconverted-total-size":r.status.unconvertedTotalSize,"output-to-dir":j.status.outputToDir,"output-dir-name":j.status.outputDirName,type:r.status.type,onAllZipsClicked:ue[5]||(ue[5]=k=>c("all-zips-clicked")),onDemandZipErrors:ue[6]||(ue[6]=k=>c("demand-zip-errors"))},null,8,["processing","list-length","zippingFlag","zips","img-url","img-name","success","failure","done","converted","retried","zipped-total-count","zipped-total-size","base-zip-name","failed-file-zipped-count","failed-to-create-failed-zip","failed-zip-done","failed-zips","unconverted-file-count","unconverted-list-text","unconverted-total-size","output-to-dir","output-dir-name","type"])]),_:1},8,["expanded-names"])]),_:1},512)}}}),eu=Ne(Jr,[["__scopeId","data-v-a067ea79"]]),tu=["innerHTML"],nu={style:{color:"red"}},ou=be({__name:"converter",props:qe({input:{},format:{},quality:{},retainExtension:{type:Boolean},maxZipSizeMB:{},autoStart:{type:Boolean},threads:{},outputToDir:{type:Boolean},outputDirHandle:{}},{showNote:{type:Boolean},showNoteModifiers:{}}),emits:qe(["start","end"],["update:showNote"]),setup(i,{expose:s,emit:u}){at(Je);const{t:l}=He(),n=pt(),a=$n(),r=10,c=navigator.hardwareConcurrency,v=typeof OffscreenCanvas=="function",b=100,S=y([[()=>l("dupAction_overwrite"),"overwrite"],[()=>l("dupAction_skip"),"skip"],[()=>l("cancel"),"cancel"]]),z=i,g=xe(i,"showNote"),T=u;s({beginConversion:Se});const F=y(!1),d=y(!1),$=y(!1),_=y(!1),f=y(!1),C=y(()=>"initializing"),w=y("info"),A=Ft(Pe()),O=dt("stat"),V=y(0),G=ke(()=>{var B;return(B=z.input)==null?void 0:B.length}),te=y(),P=y(""),Z=y(!1),m=y(!0),Q=y(!1);let se=()=>{};const fe=y(!1);let N=!1,K=!1,E,ie=()=>{},ae,he=0,ve=!1;ze(()=>z.input.length,(B,I)=>{B>=I&&z.autoStart&&Se()}),ze(_,B=>{document.body.style.overflowY=B?"hidden":"auto"}),Re(async()=>{await j(),ue()});async function q(){let B=!0;if(he>r*1e3&&!z.outputToDir&&!ve&&A.success>0&&(B=!1,await new Promise(I=>{n.warning({title:l("confirmCloseDialogTitle"),autoFocus:!0,maskClosable:!1,positiveText:l("close"),negativeText:l("back"),onPositiveClick:()=>B=!0,onAfterLeave:I,content:l("confirmCloseDialog")})})),!B)return!1;a.destroyAll(),_.value=!1,g.value=!1}function Le(B){ae==null||ae(B)}function X(B){Ut==null||Ut(B)}function ge(){!d.value&&F.value?d.value=!0:q()}async function Se(){var B;if(!((B=z.input)!=null&&B.length)||F.value){n.error({title:"error",positiveText:"OK",content:"An unexpected error occurred."});return}if(z.outputToDir&&!z.outputDirHandle){n.error({title:"error",positiveText:"OK",content:l("errMsgOutputDirNotFound")});return}if(F.value){n.error({title:"Busy",positiveText:"OK",content:l("interfered")});return}if(z.outputToDir){if(!fe.value&&(await new Promise(I=>{Q.value=!0,N=!1,se=I}),!N)){fe.value=!1;return}if(!await $a(z.outputDirHandle)||!await vi(z.outputDirHandle)){await n.warning({title:"Rejected",positiveText:"OK",maskClosable:!0,content:l("settings.permissionDenied")});return}}ce(z.input)}let Ce=y(()=>{});function Pe(B){const I={logs:[],ziplogs:[],startedCount:0,converted:0,success:0,failure:0,retried:0,done:0,length:0,zippedTotalCount:0,zippingErrorCount:0,zippedTotalSize:0,processing:!1,zips:[],inputTotalSize:0,outputTotalSize:0,thumbnail:null,baseZipName:"testzipname",type:"image/any",startedTime:Date.now(),convertedImageDataUrl:"",convertedImageName:"",convertedImageUrl:"",convertedImageOrgUrl:"",convertedImageIndex:-1,convertedImageShrinked:!1,zipSize:z.maxZipSizeMB,shrink:H.multithread&&H.shrinkImage?[H.maxWidth,H.maxHeight]:void 0,unconvertedListText:"",failedZipDone:!1,failedZips:[],unconvertedFileCount:0,unconvertedTotalSize:0,failedFileZippedCount:0,failedToCreateFailedZip:!1,outputToDir:z.outputToDir,outputDirName:z.outputDirHandle?z.outputDirHandle.name:""};return Object.assign(B||{},I)}function Ue(){f.value=!1,URL.revokeObjectURL(A.convertedImageUrl),URL.revokeObjectURL(A.convertedImageOrgUrl);for(const B of A.zips)URL.revokeObjectURL(B.url);A.zips.length=0;for(const B of A.failedZips)URL.revokeObjectURL(B.url);A.failedZips.length=0,Pe(A),ie(),ie=()=>{},ae=null,ve=!1,$.value=!1,d.value=!1,M=!1,ne.length=0,E=void 0,D.clear(),ee.clear(),gi()}async function ce(B){_.value&&(V.value^=1);let I=B.concat();Pe(A),Ue(),_.value=!0,f.value=!0,F.value=!0,A.processing=!0,w.value="info",C.value=()=>l("processing");const Y=new Set,oe=[],le=z.format,_e=z.quality,me=[...le.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),Ve=Be(le,_e,I[0].webkitRelativePath);let et=new Set;z.outputDirHandle&&(et=await yi(z.outputDirHandle,I)),A.length=I.length,A.baseZipName=Ve,A.type=le.replace(/image\//,"").toUpperCase()+(/jpe?g|webp/i.test(le)?" ("+_e+")":""),A.threads=K?0:z.threads;const gt=Date.now();T("start");let Ee,rt,mt;if(!K&&z.threads>=2?(ae=Fi,mt=await ki({files:I,completedFileIdSet:Y,completedFileDat:oe,ConvStats:A,canceled:d,props:z,imageType:le,quality:_e,outputExt:me,format:le,message:a,fsysDirHandler:z.outputDirHandle,writeUsingFileSystem:U,enqueueOverwriteConfirmation:k,existingFolders:et})):(ae=Mi,mt=await Di(I,Y,z,d,A,k)),{exception:rt,callbackToGenerateFailedZips:Ee,callbackToClearConverter:ie}=mt,rt){let tt;switch(rt.message){case"worker-load-error":tt=l("errMsgWorkerLoadError");break;default:tt="unexpected error"}n.error({title:"Error",autoFocus:!0,maskClosable:!1,closable:!1,content:()=>re("div",[re("p",tt),re(Me,{onClick(){location.reload()}},l("Reload"))])})}if(A.success===A.length?(w.value="success",C.value=()=>l("completed")):(w.value="error",C.value=()=>d.value?l("aborted"):l("incomplete")),Y.size!==I.length){const tt=ye(B,Y);Ce.value=()=>{!tt||!tt.length||Ee(tt)}}F.value=!1,A.processing=!1,$.value=!0,he=Date.now()-gt,T("end")}function ye(B,I){const Y=[],oe=[];let le=0;for(const _e of B)I.has(_e._id)||(Y.push(_e),oe.push(_e.webkitRelativePath||_e.relativePath||_e.name),le+=_e.size);return oe.length&&(A.unconvertedListText=oe.join(`
`),A.unconvertedFileCount=Y.length,A.unconvertedTotalSize=le),Y}function Be(B,I,Y){var Ve;const oe=new Date;B=B.replace(/^image\//,"").toLowerCase();const le=H.useFolderNameForZip&&((Ve=String(Y).match(/^\/?([^/]+)\//))==null?void 0:Ve[1])||"avif2jpg",_e=`
    ${oe.getFullYear().toString().substring(2)}
    ${String((oe.getMonth()+1)*100+oe.getDate()).padStart(4,"0")}
    ${String(oe.getHours()*1e4+oe.getMinutes()*100+oe.getSeconds()).padStart(6,"0")}
    -
    ${B+(/jpe?g|webp/i.test(B)?I:"")}
  `.replace(/\s/g,"");return`${le}-${_e}`.replace(/\s+/g," ")}async function j(){const B="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",I=document.createElement("img"),Y=Ma(I).then(()=>!0,()=>!1);I.src=B,await Y||n.warning({title:"Unsupported",positiveText:"OK",maskClosable:!1,content:l("avifUnsupported")})}function ue(){(!v||c<2||!Promise.any)&&(K=!0),K&&(je.value=0)}async function U(B,I){const Y=z.outputDirHandle;if(!Y)throw new Error("Directory Handle is empty");await Ea(Y,B,I,!0)}let M=!1;const ne=[];async function k(B,I,Y){return new Promise(oe=>{M?ne.push({resolver:oe,target:B,type:I,path:Y}):(M=!0,we(oe,B,I))})}const D=new Set,ee=new Set;async function we(B,I,Y,oe){let le;if(d.value?le="cancel":D.has(I)?le="overwrite":ee.has(I)?le="skip":(P.value=I,m.value=Y==="folder",le=E||await te.value.start(),le.startsWith("cancel")&&(d.value=!0),le==="overwrite"&&D.add(I),le==="skip"&&ee.add(I),le==="close"&&(Z.value=!1),await De(),!E&&Z.value&&(le+="-all",E=le)),B(le),ne.length){const{resolver:_e,target:me,type:Ve,path:et}=ne.shift();we(_e,me,Ve)}else M=!1}return(B,I)=>{const Y=ti,oe=Ie,le=Te,_e=Ae,me=Wt,Ve=zt,et=Qt,gt=Qs;return x(),W(Oe,null,[t(F)?pe("",!0):(x(),J(_e,{key:0,justify:"center",align:"center",style:{"margin-top":"0.4em"}},{default:e(()=>[o(le,{trigger:"hover",placement:"top","keep-alive-on-hover":!1,duration:0,delay:50},{trigger:e(()=>[o(Ge,null,{default:e(()=>[o(t(Me),{disabled:!t(G),onClick:Se,round:"",size:"large",style:{"font-size":"1.5em",padding:"1em"},type:t(G)?"success":void 0,"_:class":"{'button-ready': isReadyToConvert}"},{icon:e(()=>[o(oe,{size:"1.2em"},{default:e(()=>[o(Y)]),_:1})]),default:e(()=>[L(" "+p(t(l)("StartConversion")),1)]),_:1},8,["disabled","type"])]),_:1})]),default:e(()=>[h("div",{innerHTML:t(G)?t(l)("convertTooltip"):t(l)("convertUnpreparedTooltip")},null,8,tu)]),_:1})]),_:1})),o(Ve,{ref:"processingModal","display-directive":"show",show:t(_),"onUpdate:show":I[2]||(I[2]=Ee=>Fe(_)?_.value=Ee:null),closable:t($),"close-on-esc":!1,preset:"dialog",onClick:I[3]||(I[3]=Ee=>{t(a).destroyAll()}),onMaskClick:I[4]||(I[4]=Ee=>{t(a).destroyAll()}),onClose:q,onEsc:ge,title:t(C),type:t(w),"mask-closable":!1,onAfterLeave:Ue,onBeforeLeave:I[5]||(I[5]=Ee=>{t(O).cleanup()}),class:"processing-dialog"},{default:e(()=>[o(_e,{vertical:"",style:{"flex-grow":"1"}},{default:e(()=>[t(f)?(x(),J(eu,{ref_key:"stat",ref:O,key:t(V),processing:t(F),status:t(A),interval:b,onAllZipsClicked:I[0]||(I[0]=Ee=>Fe(ve)?ve.value=!0:ve=!0),onDemandZipErrors:t(Ce),onDemandImage:Le,onDeleteImage:X},null,8,["processing","status","onDemandZipErrors"])):pe("",!0),o(_e,{justify:"end",align:"center",wrap:!1},{default:e(()=>[t(F)?(x(),J(t(Me),{key:0,disabled:t(d),ref:"cancelbutton",round:"",size:"large",onClick:I[1]||(I[1]=Ee=>d.value=!0)},{default:e(()=>[o(me,{show:t(d)&&!t($),size:"small"},{default:e(()=>[L(p(t(l)("cancel")),1)]),_:1},8,["show"])]),_:1},8,["disabled"])):t($)?(x(),J(t(Me),{key:1,onClick:q,round:"",size:"large"},{default:e(()=>[L(p(t(l)("close")),1)]),_:1})):pe("",!0)]),_:1})]),_:1})]),_:1},8,["show","closable","title","type"]),o(On,{ref_key:"promptref",ref:te,closable:"",draggable:"",type:"warning","close-on-esc":"",buttons:t(S),"show-apply-all":"","label-apply-all":B.$t("confirmApplyAllLabel"),"apply-all-checked":t(Z),"onUpdate:applyAllChecked":I[6]||(I[6]=Ee=>Fe(Z)?Z.value=Ee:null)},{header:e(()=>[L(p(B.$t("confirmFileOverwriteTitle",{type:t(m)?B.$t("folder"):B.$t("file")})),1)]),default:e(()=>[h("div",null,p(B.$t("confirmFileOverwriteMsg",{type:t(m)?B.$t("folder"):B.$t("file")})),1),o(_e,{class:"path",align:"center",size:1,wrap:!1},{default:e(()=>[t(m)?(x(),J(et,{key:0})):(x(),J(gt,{key:1})),L(" "+p(t(P)),1)]),_:1})]),_:1},8,["buttons","label-apply-all","apply-all-checked"]),o(Ve,{preset:"dialog",type:"warning",show:t(Q),"onUpdate:show":I[7]||(I[7]=Ee=>Fe(Q)?Q.value=Ee:null),title:B.$t("warnAboutFileSysTitle"),onAfterLeave:I[8]||(I[8]=Ee=>t(se)()),"positive-text":B.$t("Continue"),"negative-text":B.$t("cancel"),onPositiveClick:I[9]||(I[9]=Ee=>void(Fe(N)?N.value=!0:N=!0)),onNegativeClick:I[10]||(I[10]=Ee=>void(Fe(N)?N.value=!1:N=!1))},{default:e(()=>[h("p",null,p(B.$t("warnAboutFileSysBeforeConversion1")),1),o(_e,{class:"path",align:"center",size:1,wrap:!1},{default:e(()=>[o(et),L(" "+p(B.outputDirHandle.name),1)]),_:1}),h("p",nu,p(B.$t("warnAboutFileSysBeforeConversion2")),1)]),_:1},8,["show","title","positive-text","negative-text"])],64)}}}),au={class:"container-1"},lu={style:{color:"gray",padding:"0.2em","font-size":"smaller","text-align":"center"}},su=["innerHTML"],iu={style:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","font-size":"xx-small","white-space":"nowrap"}},ru=be({__name:"droptarget",props:{forbidden:{type:Boolean},dropTarget:{}},emits:["drop"],setup(i,{emit:s}){at(Je);const u=i,l=s,n=fl(),a=y(!1),r=y(0),c=y("");Re(()=>{v(u.dropTarget||document)});function v(S){document.ondragstart=z=>z.preventDefault(),document.ondragover=z=>z.preventDefault(),S.ondrop=async z=>{var T;if(z.preventDefault(),a.value||u.forbidden)return;a.value=!0,r.value=0,c.value="";let g;try{const F=[...z.dataTransfer.items].map(d=>d.webkitGetAsEntry());n.start(),g=await b(F),n.finish()}catch{g=[...((T=z.dataTransfer)==null?void 0:T.files)??[]],n.error()}a.value&&(a.value=!1,l("drop",g))}}async function b(S,z){z=z||[];for(const g of S)if(g.isFile){const T=await new Promise(F=>g.file(d=>F(d)));Object.defineProperty(T,"webkitRelativePath",{value:g.fullPath.replace(/^\//,"")}),z.push(T),r.value++}else if(g.isDirectory){c.value=g.fullPath;const T=g.createReader();do{const F=await new Promise(d=>T.readEntries($=>d($)));if(!F.length)break;await b(F,z)}while(!0)}return z}return(S,z)=>{const g=Te,T=Ae,F=zt;return x(),W("div",au,[o(g,{to:!1,"display-directive":"show",trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:e(()=>[h("div",lu," ("+p(S.$t("droptargetLabel"))+") ",1)]),default:e(()=>[h("h3",{innerHTML:S.$t("droptargetTooltip"),style:{"max-width":"200px","text-align":"center","word-break":"keep-all","overflow-wrap":"break-word"}},null,8,su)]),_:1}),o(F,{show:t(a),"onUpdate:show":z[0]||(z[0]=d=>Fe(a)?a.value=d:null),closable:!0,preset:"dialog",title:"Parsing dropped items.",type:"info","mask-closable":!1,"negative-text":S.$t("cancel")},{default:e(()=>[o(T,{vertical:"",align:"center"},{default:e(()=>[h("div",iu,p(t(c)),1),h("div",null,"found "+p(t(r))+" files",1)]),_:1})]),_:1},8,["show","negative-text"])])}}}),uu=Ne(ru,[["__scopeId","data-v-bf1cf34d"]]),cu={class:"container-1"},du={class:"container-2"},pu=["innerHTML"],fu=["innerHTML"],gu={style:{"white-space":"nowrap"}},mu={style:{"padding-left":"1em"}},vu=["innerHTML"],hu=["accept"],yu=be({__name:"file-selector",props:qe({target:{},userExtensions:{},forbidden:{type:Boolean}},{"auto-start-opt":{type:Boolean,required:!0},"auto-start-optModifiers":{},expanded:{type:Boolean,required:!1},expandedModifiers:{},disableNotifyingFolderSelect:{type:Boolean},disableNotifyingFolderSelectModifiers:{}}),emits:qe(["input","click","cancel","on-change-accept","update:target","update:userExtensions"],["update:auto-start-opt","update:expanded","update:disableNotifyingFolderSelect"]),setup(i,{emit:s}){const u=pt(),{t:l}=He(),n=at(Je),a=["avif_only","all_images","all_files","edit_type"],r=[];for(const N of a)r.push({label:()=>l("fileTypeRadioOptions."+N),value:N});const c=({node:N,option:K})=>re(Te,{placement:"right"},{trigger:()=>N,default:()=>Z(K.value).replace(/,/g,", ")}),v=i,b=xe(i,"auto-start-opt"),S=s,z=y(0),g=y(!1),T=y(!1),F=ke(()=>Z(_.value)),d=ke(()=>f.value.split(",").every(K=>/^\s*(\.[\w\-]+)*\s*$/.test(K))?"success":"error"),$=ke(()=>!v.forbidden&&!T.value);xe(i,"expanded");const _=ke({get:()=>a.indexOf(v.target)>=0?v.target:a[0],set:N=>{S("update:target",N)}}),f=ke({get:()=>v.userExtensions,set:N=>{S("update:userExtensions",N)}}),C=xe(i,"disableNotifyingFolderSelect"),w=y(null),A=y(null),O=y(P());ze(_,N=>{S("on-change-accept",F.value)}),Re(()=>{});async function V(N){if(S("click"),N===A.value&&!C.value){let K=!1;if(await new Promise(E=>{u.info({title:l("loadfolderNotifyingTitle"),positiveText:l("Continue"),negativeText:l("Cancel"),onAfterLeave:()=>E(K),onPositiveClick:()=>K=!0,content:()=>re("div",[re("p",{},l("loadfolderNotifyingMessageTerm1")),re("div",[re(zn,{width:250,style:{border:"3px solid gray"},src:"/avif2jpeg/dist//notification-folder.png"})]),re("p",{},l("loadfolderNotifyingMessageTerm2")),re("p",[re(Tt,{onUpdateChecked:ie=>C.value=ie,checked:C.value},()=>l("checkboxTextDontShowThis"))])])})}),!K){C.value=!1,S("cancel");return}}N.click()}function G(){S("cancel")}function te(N){const E=[...N.target.files];w.value.value="",A.value.value="",Q(E)}function P(){return"webkitdirectory"in document.createElement("input")}function Z(N){switch(N){case"avif_only":return".avif, .webp";case"all_images":return".jpg, .jpeg, .jfif, .pjpeg, .pjp, .gif, .png, .webp, .avif, .bmp, .apng, .ico, .svg";case"edit_type":return f.value;case"all_files":default:return".*"}}async function m(N){const K=String(F.value).toLowerCase().replace(/\s+/g,"");if(K&&F.value!==".*"){const E=K.split(",");N=N.filter(ie=>E.includes(ie.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),N.length||(await new Promise(ie=>{u.error({title:"Images Not Found",positiveText:"OK",onAfterLeave:ie,content:()=>re("div",[re(Sn,{description:"NO IMAGES"}),`${l("noimage")}`,re("br"),F.value])})}),G())}return N}async function Q(N){T.value=!0,N=await m(N),z.value=N.length,N.length>0&&S("input",fe(N)),T.value=!1}let se=0;function fe(N){const K=[];for(const E of N)E.hasOwnProperty("_id")||Object.defineProperty(E,"_id",{value:se++}),K.push(E);return K}return(N,K)=>{const E=Ie,ie=Me,ae=Ae,he=Mt,ve=gl,q=Gt,Le=lt;return x(),W(Oe,null,[h("div",cu,[h("div",du,[o(ae,{vertical:"",align:"center",justify:"center",inline:"",size:"small"},{default:e(()=>[o(ae,{align:"center",justify:"space-around",class:"main-buttons"},{default:e(()=>[o(ae,{vertical:"",align:"stretch",justify:"center"},{default:e(()=>[o(t(Te),{to:!1,"display-directive":"show",show:t(n).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:"top",duration:0,delay:0,"z-index":10},{trigger:e(()=>[o(ie,{disabled:!t($),size:"large",onClick:K[0]||(K[0]=X=>V(t(w))),round:"",style:{width:"100%","background-color":"white","font-size":"1.3em"}},{icon:e(()=>[o(E,{size:"large",color:"gray"},{default:e(()=>[o(t(Fn))]),_:1})]),default:e(()=>[L(" "+p(N.$t("loadbutton")),1)]),_:1},8,["disabled"])]),default:e(()=>[h("div",{innerHTML:N.$t("loadbuttontooltip")},null,8,pu)]),_:1},8,["show"]),t(O)||t(n).SSR?(x(),W(Oe,{key:0},[o(t(Te),{to:!1,"display-directive":"show",trigger:"hover",placement:t(n).LANDSCAPE?"left":"bottom","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:t(n).showTooltipsBeforeMounted.value},{trigger:e(()=>[o(ie,{disabled:!t($),size:"large",onClick:K[1]||(K[1]=X=>V(t(A))),round:"",style:{width:"100%","background-color":"white","font-size":"1.3em"}},{icon:e(()=>[o(E,{size:"large",color:"gray"},{default:e(()=>[o(t(En))]),_:1})]),default:e(()=>[L(" "+p(N.$t("loadfolderbutton")),1)]),_:1},8,["disabled"])]),default:e(()=>[h("div",{innerHTML:N.$t("loadfoldertooltip")},null,8,fu)]),_:1},8,["placement","show"]),t(n).IS_SP?pe("",!0):(x(),J(uu,{key:0,onDrop:Q,forbidden:!t($),_class:"drop-target"},null,8,["forbidden"]))],64)):pe("",!0)]),_:1})]),_:1}),o(ae,{justify:"center"},{default:e(()=>[o(t(Te),{placement:"top-start"},{trigger:e(()=>[o(t(Tt),{checked:b.value,"onUpdate:checked":K[2]||(K[2]=X=>b.value=X),size:"small",style:{"font-size":"smaller"}},{default:e(()=>[L(p(N.$t("settings.autoStartConversion")),1)]),_:1},8,["checked"])]),default:e(()=>[L(p(N.$t("settings.autoStartConversionTooltip")),1)]),_:1})]),_:1}),o(ae,{vertical:""},{default:e(()=>[o(ae,{wrap:t(n).IS_SP,align:"center",justify:"stretch"},{default:e(()=>[o(t(Te),{to:!1,"display-directive":"show",trigger:"hover","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:t(n).showTooltipsBeforeMounted.value},{trigger:e(()=>[h("span",gu,p(N.$t("TargetFileTypeExt"))+": ",1)]),default:e(()=>[L(p(N.$t("TargetFileTypeExtTooltip")),1)]),_:1},8,["show"]),o(t(Te),{"keep-alive-on-hover":!1,placement:"right",style:{"max-width":"200px"},duration:0,delay:0},{trigger:e(()=>[o(he,{trigger:"click",width:"trigger",size:"tiny",value:t(_),"onUpdate:value":K[3]||(K[3]=X=>Fe(_)?_.value=X:null),options:r,"render-option":c,"consistent-menu-width":!1},null,8,["value"])]),default:e(()=>[L(" "+p(Z(t(_)).replace(/,/g,", ")),1)]),_:1})]),_:1},8,["wrap"]),t(_)==="edit_type"?(x(),J(t(Te),{key:0,trigger:"hover","keep-alive-on-hover":!1,placement:"bottom-start",show:t(g),duration:0,delay:0},{trigger:e(()=>[h("div",mu,[o(Le,{trigger:"manual",placement:"right-end",show:t(_)==="edit_type"&&t(d)!=="success"&&!!t(g)},{trigger:e(()=>[o(ve,{value:t(f),"onUpdate:value":K[4]||(K[4]=X=>Fe(f)?f.value=X:null),status:t(d),disabled:t(_)!=="edit_type",onFocus:K[5]||(K[5]=X=>g.value=!0),onBlur:K[6]||(K[6]=X=>g.value=void 0),clearable:!0,size:"small",placeholder:".jpg, .gif, .png",spellcheck:"false"},null,8,["value","status","disabled"])]),default:e(()=>[o(q,{type:"error","show-icon":!0,title:"Validation error"},{default:e(()=>K[7]||(K[7]=[L(" Please correct the extension list."),h("br",null,null,-1),h("ul",null,[h("li",null,"Each extension must begin with a period. "),h("li",null,"Separate each extension with a comma. "),h("li",null,"Use alphameric characters.")],-1)])),_:1,__:[7]})]),_:1},8,["show"])])]),default:e(()=>[h("span",{innerHTML:N.$t("editAcceptTypes")},null,8,vu)]),_:1},8,["show"])):pe("",!0)]),_:1})]),_:1})])]),h("input",{ref_key:"fileinput",ref:w,onInput:te,onCancel:G,type:"file",multiple:"",accept:t(F),style:{display:"none"}},null,40,hu),h("input",{ref_key:"folderinput",ref:A,webkitdirectory:"",directory:"",onInput:te,onCancel:G,type:"file",style:{display:"none"}},null,544)],64)}}}),_u=Ne(yu,[["__scopeId","data-v-2eb05c45"]]),wu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function bu(i,s){return x(),W("svg",wu,s[0]||(s[0]=[h("path",{fill:"currentColor","fill-rule":"evenodd",d:"M9.293 7.293a1 1 0 0 1 1.414 0L15.414 12l-4.707 4.707a1 1 0 0 1-1.414-1.414L12.586 12L9.293 8.707a1 1 0 0 1 0-1.414","clip-rule":"evenodd"},null,-1)]))}const ku=Xe({name:"stash-chevron-right-duotone",render:bu}),zu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Su(i,s){return x(),W("svg",zu,s[0]||(s[0]=[h("path",{fill:"currentColor",d:"M5 21q-1.275 0-1.812-1.137t.262-2.113L9 11V5H8q-.425 0-.712-.288T7 4t.288-.712T8 3h8q.425 0 .713.288T17 4t-.288.713T16 5h-1v6l5.55 6.75q.8.975.263 2.113T19 21zm2-3h10l-3.4-4h-3.2zm-2 1h14l-6-7.3V5h-2v6.7zm7-7"},null,-1)]))}const Cu=Xe({name:"material-symbols-experiment-outline",render:Su}),Tu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Au(i,s){return x(),W("svg",Tu,s[0]||(s[0]=[h("path",{fill:"currentColor",d:"M4 18h8.13L11 19.13V20H4a2 2 0 0 1-2-2V6c0-1.11.89-2 2-2h6l2 2h8a2 2 0 0 1 2 2v2.15c-.26-.09-.54-.15-.83-.15c-.42 0-.81.11-1.17.3V8H4zm18.85-4.53l-1.32-1.32c-.2-.2-.53-.2-.72 0l-.98.98l2.04 2.04l.98-.98c.2-.19.2-.52 0-.72M13 19.96V22h2.04l6.13-6.12l-2.04-2.05z"},null,-1)]))}const xu=Xe({name:"mdi-folder-edit-outline",render:Au}),Iu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Lu(i,s){return x(),W("svg",Iu,s[0]||(s[0]=[h("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"},[h("path",{d:"M19.5 11c0-.818 0-1.57-.152-1.937s-.441-.657-1.02-1.235l-4.736-4.736c-.499-.499-.748-.748-1.058-.896a2 2 0 0 0-.197-.082C12.014 2 11.661 2 10.956 2c-3.245 0-4.868 0-5.967.886a4 4 0 0 0-.603.603C3.5 4.59 3.5 6.211 3.5 9.456V14c0 3.771 0 5.657 1.172 6.828S7.729 22 11.5 22h8m-7-19.5V3c0 2.828 0 4.243.879 5.121C14.257 9 15.672 9 18.5 9h.5"}),h("path",{d:"M14.5 13.999v5M12 19H9l3-5H9m8 3v-3h2a1.5 1.5 0 0 1 0 3zm0 0v2"})],-1)]))}const $u=Xe({name:"hugeicons-zip02",render:Lu}),Fu={style:{"white-space":"nowrap"}},Eu=be({__name:"settings-output",props:qe({quality:{},format:{},isMultithreadEnabled:{type:Boolean}},{method:{required:!0},methodModifiers:{},"target-folder-handle":{},"target-folder-handleModifiers":{},"action-on-duplicate":{default:"prompt"},"action-on-duplicateModifiers":{}}),emits:qe(["update:format","update:quality"],["update:method","update:target-folder-handle","update:action-on-duplicate"]),setup(i,{emit:s}){const u=i,l=xe(i,"method"),n=xe(i,"target-folder-handle");xe(i,"action-on-duplicate");const a=s,{t:r}=He(),c=pt();$n();const v=at(Je),b=y([]),S=["image/jpeg","image/png","image/gif","image/bmp","image/avif","image/webp"],z=ke({get:()=>u.format,set:P=>{P=w(P),a("update:format",P)}}),g=ke({get:()=>u.quality,set:P=>{a("update:quality",P)}}),T=ke(()=>/png|bmp/i.test(z.value)),F=y(null),d=y(!1),$=ke(()=>l.value==="fs"&&!n.value),_=ke(()=>l.value==="fs"),f=ri();f&&C(),Re(()=>{A(),!f&&_.value&&(l.value="zip"),_.value&&V()});async function C(){await _i();const P=await wi();P?n.value=P:l.value="zip"}function w(P){return b.value.indexOf(P)<0&&(P=b.value[0]),P}function A(){for(const P of S)F.value.toDataURL(P).indexOf(P)>=0&&b.value.push(P);b.value.length===0&&b.value.push(S[0])}function O(){return n.value.name}function V(){l.value="fs",Vl(d,200,!1)}async function G(){const P=await ui();if(!P){if(await c.warning({title:"Rejected",positiveText:"OK",maskClosable:!0,content:r("settings.outputFolderDenied")}),n.value)return;l.value="zip"}n.value=P,dn(P)}function te(){n.value=null,dn(null)}return(P,Z)=>{const m=Ie,Q=Ae,se=Mt,fe=Te,N=Dt,K=Dn,E=$u,ie=ml,ae=xu,he=Cu,ve=ku,q=Qt,Le=Ln,X=Me,ge=Gt,Se=lt,Ce=Mn,Pe=ft,Ue=qt;return x(),W(Oe,null,[o(Q,{vertical:"",justify:"center",class:"body"},{default:e(()=>[o(Q,{vertical:""},{default:e(()=>[o(fe,{to:!1,"display-directive":"show",show:t(v).showTooltipsBeforeMounted.value,trigger:"hover",placement:t(v).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:e(()=>[o(Q,{align:"center",wrap:!1},{default:e(()=>[o(Q,{align:"center",wrap:!1,size:4},{default:e(()=>[o(m,null,{default:e(()=>[o(t(Fn))]),_:1}),L(" "+p(t(r)("settings.outputType"))+": ",1)]),_:1}),o(se,{value:z.value,"onUpdate:value":Z[0]||(Z[0]=ce=>z.value=ce),options:b.value.map(ce=>({value:ce,label:ce})),"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),_:1})]),default:e(()=>[L(" "+p(t(r)("settings.imageTypeTooltip")),1)]),_:1},8,["show","placement"]),o(fe,{to:!1,"display-directive":"show",show:t(v).showTooltipsBeforeMounted.value,trigger:"hover",placement:t(v).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:e(()=>[o(Q,{align:"center"},{default:e(()=>[o(Q,{align:"start",wrap:!1},{default:e(()=>[o(Q,{align:"center",size:4},{default:e(()=>[o(m,null,{default:e(()=>[o(t(In))]),_:1}),h("span",Fu,p(t(r)("settings.outputQuality"))+":",1)]),_:1}),o(Q,{align:"center",justify:"space-between"},{default:e(()=>[o(N,{tooltip:!1,value:g.value,"onUpdate:value":Z[1]||(Z[1]=ce=>g.value=ce),step:1,style:{width:"120px"},disabled:T.value},null,8,["value","disabled"]),o(K,{onBlur:Z[2]||(Z[2]=ce=>g.value=g.value==null?0:g.value),value:g.value,"onUpdate:value":Z[3]||(Z[3]=ce=>g.value=ce),step:"1",min:"0",max:"100",disabled:T.value,style:{width:"90px"},size:"small"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:e(()=>[L(" "+p(t(r)("settings.qualitytooltip")),1)]),_:1},8,["show","placement"])]),_:1}),o(Ue,{"trigger-areas":["arrow","main"],"default-expanded-names":_.value?"def":void 0},{default:e(()=>[o(Pe,{name:"def",disabled:_.value},{header:e(()=>[L(p(P.$t("settings.changeSaveMethod")),1)]),default:e(()=>[o(Q,{vertical:"",align:"stretch",class:"method-box",size:1},{default:e(()=>[o(ie,{checked:l.value==="zip","onUpdate:checked":Z[4]||(Z[4]=ce=>ce&&(l.value="zip"))},{default:e(()=>[o(Q,{align:"center",size:2,class:Ye(l.value==="zip"?"method-active":"method-inactive")},{default:e(()=>[o(m,{size:"1.5em"},{default:e(()=>[o(E)]),_:1}),h("span",null,p(P.$t("settings.saveAsZIP"))+" ("+p(P.$t("Default"))+") ",1)]),_:1},8,["class"])]),_:1},8,["checked"]),o(ie,{disabled:!t(f),checked:_.value,"onUpdate:checked":Z[5]||(Z[5]=ce=>ce&&t(f)&&V())},{default:e(()=>[o(Q,{align:"center",size:2,wrap:!1,class:Ye(_.value?"method-active":"method-inactive")},{default:e(()=>[o(m,{size:"1.5em"},{default:e(()=>[o(ae)]),_:1}),o(Q,{align:"center",size:1},{default:e(()=>[L(p(P.$t("settings.saveToSpecifiedFolder"))+" ",1),o(Q,{style:{"font-size":"0.8em",color:"gray","font-weight":"normal"},size:0,align:"center"},{default:e(()=>[Z[7]||(Z[7]=L(" (")),o(he),L(p(P.$t("experimental"))+") ",1)]),_:1,__:[7]})]),_:1})]),_:1},8,["class"])]),_:1},8,["disabled","checked"]),o(Ge,null,{default:e(()=>[_.value?(x(),J(Q,{key:0,style:{"margin-left":"2em"},wrap:!1},{default:e(()=>[o(Se,{trigger:"manual",placement:"right-start",show:d.value&&$.value,"keep-alive-on-hover":!0},{trigger:e(()=>[o(X,{onClick:Z[6]||(Z[6]=ce=>G()),size:"small",ghost:"",color:n.value?"green":"red",style:{"justify-content":"start","flex-grow":"1"}},{icon:e(()=>[o(ve)]),default:e(()=>[n.value?(x(),J(Q,{key:0,wrap:!1,size:2,align:"center"},{default:e(()=>[o(q),o(Le,{style:{"max-width":"15em"}},{default:e(()=>[L(p(O()),1)]),_:1})]),_:1})):(x(),J(Q,{key:1,wrap:!1,size:2,align:"center"},{default:e(()=>[L(p(P.$t("settings.chooseOutputFolder")),1)]),_:1}))]),_:1},8,["color"])]),default:e(()=>[o(ge,{type:"error","show-icon":!0,title:P.$t("settings.chooseOutputFolderTooltip")},null,8,["title"])]),_:1},8,["show"]),n.value?(x(),J(X,{key:0,size:"small",onClick:te,title:P.$t("Cancel")},{icon:e(()=>[o(Ce)]),_:1},8,["title"])):pe("",!0)]),_:1})):pe("",!0)]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1},8,["default-expanded-names"])]),_:1}),h("canvas",{ref_key:"canvas",ref:F,width:"1",height:"1",style:{display:"none"}},null,512)],64)}}}),Du=Ne(Eu,[["__scopeId","data-v-3e127ad4"]]),Mu={style:{"font-size":"1.1em"}},Pu={style:{"font-size":"1.1em"}},Ou={style:{width:"4em","text-align":"left"}},Uu={style:{width:"4em","text-align":"left"}},Rt=100,mn=2e3,vn=4096,hn=4096,Bu=100,Ru=100,Nu=be({__name:"settings-adv",props:{expanded:{type:Boolean,required:!1},expandedModifiers:{},multithread:{type:Boolean,required:!0},multithreadModifiers:{},threadCount:{required:!0},threadCountModifiers:{},maxZipSize:{required:!0},maxZipSizeModifiers:{},retainExt:{type:Boolean,required:!0},retainExtModifiers:{},useFolderNameForZip:{type:Boolean,required:!0},useFolderNameForZipModifiers:{},shrinkImage:{type:Boolean,required:!0},shrinkImageModifiers:{},maxWidth:{required:!0},maxWidthModifiers:{},maxHeight:{required:!0},maxHeightModifiers:{}},emits:["update:expanded","update:multithread","update:threadCount","update:maxZipSize","update:retainExt","update:useFolderNameForZip","update:shrinkImage","update:maxWidth","update:maxHeight"],setup(i){const s=at(Je),u={trigger:"hover",keepAliveOnHover:!1},l=xe(i,"expanded"),n=xe(i,"multithread"),a=xe(i,"threadCount"),r=xe(i,"maxZipSize"),c=xe(i,"retainExt"),v=xe(i,"useFolderNameForZip"),b=xe(i,"shrinkImage"),S=xe(i,"maxWidth"),z=xe(i,"maxHeight");ze(je,_=>{_>1||(n.value=!1),a.value>_&&(a.value=_)},{immediate:!0});const g=y(!1);let T=!1,F=()=>{};const d=ke(()=>n.value&&je.value>1);Re(()=>{je.value>1&&typeof a.value>"u"&&(a.value=Math.max(je.value,2))});async function $(){T=!1,await new Promise(_=>{g.value=!0,F=_}),T&&as()}return(_,f)=>{const C=Ie,w=Me,A=yl,O=Ae,V=Dt,G=Dn,te=ft,P=qt,Z=zt;return x(),W(Oe,null,[o(O,{justify:"center"},{default:e(()=>[o(P,{"display-directive":"show","default-expanded-names":l.value?["collapitem"]:"","on-update:expanded-names":m=>l.value=!!String(m),"trigger-areas":["arrow","main"],class:Ye(["settings-body",l.value?"expand-adv-settings":""])},vl({arrow:e(()=>[h("span",Mu,[o(C,{style:de(l.value&&{top:"8px"})},{default:e(()=>[o(t(bl))]),_:1},8,["style"]),o(C,null,{default:e(()=>[o(t(kl))]),_:1})])]),default:e(()=>[o(te,{name:"collapitem"},{header:e(()=>[h("span",Pu,p(_.$t("settings.advancedSettings")),1)]),default:e(()=>[o(O,{vertical:"",style:{"padding-left":"2em"}},{default:e(()=>[o(t(Te),vt(ht(u)),{trigger:e(()=>[o(O,{vertical:""},{default:e(()=>[o(O,{wrap:!1,align:"center"},{default:e(()=>[o(w,{text:"",disabled:!t(je),style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:f[2]||(f[2]=m=>n.value=!n.value)},{icon:e(()=>[o(C,null,{default:e(()=>[o(t(hl))]),_:1})]),default:e(()=>[L(" "+p(_.$t("settings.enableMultiThreads")),1)]),_:1},8,["disabled"]),o(A,{value:n.value,"onUpdate:value":f[3]||(f[3]=m=>n.value=m),disabled:!t(je),size:"small"},null,8,["value","disabled"])]),_:1}),o(O,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:e(()=>[o(V,{value:a.value,"onUpdate:value":f[4]||(f[4]=m=>a.value=m),disabled:!t(je)||!n.value,step:1,min:2,max:t(je),style:{width:"120px"}},null,8,["value","disabled","max"]),o(G,{onBlur:f[5]||(f[5]=m=>a.value=a.value==null?2:a.value),size:"tiny",value:a.value,"onUpdate:value":f[6]||(f[6]=m=>a.value=m),disabled:!t(je)||!n.value,step:1,min:2,max:t(je),style:{width:"10em"}},{suffix:e(()=>[L(p(_.$t("threads",a.value)),1)]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:e(()=>[L(" "+p(_.$t("settings.multiThreadsTooltip")),1)]),_:1},16),o(t(Te),vt(ht(u)),{trigger:e(()=>[o(O,{vertical:""},{default:e(()=>[o(O,{wrap:!1,align:"center"},{default:e(()=>[o(w,{text:"",focusable:!1,style:{"white-space":"nowrap","font-size":"smaller"}},{icon:e(()=>[o(C,{style:{"vertical-align":"middle"}},{default:e(()=>[o(t(_l))]),_:1})]),default:e(()=>[L(" "+p(_.$t("settings.maxZipFileSize"))+": ",1)]),_:1})]),_:1}),o(O,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:e(()=>[o(V,{tooltip:!1,value:r.value,"onUpdate:value":f[7]||(f[7]=m=>r.value=m),step:1,min:Rt,max:mn,style:{width:"120px"}},null,8,["value"]),o(G,{onBlur:f[8]||(f[8]=m=>r.value=r.value==null?Rt:r.value),size:"tiny",value:r.value,"onUpdate:value":f[9]||(f[9]=m=>r.value=m),step:"1",min:Rt,max:mn,style:{width:"10em"}},{suffix:e(()=>f[25]||(f[25]=[L("(MB)")])),_:1},8,["value"])]),_:1})]),_:1})]),default:e(()=>[L(" "+p(_.$t("settings.maxZipFileSizeTooltip")),1)]),_:1},16),o(t(Te),vt(ht(u)),{trigger:e(()=>[o(O,{wrap:!1,align:"center"},{default:e(()=>[o(w,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:f[10]||(f[10]=m=>v.value=!v.value)},{icon:e(()=>[o(C,null,{default:e(()=>[o(t(En))]),_:1})]),default:e(()=>[L(" "+p(_.$t("settings.useFolderNameForZip")),1)]),_:1}),o(A,{value:v.value,"onUpdate:value":f[11]||(f[11]=m=>v.value=m),size:"small"},null,8,["value"])]),_:1})]),default:e(()=>[L(" "+p(_.$t("settings.useFolderNameForZipTooltip")),1)]),_:1},16),o(t(Te),vt(ht(u)),{trigger:e(()=>[o(O,{wrap:!1,align:"center"},{default:e(()=>[o(w,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:f[12]||(f[12]=m=>c.value=!c.value)},{icon:e(()=>[o(C,null,{default:e(()=>[o(t(xn))]),_:1})]),default:e(()=>[L(" "+p(_.$t("settings.retainOriginalExtension")),1)]),_:1}),o(A,{value:c.value,"onUpdate:value":f[13]||(f[13]=m=>c.value=m),size:"small"},null,8,["value"])]),_:1})]),default:e(()=>[L(" "+p(_.$t("settings.retainExtTooltip")),1)]),_:1},16),o(t(Te),vt(ht(u)),{trigger:e(()=>[o(O,{vertical:""},{default:e(()=>[o(O,{wrap:!1,align:"center"},{default:e(()=>[o(w,{disabled:!d.value,text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:f[14]||(f[14]=m=>b.value=!b.value)},{icon:e(()=>[o(C,null,{default:e(()=>[o(t(wl))]),_:1})]),default:e(()=>[L(" "+p(_.$t("settings.shrinkImage")),1)]),_:1},8,["disabled"]),o(A,{disabled:!d.value,value:b.value,"onUpdate:value":f[15]||(f[15]=m=>b.value=m),size:"small"},null,8,["disabled","value"])]),_:1}),o(O,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:e(()=>[o(V,{value:S.value,"onUpdate:value":f[16]||(f[16]=m=>S.value=m),disabled:!b.value||!d.value,step:1,min:Bu,max:vn,style:{width:"120px"}},null,8,["value","disabled"]),o(G,{size:"tiny",onBlur:f[17]||(f[17]=m=>S.value=S.value==null?8:S.value),value:S.value,"onUpdate:value":f[18]||(f[18]=m=>S.value=m),disabled:!b.value||!d.value,step:1,min:8,max:vn*4,style:{"max-width":"15em","text-align":"right"}},{prefix:e(()=>[h("span",Ou,p(_.$t("width")),1)]),suffix:e(()=>f[26]||(f[26]=[L("px")])),_:1},8,["value","disabled","max"])]),_:1}),o(O,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:e(()=>[o(V,{value:z.value,"onUpdate:value":f[19]||(f[19]=m=>z.value=m),disabled:!b.value||!d.value,step:1,min:Ru,max:hn,style:{width:"120px"}},null,8,["value","disabled"]),o(G,{size:"tiny",onBlur:f[20]||(f[20]=m=>z.value=z.value==null?8:z.value),value:z.value,"onUpdate:value":f[21]||(f[21]=m=>z.value=m),disabled:!b.value||!d.value,step:1,min:8,max:hn*4,style:{"max-width":"15em","text-align":"right"}},{prefix:e(()=>[h("span",Uu,p(_.$t("height")),1)]),suffix:e(()=>f[27]||(f[27]=[L("px")])),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:e(()=>[L(" "+p(_.$t("settings.shrinkImageTooltip")),1)]),_:1},16)]),_:1})]),_:1})]),_:2},[l.value?{name:"header-extra",fn:e(()=>[o(t(Te),{"keep-alive-on-hover":!1,duration:0,delay:0},{trigger:e(()=>[o(w,{onClick:f[0]||(f[0]=m=>$()),size:"tiny",style:{"font-size":"xx-small"}},{default:e(()=>[L(p(_.$t("reset")),1)]),_:1})]),default:e(()=>[L(" "+p(_.$t("settings.resetButtonTooltip")),1)]),_:1}),t(s).IS_DEV?(x(),W("button",{key:0,onClick:f[1]||(f[1]=m=>t(ls)())},"delcfg")):pe("",!0)]),key:"0"}:void 0]),1032,["default-expanded-names","on-update:expanded-names","class"])]),_:1}),o(Z,{preset:"confirm",type:"info",show:t(g),"onUpdate:show":f[22]||(f[22]=m=>Fe(g)?g.value=m:null),title:_.$t("reset"),"positive-text":_.$t("OK"),"negative-text":_.$t("cancel"),onPositiveClick:f[23]||(f[23]=m=>Fe(T)?T.value=!0:T=!0),onAfterLeave:f[24]||(f[24]=m=>t(F)())},{default:e(()=>[L(p(_.$t("warnAboutResetMsg")),1)]),_:1},8,["show","title","positive-text","negative-text"])],64)}}}),ju=Ne(Nu,[["__scopeId","data-v-58cc8d3c"]]),Zu={},Hu={style:{color:"gray","padding-left":"20px"}},Vu=["innerHTML"];function Wu(i,s){const u=kn,l=Ae;return x(),J(l,{vertical:"",justify:"end"},{default:e(()=>[o(u,{style:{margin:"0px"}}),o(l,{justify:"center"},{default:e(()=>[h("ul",Hu,[(x(!0),W(Oe,null,it(i.$tm("descriptions"),n=>(x(),W("li",{key:n,style:{"text-align":"left"},innerHTML:n},null,8,Vu))),128))])]),_:1})]),_:1})}const qu=Ne(Zu,[["render",Wu]]);function Gu(i={}){const{immediate:s=!1,onNeedRefresh:u,onOfflineReady:l,onRegistered:n,onRegisteredSW:a,onRegisterError:r}=i;let c,v,b;const S=async(g=!0)=>{await v,b==null||b()};async function z(){if("serviceWorker"in navigator){if(c=await $e(async()=>{const{Workbox:g}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:g}},[]).then(({Workbox:g})=>new g("/avif2jpeg/dist/sw.js",{scope:"/avif2jpeg/dist/",type:"classic"})).catch(g=>{r==null||r(g)}),!c)return;b=()=>{c==null||c.messageSkipWaiting()};{let g=!1;const T=()=>{g=!0,c==null||c.addEventListener("controlling",F=>{F.isUpdate&&window.location.reload()}),u==null||u()};c.addEventListener("installed",F=>{typeof F.isUpdate>"u"?typeof F.isExternal<"u"&&F.isExternal?T():!g&&(l==null||l()):F.isUpdate||l==null||l()}),c.addEventListener("waiting",T)}c.register({immediate:s}).then(g=>{a?a("/avif2jpeg/dist/sw.js",g):n==null||n(g)}).catch(g=>{r==null||r(g)})}}return v=z(),S}function Ku(i={}){const{immediate:s=!0,onNeedRefresh:u,onOfflineReady:l,onRegistered:n,onRegisteredSW:a,onRegisterError:r}=i,c=y(!1),v=y(!1);return{updateServiceWorker:Gu({immediate:s,onNeedRefresh(){c.value=!0,u==null||u()},onOfflineReady(){v.value=!0,l==null||l()},onRegistered:n,onRegisteredSW:a,onRegisterError:r}),offlineReady:v,needRefresh:c}}const Qu={style:{"line-height":"0px"}},Yu=["innerHTML"],Xu=be({__name:"PWAPrompt",setup(i){const s=y(null),u=y(!1),l=y(void 0),n=y(!1),a=y("unknown");window.addEventListener("beforeinstallprompt",d=>{d.preventDefault(),s.value=d,u.value=!0,l.value=!1}),window.addEventListener("appinstalled",d=>{g();try{gtag("event","pwa_installed",{event_category:"PWA",event_label:"User installed PWA"})}catch{}});const{needRefresh:r,updateServiceWorker:c}=Ku({onOfflineReady(){},async onNeedRefresh(){const d=await fetch(location.origin+"/avif2jpeg/dist/version.txt",{cache:"no-store"});if(d.status!==200)return;const $=await d.text();$&&(a.value=$)},onRegisterError(d){}});Re(async()=>{setTimeout(v,100)});async function v(){if(await b()&&(l.value=!!(S()||!u.value),l.value))try{gtag("event","pwa_launch",{event_category:"PWA",event_label:"App opened as PWA"})}catch{}}async function b(){var $;return await(($=navigator.userAgentData)==null?void 0:$.getHighEntropyValues(["brands"]).then(_=>_.brands.some(f=>f.brand.includes("Chromium")||f.brand.includes("Google Chrome")||f.brand.includes("Microsoft Edge"))))||/Chrome|Chromium|Edg\//.test(navigator.userAgent)}function S(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0}async function z(){if(s.value){s.value.prompt();const d=await s.value.userChoice;s.value=null,d.outcome==="accepted"&&setTimeout(g,500)}}function g(){var d;(d=navigator.serviceWorker)==null||d.ready.then($=>{var _;l.value||((_=$.active)==null||_.postMessage("app-installed"),l.value=!0)})}function T(){n.value=!0,setTimeout(()=>n.value=!1,60*60*1e3)}async function F(){r.value=!1,await c()}return(d,$)=>{const _=Ie,f=Ae,C=Te,w=Me,A=Gt;return x(),W("div",Qu,[l.value===!0?(x(),J(C,{key:0,placement:"bottom"},{trigger:e(()=>[o(f,{id:"app-installed",align:"center",size:1},{default:e(()=>[o(_,{component:t(sn)},null,8,["component"]),$[0]||($[0]=L("PWA "))]),_:1,__:[0]})]),default:e(()=>[L(p(d.$t("PWAInstalledTooltip")),1)]),_:1})):l.value===!1&&s.value&&!t(r)?(x(),J(C,{key:1,placement:"bottom","keep-alive-on-hover":!0,style:{"max-width":"40vw"},delay:300,duration:150,"z-index":10},{trigger:e(()=>[o(w,{onClick:z,size:"tiny"},{icon:e(()=>[o(_,{component:t(sn)},null,8,["component"])]),default:e(()=>[L(" "+p(d.$t("installAsApp")),1)]),_:1})]),default:e(()=>[h("div",{id:"pwa-tooltip",innerHTML:d.$t("PWAinstallAsAppTooltip")},null,8,Yu)]),_:1})):pe("",!0),o(Ge,null,{default:e(()=>[t(r)&&!n.value?(x(),J(A,{key:0,onClose:T,type:"info",closable:""},{default:e(()=>[o(f,{justify:"space-between",align:"center"},{default:e(()=>[o(f,{vertical:"",class:"message",size:1},{default:e(()=>[h("span",null,p(a.value),1),h("span",null,p(d.$t("PWAUpdateMessage")),1)]),_:1}),o(f,{size:8},{default:e(()=>[o(w,{onClick:F,round:"",type:"primary",size:"small"},{default:e(()=>[L(p(d.$t("Reload")),1)]),_:1}),o(w,{onClick:T,round:"",size:"small"},{default:e(()=>[L(p(d.$t("close")),1)]),_:1})]),_:1})]),_:1})]),_:1})):pe("",!0)]),_:1})])}}}),Ju=["innerHTML"],ec=be({__name:"switch-lang",props:{delay:{}},emits:["ready","lang-ready","lang-change","lang-change-by-user"],async setup(i,{emit:s}){let u,l;const n=at(Je),a=Vt(),{locale:r,t:c}=He(),v=pt(),b=i,S=s,z=Object.entries(Rs).map(([C,w])=>({label:w,value:C}));z.sort((C,w)=>{const A=C.label,O=w.label;return A>O?1:A<O?-1:0});let g="";Re(()=>{a.afterEach((C,w,A)=>{d(),n.switchToolTipVisibility()})}),[u,l]=zl(()=>d()),await u,l(),T(),S("ready");function T(){const C="/avif2jpeg/dist/",w=[];for(const A of _t){if(a.currentRoute.value.path.includes(A))continue;const O={rel:"alternate",hreflang:A,href:C+A};w.push(O)}w.push({rel:"alternate",hreflang:"x-default",href:C}),Sl({title:c("title"),meta:[{property:"og:title",content:c("title")},{property:"og:description",content:c("metaDescription")}],link:[...w]})}async function F(C){if(C!==r.value||It.global.availableLocales.indexOf(C)===-1){if(S("lang-change",C),await Hl(b.delay),!await Ns(C))return v.error({title:c("Failed to get language file"),positiveText:"OK",content:()=>re("div",[`lang: ${C}`])}),S("lang-ready",""),!1;r.value=C,document.title=c("title"),document.documentElement.lang=C,await De()}return S("lang-ready",C),!0}async function d(){var A;const w=((A=(a.currentRoute.value.path||"").match(/([^/]+)\/?$/))==null?void 0:A[1])||"";w&&_t.includes(w)?await F(w)&&g===w&&S("lang-change-by-user",w):await $()}async function $(){const C=_().toLowerCase(),w=C.split(/[-_]/)[0];if(_t.includes(w)){let A=w;if(w==="zh")switch(C){case"zh-hant":case"zh-mo":case"zh-hk":case"zh-tw":A="zh-hant"}await F(A)}}function _(){const C=window.navigator;return C.language||C.userLanguage||C.browserLanguage}function f(C){g=C;const w=C?C+"/":"";a.push("/"+w)}return(C,w)=>{const A=Ie,O=Ht("router-link"),V=Te,G=Mt,te=Ae;return x(),J(te,{align:"center",size:2},{default:e(()=>[t(a).currentRoute.value.path!=="/"?(x(),J(V,{key:0,trigger:"hover","keep-alive-on-hover":!1,placement:"left",duration:0,delay:50},{trigger:e(()=>[o(O,{to:"/",onClick:w[0]||(w[0]=P=>S("lang-change-by-user","")),style:{color:"gray","line-height":"0px","font-size":"1.2em"}},{default:e(()=>[o(A,{component:t(Cl)},null,8,["component"])]),_:1})]),default:e(()=>[L(p(t(c)("selectLangCloseTooltip")),1)]),_:1})):pe("",!0),o(V,{to:!1,trigger:"hover","keep-alive-on-hover":!1,placement:t(n).LANDSCAPE.value?"left":"bottom",duration:0,delay:50},{trigger:e(()=>[o(G,{ref:"langselect",size:"tiny",style:{width:"auto"},"consistent-menu-width":!1,options:t(z),value:t(r),"onUpdate:value":f},{arrow:e(()=>[o(A,null,{default:e(()=>[o(t(Tl))]),_:1})]),_:1},8,["options","value"])]),default:e(()=>[h("div",{innerHTML:C.$t("selectLanguage")},null,8,Ju)]),_:1},8,["placement"])]),_:1})}}}),Je=Symbol("global variables"),tc=be({__name:"Avif2Jpeg",emits:["ready"],setup(i,{emit:s}){const{t:u,locale:l}=He(),n=200,a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),r=!1,c=y([]),v=y([]);y(0);let b=y(void 0);const S=y(!0),z=y(!1),g=y(!1),T=y(!1),F=y(!0);y(!1);const d=y(null),$=y(!1),_=y();Il(Je,{showTooltipsBeforeMounted:b,LANDSCAPE:S,IS_SP:a,IS_DEV:r,switchToolTipVisibility:V,SSR:!1}),Re(()=>{G(),window.addEventListener("resize",G),V(),setTimeout(()=>g.value=!0,3e3)}),xt(()=>{window.removeEventListener("resize",G)});function f(){var Q;!((Q=bn().path.match(/[^/]+(?=\/?$)/))==null?void 0:Q[0])&&H.lang&&Vt().push("/"+H.lang)}let C=0;function w(){T.value=!1,C=Date.now()}function A(Z){H.lang=Z}function O(){const Z=F.value?0:Math.max(0,n-(Date.now()-C));F.value=!1,De(()=>{setTimeout(()=>T.value=!0,Z)})}async function V(){}function G(){const Z=document.body.clientWidth,m=document.body.clientHeight;S.value=Z*.75>m||Z>900}async function te(Z){H.autoStartConversion&&(c.value.length=0,await De()),v.value=Z}function P(Z){$.value=Z}return(Z,m)=>{const Q=Ht("ClientOnly"),se=es,fe=Ae,N=Ie,K=lt;return x(),J(fe,{vertical:"",align:"stretch",class:"avif2jpeg"},{default:e(()=>[o(Zs,null,{"lang-switch":e(()=>[(x(),J(Al,null,{default:e(()=>[o(ec,{onLangChange:w,onLangReady:O,onLangChangeByUser:A,onReady:f,delay:t(F)?0:n},null,8,["delay"])]),_:1}))]),_:1}),o(Q,null,{default:e(()=>[o(Xu)]),_:1}),o(Ge,{name:"fade"},{default:e(()=>[Ke(o(fe,{vertical:"",align:"stretch",justify:"space-between",style:{height:"100%"}},{default:e(()=>[o(fe,{justify:"space-around",vertical:"",style:{height:"100%"}},{default:e(()=>[o(qs),o(fe,{justify:"center",align:"center",style:{"margin-top":"0.3em"}},{default:e(()=>[o(_u,{key:"key-fselector",target:t(H).acceptTypeValue,"onUpdate:target":m[0]||(m[0]=E=>t(H).acceptTypeValue=E),userExtensions:t(H).editedAcceptTypes,"onUpdate:userExtensions":m[1]||(m[1]=E=>t(H).editedAcceptTypes=E),"disable-notifying-folder-select":t(H).disableNotifyingFolderSelect,"onUpdate:disableNotifyingFolderSelect":m[2]||(m[2]=E=>t(H).disableNotifyingFolderSelect=E),"auto-start-opt":t(H).autoStartConversion,"onUpdate:autoStartOpt":m[3]||(m[3]=E=>t(H).autoStartConversion=E),forbidden:t(z),onInput:te,onClick:m[4]||(m[4]=E=>P(!0)),onCancel:m[5]||(m[5]=E=>P(!1))},null,8,["target","userExtensions","disable-notifying-folder-select","auto-start-opt","forbidden"]),o(At,null,{default:e(()=>[Ke(o(se,{key:"key-filelist","file-list":t(c),"onUpdate:fileList":m[6]||(m[6]=E=>Fe(c)?c.value=E:null),"additional-files":t(v)},null,8,["file-list","additional-files"]),[[Qe,t(c).length]])]),_:1})]),_:1}),o(fe,{vertical:"",align:"center"},{default:e(()=>[o(K,{trigger:"manual",placement:"top","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:e(()=>[o(N,{size:"5vh",color:"#DADADA",style:{margin:"0px"}},{default:e(()=>[o(t(xl))]),_:1})]),default:e(()=>[m[22]||(m[22]=h("span",null,"CONVERT TO👇",-1))]),_:1,__:[22]})]),_:1}),o(fe,{vertical:"",align:"center"},{default:e(()=>[o(Du,{format:t(H).imageFormat,"onUpdate:format":m[7]||(m[7]=E=>t(H).imageFormat=E),quality:t(H).imageQuality,"onUpdate:quality":m[8]||(m[8]=E=>t(H).imageQuality=E),method:t(H).outputMethod,"onUpdate:method":m[9]||(m[9]=E=>t(H).outputMethod=E),"target-folder-handle":t(d),"onUpdate:targetFolderHandle":m[10]||(m[10]=E=>Fe(d)?d.value=E:null),"is-multithread-enabled":t(H).multithread},null,8,["format","quality","method","target-folder-handle","is-multithread-enabled"])]),_:1}),o(ou,{input:t(c),format:t(H).imageFormat,quality:t(H).imageQuality,"retain-extension":t(H).retainExtension,maxZipSizeMB:t(H).maxZipSizeMB,threads:t(H).multithread?t(H).threadCount:0,"auto-start":t(H).autoStartConversion,"output-to-dir":t(H).outputMethod==="fs","output-dir-handle":t(H).outputMethod==="fs"?t(d):null,onStart:m[11]||(m[11]=E=>z.value=!0),onEnd:m[12]||(m[12]=E=>z.value=!1)},{"lang-switch":e(()=>m[23]||(m[23]=[])),_:1},8,["input","format","quality","retain-extension","maxZipSizeMB","threads","auto-start","output-to-dir","output-dir-handle"]),o(fe,{vertical:"",align:t(_)?"center":"end",style:{"padding-right":"1em"}},{default:e(()=>[o(ju,{"retain-ext":t(H).retainExtension,"onUpdate:retainExt":m[13]||(m[13]=E=>t(H).retainExtension=E),"use-folder-name-for-zip":t(H).useFolderNameForZip,"onUpdate:useFolderNameForZip":m[14]||(m[14]=E=>t(H).useFolderNameForZip=E),"max-zip-size":t(H).maxZipSizeMB,"onUpdate:maxZipSize":m[15]||(m[15]=E=>t(H).maxZipSizeMB=E),multithread:t(H).multithread,"onUpdate:multithread":m[16]||(m[16]=E=>t(H).multithread=E),"thread-count":t(H).threadCount,"onUpdate:threadCount":m[17]||(m[17]=E=>t(H).threadCount=E),expanded:t(_),"onUpdate:expanded":m[18]||(m[18]=E=>Fe(_)?_.value=E:null),"shrink-image":t(H).shrinkImage,"onUpdate:shrinkImage":m[19]||(m[19]=E=>t(H).shrinkImage=E),"max-width":t(H).maxWidth,"onUpdate:maxWidth":m[20]||(m[20]=E=>t(H).maxWidth=E),"max-height":t(H).maxHeight,"onUpdate:maxHeight":m[21]||(m[21]=E=>t(H).maxHeight=E)},null,8,["retain-ext","use-folder-name-for-zip","max-zip-size","multithread","thread-count","expanded","shrink-image","max-width","max-height"])]),_:1},8,["align"]),o(qu)]),_:1})]),_:1},512),[[Qe,t(T)]])]),_:1})]),_:1})}}}),nc={key:0,style:{"text-align":"center"}},Jt=be({__name:"App",setup(i){const s={Statistic:{valueFontSize:"1em"},Popover:{borderRadius:"0.4em",boxShadow:"2px 2px 5px 0px #555555"},Tooltip:{},Image:{toolbarColor:"#00000099"}},u=y(!0);return Re(()=>{u.value=!1}),(l,n)=>{const a=El,r=Fl,c=$l,v=Ll,b=Dl;return x(),W(Oe,null,[t(u)?(x(),W("div",nc," Rendering the page… please wait. ")):pe("",!0),o(b,{"theme-overrides":s,style:{width:"100%",height:"100%"}},{default:e(()=>[o(v,null,{default:e(()=>[o(c,{placement:"top-left",closable:!0,max:50},{default:e(()=>[o(r,null,{default:e(()=>[o(a,null,{default:e(()=>[o(tc,{class:Ye({hide:t(u)})},null,8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}}}),Pa=[{path:"/",name:"Home",component:Jt}];for(const i of _t)Pa.push({path:"/"+i+"/",strict:!0,name:i,component:Jt});Ml(Jt,{routes:Pa,base:"/avif2jpeg/dist/"},({app:i,router:s,routes:u,isClient:l,initialState:n})=>{i.use(It)});
