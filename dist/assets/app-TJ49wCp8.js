var va=Object.defineProperty;var ha=(a,i,p)=>i in a?va(a,i,{enumerable:!0,configurable:!0,writable:!0,value:p}):a[i]=p;var Et=(a,i,p)=>ha(a,typeof i!="symbol"?i+"":i,p);import{r as st,d as ve,i as Ne,o as C,c as N,w as t,a as n,u as e,b as $,t as c,N as ge,_ as Nt,e as xe,L as _a,f as x,g as Y,h as y,F as we,j as Be,B as Le,k as yt,l as se,m as ya,n as wa,p as $e,q as wt,s as Ht,v as Ae,x as ba,y as _e,z as mt,A as gt,C as bt,D as xt,E as Ee,G as Te,H as xa,T as je,I as Wt,J as Vt,K as Fe,M as X,O as qt,P as Gt,Q as Aa,R as He,S as Ze,U as it,V as Kt,W as ee,X as Je,Y as Qt,Z as At,$ as ka,a0 as Yt,a1 as za,a2 as kt,a3 as Jt,a4 as pt,a5 as Ce,a6 as Ke,a7 as Ta,a8 as Ia,a9 as $a,aa as Sa,ab as Ca,ac as Xt,ad as zt,ae as Tt,af as en,ag as La,ah as tn,ai as Ea,aj as Fa,ak as Ma,al as Pa,am as Ua,an as Da,ao as It,ap as Oa,aq as ja,ar as Ba,as as Za,at as nn,au as Ra,av as Na,aw as an,ax as on,ay as Ha,az as Ie,aA as qe,aB as Ge,aC as Wa,aD as Va,aE as qa,aF as Ga,aG as Ka,aH as Qa,aI as Ya,aJ as Ja,aK as Xa,aL as eo,aM as to,aN as no,aO as ao,aP as oo,aQ as lo,aR as so,aS as io,aT as ro,aU as uo,aV as co}from"./vendor-tIRCuA7G.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))u(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const l of d.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&u(l)}).observe(document,{childList:!0,subtree:!0});function p(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function u(o){if(o.ep)return;o.ep=!0;const d=p(o);fetch(o.href,d)}})();const po={imageFormat:"image/jpeg",imageQuality:90,expandExtButtons:!1,acceptTypeValue:void 0,editedAcceptTypes:"",expandAdvSettings:!1,retainExtension:!1,maxZipSizeMB:1e3,useFolderNameForZip:!1,multithread:!0,threadCount:void 0,shrinkImage:!1,maxWidth:4096,maxHeight:4096},j=st(ln({}));function fo(){ln(j)}function ln(a){return Object.assign(a,po)}const sn="avif2jpeg",ft=JSON.parse(localStorage.getItem(sn)||"{}");for(const a in j)ft.hasOwnProperty(a)&&ft[a]!==void 0&&(j[a]=ft[a]);window.addEventListener("unload",()=>{const a={};for(const i in j)a[i]=j[i];localStorage.setItem(sn,JSON.stringify(a))});const mo=ve({__name:"github",setup(a){const i=Ne(Pe);return(p,u)=>{const o=ge,d=Nt,l=xe;return C(),N(l,{to:!1,"display-directive":"show",show:e(i).showTooltipsBeforeMounted.value,trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(d,{href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-size":"small","font-weight":"bolder"}},{default:t(()=>[n(o,null,{default:t(()=>[n(e(_a))]),_:1}),$("GitHub")]),_:1})]),default:t(()=>[$(" "+c(p.$t("githubOpenSource")),1)]),_:1},8,["show"])}}}),go=y("h3",null,"Used Framework and Libraries",-1),vo=["href"],ho=ve({__name:"licenses",setup(a){const i=x(!1),p={Vue:"https://github.com/vuejs/core/blob/main/LICENSE",Vite:"https://github.com/vitejs/vite/blob/main/LICENSE","Vite SSG":"https://github.com/antfu/vite-ssg/blob/main/LICENSE","Naive UI":"https://github.com/TuSimple/naive-ui/blob/main/LICENSE",Ionicons:"https://github.com/ionic-team/ionicons/blob/main/LICENSE"};return(u,o)=>{const d=Le;return C(),Y(we,null,[n(d,{text:"",onClick:o[0]||(o[0]=l=>i.value=!0),style:{color:"black","font-size":"small"}},{default:t(()=>[$("Licenses")]),_:1}),n(e(yt),{preset:"dialog",ref:"dialog",show:i.value,"onUpdate:show":o[1]||(o[1]=l=>i.value=l),"positive-text":"OK",title:"Licenses"},{default:t(()=>[go,y("ul",null,[(C(),Y(we,null,Be(p,(l,g)=>y("li",null,[y("a",{href:l},c(g),9,vo)])),64))])]),_:1},8,["show"])],64)}}}),_o=1,yo=6,wo=4,bo="",at={major:_o,minor:yo,build:wo,tag:bo},xo={style:{"font-size":"x-small","user-select":"none"}},Ao=ve({__name:"version",setup(a){const i=["0.0.118"],p=`${at.major}.${at.minor}.${at.build}${at.tag}`,u=i.map(g=>({label:`v${g}`,key:g,value:g}));function o(g){const{key:w,label:_}=g,k=l(w),v=se("a",{href:k},_),I=se("div",null,v);return se("div",null,I)}function d(g){location.href=l(g)}function l(g){return`/avif2jpeg/old/${g}/`}return(g,w)=>{const _=ya;return C(),N(_,{"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start",options:e(u),"render-label":o,"onUpdate:value":d},{header:t(()=>[y("span",xo,c(g.$t("previousVersion")),1)]),default:t(()=>[y("span",{style:{cursor:"pointer"}},"v"+c(p))]),_:1},8,["options"])}}}),ko=ve({__name:"header",setup(a){return(i,p)=>{const u=$e,o=wt;return C(),N(u,{vertical:"",justify:"start"},{default:t(()=>[n(u,{justify:"space-between",style:{"box-sizing":"border-box",padding:"4px",margin:"0px"}},{default:t(()=>[n(u,{align:"start"},{default:t(()=>[n(mo),n(Ao),n(u,{align:"center"},{default:t(()=>[n(ho)]),_:1})]),_:1}),n(u,{align:"end",style:{"font-size":"x-small"}},{default:t(()=>[wa(i.$slots,"lang-switch")]),_:3})]),_:3}),n(o,{style:{margin:"0px"}})]),_:3})}}}),zo={style:{padding:"0px",margin:"0px","text-align":"center"}},To={key:0},Io=ve({__name:"title",setup(a){const i=Ht(),p=Ae(()=>{const u=i.currentRoute.value.path||"";return!String(u.match(new RegExp("(?<=^\\/)[^/]+"))||"")});return(u,o)=>{const d=Nt,l=ba("router-link"),g=$e;return C(),N(g,{align:"center",justify:"center",style:{margin:"0px"}},{default:t(()=>[y("h1",zo,[e(p)?(C(),Y("span",To,c(u.$t("title")),1)):(C(),N(l,{key:1,to:"../",custom:""},{default:t(({navigate:w,href:_})=>[n(d,{href:_,onClick:w,style:{color:"black","word-break":"keep-all","overflow-wrap":"break-word"}},{default:t(()=>[$(c(u.$t("title")),1)]),_:2},1032,["href","onClick"])]),_:1}))])]),_:1})}}});function $o(a){return new Worker("/avif2jpeg/dist/assets/worker.canvas-DMpDtJCI.js",{name:a==null?void 0:a.name})}let rn=0;class So extends $o{constructor(){super(...arguments);Et(this,"id",rn++)}release(){ut(this)}}const vt=[],Re=new Set,Qe=new Map,Ye=new Map,rt=new Set;function Co(a,i){const p=new So;vt.push(p);{const u=Promise.resolve(p);Re.add(u),Qe.set(p,u)}return p}function Lo(a){const i=new Promise(p=>{Ye.set(a,p)});Re.add(i),Qe.set(a,i),rt.add(a)}async function Eo(){let a,i;do a=await Promise.any(Re);while(rt.has(a));return i=Qe.get(a),Qe.delete(a),Re.delete(i),Lo(a),a}function ut(a){const i=Ye.get(a);i&&(Ye.delete(a),rt.delete(a),i(a))}function un(){for(const a of Ye.keys())ut(a)}async function Ft(){return await Promise.all(Re)}function Mt(){un();for(const a of vt)a.terminate();vt.length=0,Re.clear(),Qe.clear(),Ye.clear(),rt.clear(),rn=0}function Fo(a){return new Worker("/avif2jpeg/dist/assets/worker.zip-DbLGSA5z.js",{name:a==null?void 0:a.name})}const Mo=1,Po=10,Uo=1024*1024*4,Do=100;async function Oo(a,i,p,u,o,d,l,g,w,_,k,v){const I=new Map,b=new Map,m=Math.min(p.threads-1,l.length);Mt();const f=new Fo,z=jo(f,a,i,g);f.postMessage({action:"set-config",zipSize:p.maxZipSizeMB*1024*1024,keepExt:p.retainExtension,outputExt:k,imageType:v});const O=Bo(a,i,u,o,d,l,g,b,I);for(let P=0;P<m;P++){const R=Co();R.onmessage=O;const{port1:ne,port2:he}=new MessageChannel;f.postMessage({action:"set-port"},[ne]),R.postMessage({},[he])}const S=_e(i,P=>{P&&(S(),un())});a.demandImage=P=>{f.postMessage({action:"request-image",index:P})};const s=l.length===1;let h=0,T=0,A="",M=0;for(;M<l.length;){const P=await Eo();if(i.value){ut(P);break}const R=[];let ne=!1;const he=l.length-M,ce=Math.min(M+Math.max(Math.min(Po,he/p.threads|0),1),l.length);let pe=0,de=!1;const ae=Date.now();for(ae-T>Do&&(T=ae,de=!0);M<ce&&!(pe>Uo);M++){const oe=l[M],V=oe._id;pe+=oe.size,ne=M===l.length-1,I.has(V)||I.set(V,oe),R.push({index:M,file:oe,fileId:V,outputPath:A,type:w,quality:_/100,demandThumbnail:de||ne,demandImage:s,maxSize:j.shrinkImage?{width:j.maxWidth,height:j.maxHeight}:null,webkitRelativePath:oe.webkitRelativePath}),oe.webkitRelativePath||oe.name,b.has(oe)||(h++,a.index=h),de=!1}if(P.postMessage(R),ne&&(await Ft(),i.value))break}if(await Ft(),!i.value){let P;await new Promise(R=>{P=_e([()=>a.done,i],()=>{(a.done>=h||i.value)&&R(void 0)},{immediate:!0})}),P()}s||(f.postMessage({action:"squeeze"}),await z),S();const L={value:!1},ue=()=>{L.value=!0,Mt(),f.terminate()};let U=!1;return{callbackToClearConverter:ue,callbackToGenerateFailedZips:async P=>{U||(U=!0,await Zo(P,f,L,a))}}}function jo(a,i,p,u){return new Promise(d=>{a.onmessage=l=>{const g=l.data,{action:w}=g;if(w==="add-zip-completed"){const{fileId:I}=g;i.done++,i.success++,u.add(I);return}if(w==="respond-image"){const{url:I,index:b,path:m,size:f}=g;i.convertedImageUrl=I,i.convertedImageSize=f,i.convertedImageIndex=b,i.convertedImageName=m;return}const{size:_,count:k}=g,v="url"in l.data?l.data.url:"";switch(w){case"push-zip":i.zips.push({url:v,size:_,count:k}),i.zippedTotalCount+=k,i.zippedTotalSize+=_;break;case"squeeze-zip":k>0&&(i.zips.push({url:v,size:_,count:k}),i.zippedTotalCount+=k,i.zippedTotalSize+=_),d(void 0);break;case"push-filelist":i.failedFileZippedCount++;break;case"squeeze-filelist-zip":i.failedZipDone=!0;case"push-filelist-zip":i.failedZips.push({url:v,size:_,count:k});break;case"zip-error":case"zip-squeeze-error":i.zippingErrorCount+=k,w==="zip-squeeze-error"&&d(void 0);break}}})}function Bo(a,i,p,u,o,d,l,g,w,_){let k=0;const v=x(new Map),I=x(new Map);return m=>{const f=m.target,{data:z}=m,{action:O}=z;if(i.value)switch(O){case"file-canceled":a.done++;return}switch(O){case"list-start":break;case"file-start":{const{index:S,path:E,fileId:s}=z,h={key:k++,core:f.id,index:S,path:E,command:"‚û°Ô∏èstarted"};v.value.set(f.id,h),a.logs.push(h);break}case"file-load":{const{thumbnail:S,width:E,height:s}=z;v.value.get(f.id).command="üñºÔ∏èloaded",S&&(a.thumbnail=S);break}case"file-converted":{const{index:S,path:E,fileId:s,image:h}=z,T=v.value.get(f.id);if(T.command="üîÉconverted",I.value.set(s,T),a.converted++,!h)break;const{width:A,height:M}=z;p.convertedImageBlob=h,p.convertedImageWidth=A,p.convertedImageHeight=M,p.convertedImageName=E,a.done++,a.success++}case"file-completed":{const{inputsize:S,outputsize:E,fileId:s}=z;a.inputTotalSize+=S,a.outputTotalSize+=E;const h=I.value.get(s);h&&(h.command="‚úÖcompleted",h.completed=!0);break}case"file-error":{const{index:S,path:E,fileId:s}=z,h=w.get(s);if(!h)throw new Error(`the file doesn't exist in the Map. "${s}":"${E}"`);const T=g.get(h)||0,A=v.value.get(f.id);T<Mo?(g.set(h,T+1),d.push(h),A.command="‚ö†Ô∏èretrying",A.error=!0,u.warning(`retrying "${E}"`,{duration:3e3})):(a.done++,a.failure++,A.command="‚ùófailed",A.error=!0,o.error({content:`failed to load "${E}"`,duration:5e3}));break}case"file-canceled":{const{fileId:S,path:E}=z,s=I.value.get(S);a.done++,a.failure++,s.command="‚ùózip-aborted",s.error=!0;break}case"list-end":{ut(f);break}}}}async function Zo(a,i,p,u){let o=0;for(const d of a){const l=(d.webkitRelativePath||d.name).replace(/^\//,"");if(p.value)return;o-u.failedFileZippedCount>20&&await new Promise(g=>setTimeout(g,10)),i.postMessage({action:"add-filelist",file:d,path:l}),o++}i.postMessage({action:"squeeze-filelist"})}async function Ro(a,i,p,u,o,d){let l="";const g=document.createElement("canvas"),w=g.getContext("2d");let _=new mt;const k=u.format,v=u.quality/100,I=[...k.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),b=a.length,m=u.maxZipSizeMB*1024*1024;let f=0,z=null,O="",S=0,E=0,s=0,h=0,T=0,A=0,M=!1;for(const P of a){if(o.value)break;const R=P.name;let ne="";const he=P.size,ce=(P.webkitRelativePath||P.relativePath||R).replace(/^\//,""),pe=document.createElement("img");f++;const de={key:h++,core:-1,index:f,path:ce,command:"‚û°Ô∏èstart"};d.index=f,d.logs.push(de),d.logs.length-1;let ae;l&&(URL.revokeObjectURL(l),l=""),l=URL.createObjectURL(P),pe.src=l;const oe=await ht(pe).then(()=>!0).catch(()=>!1);if(!pe.complete||!oe||o.value){d.done++,d.failure++,de.command="‚ùófailed";continue}const V=pe.width,fe=pe.height;if(g.width=V,g.height=fe,S=V,E=fe,w.drawImage(pe,0,0,V,fe,0,0,V,fe),de.command="üñºÔ∏èimgload",d.thumbnail=pe,ae=await new Promise(W=>{const Q=J=>{z=J,W(J==null?void 0:J.arrayBuffer())};g.toBlob(Q,k,v)}),o.value)break;if(!ae){d.failure++;continue}s=ae.byteLength,d.converted++;let B="";if(A+s>=m){try{B=_.url()}catch{M=!0,alert("memory problem occurred");break}d.zips.push({url:B,size:A,count:T}),d.zippedTotalCount+=T,d.zippedTotalSize+=A,A=0,T=0,_.clear(),_=new mt}A+=s;const F=ce||R;for(let W=1;W<255&&(ne=F.replace(u.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+(W>1?`(${W})`:"")+"."+I,!!_.has(ne));W++);d.done++;try{T++,_.add(ne,ae),d.inputTotalSize+=he,d.outputTotalSize+=s}catch{continue}O=ne,d.success++,de.command="‚úÖcompleted",de.completed=!0,i.add(P._id)}if(d.success>0)if(b===1)z&&(p.convertedImageBlob=z,p.convertedImageName=O,p.convertedImageWidth=S,p.convertedImageHeight=E);else try{if(M)throw new Error("terminated zipping process for memory problems");const P=_.url();d.zips.push({url:P,count:T,size:A}),d.zippedTotalCount+=T,d.zippedTotalSize+=A}catch{}const L={value:!1},ue=()=>{L.value=!0};let U=!1;return{callbackToClearConverter:ue,callbackToGenerateFailedZips:async P=>{U||(U=!0,No(P,m,d,L))}}}async function No(a,i,p,u){let o=0,d=0,l=new mt;for(let g=0;g<a.length;g++){const w=a[g],_=(w.webkitRelativePath||w.name).replace(/^\//,"");let k;try{k=await w.arrayBuffer()}catch{p.failedToCreateFailedZip=!0;return}if(u.value)return;if(l.add(_,k),d+=w.size,o++,p.failedFileZippedCount++,d>=i||g===a.length-1){const v=l.url();p.failedZips.push({url:v,size:d,count:o}),l.clear(),d=0,o=0}}p.failedZipDone=!0}function ht(a){if(typeof a.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((i,p)=>{a.onload=i,a.onerror=p})}const Me=(a,i)=>{const p=a.__vccOpts||a;for(const[u,o]of i)p[u]=o;return p},Ho=a=>(bt("data-v-5dab19ad"),a=a(),xt(),a),Wo={class:"container"},Vo=Ho(()=>y("span",{class:"text"},"ZIP",-1)),qo={__name:"zipicon",setup(a){return(i,p)=>(C(),Y("span",Wo,[n(e(ge),null,{default:t(()=>[n(e(gt))]),_:1}),Vo]))}},Go=Me(qo,[["__scopeId","data-v-5dab19ad"]]);function Oe(a,i=2){const p=Math.sign(a);a=Math.abs(a);const u=["Bytes","KB","MB","GB"],o=a?Math.floor(Math.log(a)/Math.log(1024)):0;return`${(a/Math.pow(1024,o)*p).toFixed(i)}${u[o]}`}function dn(a,i=100,p=!1){i=typeof i=="number"?{width:i,height:i}:i;const{width:u,height:o}=i;let{width:d,height:l}=a;const g=d/l,w=u/o;return g>=w?(d=p?Math.min(u,d):u,l=d/g|0):(l=p?Math.min(o,l):o,d=l*g|0),{width:d,height:l}}const Ko=["href","download","title"],Qo=ve({__name:"thumbnail",props:{src:{},width:{},height:{},maxWidth:{default:100},maxHeight:{default:100},expand:{type:Boolean,default:!1},loading:{type:Boolean},fileName:{},allowNext:{type:Boolean},allowPrev:{type:Boolean}},emits:["load","error","next","prev"],setup(a,{expose:i,emit:p}){const{t:u}=Ee(),o=a,d=p;i({download:O,openPreview:E});const l=x(),g=x(!0),w=x(""),_=x(100),k=x(100),v=x(!1),I=st({width:"100px",height:"100px",minWidth:"50px",minHeight:"50px"});_e(o,(s,h)=>{I.width=(o.width||100)+"px",I.height=(o.height||100)+"px"}),_e(()=>o.src,()=>{f(o.src)}),Te(()=>{document.body.addEventListener("keydown",S)}),xa(()=>{document.body.removeEventListener("keydown",S)});async function b(s){const h=s.target,T=h.naturalWidth,A=h.naturalHeight,{width:M,height:L}=dn({width:T,height:A},{width:o.maxWidth||100,height:o.maxHeight||100},o.expand);_.value=M,k.value=L,d("load",{src:h.src,width:T,height:A}),g.value=!1,await new Promise(ue=>setTimeout(ue,100)),!g.value&&(v.value=!0)}function m(s){const h=s.target;d("error",h.src)}async function f(s){var h,T;g.value=!0,v.value=!1,await new Promise(A=>setTimeout(A,150)),w.value=s;try{(T=(h=l.value)==null?void 0:h.previewInstRef)!=null&&T.displayed&&l.value.previewInstRef.setPreviewSrc(s)}catch{}}function z({nodes:s}){s.next=se(Le,{onClick(){d("next")},disabled:!o.allowNext,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>se(qt)}),s.prev=se(Le,{onClick(){d("prev")},disabled:!o.allowPrev,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>se(Gt)});try{const h=s.download.children;h.default=()=>u("save");const T=h.trigger();T.props.onClick=O,h.trigger=()=>T}catch{}return Object.values(s)}function O(){const s=document.createElement("a");s.href=w.value,s.download=o.fileName,s.click()}function S(s){var h,T,A,M;if(s.code==="Escape")try{(T=(h=l.value)==null?void 0:h.previewInstRef)!=null&&T.displayed&&(s.stopPropagation(),(M=(A=l.value)==null?void 0:A.previewInstRef)==null||M.toggleShow(!1))}catch{}}function E(){var s,h,T,A;try{(h=(s=l.value)==null?void 0:s.previewInstRef)==null||h.setPreviewSrc(o.src),(A=(T=l.value)==null?void 0:T.previewInstRef)==null||A.toggleShow(!0)}catch{}}return(s,h)=>{const T=Aa,A=He,M=Ze;return C(),N(M,{show:e(g)||o.loading},{default:t(()=>[n(A,{justify:"center",align:"center",style:X(e(I))},{default:t(()=>[y("a",{href:e(w),onClick:h[0]||(h[0]=Fe(()=>{},["left","prevent"])),target:"_blank",download:o.fileName,title:o.fileName,style:{"line-height":"0px"}},[n(je,{mode:"in-out"},{default:t(()=>[Wt(n(T,{ref_key:"nImageRef",ref:l,"show-toolbar-tooltip":"","render-toolbar":z,onLoad:b,onError:m,src:e(w),width:e(_),height:e(k),style:{border:"1px solid silver"}},null,8,["src","width","height"]),[[Vt,e(v)]])]),_:1})],8,Ko)]),_:1},8,["style"])]),_:1},8,["show"])}}}),Yo=Me(Qo,[["__scopeId","data-v-dfc4aa5a"]]),Jo=["href","download"],Xo=["href"],el=["href"],tl={style:{"font-size":"0.8em"}},nl=ve({__name:"image-viewer",props:{url:{},dataUrl:{},name:{},size:{},length:{},index:{},isSingle:{type:Boolean}},emits:["demand-image"],setup(a,{expose:i,emit:p}){const u=a,o=p;i({download:S});const d=x(),l=it(),{t:g}=Ee();Kt();const w=x(!0),_=x(1),k=x(1),v=x(1);x(0);const I=x(""),b=x(!1);let m=x(!1),f=-1;_e(_,()=>{_.value<1||_.value>u.length||(clearTimeout(f),f=setTimeout(()=>{u.index!==_.value-1&&(o("demand-image",_.value-1),b.value=!0,m.value=!1)},100))}),_e(()=>u.index,()=>{if(u.index===0&&w.value){w.value=!1,_.value=1,I.value=u.url;return}u.index===_.value-1&&(b.value=!1,I.value=u.url)});let z="";_e(()=>u.url,()=>{if(u.url!==z){const h=z;setTimeout(()=>URL.revokeObjectURL(h),1e3),z=u.url}u.isSingle&&(w.value=!1,I.value=u.url)}),Te(()=>{u.isSingle||o("demand-image",0)});function O({width:h,height:T}){k.value=h,v.value=T,m.value=!0}function S(){d.value.download()}async function E(h){try{const T=await fetch(h).then(A=>A.blob()).then(A=>new Promise(M=>{const L=new FileReader;L.onload=M,L.readAsDataURL(A)})).then(A=>A.target.result);navigator.clipboard.writeText(T),l.info({title:g("copiedDataURLDialogTitle"),content:()=>se("div",[se("div",g("copiedDataURLMessage"))]),positiveText:"OK"})}catch{l.error({title:"failed to copy Data URL",content:"could not copy Data URL",positiveText:"OK"})}}function s(h){h>0&&_.value<u.length&&_.value++,h<0&&_.value>1&&_.value--}return(h,T)=>{const A=Ze,M=He,L=Le,ue=Je,U=Qt,q=ge,P=At;return C(),N(A,{size:"large",show:w.value},{default:t(()=>[n(M,{justify:"center",align:"center",vertical:"",style:X({visibility:w.value?"hidden":"visible"})},{default:t(()=>[n(M,{align:"center",wrap:!1},{default:t(()=>[n(M,{align:"center",justify:"center",vertical:""},{default:t(()=>[n(A,{size:"small",show:!1,_show:b.value||!e(m)},{default:t(()=>[n(Yo,{ref_key:"thumbref",ref:d,src:I.value,width:180,"max-width":160,"max-height":100,loading:b.value,"file-name":u.name,"allow-next":_.value<u.length,"allow-prev":_.value>1,onLoad:O,onNext:T[0]||(T[0]=R=>s(1)),onPrev:T[1]||(T[1]=R=>s(-1))},null,8,["src","loading","file-name","allow-next","allow-prev"])]),_:1},8,["_show"])]),_:1}),n(M,{vertical:""},{default:t(()=>[n(M,{justify:"center",wrap:!0},{default:t(()=>[u.url&&!h.isSingle?(C(),N(ue,{key:0,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:u.url,ref:"saveImg",target:"_blank",download:u.name},[n(L,{round:"",size:"tiny"},{default:t(()=>[$(c(h.$t("save")),1)]),_:1})],8,Jo)]),default:t(()=>[$(" "+c(h.$t("save")),1)]),_:1})):ee("",!0),u.url?(C(),N(ue,{key:1,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:u.url,target:"_blank",onClick:T[2]||(T[2]=Fe(R=>{d.value.openPreview()},["prevent"]))},[n(L,{round:"",size:"tiny"},{default:t(()=>[$(c(h.$t("open")),1)]),_:1})],8,Xo)]),default:t(()=>[$(" "+c(h.$t("convertedImageUrlTooltip")),1)]),_:1})):ee("",!0),u.url?(C(),N(ue,{key:2,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:u.url,target:"_self"},[n(L,{onClick:T[3]||(T[3]=Fe(R=>E(u.url),["left","prevent","stop"])),round:"",size:"tiny"},{default:t(()=>[$("DataURL")]),_:1})],8,el)]),default:t(()=>[$(" "+c(h.$t("convertedImageDataUrlTooltip")),1)]),_:1})):ee("",!0)]),_:1}),n(M,{justify:"center"},{default:t(()=>[$(c(k.value)+" √ó "+c(v.value),1)]),_:1}),n(M,{justify:"center"},{default:t(()=>[$(c(e(Oe)(u.size,0)),1)]),_:1})]),_:1})]),_:1}),n(M,{ref:"fileNameContainer",justify:"center",style:{"max-width":"320px"},title:u.name},{default:t(()=>[n(U,{"x-scrollable":!0,trigger:"hover",style:{"font-size":"smaller",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},{default:t(()=>[$(c(u.name),1)]),_:1})]),_:1},8,["title"]),h.isSingle?ee("",!0):(C(),N(M,{key:0,style:{"font-family":"v-mono"},align:"center"},{default:t(()=>[y("span",tl,c(e(g)("status.index"))+":",1),$(" "+c(_.value)+" / "+c(u.length),1)]),_:1})),h.isSingle?ee("",!0):(C(),N(M,{key:1,align:"center",justify:"center"},{default:t(()=>[n(L,{onClick:T[4]||(T[4]=R=>s(-1)),disabled:_.value<=1,circle:!0,size:"small"},{icon:t(()=>[n(q,null,{default:t(()=>[n(e(Gt))]),_:1})]),_:1},8,["disabled"]),n(P,{value:_.value,"onUpdate:value":T[5]||(T[5]=R=>_.value=R),tooltip:!1,step:1,min:1,max:u.length,style:{width:"180px"}},null,8,["value","max"]),n(L,{onClick:T[6]||(T[6]=R=>s(1)),disabled:_.value>=h.length,circle:!0,size:"small"},{icon:t(()=>[n(q,null,{default:t(()=>[n(e(qt))]),_:1})]),_:1},8,["disabled"])]),_:1}))]),_:1},8,["style"])]),_:1},8,["show"])}}}),al={class:"log-table"},ol={class:"log-tr"},ll={class:"log-th"},sl={class:"log-th"},il={style:{"min-width":"7em"},class:"log-th"},rl={style:{"padding-left":"2em"},class:"log-th"},ul={class:"log-td"},dl={class:"log-td"},cl={class:"log-td"},pl={class:"log-td"},fl={style:{margin:"1px"}},ml=["href","download","onClick"],gl={key:0,style:{position:"relative"}},vl=["href","download"],hl=["href","download"],_l={key:0,style:{margin:"1px"}},yl=["href","download","onClick"],Pt=99999,wl=100,bl=ve({__name:"status",props:{processing:{type:Boolean},status:{},interval:{}},emits:["all-zips-clicked","demand-zip-errors","demand-image"],setup(a,{emit:i}){const p=it(),{t:u}=Ee(),o=Kt(),d={W:160,H:80},l=a,g=i,w=x(!1),_=x([]),k=x(!1),v=x([]),I=x([]),b=x([0,0]),m=x([0,0]),f=x([0,0]),z=x([0,0]),O=x([0,0]),S=x([0,0]),E=x(0),s=x([0,0]),h=x(o.value.infoColor),T=x("#000000"),A=x("#000000"),M=x(0),L=x(0),ue=x(""),U=x("00:00:00");x(""),x("");const q=x(void 0),P=x(!1),R=x(!0),ne=x(!1),he=Ae(()=>P.value?de.value:pe.value),ce=x("16em"),pe=x(5),de=x(1e3),ae=x(!0),oe=x(!1),V=st({name:"",width:0,height:0,size:0,url:"",dataUrl:"",index:-1}),fe=x(null),B=x(null),F=x(),W=x();Te(()=>{_e(l.status,()=>ke(),{deep:!1}),_e([B,ae],()=>{if(!B.value||!ae.value)return;const{width:me,height:ye}=dn(B.value,{width:d.W,height:d.H});fe.value.width=me,fe.value.height=ye,fe.value.style.width=me+"px",fe.value.style.height=ye+"px",B.value instanceof HTMLImageElement?fe.value.getContext("2d").drawImage(B.value,0,0,me,ye):(fe.value.getContext("bitmaprenderer").transferFromImageBitmap(B.value),B.value=null,l.status.thumbnail=null)});let r=0;const Z=()=>{if(r)return;const me=Date.now();U.value="00:00:00",r=window.setInterval(()=>{const ye=(Date.now()-me)/1e3;U.value=`${String(ye/3600|0).padStart(2,"0")}:${String(ye/60%60|0).padStart(2,"0")}:${String(ye%60|0).padStart(2,"0")}`},300)};Z(),_e(()=>l.processing,(me,ye)=>{me?(Z(),_.value=[],w.value=!1,k.value=!1,v.value=[],I.value=[]):(clearInterval(r),ke(),r=0),ae.value=!1,oe.value=!0,l.processing||We()});const G=Ta();let H;const K=()=>{clearTimeout(H),H=setTimeout(()=>{if(!ae.value||te)return;const me=F.value.$parent.$el.offsetHeight,ye=window.innerHeight-G.parent.parent.vnode.el.offsetHeight-8;ce.value=Math.max(me+ye,50)+"px"},100)};K(),window.addEventListener("resize",K);const le=new ResizeObserver(K);le.observe(G.parent.parent.vnode.el);let te=!1;ka(()=>{te=!0,le.disconnect(),clearInterval(r),clearTimeout(H),clearTimeout(ie),clearTimeout(et),window.removeEventListener("resize",K)})}),_e([()=>l.status.zips.length,()=>l.status.failedZips.length],()=>{const r=l.status;{v.value.length>r.zips.length&&(v.value.length=0);let Z=0;const G=r.zips.length===1&&r.zippedTotalCount===r.length;for(let H=v.value.length;H<r.zips.length;H++){const K=r.zips[H],le=r.baseZipName+(G?"":"-"+String(H+1).padStart(2,"0"))+".zip";Z+=K.size,v.value[H]={url:K.url,size:K.size,number:G?0:H+1,sizeByUnit:Oe(K.size),name:le,count:K.count,clicked:!1}}}{I.value.length>r.failedZips.length&&(I.value.length=0);let Z=0;const G=r.failedZipDone&&r.failedZips.length===1;for(let H=I.value.length;H<r.failedZips.length;H++){const K=r.failedZips[H],le=r.baseZipName+"-error"+(G?"":"-"+String(H+1).padStart(2,"0"))+".zip";Z+=K.size,I.value[H]={url:K.url,size:K.size,number:G?0:H+1,sizeByUnit:Oe(K.size),name:le,count:K.count,clicked:!1}}}});const Q=l.interval||100;let J=!1,ie=0;function ke(){if(J)return;if(ie){J=!0;return}ie=window.setTimeout(()=>{ie=0,J&&(J=!1,ke())},Q);const r=l.status;w.value=r.length>=2,m.value[1]=m.value[0],m.value[0]=r.index,f.value[1]=f.value[0],f.value[0]=r.success,z.value[1]=z.value[0],z.value[0]=r.failure,O.value[1]=O.value[0],O.value[0]=r.done,S.value[1]=S.value[0],S.value[0]=r.converted,E.value=r.length,s.value[1]=s.value[0],s.value[0]=r.zippedTotalCount,M.value=r.inputTotalSize,L.value=r.outputTotalSize;const Z=L.value-M.value;ue.value=(Z>=0?"+ ":"")+Oe(Z);const G=L.value/M.value,H=(256|Math.min(255,Math.max(0,G-1.5)*255|0)).toString(16).substring(1);T.value="#"+H+"0000";const K=1024*1024,le=(256|Math.min(255,Math.max(0,Z/1024/K)*255|0)).toString(16).substring(1);if(A.value="#"+le+"0000",b.value[1]=b.value[0],b.value[0]=f.value[0]/E.value*100,ae.value||!l.processing){const te=r.logs.slice(-Pt);_.value.push(...te);const me=_.value.length-Pt;me>0&&_.value.splice(0,me),R.value&&te.length&&nt(),_.value.length>de.value&&(de.value*=2)}r.logs.length=0,B.value=r.thumbnail,l.processing&&(h.value=z.value[0]?o.value.warningColor:o.value.infoColor),r.convertedImageUrl!==V.url&&(V.url=r.convertedImageUrl,V.name=r.convertedImageName,V.dataUrl=r.convertedImageDataUrl,V.size=r.convertedImageSize||r.outputTotalSize,V.width=r.convertedImageWidth,V.height=r.convertedImageHeight,V.index=r.convertedImageIndex)}function We(){const r=l.status;h.value=l.status.success===l.status.length?o.value.successColor:o.value.errorColor,r.unconvertedFileCount>0,z.value[0]>0||(f.value[0],E.value)}const be=Ae(()=>[{key:"open",label:u("status.openFailedList"),icon:()=>se(ge,()=>se(Yt)),onSelect(){Ue()}},{key:"download",label:u("status.saveFailedList"),icon:()=>se(ge,()=>se(za)),onSelect(){Ue(!0)}},{key:"zip",label:`${u("status.zipFailedList")}`+(l.status.failedZipDone?`(‚úî${u("status.done")})`:""),icon:()=>se(Ze,{show:k.value&&!l.status.failedZipDone,size:"small"},()=>se(ge,()=>se(gt))),disabled:k.value,onSelect(r){return k.value=!0,g("demand-zip-errors"),!1}}]);function ze(r,Z=!1){const{url:G,name:H}=r;if(Z){const K=document.createElement("a");K.href=G,K.download=H,K.click()}r.clicked||(r.clicked=!0,l.processing||v.value.every(K=>K.clicked)&&g("all-zips-clicked"))}async function Xe(){if(w.value){if(v.value.length>=2&&!await new Promise((G,H)=>p.warning({title:u("Download"),content:u("status.confirmDownloadMessage",[v.value.length]),positiveText:"OK",negativeText:u("cancel"),onPositiveClick:()=>G(!0),onNegativeClick:()=>H()})))return;const r=v.value;for(const Z of r)ze(Z,!0)}else W.value.download()}function Ue(r=!1){const Z=new Blob([l.status.unconvertedListText],{type:"text/plain;charset=utf8"}),G=URL.createObjectURL(Z),H=document.createElement("a");H.href=G,H.target="_blank",r&&(H.download=l.status.baseZipName+"-error.txt"),H.click()}let et=0,tt=!1;function nt(r=!1){if(!tt){if(et){tt=!0;return}kt(()=>{!r&&(!P.value||!R.value)||(F.value.scrollTo({behavior:r?"instant":"smooth",top:_.value.length*50}),et=window.setTimeout(()=>{et=0,tt&&(tt=!1,nt())},wl))})}}return(r,Z)=>{const G=$e,H=Ia,K=$a,le=Je,te=He,me=Sa,ye=Ca,dt=xe,da=Xt,ca=zt,pa=Tt,fa=wt,Ve=Le,ma=Go,Ct=en,ga=La;return C(),N(te,{vertical:"",justify:"center"},{default:t(()=>[n(G,{justify:"center",align:"center",wrap:!1,style:{"white-space":"nowrap"}},{default:t(()=>[n(G,{vertical:"",justify:"center",class:"left-column"},{default:t(()=>[n(H,{"tabular-nums":"",label:r.$t("status.elapsedTime")},{default:t(()=>[n(G,null,{default:t(()=>[$(c(e(U)),1)]),_:1})]),_:1},8,["label"]),n(H,{"tabular-nums":"",label:r.$t("status.multiThreading")},{default:t(()=>[n(G,{style:X({color:l.status.threads?"":"red"})},{default:t(()=>[$(c(l.status.threads?r.$rt("{n} @:threads",l.status.threads):r.$t("disabled")),1)]),_:1},8,["style"])]),_:1},8,["label"]),n(H,{"tabular-nums":"",label:r.$t("status.outputSettings")},{default:t(()=>[n(G,{vertical:"",justify:"end",style:{"font-size":"smaller","line-height":"1em"}},{default:t(()=>[y("div",null,"Type: "+c(l.status.type),1),y("div",null,"Zip: "+c(l.status.zipSize)+"MB",1)]),_:1})]),_:1},8,["label"])]),_:1}),n(me,{type:"multiple-circle","stroke-width":1,percentage:[e(f)[0]/e(E)*100|0,e(m)[0]/e(E)*100|0],color:[e(o).successColor,e(h)],"rail-style":[{stroke:r.processing?e(o).successColor:e(h),opacity:.3},{stroke:e(h),opacity:.3}],class:"center-column"},{default:t(()=>[n(G,{vertical:"",align:"center",style:{"font-family":"v-mono","font-size":"xx-large","white-space":"nowrap"},wrap:!1,"wrap-item":!1},{default:t(()=>[y("span",{style:X({color:e(z)[0]?e(h):r.processing?e(o).successColor:e(h)})},[n(K,{duration:e(Q)*3|0,from:e(b)[1]|0,to:e(b)[0]|0,active:!0},null,8,["duration","from","to"]),$("% ")],4),n(te,{wrap:!1,style:{border:"0px solid"}},{default:t(()=>[n(te,{vertical:"",size:"small",justify:"end"},{default:t(()=>[n(te,{justify:"end",wrap:!1},{default:t(()=>[e(z)[0]>0?(C(),N(le,{key:0,trigger:"hover",duration:0,delay:0,style:X({color:e(o).errorColor}),placement:"left"},{trigger:t(()=>[y("span",{style:X({fontSize:"xx-small",color:e(o).errorColor,lineHeight:"0"})}," ("+c(e(z)[0].toLocaleString("en-us"))+") ",5)]),default:t(()=>[$(" "+c(r.$t("status.progressErrors"))+" ("+c(e(z)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):ee("",!0),n(le,{trigger:"hover",duration:0,delay:0,style:X({color:e(o).infoColor}),placement:"left"},{trigger:t(()=>[y("span",{style:X({fontSize:"xx-small",color:e(o).infoColor,lineHeight:"0"})},c(e(m)[0].toLocaleString("en-us")),5)]),default:t(()=>[$(" "+c(r.$t("status.progressStarted"))+" ("+c(e(m)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])]),_:1}),n(te,{justify:"end"},{default:t(()=>[n(le,{trigger:"hover",duration:0,delay:0,style:X({color:e(o).successColor}),placement:"bottom"},{trigger:t(()=>[y("span",{style:X({fontSize:"medium",color:e(o).successColor})},[n(K,{duration:e(Q)*3|0,from:e(f)[1],to:e(f)[0],active:!0,"show-separator":!0},null,8,["duration","from","to"])],4)]),default:t(()=>[$(" "+c(r.$t("status.progressSuccess"))+" ("+c(e(f)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])]),_:1})]),_:1}),n(te,{align:"end",style:{"font-size":"medium",border:"0px solid"}},{default:t(()=>[n(le,{trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:t(()=>[$(" / "+c(e(E).toLocaleString("en-us")),1)]),default:t(()=>[$(" "+c(r.$t("status.progressTotal"))+" ("+c(e(E).toLocaleString("en-us"))+") ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["percentage","color","rail-style"]),n(G,{vertical:"",style:{height:"100%"},justify:"center"},{default:t(()=>[n(H,{"tabular-nums":"",label:r.$t("status.inputSize")},{default:t(()=>[n(G,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[$(c((e(M)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(H,{"tabular-nums":"",label:r.$t("status.outputSize")},{default:t(()=>[n(G,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[$(c((e(L)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(H,{"tabular-nums":"",label:r.$t("status.outInRate")},{default:t(()=>[n(G,{vertical:"",align:"end",justify:"start",style:{"font-size":"xx-small","font-family":"v-mono","line-height":"50%"}},{default:t(()=>[y("span",{style:X({color:e(T),fontSize:"larger"})},"√ó "+c((e(L)/e(M)||1).toFixed(2)),5),y("span",{style:X({color:e(A)})},"("+c(e(ue))+")",5)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1}),n(pa,{"display-directive":"show","trigger-areas":["arrow","main"],"default-expanded-names":"log-collapse","expanded-names":e(ae)?["log-collapse"]:[],"on-update:expanded-names":D=>{ae.value=!!String(D)}},{default:t(()=>[n(ca,{title:"Log",name:"log-collapse",style:{"white-space":"nowrap"}},Jt({header:t(()=>[n(te,{align:"center",wrap:!1},{default:t(()=>[$(c(r.$t("status.log")),1),r.processing&&!e(ae)?(C(),N(e(Ze),{key:0,size:16})):ee("",!0)]),_:1})]),default:t(()=>[n(te,{wrap:!1,class:Ke({"log-container":1,"expand-log":e(P)}),align:"stretch",style:X(e(P)?{height:e(ce),maxHeight:e(ce)}:{})},{default:t(()=>[n(e(Qt),{ref_key:"scrollref",ref:F,"x-scrollable":!0,onMouseup:Z[5]||(Z[5]=D=>R.value=!1),onWheel:Z[6]||(Z[6]=D=>R.value=!1),trigger:"none",style:X([{"z-index":"2","padding-right":"10px","min-height":"7em"},{maxHeight:e(ce)}]),size:50},{default:t(()=>[y("table",al,[y("tr",ol,[y("th",ll,c(r.$t("status.table.core")),1),y("th",sl,c(r.$t("status.table.index")),1),y("th",il,c(r.$t("status.table.status")),1),y("th",rl,c(r.$t("status.table.details")),1)]),(C(!0),Y(we,null,Be((e(ne)?e(_).filter(D=>!D.completed):e(_)).slice(-e(he)),({index:D,key:De,command:Se,path:ct,core:Lt})=>(C(),Y("tr",{key:De,class:"log-tr"},[y("td",ul,c(Lt>=0?Lt+1:"-"),1),y("td",dl,c(D+1),1),y("td",cl,c(Se),1),y("td",pl,c(ct),1)]))),128))])]),_:1},8,["style"]),n(te,{style:X([{"align-self":"center",position:"absolute","z-index":"0","margin-top":"0.5em",right:"0.1em","line-height":"0px"},{width:d.W+"px",height:d.H+"px"}]),justify:"center",align:"center"},{default:t(()=>[n(e(Ze),{size:"small",show:r.processing},{default:t(()=>[l.status.thumbnail===void 0?(C(),N(da,{key:0,description:"EMPTY"})):ee("",!0),Wt(y("canvas",{ref_key:"thumbcanvas",ref:fe,width:"106",height:"80",style:X({border:"1px solid gray",filter:r.processing?"":"opacity(0.35)"})},null,4),[[Vt,l.status.thumbnail!==void 0]])]),_:1},8,["show"])]),_:1},8,["style"])]),_:1},8,["class","style"])]),_:2},[e(ae)?{name:"header-extra",fn:t(()=>[n(te,{align:"center",wrap:!1},{default:t(()=>[n(pt,null,{default:t(()=>[n(ye,{key:"a",checked:e(ne),"onUpdate:checked":Z[0]||(Z[0]=D=>Ce(ne)?ne.value=D:null),size:"small",style:{"font-size":"smaller"},class:"hide-mobile"},{default:t(()=>[$(c(r.$t("status.filterSuccess")),1)]),_:1},8,["checked"]),e(P)?(C(),N(ye,{key:"b",checked:e(R),"onUpdate:checked":[Z[1]||(Z[1]=D=>Ce(R)?R.value=D:null),Z[2]||(Z[2]=D=>D&&nt(!0))],size:"small",style:{"font-size":"smaller"}},{default:t(()=>[$(c(r.$t("status.autoScroll")),1)]),_:1},8,["checked"])):ee("",!0)]),_:1}),n(dt,{style:{"max-width":"30em"}},{trigger:t(()=>[n(ye,{size:"small",checked:e(P),"onUpdate:checked":[Z[3]||(Z[3]=D=>Ce(P)?P.value=D:null),Z[4]||(Z[4]=D=>{R.value=D,nt(!0)})],style:{"font-size":"smaller"}},{default:t(()=>[$(c(r.$t("status.expandLog")),1)]),_:1},8,["checked"])]),default:t(()=>[$(c(r.$t("status.expandLogTooltip")),1)]),_:1})]),_:1})]),key:"0"}:void 0]),1024)]),_:1},8,["expanded-names","on-update:expanded-names"]),n(fa,{style:{margin:"0.2em"}}),n(te,{wrap:!1,vertical:""},{default:t(()=>[n(te,{justify:"center",align:"center",vertical:""},{default:t(()=>[y("div",{class:"singleimage",style:X({maxHeight:e(oe)?"2000px":"100px"})},[!e(oe)&&e(w)&&l.status.threads?(C(),N(Ve,{key:0,tertiary:"",type:"success",size:"small",disabled:!(r.status.success>0),onClick:Z[7]||(Z[7]=D=>oe.value=!0)},{default:t(()=>[$(c(r.$t("status.browseConvertedImages")),1)]),_:1},8,["disabled"])):r.status.success>0&&(l.status.threads||!e(w))?(C(),N(nl,{key:1,ref_key:"imageViewer",ref:W,size:e(V).size,url:e(V).url,"data-url":e(V).dataUrl,width:e(V).width,height:e(V).height,name:e(V).name,length:l.status.success,index:e(V).index,"is-single":!e(w),onDemandImage:Z[8]||(Z[8]=D=>g("demand-image",D))},null,8,["size","url","data-url","width","height","name","length","index","is-single"])):ee("",!0)],4)]),_:1}),n(te,{justify:"center"},{default:t(()=>[e(w)?(C(),N(te,{key:0,vertical:"",align:"center"},{default:t(()=>[n(le,{placement:"left"},{trigger:t(()=>[n(me,{type:"line","indicator-placement":"inside",color:"lime","rail-color":"rgba(99, 255, 99, 0.5)","indicator-text-color":e(s)[0]===e(E)?"white":"green",processing:r.processing,percentage:e(s)[0]/e(E)*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[y("span",fl,c(e(s)[0]/e(E)*100|0)+"% "+c(r.$t("status.zipped"))+" ("+c(e(s)[0])+"/"+c(e(S)[0])+")",1)]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[$(" "+c(r.$t("status.zippingProgress"))+" ("+c(e(s)[0]/e(E)*100|0)+"%) ",1)]),_:1}),n(je,{name:"zipcontainer"},{default:t(()=>[e(v).length>=1||l.processing?(C(),N(pt,{key:0,name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(C(!0),Y(we,null,Be(e(v),(D,De)=>(C(),Y("span",{key:De},[n(le,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:D.url,download:D.name,class:"in-button-anchor",onClick:Se=>ze(D)},[n(Ve,{class:"zip-button",size:"tiny",color:D.clicked?"#050":"lime","text-color":D.clicked?"gray":"white",onClick:Fe(Se=>ze(D),["stop"]),round:""},{default:t(()=>[n(e(ge),{size:"tiny"},{default:t(()=>[n(e(gt))]),_:1}),$("ZIP"+c(D.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,ml)]),default:t(()=>[y("div",{style:X({color:e(o).successColor})},[y("div",null,"ZIP "+c(D.number||"")+" ("+c(r.$t("success"))+")",1),y("div",null,c(D.name),1),y("div",null,c(D.sizeByUnit),1),y("div",null,c(r.$rt("{n} @:files",D.count)),1)],4)]),_:2},1024)]))),128))]),_:1})):ee("",!0)]),_:1})]),_:1})):ee("",!0)]),_:1}),n(je,null,{default:t(()=>[l.processing?ee("",!0):(C(),N(te,{key:0,justify:"center",align:"center"},{default:t(()=>[n(le,{trigger:"hover",duration:0,delay:0,placement:"left",style:X({color:"white",backgroundColor:e(o).successColor}),"arrow-style":{backgroundColor:e(o).successColor}},{trigger:t(()=>[n(je,{name:"save"},{default:t(()=>[e(f)[0]>0?(C(),Y("span",gl,[n(Ct,{value:e(w)?e(s)[0].toLocaleString("en-us"):l.status.type.replace(/\(.+\)/,""),color:e(o).successColorHover,offset:[-20,-3]},{default:t(()=>[n(Ve,{size:"medium",onClick:Xe,color:e(o).successColor,round:""},{default:t(()=>[e(w)?(C(),Y(we,{key:0},[e(v).length?(C(),Y("a",{key:0,href:e(v)[0].url,download:e(v)[0].name,class:"in-button-anchor",onClick:Z[9]||(Z[9]=Fe(()=>{},["prevent"]))},[n(ma),$(" √ó "+c(e(v).length)+" "+c(r.$t("save")),1)],8,vl)):ee("",!0)],64)):(C(),Y("a",{key:1,href:e(V).url,download:e(V).name,class:"in-button-anchor",onClick:Z[10]||(Z[10]=Fe(()=>{},["prevent"]))},[n(e(ge),{size:"tiny"},{default:t(()=>[n(e(tn))]),_:1}),$(" "+c(r.$t("save")),1)],8,hl))]),_:1},8,["color"])]),_:1},8,["value","color"])])):ee("",!0)]),_:1})]),default:t(()=>[r.status.length>=2?(C(),Y(we,{key:0},[y("div",null,c(e(u)("success"))+": "+c(e(s)[0].toLocaleString()),1),y("div",null,c(e(u)("status.totalSize"))+": "+c(e(Oe)(r.status.zippedTotalSize)),1),y("div",null,"ZIP √ó "+c(e(v).length),1)],64)):(C(),Y(we,{key:1},[$(c(r.$t("status.downloadConvertedImage")),1)],64))]),_:1},8,["style","arrow-style"]),!r.processing&&r.status.success!==e(E)?(C(),N(ga,{key:0,options:e(be),onSelect:Z[11]||(Z[11]=(D,De)=>{var Se;return(Se=e(be).find(({key:ct})=>D===ct))==null?void 0:Se.onSelect()}),"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start"},{default:t(()=>[n(le,{show:e(q),duration:0,delay:0,placement:"right",style:X({color:"white",backgroundColor:e(o).errorColor}),"arrow-style":{backgroundColor:e(o).errorColor}},{trigger:t(()=>[n(Ct,{value:r.status.unconvertedFileCount.toLocaleString(),color:e(o).errorColorHover,offset:[-0,-3]},{default:t(()=>[n(Ve,{size:"small",color:e(o).errorColor},{default:t(()=>[n(e(ge),{size:"medium",style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Ea))]),_:1})]),_:1},8,["color"])]),_:1},8,["value","color"])]),default:t(()=>[y("div",null,[y("div",null,c(e(u)("failed"))+": "+c(r.status.unconvertedFileCount.toLocaleString()),1),y("div",null,c(e(u)("status.totalSize"))+": "+c(e(Oe)(r.status.unconvertedTotalSize)),1)])]),_:1},8,["show","style","arrow-style"])]),_:1},8,["options"])):ee("",!0)]),_:1}))]),_:1}),n(je,{name:"zipcontainer"},{default:t(()=>[e(k)?(C(),N(te,{key:0,vertical:"",align:"center"},{default:t(()=>[n(le,{placement:"left"},{trigger:t(()=>[n(me,{type:"line","indicator-placement":"inside",color:"red","rail-color":"rgba(255, 0, 0, 0.5)","indicator-text-color":r.status.failedFileZippedCount===r.status.unconvertedFileCount?"white":"#500",processing:e(k)&&!r.status.failedZipDone&&!r.status.failedToCreateFailedZip,percentage:r.status.failedFileZippedCount/r.status.unconvertedFileCount*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[r.status.failedToCreateFailedZip?(C(),Y("div",{key:1,style:X({color:e(o).errorColor})},c(r.$t("status.failureZippingFailedFiles")),5)):(C(),Y("span",_l,c(r.status.failedFileZippedCount/r.status.unconvertedFileCount*100|0)+"% "+c(r.$t("status.zipped"))+" ("+c(r.status.failedFileZippedCount)+"/"+c(r.status.unconvertedFileCount)+")",1))]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[$(" "+c(r.$t("status.zippingProgress"))+" ("+c(r.status.failedFileZippedCount/r.status.unconvertedFileCount*100|0)+"%) ",1)]),_:1}),n(pt,{name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(C(!0),Y(we,null,Be(e(I),(D,De)=>(C(),Y("span",{key:De},[n(le,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:D.url,download:D.name,class:"in-button-anchor",onClick:Se=>ze(D)},[n(Ve,{class:"zip-button",size:"tiny",color:D.clicked?"#551122":"#F00","text-color":D.clicked?"gray":"white",onClick:Fe(Se=>ze(D),["stop"]),round:""},{default:t(()=>[n(e(ge),{size:"tiny"},{default:t(()=>[n(e(Fa))]),_:1}),$("ZIP"+c(D.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,yl)]),default:t(()=>[y("div",{style:X({color:e(o).errorColor})},[y("div",null,"ZIP "+c(D.number||"")+" ("+c(r.$t("failed"))+")",1),y("div",null,c(D.name),1),y("div",null,c(D.sizeByUnit),1),y("div",null,c(r.$rt("{n} @:files",D.count)),1)],4)]),_:2},1024)]))),128))]),_:1})]),_:1})):ee("",!0)]),_:1})]),_:1})]),_:1})}}}),xl=Me(bl,[["__scopeId","data-v-e8aa8ebd"]]),Al=["innerHTML"],kl={style:{"flex-grow":"1"}},zl=ve({__name:"converter",props:{input:{},format:{},quality:{},retainExtension:{type:Boolean},maxZipSizeMB:{},threads:{}},emits:["start","end","multi-thread-count"],setup(a,{emit:i}){Ne(Pe);const{t:p}=Ee(),u=it(),o=Ma(),d=Pa(),l=10,g=navigator.hardwareConcurrency,w=typeof OffscreenCanvas=="function",_=300,k=a,v=i,I=x(!1),b=x(!1),m=x(!1),f=x(0),z=x(!1),O=x(!1),S=x("initializing"),E=x("info"),s=st(R());let h=!1,T=()=>{},A=0,M=!1;_e(()=>k.input,B=>{B!=null&&B.length&&he(B)}),Te(async()=>{await V(),fe()});function L(){if(A>l*1e3&&!M&&s.success>0)return u.warning({title:p("confirmCloseDialogTitle"),autoFocus:!0,maskClosable:!1,positiveText:p("close"),negativeText:p("back"),onPositiveClick(){z.value=!1,d.destroyAll(),o.destroyAll()},onNegativeClick(){},content:p("confirmCloseDialog")}),!1;d.destroyAll(),o.destroyAll(),z.value=!1}function ue(B){s.demandImage(B)}function U(){!b.value&&I.value?b.value=!0:L()}function q(){he(k.input)}let P=x(()=>{});function R(B){const F={logs:[],index:0,converted:0,success:0,failure:0,done:0,length:0,zippedTotalCount:0,zippingErrorCount:0,zippedTotalSize:0,processing:!1,zips:[],inputTotalSize:0,outputTotalSize:0,thumbnail:null,baseZipName:"testzipname",type:"image/any",startedTime:Date.now(),convertedImageDataUrl:"",convertedImageName:"",convertedImageUrl:"",zipSize:k.maxZipSizeMB,unconvertedListText:"",failedZipDone:!1,failedZips:[],unconvertedFileCount:0,unconvertedTotalSize:0,failedFileZippedCount:0,failedToCreateFailedZip:!1,demandImage:()=>{}};return Object.assign(B||{},F)}function ne(){O.value=!1,URL.revokeObjectURL(s.convertedImageUrl);for(const B of s.zips)URL.revokeObjectURL(B.url);s.zips.length=0;for(const B of s.failedZips)URL.revokeObjectURL(B.url);s.failedZips.length=0,R(s),T(),T=()=>{},M=!1,m.value=!1,b.value=!1}async function he(B){if(I.value){u.error({title:"Busy",positiveText:"OK",content:p("interfered")});return}let F=ae(B);R(s),ne();const W={convertedImageBlob:null,convertedImageWidth:0,convertedImageHeight:0,convertedImageName:""};f.value++,z.value=!0,O.value=!0,I.value=!0,s.processing=!0,E.value="info",S.value=p("processing");const Q=new Set,J=k.format,ie=k.quality,ke=[...J.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),We=oe(J,ie,F[0].webkitRelativePath);s.length=F.length,s.baseZipName=We,s.type=J.replace(/image\//,"").toUpperCase()+(/jpe?g|webp/i.test(J)?" ("+ie+")":""),s.threads=h?0:k.threads;const be=Date.now();v("start");const ze=F.concat();let Xe;if({callbackToGenerateFailedZips:Xe,callbackToClearConverter:T}=!h&&k.threads>=2?await Oo(s,b,k,W,o,d,ze,Q,J,ie,ke,J):await Ro(ze,Q,W,k,b,s),s.length===1&&await ce(ke,W),s.success===s.length?(E.value="success",S.value=p("completed")):(E.value="error",S.value=b.value?p("aborted"):p("incomplete")),Q.size!==F.length){const Ue=pe(F,Q);P.value=()=>{!Ue||!Ue.length||Xe(Ue)}}I.value=!1,s.processing=!1,m.value=!0,A=Date.now()-be,v("end")}async function ce(B,F){if(F.convertedImageBlob){const W=new FileReader;W.readAsDataURL(F.convertedImageBlob);const Q=await ht(W).then(J=>J.target.result);s.convertedImageName=F.convertedImageName.replace(/^.*\/(?=[^/]+$)/,"").replace(k.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+B,s.convertedImageUrl=URL.createObjectURL(F.convertedImageBlob),s.convertedImageDataUrl=Q,s.convertedImageWidth=F.convertedImageWidth,s.convertedImageHeight=F.convertedImageHeight}}function pe(B,F){const W=[],Q=[];let J=0;for(const ie of B)F.has(ie._id)||(W.push(ie),Q.push(ie.webkitRelativePath||ie.relativePath||ie.name),J+=ie.size);return Q.length&&(s.unconvertedListText=Q.join(`
`),s.unconvertedFileCount=W.length,s.unconvertedTotalSize=J),W}let de=0;function ae(B){const F=[];for(const W of B)W.hasOwnProperty("_id")||Object.defineProperty(W,"_id",{value:de++}),F.push(W);return F}function oe(B,F,W){var ke;const Q=new Date;return B=B.replace(/^image\//,"").toLowerCase(),`${j.useFolderNameForZip&&((ke=String(W).match(/^\/?([^/]+)\//))==null?void 0:ke[1])||"avif2jpg"}-
    ${Q.getFullYear().toString().substring(2)}
    ${String((Q.getMonth()+1)*100+Q.getDate()).padStart(4,"0")}
    ${String(Q.getHours()*1e4+Q.getMinutes()*100+Q.getSeconds()).padStart(6,"0")}
    -
    ${B+(/jpe?g|webp/i.test(B)?F:"")}
  `.replace(/\s/g,"")}async function V(){const B="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",F=document.createElement("img"),W=ht(F).then(()=>!0,()=>!1);F.src=B,await W||u.warning({title:"Unsupported",positiveText:"OK",maskClosable:!1,content:p("avifUnsupported")})}function fe(){(!w||g<2||!Promise.any)&&(h=!0),v("multi-thread-count",h?0:g)}return(B,F)=>{const W=Le,Q=xe,J=$e,ie=Ze,ke=He,We=yt;return C(),Y(we,null,[n(J,{justify:"center",align:"center"},{default:t(()=>{var be;return[!e(I)&&((be=k.input)!=null&&be.length)?(C(),N(Q,{key:0,trigger:"hover",placement:"top","keep-alive-on-hover":!1,duration:0,delay:50},{trigger:t(()=>[n(W,{onClick:q,round:""},{default:t(()=>[$(c(e(p)("convertAgain")),1)]),_:1})]),default:t(()=>{var ze;return[y("div",{innerHTML:e(p)("reconvertTip",(ze=k.input)==null?void 0:ze.length)},null,8,Al)]}),_:1})):ee("",!0)]}),_:1}),n(We,{ref:"processingModal",show:e(z),"onUpdate:show":F[2]||(F[2]=be=>Ce(z)?z.value=be:null),closable:e(m),"close-on-esc":!1,preset:"dialog","display-directive":"show",onClick:F[3]||(F[3]=be=>{e(d).destroyAll(),e(o).destroyAll()}),onMaskClick:F[4]||(F[4]=be=>{e(d).destroyAll(),e(o).destroyAll()}),onClose:L,onEsc:U,title:e(S),type:e(E),"mask-closable":!1,"on-after-leave":ne,class:"processing-dialog"},{default:t(()=>[n(ke,{vertical:"",style:{"flex-grow":"1"}},{default:t(()=>[y("div",kl,[e(O)?(C(),N(xl,{key:e(f),processing:e(I),status:e(s),interval:_,onAllZipsClicked:F[0]||(F[0]=be=>Ce(M)?M.value=!0:M=!0),onDemandZipErrors:e(P),onDemandImage:ue},null,8,["processing","status","onDemandZipErrors"])):ee("",!0)]),n(ke,{justify:"end"},{default:t(()=>[e(I)?(C(),N(W,{key:0,disabled:e(b),ref:"cancelbutton",round:"",size:"large",onClick:F[1]||(F[1]=be=>b.value=!0)},{default:t(()=>[n(ie,{show:e(b)&&!e(m),size:"small"},{default:t(()=>[$(c(e(p)("cancel")),1)]),_:1},8,["show"])]),_:1},8,["disabled"])):e(m)?(C(),N(W,{key:1,onClick:L,round:"",size:"large",style:{"font-size":"small","margin-top":"1em"}},{default:t(()=>[$(c(e(p)("close")),1)]),_:1})):ee("",!0)]),_:1})]),_:1})]),_:1},8,["show","closable","title","type"])],64)}}}),Tl="/avif2jpeg/dist/avif.png",cn=a=>(bt("data-v-892702c9"),a=a(),xt(),a),Il={class:"container-1"},$l=cn(()=>y("span",null,"Drag & Drop",-1)),Sl={style:{position:"relative"}},Cl={style:{position:"absolute","font-size":"0.5em",right:"-3.5em",bottom:"-1.5em","white-space":"nowrap"}},Ll={style:{color:"#666666"}},El=cn(()=>y("img",{src:Tl,class:"avif"},null,-1)),Fl=["innerHTML"],Ml={style:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","font-size":"xx-small","white-space":"nowrap"}},Pl=ve({__name:"droptarget",props:{forbidden:{type:Boolean},dropTarget:{}},emits:["drop"],setup(a,{emit:i}){Ne(Pe);const p=a,u=i,o=Ua(),d=x(!1),l=x(0),g=x("");Te(()=>{w(p.dropTarget||document)});function w(k){document.ondragstart=v=>v.preventDefault(),document.ondragover=v=>v.preventDefault(),k.ondrop=async v=>{var b;if(v.preventDefault(),d.value||p.forbidden)return;d.value=!0,l.value=0,g.value="";let I;try{const m=[...v.dataTransfer.items].map(f=>f.webkitGetAsEntry());o.start(),I=await _(m),o.finish()}catch{I=[...((b=v.dataTransfer)==null?void 0:b.files)??[]],o.error()}d.value&&(d.value=!1,u("drop",I))}}async function _(k,v){v=v||[];for(const I of k)if(I.isFile){const b=await new Promise(m=>I.file(f=>m(f)));Object.defineProperty(b,"webkitRelativePath",{value:I.fullPath}),v.push(b),l.value++}else if(I.isDirectory){g.value=I.fullPath;const b=I.createReader();do{const m=await new Promise(f=>b.readEntries(z=>f(z)));if(!m.length)break;await _(m,v)}while(!0)}return v}return(k,v)=>{const I=ge,b=$e,m=Je,f=xe,z=yt;return C(),Y(we,null,[y("div",Il,[n(f,{to:!1,"display-directive":"show",trigger:"hover",duration:0,delay:0,placement:"left"},{trigger:t(()=>[n(b,{vertical:"",class:"container-2"},{default:t(()=>[n(b,{align:"center",wrap:!1,class:"container-3"},{default:t(()=>[n(b,{align:"center"},{default:t(()=>[n(I,{size:"64",color:"white"},{default:t(()=>[n(e(Da))]),_:1})]),_:1}),n(b,{vertical:"",align:"center",wrap:!1,style:{"font-weight":"bold","font-size":"1em","line-height":"90%","white-space":"nowrap"}},{default:t(()=>[$l,y("span",Sl,[$(" AVIF Images "),y("span",Cl,[$(" or "),n(m,{placement:"bottom-end"},{trigger:t(()=>[y("span",Ll,[n(I,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(It))]),_:1}),$(" Folders ")])]),default:t(()=>[$(" You can drag and drop your local folders ")]),_:1})])])]),_:1}),n(b,null,{default:t(()=>[El]),_:1})]),_:1})]),_:1})]),default:t(()=>[y("h3",{innerHTML:k.$t("droptarget"),style:{"max-width":"200px","text-align":"center","word-break":"keep-all","overflow-wrap":"break-word"}},null,8,Fl)]),_:1})]),n(z,{show:e(d),"onUpdate:show":v[0]||(v[0]=O=>Ce(d)?d.value=O:null),closable:!0,preset:"dialog",title:"Parsing dropped items.",type:"info","mask-closable":!1,"negative-text":k.$t("cancel")},{default:t(()=>[n(b,{vertical:"",align:"center"},{default:t(()=>[y("div",Ml,c(e(g)),1),y("div",null,"found "+c(e(l))+" files",1)]),_:1})]),_:1},8,["show","negative-text"])],64)}}}),Ul=Me(Pl,[["__scopeId","data-v-892702c9"]]),pn=a=>(bt("data-v-977d699f"),a=a(),xt(),a),Dl={class:"container-1"},Ol={class:"container-2"},jl=["innerHTML"],Bl=["innerHTML"],Zl={style:{"padding-left":"1em"}},Rl=pn(()=>y("br",null,null,-1)),Nl=pn(()=>y("ul",null,[y("li",null,"Each extension must begin with a period. "),y("li",null,"Separate each extension with a comma. "),y("li",null,"Use alphameric characters.")],-1)),Hl=["innerHTML"],Wl=["accept"],Vl=ve({__name:"file-selector",props:{expanded:{type:Boolean},target:{},userExtensions:{},forbidden:{type:Boolean}},emits:["input","on-change-accept","update:target","update:userExtensions","update:expanded"],setup(a,{emit:i}){const p=it(),{t:u}=Ee(),o=Ne(Pe),d=["avif_only","all_images","all_files","edit_type"],l=a,g=i,w=x(0),_=x(!1),k=x(!1),v=Ae(()=>M(f.value)),I=Ae(()=>z.value.split(",").every(q=>/^\s*(\.[\w\-]+)*\s*$/.test(q))?"success":"error"),b=Ae(()=>!l.forbidden&&!k.value),m=Ae({get:()=>l.expanded,set:U=>{g("update:expanded",U)}}),f=Ae({get:()=>d.indexOf(l.target)>=0?l.target:d[0],set:U=>{g("update:target",U)}}),z=Ae({get:()=>l.userExtensions,set:U=>{g("update:userExtensions",U)}}),O=x(null),S=x(null),E=x(A());_e(f,U=>{g("on-change-accept",v.value)}),Te(()=>{});function s(U){U.click()}function h(){}function T(U){const P=[...U.target.files];O.value.value="",S.value.value="",ue(P)}function A(){return"webkitdirectory"in document.createElement("input")}function M(U){switch(U){case"avif_only":return".avif, .webp";case"all_images":return".jpg, .jpeg, .jfif, .pjpeg, .pjp, .gif, .png, .webp, .avif, .bmp, .apng, .ico";case"edit_type":return z.value;case"all_files":default:return".*"}}async function L(U){const q=String(v.value).toLowerCase().replace(/\s+/g,"");if(q&&v.value!==".*"){const P=q.split(",");U=U.filter(R=>P.includes(R.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),U.length||await new Promise(R=>{p.error({title:"Images Not Found",positiveText:"OK",onAfterLeave:R,content:()=>se("div",[se(Xt,{description:"NO IMAGES"}),`${u("noimage")}`,se("br"),v.value])})})}return U}async function ue(U){k.value=!0,U=await L(U),w.value=U.length,U.length>0&&g("input",U),k.value=!1}return(U,q)=>{const P=ge,R=en,ne=Le,he=xe,ce=$e,pe=Na,de=Oa,ae=ja,oe=Je,V=Ba,fe=zt,B=Tt;return C(),Y(we,null,[y("div",Dl,[y("div",Ol,[n(ce,{vertical:"",align:"center",justify:"center",inline:""},{default:t(()=>[n(ce,{align:"center",justify:"space-around"},{default:t(()=>[n(R,{value:e(w),max:999,offset:[-8,0],color:"#999999",style:{"margin-right":"1em"}},{default:t(()=>[n(P,{size:"4em",color:"#CCCCCC"},{default:t(()=>[n(e(Za))]),_:1})]),_:1},8,["value"]),n(ce,{vertical:"",align:"stretch",justify:"center"},{default:t(()=>[n(he,{to:!1,"display-directive":"show",show:e(o).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(o).LANDSCAPE.value?"right":"top",duration:0,delay:0,"z-index":10},{trigger:t(()=>[n(ne,{disabled:!e(b),onClick:q[0]||(q[0]=F=>s(e(O))),round:"",style:{width:"100%"},color:"white","text-color":"black"},{icon:t(()=>[n(P,{size:"large",color:"gray"},{default:t(()=>[n(e(nn))]),_:1})]),default:t(()=>[$(" "+c(U.$t("loadbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[y("div",{innerHTML:U.$t("loadbuttontooltip")},null,8,jl)]),_:1},8,["show","placement"]),!e(o).IS_SP&&e(E)||e(o).SSR?(C(),N(he,{key:0,to:!1,"display-directive":"show",trigger:"hover",placement:"left","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:e(o).showTooltipsBeforeMounted.value},{trigger:t(()=>[n(ne,{disabled:!e(b),onClick:q[1]||(q[1]=F=>s(e(S))),round:"",style:{width:"100%"},color:"white","text-color":"black"},{icon:t(()=>[n(P,{size:"large",color:"gray"},{default:t(()=>[n(e(It))]),_:1})]),default:t(()=>[$(" "+c(U.$t("loadfolderbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[y("div",{innerHTML:U.$t("loadfoldertooltip")},null,8,Bl)]),_:1},8,["show"])):ee("",!0)]),_:1})]),_:1}),y("div",{class:Ke({"expand-ext-list-container":e(m)})},[n(B,{"display-directive":"show","expanded-names":e(m)?["extItem"]:"","on-update:expanded-names":F=>{m.value=!!(""+F)},class:Ke({"expand-ext-list":e(m)})},{"header-extra":t(()=>[n(P,{size:"large"},{default:t(()=>[n(e(Ra))]),_:1})]),default:t(()=>[n(fe,{title:U.$t("fileTypeRadioTitle"),name:"extItem"},{default:t(()=>[n(V,{value:e(f),"onUpdate:value":q[5]||(q[5]=F=>Ce(f)?f.value=F:null),name:"filetyperadios",size:"small"},{default:t(()=>[n(ce,{vertical:"",style:{"padding-left":"1em"}},{default:t(()=>[(C(),Y(we,null,Be(d,F=>n(he,{key:F,trigger:"hover","keep-alive-on-hover":!1,"z-index":5,placement:"left",style:{"max-width":"200px"},duration:0,delay:0},{trigger:t(()=>[n(pe,{value:F},{default:t(()=>[$(c(U.$t("fileTypeRadioOptions."+F)),1)]),_:2},1032,["value"])]),default:t(()=>[$(" "+c(M(F).replace(/,/g,", ")),1)]),_:2},1024)),64)),n(he,{trigger:"hover","keep-alive-on-hover":!1,placement:"bottom-start",show:e(_),duration:0,delay:0},{trigger:t(()=>[y("div",Zl,[n(oe,{trigger:"manual",placement:"right-end",show:e(f)==="edit_type"&&e(I)!=="success"&&!!e(_)},{trigger:t(()=>[n(de,{value:e(z),"onUpdate:value":q[2]||(q[2]=F=>Ce(z)?z.value=F:null),status:e(I),disabled:e(f)!=="edit_type",onFocus:q[3]||(q[3]=F=>_.value=!0),onBlur:q[4]||(q[4]=F=>_.value=void 0),clearable:!0,size:"small",placeholder:".jpg, .gif, .png",spellcheck:"false"},null,8,["value","status","disabled"])]),default:t(()=>[n(ae,{type:"error","show-icon":!0,title:"Validation error"},{default:t(()=>[$(" Please correct the extension list."),Rl,Nl]),_:1})]),_:1},8,["show"])])]),default:t(()=>[y("span",{innerHTML:U.$t("editAcceptTypes")},null,8,Hl)]),_:1},8,["show"])]),_:1})]),_:1},8,["value"])]),_:1},8,["title"])]),_:1},8,["expanded-names","on-update:expanded-names","class"])],2),e(o).IS_SP?ee("",!0):(C(),N(Ul,{key:0,onDrop:ue,forbidden:!e(b)},null,8,["forbidden"]))]),_:1})])]),y("input",{ref_key:"fileinput",ref:O,onInput:T,onCancel:h,type:"file",multiple:"",accept:e(v),style:{display:"none"}},null,40,Wl),y("input",{ref_key:"folderinput",ref:S,webkitdirectory:"",directory:"",onInput:T,onCancel:h,type:"file",style:{display:"none"}},null,544)],64)}}}),ql=Me(Vl,[["__scopeId","data-v-977d699f"]]),Gl={style:{"white-space":"nowrap"}},Kl=ve({__name:"settings-output",props:{quality:{},format:{}},emits:["update:format","update:quality"],setup(a,{emit:i}){const p=a,u=i,{t:o}=Ee(),d=Ne(Pe),l=x([]),g=["image/jpeg","image/png","image/gif","image/bmp","image/avif","image/webp"],w=Ae({get:()=>p.format,set:m=>{m=I(m),u("update:format",m)}}),_=Ae({get:()=>p.quality,set:m=>{u("update:quality",m)}}),k=Ae(()=>/png|bmp/i.test(w.value)),v=x(null);Te(()=>{b()});function I(m){return l.value.indexOf(m)<0&&(m=l.value[0]),m}function b(){for(const m of g)v.value.toDataURL(m).indexOf(m)>=0&&l.value.push(m);l.value.length===0&&l.value.push(g[0])}return(m,f)=>{const z=ge,O=an,S=$e,E=xe,s=At,h=on;return C(),Y(we,null,[n(S,{justify:"center"},{default:t(()=>[n(S,{vertical:""},{default:t(()=>[n(E,{to:!1,"display-directive":"show",show:e(d).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(d).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(S,{align:"center"},{default:t(()=>[n(z,null,{default:t(()=>[n(e(nn))]),_:1}),$(c(e(o)("settings.imageType"))+": ",1),n(O,{value:w.value,"onUpdate:value":f[0]||(f[0]=T=>w.value=T),options:l.value.map(T=>({value:T,label:T})),"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),_:1})]),default:t(()=>[$(" "+c(e(o)("settings.imageTypeTooltip")),1)]),_:1},8,["show","placement"]),n(E,{to:!1,"display-directive":"show",show:e(d).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(d).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(S,{align:"center"},{default:t(()=>[n(S,{align:"start",wrap:!1},{default:t(()=>[n(z,null,{default:t(()=>[n(e(tn))]),_:1}),y("span",Gl,c(e(o)("settings.quality"))+":",1),n(S,{align:"center",justify:"space-between"},{default:t(()=>[n(s,{tooltip:!1,value:_.value,"onUpdate:value":f[1]||(f[1]=T=>_.value=T),step:1,style:{width:"120px"},disabled:k.value},null,8,["value","disabled"]),n(h,{value:_.value,"onUpdate:value":f[2]||(f[2]=T=>_.value=T),step:"1",min:"0",max:"100",disabled:k.value,style:{width:"90px"},size:"small"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:t(()=>[$(" "+c(e(o)("settings.qualitytooltip")),1)]),_:1},8,["show","placement"])]),_:1})]),_:1}),y("canvas",{ref_key:"canvas",ref:v,width:"1",height:"1",style:{display:"none"}},null,512)],64)}}}),Ql={style:{width:"4em","text-align":"left"}},Yl={style:{width:"4em","text-align":"left"}},Ut=100,Dt=2e3,Ot=8192,jt=8192,Jl=100,Xl=100,es=ve({__name:"settings-adv",props:Ha({threadMax:{}},{expanded:{type:Boolean,required:!0},expandedModifiers:{},multithread:{type:Boolean,required:!0},multithreadModifiers:{},threadCount:{required:!0},threadCountModifiers:{},maxZipSize:{required:!0},maxZipSizeModifiers:{},retainExt:{type:Boolean,required:!0},retainExtModifiers:{},useFolderNameForZip:{type:Boolean,required:!0},useFolderNameForZipModifiers:{},shrinkImage:{type:Boolean,required:!0},shrinkImageModifiers:{},maxWidth:{required:!0},maxWidthModifiers:{},maxHeight:{required:!0},maxHeightModifiers:{}}),emits:["update:expanded","update:multithread","update:threadCount","update:maxZipSize","update:retainExt","update:useFolderNameForZip","update:shrinkImage","update:maxWidth","update:maxHeight"],setup(a){const i={trigger:"hover",placement:"left",keepAliveOnHover:!1,duration:0,delay:0},p=Ie(a,"expanded"),u=Ie(a,"multithread"),o=Ie(a,"threadCount"),d=Ie(a,"maxZipSize"),l=Ie(a,"retainExt"),g=Ie(a,"useFolderNameForZip"),w=Ie(a,"shrinkImage"),_=Ie(a,"maxWidth"),k=Ie(a,"maxHeight"),v=a;_e([o,()=>v.threadMax],()=>{v.threadMax>1&&typeof o.value>"u"&&(o.value=v.threadMax)}),_e(()=>v.threadMax,()=>{v.threadMax>1||(u.value=!1)},{immediate:!0});const I=Ae(()=>u.value&&v.threadMax>1);return(b,m)=>{const f=ge,z=Le,O=Wa,S=He,E=At,s=on,h=zt,T=Tt;return C(),N(S,{justify:"center"},{default:t(()=>[n(T,{"display-directive":"show","default-expanded-names":p.value?["collapitem"]:"","on-update:expanded-names":A=>p.value=!!String(A),"trigger-areas":["arrow","main"],class:Ke(["settings-body",p.value?"expand-adv-settings":""])},Jt({arrow:t(()=>[n(f,{style:X(p.value&&{top:"8px"})},{default:t(()=>[n(e(Va))]),_:1},8,["style"]),n(f,null,{default:t(()=>[n(e(qa))]),_:1})]),default:t(()=>[n(h,{title:b.$t("settings.advancedSettings"),name:"collapitem"},{default:t(()=>[n(S,{vertical:"",style:{"padding-left":"2em"}},{default:t(()=>[n(e(xe),qe(Ge(i)),{trigger:t(()=>[n(S,{vertical:""},{default:t(()=>[n(S,{wrap:!1,align:"center"},{default:t(()=>[n(z,{text:"",disabled:!b.threadMax,style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:m[0]||(m[0]=A=>u.value=!u.value)},{icon:t(()=>[n(f,null,{default:t(()=>[n(e(Ga))]),_:1})]),default:t(()=>[$(" "+c(b.$t("settings.enableMultiThreads")),1)]),_:1},8,["disabled"]),n(O,{value:u.value,"onUpdate:value":m[1]||(m[1]=A=>u.value=A),disabled:!b.threadMax,size:"small"},null,8,["value","disabled"])]),_:1}),n(S,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(E,{value:o.value,"onUpdate:value":m[2]||(m[2]=A=>o.value=A),disabled:!b.threadMax||!u.value,step:1,min:2,max:b.threadMax,style:{width:"120px"}},null,8,["value","disabled","max"]),n(s,{size:"tiny",value:o.value,"onUpdate:value":m[3]||(m[3]=A=>o.value=A),disabled:!b.threadMax||!u.value,step:1,min:2,max:b.threadMax,style:{width:"10em"}},{suffix:t(()=>[$(c(b.$t("threads",o.value)),1)]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[$(" "+c(b.$t("settings.multiThreadsTooltip")),1)]),_:1},16),n(e(xe),qe(Ge(i)),{trigger:t(()=>[n(S,{vertical:""},{default:t(()=>[n(S,{wrap:!1,align:"center"},{default:t(()=>[n(z,{text:"",focusable:!1,style:{"white-space":"nowrap","font-size":"smaller"}},{icon:t(()=>[n(f,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Ka))]),_:1})]),default:t(()=>[$(" "+c(b.$t("settings.maxZipFileSize"))+": ",1)]),_:1})]),_:1}),n(S,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(E,{tooltip:!1,value:d.value,"onUpdate:value":m[4]||(m[4]=A=>d.value=A),step:1,min:Ut,max:Dt,style:{width:"120px"}},null,8,["value"]),n(s,{size:"tiny",value:d.value,"onUpdate:value":m[5]||(m[5]=A=>d.value=A),step:"1",min:Ut,max:Dt,style:{width:"10em"}},{suffix:t(()=>[$("(MB)")]),_:1},8,["value"])]),_:1})]),_:1})]),default:t(()=>[$(" "+c(b.$t("settings.maxZipFileSizeTooltip")),1)]),_:1},16),n(e(xe),qe(Ge(i)),{trigger:t(()=>[n(S,{wrap:!1,align:"center"},{default:t(()=>[n(z,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:m[6]||(m[6]=A=>g.value=!g.value)},{icon:t(()=>[n(f,null,{default:t(()=>[n(e(It))]),_:1})]),default:t(()=>[$(" "+c(b.$t("settings.useFolderNameForZip")),1)]),_:1}),n(O,{value:g.value,"onUpdate:value":m[7]||(m[7]=A=>g.value=A),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[$(" "+c(b.$t("settings.useFolderNameForZipTooltip")),1)]),_:1},16),n(e(xe),qe(Ge(i)),{trigger:t(()=>[n(S,{wrap:!1,align:"center"},{default:t(()=>[n(z,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:m[8]||(m[8]=A=>l.value=!l.value)},{icon:t(()=>[n(f,null,{default:t(()=>[n(e(Yt))]),_:1})]),default:t(()=>[$(" "+c(b.$t("settings.retainOriginalExtension")),1)]),_:1}),n(O,{value:l.value,"onUpdate:value":m[9]||(m[9]=A=>l.value=A),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[$(" "+c(b.$t("settings.retainExtTooltip")),1)]),_:1},16),n(e(xe),qe(Ge(i)),{trigger:t(()=>[n(S,{vertical:""},{default:t(()=>[n(S,{wrap:!1,align:"center"},{default:t(()=>[n(z,{disabled:!e(I),text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:m[10]||(m[10]=A=>w.value=!w.value)},{icon:t(()=>[n(f,null,{default:t(()=>[n(e(Qa))]),_:1})]),default:t(()=>[$(" "+c(b.$t("settings.shrinkImage")),1)]),_:1},8,["disabled"]),n(O,{disabled:!e(I),value:w.value,"onUpdate:value":m[11]||(m[11]=A=>w.value=A),size:"small"},null,8,["disabled","value"])]),_:1}),n(S,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(E,{value:_.value,"onUpdate:value":m[12]||(m[12]=A=>_.value=A),disabled:!w.value||!e(I),step:1,min:Jl,max:Ot,style:{width:"120px"}},null,8,["value","disabled"]),n(s,{size:"tiny",value:_.value,"onUpdate:value":m[13]||(m[13]=A=>_.value=A),disabled:!w.value||!e(I),step:1,min:8,max:Ot*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[y("span",Ql,c(b.$t("width")),1)]),suffix:t(()=>[$("px")]),_:1},8,["value","disabled","max"])]),_:1}),n(S,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(E,{value:k.value,"onUpdate:value":m[14]||(m[14]=A=>k.value=A),disabled:!w.value||!e(I),step:1,min:Xl,max:jt,style:{width:"120px"}},null,8,["value","disabled"]),n(s,{size:"tiny",value:k.value,"onUpdate:value":m[15]||(m[15]=A=>k.value=A),disabled:!w.value||!e(I),step:1,min:8,max:jt*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[y("span",Yl,c(b.$t("height")),1)]),suffix:t(()=>[$("px")]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[$(" "+c(b.$t("settings.shrinkImageTooltip")),1)]),_:1},16)]),_:1})]),_:1},8,["title"])]),_:2},[p.value?{name:"header-extra",fn:t(()=>[n(e(xe),{"keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(z,{onClick:e(fo),size:"tiny",style:{"font-size":"xx-small"}},{default:t(()=>[$(c(b.$t("reset")),1)]),_:1},8,["onClick"])]),default:t(()=>[$(" "+c(b.$t("settings.resetButtonTooltip")),1)]),_:1})]),key:"0"}:void 0]),1032,["default-expanded-names","on-update:expanded-names","class"])]),_:1})}}}),ts=Me(es,[["__scopeId","data-v-51901b3c"]]),ns={},as={style:{color:"gray","padding-left":"20px"}},os=["innerHTML"];function ls(a,i){const p=wt,u=$e;return C(),N(u,{vertical:"",justify:"end"},{default:t(()=>[n(p,{style:{margin:"0px"}}),n(u,{justify:"center"},{default:t(()=>[y("ul",as,[(C(!0),Y(we,null,Be(a.$tm("descriptions"),o=>(C(),Y("li",{key:o,style:{"text-align":"left"},innerHTML:o},null,8,os))),128))])]),_:1})]),_:1})}const ss=Me(ns,[["render",ls]]),is="modulepreload",rs=function(a){return"/avif2jpeg/dist/"+a},Bt={},re=function(i,p,u){let o=Promise.resolve();if(p&&p.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),g=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));o=Promise.allSettled(p.map(w=>{if(w=rs(w),w in Bt)return;Bt[w]=!0;const _=w.endsWith(".css"),k=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${w}"]${k}`))return;const v=document.createElement("link");if(v.rel=_?"stylesheet":is,_||(v.as="script"),v.crossOrigin="",v.href=w,g&&v.setAttribute("nonce",g),document.head.appendChild(v),_)return new Promise((I,b)=>{v.addEventListener("load",I),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${w}`)))})}))}function d(l){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=l,window.dispatchEvent(g),!g.defaultPrevented)throw l}return o.then(l=>{for(const g of l||[])g.status==="rejected"&&d(g.reason);return i().catch(d)})},fn="English",mn="üá¨üáß",gn='AVIF to JPEG "Offline" Batch Converter',vn="It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",hn="Drag & Drop AVIF Images to Convert",_n=["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data is sent to any server</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.'],yn="Select your language",wn="Choose Target File Extentions",bn={avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types",edit_type:"Edit File Extension List"},xn="Input a list of comma separated file extentions to load.<br>e.g.) .jpg,.gif,.png",An="Load Images",kn="Select your images from a dialog window.<br>*Multiple selection allowed.",zn="Load a Whole Folder",Tn=`Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>*It will show "Upload" button, but it actually doesn't upload anything to any server.`,In="Converting images",$n="Aborted",Sn="Some files failed to convert",Cn="Completed",Ln="Currently Busy",En="No files with the extentions were found.",Fn="Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",Mn="Cancel",Pn="Save",Un="Close",Dn="Open",On="Re-convert",jn="Convert previous selected {n} @:files again",Bn="File | Files",Zn="thread | threads",Rn="You have not saved the converted images yet.",Nn="Data have not been saved",Hn="Open Source",Wn="Open the converted image",Vn="Copied to clipboard",qn="The converted image was copied to your clipboard as DataURL.",Gn="Copy the converted image as DataURL",Kn="Convert Again",Qn={expandLogTooltip:"Displaying the entire log may severely reduce conversion speed.",expandLog:"Show entire log",autoScroll:"Auto scroll",showOnlyErrors:"Show only errors",log:"Log",outInRate:"Out / In Ratio",elapsedTime:"Elapsed Time",multiThreading:"Multi-Threading",outputSettings:"Output Settings",totalSize:"Total Size",totalFiles:"Number of Files",confirmDownloadMessage:"It will start to download {0} zip files.",inputSize:"Input Size",outputSize:"Output Size",filterSuccess:"Hide completed item",progressErrors:"Failed items",progressStarted:"Started Items",progressTotal:"Total number of files",zippingProgress:"Zipping progress",zipped:"ZIPPED",openFailedList:"Open failed file list",zipFailedList:"Pack failed files into Zips",table:{index:"index",status:"status",core:"thread",details:"file"},saveFailedList:"Save failed file list",done:"done",convertedZips:"successfully completed ZIP",progressSuccess:"Completed Files",downloadConvertedImage:"Download Converted Image",failureZippingFailedFiles:"Failure while zipping the failed files.",browseConvertedImages:"Browse converted images",index:"Index"},Yn={maxZipFileSize:"Max zip file size",retainExtTooltip:"New extension will be appended to original extension",retainOriginalExtension:"Keep Original File Extension",qualitytooltip:"Set image quality for output",quality:"Image Quality",maxZipFileSizeTooltip:"Set smaller value if memory problems occur.",ignoreExtTooltip:'Try to load files that don"t have image file extension',ignoreFileExtensions:"Load All File Types",imageTypeTooltip:"Choose image format for output",imageType:"Image Type",advancedSettings:"Advanced Settings",enableMultiThreads:"Enable multi-threading",resetButtonTooltip:"Restore all settings to default.",multiThreadsTooltip:"Convert images in multi-threaded",shrinkImageTooltip:"If the image dimensions are larger than the specified value, shrink the image to that value",shrinkImage:"Shrink images that exceed the following dimensions",useFolderNameForZip:"Use dropped folder name for the zip file",useFolderNameForZipTooltip:"If a folder is dropped or selected, its name is used as the name of the output ZIP file"},Jn="Disabled",Xn="Download",ea="Reset",ta="Back",na="Failed",aa="Success",oa="Previous version",la=`
Height`,sa="Width",ia={lang:fn,flags:mn,title:gn,metaDescription:vn,droptarget:hn,descriptions:_n,selectLanguage:yn,fileTypeRadioTitle:wn,fileTypeRadioOptions:bn,editAcceptTypes:xn,loadbutton:An,loadbuttontooltip:kn,loadfolderbutton:zn,loadfoldertooltip:Tn,processing:In,aborted:$n,incomplete:Sn,completed:Cn,interfered:Ln,noimage:En,avifUnsupported:Fn,cancel:Mn,save:Pn,close:Un,open:Dn,reconvert:On,reconvertTip:jn,files:Bn,threads:Zn,confirmCloseDialog:Rn,confirmCloseDialogTitle:Nn,githubOpenSource:Hn,convertedImageUrlTooltip:Wn,copiedDataURLDialogTitle:Vn,copiedDataURLMessage:qn,convertedImageDataUrlTooltip:Gn,convertAgain:Kn,status:Qn,settings:Yn,disabled:Jn,Download:Xn,reset:ea,back:ta,failed:na,success:aa,previousVersion:oa,height:la,width:sa},us=Object.freeze(Object.defineProperty({__proto__:null,Download:Xn,aborted:$n,avifUnsupported:Fn,back:ta,cancel:Mn,close:Un,completed:Cn,confirmCloseDialog:Rn,confirmCloseDialogTitle:Nn,convertAgain:Kn,convertedImageDataUrlTooltip:Gn,convertedImageUrlTooltip:Wn,copiedDataURLDialogTitle:Vn,copiedDataURLMessage:qn,default:ia,descriptions:_n,disabled:Jn,droptarget:hn,editAcceptTypes:xn,failed:na,fileTypeRadioOptions:bn,fileTypeRadioTitle:wn,files:Bn,flags:mn,githubOpenSource:Hn,height:la,incomplete:Sn,interfered:Ln,lang:fn,loadbutton:An,loadbuttontooltip:kn,loadfolderbutton:zn,loadfoldertooltip:Tn,metaDescription:vn,noimage:En,open:Dn,previousVersion:oa,processing:In,reconvert:On,reconvertTip:jn,reset:ea,save:Pn,selectLanguage:yn,settings:Yn,status:Qn,success:aa,threads:Zn,title:gn,width:sa},Symbol.toStringTag,{value:"Module"})),ds="Chinese",cs="Ukrainian",ps="Turkish",fs="Russian",ms="Portuguese",gs="Polish",vs="Dutch",hs="Korean",_s="Japanese",ys="Italian",ws="Indonesian",bs="Hindi",xs="French",As="Spanish",ks="English",zs="German",Ts="Arabic",Is={zh:ds,"zh-hant":"Chinese(hant)",uk:cs,tr:ps,ru:fs,pt:ms,pl:gs,nl:vs,ko:hs,ja:_s,it:ys,id:ws,hi:bs,fr:xs,es:As,en:ks,de:zs,ar:Ts},ot=[],ra={en:ia},$t={},Zt=Object.assign({"./locales/ar.json":()=>re(()=>import("./ar-BprJ2nPp.js"),[]),"./locales/de.json":()=>re(()=>import("./de-Ci9uz2fH.js"),[]),"./locales/en.json":()=>re(()=>Promise.resolve().then(()=>us),void 0),"./locales/es.json":()=>re(()=>import("./es-BhuYmPwQ.js"),[]),"./locales/fr.json":()=>re(()=>import("./fr-C9e9WDpm.js"),[]),"./locales/hi.json":()=>re(()=>import("./hi-B0-7fCTL.js"),[]),"./locales/id.json":()=>re(()=>import("./id-C_dgnwNQ.js"),[]),"./locales/it.json":()=>re(()=>import("./it--ItnRWpv.js"),[]),"./locales/ja.json":()=>re(()=>import("./ja-9JgP_Bbi.js"),[]),"./locales/ko.json":()=>re(()=>import("./ko-DXPoxmJG.js"),[]),"./locales/nl.json":()=>re(()=>import("./nl-DZRM93Op.js"),[]),"./locales/pl.json":()=>re(()=>import("./pl-9PnNHCus.js"),[]),"./locales/pt.json":()=>re(()=>import("./pt-BdOjqQuA.js"),[]),"./locales/ru.json":()=>re(()=>import("./ru-DAipZeIt.js"),[]),"./locales/tr.json":()=>re(()=>import("./tr-CuFghH_2.js"),[]),"./locales/uk.json":()=>re(()=>import("./uk-BiCMTaLR.js"),[]),"./locales/zh-hant.json":()=>re(()=>import("./zh-hant-zZJSXfZ-.js"),[]),"./locales/zh.json":()=>re(()=>import("./zh-yjjyZqJ7.js"),[])});var Rt;for(const a in Zt){const i=(Rt=a.match(/\/([a-z]{2}(?:-[a-z]+)?)\.json$/i))==null?void 0:Rt[1];i&&(ot.push(i),!(i in ra)&&($t[i]=Zt[a]))}let _t=Ss();_t in $t||(_t="en");const lt=Ya({legacy:!1,globalInjection:!0,locale:_t,fallbackLocale:"en",messages:ra,warnHtmlMessage:!1,missingWarn:!1,fallbackWarn:!1});async function $s(a){if(lt.global.availableLocales.indexOf(a)>=0)return;const i=await $t[a]();lt.global.setLocaleMessage(a,i),await kt()}function Ss(){const a=location.pathname;return String(a.match(/[^/]+(?=\/?$)/)||"").toLowerCase()}const Cs=["innerHTML"],Ls=ve({__name:"switch-lang",emits:["lang-ready","lang-change"],async setup(a,{emit:i}){let p,u;const o=Ne(Pe),d=Ht(),{locale:l,t:g}=Ee(),w=i,_=Object.entries(Is).map(([f,z])=>({label:z,value:f}));_.sort((f,z)=>{const O=f.label,S=z.label;return O>S?1:O<S?-1:0}),Te(()=>{d.afterEach((f,z,O)=>{v(),o.switchToolTipVisibility()})}),Ja(async()=>{}),[p,u]=Xa(()=>v()),await p,u();async function k(f){(f!==l.value||lt.global.availableLocales.indexOf(f)===-1)&&(w("lang-change",f),await $s(f),l.value=f,document.title=g("title"),await kt()),w("lang-ready",f)}async function v(){const f=d.currentRoute.value.path||"",z=String(f.match(new RegExp("(?<=^\\/)[^/]+"))||"");z&&ot.includes(z)?(await k(z),l.value=z):await I()}async function I(){const f=b().toLowerCase(),z=f.split(/[-_]/)[0];if(ot.includes(z)){let O=z;if(z==="zh")switch(f){case"zh-hant":case"zh-mo":case"zh-hk":case"zh-tw":O="zh-hant"}await k(O)}}function b(){const f=window.navigator;return f.language||f.userLanguage||f.browserLanguage}function m(f){d.push("/"+f+"/")}return(f,z)=>{const O=ge,S=an,E=xe;return C(),N(E,{to:!1,"display-directive":"show",show:e(o).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(o).LANDSCAPE.value?"left":"bottom",duration:0,delay:50},{trigger:t(()=>[n(S,{ref:"langselect",size:"tiny",style:{width:"100%"},"consistent-menu-width":!1,options:e(_),"_v-model:value":"locale",value:e(l),"onUpdate:value":m},{arrow:t(()=>[n(O,null,{default:t(()=>[n(e(eo))]),_:1})]),_:1},8,["options","value"])]),default:t(()=>[y("div",{innerHTML:f.$t("selectLanguage")},null,8,Cs)]),_:1},8,["show","placement"])}}}),Es=y("span",null,"CONVERT TOüëá",-1),Pe=Symbol("global variables"),Fs=ve({__name:"Avif2Jpeg",emits:["ready"],setup(a,{emit:i}){Ee();const p=i,u=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),o=x(null),d=x(2);let l=x(void 0);const g=x(!0),w=x(!1),_=x(!1),k=x(!1);to(Pe,{showTooltipsBeforeMounted:l,LANDSCAPE:g,IS_SP:u,switchToolTipVisibility:z,SSR:!1}),Te(()=>{O(),window.addEventListener("resize",O),z(),setTimeout(()=>_.value=!0,3e3)});const v=200;let I=0,b=!0;function m(){k.value=!1,I=Date.now()}function f(){const E=b?0:Math.max(0,v-(Date.now()-I));b=!1,setTimeout(()=>k.value=!0,E),p("ready")}async function z(){}function O(){const E=document.body.clientWidth,s=document.body.clientHeight;g.value=E*.75>s||E>900}function S(E){o.value=E}return(E,s)=>{const h=$e,T=ge,A=Je,M=He;return C(),N(M,{vertical:"",align:"stretch",justify:"start",style:{height:"100%",position:"relative"}},{default:t(()=>[n(ko,null,{"lang-switch":t(()=>[(C(),N(no,null,{default:t(()=>[n(Ls,{onLangChange:m,onLangReady:f})]),_:1}))]),_:1}),n(je,{name:"fade"},{default:t(()=>[e(k)?(C(),N(M,{key:0,vertical:"",align:"stretch",justify:"space-between",style:{height:"100%"}},{default:t(()=>[n(Io),n(h,{justify:"center"},{default:t(()=>[n(ql,{expanded:e(j).expandExtButtons,"onUpdate:expanded":s[0]||(s[0]=L=>e(j).expandExtButtons=L),target:e(j).acceptTypeValue,"onUpdate:target":s[1]||(s[1]=L=>e(j).acceptTypeValue=L),userExtensions:e(j).editedAcceptTypes,"onUpdate:userExtensions":s[2]||(s[2]=L=>e(j).editedAcceptTypes=L),forbidden:e(w),onInput:S},null,8,["expanded","target","userExtensions","forbidden"])]),_:1}),n(zl,{input:e(o),format:e(j).imageFormat,quality:e(j).imageQuality,"retain-extension":e(j).retainExtension,maxZipSizeMB:e(j).maxZipSizeMB,threads:e(j).multithread?e(j).threadCount:0,onStart:s[3]||(s[3]=L=>w.value=!0),onEnd:s[4]||(s[4]=L=>w.value=!1),onMultiThreadCount:s[5]||(s[5]=L=>d.value=L)},null,8,["input","format","quality","retain-extension","maxZipSizeMB","threads"]),n(h,{vertical:"",align:"center"},{default:t(()=>[n(A,{trigger:"manual",placement:"top","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(T,{size:"4vh",color:"#DADADA",style:{margin:"0px"}},{default:t(()=>[n(e(ao))]),_:1})]),default:t(()=>[Es]),_:1})]),_:1}),n(h,{vertical:"",align:"center"},{default:t(()=>[n(Kl,{format:e(j).imageFormat,"onUpdate:format":s[6]||(s[6]=L=>e(j).imageFormat=L),quality:e(j).imageQuality,"onUpdate:quality":s[7]||(s[7]=L=>e(j).imageQuality=L)},null,8,["format","quality"]),n(ts,{"retain-ext":e(j).retainExtension,"onUpdate:retainExt":s[8]||(s[8]=L=>e(j).retainExtension=L),"use-folder-name-for-zip":e(j).useFolderNameForZip,"onUpdate:useFolderNameForZip":s[9]||(s[9]=L=>e(j).useFolderNameForZip=L),"max-zip-size":e(j).maxZipSizeMB,"onUpdate:maxZipSize":s[10]||(s[10]=L=>e(j).maxZipSizeMB=L),expanded:e(j).expandAdvSettings,"onUpdate:expanded":s[11]||(s[11]=L=>e(j).expandAdvSettings=L),multithread:e(j).multithread,"onUpdate:multithread":s[12]||(s[12]=L=>e(j).multithread=L),"thread-count":e(j).threadCount,"onUpdate:threadCount":s[13]||(s[13]=L=>e(j).threadCount=L),"thread-max":e(d)||0,"shrink-image":e(j).shrinkImage,"onUpdate:shrinkImage":s[14]||(s[14]=L=>e(j).shrinkImage=L),"max-width":e(j).maxWidth,"onUpdate:maxWidth":s[15]||(s[15]=L=>e(j).maxWidth=L),"max-height":e(j).maxHeight,"onUpdate:maxHeight":s[16]||(s[16]=L=>e(j).maxHeight=L)},null,8,["retain-ext","use-folder-name-for-zip","max-zip-size","expanded","multithread","thread-count","thread-max","shrink-image","max-width","max-height"])]),_:1}),n(ss)]),_:1})):ee("",!0)]),_:1})]),_:1})}}}),St=ve({__name:"App",setup(a){const i={Statistic:{valueFontSize:"1em"},Popover:{borderRadius:"0.4em",boxShadow:"2px 2px 5px 0px #555555"},Tooltip:{color:"#000000AA"},Image:{toolbarColor:"#00000099"}},p=x(!0);return Te(()=>{p.value=!1}),(u,o)=>{const d=lo,l=so,g=io,w=ro,_=uo,k=oo;return C(),N(k,{"theme-overrides":i,style:{width:"100%",height:"100%"}},{default:t(()=>[n(_,null,{default:t(()=>[n(w,{placement:"top-right",max:20},{default:t(()=>[n(g,{placement:"top-left",closable:!0,max:50},{default:t(()=>[n(l,null,{default:t(()=>[n(d,null,{default:t(()=>[n(Fs,{class:Ke({hide:e(p)})},null,8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),ua=[{path:"/",name:"Home",component:St}];for(const a of ot)ua.push({path:"/"+a+"/",strict:!0,name:a,component:St});co(St,{routes:ua,base:"/avif2jpeg/dist/"},({app:a,router:i,routes:p,isClient:u,initialState:o})=>{a.use(lt)});
