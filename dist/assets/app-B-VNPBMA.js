var ia=Object.defineProperty;var ra=(i,r,s)=>r in i?ia(i,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[r]=s;var Je=(i,r,s)=>ra(i,typeof r!="symbol"?r+"":r,s);import{r as _,a as zt,d as we,i as Ke,c as oe,o as E,_ as ke,u as e,w as t,b as A,t as p,e as w,f as n,g as Se,N as Ie,L as ua,h as K,B as Ee,j as Ot,F as Oe,k as rt,l as da,m as X,n as Re,p as Ye,q as ca,s as pa,v as Le,x as fa,y as De,z as sn,A as fe,C as rn,D as un,E as dn,G as xe,H as Te,I as Et,J as qe,K as ga,M as ma,O as Ze,P as kt,Q as ce,R as et,T as Qe,S as cn,U as We,V as pn,W as ut,X as xt,Y as tt,Z as mt,$ as va,a0 as nt,a1 as ha,a2 as Vt,a3 as qt,a4 as fn,a5 as _a,a6 as Tt,a7 as wa,a8 as ya,a9 as Ut,aa as ba,ab as Gt,ac as dt,ad as za,ae as gn,af as ka,ag as xa,ah as ot,ai as Pe,aj as It,ak as Ta,al as Ne,am as Ia,an as mn,ao as Sa,ap as Ft,aq as vn,ar as Aa,as as Kt,at as hn,au as La,av as Ca,aw as $a,ax as _n,ay as Ea,az as Fa,aA as Pa,aB as wn,aC as yn,aD as Oa,aE as Ua,aF as bn,aG as Ma,aH as at,aI as lt,aJ as Ra,aK as Na,aL as ja,aM as Da,aN as Ba,aO as Za,aP as Wa,aQ as Ha,aR as Va,aS as qa,aT as Ga,aU as Ka,aV as Qa,aW as Ya,aX as Xa,aY as Ja,aZ as el}from"./vendor-CT3-pB7H.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}})();const Me=_(navigator.hardwareConcurrency?Math.min(navigator.hardwareConcurrency,12):0),st={threadCount:{min:2,max:Math.max(2,Me.value)}},tl={imageFormat:"image/jpeg",imageQuality:90,expandExtButtons:!1,acceptTypeValue:void 0,editedAcceptTypes:"",expandAdvSettings:!1,retainExtension:!1,maxZipSizeMB:1e3,useFolderNameForZip:!1,multithread:!0,threadCount:Me.value,shrinkImage:!1,maxWidth:4096,maxHeight:4096,disableNotifyingFolderSelect:!1,changeLogCheckedDate:0},B=zt(zn({}));function nl(){zn(B)}function zn(i){return Object.assign(i,tl)}const kn="avif2jpeg",St=JSON.parse(localStorage.getItem(kn)||"{}");for(const i in B)if(St.hasOwnProperty(i)&&St[i]!==void 0){let r=St[i];st.hasOwnProperty(i)&&(st[i].min>r&&(r=st[i].min),st[i].max<r&&(r=st[i].max)),B[i]=r}const xn=()=>{const i={};for(const r in B)i[r]=B[r];localStorage.setItem(kn,JSON.stringify(i))};window.addEventListener("beforeunload",xn);function ol(){localStorage.clear(),window.removeEventListener("beforeunload",xn)}const al={href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-weight":"bolder"}},ll=we({__name:"github",setup(i){const r=Ke(Ve);return(s,l)=>{const a=Ie,o=Se,u=ke;return E(),oe(u,{to:!1,"display-directive":"show",show:e(r).showTooltipsBeforeMounted.value,trigger:"hover",duration:0,delay:0},{trigger:t(()=>[w("a",al,[n(o,{align:"center",size:0},{default:t(()=>[n(a,{size:"1.2em"},{default:t(()=>[n(e(ua))]),_:1}),l[0]||(l[0]=A("GitHub "))]),_:1,__:[0]})])]),default:t(()=>[A(" "+p(s.$t("githubOpenSource")),1)]),_:1},8,["show"])}}}),sl=["href"],il=we({__name:"licenses",setup(i){const r=_(!1),s={Vue:"https://github.com/vuejs/core/blob/main/LICENSE",Vite:"https://github.com/vitejs/vite/blob/main/LICENSE","Vite SSG":"https://github.com/antfu/vite-ssg/blob/main/LICENSE","Naive UI":"https://github.com/TuSimple/naive-ui/blob/main/LICENSE",Ionicons:"https://github.com/ionic-team/ionicons/blob/main/LICENSE"};return(l,a)=>{const o=Ee;return E(),K(Oe,null,[n(o,{text:"",onClick:a[0]||(a[0]=u=>r.value=!0),style:{color:"black","font-size":"small"}},{default:t(()=>a[2]||(a[2]=[A("Licenses")])),_:1,__:[2]}),n(e(Ot),{preset:"dialog",ref:"dialog",show:r.value,"onUpdate:show":a[1]||(a[1]=u=>r.value=u),"positive-text":"OK",title:"Licenses"},{default:t(()=>[a[3]||(a[3]=w("h3",null,"Frameworks and Libraries",-1)),w("ul",null,[(E(),K(Oe,null,rt(s,(u,d)=>w("li",null,[w("a",{href:u},p(d),9,sl)])),64))]),a[4]||(a[4]=w("h3",null,"App icon",-1)),a[5]||(a[5]=w("div",null,[A(" The app icon is derived from "),w("a",{href:"https://aomediacodec.github.io/av1-avif/"},"AVIF logo"),A(". ")],-1))]),_:1,__:[3,4,5]},8,["show"])],64)}}}),rl=1,ul=11,dl=1,cl="",pt={major:rl,minor:ul,build:dl,tag:cl},pl={style:{"font-size":"x-small","user-select":"none"}},fl=we({__name:"version",setup(i){const r=["0.0.118"],s=`${pt.major}.${pt.minor}.${pt.build}${pt.tag}`,l=r.map(d=>({label:`v${d}`,key:d,value:d}));function a(d){const{key:g,label:v}=d,y=u(g),x=X("a",{href:y},v),c=X("div",null,x);return X("div",null,c)}function o(d){location.href=u(d)}function u(d){return`/avif2jpeg/old/${d}/`}return(d,g)=>{const v=da;return E(),oe(v,{"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start",options:e(l),"render-label":a,"onUpdate:value":o},{header:t(()=>[w("span",pl,p(d.$t("previousVersion")),1)]),default:t(()=>[w("span",{style:{cursor:"pointer"}},"v"+p(s))]),_:1},8,["options"])}}}),gl={key:0,style:{color:"red"}},ml=["innerHTML"],vl=we({__name:"changelog",props:{url:{}},setup(i){const r=i,s=_("fetching..."),l=_(!1);Re(()=>o(r.url));let a=0;async function o(d){const g=await fetch(d,{headers:{Accept:"application/vnd.github.v3+json"}}).then(v=>v.ok?v.text():null);s.value="",g&&(s.value=g.replace(/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2}) \+\d+$/mg,(v,y)=>{const x=new Date(v),c=x.getTime(),h=x.toLocaleString();let f="";return c>B.changeLogCheckedDate&&(l.value=!0,c>a&&(a=c),f="update"),`<span class="date ${f}">${h}</span>`}))}function u(){a>B.changeLogCheckedDate&&(B.changeLogCheckedDate=a),l.value=!1}return(d,g)=>{const v=Ie,y=Se,x=Ye;return E(),oe(x,{trigger:"click",placement:"bottom","arrow-point-to-center":"","onUpdate:show":u,style:{"margin-left":"-1em","max-width":"80%","white-space":"initial"}},{trigger:t(()=>[n(y,{align:"center",size:1,style:{cursor:"pointer"}},{default:t(()=>[n(v,{component:e(ca),size:"1.5em",color:e(l)?"blue":"silver",style:{transition:"color 0.5s"}},null,8,["component","color"]),A(" "+p(d.$t("changelog")),1)]),_:1})]),default:t(()=>[e(s)?(E(),K("pre",{key:1,innerHTML:e(s),class:"commits"},null,8,ml)):(E(),K("div",gl," connection error "))]),_:1})}}}),hl="modulepreload",_l=function(i){return"/avif2jpeg/dist/"+i},Qt={},ze=function(r,s,l){let a=Promise.resolve();if(s&&s.length>0){let u=function(v){return Promise.all(v.map(y=>Promise.resolve(y).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),g=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));a=u(s.map(v=>{if(v=_l(v),v in Qt)return;Qt[v]=!0;const y=v.endsWith(".css"),x=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${x}`))return;const c=document.createElement("link");if(c.rel=y?"stylesheet":hl,y||(c.as="script"),c.crossOrigin="",c.href=v,g&&c.setAttribute("nonce",g),document.head.appendChild(c),y)return new Promise((h,f)=>{c.addEventListener("load",h),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${v}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return a.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return r().catch(o)})},Tn="English",In="🇬🇧",Sn='AVIF to JPEG "Offline" Batch Converter',An="It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",Ln=["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data is sent to any server</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.',"Use this app at your own risk."],Cn="Select your language",$n="Choose Target File Extentions",En={avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types",edit_type:"Edit File Extension List"},Fn="Input a list of comma separated file extentions to load.<br>e.g.) .jpg,.gif,.png",Pn="Load Images",On="Select your images from a dialog window.<br>*Multiple selection allowed.",Un="Load a Whole Folder",Mn=`Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>*It will show "Upload" button, but it actually doesn't upload anything to any server.`,Rn="Converting images",Nn="Aborted",jn="Some files failed to convert",Dn="Completed",Bn="Currently Busy",Zn="No files with the extentions were found.",Wn="Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",Hn="Cancel",Vn="Save",qn="Close",Gn="Open",Kn="Re-convert",Qn="Convert previous selected {n} @:files again",Yn="File | Files",Xn="thread | threads",Jn="You have not saved the converted images yet.",eo="Data have not been saved",to="Open Source",no="Open the converted image",oo="Copied to clipboard",ao="The converted image was copied to your clipboard as DataURL.",lo="Copy the converted image as DataURL",so="Convert Again",io={expandLogTooltip:"Displaying the entire log may severely reduce conversion speed.",showOnlyErrors:"Show only errors",outInRate:"Out / In Ratio",elapsedTime:"Elapsed Time",multiThreading:"Multi-Threading",outputSettings:"Output Settings",totalSize:"Total Size",totalFiles:"Number of Files",confirmDownloadMessage:"It will start to download {0} zip files.",inputSize:"Input Size",outputSize:"Output Size",filterSuccess:"Hide completed item",progressErrors:"Failed items",progressStarted:"Started Items",progressTotal:"Total number of files",zippingProgress:"Zipping progress",zipped:"ZIPPED",openFailedList:"Open failed file list",zipFailedList:"Pack failed files into Zips",table:{index:"index",status:"status",core:"thread",details:"file"},saveFailedList:"Save failed file list",done:"done",convertedZips:"successfully completed ZIP",progressSuccess:"Completed Files",downloadConvertedImage:"Download Converted Image",failureZippingFailedFiles:"Failure while zipping the failed files.",browseConvertedImages:"Browse converted images",index:"Index",Original:"Original",Converted:"Converted",saveAllZipsTooltip:"Save all ZIP files",Shrinked:"Shrinked",Shrinking:"Shrinking",saveAll:"Save All",progressRetries:"Retrying files",success:"success",started:"started",total:"total",files:"files",failure:"failure",all:"all",filterLogSelect:"filter",showOnlySuccess:"Only successes",showOnlyError:"Only errors",showAll:"Show all",Progress:"Progress",PreviewImage:"Preview Images",Log:"Log",log:"Log",Output:"Output Results",expandLog:"expand log size",autoScroll:"auto-scroll",sortByStatus:"status",sort:"Sort list by",sortByName:"name",sortBySize:"size",sortByOutputSize:"size(output)",sortByStart:"starting order",sortByCompletion:"output order"},ro={maxZipFileSize:"Max zip file size",retainExtTooltip:"New extension will be appended to original extension",retainOriginalExtension:"Keep Original File Extension",qualitytooltip:"Set image quality for output",quality:"Image Quality",maxZipFileSizeTooltip:"Set smaller value if memory problems occur.",ignoreExtTooltip:'Try to load files that don"t have image file extension',ignoreFileExtensions:"Load All File Types",imageTypeTooltip:"Choose image format for output",imageType:"Image Type",advancedSettings:"Advanced Settings",enableMultiThreads:"Enable multi-threading",resetButtonTooltip:"Restore all settings to default.",multiThreadsTooltip:"Convert images in multi-threaded",shrinkImageTooltip:"If the image dimensions are larger than the specified value, shrink the image to that value",shrinkImage:"Shrink images that exceed the following dimensions",useFolderNameForZip:"Use dropped folder name for the zip file",useFolderNameForZipTooltip:"If a folder is dropped or selected, its name is used as the name of the output ZIP file"},uo="Disabled",co="Download",po="Reset",fo="Back",go="Failed",mo="Success",vo="Previous version",ho=`
Height`,_o="Width",wo="Don't show this message again",yo="About the warning when selecting a folder",bo="OK",zo={},ko="You must press the “Upload” button here to load all the images in the folder, but the data loaded by this application is never actually uploaded to the server.",xo="Continue",To="Cancel",Io="When you select a folder instead of a file as input on a website, major web browsers will display a warning like the image below.",So="This page may be an outdated version. Please reload the page.",Ao="Reload",Lo='If the conversion process frequently fails and an “Out of Memory” message appears, try reducing or disabling the number of "multi-threads" in the "Advanced Settings".',Co="Next",$o="Previous",Eo="or",Fo="Source Image Extensions",Po="Changelog",Oo="Choose source image extensions",Uo="Drag & Drop AVIF Images to Convert",Mo="Or just drag & drop",Ro="Install as App",No="A new version of the page is available. Click the reload button to update.",jo='Installing allows you to launch this web app directly from desktop icons or other shortcuts. The security level is the same as a regular web page, so it remains safe. For more details, please see <a href="https://support.google.com/chrome/answer/9658361">Google’s support page</a>.',Do={lang:Tn,flags:In,title:Sn,metaDescription:An,descriptions:Ln,selectLanguage:Cn,fileTypeRadioTitle:$n,fileTypeRadioOptions:En,editAcceptTypes:Fn,loadbutton:Pn,loadbuttontooltip:On,loadfolderbutton:Un,loadfoldertooltip:Mn,processing:Rn,aborted:Nn,incomplete:jn,completed:Dn,interfered:Bn,noimage:Zn,avifUnsupported:Wn,cancel:Hn,save:Vn,close:qn,open:Gn,reconvert:Kn,reconvertTip:Qn,files:Yn,threads:Xn,confirmCloseDialog:Jn,confirmCloseDialogTitle:eo,githubOpenSource:to,convertedImageUrlTooltip:no,copiedDataURLDialogTitle:oo,copiedDataURLMessage:ao,convertedImageDataUrlTooltip:lo,convertAgain:so,status:io,settings:ro,disabled:uo,Download:co,reset:po,back:fo,failed:go,success:mo,previousVersion:vo,height:ho,width:_o,checkboxTextDontShowThis:wo,loadfolderNotifyingTitle:yo,OK:bo,loadfolderNotifyingMessage:zo,loadfolderNotifyingMessageTerm2:ko,Continue:xo,Cancel:To,loadfolderNotifyingMessageTerm1:Io,errMsgWorkerLoadError:So,Reload:Ao,annotationOutOfMemory:Lo,Next:Co,Prev:$o,or:Eo,TargetFileTypeExt:Fo,changelog:Po,TargetFileTypeExtTooltip:Oo,droptargetTooltip:Uo,droptargetLabel:Mo,installAsApp:Ro,PWAUpdateMessage:No,PWAinstallAsAppTooltip:jo},wl=Object.freeze(Object.defineProperty({__proto__:null,Cancel:To,Continue:xo,Download:co,Next:Co,OK:bo,PWAUpdateMessage:No,PWAinstallAsAppTooltip:jo,Prev:$o,Reload:Ao,TargetFileTypeExt:Fo,TargetFileTypeExtTooltip:Oo,aborted:Nn,annotationOutOfMemory:Lo,avifUnsupported:Wn,back:fo,cancel:Hn,changelog:Po,checkboxTextDontShowThis:wo,close:qn,completed:Dn,confirmCloseDialog:Jn,confirmCloseDialogTitle:eo,convertAgain:so,convertedImageDataUrlTooltip:lo,convertedImageUrlTooltip:no,copiedDataURLDialogTitle:oo,copiedDataURLMessage:ao,default:Do,descriptions:Ln,disabled:uo,droptargetLabel:Mo,droptargetTooltip:Uo,editAcceptTypes:Fn,errMsgWorkerLoadError:So,failed:go,fileTypeRadioOptions:En,fileTypeRadioTitle:$n,files:Yn,flags:In,githubOpenSource:to,height:ho,incomplete:jn,installAsApp:Ro,interfered:Bn,lang:Tn,loadbutton:Pn,loadbuttontooltip:On,loadfolderNotifyingMessage:zo,loadfolderNotifyingMessageTerm1:Io,loadfolderNotifyingMessageTerm2:ko,loadfolderNotifyingTitle:yo,loadfolderbutton:Un,loadfoldertooltip:Mn,metaDescription:An,noimage:Zn,open:Gn,or:Eo,previousVersion:vo,processing:Rn,reconvert:Kn,reconvertTip:Qn,reset:po,save:Vn,selectLanguage:Cn,settings:ro,status:io,success:mo,threads:Xn,title:Sn,width:_o},Symbol.toStringTag,{value:"Module"})),yl="Arabic",bl="German",zl="English",kl="Spanish",xl="Finnish",Tl="French",Il="Hindi",Sl="Indonesian",Al="Italian",Ll="Japanese",Cl="Korean",$l="Dutch",El="Polish",Fl="Portuguese",Pl="Russian",Ol="Turkish",Ul="Ukrainian",Ml="Chinese",Rl={ar:yl,de:bl,en:zl,es:kl,fi:xl,fr:Tl,hi:Il,id:Sl,it:Al,ja:Ll,ko:Cl,nl:$l,pl:El,pt:Fl,ru:Pl,tr:Ol,uk:Ul,"zh-hant":"Chinese(hant)",zh:Ml},vt=[],Bo={en:Do},Mt={},Yt=Object.assign({"./locales/ar.json":()=>ze(()=>import("./ar-BLNV8TAK.js"),[]),"./locales/de.json":()=>ze(()=>import("./de-DlkseySw.js"),[]),"./locales/en.json":()=>ze(()=>Promise.resolve().then(()=>wl),void 0),"./locales/es.json":()=>ze(()=>import("./es-3WAkIEv9.js"),[]),"./locales/fi.json":()=>ze(()=>import("./fi-DWsHho6a.js"),[]),"./locales/fr.json":()=>ze(()=>import("./fr-va78iX7o.js"),[]),"./locales/hi.json":()=>ze(()=>import("./hi-fQ7dvS3u.js"),[]),"./locales/id.json":()=>ze(()=>import("./id-BWWTFmsQ.js"),[]),"./locales/it.json":()=>ze(()=>import("./it-C-YPo04Y.js"),[]),"./locales/ja.json":()=>ze(()=>import("./ja-D9XfiIsP.js"),[]),"./locales/ko.json":()=>ze(()=>import("./ko-DJ4h8sS1.js"),[]),"./locales/nl.json":()=>ze(()=>import("./nl-BobmfgK6.js"),[]),"./locales/pl.json":()=>ze(()=>import("./pl-DAaEy6VF.js"),[]),"./locales/pt.json":()=>ze(()=>import("./pt-BuwEcaZt.js"),[]),"./locales/ru.json":()=>ze(()=>import("./ru-CnObxosO.js"),[]),"./locales/tr.json":()=>ze(()=>import("./tr-BIo-of-m.js"),[]),"./locales/uk.json":()=>ze(()=>import("./uk-M2jo7xEW.js"),[]),"./locales/zh-hant.json":()=>ze(()=>import("./zh-hant-BDyCcXay.js"),[]),"./locales/zh.json":()=>ze(()=>import("./zh-CC5Gi4Nt.js"),[])});var ln;for(const i in Yt){const r=(ln=i.match(/\/([a-z]{2}(?:-[a-z]+)?)\.json$/i))==null?void 0:ln[1];r&&(vt.push(r),!(r in Bo)&&(Mt[r]=Yt[i]))}let Pt=jl();Pt in Mt||(Pt="en");const ht=pa({legacy:!1,globalInjection:!0,locale:Pt,fallbackLocale:"en",messages:Bo,warnHtmlMessage:!1,missingWarn:!1,fallbackWarn:!1});async function Nl(i){if(ht.global.availableLocales.indexOf(i)>=0)return!0;const r=await Mt[i]().catch(s=>{});return r?(ht.global.setLocaleMessage(i,r),await Le(),!0):!1}function jl(){const i=location.pathname;return String(i.match(/[^/]+(?=\/?$)/)||"").toLowerCase()}const Dl=we({__name:"header",setup(i){const r=fa(),{locale:s}=De();return(l,a)=>{const o=sn("router-link"),u=Se,d=un;return E(),oe(u,{vertical:"",justify:"start"},{default:t(()=>[n(u,{justify:"space-between",align:"center",wrap:!1},{default:t(()=>[n(u,{align:"center"},{default:t(()=>[n(ll),n(fl),n(vl,{url:"/avif2jpeg/dist/commits.txt"}),n(il),n(u,{style:{"font-size":"1em"}},{default:t(()=>[e(r).path!=="/"?(E(),oe(o,{key:0,to:"/",style:{color:"black"}},{default:t(()=>a[0]||(a[0]=[A("HOME")])),_:1,__:[0]})):fe("",!0)]),_:1})]),_:1}),n(u,{align:"end",id:"langtarget"},{default:t(()=>[rn(l.$slots,"lang-switch")]),_:3})]),_:3}),n(d,{style:{margin:"0px"}})]),_:3})}}}),Bl="/avif2jpeg/dist/pwa-64x64.png",Zl={style:{padding:"0px",margin:"0px","text-align":"center"}},Wl=we({__name:"title",setup(i){const r=dn();return xe(()=>{const s=r.currentRoute.value.path||"";return!String(s.match(new RegExp("(?<=^\\/)[^/]+"))||"")}),(s,l)=>{const a=Se;return E(),oe(a,{align:"center",justify:"center",style:{margin:"0px"}},{default:t(()=>[w("h1",Zl,[l[0]||(l[0]=w("img",{src:Bl,style:{height:"1em","vertical-align":"middle"}},null,-1)),A(" "+p(s.$t("title")),1)])]),_:1})}}}),Xt=new Set,Hl=new Set,Vl=new Set,_t=new Map;function ql(i){const r=_t.get(i);r&&(_t.delete(i),r(),ft==null||ft(),ft=null)}function Gl(){for(const i of _t.keys())ql(i)}let ft=null;function Zo(){Gl();for(const i of Xt)i.onmessage=null,i.terminate();Xt.clear(),Hl.clear(),Vl.clear(),_t.clear()}function Kl(i){return new Worker("/avif2jpeg/dist/assets/worker.zip-Bt_6u_43.js",{name:i==null?void 0:i.name})}function Ql(i){return new Worker("/avif2jpeg/dist/assets/worker.loader-D7gK7Qbe.js",{name:i==null?void 0:i.name})}const Yl=1e3*10;let Ge;const je=new Map,wt=new Map,yt=new Map;let Rt,ee,Nt,bt,gt,Wo,Ho,Vo,qo,ct;function At(i){if({files:gt,completedFileIdSet:Rt,ConvStats:ee,canceled:Nt,props:bt,format:Wo,quality:Ho,outputExt:Vo,imageType:qo,message:ct}=i||{},Ge=null,je.clear(),wt.clear(),yt.clear(),wt.clear(),yt.clear(),i)for(const s in i)delete i[s]}async function Xl(i){At(i),Rt.clear();let r;try{r=await Jl()}catch{return At(),{exception:new Error("worker-load-error"),callbackToClearConverter:new Function,callbackToGenerateFailedZips:new Function}}const[s,l]=r;Ge=l;const a=new Promise(c=>{l.onmessage=h=>{const f=h.data,{action:z}=f;switch(z){case"squeeze-zip":case"zip-squeeze-error":c(void 0);break}}}),o=new Promise(c=>{s.onmessage=h=>{const{data:{action:f}}=h;f==="close-loader"&&c()}}),u=gt.map(c=>[c._id,c.webkitRelativePath]);gt.forEach(c=>wt.set(c._id,c));const d=Te(Nt,c=>{if(!c)return;d();const h={action:"cancel-convert"};s.postMessage(h)}),g={action:"start-convert",list:gt,extraPropsForList:u,outputQuality:Ho,outputType:Wo,threads:bt.threads,maxSize:B.shrinkImage?{width:B.maxWidth,height:B.maxHeight}:null};s.postMessage(g),await o,l.postMessage({action:"squeeze"}),await a,d();const v=()=>{Zo(),l.onmessage=null,l.terminate(),s.onmessage=null,s.terminate(),At()};let y=!1;return{callbackToClearConverter:v,callbackToGenerateFailedZips:async c=>{y||(y=!0,await rs(c,l,{},ee))}}}async function Jl(){Zo();const i=new Ql,r=new Kl,s=new Promise((u,d)=>{const g=h=>{r.removeEventListener("message",x),i.removeEventListener("message",x),clearTimeout(c),h?u(h):d(h)};let v=!1,y=!1;const x=h=>{h.target===r&&(v=!0),h.target===i&&(y=!0),v&&y&&g(!0)};let c=0;r.addEventListener("message",x),i.addEventListener("message",x),c=window.setTimeout(()=>g(!1),Yl)}),{port1:l,port2:a}=new MessageChannel,o={action:"set-zip-port"};return r.postMessage({action:"set-port-loader"},[l]),i.postMessage(o,[a]),await s,r.postMessage({action:"set-config",zipSize:bt.maxZipSizeMB*1024*1024,keepExt:bt.retainExtension,outputExt:Vo,imageType:qo}),i.addEventListener("message",ts),r.addEventListener("message",es),[i,r]}const es=i=>{const r=i.data,{action:s}=r;switch(s){case"add-zip-completed":{const{fileId:u,entireIndex:d,storedPath:g}=r;return}case"respond-image":{const{url:u,index:d,path:g,size:v,fileId:y}=r;ee.convertedImageUrl=u,ee.convertedImageSize=v,ee.convertedImageIndex=d,ee.convertedImageName=g;let x="",c=0,h="";const f=je.get(y);if(y>=0){const z=wt.get(y);x=URL.createObjectURL(z),c=z.size,h=z.webkitRelativePath||z.name}ee.convertedImageOrgUrl=x,ee.convertedImageOrgSize=c,ee.convertedImageOrgName=h,ee.convertedImageShrinked=f==null?void 0:f.shrinked;return}case"respond-delete":{const{index:u,success:d,fileId:g}=r;je.get(g).command="❌deleted",je.get(g).completed=!1;return}}switch(s){case"error-push-filelist-zip":const{path:u}=r;ee.failedZipDone=!0,ct.error(`an error occurred "${u}"`,{duration:3e3});return}const{size:l,count:a}=r,o="url"in i.data?i.data.url:"";switch(s){case"push-zip":ee.zips.push({url:o,size:l,count:a}),ee.zippedTotalCount+=a,ee.zippedTotalSize+=l;break;case"squeeze-zip":a>0&&(ee.zips.push({url:o,size:l,count:a}),ee.zippedTotalCount+=a,ee.zippedTotalSize+=l);break;case"push-filelist":ee.failedFileZippedCount++;break;case"squeeze-filelist-zip":ee.failedZipDone=!0;case"push-filelist-zip":ee.failedZips.push({url:o,size:l,count:a});break;case"zip-error":case"zip-squeeze-error":ee.zippingErrorCount+=a;break}},ts=i=>{i.target;const{data:r}=i,{action:s}=r;switch(s){case"list-start":break;case"list-end":break;case"file-start":{const{index:l,path:a,fileId:o}=r;os(l,a,o);break}case"file-load":{const{thumbnail:l,width:a,height:o,fileId:u,workerId:d,inputsize:g}=r,v=je.get(u);v.core=d,v.command="🖼️loaded",v.width=a,v.height=o,v.size=g,l&&(ee.thumbnail=l);break}case"file-converted":{const{index:l,path:a,fileId:o,shrinked:u,outputWidth:d,outputHeight:g,outputsize:v}=r,y=je.get(o);y.command="🔃converted",y.shrinked??(y.shrinked=u),y.outputWidth=d,y.outputHeight=g,y.outputSize=v,ee.converted++;break}case"file-completed":{const{inputsize:l,outputsize:a,fileId:o,entireIndex:u,storedPath:d}=r,g=je.get(o);g&&(g.command="✅completed",g.completed=!0,g.fileId=o),ee.inputTotalSize+=l,ee.outputTotalSize+=a,ee.done++,ee.success++,Rt.add(o),g.zippedIndex=u,ee.ziplogs[u]={fileId:o,storedPath:d};break}case"file-retry":{const{index:l,path:a,fileId:o}=r;as(l,a,o);break}case"file-error":{const{index:l,path:a,fileId:o}=r;ls(l,a,o);break}case"file-canceled":{const{fileId:l,path:a}=r;ss(l);break}}};let ns=0;function os(i,r,s){const l={key:ns++,core:-1,index:i,path:r,command:"➡️started"};je.set(s,l),ee.logs.push(l),yt.has(s)||Nt.value||ee.startedCount++}function as(i,r,s){const l=je.get(s);l.command="⚠️retrying",l.error=!0,ct.warning(`retrying "${r}"`,{duration:3e3}),ee.retried++,yt.set(s,1)}function ls(i,r,s){const l=je.get(s);ee.done++,ee.failure++,l.command="❗failed",l.error=!0,ct.error(`failed to load "${r}"`,{duration:5e3})}function ss(i){const r=je.get(i);ee.done++,ee.failure++,r.command="❗canceled",r.error=!0}function is(i){Ge==null||Ge.postMessage({action:"request-image",index:i})}function Lt(i){Ge==null||Ge.postMessage({action:"delete-image",index:i})}async function rs(i,r,s,l){let a=0;for(const o of i){const u=(o.webkitRelativePath||o.name).replace(/^\//,"");if(l.failedZipDone)break;if(s.value)return;a-l.failedFileZippedCount>20&&await new Promise(d=>setTimeout(d,10)),r.postMessage({action:"add-filelist",file:o,path:u}),a++}if(l.failedZipDone){ct.error("Zipping error files was aborted",{duration:5e3});return}r.postMessage({action:"squeeze-filelist"})}function He(i,r=2){const s=Math.sign(i);i=Math.abs(i);const l=["Bytes","KB","MB","GB"],a=i?Math.floor(Math.log(i)/Math.log(1024)):0;return`${(i/Math.pow(1024,a)*s).toFixed(r)}${l[a]}`}function Go(i,r=100,s=!1){r=typeof r=="number"?{width:r,height:r}:r;const{width:l,height:a}=r;let{width:o,height:u}=i;const d=o/u,g=l/a;return d>=g?(o=s?Math.min(l,o):l,u=o/d|0):(u=s?Math.min(a,u):a,o=u*d|0),{width:o,height:u}}class us{constructor(){Je(this,"_currentFileCount",0);Je(this,"_currentZipIndex",0);Je(this,"_totalFileCount",0);Je(this,"_zipLengthSumList",[]);Je(this,"_pathBank",{})}increase(r){return r&&(this._pathBank[r]=[this._zipLengthSumList.length,this._currentFileCount]),this._currentFileCount++,this._totalFileCount++}split(){this._zipLengthSumList.push(this._totalFileCount),this._currentZipIndex++,this._currentFileCount=0}get(r){if(typeof r=="number"){let s=this._zipLengthSumList.findIndex((o,u)=>r<o);s===-1&&(s=this._zipLengthSumList.length);const l=this._zipLengthSumList[s-1]||0,a=r-l;return[s,a]}else{const s=this._pathBank[String(r)];if(s)return s}return null}getZipIndex(){return this._currentZipIndex}getIndex(){return this._totalFileCount}}function ds(i){return new Promise(r=>setTimeout(r,i))}function cs(i,r=0){const s=_(i);return Te(s,l=>{l!==void 0&&Le(()=>{setTimeout(()=>s.value=void 0,r)})},{immediate:!0}),s}let it;async function ps(i,r,s,l,a){let o="";const u=document.createElement("canvas"),d=u.getContext("2d");let g=new Et;const v=[g],y=new us,x=s.format,c=s.quality/100,h=[...x.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),f=i.length,z=s.maxZipSizeMB*1024*1024;let F=0,I=null,T="",k="",O=0,H=0,N=0,b=0,q=0,M=!1;it=$=>{const[Z,Q]=y.get($),ue=v[Z],se=ue.get(Q,x);a.convertedImageIndex=$,a.convertedImageName=ue.getPathByIndex(Q),a.convertedImageUrl=URL.createObjectURL(se),a.convertedImageSize=se.size;let de="",le=0,Ae="";const W=J[$];de=URL.createObjectURL(W),le=W.size,Ae=W.webkitRelativePath||W.name,a.convertedImageOrgUrl=de,a.convertedImageOrgSize=le,a.convertedImageOrgName=Ae};const J=[];for(const $ of i){if(l.value)break;const Z=$.name;let Q="";const ue=$.size,se=($.webkitRelativePath||$.relativePath||Z).replace(/^\//,""),de=document.createElement("img"),le={key:N++,core:-1,index:F++,path:se,command:"➡️start"};a.startedCount=F,a.logs.push(le),a.logs.length-1,o&&(URL.revokeObjectURL(o),o=""),o=URL.createObjectURL($),k=o,O=$.size,de.src=o;const Ae=await Ko(de).then(()=>!0).catch(()=>!1);if(!de.complete||!Ae||l.value){a.done++,a.failure++,le.command="❗failed";continue}const W=de.width,U=de.height;u.width=W,u.height=U,d.drawImage(de,0,0,W,U,0,0,W,U),le.command="🖼️imgload",le.width=W,le.height=U,le.size=$.size,a.thumbnail=de;const j=await new Promise(ae=>{const ge=Fe=>{I=Fe,ae(Fe)};u.toBlob(ge,x,c)});if(l.value)break;if(!j){a.failure++;continue}H=j.size,a.converted++,le.outputSize=H;let te="";if(q+H>=z){try{await g.wait(),te=await g.url()}catch{M=!0,alert("memory problem occurred");break}a.zips.push({url:te,size:q,count:b}),a.zippedTotalCount+=b,a.zippedTotalSize+=q,q=0,b=0,y.split(),g=new Et,v.push(g)}q+=H;const ne=se||Z;for(let ae=1;ae<255&&(Q=ne.replace(s.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+(ae>1?`(${ae})`:"")+"."+h,!!g.has(Q));ae++);a.done++;try{b++,g.add(Q,j)}catch{continue}y.increase(),J.push($),a.inputTotalSize+=ue,a.outputTotalSize+=H,a.ziplogs.push({fileId:$._id,storedPath:Q}),T=Q,le.zippedIndex=a.success,a.success++,le.command="✅completed",le.completed=!0,le.fileId=$._id,r.add($._id)}if(a.success>0)if(f===1)I&&(a.convertedImageIndex=0,a.convertedImageName=T.replace(/^.*\/(?=[^/]+$)/,"").replace(s.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+h,a.convertedImageUrl=URL.createObjectURL(I),a.convertedImageOrgUrl=k,a.convertedImageOrgSize=O);else try{if(M)throw new Error("terminated zipping process for memory problems");await g.wait();const $=await g.url();a.zips.push({url:$,count:b,size:q}),a.zippedTotalCount+=b,a.zippedTotalSize+=q}catch{}const re={value:!1},R=()=>{re.value=!0,v.forEach($=>$.clear()),v.length=0,J.length=0,it=null};let Ce=!1;return{callbackToClearConverter:R,callbackToGenerateFailedZips:async $=>{Ce||(Ce=!0,gs($,z,a,re))}}}function fs(i){it==null||it(i)}async function gs(i,r,s,l){let a=0,o=0,u=new Et;for(let d=0;d<i.length;d++){const g=i[d],v=(g.webkitRelativePath||g.name).replace(/^\//,"");if(l.value)return;try{await u.add(v,g)}catch{alert(`an error occurred during access to "${v}"`);break}if(o+=g.size,a++,s.failedFileZippedCount++,o>=r||d===i.length-1){await u.zip();const y=await u.url();s.failedZips.push({url:y,size:o,count:a}),u.clear(),o=0,a=0}}s.failedZipDone=!0}function Ko(i){if(typeof i.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((r,s)=>{i.onload=r,i.onerror=s})}const ms=["href","download","title"],vs='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',hs=we({__name:"thumbnail",props:{src:{},width:{},height:{},maxWidth:{default:100},maxHeight:{default:100},expand:{type:Boolean,default:!1},loading:{type:Boolean},fileName:{},allowNext:{type:Boolean},allowPrev:{type:Boolean},hidden:{type:Boolean}},emits:["load","error","next","prev"],setup(i,{expose:r,emit:s}){const{t:l}=De(),a=i,o=s,u=_();_();const d=_(!0),g=_(""),v=_(a.width||100),y=_(a.height||100),x=_(!1),c=zt({width:v.value+"px",height:y.value+"px",minWidth:"50px",minHeight:"50px"});qe(()=>{var k,O,H;(O=(k=u.value)==null?void 0:k.previewInstRef)==null||O.setPreviewSrc(vs),URL.revokeObjectURL((((H=u.value)==null?void 0:H.imageRef)||{}).src),u.value=null});const h=_(!0);ga(()=>{h.value=!1}),ma(()=>{h.value=!0}),Te(a,(k,O)=>{c.width=(a.width||100)+"px",c.height=(a.height||100)+"px"}),Te(()=>a.src,(k,O)=>{h.value&&F(k)},{immediate:!0}),r({download:I,openPreview:T,active:h});async function f(k){const O=k.target,H=O.naturalWidth,N=O.naturalHeight,{width:b,height:q}=Go({width:H,height:N},{width:a.maxWidth||100,height:a.maxHeight||100},a.expand);v.value=b,y.value=q,o("load",{src:O.src,width:H,height:N}),d.value=!1,await new Promise(M=>setTimeout(M,100)),!d.value&&(x.value=!0)}function z(k){const O=k.target;o("error",O.src)}async function F(k){d.value=!0,x.value=!1,g.value=k}function I(){const k=document.createElement("a");k.href=g.value,k.download=a.fileName,k.click()}function T(){var k;(k=u.value)==null||k.click()}return(k,O)=>{const H=cn,N=pn,b=Se,q=kt;return Ze((E(),K("div",null,[n(e(ke),null,{trigger:t(()=>[n(q,{show:e(d)||a.loading},{default:t(()=>[n(b,{justify:"center",align:"center",style:ce([e(c),{"line-height":"0px"}])},{default:t(()=>[Ze(w("a",{href:e(g),onClick:O[0]||(O[0]=et(()=>{},["left","prevent"])),target:"_blank",download:a.fileName,title:a.fileName},[n(Qe,{mode:"in-out"},{default:t(()=>[Ze(n(H,{ref_key:"nImageRef",ref:u,"show-toolbar-tooltip":"",onLoad:f,onError:z,src:e(g),width:e(v),height:e(y),style:{border:"1px solid silver"}},null,8,["src","width","height"]),[[We,e(x)]])]),_:1})],8,ms),[[We,!(e(d)||a.loading)]]),Ze(n(N,null,null,512),[[We,e(d)||a.loading]])]),_:1},8,["style"])]),_:1},8,["show"])]),default:t(()=>[A(" "+p(a.fileName),1)]),_:1})],512)),[[We,!k.hidden]])}}}),Be=(i,r)=>{const s=i.__vccOpts||i;for(const[l,a]of r)s[l]=a;return s},Jt=Be(hs,[["__scopeId","data-v-a62add3a"]]),_s=["href","download","title"],ws={class:"left-num"},ys={class:"right-num"},bs=["href","download","title"],zs={class:"left-num"},ks={class:"right-num"},xs=["href","download"],Ts=we({__name:"image-viewer",props:{url:{},originalUrl:{},name:{},originalName:{},size:{},originalSize:{},length:{},index:{},isSingle:{type:Boolean},variousInfo:{}},emits:["demand-image","delete-image","close"],setup(i,{expose:r,emit:s}){const l=Ke(Ve),a=i,o=s;r({download:U,cleanup:G,openPreview:P,isPreviewing(){return b.value},changeIndex(L){h.value=L}});const u=ut(),{t:d}=De();xt();const g=_(),v=_(),y=_(),x=tt("viewerItemContainer"),c=_(!0),h=_(Math.max(a.index,0)+1),f=_(1),z=_(1),F=_(""),I=_(""),T=_(1),k=_(1),O=_(!1),H=_(!1),N=_(!1),b=xe(()=>{var L,C;return(C=(L=y.value)==null?void 0:L.previewInstRef)==null?void 0:C.displayed}),q=xe(()=>{var L,C;return((C=(L=y==null?void 0:y.value)==null?void 0:L.previewInstRef)==null?void 0:C.previewSrc)===F.value}),M=xe(()=>h.value<a.length),J=xe(()=>h.value>1),re=_("viewer-item-init"),R=_(0),Ce=_(!0);_({width:"auto",height:"auto"});const ye=_(!1);Re(()=>{document.body.addEventListener("keydown",le),document.body.addEventListener("keydown",de),ue(h.value-1),se()}),qe(()=>{clearTimeout($),document.body.removeEventListener("keydown",le),document.body.removeEventListener("keydown",de),ye.value=!0}),mt(()=>{URL.revokeObjectURL(a.url),URL.revokeObjectURL(a.originalUrl)});let $=-1;Te(h,(L,C)=>{h.value<1||h.value>a.length||L===C||(clearTimeout($),L>C?re.value="viewer-item-next":re.value="viewer-item-prev",$=setTimeout(()=>{a.index!==h.value-1&&(R.value=c.value?R.value:~R.value,Ce.value=!1,ue(h.value-1))},50))});let Z="",Q="";Te(()=>a.url,()=>{var m,S;let L="";a.index===0&&c.value?(c.value=!1,h.value=1,L=a.url):a.index===h.value-1?(c.value=!1,O.value=!1,L=a.url):(URL.revokeObjectURL(a.url),URL.revokeObjectURL(a.originalUrl));const C=Z,Y=Q;if(URL.revokeObjectURL(C),URL.revokeObjectURL(Y),Z=a.url,Q=a.originalUrl,L){try{if((S=(m=y.value)==null?void 0:m.previewInstRef)!=null&&S.displayed){q.value?y.value.previewInstRef.setPreviewSrc(L):y.value.previewInstRef.setPreviewSrc(a.originalUrl);try{const V=y.value.previewInstRef.displayed;y.value.previewInstRef.handleAfterLeave(),y.value.previewInstRef.displayed=V}catch{}}}catch{}F.value=L,I.value=a.originalUrl}},{immediate:!0});function ue(L){O.value=!0,H.value=!1,N.value=!1,Le(()=>o("demand-image",L))}function se(){if(!l.IS_SP)return;let L=x.value.$el,C=0,Y=0,m=0,S=0,V=0;const he=ve=>{C=ve.touches[0].pageX,Y=ve.touches[0].pageY,V=Date.now()};L.addEventListener("touchstart",he);const me=ve=>{m=ve.touches[0].pageX,S=ve.touches[0].pageY,ie()};window.addEventListener("touchmove",me);const D=()=>{ie();const ve=m-C,$e=Math.abs(ve),Xe=S-Y,_e=Math.abs(Xe);$e<_e||$e<30||te(ve>0?-1:1)};window.addEventListener("touchend",D);const ie=()=>{const ve=Date.now();ve-V>500&&(C=m,Y=S),V=ve};qe(()=>{L.removeEventListener("touchstart",he),window.removeEventListener("touchmove",me),window.removeEventListener("touchend",D),L=null})}function de(L){var C,Y,m,S;if(L.key==="Escape")try{(Y=(C=y.value)==null?void 0:C.previewInstRef)!=null&&Y.displayed&&(L.stopPropagation(),(S=(m=y.value)==null?void 0:m.previewInstRef)==null||S.toggleShow(!1))}catch{}}function le(L){switch(L.code){case"ArrowRight":te(1);break;case"ArrowLeft":te(-1);break;case"Home":h.value=1;break;case"End":h.value=a.length;break;case"Space":case"Enter":case"NumpadEnter":if(!b.value)return;ae();break;case"ArrowUp":case"ArrowDown":default:return}L.stopPropagation(),L.preventDefault()}function Ae({width:L,height:C}){f.value=L,z.value=C,H.value=!0}function W({width:L,height:C}){T.value=L,k.value=C,N.value=!0}function U(){q.value?g.value.download():v.value.download()}async function j(L){try{const C=await fetch(L).then(Y=>Y.blob()).then(Y=>new Promise(m=>{const S=new FileReader;S.onload=m,S.readAsDataURL(Y)})).then(Y=>Y.target.result);navigator.clipboard.writeText(C),u.info({title:d("copiedDataURLDialogTitle"),content:()=>X("div",[X("div",d("copiedDataURLMessage"))]),positiveText:"OK"})}catch{u.error({title:"failed to copy Data URL",content:"could not copy Data URL",positiveText:"OK"})}}function te(L){L>0?h.value=Math.min(a.length,h.value+L)|0:L<0&&(h.value=Math.max(1,h.value+L)|0)}let ne="";const ae=()=>{var C,Y,m,S;ne=(m=window.getComputedStyle((Y=(C=y==null?void 0:y.value)==null?void 0:C.previewInstRef)==null?void 0:Y.previewRef))==null?void 0:m.transform;const L=q.value;(S=y==null?void 0:y.value)==null||S.next(),Le(()=>{var V;q.value===L&&((V=y==null?void 0:y.value)==null||V.next())})};function ge(){try{Le(()=>y.value.previewInstRef.previewRef.style.transform=ne)}catch{}}function Fe({nodes:L}){const C=X(Ut,{color:q.value?"green":"gray",offset:[-20,-12],value:q.value?d("status.Converted"):d("status.Original")},()=>X(Ee,{round:!0,onClick(){ae()},textColor:"white",size:"small",style:{marginLeft:"4px"}},{icon:()=>X(q.value?wa:ya)}));L.next=X(Ee,{onClick(){te(1)},disabled:!M.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>X(qt)}),L.prev=X(Ee,{onClick(){te(-1)},disabled:!J.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>X(ba)});try{const Y=L.download.children;Y.default=()=>d("save");const m=Y.trigger();m.props.onClick=U,Y.trigger=()=>m}catch{}return pe(),[C,...Object.values(L)]}const Ue="#pathbox-"+String(Math.random()).substring(2);let be;function pe(){var L,C,Y;try{if(be=(Y=(C=(L=y.value)==null?void 0:L.previewInstRef)==null?void 0:C.previewWrapperRef)==null?void 0:Y.parentNode,!be||be.querySelector(Ue))return;let m=X("div",{id:Ue,onMousedown:S=>{S.stopPropagation()},className:"__preview-injected-pathbox"+(q.value?" converted":"")},[X("div",`${String(h.value).padStart(String(a.length).length,"0")}/${String(a.length).padStart(String(a.length).length,"0")}`),X("div",He(q.value?a.size:a.originalSize,0)),X("div",q.value?a.name:a.originalName)]);Gt(m,be),m=null}catch{}}qe(()=>{be&&(Gt(null,be),be=null)});function P(){g.value.openPreview()}function G(){}return(L,C)=>{const Y=Ie,m=Se,S=fn,V=Ye,he=Tt,me=va;return E(),oe(m,{justify:"center",align:"stretch",vertical:"",style:ce([{visibility:c.value?"hidden":"visible"},{overflow:"visible"}]),class:"body",ref:"body"},{default:t(()=>[n(me,{ref_key:"nImageGroupRef",ref:y,"show-toolbar-tooltip":"","render-toolbar":Fe,onPreviewNext:ge},{default:t(()=>[n(m,{wrap:!1,align:"center",justify:"space-between",style:{overflow:"visible"}},{default:t(()=>[n(e(Ee),{onClick:C[0]||(C[0]=D=>te(-1)),bordered:!1,disabled:!e(J),class:nt({"thumb-arrow":!0,pale:!e(J)}),title:L.$t("Prev")},{icon:t(()=>[n(Y,{size:"30"},{default:t(()=>[n(e(ha))]),_:1})]),_:1},8,["disabled","class","title"]),n(m,{justify:"center",ref_key:"viewerItemContainer",ref:x,class:"viewer-item-container",style:{width:"100%"}},{default:t(()=>[n(Qe,{name:re.value},{default:t(()=>[(E(),oe(m,{vertical:"",key:R.value},{default:t(()=>[n(m,{align:"center",wrap:!1},{default:t(()=>[n(m,{vertical:""},{default:t(()=>[n(m,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(m,{align:"center",justify:"center",vertical:"",class:"original-thumb"},{default:t(()=>[w("a",{href:L.originalUrl,onClick:C[4]||(C[4]=et(D=>{v.value.openPreview()},["prevent"])),download:L.originalName,title:L.originalName,class:"imglink"},[n(m,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(Jt,{ref:D=>{D!=null&&D.active&&(v.value=D)},src:I.value,width:1,"max-width":1,"max-height":1,loading:O.value,"file-name":L.originalName,"allow-next":h.value<a.length,"allow-prev":h.value>1,onLoad:W,onNext:C[1]||(C[1]=D=>te(1)),onPrev:C[2]||(C[2]=D=>te(-1)),hidden:!0},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(m,{vertical:"",align:"center"},{default:t(()=>[n(m,{class:"imglink-label"},{default:t(()=>[A(p(e(d)("status.Original")),1)]),_:1}),n(m,{justify:"center",class:"img-size",wrap:!1,size:2},{default:t(()=>[w("span",ws,p(N.value?T.value:"?"),1),C[11]||(C[11]=A(" × ")),w("span",ys,p(N.value?k.value:"?"),1)]),_:1,__:[11]}),n(m,{justify:"center"},{default:t(()=>[C[3]||(Vt(-1,!0),(C[3]=n(m,null,{default:t(()=>[A(p(N.value?e(He)(a.originalSize,0):"?"),1)]),_:1})).cacheIndex=3,Vt(1),C[3])]),_:1})]),_:1})]),_:1})],8,_s)]),_:1}),n(m,{vertical:"",align:"center",class:"original-thumb"},{default:t(()=>[n(Y,{size:"20",color:"silver",component:e(qt)},null,8,["component"])]),_:1}),w("a",{href:F.value,onClick:C[5]||(C[5]=et(D=>P(),["prevent"])),download:a.name,title:a.name,class:"imglink"},[n(m,{vertical:"",align:"center",justify:"center"},{default:t(()=>[n(m,{class:"imglink-label"},{default:t(()=>[A(p(e(d)("status.Converted")),1)]),_:1}),n(m,{vertical:"",align:"center",justify:"center",size:0},{default:t(()=>[n(m,{justify:"center"},{default:t(()=>{var D;return[n(m,{wrap:!1,style:ce((D=a.variousInfo)!=null&&D.shrinked?{color:"blue"}:{}),class:"img-size",size:2},{default:t(()=>[w("span",zs,p(H.value?f.value:"?"),1),C[12]||(C[12]=A(" × ")),w("span",ks,p(H.value?z.value:"?"),1)]),_:1,__:[12]},8,["style"])]}),_:1})]),_:1}),n(m,{justify:"center"},{default:t(()=>[A(p(H.value?e(He)(a.size,0):"?"),1)]),_:1})]),_:1})],8,bs)]),_:1}),n(m,{ref:"fileNameContainer",justify:"center",align:"center",class:"pathbox",title:a.name,style:{overflow:"hidden"}},{default:t(()=>[n(S,{"x-scrollable":!0,trigger:"hover",style:{"text-align":"center","font-size":"smaller",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},{default:t(()=>[A(p(H.value?a.name:"?"),1)]),_:1})]),_:1},8,["title"])]),_:1}),n(m,{vertical:"",style:{overflow:"visible"}},{default:t(()=>[n(Jt,{ref:D=>{D!=null&&D.active&&(g.value=D)},src:F.value,width:142,"max-width":140,"max-height":100,loading:O.value,"file-name":a.name,"allow-next":h.value<a.length,"allow-prev":h.value>1,onLoad:Ae,onNext:C[6]||(C[6]=D=>te(1)),onPrev:C[7]||(C[7]=D=>te(-1))},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(m,{justify:"center",align:"center",wrap:!1},{default:t(()=>[n(V,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[w("a",{href:a.url,ref:"saveImg",target:"_blank",download:a.name,style:{"line-height":"1em"}},[n(e(Ee),{disabled:!H.value,round:"",size:"tiny"},{default:t(()=>[A(p(L.$t("save")),1)]),_:1},8,["disabled"])],8,xs)]),default:t(()=>[A(" "+p(L.$t("save")),1)]),_:1}),n(V,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(e(Ee),{disabled:!H.value,onClick:C[8]||(C[8]=D=>j(a.url)),round:"",size:"tiny"},{default:t(()=>C[13]||(C[13]=[A("DataURL")])),_:1,__:[13]},8,["disabled"])]),default:t(()=>[A(" "+p(L.$t("convertedImageDataUrlTooltip")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1},8,["name"])]),_:1},512),n(e(Ee),{bordered:!1,onClick:C[9]||(C[9]=D=>te(1)),disabled:!e(M),class:nt({"thumb-arrow":!0,next:!0,pale:!e(M)}),title:L.$t("Next")},{icon:t(()=>[n(Y,{size:"30"},{default:t(()=>[n(e(_a))]),_:1})]),_:1},8,["disabled","class","title"])]),_:1}),L.isSingle?fe("",!0):(E(),oe(m,{key:0,justify:"center",align:"center",wrap:!1,size:4},{default:t(()=>[n(he,{value:h.value,"onUpdate:value":C[10]||(C[10]=D=>h.value=D),tooltip:!1,step:1,min:1,max:a.length,keyboard:!1,class:"index-slider"},null,8,["value","max"]),n(m,{class:"index",align:"center",justify:"center",wrap:!1,size:3},{default:t(()=>[n(m,null,{default:t(()=>[A(p(e(d)("status.index"))+":",1)]),_:1}),n(m,{justify:"end",align:"center",class:"counter"},{default:t(()=>[A(p(h.value),1)]),_:1}),n(m,null,{default:t(()=>C[14]||(C[14]=[A("/")])),_:1,__:[14]}),n(m,{justify:"start",align:"center",class:"counter"},{default:t(()=>[A(p(a.length),1)]),_:1})]),_:1})]),_:1}))]),_:1},512)]),_:1},8,["style"])}}}),Is=Be(Ts,[["__scopeId","data-v-1394ec38"]]),Ss={key:0},As={style:{}},Ls={key:1,style:{width:"106px",height:"80px",opacity:"0.15",border:"1px solid gray"}},Cs=we({__name:"status.progress",props:{processing:{type:Boolean},successPerc:{},elapsedTime:{},threads:{},fileType:{},shrink:{},zipSize:{},inputTotalSize:{},outputTotalSize:{},rateColor:{},difColor:{},totalSizeDifStr:{},thumbnail:{},opened:{type:Boolean}},setup(i){const r=i,s=_(null),l={W:110,H:80};let a;return Te(()=>[r.thumbnail,r.opened],()=>{if(!r.thumbnail||!r.opened||r.thumbnail===a||!s.value)return;const{width:o,height:u}=Go(r.thumbnail,{width:l.W,height:l.H});s.value.width=o,s.value.height=u,s.value.style.width=o+"px",s.value.style.height=u+"px",r.thumbnail instanceof HTMLImageElement?s.value.getContext("2d").drawImage(r.thumbnail,0,0,o,u):(s.value.getContext("bitmaprenderer").transferFromImageBitmap(r.thumbnail),a=r.thumbnail,r.thumbnail.close())}),(o,u)=>{const d=kt,g=Se,v=za,y=dt;return E(),oe(y,{name:"progress",style:{"white-space":"nowrap"}},{header:t(({collapsed:x})=>[n(g,{align:"center"},{default:t(()=>[A(p(o.$t("status.Progress"))+" ",1),x?(E(),K(Oe,{key:0},[A(" ("+p(o.successPerc|0)+"%) ",1)],64)):fe("",!0),Ze(n(d,{size:16},null,512),[[We,o.processing&&!r.opened]])]),_:2},1024)]),default:t(()=>[n(g,{justify:"center",align:"center",size:0,wrap:!1,style:{"white-space":"nowrap","margin-top":"-1em","padding-bottom":"5px"}},{default:t(()=>[u[0]||(u[0]=w("div",{class:"grow"},null,-1)),n(g,{justify:"center",class:"grow",wrap:!1,style:{"z-index":"1"}},{default:t(()=>[n(g,{vertical:"",justify:"center",class:"left-column"},{default:t(()=>[n(v,{"tabular-nums":"",label:o.$t("status.elapsedTime")},{default:t(()=>[n(g,null,{default:t(()=>[A(p(o.elapsedTime),1)]),_:1})]),_:1},8,["label"]),n(v,{"tabular-nums":"",label:o.$t("status.multiThreading")},{default:t(()=>[n(g,{style:ce({color:o.threads?"":"red",fontSize:"0.7rem"})},{default:t(()=>[A(p(o.threads?o.$rt("{n} @:threads",o.threads):o.$t("disabled")),1)]),_:1},8,["style"])]),_:1},8,["label"]),n(v,{"tabular-nums":"",label:o.$t("status.outputSettings")},{default:t(()=>[n(g,{vertical:"",justify:"end",style:{"font-size":"0.6rem","line-height":"0.6rem"}},{default:t(()=>[w("div",null,p(o.$t("settings.imageType"))+": "+p(o.fileType),1),o.shrink?(E(),K("div",Ss,[A(p(o.$t("status.Shrinking"))+": ",1),w("span",As,p(o.shrink[0])+"×"+p(o.shrink[1]),1)])):fe("",!0),w("div",null,"Zip: "+p(o.zipSize)+"MB",1)]),_:1})]),_:1},8,["label"])]),_:1}),rn(o.$slots,"center",{},void 0,!0),n(g,{vertical:"",style:{height:"100%"},justify:"center",class:"right-column"},{default:t(()=>[n(v,{"tabular-nums":"",label:o.$t("status.inputSize")},{default:t(()=>[n(g,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[A(p((o.inputTotalSize/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(v,{"tabular-nums":"",label:o.$t("status.outputSize")},{default:t(()=>[n(g,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[A(p((o.outputTotalSize/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(v,{"tabular-nums":"",label:o.$t("status.outInRate")},{default:t(()=>[n(g,{vertical:"",align:"end",justify:"start",style:{"font-size":"0.8em","font-family":"v-mono","line-height":"50%"}},{default:t(()=>[w("span",{style:ce({color:o.rateColor,fontSize:"larger"})},"× "+p((o.outputTotalSize/o.inputTotalSize||1).toFixed(2)),5),w("span",{style:ce({color:o.difColor})},"("+p(o.totalSizeDifStr)+")",5)]),_:1})]),_:1},8,["label"])]),_:1})]),_:3}),n(g,{class:"thumb-container",align:"center",style:{position:"relative"}},{default:t(()=>[n(g,{justify:"center",align:"center",class:"grow thumbnail",style:ce({width:l.W+"px",height:l.H+"px"})},{default:t(()=>[n(Qe,{name:"fade",mode:"out-in"},{default:t(()=>[o.processing?(E(),K("canvas",{key:0,ref_key:"thumbcanvas",ref:s,width:"106",height:"80",class:"thumb-canvas"},null,512)):(E(),K("div",Ls))]),_:1})]),_:1},8,["style"])]),_:1})]),_:3,__:[0]})]),_:3})}}}),$s=Be(Cs,[["__scopeId","data-v-eecf6b58"]]),Es={class:"status-table"},Fs={class:"started"},Ps={class:"mini-counter"},Os={class:"failure"},Us={class:"mini-counter"},Ms={colspan:"2"},Rs={class:"completed"},Ns={class:"main-counter"},js={class:"total"},Ds={class:"main-counter"},Bs=we({__name:"status.progress-center",props:{processing:{type:Boolean},interval:{},statusColor:{},success:{},successTo:{},successFrom:{},index:{},length:{},failure:{},retried:{},successPercTo:{},successPercFrom:{}},setup(i){const r=i,s=xt(),l=_(s.value.successColor),a=_(!1);return Te(()=>r.processing,o=>{o||(r.success===r.length?a.value=!0:l.value=s.value.errorColor)}),(o,u)=>{const d=Ye,g=Ie,v=xa,y=Se,x=gn;return E(),oe(x,{type:"multiple-circle","stroke-width":2,percentage:[o.successTo/o.length*100|0,o.index/o.length*100|0],color:[e(s).successColor,o.statusColor],"rail-style":[{stroke:e(l),opacity:.3}],style:{width:"12em"}},{default:t(()=>[n(y,{vertical:"",align:"center",justify:"center",size:0,style:{"white-space":"nowrap"},wrap:!1,"wrap-item":!1},{default:t(()=>[w("table",Es,[w("tbody",null,[w("tr",Fs,[w("td",null,p(o.$t("status.started"))+":",1),w("td",Ps,[n(d,{trigger:"hover",style:ce({color:e(s).infoColor}),placement:"left"},{trigger:t(()=>[w("span",{style:ce({color:e(s).infoColor})},p(o.index.toLocaleString("en-us")),5)]),default:t(()=>[A(" "+p(o.$t("status.progressStarted"))+" ("+p(o.index.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])])]),w("tr",Os,[w("td",null,p(o.$t("status.failure"))+":",1),w("td",Us,[n(d,{trigger:"hover",style:ce({color:e(s).errorColor}),placement:"left"},{trigger:t(()=>[w("span",{style:ce({color:e(s).errorColor})},p(o.failure.toLocaleString("en-us")),5)]),default:t(()=>[A(" "+p(o.$t("status.progressErrors"))+" ("+p(o.failure.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"]),o.retried>0?(E(),oe(d,{key:0,trigger:"hover",style:ce({color:e(s).warningColor}),placement:"left"},{trigger:t(()=>[w("span",{style:ce({color:e(s).warningColor})}," ("+p(o.retried.toLocaleString("en-us"))+") ",5)]),default:t(()=>[A(" "+p(o.$t("status.progressRetries"))+" ("+p(o.retried.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):fe("",!0)])]),w("tr",null,[w("td",Ms,[n(y,{size:0,align:"center",justify:"center",style:ce({color:o.processing?o.statusColor:e(l)}),wrap:!1,class:"percent"},{default:t(()=>[e(a)?(E(),oe(g,{key:0,component:e(ka)},null,8,["component"])):fe("",!0),n(v,{duration:o.interval*3|0,from:o.successPercFrom|0,to:o.successPercTo|0,active:!0},null,8,["duration","from","to"]),u[0]||(u[0]=A("% "))]),_:1,__:[0]},8,["style"])])]),w("tr",Rs,[w("td",null,p(o.$t("status.success"))+":",1),w("td",Ns,[n(d,{trigger:"hover",duration:0,delay:0,style:ce({color:e(s).successColor}),placement:"bottom"},{trigger:t(()=>[w("span",{style:ce({color:e(s).successColor})},[n(v,{duration:o.interval*3|0,from:o.successFrom,to:o.successTo,active:!0,"show-separator":!0},null,8,["duration","from","to"])],4)]),default:t(()=>[A(" "+p(o.$t("status.progressSuccess"))+" ("+p(o.successTo.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])])]),w("tr",js,[w("td",null,p(o.$t("status.all"))+":",1),w("td",Ds,[n(d,{trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:t(()=>[A(p(o.length.toLocaleString("en-us")),1)]),default:t(()=>[A(" "+p(o.$t("status.progressTotal"))+" ("+p(o.length.toLocaleString("en-us"))+") ",1)]),_:1})])])])])]),_:1})]),_:1},8,["percentage","color","rail-style"])}}}),Zs={key:0,class:"log-table",ref:"table"},Ws={class:"log-tr label"},Hs=["title"],Vs={style:{"min-width":"7em"},class:"log-th"},qs={style:{"padding-left":"2em"},class:"log-th"},Gs=["data-index-loglist"],Ks={class:"log-td"},Qs={class:"log-td"},Ys={class:"log-td"},Xs={class:"log-td"},Js={key:0,class:"log-td log-extra",style:{"padding-left":"0.5em"}},ei={key:0},ti={key:1,style:{color:"blue"}},ni={key:1},en=2,tn=3e3,Ct=80,oi=100,ai=we({__name:"status.log",props:ot({processing:{type:Boolean},opened:{type:Boolean},previewCollapsed:{type:Boolean},logs:{},imageIndex:{}},{expanded:{type:Boolean,required:!1},expandedModifiers:{},"auto-scroll":{type:Boolean,required:!1},"auto-scrollModifiers":{},order:{required:!1,default:"processed"},orderModifiers:{}}),emits:ot(["open-preview","change-index"],["update:expanded","update:auto-scroll","update:order"]),setup(i,{emit:r}){const{t:s}=De(),l=i,a=Pe(i,"expanded"),o=Pe(i,"auto-scroll"),u=r;tt("table");const d=tt("tbody"),g=_(),v=_(null),y=_(40),x=xe(()=>a.value?y.value:Ct),c=_(Ct),h=xe(()=>{let m=l.logs;switch(k.value){case"success":m=m.filter(S=>S.completed);break;case"error":m=m.filter(S=>!S.completed);break}return m}),f=cs(!1),F=_([{type:"group",label:()=>s("status.sort"),key:"sort",children:[{label:()=>s("status.sortByStart"),value:"processed"},{label:()=>s("status.sortByCompletion"),value:"zipped"},{label:()=>s("status.sortByName"),value:"name"},{label:()=>s("status.sortBySize"),value:"size"},{label:()=>s("status.sortByOutputSize"),value:"outputsize"},{label:()=>s("status.sortByStatus"),value:"status"}]}]),I=Pe(i,"order");Te(I,()=>{Fe()});const T=[{label:()=>s("status.showAll"),value:""},{label:()=>s("status.showOnlySuccess"),value:"success"},{label:()=>s("status.showOnlyError"),value:"error"}],k=_(T[0].value);let O;Re(()=>{O=Sa(),J(),window.addEventListener("resize",()=>J());const m=new ResizeObserver(()=>J());m.observe(O.parent.parent.vnode.el),qe(()=>{window.removeEventListener("resize",()=>J()),m.disconnect()})}),qe(()=>{clearTimeout(b),clearTimeout(le),clearTimeout(R)});let H=0;Te(()=>l.imageIndex,m=>N(m));async function N(m){var D;const S=m||l.imageIndex;let V=h.value.findIndex(ie=>ie.zippedIndex===S);V===-1&&(V=S);const he=V<=Q.value,me=V>Q.value+ue.value;if(he||me){const ie=V*se.value-(me?x.value:0);(D=g.value)==null||D.scrollTo({behavior:"instant",top:ie,left:P}),await Le(),j(!0),await Le()}Le(()=>{var ve,$e;let ie=v.value;ie&&(H>V&&(ie=ie.previousSibling||ie,ie instanceof HTMLElement||((ve=g.value)==null||ve.scrollTo(P,0),ie=null)),($e=ie==null?void 0:ie.scrollIntoView)==null||$e.call(ie,{behavior:"instant",block:"nearest"}),H=V)})}Te(()=>l.opened,m=>{Le(()=>{m&&(N(),j())})});let b;const q=_(document.documentElement.clientHeight),M=_(100);function J(){clearTimeout(b),b=setTimeout(()=>{if(!l.opened||!g.value)return;const m=g.value.$parent.$el.offsetHeight,S=window.innerHeight-O.parent.parent.parent.parent.parent.vnode.el.offsetHeight-8,V=Math.min(se.value*Math.max(5,l.logs.length+2),Math.max(200,m+S));q.value=document.documentElement.clientHeight,M.value=Math.min(se.value*Math.max(5,l.logs.length),Math.max(Ct,V)),l.opened&&(y.value=Math.max(V,c.value))},100)}function re(){ye(!0),J(),f.value=!0}let R=0,Ce=!1;function ye(m=!1){if(!Ce){if(R){Ce=!0;return}Le(()=>{!m&&!o.value||(g.value.scrollTo({behavior:"instant",top:l.logs.length*50,left:P}),R=window.setTimeout(()=>{R=0,Ce&&(Ce=!1,ye())},oi))})}}const $=_({height:"0px"}),Z=_({height:"0px"}),Q=_(0),ue=xe(()=>x.value/se.value+en*2|0),se=_(15);let de=0,le=0,Ae=0,W=-999,U=-1;function j(m){const S=Date.now();if(m!==!0){if(le)return;if(S-Ae<30){le=window.setTimeout(()=>{le=0,j()},30-(S-Ae));return}}Ae=S,de||(de=d.value.rows[1].offsetHeight,se.value=de);const V=h.value.length,me=g.value.scrollbarInstRef.containerRef.scrollTop;if(!m&&V===U&&Math.abs(me-W)<se.value*.5)return;W=me,U=V;const D=Math.max(0,(me/se.value|0)-en);Q.value=D,$.value.height=D*se.value+"px",Z.value.height=Math.max(0,V-(D+ue.value))*se.value+"px"}function te(){var m;(m=g.value)==null||m.scrollTo(0,0),j()}Te(()=>l.logs,()=>{l.opened&&(Le(j),o.value&&ye(),ge())}),Te(()=>l.opened,m=>{m&&j()});let ne=0,ae=0;function ge(){if(I.value==="processed"||!I.value)return;const m=Date.now();if(m-ae<tn){if(ne)return;ne=window.setTimeout(ge,tn-(m-ae));return}ne=0,ae=m,Fe()}function Fe(){switch(I.value){case"zipped":l.logs.sort((m,S)=>m.zippedIndex-S.zippedIndex);break;case"status":l.logs.sort((m,S)=>m.command>S.command?1:-1);break;case"name":l.logs.sort((m,S)=>m.path>S.path?1:-1);break;case"size":l.logs.sort((m,S)=>m.size-S.size);break;case"outputsize":l.logs.sort((m,S)=>m.outputSize-S.outputSize);break;case"processed":default:l.logs.sort((m,S)=>m.index-S.index);break}}function Ue(m){const S=l.logs,V=S.findIndex($e=>$e.zippedIndex===l.imageIndex);let he=0,me=1;switch(m.code){case"ArrowUp":he=-1;break;case"ArrowDown":he=1;break;case"PageUp":he=-1,me=x.value/se.value-1|0;break;case"PageDown":he=1,me=x.value/se.value-1|0;break;case"Enter":case"NumpadEnter":if(V>=0&&l.previewCollapsed){Le(()=>u("open-preview")),m.stopPropagation(),m.preventDefault();return}break;default:return}let D=V,ie=-1;const ve=S.length;do{if(D+=he,D<0||D>ve-1||D===V)break;if(S[D].completed){if(ie=D,--me>0)continue;break}}while(!0);if(ie>=0){const $e=S[ie];u("change-index",!0,$e.path,$e.fileId,$e.zippedIndex),m.preventDefault()}}let be=-1,pe=-1,P=0,G=!1;function L(m){var he,me;if(j(),G){G=!1;return}const{scrollLeft:S=0,scrollTop:V=0}=(me=(he=g.value)==null?void 0:he.scrollbarInstRef)==null?void 0:me.containerRef;(S!==be||be<0)&&(V===pe||pe<0)&&(P=S),be=S,pe=V,Le(()=>{var ie,ve;G=!0;const D=(ve=(ie=g.value)==null?void 0:ie.scrollbarInstRef)==null?void 0:ve.containerRef;D&&(D.scrollLeft=P)})}function C(m){o.value=!1}function Y(m,S){var $e,Xe;const he=(Xe=($e=m.target.closest("tr"))==null?void 0:$e.dataset)==null?void 0:Xe.indexLoglist;if(!/^\d+$/.test(he))return;const{completed:me,path:D,fileId:ie,zippedIndex:ve}=h.value[he];me&&(l.imageIndex!==ve&&u("change-index",me,D,ie,ve),S&&u("open-preview"))}return(m,S)=>{const V=Se,he=Ie,me=It,D=mn,ie=ke,ve=Tt,$e=Ye,Xe=dt;return E(),oe(Xe,{name:"log",style:{"white-space":"nowrap"}},{header:t(()=>[n(V,{align:"center",wrap:!1},{default:t(()=>[A(p(m.$t("status.Log")),1)]),_:1})]),"header-extra":t(()=>[Ze(n(V,{align:"center",justify:"end",wrap:!0,style:{"margin-top":"0.2em","margin-left":"0.5em"}},{default:t(()=>[n(me,{value:I.value,"onUpdate:value":[S[0]||(S[0]=_e=>I.value=_e),Fe],options:e(F),style:{width:"auto"},"consistent-menu-width":!1,"show-on-focus":!1,size:"tiny"},{arrow:t(()=>[n(he,{component:e(Ta)},null,8,["component"])]),_:1},8,["value","options"]),n(me,{value:e(k),"onUpdate:value":[S[1]||(S[1]=_e=>Ne(k)?k.value=_e:null),S[2]||(S[2]=_e=>te())],options:T,placeholder:m.$t("status.filterLogSelect"),size:"tiny",style:{width:"auto"},"consistent-menu-width":!1,"show-on-focus":!1},{arrow:t(()=>[n(he,{component:e(Ia)},null,8,["component"])]),_:1},8,["value","placeholder"]),n(D,{key:"b",checked:o.value,"onUpdate:checked":[S[3]||(S[3]=_e=>o.value=_e),S[4]||(S[4]=_e=>_e&&ye(!0))],size:"small",style:{"font-size":"0.9em"}},{default:t(()=>[A(p(m.$t("status.autoScroll")),1)]),_:1},8,["checked"]),n($e,{trigger:"hover",show:e(f),disabled:!a.value,placement:"top",delay:0,duration:1e3},{trigger:t(()=>[n(ie,{style:{"max-width":"30em"},disabled:!0},{trigger:t(()=>[n(D,{size:"small",checked:a.value,"onUpdate:checked":[S[5]||(S[5]=_e=>a.value=_e),re],style:{"font-size":"0.9em"}},{default:t(()=>[A(p(m.$t("status.expandLog")),1)]),_:1},8,["checked"])]),default:t(()=>[A(p(m.$t("status.expandLog")),1)]),_:1})]),default:t(()=>[n(V,{wrap:!1,align:"center",style:{"font-size":"0.8em"}},{default:t(()=>[n(ve,{value:e(c),"onUpdate:value":S[6]||(S[6]=_e=>Ne(c)?c.value=_e:null),onUpdateValue:S[7]||(S[7]=_e=>J()),disabled:!a.value,"format-tooltip":_e=>`Log size: ${_e}`,tooltip:!0,step:1,min:e(M),max:e(q),style:{"z-index":"3",width:"100px"}},null,8,["value","disabled","format-tooltip","min","max"])]),_:1})]),_:1},8,["show","disabled"])]),_:1},512),[[We,l.opened]])]),default:t(()=>[n(V,{wrap:!1,align:"stretch",class:nt({"log-container":1,"expand-log":a.value}),style:ce({height:e(x)+"px"}),onKeydown:Ue,tabindex:"-1"},{default:t(()=>[n(e(fn),{ref_key:"scrollref",ref:g,distance:10,"x-scrollable":!0,onMousedownCapture:C,onWheel:S[9]||(S[9]=_e=>o.value=!1),onScroll:L,load:"handleLogLoad",trigger:"none",style:ce([{"z-index":"2","padding-right":"10px",height:"100%"},{height:e(x)+"px"}]),size:50},{default:t(()=>[l.opened?(E(),K("table",Zs,[w("thead",null,[w("tr",Ws,[w("th",{class:"log-th",title:m.$t("status.table.core")},"th",8,Hs),S[10]||(S[10]=w("th",{class:"log-th"},"no.",-1)),w("th",Vs,p(m.$t("status.table.status")),1),w("th",qs,p(m.$t("status.table.details")),1),S[11]||(S[11]=w("th",{class:"log-th"},"size",-1))])]),w("tbody",{ref:"tbody",onClick:Y,onDblclick:S[8]||(S[8]=_e=>Y(_e,!0))},[w("tr",{style:ce(e($))},null,4),(E(!0),K(Oe,null,rt(e(h).slice(e(Q),e(Q)+e(ue)),({index:_e,key:Yo,command:Xo,path:Jo,core:Dt,zippedIndex:Bt,completed:ea,fileId:ur,shrinked:ta,width:Zt,height:na,outputWidth:oa,outputHeight:aa,size:la,outputSize:Wt},Ht)=>(E(),K("tr",{key:Yo,class:nt({"log-tr":1,completed:ea,selected:m.imageIndex===Bt,stripe:(e(Q)+Ht)%2}),ref_for:!0,ref:sa=>{m.imageIndex===Bt&&(v.value=sa)},"data-index-loglist":e(Q)+Ht},[w("td",Ks,p(Dt>=0?Dt+1:"-"),1),w("td",Qs,p(_e+1),1),w("td",Ys,p(Xo),1),w("td",Xs,p(Jo),1),Zt?(E(),K("td",Js,[A(p(`[${Zt}×${na}] (${e(He)(la,0)})`)+" ",1),Wt?(E(),K("span",ei,[S[12]||(S[12]=A(" → ")),w("span",null," ("+p(e(He)(Wt,0))+") ",1)])):fe("",!0),ta?(E(),K("span",ti,p(` [${oa}×${aa}]`),1)):fe("",!0)])):(E(),K("td",ni))],10,Gs))),128)),w("tr",{style:ce(e(Z))},null,4)],544)],512)):fe("",!0),S[13]||(S[13]=w("div",{style:{height:"1em"}},null,-1))]),_:1,__:[13]},8,["style"])]),_:1},8,["class","style"])]),_:1})}}}),li={class:"container"},si={__name:"zipicon",setup(i){return(r,s)=>(E(),K("span",li,[n(e(Ie),null,{default:t(()=>[n(e(Ft))]),_:1}),s[0]||(s[0]=w("span",{class:"text"},"ZIP",-1))]))}},ii=Be(si,[["__scopeId","data-v-8b8df2f0"]]),ri=["innerHTML"],ui={style:{margin:"1px"}},di=["href","download","onClick"],ci={key:0,style:{position:"relative"}},pi=["href","download"],fi=["href","download"],gi={key:0,style:{margin:"1px"}},mi=["href","download","onClick"],vi=we({__name:"status.result",props:{processing:{type:Boolean},listLength:{},zippingFlag:{type:Boolean},converted:{},success:{},zippedTotalCount:{},zippedTotalSize:{},baseZipName:{},zips:{},unconvertedListText:{},unconvertedFileCount:{},unconvertedTotalSize:{},failedZips:{},failedZipDone:{type:Boolean},failedToCreateFailedZip:{type:Boolean},failedFileZippedCount:{},imgUrl:{},imgName:{},type:{}},emits:["all-zips-clicked","demand-zip-errors"],setup(i,{emit:r}){const s=ut(),{t:l}=De(),a=xt(),o=i,u=r,d=_(!1),g=_([]),v=_([]),y=_(void 0),x=xe(()=>[{key:"open",label:l("status.openFailedList"),icon:()=>X(Ie,()=>X(vn)),onSelect(){f()}},{key:"download",label:l("status.saveFailedList"),icon:()=>X(Ie,()=>X(Aa)),onSelect(){f(!0)}},{key:"zip",label:`${l("status.zipFailedList")}`+(o.failedZipDone?`(✔${l("status.done")})`:""),icon:()=>X(kt,{show:d.value&&!o.failedZipDone,size:"small"},()=>X(Ie,()=>X(Ft))),disabled:d.value,onSelect(z){return d.value=!0,u("demand-zip-errors"),!1}}]);Te([()=>o.zips.length,()=>o.failedZips.length],()=>{{g.value.length>o.zips.length&&(g.value.length=0);let z=0;const F=o.zips.length===1&&o.zippedTotalCount===o.listLength;for(let I=g.value.length;I<o.zips.length;I++){const T=o.zips[I],k=o.baseZipName+(F?"":"-"+String(I+1).padStart(2,"0"))+".zip";z+=T.size,g.value[I]={url:T.url,size:T.size,number:F?0:I+1,sizeByUnit:He(T.size),name:k,count:T.count,clicked:!1}}}{v.value.length>o.failedZips.length&&(v.value.length=0);let z=0;const F=o.failedZipDone&&o.failedZips.length===1;for(let I=v.value.length;I<o.failedZips.length;I++){const T=o.failedZips[I],k=o.baseZipName+"-error"+(F?"":"-"+String(I+1).padStart(2,"0"))+".zip";z+=T.size,v.value[I]={url:T.url,size:T.size,number:F?0:I+1,sizeByUnit:He(T.size),name:k,count:T.count,clicked:!1}}}});function c(z,F=!1){const{url:I,name:T}=z;if(F){const k=document.createElement("a");k.href=I,k.download=T,k.click()}z.clicked||(z.clicked=!0,o.processing||g.value.every(k=>k.clicked)&&u("all-zips-clicked"))}async function h(z){if(o.zippingFlag){if(g.value.length>=2&&!await new Promise((T,k)=>s.warning({title:l("Download"),content:l("status.confirmDownloadMessage",[g.value.length]),positiveText:"OK",negativeText:l("cancel"),onPositiveClick:()=>T(!0),onNegativeClick:()=>k()})))return;const F=g.value;for(const I of F)c(I,!0)}}function f(z=!1){const F=new Blob([o.unconvertedListText],{type:"text/plain;charset=utf8"}),I=URL.createObjectURL(F),T=document.createElement("a");T.href=I,T.target="_blank",z&&(T.download=o.baseZipName+"-error.txt"),T.click()}return(z,F)=>{const I=gn,T=Ye,k=Ee,O=Se,H=ii,N=Ut,b=La,q=dt;return E(),oe(q,{name:"output",style:{"white-space":"nowrap"},disabled:""},{header:t(()=>[w("span",{style:{color:"black"},innerHTML:z.$t("status.Output")},null,8,ri)]),default:t(()=>[n(O,{wrap:!1,vertical:"",style:{"margin-top":"-1.3em"}},{default:t(()=>[n(O,{justify:"center"},{default:t(()=>[Ze(n(O,{vertical:"",align:"center"},{default:t(()=>[n(T,{placement:"left"},{trigger:t(()=>[n(I,{type:"line","indicator-placement":"inside",color:"lime","rail-color":"rgba(99, 255, 99, 0.5)","indicator-text-color":o.zippedTotalCount===z.listLength?"white":"green",processing:o.processing,percentage:o.zippedTotalCount/z.listLength*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[w("span",ui,p(o.zippedTotalCount/z.listLength*100|0)+"% "+p(z.$t("status.zippingProgress"))+" ("+p(o.zippedTotalCount)+"/"+p(o.converted)+")",1)]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[A(" "+p(z.$t("status.zippingProgress"))+" ("+p(o.zippedTotalCount/o.listLength*100|0)+"%) ",1)]),_:1}),e(g).length>=2||o.processing?(E(),oe(Kt,{key:0,name:"zips",class:"zip-buttons-parent",tag:"div"},{default:t(()=>[(E(!0),K(Oe,null,rt(e(g),(M,J)=>(E(),K("span",{key:J},[n(T,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[w("a",{href:M.url,download:M.name,class:"in-button-anchor",onClick:re=>c(M)},[n(k,{class:"zip-button",size:"tiny",color:M.clicked?"#050":"lime","text-color":M.clicked?"gray":"white",onClick:et(re=>c(M),["stop"]),round:""},{default:t(()=>[n(e(Ie),{size:"tiny"},{default:t(()=>[n(e(Ft))]),_:1}),A("ZIP"+p(M.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,di)]),default:t(()=>[w("div",{style:ce({color:e(a).successColor})},[w("div",null,"ZIP "+p(M.number||"")+" ("+p(z.$t("success"))+")",1),w("div",null,p(M.name),1),w("div",null,p(M.sizeByUnit),1),w("div",null,p(z.$rt("{n} @:files",M.count)),1)],4)]),_:2},1024)]))),128))]),_:1})):fe("",!0)]),_:1},512),[[We,z.zippingFlag]])]),_:1}),n(Qe,null,{default:t(()=>[Ze(n(O,{justify:"center",align:"center"},{default:t(()=>[n(T,{trigger:"hover",duration:0,delay:0,placement:"left",style:ce({color:"white",backgroundColor:e(a).successColor}),"arrow-style":{backgroundColor:e(a).successColor}},{trigger:t(()=>[n(Qe,{name:"save"},{default:t(()=>[z.success>0?(E(),K("span",ci,[n(N,{value:z.zippingFlag?o.zippedTotalCount.toLocaleString("en-us"):o.type.replace(/\(.+\)/,""),color:e(a).successColorHover,offset:[-20,-3]},{default:t(()=>[z.zippingFlag?(E(),oe(k,{key:0,size:"medium",onClick:h,color:e(a).successColor,round:""},{default:t(()=>[e(g).length?(E(),K("a",{key:0,href:e(g)[0].url,download:e(g)[0].name,class:"in-button-anchor",onClick:F[0]||(F[0]=et(()=>{},["prevent"]))},[n(H),A(" × "+p(e(g).length)+" "+p(z.$t("status.saveAll")),1)],8,pi)):fe("",!0)]),_:1},8,["color"])):(E(),K("a",{key:1,href:o.imgUrl,download:o.imgName,class:"in-button-anchor"},[n(k,{size:"medium",color:e(a).successColor,round:""},{default:t(()=>[n(e(Ie),{size:"tiny",component:e(hn)},null,8,["component"]),A(" "+p(z.$t("save")),1)]),_:1},8,["color"])],8,fi))]),_:1},8,["value","color"])])):fe("",!0)]),_:1})]),default:t(()=>[o.listLength>=2?(E(),K(Oe,{key:0},[w("div",null,p(e(l)("success"))+": "+p(z.zippedTotalCount.toLocaleString()),1),w("div",null,p(e(l)("status.totalSize"))+": "+p(e(He)(o.zippedTotalSize)),1),w("div",null,"ZIP × "+p(e(g).length),1),w("div",null,p(e(l)("status.saveAllZipsTooltip")),1)],64)):(E(),K(Oe,{key:1},[A(p(z.$t("status.downloadConvertedImage",e(g).length)),1)],64))]),_:1},8,["style","arrow-style"]),!o.processing&&o.success!==z.listLength?(E(),oe(b,{key:0,options:e(x),onSelect:F[1]||(F[1]=(M,J)=>{var re;return(re=e(x).find(({key:R})=>M===R))==null?void 0:re.onSelect()}),"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start"},{default:t(()=>[n(T,{show:e(y),duration:0,delay:0,placement:"right",style:ce({color:"white",backgroundColor:e(a).errorColor}),"arrow-style":{backgroundColor:e(a).errorColor}},{trigger:t(()=>[n(N,{value:o.unconvertedFileCount.toLocaleString(),color:e(a).errorColorHover,offset:[-0,-3]},{default:t(()=>[n(k,{size:"small",color:e(a).errorColor},{default:t(()=>[n(e(Ie),{size:"medium",style:{"vertical-align":"middle"},component:e(Ca)},null,8,["component"])]),_:1},8,["color"])]),_:1},8,["value","color"])]),default:t(()=>[w("div",null,[w("div",null,p(e(l)("failed"))+": "+p(o.unconvertedFileCount.toLocaleString()),1),w("div",null,p(e(l)("status.totalSize"))+": "+p(e(He)(o.unconvertedTotalSize)),1)])]),_:1},8,["show","style","arrow-style"])]),_:1},8,["options"])):fe("",!0)]),_:1},512),[[We,!o.processing]])]),_:1}),n(Qe,{name:"zipcontainer"},{default:t(()=>[Ze(n(O,{vertical:"",align:"center"},{default:t(()=>[n(T,{placement:"left"},{trigger:t(()=>[n(I,{type:"line","indicator-placement":"inside",color:"red","rail-color":"rgba(255, 0, 0, 0.5)","indicator-text-color":o.failedFileZippedCount===o.unconvertedFileCount?"white":"#500",processing:e(d)&&!o.failedZipDone&&!o.failedToCreateFailedZip,percentage:o.failedFileZippedCount/o.unconvertedFileCount*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[o.failedToCreateFailedZip?(E(),K("div",{key:1,style:ce({color:e(a).errorColor})},p(z.$t("status.failureZippingFailedFiles")),5)):(E(),K("span",gi,p(o.failedFileZippedCount/o.unconvertedFileCount*100|0)+"% "+p(z.$t("status.zipped"))+" ("+p(o.failedFileZippedCount)+"/"+p(o.unconvertedFileCount)+")",1))]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[A(" "+p(z.$t("status.zippingProgress"))+" ("+p(o.failedFileZippedCount/o.unconvertedFileCount*100|0)+"%) ",1)]),_:1}),n(Kt,{name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(E(!0),K(Oe,null,rt(e(v),(M,J)=>(E(),K("span",{key:J},[n(T,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[w("a",{href:M.url,download:M.name,class:"in-button-anchor",onClick:re=>c(M)},[n(k,{class:"zip-button",size:"tiny",color:M.clicked?"#551122":"#F00","text-color":M.clicked?"gray":"white",onClick:et(re=>c(M),["stop"]),round:""},{default:t(()=>[n(e(Ie),{size:"tiny",component:e($a)},null,8,["component"]),A("ZIP"+p(M.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,mi)]),default:t(()=>[w("div",{style:ce({color:e(a).errorColor})},[w("div",null,"ZIP "+p(M.number||"")+" ("+p(z.$t("failed"))+")",1),w("div",null,p(M.name),1),w("div",null,p(M.sizeByUnit),1),w("div",null,p(z.$rt("{n} @:files",M.count)),1)],4)]),_:2},1024)]))),128))]),_:1})]),_:1},512),[[We,e(d)]])]),_:1})]),_:1})]),_:1})}}}),hi=Be(vi,[["__scopeId","data-v-1d58375d"]]),_i=we({__name:"status",props:{processing:{type:Boolean},status:{},interval:{}},emits:["all-zips-clicked","demand-zip-errors","demand-image","delete-image"],setup(i,{expose:r,emit:s}){const l={itemMargin:"1px",titlePadding:"2px",titleFontSize:"0.8rem"},{t:a}=De(),o=xt(),u=i,d=s;r({cleanup:pe});const g=_(!1),v=_([]),y=_(!1),x=_(!1),c=_([0,0]),h=_([0,0]),f=_([0,0]),z=_([0,0]),F=_([0,0]),I=_([0,0]),T=_(0),k=_(0),O=_([0,0]),H=_(0),N=_(o.value.infoColor),b=_("#000000"),q=_("#000000"),M=_(0),J=_(0),re=_(""),R=_("00:00:00"),Ce=_(null),ye=_(["progress","log","output"]),$=P=>ye.value.includes(P),Z=P=>ye.value.push(P),Q=P=>{const G=ye.value.findIndex(L=>L===P);G>=0&&ye.value.splice(G,1)},ue=xe(()=>ye.value.includes("log")),se=xe(()=>ye.value.includes("progress")),de=_(!1),le=_(!0),Ae=_("processed"),W=zt({name:"",originalName:"",size:0,url:"",originalUrl:"",originalSize:0,dataUrl:"",index:0,various:{shrinked:!1}}),U=tt("body"),j=tt("imageViewer");Re(()=>{Te(u.status,()=>ge(),{deep:!1});let P=0;const G=()=>{if(P)return;const L=Date.now();R.value="00:00:00",P=window.setInterval(()=>{const C=(Date.now()-L)/1e3;R.value=`${String(C/3600|0).padStart(2,"0")}:${String(C/60%60|0).padStart(2,"0")}:${String(C%60|0).padStart(2,"0")}`},300)};G(),x.value=!0,Te(()=>u.processing,(L,C)=>{L||Fe(),L?(G(),v.value.length=0,g.value=!1,y.value=!1):(clearInterval(P),P=0)}),qe(()=>{clearInterval(P),clearTimeout(ae)}),mt(()=>clearInterval(P))}),qe(()=>{pe()}),mt(()=>{clearTimeout(ae)});const te=u.interval||100;let ne=!1,ae=0;function ge(){if(ne)return;if(ae){ne=!0;return}ae=window.setTimeout(()=>{ae=0,ne&&(ne=!1,ge())},te);const P=u.status;g.value=P.length>=2,h.value[1]=h.value[0],h.value[0]=P.startedCount,f.value[1]=f.value[0],f.value[0]=P.success,z.value[1]=z.value[0],z.value[0]=P.failure,F.value[1]=F.value[0],F.value[0]=P.done,I.value[1]=I.value[0],I.value[0]=P.converted,T.value=P.retried,k.value=P.length,O.value[1]=O.value[0],O.value[0]=P.zippedTotalCount,M.value=P.inputTotalSize,J.value=P.outputTotalSize,H.value=P.failedFileZippedCount;const G=J.value-M.value;re.value=(G>=0?"+ ":"")+He(G);const L=J.value/M.value,C=(256|Math.min(255,Math.max(0,L-1.5)*255|0)).toString(16).substring(1);b.value="#"+C+"0000";const Y=1024*1024,m=(256|Math.min(255,Math.max(0,G/1024/Y)*255|0)).toString(16).substring(1);q.value="#"+m+"0000",c.value[1]=c.value[0],c.value[0]=f.value[0]/k.value*100,(ue.value||!u.processing)&&(v.value=v.value.concat(P.logs),P.logs.length=0),Ce.value=P.thumbnail,u.processing?N.value=z.value[0]?o.value.errorColor:T.value?o.value.warningColor:o.value.infoColor:x.value=!1,P.convertedImageUrl!==W.url&&(W.url=P.convertedImageUrl,W.name=P.convertedImageName,W.dataUrl=P.convertedImageDataUrl,W.size=P.convertedImageSize||P.outputTotalSize,W.originalSize=P.convertedImageOrgSize,W.originalName=P.convertedImageOrgName,W.index=P.convertedImageIndex,W.originalUrl=P.convertedImageOrgUrl,W.various={shrinked:P.convertedImageShrinked})}function Fe(){const P=u.status;N.value=u.status.success===u.status.length?o.value.successColor:o.value.errorColor,Ae.value==="processed"&&(Ae.value="zipped"),P.success>0&&(le.value&&(Q("log"),de.value=!0),Z("preview"))}async function Ue(P,G,L,C){var m;if(!P)return;const Y=C;$("preview")||(Z("preview"),await Le()),(m=j.value)==null||m.changeIndex(Y+1),await Le(()=>{var S;try{(S=j.value)==null||S.$el.scrollIntoView({behavior:"instant",block:"nearest"})}catch{}})}const be=_(!1);function pe(){be.value=!0,URL.revokeObjectURL(W.url),URL.revokeObjectURL(W.originalName),W.originalUrl="",W.url="",W.index=0,u.status.logs.length=0,v.value.length=0}return(P,G)=>{const L=Se,C=dt,Y=_n;return E(),oe(L,{ref_key:"body",ref:U,vertical:"",justify:"center"},{default:t(()=>[n(Y,{"display-directive":"show","trigger-areas":["arrow","main"],"expanded-names":e(ye),"onUpdate:expandedNames":G[7]||(G[7]=m=>Ne(ye)?ye.value=m:null),"theme-overrides":l},{default:t(()=>[n($s,{processing:e(x),"elapsed-time":e(R),"success-perc":e(c)[0],"input-total-size":e(M),"output-total-size":e(J),"file-type":u.status.type,shrink:u.status.shrink,threads:u.status.threads,"zip-size":u.status.zipSize,"rate-color":e(b),"dif-color":e(q),"total-size-dif-str":e(re),thumbnail:e(Ce),opened:e(se)},{center:t(()=>[e(be)?fe("",!0):(E(),oe(Bs,{key:0,index:e(h)[0],success:e(f)[0],length:P.status.length,"success-to":e(f)[0],"success-from":e(f)[1],failure:e(z)[0],"success-perc-to":e(c)[0],"success-perc-from":e(c)[1],retried:e(T),processing:e(x),interval:e(te),"status-color":e(N),class:"center-column"},null,8,["index","success","length","success-to","success-from","failure","success-perc-to","success-perc-from","retried","processing","interval","status-color"]))]),_:1},8,["processing","elapsed-time","success-perc","input-total-size","output-total-size","file-type","shrink","threads","zip-size","rate-color","dif-color","total-size-dif-str","thumbnail","opened"]),n(ai,{processing:e(x),"image-index":e(W).index,opened:e(ue),"preview-collapsed":$("preview"),logs:e(v),expanded:e(de),"onUpdate:expanded":G[0]||(G[0]=m=>Ne(de)?de.value=m:null),"auto-scroll":e(le),"onUpdate:autoScroll":G[1]||(G[1]=m=>Ne(le)?le.value=m:null),order:e(Ae),onChangeIndex:Ue,onOpenPreview:G[2]||(G[2]=m=>{var S;return(S=e(j))==null?void 0:S.openPreview()}),name:"log",style:{"white-space":"nowrap"}},null,8,["processing","image-index","opened","preview-collapsed","logs","expanded","auto-scroll","order"]),n(C,{title:P.$t("status.PreviewImage"),name:"preview",style:{"white-space":"nowrap"},disabled:!(e(f)[0]>0)},{default:t(()=>[n(L,{justify:"center",align:"center",vertical:"",style:{"margin-top":"-1em"}},{default:t(()=>[n(Is,{"_v-else-if":"imageViewerStarted && status.success > 0 /*&& (props.status.threads || !zippingFlag)*/ && !cleaningUp",ref_key:"imageViewer",ref:j,url:e(W).url,size:e(W).size,"original-url":e(W).originalUrl,"original-size":e(W).originalSize,name:e(W).name,originalName:e(W).originalName,length:e(f)[0],index:e(W).index,"various-info":e(W).various,"is-single":!e(g),onDemandImage:G[3]||(G[3]=m=>d("demand-image",m)),on_deleteImage:G[4]||(G[4]=m=>d("delete-image",m)),_close:"imageViewerStarted=false"},null,8,["url","size","original-url","original-size","name","originalName","length","index","various-info","is-single"])]),_:1})]),_:1},8,["title","disabled"]),n(hi,{processing:e(x),"list-length":e(k),zippingFlag:e(g),zips:u.status.zips,"img-url":e(W).url,"img-name":e(W).name,success:e(f)[0],failure:e(z)[0],done:e(F)[0],converted:e(I)[0],retried:e(T),"zipped-total-count":e(O)[0],"zipped-total-size":u.status.zippedTotalSize,"base-zip-name":u.status.baseZipName,"failed-file-zipped-count":e(H),"failed-to-create-failed-zip":u.status.failedToCreateFailedZip,"failed-zip-done":u.status.failedZipDone,"failed-zips":u.status.failedZips,"unconverted-file-count":u.status.unconvertedFileCount,"unconverted-list-text":u.status.unconvertedListText,"unconverted-total-size":u.status.unconvertedTotalSize,type:u.status.type,onAllZipsClicked:G[5]||(G[5]=m=>d("all-zips-clicked")),onDemandZipErrors:G[6]||(G[6]=m=>d("demand-zip-errors"))},null,8,["processing","list-length","zippingFlag","zips","img-url","img-name","success","failure","done","converted","retried","zipped-total-count","zipped-total-size","base-zip-name","failed-file-zipped-count","failed-to-create-failed-zip","failed-zip-done","failed-zips","unconverted-file-count","unconverted-list-text","unconverted-total-size","type"])]),_:1},8,["expanded-names"])]),_:1},512)}}}),wi=Be(_i,[["__scopeId","data-v-c1f4b108"]]),yi=["innerHTML"],bi=we({__name:"converter",props:ot({input:{},format:{},quality:{},retainExtension:{type:Boolean},maxZipSizeMB:{},threads:{}},{showNote:{type:Boolean},showNoteModifiers:{}}),emits:ot(["start","end"],["update:showNote"]),setup(i,{emit:r}){Ke(Ve);const{t:s}=De(),l=ut(),a=Ea(),o=10,u=navigator.hardwareConcurrency,d=typeof OffscreenCanvas=="function",g=100,v=i,y=Pe(i,"showNote"),x=r,c=_(!1),h=_(!1),f=_(!1),z=_(!1),F=_(!1),I=_(()=>"initializing"),T=_("info"),k=zt(Q()),O=tt("stat"),H=_(0);let N=!1,b=()=>{},q,M=0,J=!1;Te(()=>v.input,U=>{U!=null&&U.length&&se(U)}),Te(z,U=>{document.body.style.overflowY=U?"hidden":"auto"}),Re(async()=>{await Ae(),W()});async function re(){let U=!0;if(M>o*1e3&&!J&&k.success>0&&(U=!1,await new Promise(j=>{l.warning({title:s("confirmCloseDialogTitle"),autoFocus:!0,maskClosable:!1,positiveText:s("close"),negativeText:s("back"),onPositiveClick:()=>U=!0,onAfterLeave:j,content:s("confirmCloseDialog")})})),!U)return!1;a.destroyAll(),z.value=!1,y.value=!1}function R(U){q==null||q(U)}function Ce(U){Lt==null||Lt(U)}function ye(){!h.value&&c.value?h.value=!0:re()}function $(){se(v.input)}let Z=_(()=>{});function Q(U){const j={logs:[],ziplogs:[],startedCount:0,converted:0,success:0,failure:0,retried:0,done:0,length:0,zippedTotalCount:0,zippingErrorCount:0,zippedTotalSize:0,processing:!1,zips:[],inputTotalSize:0,outputTotalSize:0,thumbnail:null,baseZipName:"testzipname",type:"image/any",startedTime:Date.now(),convertedImageDataUrl:"",convertedImageName:"",convertedImageUrl:"",convertedImageOrgUrl:"",convertedImageIndex:-1,convertedImageShrinked:!1,zipSize:v.maxZipSizeMB,shrink:B.multithread&&B.shrinkImage?[B.maxWidth,B.maxHeight]:void 0,unconvertedListText:"",failedZipDone:!1,failedZips:[],unconvertedFileCount:0,unconvertedTotalSize:0,failedFileZippedCount:0,failedToCreateFailedZip:!1};return Object.assign(U||{},j)}function ue(){F.value=!1,URL.revokeObjectURL(k.convertedImageUrl),URL.revokeObjectURL(k.convertedImageOrgUrl);for(const U of k.zips)URL.revokeObjectURL(U.url);k.zips.length=0;for(const U of k.failedZips)URL.revokeObjectURL(U.url);k.failedZips.length=0,Q(k),b(),b=()=>{},q=null,J=!1,f.value=!1,h.value=!1}async function se(U){if(c.value){l.error({title:"Busy",positiveText:"OK",content:s("interfered")});return}z.value&&(H.value^=1);let j=U.concat();Q(k),ue(),z.value=!0,F.value=!0,c.value=!0,k.processing=!0,T.value="info",I.value=()=>s("processing");const te=new Set,ne=v.format,ae=v.quality,ge=[...ne.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),Fe=le(ne,ae,j[0].webkitRelativePath);k.length=j.length,k.baseZipName=Fe,k.type=ne.replace(/image\//,"").toUpperCase()+(/jpe?g|webp/i.test(ne)?" ("+ae+")":""),k.threads=N?0:v.threads;const Ue=Date.now();x("start");let be,pe,P;if(!N&&v.threads>=2?(q=is,P=await Xl({files:j,completedFileIdSet:te,ConvStats:k,canceled:h,props:v,imageType:ne,quality:ae,outputExt:ge,format:ne,message:a})):(q=fs,P=await ps(j,te,v,h,k)),{exception:pe,callbackToGenerateFailedZips:be,callbackToClearConverter:b}=P,pe){let G;switch(pe.message){case"worker-load-error":G=s("errMsgWorkerLoadError");break;default:G="unexpected error"}l.error({title:"Error",autoFocus:!0,maskClosable:!1,closable:!1,content:()=>X("div",[X("p",G),X(Ee,{onClick(){location.reload()}},s("Reload"))])})}if(k.success===k.length?(T.value="success",I.value=()=>s("completed")):(T.value="error",I.value=()=>h.value?s("aborted"):s("incomplete")),te.size!==j.length){const G=de(U,te);Z.value=()=>{!G||!G.length||be(G)}}c.value=!1,k.processing=!1,f.value=!0,j.length=0,M=Date.now()-Ue,x("end")}function de(U,j){const te=[],ne=[];let ae=0;for(const ge of U)j.has(ge._id)||(te.push(ge),ne.push(ge.webkitRelativePath||ge.relativePath||ge.name),ae+=ge.size);return ne.length&&(k.unconvertedListText=ne.join(`
`),k.unconvertedFileCount=te.length,k.unconvertedTotalSize=ae),te}function le(U,j,te){var Ue;const ne=new Date;U=U.replace(/^image\//,"").toLowerCase();const ae=B.useFolderNameForZip&&((Ue=String(te).match(/^\/?([^/]+)\//))==null?void 0:Ue[1])||"avif2jpg",ge=`
    ${ne.getFullYear().toString().substring(2)}
    ${String((ne.getMonth()+1)*100+ne.getDate()).padStart(4,"0")}
    ${String(ne.getHours()*1e4+ne.getMinutes()*100+ne.getSeconds()).padStart(6,"0")}
    -
    ${U+(/jpe?g|webp/i.test(U)?j:"")}
  `.replace(/\s/g,"");return`${ae}-${ge}`.replace(/\s+/g," ")}async function Ae(){const U="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",j=document.createElement("img"),te=Ko(j).then(()=>!0,()=>!1);j.src=U,await te||l.warning({title:"Unsupported",positiveText:"OK",maskClosable:!1,content:s("avifUnsupported")})}function W(){(!d||u<2||!Promise.any)&&(N=!0),N&&(Me.value=0)}return(U,j)=>{var be;const te=Ie,ne=Ut,ae=ke,ge=Se,Fe=kt,Ue=Ot;return E(),K(Oe,null,[!e(c)&&((be=v.input)!=null&&be.length)?(E(),oe(ge,{key:0,justify:"center",align:"center",style:{"margin-top":"0.4em"}},{default:t(()=>[n(ae,{trigger:"hover",placement:"top","keep-alive-on-hover":!1,duration:0,delay:50},{trigger:t(()=>{var pe;return[n(ne,{value:((pe=U.input)==null?void 0:pe.length)||0,offset:[-12,-5],color:"#99999966"},{default:t(()=>[n(e(Ee),{onClick:$,round:"",size:"medium"},{icon:t(()=>[n(te,{size:"1.2em",color:"#CCCCCC"},{default:t(()=>[n(e(Fa))]),_:1})]),default:t(()=>[A(" "+p(e(s)("convertAgain")),1)]),_:1})]),_:1},8,["value"])]}),default:t(()=>{var pe;return[w("div",{innerHTML:e(s)("reconvertTip",(pe=v.input)==null?void 0:pe.length)},null,8,yi)]}),_:1})]),_:1})):fe("",!0),n(Ue,{ref:"processingModal","display-directive":"show",show:e(z),"onUpdate:show":j[2]||(j[2]=pe=>Ne(z)?z.value=pe:null),closable:e(f),"close-on-esc":!1,preset:"dialog",onClick:j[3]||(j[3]=pe=>{e(a).destroyAll()}),onMaskClick:j[4]||(j[4]=pe=>{e(a).destroyAll()}),onClose:re,onEsc:ye,title:e(I),type:e(T),"mask-closable":!1,onAfterLeave:ue,onBeforeLeave:j[5]||(j[5]=pe=>{e(O).cleanup()}),class:"processing-dialog"},{default:t(()=>[n(ge,{vertical:"",style:{"flex-grow":"1"}},{default:t(()=>[e(F)?(E(),oe(wi,{ref_key:"stat",ref:O,key:e(H),processing:e(c),status:e(k),interval:g,onAllZipsClicked:j[0]||(j[0]=pe=>Ne(J)?J.value=!0:J=!0),onDemandZipErrors:e(Z),onDemandImage:R,onDeleteImage:Ce},null,8,["processing","status","onDemandZipErrors"])):fe("",!0),n(ge,{justify:"end",align:"center",wrap:!1},{default:t(()=>[e(c)?(E(),oe(e(Ee),{key:0,disabled:e(h),ref:"cancelbutton",round:"",size:"large",onClick:j[1]||(j[1]=pe=>h.value=!0)},{default:t(()=>[n(Fe,{show:e(h)&&!e(f),size:"small"},{default:t(()=>[A(p(e(s)("cancel")),1)]),_:1},8,["show"])]),_:1},8,["disabled"])):e(f)?(E(),oe(e(Ee),{key:1,onClick:re,round:"",size:"large"},{default:t(()=>[A(p(e(s)("close")),1)]),_:1})):fe("",!0)]),_:1})]),_:1})]),_:1},8,["show","closable","title","type"])],64)}}}),zi={class:"container-1"},ki={style:{color:"gray",padding:"0.2em","font-size":"smaller","text-align":"center"}},xi=["innerHTML"],Ti={style:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","font-size":"xx-small","white-space":"nowrap"}},Ii=we({__name:"droptarget",props:{forbidden:{type:Boolean},dropTarget:{}},emits:["drop"],setup(i,{emit:r}){Ke(Ve);const s=i,l=r,a=Pa(),o=_(!1),u=_(0),d=_("");Re(()=>{g(s.dropTarget||document)});function g(y){document.ondragstart=x=>x.preventDefault(),document.ondragover=x=>x.preventDefault(),y.ondrop=async x=>{var h;if(x.preventDefault(),o.value||s.forbidden)return;o.value=!0,u.value=0,d.value="";let c;try{const f=[...x.dataTransfer.items].map(z=>z.webkitGetAsEntry());a.start(),c=await v(f),a.finish()}catch{c=[...((h=x.dataTransfer)==null?void 0:h.files)??[]],a.error()}o.value&&(o.value=!1,l("drop",c))}}async function v(y,x){x=x||[];for(const c of y)if(c.isFile){const h=await new Promise(f=>c.file(z=>f(z)));Object.defineProperty(h,"webkitRelativePath",{value:c.fullPath}),x.push(h),u.value++}else if(c.isDirectory){d.value=c.fullPath;const h=c.createReader();do{const f=await new Promise(z=>h.readEntries(F=>z(F)));if(!f.length)break;await v(f,x)}while(!0)}return x}return(y,x)=>{const c=ke,h=Se,f=Ot;return E(),K("div",zi,[n(c,{to:!1,"display-directive":"show",trigger:"hover",duration:0,delay:0,placement:"bottom-end"},{trigger:t(()=>[w("div",ki," ("+p(y.$t("droptargetLabel"))+") ",1)]),default:t(()=>[w("h3",{innerHTML:y.$t("droptargetTooltip"),style:{"max-width":"200px","text-align":"center","word-break":"keep-all","overflow-wrap":"break-word"}},null,8,xi)]),_:1}),n(f,{show:e(o),"onUpdate:show":x[0]||(x[0]=z=>Ne(o)?o.value=z:null),closable:!0,preset:"dialog",title:"Parsing dropped items.",type:"info","mask-closable":!1,"negative-text":y.$t("cancel")},{default:t(()=>[n(h,{vertical:"",align:"center"},{default:t(()=>[w("div",Ti,p(e(d)),1),w("div",null,"found "+p(e(u))+" files",1)]),_:1})]),_:1},8,["show","negative-text"])])}}}),Si=Be(Ii,[["__scopeId","data-v-cdd5e0f8"]]),Ai={class:"container-1"},Li={class:"container-2"},Ci=["innerHTML"],$i=["innerHTML"],Ei={style:{"white-space":"nowrap"}},Fi={style:{"padding-left":"1em"}},Pi=["innerHTML"],Oi=["accept"],Ui=we({__name:"file-selector",props:ot({target:{},userExtensions:{},forbidden:{type:Boolean}},{expanded:{type:Boolean,required:!1},expandedModifiers:{},disableNotifyingFolderSelect:{type:Boolean},disableNotifyingFolderSelectModifiers:{}}),emits:ot(["input","click","cancel","on-change-accept","update:target","update:userExtensions"],["update:expanded","update:disableNotifyingFolderSelect"]),setup(i,{emit:r}){const s=ut(),{t:l}=De(),a=Ke(Ve),o=["avif_only","all_images","all_files","edit_type"],u=[];for(const $ of o)u.push({label:()=>l("fileTypeRadioOptions."+$),value:$});const d=({node:$,option:Z})=>X(ke,{placement:"right"},{trigger:()=>$,default:()=>J(Z.value).replace(/,/g,", ")}),g=i,v=r,y=_(0),x=_(!1),c=_(!1),h=xe(()=>J(F.value)),f=xe(()=>I.value.split(",").every(Z=>/^\s*(\.[\w\-]+)*\s*$/.test(Z))?"success":"error"),z=xe(()=>!g.forbidden&&!c.value);Pe(i,"expanded");const F=xe({get:()=>o.indexOf(g.target)>=0?g.target:o[0],set:$=>{v("update:target",$)}}),I=xe({get:()=>g.userExtensions,set:$=>{v("update:userExtensions",$)}}),T=Pe(i,"disableNotifyingFolderSelect"),k=_(null),O=_(null),H=_(M());Te(F,$=>{v("on-change-accept",h.value)}),Re(()=>{});async function N($){if(v("click"),$===O.value&&!T.value){let Z=!1;if(await new Promise(Q=>{s.info({title:l("loadfolderNotifyingTitle"),positiveText:l("Continue"),negativeText:l("Cancel"),onAfterLeave:()=>Q(Z),onPositiveClick:()=>Z=!0,content:()=>X("div",[X("p",{},l("loadfolderNotifyingMessageTerm1")),X("div",[X(cn,{width:250,style:{border:"3px solid gray"},src:"/avif2jpeg/dist//notification-folder.png"})]),X("p",{},l("loadfolderNotifyingMessageTerm2")),X("p",[X(mn,{onUpdateChecked:ue=>T.value=ue,checked:T.value},()=>l("checkboxTextDontShowThis"))])])})}),!Z){T.value=!1,v("cancel");return}}$.click()}function b(){v("cancel")}function q($){const Q=[...$.target.files];k.value.value="",O.value.value="",R(Q)}function M(){return"webkitdirectory"in document.createElement("input")}function J($){switch($){case"avif_only":return".avif, .webp";case"all_images":return".jpg, .jpeg, .jfif, .pjpeg, .pjp, .gif, .png, .webp, .avif, .bmp, .apng, .ico, .svg";case"edit_type":return I.value;case"all_files":default:return".*"}}async function re($){const Z=String(h.value).toLowerCase().replace(/\s+/g,"");if(Z&&h.value!==".*"){const Q=Z.split(",");$=$.filter(ue=>Q.includes(ue.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),$.length||(await new Promise(ue=>{s.error({title:"Images Not Found",positiveText:"OK",onAfterLeave:ue,content:()=>X("div",[X(pn,{description:"NO IMAGES"}),`${l("noimage")}`,X("br"),h.value])})}),b())}return $}async function R($){c.value=!0,$=await re($),y.value=$.length,$.length>0&&v("input",ye($)),c.value=!1}let Ce=0;function ye($){const Z=[];for(const Q of $)Q.hasOwnProperty("_id")||Object.defineProperty(Q,"_id",{value:Ce++}),Z.push(Q);return Z}return($,Z)=>{const Q=Ie,ue=Ee,se=Se,de=It,le=Ua,Ae=Oa,W=Ye;return E(),K(Oe,null,[w("div",Ai,[w("div",Li,[n(se,{vertical:"",align:"center",justify:"center",inline:"",size:"large"},{default:t(()=>[n(se,{align:"center",justify:"space-around",class:"main-buttons"},{default:t(()=>[n(se,{vertical:"",align:"stretch",justify:"center"},{default:t(()=>[n(e(ke),{to:!1,"display-directive":"show",show:e(a).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(a).LANDSCAPE.value?"right":"top",duration:0,delay:0,"z-index":10},{trigger:t(()=>[n(ue,{disabled:!e(z),size:"large",onClick:Z[0]||(Z[0]=U=>N(e(k))),round:"",style:{width:"100%","background-color":"white","font-size":"1.5em"}},{icon:t(()=>[n(Q,{size:"large",color:"gray"},{default:t(()=>[n(e(wn))]),_:1})]),default:t(()=>[A(" "+p($.$t("loadbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[w("div",{innerHTML:$.$t("loadbuttontooltip")},null,8,Ci)]),_:1},8,["show","placement"]),!e(a).IS_SP&&e(H)||e(a).SSR?(E(),K(Oe,{key:0},[n(e(ke),{to:!1,"display-directive":"show",trigger:"hover",placement:"left","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:e(a).showTooltipsBeforeMounted.value},{trigger:t(()=>[n(ue,{disabled:!e(z),size:"large",onClick:Z[1]||(Z[1]=U=>N(e(O))),round:"",style:{width:"100%","background-color":"white","font-size":"1.5em"}},{icon:t(()=>[n(Q,{size:"large",color:"gray"},{default:t(()=>[n(e(yn))]),_:1})]),default:t(()=>[A(" "+p($.$t("loadfolderbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[w("div",{innerHTML:$.$t("loadfoldertooltip")},null,8,$i)]),_:1},8,["show"]),e(a).IS_SP?fe("",!0):(E(),oe(Si,{key:0,onDrop:R,forbidden:!e(z),_class:"drop-target"},null,8,["forbidden"]))],64)):fe("",!0)]),_:1})]),_:1}),n(se,{vertical:""},{default:t(()=>[n(se,{wrap:e(a).IS_SP,align:"center",justify:"stretch"},{default:t(()=>[n(e(ke),{to:!1,"display-directive":"show",trigger:"hover","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:e(a).showTooltipsBeforeMounted.value},{trigger:t(()=>[w("span",Ei,p($.$t("TargetFileTypeExt"))+": ",1)]),default:t(()=>[A(p($.$t("TargetFileTypeExtTooltip")),1)]),_:1},8,["show"]),n(e(ke),{"keep-alive-on-hover":!1,placement:"right",style:{"max-width":"200px"},duration:0,delay:0},{trigger:t(()=>[n(de,{trigger:"click",width:"trigger",size:"small",value:e(F),"onUpdate:value":Z[2]||(Z[2]=U=>Ne(F)?F.value=U:null),options:u,"render-option":d,"consistent-menu-width":!1},null,8,["value"])]),default:t(()=>[A(" "+p(J(e(F)).replace(/,/g,", ")),1)]),_:1})]),_:1},8,["wrap"]),e(F)==="edit_type"?(E(),oe(e(ke),{key:0,trigger:"hover","keep-alive-on-hover":!1,placement:"bottom-start",show:e(x),duration:0,delay:0},{trigger:t(()=>[w("div",Fi,[n(W,{trigger:"manual",placement:"right-end",show:e(F)==="edit_type"&&e(f)!=="success"&&!!e(x)},{trigger:t(()=>[n(le,{value:e(I),"onUpdate:value":Z[3]||(Z[3]=U=>Ne(I)?I.value=U:null),status:e(f),disabled:e(F)!=="edit_type",onFocus:Z[4]||(Z[4]=U=>x.value=!0),onBlur:Z[5]||(Z[5]=U=>x.value=void 0),clearable:!0,size:"small",placeholder:".jpg, .gif, .png",spellcheck:"false"},null,8,["value","status","disabled"])]),default:t(()=>[n(Ae,{type:"error","show-icon":!0,title:"Validation error"},{default:t(()=>Z[6]||(Z[6]=[A(" Please correct the extension list."),w("br",null,null,-1),w("ul",null,[w("li",null,"Each extension must begin with a period. "),w("li",null,"Separate each extension with a comma. "),w("li",null,"Use alphameric characters.")],-1)])),_:1,__:[6]})]),_:1},8,["show"])])]),default:t(()=>[w("span",{innerHTML:$.$t("editAcceptTypes")},null,8,Pi)]),_:1},8,["show"])):fe("",!0)]),_:1})]),_:1})])]),w("input",{ref_key:"fileinput",ref:k,onInput:q,onCancel:b,type:"file",multiple:"",accept:e(h),style:{display:"none"}},null,40,Oi),w("input",{ref_key:"folderinput",ref:O,webkitdirectory:"",directory:"",onInput:q,onCancel:b,type:"file",style:{display:"none"}},null,544)],64)}}}),Mi=Be(Ui,[["__scopeId","data-v-39d6b70b"]]),Ri={style:{"white-space":"nowrap"}},Ni=we({__name:"settings-output",props:{quality:{},format:{}},emits:["update:format","update:quality"],setup(i,{emit:r}){const s=i,l=r,{t:a}=De(),o=Ke(Ve),u=_([]),d=["image/jpeg","image/png","image/gif","image/bmp","image/avif","image/webp"],g=xe({get:()=>s.format,set:f=>{f=c(f),l("update:format",f)}}),v=xe({get:()=>s.quality,set:f=>{l("update:quality",f)}}),y=xe(()=>/png|bmp/i.test(g.value)),x=_(null);Re(()=>{h()});function c(f){return u.value.indexOf(f)<0&&(f=u.value[0]),f}function h(){for(const f of d)x.value.toDataURL(f).indexOf(f)>=0&&u.value.push(f);u.value.length===0&&u.value.push(d[0])}return(f,z)=>{const F=Ie,I=It,T=Se,k=ke,O=Tt,H=bn;return E(),K(Oe,null,[n(T,{justify:"center",class:"body"},{default:t(()=>[n(T,{vertical:""},{default:t(()=>[n(k,{to:!1,"display-directive":"show",show:e(o).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(o).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(T,{align:"center",wrap:!1},{default:t(()=>[n(F,null,{default:t(()=>[n(e(wn))]),_:1}),A(p(e(a)("settings.imageType"))+": ",1),n(I,{value:g.value,"onUpdate:value":z[0]||(z[0]=N=>g.value=N),options:u.value.map(N=>({value:N,label:N})),"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),_:1})]),default:t(()=>[A(" "+p(e(a)("settings.imageTypeTooltip")),1)]),_:1},8,["show","placement"]),n(k,{to:!1,"display-directive":"show",show:e(o).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(o).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(T,{align:"center"},{default:t(()=>[n(T,{align:"start",wrap:!1},{default:t(()=>[n(F,null,{default:t(()=>[n(e(hn))]),_:1}),w("span",Ri,p(e(a)("settings.quality"))+":",1),n(T,{align:"center",justify:"space-between"},{default:t(()=>[n(O,{tooltip:!1,value:v.value,"onUpdate:value":z[1]||(z[1]=N=>v.value=N),step:1,style:{width:"120px"},disabled:y.value},null,8,["value","disabled"]),n(H,{onBlur:z[2]||(z[2]=N=>v.value??(v.value=0)),value:v.value,"onUpdate:value":z[3]||(z[3]=N=>v.value=N),step:"1",min:"0",max:"100",disabled:y.value,style:{width:"90px"},size:"small"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:t(()=>[A(" "+p(e(a)("settings.qualitytooltip")),1)]),_:1},8,["show","placement"])]),_:1})]),_:1}),w("canvas",{ref_key:"canvas",ref:x,width:"1",height:"1",style:{display:"none"}},null,512)],64)}}}),ji=Be(Ni,[["__scopeId","data-v-060333f5"]]),Di={style:{width:"4em","text-align":"left"}},Bi={style:{width:"4em","text-align":"left"}},$t=100,nn=2e3,on=4096,an=4096,Zi=100,Wi=100,Hi=we({__name:"settings-adv",props:{expanded:{type:Boolean,required:!1},expandedModifiers:{},multithread:{type:Boolean,required:!0},multithreadModifiers:{},threadCount:{required:!0},threadCountModifiers:{},maxZipSize:{required:!0},maxZipSizeModifiers:{},retainExt:{type:Boolean,required:!0},retainExtModifiers:{},useFolderNameForZip:{type:Boolean,required:!0},useFolderNameForZipModifiers:{},shrinkImage:{type:Boolean,required:!0},shrinkImageModifiers:{},maxWidth:{required:!0},maxWidthModifiers:{},maxHeight:{required:!0},maxHeightModifiers:{}},emits:["update:expanded","update:multithread","update:threadCount","update:maxZipSize","update:retainExt","update:useFolderNameForZip","update:shrinkImage","update:maxWidth","update:maxHeight"],setup(i){const r=Ke(Ve),s={trigger:"hover",placement:"left",keepAliveOnHover:!1,duration:0,delay:0,style:"max-width: 20vw;"},l=Pe(i,"expanded"),a=Pe(i,"multithread"),o=Pe(i,"threadCount"),u=Pe(i,"maxZipSize"),d=Pe(i,"retainExt"),g=Pe(i,"useFolderNameForZip"),v=Pe(i,"shrinkImage"),y=Pe(i,"maxWidth"),x=Pe(i,"maxHeight");Te(Me,h=>{h>1||(a.value=!1),o.value>h&&(o.value=h)},{immediate:!0});const c=xe(()=>a.value&&Me.value>1);return Re(()=>{Me.value>1&&typeof o.value>"u"&&(o.value=Math.max(Me.value,2))}),(h,f)=>{const z=Ie,F=Ee,I=Na,T=Se,k=Tt,O=bn,H=dt,N=_n;return E(),oe(T,{justify:"center"},{default:t(()=>[n(N,{"display-directive":"show","default-expanded-names":l.value?["collapitem"]:"","on-update:expanded-names":b=>l.value=!!String(b),"trigger-areas":["arrow","main"],class:nt(["settings-body",l.value?"expand-adv-settings":""])},Ma({arrow:t(()=>[n(z,{style:ce(l.value&&{top:"8px"})},{default:t(()=>[n(e(Ba))]),_:1},8,["style"]),n(z,null,{default:t(()=>[n(e(Za))]),_:1})]),default:t(()=>[n(H,{title:h.$t("settings.advancedSettings"),name:"collapitem"},{default:t(()=>[n(T,{vertical:"",style:{"padding-left":"2em"}},{default:t(()=>[n(e(ke),at(lt(s)),{trigger:t(()=>[n(T,{vertical:""},{default:t(()=>[n(T,{wrap:!1,align:"center"},{default:t(()=>[n(F,{text:"",disabled:!e(Me),style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:f[1]||(f[1]=b=>a.value=!a.value)},{icon:t(()=>[n(z,null,{default:t(()=>[n(e(Ra))]),_:1})]),default:t(()=>[A(" "+p(h.$t("settings.enableMultiThreads")),1)]),_:1},8,["disabled"]),n(I,{value:a.value,"onUpdate:value":f[2]||(f[2]=b=>a.value=b),disabled:!e(Me),size:"small"},null,8,["value","disabled"])]),_:1}),n(T,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(k,{value:o.value,"onUpdate:value":f[3]||(f[3]=b=>o.value=b),disabled:!e(Me)||!a.value,step:1,min:2,max:e(Me),style:{width:"120px"}},null,8,["value","disabled","max"]),n(O,{onBlur:f[4]||(f[4]=b=>o.value??(o.value=2)),size:"tiny",value:o.value,"onUpdate:value":f[5]||(f[5]=b=>o.value=b),disabled:!e(Me)||!a.value,step:1,min:2,max:e(Me),style:{width:"10em"}},{suffix:t(()=>[A(p(h.$t("threads",o.value)),1)]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[A(" "+p(h.$t("settings.multiThreadsTooltip")),1)]),_:1},16),n(e(ke),at(lt(s)),{trigger:t(()=>[n(T,{vertical:""},{default:t(()=>[n(T,{wrap:!1,align:"center"},{default:t(()=>[n(F,{text:"",focusable:!1,style:{"white-space":"nowrap","font-size":"smaller"}},{icon:t(()=>[n(z,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(ja))]),_:1})]),default:t(()=>[A(" "+p(h.$t("settings.maxZipFileSize"))+": ",1)]),_:1})]),_:1}),n(T,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(k,{tooltip:!1,value:u.value,"onUpdate:value":f[6]||(f[6]=b=>u.value=b),step:1,min:$t,max:nn,style:{width:"120px"}},null,8,["value"]),n(O,{onBlur:f[7]||(f[7]=b=>u.value??(u.value=$t)),size:"tiny",value:u.value,"onUpdate:value":f[8]||(f[8]=b=>u.value=b),step:"1",min:$t,max:nn,style:{width:"10em"}},{suffix:t(()=>f[21]||(f[21]=[A("(MB)")])),_:1},8,["value"])]),_:1})]),_:1})]),default:t(()=>[A(" "+p(h.$t("settings.maxZipFileSizeTooltip")),1)]),_:1},16),n(e(ke),at(lt(s)),{trigger:t(()=>[n(T,{wrap:!1,align:"center"},{default:t(()=>[n(F,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:f[9]||(f[9]=b=>g.value=!g.value)},{icon:t(()=>[n(z,null,{default:t(()=>[n(e(yn))]),_:1})]),default:t(()=>[A(" "+p(h.$t("settings.useFolderNameForZip")),1)]),_:1}),n(I,{value:g.value,"onUpdate:value":f[10]||(f[10]=b=>g.value=b),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[A(" "+p(h.$t("settings.useFolderNameForZipTooltip")),1)]),_:1},16),n(e(ke),at(lt(s)),{trigger:t(()=>[n(T,{wrap:!1,align:"center"},{default:t(()=>[n(F,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:f[11]||(f[11]=b=>d.value=!d.value)},{icon:t(()=>[n(z,null,{default:t(()=>[n(e(vn))]),_:1})]),default:t(()=>[A(" "+p(h.$t("settings.retainOriginalExtension")),1)]),_:1}),n(I,{value:d.value,"onUpdate:value":f[12]||(f[12]=b=>d.value=b),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[A(" "+p(h.$t("settings.retainExtTooltip")),1)]),_:1},16),n(e(ke),at(lt(s)),{trigger:t(()=>[n(T,{vertical:""},{default:t(()=>[n(T,{wrap:!1,align:"center"},{default:t(()=>[n(F,{disabled:!c.value,text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:f[13]||(f[13]=b=>v.value=!v.value)},{icon:t(()=>[n(z,null,{default:t(()=>[n(e(Da))]),_:1})]),default:t(()=>[A(" "+p(h.$t("settings.shrinkImage")),1)]),_:1},8,["disabled"]),n(I,{disabled:!c.value,value:v.value,"onUpdate:value":f[14]||(f[14]=b=>v.value=b),size:"small"},null,8,["disabled","value"])]),_:1}),n(T,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(k,{value:y.value,"onUpdate:value":f[15]||(f[15]=b=>y.value=b),disabled:!v.value||!c.value,step:1,min:Zi,max:on,style:{width:"120px"}},null,8,["value","disabled"]),n(O,{size:"tiny",onBlur:f[16]||(f[16]=b=>y.value??(y.value=8)),value:y.value,"onUpdate:value":f[17]||(f[17]=b=>y.value=b),disabled:!v.value||!c.value,step:1,min:8,max:on*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[w("span",Di,p(h.$t("width")),1)]),suffix:t(()=>f[22]||(f[22]=[A("px")])),_:1},8,["value","disabled","max"])]),_:1}),n(T,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(k,{value:x.value,"onUpdate:value":f[18]||(f[18]=b=>x.value=b),disabled:!v.value||!c.value,step:1,min:Wi,max:an,style:{width:"120px"}},null,8,["value","disabled"]),n(O,{size:"tiny",onBlur:f[19]||(f[19]=b=>x.value??(x.value=8)),value:x.value,"onUpdate:value":f[20]||(f[20]=b=>x.value=b),disabled:!v.value||!c.value,step:1,min:8,max:an*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[w("span",Bi,p(h.$t("height")),1)]),suffix:t(()=>f[23]||(f[23]=[A("px")])),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[A(" "+p(h.$t("settings.shrinkImageTooltip")),1)]),_:1},16)]),_:1})]),_:1},8,["title"])]),_:2},[l.value?{name:"header-extra",fn:t(()=>[n(e(ke),{"keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(F,{onClick:e(nl),size:"tiny",style:{"font-size":"xx-small"}},{default:t(()=>[A(p(h.$t("reset")),1)]),_:1},8,["onClick"])]),default:t(()=>[A(" "+p(h.$t("settings.resetButtonTooltip")),1)]),_:1}),e(r).IS_DEV?(E(),K("button",{key:0,onClick:f[0]||(f[0]=b=>e(ol)())},"delcfg")):fe("",!0)]),key:"0"}:void 0]),1032,["default-expanded-names","on-update:expanded-names","class"])]),_:1})}}}),Vi=Be(Hi,[["__scopeId","data-v-31f045db"]]),qi={},Gi={style:{color:"gray","padding-left":"20px"}},Ki=["innerHTML"];function Qi(i,r){const s=un,l=Se;return E(),oe(l,{vertical:"",justify:"end"},{default:t(()=>[n(s,{style:{margin:"0px"}}),n(l,{justify:"center"},{default:t(()=>[w("ul",Gi,[(E(!0),K(Oe,null,rt(i.$tm("descriptions"),a=>(E(),K("li",{key:a,style:{"text-align":"left"},innerHTML:a},null,8,Ki))),128))])]),_:1})]),_:1})}const Yi=Be(qi,[["render",Qi]]);function Xi(i={}){const{immediate:r=!1,onNeedRefresh:s,onOfflineReady:l,onRegistered:a,onRegisteredSW:o,onRegisterError:u}=i;let d,g,v;const y=async(c=!0)=>{await g,v==null||v()};async function x(){if("serviceWorker"in navigator){if(d=await ze(async()=>{const{Workbox:c}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:c}},[]).then(({Workbox:c})=>new c("/avif2jpeg/dist/sw.js",{scope:"/avif2jpeg/dist/",type:"classic"})).catch(c=>{u==null||u(c)}),!d)return;v=()=>{d==null||d.messageSkipWaiting()};{let c=!1;const h=()=>{c=!0,d==null||d.addEventListener("controlling",f=>{f.isUpdate&&window.location.reload()}),s==null||s()};d.addEventListener("installed",f=>{typeof f.isUpdate>"u"?typeof f.isExternal<"u"&&f.isExternal?h():!c&&(l==null||l()):f.isUpdate||l==null||l()}),d.addEventListener("waiting",h)}d.register({immediate:r}).then(c=>{o?o("/avif2jpeg/dist/sw.js",c):a==null||a(c)}).catch(c=>{u==null||u(c)})}}return g=x(),y}function Ji(i={}){const{immediate:r=!0,onNeedRefresh:s,onOfflineReady:l,onRegistered:a,onRegisteredSW:o,onRegisterError:u}=i,d=_(!1),g=_(!1);return{updateServiceWorker:Xi({immediate:r,onNeedRefresh(){d.value=!0,s==null||s()},onOfflineReady(){g.value=!0,l==null||l()},onRegistered:a,onRegisteredSW:o,onRegisterError:u}),offlineReady:g,needRefresh:d}}const er={key:0},tr=["innerHTML"],nr={key:0,class:"pwa-toast",role:"alert"},or={class:"message"},ar={key:0},lr=we({__name:"PWAPrompt",setup(i){const r=_(null),s=_("unknown"),l=_(),a=_(navigator.onLine);window.addEventListener("beforeinstallprompt",c=>{c.preventDefault(),r.value=c,l.value=!1}),window.addEventListener("appinstalled",c=>{g()}),window.addEventListener("online",()=>{a.value=!0}),window.addEventListener("offline",()=>{a.value=!1});const{offlineReady:o,needRefresh:u,updateServiceWorker:d}=Ji({onOfflineReady(){},async onNeedRefresh(){const c=await fetch(location.origin+"/avif2jpeg/dist/version.txt",{cache:"no-store"});if(c.status!==200)return;const h=await c.text();h&&(s.value=h)},onRegisterError(c){}});Re(()=>{setTimeout(()=>{l.value===void 0&&(l.value=!0),l.value},100)});function g(){var c;(c=navigator.serviceWorker)==null||c.ready.then(h=>{var f;l.value||((f=h.active)==null||f.postMessage("app-installed"),l.value=!0)})}async function v(){if(r.value&&a){r.value.prompt();const c=await r.value.userChoice;r.value=null,c.outcome==="accepted"&&g()}}async function y(){o.value=!1,u.value=!1}async function x(){await d()}return(c,h)=>{const f=Ee,z=ke,F=Se;return E(),K(Oe,null,[n(F,{justify:"start"},{default:t(()=>[r.value?(E(),K("div",er,[n(z,{to:!1,"display-directive":"show",trigger:"hover",placement:"bottom","keep-alive-on-hover":!0,style:{"max-width":"40vw"},delay:300,duration:150,"z-index":10},{trigger:t(()=>[n(f,{onClick:v,size:"tiny"},{default:t(()=>[A(p(c.$t("installAsApp")),1)]),_:1})]),default:t(()=>[w("div",{class:"pwa-tooltip",innerHTML:c.$t("PWAinstallAsAppTooltip")},null,8,tr)]),_:1})])):fe("",!0)]),_:1}),e(o)||e(u)?(E(),K("div",nr,[w("div",or,[e(u)?(E(),K("span",ar,[A(p(c.$t("PWAUpdateMessage"))+" ",1),w("p",null,p(s.value),1)])):fe("",!0)]),e(u)?(E(),oe(f,{key:0,onClick:x},{default:t(()=>[A(p(c.$t("Reload")),1)]),_:1})):fe("",!0),n(f,{onClick:y},{default:t(()=>[A(p(c.$t("close")),1)]),_:1})])):fe("",!0)],64)}}}),sr=["innerHTML"],ir=we({__name:"switch-lang",props:{delay:{}},emits:["lang-ready","lang-change"],async setup(i,{emit:r}){let s,l;const a=Ke(Ve),o=dn(),{locale:u,t:d}=De(),g=ut(),v=i,y=r,x=Object.entries(Rl).map(([I,T])=>({label:T,value:I}));x.sort((I,T)=>{const k=I.label,O=T.label;return k>O?1:k<O?-1:0}),Re(()=>{o.afterEach((I,T,k)=>{h(),a.switchToolTipVisibility()})}),[s,l]=Wa(()=>h()),await s,l();async function c(I){if(I!==u.value||ht.global.availableLocales.indexOf(I)===-1){if(y("lang-change",I),await ds(v.delay),!await Nl(I)){g.error({title:d("Failed to get language file"),positiveText:"OK",content:()=>X("div",[`lang: ${I}`])}),y("lang-ready","");return}u.value=I,document.title=d("title"),document.documentElement.lang=I,await Le()}y("lang-ready",I)}async function h(){const I=o.currentRoute.value.path||"",T=String(I.match(new RegExp("(?<=^\\/)[^/]+"))||"");T&&vt.includes(T)?(await c(T),u.value=T):await f()}async function f(){const I=z().toLowerCase(),T=I.split(/[-_]/)[0];if(vt.includes(T)){let k=T;if(T==="zh")switch(I){case"zh-hant":case"zh-mo":case"zh-hk":case"zh-tw":k="zh-hant"}await c(k)}}function z(){const I=window.navigator;return I.language||I.userLanguage||I.browserLanguage}function F(I){const T=I?I+"/":"";o.push("/"+T)}return(I,T)=>{const k=Ie,O=It,H=ke;return E(),oe(H,{to:!1,"display-directive":"show",show:e(a).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(a).LANDSCAPE.value?"left":"bottom",duration:0,delay:50},{trigger:t(()=>[n(O,{ref:"langselect",size:"tiny",style:{width:"auto"},"consistent-menu-width":!1,options:e(x),"_v-model:value":"locale",value:e(u),"onUpdate:value":F},{arrow:t(()=>[n(k,null,{default:t(()=>[n(e(Ha))]),_:1})]),_:1},8,["options","value"])]),default:t(()=>[w("div",{innerHTML:I.$t("selectLanguage")},null,8,sr)]),_:1},8,["show","placement"])}}}),Ve=Symbol("global variables"),rr=we({__name:"Avif2Jpeg",emits:["ready"],setup(i,{emit:r}){const{t:s,locale:l}=De(),a=200,o=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),u=!1,d=_(null);_(0);let g=_(void 0);const v=_(!0),y=_(!1),x=_(!1),c=_(!1),h=_(!0),f=_(!1);Ga(Ve,{showTooltipsBeforeMounted:g,LANDSCAPE:v,IS_SP:o,IS_DEV:u,switchToolTipVisibility:T,SSR:!1}),Re(()=>{k(),window.addEventListener("resize",k),T(),setTimeout(()=>x.value=!0,3e3)}),mt(()=>{window.removeEventListener("resize",k)});let z=0;function F(){c.value=!1,z=Date.now()}function I(){const N=h.value?0:Math.max(0,a-(Date.now()-z));h.value=!1,Le(()=>{setTimeout(()=>c.value=!0,N)})}async function T(){}function k(){const N=document.body.clientWidth,b=document.body.clientHeight;v.value=N*.75>b||N>900}function O(N){d.value=N}function H(N){f.value=N}return(N,b)=>{const q=sn("ClientOnly"),M=Se,J=Ie,re=Ye;return E(),oe(M,{vertical:"",align:"stretch",class:"avif2jpeg"},{default:t(()=>[n(Dl,null,{"lang-switch":t(()=>[(E(),oe(Va,null,{default:t(()=>[n(ir,{onLangChange:F,onLangReady:I,delay:e(h)?0:a},null,8,["delay"])]),_:1}))]),_:1}),n(q,null,{default:t(()=>[n(lr)]),_:1}),n(Qe,{name:"fade"},{default:t(()=>[Ze(n(M,{vertical:"",align:"stretch",justify:"space-between",style:{height:"100%"}},{default:t(()=>[n(M,{justify:"space-around",vertical:"",style:{height:"100%"}},{default:t(()=>[n(Wl),n(M,{justify:"center"},{default:t(()=>[n(Mi,{target:e(B).acceptTypeValue,"onUpdate:target":b[0]||(b[0]=R=>e(B).acceptTypeValue=R),userExtensions:e(B).editedAcceptTypes,"onUpdate:userExtensions":b[1]||(b[1]=R=>e(B).editedAcceptTypes=R),"disable-notifying-folder-select":e(B).disableNotifyingFolderSelect,"onUpdate:disableNotifyingFolderSelect":b[2]||(b[2]=R=>e(B).disableNotifyingFolderSelect=R),forbidden:e(y),onInput:O,onClick:b[3]||(b[3]=R=>H(!0)),onCancel:b[4]||(b[4]=R=>H(!1))},null,8,["target","userExtensions","disable-notifying-folder-select","forbidden"])]),_:1}),n(bi,{input:e(d),format:e(B).imageFormat,quality:e(B).imageQuality,"retain-extension":e(B).retainExtension,maxZipSizeMB:e(B).maxZipSizeMB,threads:e(B).multithread?e(B).threadCount:0,"show-note":e(f),"onUpdate:showNote":b[5]||(b[5]=R=>Ne(f)?f.value=R:null),onStart:b[6]||(b[6]=R=>y.value=!0),onEnd:b[7]||(b[7]=R=>y.value=!1)},{"lang-switch":t(()=>b[18]||(b[18]=[])),_:1},8,["input","format","quality","retain-extension","maxZipSizeMB","threads","show-note"]),n(M,{vertical:"",align:"center"},{default:t(()=>[n(re,{trigger:"manual",placement:"top","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(J,{size:"5vh",color:"#DADADA",style:{margin:"0px"}},{default:t(()=>[n(e(qa))]),_:1})]),default:t(()=>[b[19]||(b[19]=w("span",null,"CONVERT TO👇",-1))]),_:1,__:[19]})]),_:1}),n(M,{vertical:"",align:"center"},{default:t(()=>[n(ji,{format:e(B).imageFormat,"onUpdate:format":b[8]||(b[8]=R=>e(B).imageFormat=R),quality:e(B).imageQuality,"onUpdate:quality":b[9]||(b[9]=R=>e(B).imageQuality=R)},null,8,["format","quality"]),n(Vi,{"retain-ext":e(B).retainExtension,"onUpdate:retainExt":b[10]||(b[10]=R=>e(B).retainExtension=R),"use-folder-name-for-zip":e(B).useFolderNameForZip,"onUpdate:useFolderNameForZip":b[11]||(b[11]=R=>e(B).useFolderNameForZip=R),"max-zip-size":e(B).maxZipSizeMB,"onUpdate:maxZipSize":b[12]||(b[12]=R=>e(B).maxZipSizeMB=R),multithread:e(B).multithread,"onUpdate:multithread":b[13]||(b[13]=R=>e(B).multithread=R),"thread-count":e(B).threadCount,"onUpdate:threadCount":b[14]||(b[14]=R=>e(B).threadCount=R),"shrink-image":e(B).shrinkImage,"onUpdate:shrinkImage":b[15]||(b[15]=R=>e(B).shrinkImage=R),"max-width":e(B).maxWidth,"onUpdate:maxWidth":b[16]||(b[16]=R=>e(B).maxWidth=R),"max-height":e(B).maxHeight,"onUpdate:maxHeight":b[17]||(b[17]=R=>e(B).maxHeight=R)},null,8,["retain-ext","use-folder-name-for-zip","max-zip-size","multithread","thread-count","shrink-image","max-width","max-height"])]),_:1}),n(Yi)]),_:1})]),_:1},512),[[We,e(c)]])]),_:1})]),_:1})}}}),jt=we({__name:"App",setup(i){const r={Statistic:{valueFontSize:"1em"},Popover:{borderRadius:"0.4em",boxShadow:"2px 2px 5px 0px #555555"},Tooltip:{},Image:{toolbarColor:"#00000099"}},s=_(!0);return Re(()=>{s.value=!1}),(l,a)=>{const o=Xa,u=Ya,d=Qa,g=Ka,v=Ja;return E(),oe(v,{"theme-overrides":r,style:{width:"100%",height:"100%"}},{default:t(()=>[n(g,null,{default:t(()=>[n(d,{placement:"top-left",closable:!0,max:50},{default:t(()=>[n(u,null,{default:t(()=>[n(o,null,{default:t(()=>[n(rr,{class:nt({hide:e(s)})},null,8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),Qo=[{path:"/",name:"Home",component:jt}];for(const i of vt)Qo.push({path:"/"+i+"/",strict:!0,name:i,component:jt});el(jt,{routes:Qo,base:"/avif2jpeg/dist/"},({app:i,router:r,routes:s,isClient:l,initialState:a})=>{i.use(ht)});
