var Mo=Object.defineProperty;var Ro=(l,i,r)=>i in l?Mo(l,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[i]=r;var dt=(l,i,r)=>Ro(l,typeof i!="symbol"?i+"":i,r);import{r as w,a as qt,d as Ae,i as st,c as oe,o as E,_ as ye,u as e,w as t,b as z,t as d,e as n,f as jo,N as we,L as No,g as ne,B as Ce,h as un,j as m,F as Pe,k as xt,l as Do,m as K,n as Bo,p as Zo,q as Me,s as pe,v as Vn,x as Wn,y as qn,z as be,A as ze,C as Le,D as ln,E as sn,G as Je,H as pt,I as Ho,J as Vo,K as Ve,M as zt,O as se,P as ot,T as lt,Q as Gn,R as We,S as dn,U as Gt,V as cn,W as ct,X as qe,Y as jt,Z as Wo,$ as ft,a0 as qo,a1 as En,a2 as Fn,a3 as Kn,a4 as gt,a5 as Go,a6 as Kt,a7 as Ko,a8 as Qo,a9 as pn,aa as Yo,ab as Pn,ac as Qn,ad as Xo,ae as Jo,af as el,ag as Yn,ah as tl,ai as Xn,aj as De,ak as Jn,al as nl,am as Qt,an as ea,ao as On,ap as ta,aq as al,ar as ol,as as ll,at as Nt,au as sl,av as je,aw as il,ax as rl,ay as fn,az as na,aA as ul,aB as dl,aC as aa,aD as cl,aE as yt,aF as bt,aG as pl,aH as fl,aI as gl,aJ as ml,aK as vl,aL as hl,aM as _l,aN as wl,aO as yl,aP as bl,aQ as kl,aR as xl,aS as zl,aT as Al,aU as Il,aV as Tl,aW as Sl,aX as Ll}from"./vendor-HyRa2KNx.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))c(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const p of o.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&c(p)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();const Ue=w(navigator.hardwareConcurrency?Math.min(navigator.hardwareConcurrency,12):0),kt={threadCount:{min:2,max:Math.max(2,Ue.value)}},Cl={imageFormat:"image/jpeg",imageQuality:90,expandExtButtons:!1,acceptTypeValue:void 0,editedAcceptTypes:"",expandAdvSettings:!1,retainExtension:!1,maxZipSizeMB:1e3,useFolderNameForZip:!1,multithread:!0,threadCount:Ue.value,shrinkImage:!1,maxWidth:4096,maxHeight:4096,disableNotifyingFolderSelect:!1},Z=qt(oa({}));function $l(){oa(Z)}function oa(l){return Object.assign(l,Cl)}const la="avif2jpeg",tn=JSON.parse(localStorage.getItem(la)||"{}");for(const l in Z)if(tn.hasOwnProperty(l)&&tn[l]!==void 0){let i=tn[l];kt.hasOwnProperty(l)&&(kt[l].min>i&&(i=kt[l].min),kt[l].max<i&&(i=kt[l].max)),Z[l]=i}const El=()=>{const l={};for(const i in Z)l[i]=Z[i];localStorage.setItem(la,JSON.stringify(l))};window.addEventListener("beforeunload",El);const Fl=Ae({__name:"github",setup(l){const i=st(et);return(r,c)=>{const a=we,o=jo,p=ye;return E(),oe(p,{to:!1,"display-directive":"show",show:e(i).showTooltipsBeforeMounted.value,trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(o,{href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-size":"small","font-weight":"bolder"}},{default:t(()=>[n(a,null,{default:t(()=>[n(e(No))]),_:1}),c[0]||(c[0]=z("GitHub"))]),_:1})]),default:t(()=>[z(" "+d(r.$t("githubOpenSource")),1)]),_:1},8,["show"])}}}),Pl=["href"],Ol=Ae({__name:"licenses",setup(l){const i=w(!1),r={Vue:"https://github.com/vuejs/core/blob/main/LICENSE",Vite:"https://github.com/vitejs/vite/blob/main/LICENSE","Vite SSG":"https://github.com/antfu/vite-ssg/blob/main/LICENSE","Naive UI":"https://github.com/TuSimple/naive-ui/blob/main/LICENSE",Ionicons:"https://github.com/ionic-team/ionicons/blob/main/LICENSE"};return(c,a)=>{const o=Ce;return E(),ne(Pe,null,[n(o,{text:"",onClick:a[0]||(a[0]=p=>i.value=!0),style:{color:"black","font-size":"small"}},{default:t(()=>a[2]||(a[2]=[z("Licenses")])),_:1}),n(e(un),{preset:"dialog",ref:"dialog",show:i.value,"onUpdate:show":a[1]||(a[1]=p=>i.value=p),"positive-text":"OK",title:"Licenses"},{default:t(()=>[a[3]||(a[3]=m("h3",null,"Used Framework and Libraries",-1)),m("ul",null,[(E(),ne(Pe,null,xt(r,(p,h)=>m("li",null,[m("a",{href:p},d(h),9,Pl)])),64))])]),_:1},8,["show"])],64)}}}),Ul=1,Ml=10,Rl=9,jl="",Ut={major:Ul,minor:Ml,build:Rl,tag:jl},Nl={style:{"font-size":"x-small","user-select":"none"}},Dl=Ae({__name:"version",setup(l){const i=["0.0.118"],r=`${Ut.major}.${Ut.minor}.${Ut.build}${Ut.tag}`,c=i.map(h=>({label:`v${h}`,key:h,value:h}));function a(h){const{key:f,label:_}=h,y=p(f),b=K("a",{href:y},_),v=K("div",null,b);return K("div",null,v)}function o(h){location.href=p(h)}function p(h){return`/avif2jpeg/old/${h}/`}return(h,f)=>{const _=Do;return E(),oe(_,{"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start",options:e(c),"render-label":a,"onUpdate:value":o},{header:t(()=>[m("span",Nl,d(h.$t("previousVersion")),1)]),default:t(()=>[m("span",{style:{cursor:"pointer"}},"v"+d(r))]),_:1},8,["options"])}}}),Bl=Ae({__name:"header",setup(l){const i=Bo();return(r,c)=>{const a=Zo("router-link"),o=Me,p=Wn;return E(),oe(o,{vertical:"",justify:"start"},{default:t(()=>[n(o,{justify:"space-between",align:"center",wrap:!1},{default:t(()=>[n(o,{align:"center"},{default:t(()=>[n(Fl),n(Dl),n(Ol),n(o,{style:{"font-size":"small"}},{default:t(()=>[e(i).path!=="/"?(E(),oe(a,{key:0,to:"/"},{default:t(()=>c[0]||(c[0]=[z("HOME")])),_:1})):pe("",!0)]),_:1})]),_:1}),n(o,{align:"end",style:{"font-size":"x-small"}},{default:t(()=>[Vn(r.$slots,"lang-switch")]),_:3})]),_:3}),n(p,{style:{margin:"0px"}})]),_:3})}}}),Zl={style:{padding:"0px",margin:"0px","text-align":"center"}},Hl=Ae({__name:"title",setup(l){const i=qn();return be(()=>{const r=i.currentRoute.value.path||"";return!String(r.match(new RegExp("(?<=^\\/)[^/]+"))||"")}),(r,c)=>{const a=Me;return E(),oe(a,{align:"center",justify:"center",style:{margin:"0px"}},{default:t(()=>[m("h1",Zl,d(r.$t("title")),1)]),_:1})}}}),Un=new Set,Vl=new Set,Wl=new Set,Dt=new Map;function ql(l){const i=Dt.get(l);i&&(Dt.delete(l),i(),Mt==null||Mt(),Mt=null)}function Gl(){for(const l of Dt.keys())ql(l)}let Mt=null;function sa(){Gl();for(const l of Un)l.onmessage=null,l.terminate();Un.clear(),Vl.clear(),Wl.clear(),Dt.clear()}function Kl(l){return new Worker("/avif2jpeg/dist/assets/worker.zip-CRj0gJBD.js",{name:l==null?void 0:l.name})}function Ql(l){return new Worker("/avif2jpeg/dist/assets/worker.loader-C-6P6Tty.js",{name:l==null?void 0:l.name})}const Yl=1e3*10;let Xe;const Be=new Map,Bt=new Map,Zt=new Map;let gn,Q,mn,Ht,Rt,ia,ra,ua,da,It;function nn(l){if({files:Rt,completedFileIdSet:gn,ConvStats:Q,canceled:mn,props:Ht,format:ia,quality:ra,outputExt:ua,imageType:da,message:It}=l||{},Xe=null,Be.clear(),Bt.clear(),Zt.clear(),Bt.clear(),Zt.clear(),l)for(const r in l)delete l[r]}async function Xl(l){nn(l),gn.clear();let i;try{i=await Jl()}catch{return nn(),{exception:new Error("worker-load-error"),callbackToClearConverter:new Function,callbackToGenerateFailedZips:new Function}}const[r,c]=i;Xe=c;const a=new Promise(v=>{c.onmessage=u=>{const T=u.data,{action:A}=T;switch(A){case"squeeze-zip":case"zip-squeeze-error":v(void 0);break}}}),o=new Promise(v=>{r.onmessage=u=>{const{data:{action:T}}=u;T==="end-convert"&&v()}}),p=Rt.map(v=>v._id);Rt.forEach(v=>Bt.set(v._id,v));const h=ze(mn,v=>{if(!v)return;h();const u={action:"cancel-convert"};r.postMessage(u)}),f={action:"start-convert",list:Rt,fileIdList:p,outputQuality:ra,outputType:ia,threads:Ht.threads,maxSize:Z.shrinkImage?{width:Z.maxWidth,height:Z.maxHeight}:null};r.postMessage(f),await o,c.postMessage({action:"squeeze"}),await a,h();const _=()=>{sa(),c.onmessage=null,c.terminate(),r.onmessage=null,r.terminate(),nn()};let y=!1;return{callbackToClearConverter:_,callbackToGenerateFailedZips:async v=>{y||(y=!0,await rs(v,c,{},Q))}}}async function Jl(){sa();const l=new Ql,i=new Kl,r=new Promise((p,h)=>{const f=u=>{i.removeEventListener("message",b),l.removeEventListener("message",b),clearTimeout(v),u?p(u):h(u)};let _=!1,y=!1;const b=u=>{u.target===i&&(_=!0),u.target===l&&(y=!0),_&&y&&f(!0)};let v=0;i.addEventListener("message",b),l.addEventListener("message",b),v=window.setTimeout(()=>f(!1),Yl)}),{port1:c,port2:a}=new MessageChannel,o={action:"set-zip-port"};return i.postMessage({action:"set-port-loader"},[c]),l.postMessage(o,[a]),await r,i.postMessage({action:"set-config",zipSize:Ht.maxZipSizeMB*1024*1024,keepExt:Ht.retainExtension,outputExt:ua,imageType:da}),l.addEventListener("message",ts),i.addEventListener("message",es),[l,i]}const es=l=>{const i=l.data,{action:r}=i;switch(r){case"add-zip-completed":{const{fileId:p,entireIndex:h,storedPath:f}=i;return}case"respond-image":{const{url:p,index:h,path:f,size:_,fileId:y}=i;Q.convertedImageUrl=p,Q.convertedImageSize=_,Q.convertedImageIndex=h,Q.convertedImageName=f;let b="",v=0,u="";const T=Be.get(y);if(y>=0){const A=Bt.get(y);b=URL.createObjectURL(A),v=A.size,u=A.webkitRelativePath||A.name}Q.convertedImageOrgUrl=b,Q.convertedImageOrgSize=v,Q.convertedImageOrgName=u,Q.convertedImageShrinked=T==null?void 0:T.shrinked;return}case"respond-delete":{const{index:p,success:h,fileId:f}=i;Be.get(f).command="âŒdeleted",Be.get(f).completed=!1;return}}switch(r){case"error-push-filelist-zip":const{path:p}=i;Q.failedZipDone=!0,It.error(`an error occurred "${p}"`,{duration:3e3});return}const{size:c,count:a}=i,o="url"in l.data?l.data.url:"";switch(r){case"push-zip":Q.zips.push({url:o,size:c,count:a}),Q.zippedTotalCount+=a,Q.zippedTotalSize+=c;break;case"squeeze-zip":a>0&&(Q.zips.push({url:o,size:c,count:a}),Q.zippedTotalCount+=a,Q.zippedTotalSize+=c);break;case"push-filelist":Q.failedFileZippedCount++;break;case"squeeze-filelist-zip":Q.failedZipDone=!0;case"push-filelist-zip":Q.failedZips.push({url:o,size:c,count:a});break;case"zip-error":case"zip-squeeze-error":Q.zippingErrorCount+=a;break}},ts=l=>{l.target;const{data:i}=l,{action:r}=i;switch(r){case"list-start":break;case"list-end":break;case"file-start":{const{index:c,path:a,fileId:o}=i;as(c,a,o);break}case"file-load":{const{thumbnail:c,width:a,height:o,fileId:p,workerId:h,inputsize:f}=i,_=Be.get(p);_.core=h,_.command="ðŸ–¼ï¸loaded",_.width=a,_.height=o,_.size=f,c&&(Q.thumbnail=c);break}case"file-converted":{const{index:c,path:a,fileId:o,shrinked:p,outputWidth:h,outputHeight:f,outputsize:_}=i,y=Be.get(o);y.command="ðŸ”ƒconverted",y.shrinked??(y.shrinked=p),y.outputWidth=h,y.outputHeight=f,y.outputSize=_,Q.converted++;break}case"file-completed":{const{inputsize:c,outputsize:a,fileId:o,entireIndex:p,storedPath:h}=i,f=Be.get(o);f&&(f.command="âœ…completed",f.completed=!0,f.fileId=o),Q.inputTotalSize+=c,Q.outputTotalSize+=a,Q.done++,Q.success++,gn.add(o),f.zippedIndex=p,Q.ziplogs[p]={fileId:o,storedPath:h};break}case"file-retry":{const{index:c,path:a,fileId:o}=i;os(c,a,o);break}case"file-error":{const{index:c,path:a,fileId:o}=i;ls(c,a,o);break}case"file-canceled":{const{fileId:c,path:a}=i;ss(c);break}}};let ns=0;function as(l,i,r){const c={key:ns++,core:-1,index:l,path:i,command:"âž¡ï¸started"};Be.set(r,c),Q.logs.push(c),Zt.has(r)||mn.value||Q.startedCount++}function os(l,i,r){const c=Be.get(r);c.command="âš ï¸retrying",c.error=!0,It.warning(`retrying "${i}"`,{duration:3e3}),Q.retried++,Zt.set(r,1)}function ls(l,i,r){const c=Be.get(r);Q.done++,Q.failure++,c.command="â—failed",c.error=!0,It.error(`failed to load "${i}"`,{duration:5e3})}function ss(l){const i=Be.get(l);Q.done++,Q.failure++,i.command="â—canceled",i.error=!0}function is(l){Xe==null||Xe.postMessage({action:"request-image",index:l})}function an(l){Xe==null||Xe.postMessage({action:"delete-image",index:l})}async function rs(l,i,r,c){let a=0;for(const o of l){const p=(o.webkitRelativePath||o.name).replace(/^\//,"");if(c.failedZipDone)break;if(r.value)return;a-c.failedFileZippedCount>20&&await new Promise(h=>setTimeout(h,10)),i.postMessage({action:"add-filelist",file:o,path:p}),a++}if(c.failedZipDone){It.error("Zipping error files was aborted",{duration:5e3});return}i.postMessage({action:"squeeze-filelist"})}function He(l,i=2){const r=Math.sign(l);l=Math.abs(l);const c=["Bytes","KB","MB","GB"],a=l?Math.floor(Math.log(l)/Math.log(1024)):0;return`${(l/Math.pow(1024,a)*r).toFixed(i)}${c[a]}`}function ca(l,i=100,r=!1){i=typeof i=="number"?{width:i,height:i}:i;const{width:c,height:a}=i;let{width:o,height:p}=l;const h=o/p,f=c/a;return h>=f?(o=r?Math.min(c,o):c,p=o/h|0):(p=r?Math.min(a,p):a,o=p*h|0),{width:o,height:p}}class us{constructor(){dt(this,"_currentFileCount",0);dt(this,"_currentZipIndex",0);dt(this,"_totalFileCount",0);dt(this,"_zipLengthSumList",[]);dt(this,"_pathBank",{})}increase(i){return i&&(this._pathBank[i]=[this._zipLengthSumList.length,this._currentFileCount]),this._currentFileCount++,this._totalFileCount++}split(){this._zipLengthSumList.push(this._totalFileCount),this._currentZipIndex++,this._currentFileCount=0}get(i){if(typeof i=="number"){let r=this._zipLengthSumList.findIndex((o,p)=>i<o);r===-1&&(r=this._zipLengthSumList.length);const c=this._zipLengthSumList[r-1]||0,a=i-c;return[r,a]}else{const r=this._pathBank[String(i)];if(r)return r}return null}getZipIndex(){return this._currentZipIndex}getIndex(){return this._totalFileCount}}function ds(l){return new Promise(i=>setTimeout(i,l))}function cs(l,i=0){const r=w(l);return ze(r,c=>{c!==void 0&&Le(()=>{setTimeout(()=>r.value=void 0,i)})},{immediate:!0}),r}let At;async function ps(l,i,r,c,a){let o="";const p=document.createElement("canvas"),h=p.getContext("2d");let f=new ln;const _=[f],y=new us,b=r.format,v=r.quality/100,u=[...b.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),T=l.length,A=r.maxZipSizeMB*1024*1024;let I=0,$=null,N="",x="",H=0,V=0,g=0,Y=0,q=0,ie=!1;At=S=>{const[W,ae]=y.get(S),X=_[W],ue=X.get(ae,b);a.convertedImageIndex=S,a.convertedImageName=X.getPathByIndex(ae),a.convertedImageUrl=URL.createObjectURL(ue),a.convertedImageSize=ue.size;let de="",me=0,ve="";const _e=O[S];de=URL.createObjectURL(_e),me=_e.size,ve=_e.webkitRelativePath||_e.name,a.convertedImageOrgUrl=de,a.convertedImageOrgSize=me,a.convertedImageOrgName=ve};const O=[];for(const S of l){if(c.value)break;const W=S.name;let ae="";const X=S.size,ue=(S.webkitRelativePath||S.relativePath||W).replace(/^\//,""),de=document.createElement("img"),me={key:g++,core:-1,index:I++,path:ue,command:"âž¡ï¸start"};a.startedCount=I,a.logs.push(me),a.logs.length-1,o&&(URL.revokeObjectURL(o),o=""),o=URL.createObjectURL(S),x=o,H=S.size,de.src=o;const ve=await pa(de).then(()=>!0).catch(()=>!1);if(!de.complete||!ve||c.value){a.done++,a.failure++,me.command="â—failed";continue}const _e=de.width,U=de.height;p.width=_e,p.height=U,h.drawImage(de,0,0,_e,U,0,0,_e,U),me.command="ðŸ–¼ï¸imgload",a.thumbnail=de;const B=await new Promise(ce=>{const R=Ne=>{$=Ne,ce(Ne)};p.toBlob(R,b,v)});if(c.value)break;if(!B){a.failure++;continue}V=B.size,a.converted++;let J="";if(q+V>=A){try{await f.wait(),J=await f.url()}catch{ie=!0,alert("memory problem occurred");break}a.zips.push({url:J,size:q,count:Y}),a.zippedTotalCount+=Y,a.zippedTotalSize+=q,q=0,Y=0,y.split(),f=new ln,_.push(f)}q+=V;const le=ue||W;for(let ce=1;ce<255&&(ae=le.replace(r.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+(ce>1?`(${ce})`:"")+"."+u,!!f.has(ae));ce++);a.done++;try{Y++,f.add(ae,B)}catch{continue}y.increase(),O.push(S),a.inputTotalSize+=X,a.outputTotalSize+=V,a.ziplogs.push({fileId:S._id,storedPath:ae}),N=ae,me.zippedIndex=a.success,a.success++,me.command="âœ…completed",me.completed=!0,me.fileId=S._id,i.add(S._id)}if(a.success>0)if(T===1)$&&(a.convertedImageIndex=0,a.convertedImageName=N.replace(/^.*\/(?=[^/]+$)/,"").replace(r.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+u,a.convertedImageUrl=URL.createObjectURL($),a.convertedImageOrgUrl=x,a.convertedImageOrgSize=H);else try{if(ie)throw new Error("terminated zipping process for memory problems");await f.wait();const S=await f.url();a.zips.push({url:S,count:Y,size:q}),a.zippedTotalCount+=Y,a.zippedTotalSize+=q}catch{}const Te={value:!1},$e=()=>{Te.value=!0,_.forEach(S=>S.clear()),_.length=0,O.length=0,At=null};let Ee=!1;return{callbackToClearConverter:$e,callbackToGenerateFailedZips:async S=>{Ee||(Ee=!0,gs(S,A,a,Te))}}}function fs(l){At==null||At(l)}async function gs(l,i,r,c){let a=0,o=0,p=new ln;for(let h=0;h<l.length;h++){const f=l[h],_=(f.webkitRelativePath||f.name).replace(/^\//,"");if(c.value)return;try{await p.add(_,f)}catch{alert(`an error occurred during access to "${_}"`);break}if(o+=f.size,a++,r.failedFileZippedCount++,o>=i||h===l.length-1){await p.zip();const y=await p.url();r.failedZips.push({url:y,size:o,count:a}),p.clear(),o=0,a=0}}r.failedZipDone=!0}function pa(l){if(typeof l.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((i,r)=>{l.onload=i,l.onerror=r})}const Qe=(l,i)=>{const r=l.__vccOpts||l;for(const[c,a]of i)r[c]=a;return r},ms={class:"container"},vs={__name:"zipicon",setup(l){return(i,r)=>(E(),ne("span",ms,[n(e(we),null,{default:t(()=>[n(e(sn))]),_:1}),r[0]||(r[0]=m("span",{class:"text"},"ZIP",-1))]))}},hs=Qe(vs,[["__scopeId","data-v-8b8df2f0"]]),_s=["href","download","title"],ws='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',ys=Ae({__name:"thumbnail",props:{src:{},width:{},height:{},maxWidth:{default:100},maxHeight:{default:100},expand:{type:Boolean,default:!1},loading:{type:Boolean},fileName:{},allowNext:{type:Boolean},allowPrev:{type:Boolean},hidden:{type:Boolean}},emits:["load","error","next","prev"],setup(l,{expose:i,emit:r}){const{t:c}=Je(),a=l,o=r,p=w();w();const h=w(!0),f=w(""),_=w(a.width||100),y=w(a.height||100),b=w(!1),v=qt({width:_.value+"px",height:y.value+"px",minWidth:"50px",minHeight:"50px"});pt(()=>{var x,H,V;(H=(x=p.value)==null?void 0:x.previewInstRef)==null||H.setPreviewSrc(ws),URL.revokeObjectURL((((V=p.value)==null?void 0:V.imageRef)||{}).src),p.value=null});const u=w(!0);Ho(()=>{u.value=!1}),Vo(()=>{u.value=!0}),ze(a,(x,H)=>{v.width=(a.width||100)+"px",v.height=(a.height||100)+"px"}),ze(()=>a.src,(x,H)=>{u.value&&I(x)},{immediate:!0}),i({download:$,openPreview:N,active:u});async function T(x){const H=x.target,V=H.naturalWidth,g=H.naturalHeight,{width:Y,height:q}=ca({width:V,height:g},{width:a.maxWidth||100,height:a.maxHeight||100},a.expand);_.value=Y,y.value=q,o("load",{src:H.src,width:V,height:g}),h.value=!1,await new Promise(ie=>setTimeout(ie,100)),!h.value&&(b.value=!0)}function A(x){const H=x.target;o("error",H.src)}async function I(x){h.value=!0,b.value=!1,f.value=x}function $(){const x=document.createElement("a");x.href=f.value,x.download=a.fileName,x.click()}function N(){var x;(x=p.value)==null||x.click()}return(x,H)=>{const V=Gn,g=dn,Y=Me,q=zt;return Ve((E(),ne("div",null,[n(e(ye),null,{trigger:t(()=>[n(q,{show:e(h)||a.loading},{default:t(()=>[n(Y,{justify:"center",align:"center",style:se(e(v))},{default:t(()=>[m("a",{"_v-show":"!(imgloading || props.loading)",href:e(f),onClick:H[0]||(H[0]=ot(()=>{},["left","prevent"])),target:"_blank",download:a.fileName,title:a.fileName,style:{"line-height":"0px"}},[n(lt,{mode:"in-out"},{default:t(()=>[Ve(n(V,{ref_key:"nImageRef",ref:p,"show-toolbar-tooltip":"",onLoad:T,onError:A,src:e(f),width:e(_),height:e(y),style:{border:"1px solid silver"}},null,8,["src","width","height"]),[[We,e(b)]])]),_:1})],8,_s),e(h)||a.loading?(E(),oe(g,{key:0})):pe("",!0)]),_:1},8,["style"])]),_:1},8,["show"])]),default:t(()=>[z(" "+d(a.fileName),1)]),_:1})],512)),[[We,!x.hidden]])}}}),Mn=Qe(ys,[["__scopeId","data-v-6c94d582"]]),bs=["href","download","title"],ks={class:"left-num"},xs={class:"right-num"},zs=["href","download","title"],As={class:"left-num"},Is={class:"right-num"},Ts=["href","download"],Ss=Ae({__name:"image-viewer",props:{url:{},originalUrl:{},name:{},originalName:{},size:{},originalSize:{},length:{},index:{},isSingle:{type:Boolean},variousInfo:{}},emits:["demand-image","delete-image","close"],setup(l,{expose:i,emit:r}){const c=st(et),a=l,o=r;i({download:U,cleanup:Fe,openPreview:Ie,isPreviewing(){return Y.value},changeIndex(C){u.value=C}});const p=Gt(),{t:h}=Je();cn();const f=w(),_=w(),y=w(),b=ct("viewerItemContainer"),v=w(!0),u=w(Math.max(a.index,0)+1),T=w(1),A=w(1),I=w(""),$=w(""),N=w(1),x=w(1),H=w(!1),V=w(!1),g=w(!1),Y=be(()=>{var C,L;return(L=(C=y.value)==null?void 0:C.previewInstRef)==null?void 0:L.displayed}),q=be(()=>{var C,L;return((L=(C=y==null?void 0:y.value)==null?void 0:C.previewInstRef)==null?void 0:L.previewSrc)===I.value}),ie=be(()=>u.value<a.length),O=be(()=>u.value>1),Te=w("viewer-item-init"),$e=w(0),Ee=w(!0);w({width:"auto",height:"auto"});const Re=w(!1);qe(()=>{document.body.addEventListener("keydown",me),document.body.addEventListener("keydown",de),X(u.value-1),ue()}),pt(()=>{clearTimeout(S),document.body.removeEventListener("keydown",me),document.body.removeEventListener("keydown",de),Re.value=!0}),jt(()=>{URL.revokeObjectURL(a.url),URL.revokeObjectURL(a.originalUrl)});let S=-1;ze(u,(C,L)=>{u.value<1||u.value>a.length||C===L||(clearTimeout(S),C>L?Te.value="viewer-item-next":Te.value="viewer-item-prev",S=setTimeout(()=>{a.index!==u.value-1&&($e.value=v.value?$e.value:~$e.value,I.value=void 0,$.value=void 0,Ee.value=!1,X(u.value-1))},50))});let W="",ae="";ze(()=>a.url,()=>{var F,ge;let C="";a.index===0&&v.value?(v.value=!1,u.value=1,C=a.url):a.index===u.value-1?(v.value=!1,H.value=!1,C=a.url):(URL.revokeObjectURL(a.url),URL.revokeObjectURL(a.originalUrl));const L=W,ee=ae;if(URL.revokeObjectURL(L),URL.revokeObjectURL(ee),W=a.url,ae=a.originalUrl,C){try{if((ge=(F=y.value)==null?void 0:F.previewInstRef)!=null&&ge.displayed){q.value?y.value.previewInstRef.setPreviewSrc(C):y.value.previewInstRef.setPreviewSrc(a.originalUrl);try{const xe=y.value.previewInstRef.displayed;y.value.previewInstRef.handleAfterLeave(),y.value.previewInstRef.displayed=xe}catch{}}}catch{}I.value=C,$.value=a.originalUrl}},{immediate:!0});function X(C){H.value=!0,V.value=!1,g.value=!1,Le(()=>o("demand-image",C))}function ue(){if(!c.IS_SP)return;let C=b.value.$el,L=0,ee=0,F=0,ge=0,xe=0;const tt=Oe=>{L=Oe.touches[0].pageX,ee=Oe.touches[0].pageY,xe=Date.now()};C.addEventListener("touchstart",tt);const Ge=Oe=>{F=Oe.touches[0].pageX,ge=Oe.touches[0].pageY,mt()};window.addEventListener("touchmove",Ge);const te=()=>{mt();const Oe=F-L,Tt=Math.abs(Oe),Yt=ge-ee,St=Math.abs(Yt);Tt<St||Tt<30||J(Oe>0?-1:1)};window.addEventListener("touchend",te);const mt=()=>{const Oe=Date.now();Oe-xe>500&&(L=F,ee=ge),xe=Oe};pt(()=>{C.removeEventListener("touchstart",tt),window.removeEventListener("touchmove",Ge),window.removeEventListener("touchend",te),C=null})}function de(C){var L,ee,F,ge;if(C.key==="Escape")try{(ee=(L=y.value)==null?void 0:L.previewInstRef)!=null&&ee.displayed&&(C.stopPropagation(),(ge=(F=y.value)==null?void 0:F.previewInstRef)==null||ge.toggleShow(!1))}catch{}}function me(C){switch(C.code){case"ArrowRight":J(1);break;case"ArrowLeft":J(-1);break;case"Home":u.value=1;break;case"End":u.value=a.length;break;case"Space":case"Enter":if(!Y.value)return;ce();break;case"ArrowUp":case"ArrowDown":default:return}C.stopPropagation(),C.preventDefault()}function ve({width:C,height:L}){T.value=C,A.value=L,V.value=!0}function _e({width:C,height:L}){N.value=C,x.value=L,g.value=!0}function U(){q.value?f.value.download():_.value.download()}async function B(C){try{const L=await fetch(C).then(ee=>ee.blob()).then(ee=>new Promise(F=>{const ge=new FileReader;ge.onload=F,ge.readAsDataURL(ee)})).then(ee=>ee.target.result);navigator.clipboard.writeText(L),p.info({title:h("copiedDataURLDialogTitle"),content:()=>K("div",[K("div",h("copiedDataURLMessage"))]),positiveText:"OK"})}catch{p.error({title:"failed to copy Data URL",content:"could not copy Data URL",positiveText:"OK"})}}function J(C){C>0?u.value=Math.min(a.length,u.value+C)|0:C<0&&(u.value=Math.max(1,u.value+C)|0)}let le="";const ce=()=>{var L,ee,F,ge;le=(F=window.getComputedStyle((ee=(L=y==null?void 0:y.value)==null?void 0:L.previewInstRef)==null?void 0:ee.previewRef))==null?void 0:F.transform;const C=q.value;(ge=y==null?void 0:y.value)==null||ge.next(),Le(()=>{var xe;q.value===C&&((xe=y==null?void 0:y.value)==null||xe.next())})};function R(){try{Le(()=>y.value.previewInstRef.previewRef.style.transform=le)}catch{}}function Ne({nodes:C}){const L=K(pn,{color:q.value?"green":"gray",offset:[-20,-12],value:q.value?h("status.Converted"):h("status.Original")},()=>K(Ce,{round:!0,onClick(){ce()},textColor:"white",size:"small",style:{marginLeft:"4px"}},{icon:()=>K(q.value?Ko:Qo)}));C.next=K(Ce,{onClick(){J(1)},disabled:!ie.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>K(Fn)}),C.prev=K(Ce,{onClick(){J(-1)},disabled:!O.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>K(Yo)});try{const ee=C.download.children;ee.default=()=>h("save");const F=ee.trigger();F.props.onClick=U,ee.trigger=()=>F}catch{}return re(),[L,...Object.values(C)]}const ke="#pathbox-"+String(Math.random()).substring(2);let fe;function re(){var C,L,ee;try{if(fe=(ee=(L=(C=y.value)==null?void 0:C.previewInstRef)==null?void 0:L.previewWrapperRef)==null?void 0:ee.parentNode,!fe||fe.querySelector(ke))return;let F=K("div",{id:ke,onMousedown:ge=>{ge.stopPropagation()},className:"__preview-injected-pathbox"+(q.value?" converted":"")},[K("div",`${String(u.value).padStart(String(a.length).length,"0")}/${String(a.length).padStart(String(a.length).length,"0")}`),K("div",He(q.value?a.size:a.originalSize,0)),K("div",q.value?a.name:a.originalName)]);Pn(F,fe),F=null}catch{}}pt(()=>{fe&&(Pn(null,fe),fe=null)});function Ie(){f.value.openPreview()}function Fe(){}return(C,L)=>{const ee=we,F=Me,ge=Kn,xe=gt,tt=Kt,Ge=Wo;return E(),oe(F,{justify:"center",align:"center",vertical:"",style:se({visibility:v.value?"hidden":"visible"}),class:"body",ref:"body"},{default:t(()=>[n(Ge,{ref_key:"nImageGroupRef",ref:y,"show-toolbar-tooltip":"","render-toolbar":Ne,onPreviewNext:R},{default:t(()=>[n(F,{wrap:!1,align:"center",justify:"center"},{default:t(()=>[n(e(Ce),{onClick:L[0]||(L[0]=te=>J(-1)),disabled:!e(O),block:"",class:ft({"thumb-arrow":!0,pale:!e(O)}),title:C.$t("Prev")},{icon:t(()=>[n(ee,{size:"30"},{default:t(()=>[n(e(qo))]),_:1})]),_:1},8,["disabled","class","title"]),n(F,{justify:"center",ref_key:"viewerItemContainer",ref:b,class:"viewer-item-container"},{default:t(()=>[n(lt,{name:Te.value},{default:t(()=>[(E(),oe(F,{vertical:"",key:$e.value,"_v-show":"viewerItemVisibility"},{default:t(()=>[n(F,{align:"center",wrap:!1},{default:t(()=>[n(F,{vertical:""},{default:t(()=>[n(F,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(F,{align:"center",justify:"center",vertical:"",class:"original-thumb"},{default:t(()=>[m("a",{href:C.originalUrl,onClick:L[4]||(L[4]=ot(te=>{_.value.openPreview()},["prevent"])),download:C.originalName,title:C.originalName,class:"imglink"},[n(F,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(Mn,{ref:te=>{te!=null&&te.active&&(_.value=te)},src:$.value,width:1,"max-width":1,"max-height":1,loading:H.value,"file-name":C.originalName,"allow-next":u.value<a.length,"allow-prev":u.value>1,onLoad:_e,onNext:L[1]||(L[1]=te=>J(1)),onPrev:L[2]||(L[2]=te=>J(-1)),hidden:!0},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(F,{vertical:"",align:"center"},{default:t(()=>[n(F,{class:"imglink-label"},{default:t(()=>[z(d(e(h)("status.Original")),1)]),_:1}),n(F,{justify:"center",class:"img-size",wrap:!1},{default:t(()=>[m("span",ks,d(g.value?N.value:"?"),1),L[11]||(L[11]=z(" Ã— ")),m("span",xs,d(g.value?x.value:"?"),1)]),_:1}),n(F,{justify:"center"},{default:t(()=>[L[3]||(En(-1,!0),(L[3]=n(F,null,{default:t(()=>[z(d(g.value?e(He)(a.originalSize,0):"?"),1)]),_:1})).cacheIndex=3,En(1),L[3])]),_:1})]),_:1})]),_:1})],8,bs)]),_:1}),n(F,{vertical:"",align:"center",style:{margin:"1em"},class:"original-thumb"},{default:t(()=>[n(ee,{size:"20",color:"silver",component:e(Fn)},null,8,["component"])]),_:1}),m("a",{href:I.value,onClick:L[5]||(L[5]=ot(te=>Ie(),["prevent"])),download:a.name,title:a.name,class:"imglink"},[n(F,{vertical:"",align:"center",justify:"center"},{default:t(()=>[n(F,{class:"imglink-label"},{default:t(()=>[z(d(e(h)("status.Converted")),1)]),_:1}),n(F,{vertical:"",align:"center",justify:"center",size:0},{default:t(()=>[n(F,{justify:"center"},{default:t(()=>{var te;return[n(F,{wrap:!1,style:se((te=a.variousInfo)!=null&&te.shrinked?{color:"blue"}:{}),class:"img-size"},{default:t(()=>[m("span",As,d(V.value?T.value:"?"),1),L[12]||(L[12]=z(" Ã— ")),m("span",Is,d(V.value?A.value:"?"),1)]),_:1},8,["style"])]}),_:1})]),_:1}),n(F,{justify:"center"},{default:t(()=>[z(d(V.value?e(He)(a.size,0):"?"),1)]),_:1})]),_:1})],8,zs)]),_:1}),n(F,{ref:"fileNameContainer",justify:"center",align:"center",class:"pathbox",title:a.name},{default:t(()=>[n(ge,{"x-scrollable":!0,trigger:"hover",style:{"text-align":"center","font-size":"smaller",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},{default:t(()=>[z(d(V.value?a.name:"?"),1)]),_:1})]),_:1},8,["title"])]),_:1}),n(F,{vertical:""},{default:t(()=>[n(Mn,{ref:te=>{te!=null&&te.active&&(f.value=te)},src:I.value,width:142,"max-width":140,"max-height":100,loading:H.value,"file-name":a.name,"allow-next":u.value<a.length,"allow-prev":u.value>1,onLoad:ve,onNext:L[6]||(L[6]=te=>J(1)),onPrev:L[7]||(L[7]=te=>J(-1))},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(F,{justify:"center",wrap:!0},{default:t(()=>[n(xe,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[m("a",{href:a.url,ref:"saveImg",target:"_blank",download:a.name},[n(e(Ce),{disabled:!V.value,round:"",size:"tiny"},{default:t(()=>[z(d(C.$t("save")),1)]),_:1},8,["disabled"])],8,Ts)]),default:t(()=>[z(" "+d(C.$t("save")),1)]),_:1}),n(xe,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(e(Ce),{disabled:!V.value,onClick:L[8]||(L[8]=te=>B(a.url)),round:"",size:"tiny"},{default:t(()=>L[13]||(L[13]=[z("DataURL")])),_:1},8,["disabled"])]),default:t(()=>[z(" "+d(C.$t("convertedImageDataUrlTooltip")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1},8,["name"])]),_:1},512),n(e(Ce),{onClick:L[9]||(L[9]=te=>J(1)),disabled:!e(ie),block:"",class:ft({"thumb-arrow":!0,next:!0,pale:!e(ie)}),title:C.$t("Next")},{icon:t(()=>[n(ee,{size:"30"},{default:t(()=>[n(e(Go))]),_:1})]),_:1},8,["disabled","class","title"])]),_:1}),Ve(n(F,{style:{width:"100%"},wrap:!1},{default:t(()=>[n(tt,{value:u.value,"onUpdate:value":L[10]||(L[10]=te=>u.value=te),tooltip:!1,step:1,min:1,max:a.length,keyboard:!1,class:"index-slider"},null,8,["value","max"]),n(F,{class:"index",align:"center",justify:"center",wrap:!1,size:3},{default:t(()=>[n(F,null,{default:t(()=>[z(d(e(h)("status.index"))+":",1)]),_:1}),n(F,{justify:"end",align:"center",class:"counter"},{default:t(()=>[z(d(u.value),1)]),_:1}),n(F,null,{default:t(()=>L[14]||(L[14]=[z("/")])),_:1}),n(F,{justify:"start",align:"center",class:"counter"},{default:t(()=>[z(d(a.length),1)]),_:1})]),_:1})]),_:1},512),[[We,!C.isSingle]])]),_:1},512)]),_:1},8,["style"])}}}),Ls=Qe(Ss,[["__scopeId","data-v-67f9ab1f"]]),Cs={class:"status-table"},$s={class:"started"},Es={class:"mini-counter"},Fs={class:"failure"},Ps={class:"mini-counter"},Os={colspan:"2"},Us={class:"completed"},Ms={class:"main-counter"},Rs={class:"total"},js={class:"main-counter"},Ns=Ae({__name:"status.center-column",props:{processing:{type:Boolean},interval:{},statusColor:{},success:{},successTo:{},successFrom:{},index:{},length:{},failure:{},retried:{},successPercTo:{},successPercFrom:{}},setup(l){const i=l,r=cn(),c=w(r.value.successColor),a=w(!1);return ze(()=>i.processing,o=>{o||(i.success===i.length?a.value=!0:c.value=r.value.errorColor)}),(o,p)=>{const h=gt,f=we,_=Jo,y=Me,b=Qn;return E(),oe(b,{type:"multiple-circle","stroke-width":2,percentage:[o.successTo/o.length*100|0,o.index/o.length*100|0],color:[e(r).successColor,o.statusColor],"rail-style":[{stroke:e(c),opacity:.3}]},{default:t(()=>[n(y,{vertical:"",align:"center",justify:"center",size:0,style:{"font-family":"v-mono","white-space":"nowrap"},wrap:!1,"wrap-item":!1},{default:t(()=>[m("table",Cs,[m("tbody",null,[m("tr",$s,[m("td",null,d(o.$t("status.started"))+":",1),m("td",Es,[n(h,{trigger:"hover",style:se({color:e(r).infoColor}),placement:"left"},{trigger:t(()=>[m("span",{style:se({color:e(r).infoColor})},d(o.index.toLocaleString("en-us")),5)]),default:t(()=>[z(" "+d(o.$t("status.progressStarted"))+" ("+d(o.index.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])])]),m("tr",Fs,[m("td",null,d(o.$t("status.failure"))+":",1),m("td",Ps,[n(h,{trigger:"hover",style:se({color:e(r).errorColor}),placement:"left"},{trigger:t(()=>[m("span",{style:se({color:e(r).errorColor})},d(o.failure.toLocaleString("en-us")),5)]),default:t(()=>[z(" "+d(o.$t("status.progressErrors"))+" ("+d(o.failure.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"]),o.retried>0?(E(),oe(h,{key:0,trigger:"hover",style:se({color:e(r).warningColor}),placement:"left"},{trigger:t(()=>[m("span",{style:se({color:e(r).warningColor})}," ("+d(o.retried.toLocaleString("en-us"))+") ",5)]),default:t(()=>[z(" "+d(o.$t("status.progressRetries"))+" ("+d(o.retried.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):pe("",!0)])]),m("tr",null,[m("td",Os,[n(y,{size:0,align:"center",justify:"center",style:se({color:o.processing?o.statusColor:e(c)}),wrap:!1,class:"perc"},{default:t(()=>[e(a)?(E(),oe(f,{key:0,component:e(Xo)},null,8,["component"])):pe("",!0),n(_,{duration:o.interval*3|0,from:o.successPercFrom|0,to:o.successPercTo|0,active:!0},null,8,["duration","from","to"]),p[0]||(p[0]=z("% "))]),_:1},8,["style"])])]),m("tr",Us,[m("td",null,d(o.$t("status.success"))+":",1),m("td",Ms,[n(h,{trigger:"hover",duration:0,delay:0,style:se({color:e(r).successColor}),placement:"bottom"},{trigger:t(()=>[m("span",{style:se({color:e(r).successColor})},[n(_,{duration:o.interval*3|0,from:o.successFrom,to:o.successTo,active:!0,"show-separator":!0},null,8,["duration","from","to"])],4)]),default:t(()=>[z(" "+d(o.$t("status.progressSuccess"))+" ("+d(o.successTo.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])])]),m("tr",Rs,[m("td",null,d(o.$t("status.all"))+":",1),m("td",js,[n(h,{trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:t(()=>[z(d(o.length.toLocaleString("en-us")),1)]),default:t(()=>[z(" "+d(o.$t("status.progressTotal"))+" ("+d(o.length.toLocaleString("en-us"))+") ",1)]),_:1})])])])])]),_:1})]),_:1},8,["percentage","color","rail-style"])}}}),Ds={key:0},Bs={style:{}},Zs={key:0,class:"log-table",ref:"table"},Hs={class:"log-tr label"},Vs=["title"],Ws={style:{"min-width":"7em"},class:"log-th"},qs={style:{"padding-left":"2em"},class:"log-th"},Gs={ref:"tbody"},Ks=["onClick","onDblclick"],Qs={class:"log-td"},Ys={class:"log-td"},Xs={class:"log-td"},Js={class:"log-td"},ei={key:0,class:"log-td log-extra",style:{"padding-left":"0.5em"}},ti={key:0},ni={key:1,style:{color:"blue"}},ai=["innerHTML"],oi={style:{margin:"1px"}},li=["href","download","onClick"],si={key:0,style:{position:"relative"}},ii=["href","download"],ri=["href","download"],ui={key:0,style:{margin:"1px"}},di=["href","download","onClick"],Rn=3,ci=100,pi=Ae({__name:"status",props:{processing:{type:Boolean},status:{},interval:{}},emits:["all-zips-clicked","demand-zip-errors","demand-image","delete-image"],setup(l,{expose:i,emit:r}){const c={itemMargin:"1px",titlePadding:"2px",titleFontSize:"0.8rem"},a=Gt(),{t:o}=Je(),p=cn(),h={W:160,H:80},f=l,_=r;i({cleanup:zn});const y=w(!1),b=w([]),v=w(!1);ct("table");const u=ct("tbody"),T=w(null),A=w([]),I=w([]),$=w([0,0]),N=w([0,0]),x=w([0,0]),H=w([0,0]),V=w([0,0]),g=w([0,0]),Y=w(0),q=w(0),ie=w([0,0]),O=w(p.value.infoColor),Te=w("#000000"),$e=w("#000000"),Ee=w(0),Re=w(0),S=w(""),W=w("00:00:00"),ae=w(void 0),X=w(!1),ue=w(!0);w(!1);const de=w(80),me=w(200),ve=be(()=>B.value.includes("log")),_e=be(()=>{let s=b.value;switch(Lt.value){case"success":s=s.filter(k=>k.completed);break;case"error":s=s.filter(k=>!k.completed);break}return s}),U=cs(!1),B=w(["progress","log","output"]),J=s=>B.value.includes(s),le=s=>B.value.push(s),ce=s=>{const k=B.value.findIndex(P=>P===s);k>=0&&B.value.splice(k,1)},R=qt({name:"",originalName:"",size:0,url:"",originalUrl:"",originalSize:0,dataUrl:"",index:0,various:{shrinked:!1}}),Ne=ct("body"),ke=w(null),fe=w(null),re=w(),Ie=ct("imageViewer");qe(()=>{ze(f.status,()=>mt(),{deep:!1}),ze([fe,ve],()=>{if(!fe.value||!ve.value)return;const{width:j,height:D}=ca(fe.value,{width:h.W,height:h.H});ke.value.width=j,ke.value.height=D,ke.value.style.width=j+"px",ke.value.style.height=D+"px",fe.value instanceof HTMLImageElement?ke.value.getContext("2d").drawImage(fe.value,0,0,j,D):(ke.value.getContext("bitmaprenderer").transferFromImageBitmap(fe.value),fe.value.close(),fe.value=null,f.status.thumbnail=null)});let s=0;const k=()=>{if(s)return;const j=Date.now();W.value="00:00:00",s=window.setInterval(()=>{const D=(Date.now()-j)/1e3;W.value=`${String(D/3600|0).padStart(2,"0")}:${String(D/60%60|0).padStart(2,"0")}:${String(D%60|0).padStart(2,"0")}`},300)};k(),ze(()=>f.processing,(j,D)=>{j?(k(),b.value.length=0,y.value=!1,v.value=!1,A.value=[],I.value=[]):(clearInterval(s),s=0),f.processing||Oe()}),C=el(),F(),window.addEventListener("resize",F);const P=new ResizeObserver(F);P.observe(C.parent.parent.vnode.el),pt(()=>{clearInterval(s),clearTimeout(Fe),clearTimeout(te),clearTimeout(_t),window.removeEventListener("resize",F),P.disconnect()}),jt(()=>clearInterval(s))});let Fe,C;const L=w(document.documentElement.clientHeight),ee=w(10),F=()=>{clearTimeout(Fe),Fe=setTimeout(()=>{const s=re.value.$parent.$el.offsetHeight,k=window.innerHeight-C.parent.parent.vnode.el.offsetHeight-8,P=Math.max(100,s+k);L.value=document.documentElement.clientHeight,ee.value=P,!(!ve.value||!X.value)&&(de.value=Math.max(P,me.value))},100)};pt(()=>{zn()}),jt(()=>{clearTimeout(Fe),clearTimeout(te),clearTimeout(_t),clearTimeout(Ct)}),ze([()=>f.status.zips.length,()=>f.status.failedZips.length],()=>{const s=f.status;{A.value.length>s.zips.length&&(A.value.length=0);let k=0;const P=s.zips.length===1&&s.zippedTotalCount===s.length;for(let j=A.value.length;j<s.zips.length;j++){const D=s.zips[j],G=s.baseZipName+(P?"":"-"+String(j+1).padStart(2,"0"))+".zip";k+=D.size,A.value[j]={url:D.url,size:D.size,number:P?0:j+1,sizeByUnit:He(D.size),name:G,count:D.count,clicked:!1}}}{I.value.length>s.failedZips.length&&(I.value.length=0);let k=0;const P=s.failedZipDone&&s.failedZips.length===1;for(let j=I.value.length;j<s.failedZips.length;j++){const D=s.failedZips[j],G=s.baseZipName+"-error"+(P?"":"-"+String(j+1).padStart(2,"0"))+".zip";k+=D.size,I.value[j]={url:D.url,size:D.size,number:P?0:j+1,sizeByUnit:He(D.size),name:G,count:D.count,clicked:!1}}}});let ge=!1,xe=0;ze(()=>R.index,async()=>{var D;const s=R.index;let k=_e.value.findIndex(G=>G.zippedIndex===s);k===-1&&(k=s);const P=k<ht.value,j=k>ht.value+Xt.value;if(P||j){const G=k*Ke-(j?de.value:0);(D=re.value)==null||D.scrollTo({behavior:"instant",top:G}),await Le(),it(!0),await Le()}Le(()=>{var Se,nt,at;let G=T.value;G&&(xe>k&&(G=G.previousSibling||G,G instanceof HTMLElement||((Se=re.value)==null||Se.scrollTo(0,0),G=null)),(nt=G==null?void 0:G.scrollIntoView)==null||nt.call(G,{behavior:"instant",block:"nearest"}),ge||J("preview")&&((at=Ie.value)==null||at.$el.scrollIntoView({behavior:"smooth",block:"nearest"})),xe=k,ge=!1)})});const tt=f.interval||100;let Ge=!1,te=0;function mt(){if(Ge)return;if(te){Ge=!0;return}te=window.setTimeout(()=>{te=0,Ge&&(Ge=!1,mt())},tt);const s=f.status;y.value=s.length>=2,N.value[1]=N.value[0],N.value[0]=s.startedCount,x.value[1]=x.value[0],x.value[0]=s.success,H.value[1]=H.value[0],H.value[0]=s.failure,V.value[1]=V.value[0],V.value[0]=s.done,g.value[1]=g.value[0],g.value[0]=s.converted,Y.value=s.retried,q.value=s.length,ie.value[1]=ie.value[0],ie.value[0]=s.zippedTotalCount,Ee.value=s.inputTotalSize,Re.value=s.outputTotalSize;const k=Re.value-Ee.value;S.value=(k>=0?"+ ":"")+He(k);const P=Re.value/Ee.value,j=(256|Math.min(255,Math.max(0,P-1.5)*255|0)).toString(16).substring(1);Te.value="#"+j+"0000";const D=1024*1024,G=(256|Math.min(255,Math.max(0,k/1024/D)*255|0)).toString(16).substring(1);if($e.value="#"+G+"0000",$.value[1]=$.value[0],$.value[0]=x.value[0]/q.value*100,ve.value||!f.processing){const Se=s.logs;b.value.push(...Se),Se.length&&(Le(it),ue.value&&Et())}s.logs.length=0,fe.value=s.thumbnail,f.processing&&(O.value=H.value[0]?p.value.errorColor:Y.value?p.value.warningColor:p.value.infoColor),s.convertedImageUrl!==R.url&&(R.url=s.convertedImageUrl,R.name=s.convertedImageName,R.dataUrl=s.convertedImageDataUrl,R.size=s.convertedImageSize||s.outputTotalSize,R.originalSize=s.convertedImageOrgSize,R.originalName=s.convertedImageOrgName,R.index=s.convertedImageIndex,R.originalUrl=s.convertedImageOrgUrl,R.various={shrinked:s.convertedImageShrinked})}function Oe(){f.status,O.value=f.status.success===f.status.length?p.value.successColor:p.value.errorColor,X.value||(ce("log"),X.value=!0),le("preview")}async function Tt(s,k,P,j){var G;if(!s)return;const D=j;J("preview")||(le("preview"),await Le()),(G=Ie.value)==null||G.changeIndex(D+1),await Le(()=>{var Se;try{(Se=Ie.value)==null||Se.$el.scrollIntoView({behavior:"instant",block:"nearest"})}catch{}})}function Yt(s){var at,Ze;const k=b.value,P=k.findIndex(rt=>rt.zippedIndex===R.index);let j=0,D=1;switch(s.code){case"ArrowUp":j=-1;break;case"ArrowDown":j=1;break;case"PageUp":j=-1,D=de.value/Ke|0;break;case"PageDown":j=1,D=de.value/Ke|0;break;case"Enter":P>=0&&((at=Ie.value)!=null&&at.isPreviewing()||(Le(()=>{var rt;return(rt=Ie.value)==null?void 0:rt.openPreview()}),s.stopPropagation(),s.preventDefault()));break;default:return}let G=P,Se=-1;const nt=k.length;do{if(G+=j,G<0||G>nt-1||G===P)break;if(k[G].completed){if(Se=G,--D>0)continue;break}}while(!0);Se>=0&&((Ze=Ie.value)==null||Ze.changeIndex(k[Se].zippedIndex+1),s.preventDefault()),ge=!0}const St=[{label:()=>o("status.showAll"),value:""},{label:()=>o("status.showOnlySuccess"),value:"success"},{label:()=>o("status.showOnlyError"),value:"error"}],Lt=w(St[0].value),_n=be(()=>[{key:"open",label:o("status.openFailedList"),icon:()=>K(we,()=>K(Yn)),onSelect(){xn()}},{key:"download",label:o("status.saveFailedList"),icon:()=>K(we,()=>K(tl)),onSelect(){xn(!0)}},{key:"zip",label:`${o("status.zipFailedList")}`+(f.status.failedZipDone?`(âœ”${o("status.done")})`:""),icon:()=>K(zt,{show:v.value&&!f.status.failedZipDone,size:"small"},()=>K(we,()=>K(sn))),disabled:v.value,onSelect(s){return v.value=!0,_("demand-zip-errors"),!1}}]);function vt(s,k=!1){const{url:P,name:j}=s;if(k){const D=document.createElement("a");D.href=P,D.download=j,D.click()}s.clicked||(s.clicked=!0,f.processing||A.value.every(D=>D.clicked)&&_("all-zips-clicked"))}async function Io(){if(y.value){if(A.value.length>=2&&!await new Promise((P,j)=>a.warning({title:o("Download"),content:o("status.confirmDownloadMessage",[A.value.length]),positiveText:"OK",negativeText:o("cancel"),onPositiveClick:()=>P(!0),onNegativeClick:()=>j()})))return;const s=A.value;for(const k of s)vt(k,!0)}else Ie.value.download()}const wn=w({height:"0px"}),yn=w({height:"0px"}),ht=w(0),Xt=be(()=>de.value/Ke+Rn*2|0);let Ke=15,Jt=0,Ct=0,en=0,bn=-999,kn=-1;function it(s){const k=Date.now();if(s!==!0){if(Ct)return;if(k-en<30){Ct=window.setTimeout(()=>{Ct=0,it()},30-(k-en));return}}en=k,Jt||(Jt=u.value.rows[1].offsetHeight,Ke=Jt);const P=_e.value.length,D=re.value.scrollbarInstRef.containerRef.scrollTop;if(!s&&P===kn&&Math.abs(D-bn)<Ke*.5)return;bn=D,kn=P;const G=Math.max(0,(D/Ke|0)-Rn);ht.value=G,wn.value.height=G*Ke+"px",yn.value.height=Math.max(0,P-(G+Xt.value))*Ke+"px"}function To(){var s;(s=re.value)==null||s.scrollTo(0,0),it()}ze(ve,s=>{s&&it()});function xn(s=!1){const k=new Blob([f.status.unconvertedListText],{type:"text/plain;charset=utf8"}),P=URL.createObjectURL(k),j=document.createElement("a");j.href=P,j.target="_blank",s&&(j.download=f.status.baseZipName+"-error.txt"),j.click()}let _t=0,$t=!1;function Et(s=!1){if(!$t){if(_t){$t=!0;return}Le(()=>{!s&&!ue.value||(re.value.scrollTo({behavior:"instant",top:b.value.length*50}),_t=window.setTimeout(()=>{_t=0,$t&&($t=!1,Et())},ci))})}}const wt=w(!1);function zn(){wt.value=!0,URL.revokeObjectURL(R.url),URL.revokeObjectURL(R.originalName),R.originalUrl="",R.url="",R.index=0,f.status.logs.length=0,b.value.length=0,I.value.length=0,A.value.length=0,X.value=!1}return(s,k)=>{const P=Me,j=nl,D=Jn,G=Qt,Se=ea,nt=ye,at=Kt,Ze=gt,rt=dn,An=Qn,Ft=Ce,So=hs,In=pn,Lo=al,Co=Xn;return E(),oe(P,{ref_key:"body",ref:Ne,vertical:"",justify:"center"},{default:t(()=>[n(Co,{"display-directive":"show","trigger-areas":["arrow","main"],"expanded-names":e(B),"onUpdate:expandedNames":k[14]||(k[14]=M=>De(B)?B.value=M:null),"theme-overrides":c},{default:t(()=>[n(D,{name:"progress",style:{"white-space":"nowrap"}},{header:t(({collapsed:M})=>[n(P,null,{default:t(()=>[z(d(s.$t("status.Progress"))+" ",1),M?(E(),ne(Pe,{key:0},[z(" ("+d(e($)[0]|0)+"%) ",1)],64)):pe("",!0)]),_:2},1024)]),default:t(()=>[n(P,{justify:"center",align:"center",wrap:!1,style:{"white-space":"nowrap","margin-top":"-2em"}},{default:t(()=>[n(P,{vertical:"",justify:"center",class:"left-column"},{default:t(()=>[n(j,{"tabular-nums":"",label:s.$t("status.elapsedTime")},{default:t(()=>[n(P,null,{default:t(()=>[z(d(e(W)),1)]),_:1})]),_:1},8,["label"]),n(j,{"tabular-nums":"",label:s.$t("status.multiThreading")},{default:t(()=>[n(P,{style:se({color:f.status.threads?"":"red",fontSize:"0.7rem"})},{default:t(()=>[z(d(f.status.threads?s.$rt("{n} @:threads",f.status.threads):s.$t("disabled")),1)]),_:1},8,["style"])]),_:1},8,["label"]),n(j,{"tabular-nums":"",label:s.$t("status.outputSettings")},{default:t(()=>[n(P,{vertical:"",justify:"end",style:{"font-size":"0.6rem","line-height":"0.6rem"}},{default:t(()=>[m("div",null,d(s.$t("settings.imageType"))+": "+d(f.status.type),1),s.status.shrink?(E(),ne("div",Ds,[z(d(s.$t("status.Shrinking"))+": ",1),m("span",Bs,d(s.status.shrink[0])+"Ã—"+d(s.status.shrink[1]),1)])):pe("",!0),m("div",null,"Zip: "+d(f.status.zipSize)+"MB",1)]),_:1})]),_:1},8,["label"])]),_:1}),e(wt)?pe("",!0):(E(),oe(Ns,{key:0,index:e(N)[0],success:e(x)[0],length:s.status.length,"success-to":e(x)[0],"success-from":e(x)[1],failure:e(H)[0],"success-perc-to":e($)[0],"success-perc-from":e($)[1],retried:e(Y),processing:s.processing,interval:e(tt),"status-color":e(O),class:"center-column"},null,8,["index","success","length","success-to","success-from","failure","success-perc-to","success-perc-from","retried","processing","interval","status-color"])),n(P,{vertical:"",style:{height:"100%"},justify:"center"},{default:t(()=>[n(j,{"tabular-nums":"",label:s.$t("status.inputSize")},{default:t(()=>[n(P,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[z(d((e(Ee)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(j,{"tabular-nums":"",label:s.$t("status.outputSize")},{default:t(()=>[n(P,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[z(d((e(Re)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(j,{"tabular-nums":"",label:s.$t("status.outInRate")},{default:t(()=>[n(P,{vertical:"",align:"end",justify:"start",style:{"font-size":"smaller","font-family":"v-mono","line-height":"50%"}},{default:t(()=>[m("span",{style:se({color:e(Te),fontSize:"larger"})},"Ã— "+d((e(Re)/e(Ee)||1).toFixed(2)),5),m("span",{style:se({color:e($e)})},"("+d(e(S))+")",5)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),n(D,{name:"log",style:{"white-space":"nowrap"}},{header:t(()=>[n(P,{align:"center",wrap:!1},{default:t(()=>[z(d(s.$t("status.Log")),1),Ve(n(e(zt),{size:16},null,512),[[We,s.processing&&!e(ve)]])]),_:1})]),"header-extra":t(()=>[Ve(n(P,{align:"center",justify:"end",wrap:!0,style:{"margin-top":"0.2em","margin-left":"0.5em"}},{default:t(()=>[n(G,{value:e(Lt),"onUpdate:value":[k[0]||(k[0]=M=>De(Lt)?Lt.value=M:null),k[1]||(k[1]=M=>To())],options:St,placeholder:s.$t("status.filterLogSelect"),size:"tiny",style:{width:"auto","font-size":"smaller"},"consistent-menu-width":!1,"show-on-focus":!1},null,8,["value","placeholder"]),n(Se,{key:"b",checked:e(ue),"onUpdate:checked":[k[2]||(k[2]=M=>De(ue)?ue.value=M:null),k[3]||(k[3]=M=>M&&Et(!0))],size:"small",style:{"font-size":"smaller"}},{default:t(()=>[z(d(s.$t("status.autoScroll")),1)]),_:1},8,["checked"]),n(Ze,{trigger:"hover",show:e(U),disabled:!e(X),placement:"top",delay:0},{trigger:t(()=>[n(nt,{style:{"max-width":"30em"},disabled:!0},{trigger:t(()=>[n(Se,{size:"small",checked:e(X),"onUpdate:checked":[k[4]||(k[4]=M=>De(X)?X.value=M:null),k[5]||(k[5]=M=>{M&&(Et(!0),F(),U.value=!0)})],style:{"font-size":"smaller"}},{default:t(()=>[z(d(s.$t("status.expandLog")),1)]),_:1},8,["checked"])]),default:t(()=>[z(d(s.$t("status.expandLog")),1)]),_:1})]),default:t(()=>[n(P,{wrap:!1,align:"center",style:{"font-size":"0.8rem"}},{default:t(()=>[n(at,{value:e(me),"onUpdate:value":k[6]||(k[6]=M=>De(me)?me.value=M:null),onUpdateValue:F,disabled:!e(X),"format-tooltip":M=>`Log size: ${M}`,tooltip:!0,step:1,min:e(ee),max:e(L),style:{"z-index":"3",width:"100px"}},null,8,["value","disabled","format-tooltip","min","max"])]),_:1})]),_:1},8,["show","disabled"])]),_:1},512),[[We,e(ve)]])]),default:t(()=>[n(P,{wrap:!1,align:"stretch",class:ft({"log-container":1,"expand-log":e(X)}),style:se(e(X)?{height:e(de)+"px"}:{height:"110px"}),onKeydown:Yt,tabindex:"-1"},{default:t(()=>[n(e(Kn),{ref_key:"scrollref",ref:re,distance:10,"x-scrollable":!0,onMousedownCapture:k[7]||(k[7]=M=>ue.value=!1),onWheel:k[8]||(k[8]=M=>ue.value=!1),onScroll:it,load:"handleLogLoad",trigger:"none",style:se([{"z-index":"2","padding-right":"10px",height:"100%"},e(X)?{height:e(de)+"px"}:{}]),size:50},{default:t(()=>[e(ve)?(E(),ne("table",Zs,[m("thead",null,[m("tr",Hs,[m("th",{class:"log-th",title:s.$t("status.table.core")},"th",8,Vs),k[15]||(k[15]=m("th",{class:"log-th"},"no.",-1)),m("th",Ws,d(s.$t("status.table.status")),1),m("th",qs,d(s.$t("status.table.details")),1)])]),m("tbody",Gs,[m("tr",{style:se(e(wn))},null,4),(E(!0),ne(Pe,null,xt(e(_e).slice(e(ht),e(ht)+e(Xt)),({index:M,key:ut,command:Ye,path:Pt,core:Tn,zippedIndex:Ot,completed:Sn,fileId:$o,shrinked:Eo,width:Ln,height:Fo,outputWidth:Cn,outputHeight:Po,size:Oo,outputSize:Uo},kr)=>(E(),ne("tr",{key:ut,class:ft({"log-tr":1,completed:Sn,selected:e(R).index===Ot}),ref_for:!0,ref:$n=>{e(R).index===Ot&&(T.value=$n)},onClick:$n=>Tt(Sn,Pt,$o,Ot),onDblclick:()=>{e(R).index===Ot&&e(Ie).openPreview()}},[m("td",Qs,d(Tn>=0?Tn+1:"-"),1),m("td",Ys,d(M+1),1),m("td",Xs,d(Ye),1),m("td",Js,d(Pt),1),Ln?(E(),ne("td",ei,[z(d(`[${Ln}Ã—${Fo}] (${e(He)(Oo,0)})`)+" ",1),Cn?(E(),ne("span",ti,[k[16]||(k[16]=z(" â†’ ")),m("span",null," ("+d(e(He)(Uo,0))+") ",1)])):pe("",!0),Eo?(E(),ne("span",ni,d(` [${Cn}Ã—${Po}]`),1)):pe("",!0)])):pe("",!0)],42,Ks))),128)),m("tr",{style:se(e(yn))},null,4)],512)],512)):pe("",!0),k[17]||(k[17]=m("div",{style:{height:"1em"}},null,-1))]),_:1},8,["style"]),n(P,{style:se([{"align-self":"center",position:"absolute","z-index":"0","margin-top":"10px",right:"0.1em","line-height":"0px"},{width:h.W+"px",height:h.H+"px"}]),justify:"center",align:"center"},{default:t(()=>[n(e(zt),{size:"small",show:s.processing},{default:t(()=>[f.status.thumbnail===void 0?(E(),oe(rt,{key:0,description:"EMPTY"})):pe("",!0),Ve(m("canvas",{ref_key:"thumbcanvas",ref:ke,width:"106",height:"80",style:se({border:"1px solid gray",filter:s.processing?"":"opacity(0.35)"})},null,4),[[We,f.status.thumbnail!==void 0]])]),_:1},8,["show"])]),_:1},8,["style"])]),_:1},8,["class","style"])]),_:1}),n(D,{title:s.$t("status.PreviewImage"),name:"preview",style:{"white-space":"nowrap"},disabled:!(e(x)[0]>0)},{default:t(()=>[n(P,{justify:"center",align:"center",vertical:""},{default:t(()=>[n(Ls,{"_v-else-if":"imageViewerStarted && status.success > 0 /*&& (props.status.threads || !zippingFlag)*/ && !cleaningUp",ref_key:"imageViewer",ref:Ie,url:e(R).url,size:e(R).size,"original-url":e(R).originalUrl,"original-size":e(R).originalSize,name:e(R).name,originalName:e(R).originalName,length:e(x)[0],index:e(R).index,"various-info":e(R).various,"is-single":!e(y),onDemandImage:k[9]||(k[9]=M=>_("demand-image",M)),on_deleteImage:k[10]||(k[10]=M=>_("delete-image",M)),_close:"imageViewerStarted=false"},null,8,["url","size","original-url","original-size","name","originalName","length","index","various-info","is-single"])]),_:1})]),_:1},8,["title","disabled"]),n(D,{name:"output",style:{"white-space":"nowrap"},disabled:""},{header:t(()=>[m("span",{style:{color:"black"},innerHTML:s.$t("status.Output")},null,8,ai)]),default:t(()=>[n(P,{wrap:!1,vertical:"",style:{"margin-top":"-1.3em"}},{default:t(()=>[e(wt)?pe("",!0):(E(),oe(P,{key:0,justify:"center"},{default:t(()=>[Ve(n(P,{vertical:"",align:"center"},{default:t(()=>[n(Ze,{placement:"left"},{trigger:t(()=>[n(An,{type:"line","indicator-placement":"inside",color:"lime","rail-color":"rgba(99, 255, 99, 0.5)","indicator-text-color":e(ie)[0]===e(q)?"white":"green",processing:s.processing,percentage:e(ie)[0]/e(q)*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[m("span",oi,d(e(ie)[0]/e(q)*100|0)+"% "+d(s.$t("status.zipped"))+" ("+d(e(ie)[0])+"/"+d(e(g)[0])+")",1)]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[z(" "+d(s.$t("status.zippingProgress"))+" ("+d(e(ie)[0]/e(q)*100|0)+"%) ",1)]),_:1}),n(lt,{name:"zipcontainer"},{default:t(()=>[e(A).length>=1||f.processing?(E(),oe(On,{key:0,name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(E(!0),ne(Pe,null,xt(e(A),(M,ut)=>(E(),ne("span",{key:ut},[n(Ze,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[m("a",{href:M.url,download:M.name,class:"in-button-anchor",onClick:Ye=>vt(M)},[n(Ft,{class:"zip-button",size:"tiny",color:M.clicked?"#050":"lime","text-color":M.clicked?"gray":"white",onClick:ot(Ye=>vt(M),["stop"]),round:""},{default:t(()=>[n(e(we),{size:"tiny"},{default:t(()=>[n(e(sn))]),_:1}),z("ZIP"+d(M.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,li)]),default:t(()=>[m("div",{style:se({color:e(p).successColor})},[m("div",null,"ZIP "+d(M.number||"")+" ("+d(s.$t("success"))+")",1),m("div",null,d(M.name),1),m("div",null,d(M.sizeByUnit),1),m("div",null,d(s.$rt("{n} @:files",M.count)),1)],4)]),_:2},1024)]))),128))]),_:1})):pe("",!0)]),_:1})]),_:1},512),[[We,e(y)]])]),_:1})),n(lt,null,{default:t(()=>[e(wt)?pe("",!0):Ve((E(),oe(P,{key:0,justify:"center",align:"center"},{default:t(()=>[n(Ze,{trigger:"hover",duration:0,delay:0,placement:"left",style:se({color:"white",backgroundColor:e(p).successColor}),"arrow-style":{backgroundColor:e(p).successColor}},{trigger:t(()=>[n(lt,{name:"save"},{default:t(()=>[e(x)[0]>0?(E(),ne("span",si,[n(In,{value:e(y)?e(ie)[0].toLocaleString("en-us"):f.status.type.replace(/\(.+\)/,""),color:e(p).successColorHover,offset:[-20,-3]},{default:t(()=>[n(Ft,{size:"medium",onClick:Io,color:e(p).successColor,round:""},{default:t(()=>[e(y)?(E(),ne(Pe,{key:0},[e(A).length?(E(),ne("a",{key:0,href:e(A)[0].url,download:e(A)[0].name,class:"in-button-anchor",onClick:k[11]||(k[11]=ot(()=>{},["prevent"]))},[n(So),z(" Ã— "+d(e(A).length)+" "+d(s.$t("status.saveAll")),1)],8,ii)):pe("",!0)],64)):(E(),ne("a",{key:1,href:e(R).url,download:e(R).name,class:"in-button-anchor",onClick:k[12]||(k[12]=ot(()=>{},["prevent"]))},[n(e(we),{size:"tiny"},{default:t(()=>[n(e(ta))]),_:1}),z(" "+d(s.$t("save")),1)],8,ri))]),_:1},8,["color"])]),_:1},8,["value","color"])])):pe("",!0)]),_:1})]),default:t(()=>[s.status.length>=2?(E(),ne(Pe,{key:0},[m("div",null,d(e(o)("success"))+": "+d(e(ie)[0].toLocaleString()),1),m("div",null,d(e(o)("status.totalSize"))+": "+d(e(He)(s.status.zippedTotalSize)),1),m("div",null,"ZIP Ã— "+d(e(A).length),1),m("div",null,d(e(o)("status.saveAllZipsTooltip")),1)],64)):(E(),ne(Pe,{key:1},[z(d(s.$t("status.downloadConvertedImage",e(A).length)),1)],64))]),_:1},8,["style","arrow-style"]),n(Lo,{"_v-if":"!processing && !(status.success === length)",options:e(_n),onSelect:k[13]||(k[13]=(M,ut)=>{var Ye;return(Ye=e(_n).find(({key:Pt})=>M===Pt))==null?void 0:Ye.onSelect()}),"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start"},{default:t(()=>[n(Ze,{show:e(ae),duration:0,delay:0,placement:"right",style:se({color:"white",backgroundColor:e(p).errorColor}),"arrow-style":{backgroundColor:e(p).errorColor}},{trigger:t(()=>[n(In,{value:s.status.unconvertedFileCount.toLocaleString(),color:e(p).errorColorHover,offset:[-0,-3]},{default:t(()=>[n(Ft,{size:"small",color:e(p).errorColor},{default:t(()=>[n(e(we),{size:"medium",style:{"vertical-align":"middle"}},{default:t(()=>[n(e(ol))]),_:1})]),_:1},8,["color"])]),_:1},8,["value","color"])]),default:t(()=>[m("div",null,[m("div",null,d(e(o)("failed"))+": "+d(s.status.unconvertedFileCount.toLocaleString()),1),m("div",null,d(e(o)("status.totalSize"))+": "+d(e(He)(s.status.unconvertedTotalSize)),1)])]),_:1},8,["show","style","arrow-style"])]),_:1},8,["options"])]),_:1},512)),[[We,!f.processing]])]),_:1}),n(lt,{name:"zipcontainer"},{default:t(()=>[e(wt)?pe("",!0):Ve((E(),oe(P,{key:0,vertical:"",align:"center"},{default:t(()=>[n(Ze,{placement:"left"},{trigger:t(()=>[n(An,{type:"line","indicator-placement":"inside",color:"red","rail-color":"rgba(255, 0, 0, 0.5)","indicator-text-color":s.status.failedFileZippedCount===s.status.unconvertedFileCount?"white":"#500",processing:e(v)&&!s.status.failedZipDone&&!s.status.failedToCreateFailedZip,percentage:s.status.failedFileZippedCount/s.status.unconvertedFileCount*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[s.status.failedToCreateFailedZip?(E(),ne("div",{key:1,style:se({color:e(p).errorColor})},d(s.$t("status.failureZippingFailedFiles")),5)):(E(),ne("span",ui,d(s.status.failedFileZippedCount/s.status.unconvertedFileCount*100|0)+"% "+d(s.$t("status.zipped"))+" ("+d(s.status.failedFileZippedCount)+"/"+d(s.status.unconvertedFileCount)+")",1))]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[z(" "+d(s.$t("status.zippingProgress"))+" ("+d(s.status.failedFileZippedCount/s.status.unconvertedFileCount*100|0)+"%) ",1)]),_:1}),n(On,{name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(E(!0),ne(Pe,null,xt(e(I),(M,ut)=>(E(),ne("span",{key:ut},[n(Ze,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[m("a",{href:M.url,download:M.name,class:"in-button-anchor",onClick:Ye=>vt(M)},[n(Ft,{class:"zip-button",size:"tiny",color:M.clicked?"#551122":"#F00","text-color":M.clicked?"gray":"white",onClick:ot(Ye=>vt(M),["stop"]),round:""},{default:t(()=>[n(e(we),{size:"tiny"},{default:t(()=>[n(e(ll))]),_:1}),z("ZIP"+d(M.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,di)]),default:t(()=>[m("div",{style:se({color:e(p).errorColor})},[m("div",null,"ZIP "+d(M.number||"")+" ("+d(s.$t("failed"))+")",1),m("div",null,d(M.name),1),m("div",null,d(M.sizeByUnit),1),m("div",null,d(s.$rt("{n} @:files",M.count)),1)],4)]),_:2},1024)]))),128))]),_:1})]),_:1},512)),[[We,e(v)]])]),_:1})]),_:1})]),_:1})]),_:1},8,["expanded-names"])]),_:1},512)}}}),fi=Qe(pi,[["__scopeId","data-v-0db0f28d"]]),gi=["innerHTML"],mi=Ae({__name:"converter",props:Nt({input:{},format:{},quality:{},retainExtension:{type:Boolean},maxZipSizeMB:{},threads:{}},{showNote:{type:Boolean},showNoteModifiers:{}}),emits:Nt(["start","end"],["update:showNote"]),setup(l,{emit:i}){st(et);const{t:r}=Je(),c=Gt(),a=sl(),o=10,p=navigator.hardwareConcurrency,h=typeof OffscreenCanvas=="function",f=100,_=l,y=je(l,"showNote"),b=i,v=w(!1),u=w(!1),T=w(!1),A=w(!1),I=w(!1),$=w(()=>"initializing"),N=w("info"),x=qt(ae()),H=ct("stat"),V=w(0);let g=!1,Y=()=>{},q,ie=0,O=!1;ze(()=>_.input,U=>{U!=null&&U.length&&ue(U)}),ze(A,U=>{document.body.style.overflowY=U?"hidden":"auto"}),qe(async()=>{await ve(),_e()});async function Te(){let U=!0;if(ie>o*1e3&&!O&&x.success>0&&(U=!1,await new Promise(B=>{c.warning({title:r("confirmCloseDialogTitle"),autoFocus:!0,maskClosable:!1,positiveText:r("close"),negativeText:r("back"),onPositiveClick:()=>U=!0,onAfterLeave:B,content:r("confirmCloseDialog")})})),!U)return!1;a.destroyAll(),A.value=!1,y.value=!1}function $e(U){q==null||q(U)}function Ee(U){an==null||an(U)}function Re(){!u.value&&v.value?u.value=!0:Te()}function S(){ue(_.input)}let W=w(()=>{});function ae(U){const B={logs:[],ziplogs:[],startedCount:0,converted:0,success:0,failure:0,retried:0,done:0,length:0,zippedTotalCount:0,zippingErrorCount:0,zippedTotalSize:0,processing:!1,zips:[],inputTotalSize:0,outputTotalSize:0,thumbnail:null,baseZipName:"testzipname",type:"image/any",startedTime:Date.now(),convertedImageDataUrl:"",convertedImageName:"",convertedImageUrl:"",convertedImageOrgUrl:"",convertedImageIndex:-1,convertedImageShrinked:!1,zipSize:_.maxZipSizeMB,shrink:Z.multithread&&Z.shrinkImage?[Z.maxWidth,Z.maxHeight]:void 0,unconvertedListText:"",failedZipDone:!1,failedZips:[],unconvertedFileCount:0,unconvertedTotalSize:0,failedFileZippedCount:0,failedToCreateFailedZip:!1};return Object.assign(U||{},B)}function X(){I.value=!1,URL.revokeObjectURL(x.convertedImageUrl),URL.revokeObjectURL(x.convertedImageOrgUrl);for(const U of x.zips)URL.revokeObjectURL(U.url);x.zips.length=0;for(const U of x.failedZips)URL.revokeObjectURL(U.url);x.failedZips.length=0,ae(x),Y(),Y=()=>{},q=null,O=!1,T.value=!1,u.value=!1}async function ue(U){if(v.value){c.error({title:"Busy",positiveText:"OK",content:r("interfered")});return}A.value&&(V.value^=1);let B=U.concat();ae(x),X(),A.value=!0,I.value=!0,v.value=!0,x.processing=!0,N.value="info",$.value=()=>r("processing");const J=new Set,le=_.format,ce=_.quality,R=[...le.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),Ne=me(le,ce,B[0].webkitRelativePath);x.length=B.length,x.baseZipName=Ne,x.type=le.replace(/image\//,"").toUpperCase()+(/jpe?g|webp/i.test(le)?" ("+ce+")":""),x.threads=g?0:_.threads;const ke=Date.now();b("start");let fe,re,Ie;if(!g&&_.threads>=2?(q=is,Ie=await Xl({files:B,completedFileIdSet:J,ConvStats:x,canceled:u,props:_,imageType:le,quality:ce,outputExt:R,format:le,message:a})):(q=fs,Ie=await ps(B,J,_,u,x)),{exception:re,callbackToGenerateFailedZips:fe,callbackToClearConverter:Y}=Ie,re){let Fe;switch(re.message){case"worker-load-error":Fe=r("errMsgWorkerLoadError");break;default:Fe="unexpected error"}c.error({title:"Error",autoFocus:!0,maskClosable:!1,closable:!1,content:()=>K("div",[K("p",Fe),K(Ce,{onClick(){location.reload()}},r("Reload"))])})}if(x.success===x.length?(N.value="success",$.value=()=>r("completed")):(N.value="error",$.value=()=>u.value?r("aborted"):r("incomplete")),J.size!==B.length){const Fe=de(U,J);W.value=()=>{!Fe||!Fe.length||fe(Fe)}}v.value=!1,x.processing=!1,T.value=!0,B.length=0,ie=Date.now()-ke,b("end")}function de(U,B){const J=[],le=[];let ce=0;for(const R of U)B.has(R._id)||(J.push(R),le.push(R.webkitRelativePath||R.relativePath||R.name),ce+=R.size);return le.length&&(x.unconvertedListText=le.join(`
`),x.unconvertedFileCount=J.length,x.unconvertedTotalSize=ce),J}function me(U,B,J){var ke;const le=new Date;U=U.replace(/^image\//,"").toLowerCase();const ce=Z.useFolderNameForZip&&((ke=String(J).match(/^\/?([^/]+)\//))==null?void 0:ke[1])||"avif2jpg",R=`
    ${le.getFullYear().toString().substring(2)}
    ${String((le.getMonth()+1)*100+le.getDate()).padStart(4,"0")}
    ${String(le.getHours()*1e4+le.getMinutes()*100+le.getSeconds()).padStart(6,"0")}
    -
    ${U+(/jpe?g|webp/i.test(U)?B:"")}
  `.replace(/\s/g,"");return`${ce}-${R}`.replace(/\s+/g," ")}async function ve(){const U="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",B=document.createElement("img"),J=pa(B).then(()=>!0,()=>!1);B.src=U,await J||c.warning({title:"Unsupported",positiveText:"OK",maskClosable:!1,content:r("avifUnsupported")})}function _e(){(!h||p<2||!Promise.any)&&(g=!0),g&&(Ue.value=0)}return(U,B)=>{var fe;const J=we,le=pn,ce=ye,R=Me,Ne=zt,ke=un;return E(),ne(Pe,null,[!e(v)&&((fe=_.input)!=null&&fe.length)?(E(),oe(R,{key:0,justify:"center",align:"center",style:{"margin-top":"0.4em"}},{default:t(()=>[n(ce,{trigger:"hover",placement:"top","keep-alive-on-hover":!1,duration:0,delay:50},{trigger:t(()=>{var re;return[n(le,{value:((re=U.input)==null?void 0:re.length)||0,offset:[-12,-5],color:"#99999966"},{default:t(()=>[n(e(Ce),{onClick:S,round:"",size:"medium"},{icon:t(()=>[n(J,{size:"1.2em",color:"#CCCCCC"},{default:t(()=>[n(e(il))]),_:1})]),default:t(()=>[z(" "+d(e(r)("convertAgain")),1)]),_:1})]),_:1},8,["value"])]}),default:t(()=>{var re;return[m("div",{innerHTML:e(r)("reconvertTip",(re=_.input)==null?void 0:re.length)},null,8,gi)]}),_:1})]),_:1})):pe("",!0),n(ke,{ref:"processingModal","display-directive":"show",show:e(A),"onUpdate:show":B[2]||(B[2]=re=>De(A)?A.value=re:null),closable:e(T),"close-on-esc":!1,preset:"dialog",onClick:B[3]||(B[3]=re=>{e(a).destroyAll()}),onMaskClick:B[4]||(B[4]=re=>{e(a).destroyAll()}),onClose:Te,onEsc:Re,title:e($),type:e(N),"mask-closable":!1,onAfterLeave:X,onBeforeLeave:B[5]||(B[5]=re=>{e(H).cleanup()}),class:"processing-dialog"},{default:t(()=>[n(R,{vertical:"",style:{"flex-grow":"1"}},{default:t(()=>[e(I)?(E(),oe(fi,{ref_key:"stat",ref:H,key:e(V),processing:e(v),status:e(x),interval:f,onAllZipsClicked:B[0]||(B[0]=re=>De(O)?O.value=!0:O=!0),onDemandZipErrors:e(W),onDemandImage:$e,onDeleteImage:Ee},null,8,["processing","status","onDemandZipErrors"])):pe("",!0),n(R,{justify:"end",align:"center",wrap:!1},{default:t(()=>[n(R,{justify:"start",align:"center"},{default:t(()=>[Vn(U.$slots,"lang-switch")]),_:3}),e(v)?(E(),oe(e(Ce),{key:0,disabled:e(u),ref:"cancelbutton",round:"",size:"large",onClick:B[1]||(B[1]=re=>u.value=!0)},{default:t(()=>[n(Ne,{show:e(u)&&!e(T),size:"small"},{default:t(()=>[z(d(e(r)("cancel")),1)]),_:1},8,["show"])]),_:1},8,["disabled"])):e(T)?(E(),oe(e(Ce),{key:1,onClick:Te,round:"",size:"large",style:{"font-size":"small","margin-top":"1em"}},{default:t(()=>[z(d(e(r)("close")),1)]),_:1})):pe("",!0)]),_:3})]),_:3})]),_:3},8,["show","closable","title","type"])],64)}}}),vi="/avif2jpeg/dist/avif.png",hi={class:"container-1"},_i={style:{position:"relative"}},wi={style:{position:"absolute","font-size":"0.5em",right:"-3.5em",bottom:"-1.5em","white-space":"nowrap"}},yi={style:{color:"#666666"}},bi=["innerHTML"],ki={style:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","font-size":"xx-small","white-space":"nowrap"}},xi=Ae({__name:"droptarget",props:{forbidden:{type:Boolean},dropTarget:{}},emits:["drop"],setup(l,{emit:i}){st(et);const r=l,c=i,a=rl(),o=w(!1),p=w(0),h=w("");qe(()=>{f(r.dropTarget||document)});function f(y){document.ondragstart=b=>b.preventDefault(),document.ondragover=b=>b.preventDefault(),y.ondrop=async b=>{var u;if(b.preventDefault(),o.value||r.forbidden)return;o.value=!0,p.value=0,h.value="";let v;try{const T=[...b.dataTransfer.items].map(A=>A.webkitGetAsEntry());a.start(),v=await _(T),a.finish()}catch{v=[...((u=b.dataTransfer)==null?void 0:u.files)??[]],a.error()}o.value&&(o.value=!1,c("drop",v))}}async function _(y,b){b=b||[];for(const v of y)if(v.isFile){const u=await new Promise(T=>v.file(A=>T(A)));Object.defineProperty(u,"webkitRelativePath",{value:v.fullPath}),b.push(u),p.value++}else if(v.isDirectory){h.value=v.fullPath;const u=v.createReader();do{const T=await new Promise(A=>u.readEntries(I=>A(I)));if(!T.length)break;await _(T,b)}while(!0)}return b}return(y,b)=>{const v=we,u=gt,T=Me,A=ye,I=un;return E(),ne("div",hi,[n(A,{to:!1,"display-directive":"show",trigger:"hover",duration:0,delay:0,placement:"bottom-end"},{trigger:t(()=>[n(T,{vertical:"",class:"container-2"},{default:t(()=>[n(T,{align:"center",wrap:!1,class:"container-3"},{default:t(()=>[n(T,{vertical:"",align:"center",wrap:!1,style:{"font-weight":"bold","font-size":"1em","line-height":"90%","white-space":"nowrap"}},{default:t(()=>[b[5]||(b[5]=m("span",null,"Drag & Drop",-1)),m("span",_i,[b[4]||(b[4]=z(" AVIF Images ")),m("span",wi,[b[3]||(b[3]=z(" or ")),n(u,{placement:"bottom-end"},{trigger:t(()=>[m("span",yi,[n(v,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(fn))]),_:1}),b[1]||(b[1]=z(" Folders "))])]),default:t(()=>[b[2]||(b[2]=z(" You can drag and drop your local folders "))]),_:1})])])]),_:1}),n(T,null,{default:t(()=>b[6]||(b[6]=[m("img",{src:vi,class:"avif"},null,-1)])),_:1})]),_:1})]),_:1})]),default:t(()=>[m("h3",{innerHTML:y.$t("droptarget"),style:{"max-width":"200px","text-align":"center","word-break":"keep-all","overflow-wrap":"break-word"}},null,8,bi)]),_:1}),n(I,{show:e(o),"onUpdate:show":b[0]||(b[0]=$=>De(o)?o.value=$:null),closable:!0,preset:"dialog",title:"Parsing dropped items.",type:"info","mask-closable":!1,"negative-text":y.$t("cancel")},{default:t(()=>[n(T,{vertical:"",align:"center"},{default:t(()=>[m("div",ki,d(e(h)),1),m("div",null,"found "+d(e(p))+" files",1)]),_:1})]),_:1},8,["show","negative-text"])])}}}),zi=Qe(xi,[["__scopeId","data-v-963c44a5"]]),Ai={class:"container-1"},Ii={class:"container-2"},Ti=["innerHTML"],Si=["innerHTML"],Li={style:{"white-space":"nowrap"}},Ci={style:{"padding-left":"1em"}},$i=["innerHTML"],Ei=["accept"],Fi=Ae({__name:"file-selector",props:Nt({target:{},userExtensions:{},forbidden:{type:Boolean}},{expanded:{type:Boolean,required:!1},expandedModifiers:{},disableNotifyingFolderSelect:{type:Boolean},disableNotifyingFolderSelectModifiers:{}}),emits:Nt(["input","click","cancel","on-change-accept","update:target","update:userExtensions"],["update:expanded","update:disableNotifyingFolderSelect"]),setup(l,{emit:i}){const r=Gt(),{t:c}=Je(),a=st(et),o=["avif_only","all_images","all_files","edit_type"],p=[];for(const S of o)p.push({label:()=>c("fileTypeRadioOptions."+S),value:S});const h=({node:S,option:W})=>K(ye,{placement:"right"},{trigger:()=>S,default:()=>O(W.value).replace(/,/g,", ")}),f=l,_=i,y=w(0),b=w(!1),v=w(!1),u=be(()=>O(I.value)),T=be(()=>$.value.split(",").every(W=>/^\s*(\.[\w\-]+)*\s*$/.test(W))?"success":"error"),A=be(()=>!f.forbidden&&!v.value);je(l,"expanded");const I=be({get:()=>o.indexOf(f.target)>=0?f.target:o[0],set:S=>{_("update:target",S)}}),$=be({get:()=>f.userExtensions,set:S=>{_("update:userExtensions",S)}}),N=je(l,"disableNotifyingFolderSelect"),x=w(null),H=w(null),V=w(ie());ze(I,S=>{_("on-change-accept",u.value)}),qe(()=>{});async function g(S){if(_("click"),S===H.value&&!N.value){let W=!1;if(await new Promise(ae=>{r.info({title:c("loadfolderNotifyingTitle"),positiveText:c("Continue"),negativeText:c("Cancel"),onAfterLeave:()=>ae(W),onPositiveClick:()=>W=!0,content:()=>K("div",[K("p",{},c("loadfolderNotifyingMessageTerm1")),K("div",[K(Gn,{width:250,style:{border:"3px solid gray"},src:"/avif2jpeg/dist//notification-folder.png"})]),K("p",{},c("loadfolderNotifyingMessageTerm2")),K("p",[K(ea,{onUpdateChecked:X=>N.value=X,checked:N.value},()=>c("checkboxTextDontShowThis"))])])})}),!W){N.value=!1,_("cancel");return}}S.click()}function Y(){_("cancel")}function q(S){const ae=[...S.target.files];x.value.value="",H.value.value="",$e(ae)}function ie(){return"webkitdirectory"in document.createElement("input")}function O(S){switch(S){case"avif_only":return".avif, .webp";case"all_images":return".jpg, .jpeg, .jfif, .pjpeg, .pjp, .gif, .png, .webp, .avif, .bmp, .apng, .ico";case"edit_type":return $.value;case"all_files":default:return".*"}}async function Te(S){const W=String(u.value).toLowerCase().replace(/\s+/g,"");if(W&&u.value!==".*"){const ae=W.split(",");S=S.filter(X=>ae.includes(X.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),S.length||(await new Promise(X=>{r.error({title:"Images Not Found",positiveText:"OK",onAfterLeave:X,content:()=>K("div",[K(dn,{description:"NO IMAGES"}),`${c("noimage")}`,K("br"),u.value])})}),Y())}return S}async function $e(S){v.value=!0,S=await Te(S),y.value=S.length,S.length>0&&_("input",Re(S)),v.value=!1}let Ee=0;function Re(S){const W=[];for(const ae of S)ae.hasOwnProperty("_id")||Object.defineProperty(ae,"_id",{value:Ee++}),W.push(ae);return W}return(S,W)=>{const ae=we,X=Ce,ue=Me,de=Qt,me=dl,ve=ul,_e=gt;return E(),ne(Pe,null,[m("div",Ai,[m("div",Ii,[n(ue,{vertical:"",align:"center",justify:"center",inline:"",size:"large"},{default:t(()=>[n(ue,{align:"center",justify:"space-around",class:"main-buttons"},{default:t(()=>[n(ue,{vertical:"",align:"stretch",justify:"center"},{default:t(()=>[n(e(ye),{to:!1,"display-directive":"show",show:e(a).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(a).LANDSCAPE.value?"right":"top",duration:0,delay:0,"z-index":10},{trigger:t(()=>[n(X,{disabled:!e(A),size:"large",onClick:W[0]||(W[0]=U=>g(e(x))),round:"",style:{width:"100%","background-color":"white","font-size":"large"}},{icon:t(()=>[n(ae,{size:"large",color:"gray"},{default:t(()=>[n(e(na))]),_:1})]),default:t(()=>[z(" "+d(S.$t("loadbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[m("div",{innerHTML:S.$t("loadbuttontooltip")},null,8,Ti)]),_:1},8,["show","placement"]),!e(a).IS_SP&&e(V)||e(a).SSR?(E(),ne(Pe,{key:0},[n(ue,{align:"center",justify:"center",style:{color:"gray",margin:"0em"}},{default:t(()=>[z(d(S.$t("or")),1)]),_:1}),n(e(ye),{to:!1,"display-directive":"show",trigger:"hover",placement:"left","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:e(a).showTooltipsBeforeMounted.value},{trigger:t(()=>[n(X,{disabled:!e(A),size:"large",onClick:W[1]||(W[1]=U=>g(e(H))),round:"",style:{width:"100%","background-color":"white","font-size":"large"}},{icon:t(()=>[n(ae,{size:"large",color:"gray"},{default:t(()=>[n(e(fn))]),_:1})]),default:t(()=>[z(" "+d(S.$t("loadfolderbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[m("div",{innerHTML:S.$t("loadfoldertooltip")},null,8,Si)]),_:1},8,["show"])],64)):pe("",!0)]),_:1}),e(a).IS_SP?pe("",!0):(E(),oe(zi,{key:0,onDrop:$e,forbidden:!e(A),class:"drop-target"},null,8,["forbidden"]))]),_:1}),n(ue,{vertical:""},{default:t(()=>[n(ue,{wrap:e(a).IS_SP,align:"center",justify:"stretch"},{default:t(()=>[m("span",Li,d(S.$t("TargetFileTypeExt"))+": ",1),n(e(ye),{"keep-alive-on-hover":!1,placement:"right",style:{"max-width":"200px"},duration:0,delay:0},{trigger:t(()=>[n(de,{trigger:"click",width:"trigger",size:"small",value:e(I),"onUpdate:value":W[2]||(W[2]=U=>De(I)?I.value=U:null),options:p,"render-option":h,"consistent-menu-width":!1},null,8,["value"])]),default:t(()=>[z(" "+d(O(e(I)).replace(/,/g,", ")),1)]),_:1})]),_:1},8,["wrap"]),e(I)==="edit_type"?(E(),oe(e(ye),{key:0,trigger:"hover","keep-alive-on-hover":!1,placement:"bottom-start",show:e(b),duration:0,delay:0},{trigger:t(()=>[m("div",Ci,[n(_e,{trigger:"manual",placement:"right-end",show:e(I)==="edit_type"&&e(T)!=="success"&&!!e(b)},{trigger:t(()=>[n(me,{value:e($),"onUpdate:value":W[3]||(W[3]=U=>De($)?$.value=U:null),status:e(T),disabled:e(I)!=="edit_type",onFocus:W[4]||(W[4]=U=>b.value=!0),onBlur:W[5]||(W[5]=U=>b.value=void 0),clearable:!0,size:"small",placeholder:".jpg, .gif, .png",spellcheck:"false"},null,8,["value","status","disabled"])]),default:t(()=>[n(ve,{type:"error","show-icon":!0,title:"Validation error"},{default:t(()=>W[6]||(W[6]=[z(" Please correct the extension list."),m("br",null,null,-1),m("ul",null,[m("li",null,"Each extension must begin with a period. "),m("li",null,"Separate each extension with a comma. "),m("li",null,"Use alphameric characters.")],-1)])),_:1})]),_:1},8,["show"])])]),default:t(()=>[m("span",{innerHTML:S.$t("editAcceptTypes")},null,8,$i)]),_:1},8,["show"])):pe("",!0)]),_:1})]),_:1})])]),m("input",{ref_key:"fileinput",ref:x,onInput:q,onCancel:Y,type:"file",multiple:"",accept:e(u),style:{display:"none"}},null,40,Ei),m("input",{ref_key:"folderinput",ref:H,webkitdirectory:"",directory:"",onInput:q,onCancel:Y,type:"file",style:{display:"none"}},null,544)],64)}}}),Pi=Qe(Fi,[["__scopeId","data-v-946de019"]]),Oi={style:{"white-space":"nowrap"}},Ui=Ae({__name:"settings-output",props:{quality:{},format:{}},emits:["update:format","update:quality"],setup(l,{emit:i}){const r=l,c=i,{t:a}=Je(),o=st(et),p=w([]),h=["image/jpeg","image/png","image/gif","image/bmp","image/avif","image/webp"],f=be({get:()=>r.format,set:T=>{T=v(T),c("update:format",T)}}),_=be({get:()=>r.quality,set:T=>{c("update:quality",T)}}),y=be(()=>/png|bmp/i.test(f.value)),b=w(null);qe(()=>{u()});function v(T){return p.value.indexOf(T)<0&&(T=p.value[0]),T}function u(){for(const T of h)b.value.toDataURL(T).indexOf(T)>=0&&p.value.push(T);p.value.length===0&&p.value.push(h[0])}return(T,A)=>{const I=we,$=Qt,N=Me,x=ye,H=Kt,V=aa;return E(),ne(Pe,null,[n(N,{justify:"center",class:"body"},{default:t(()=>[n(N,{vertical:""},{default:t(()=>[n(x,{to:!1,"display-directive":"show",show:e(o).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(o).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(N,{align:"center",wrap:!1},{default:t(()=>[n(I,null,{default:t(()=>[n(e(na))]),_:1}),z(d(e(a)("settings.imageType"))+": ",1),n($,{value:f.value,"onUpdate:value":A[0]||(A[0]=g=>f.value=g),options:p.value.map(g=>({value:g,label:g})),"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),_:1})]),default:t(()=>[z(" "+d(e(a)("settings.imageTypeTooltip")),1)]),_:1},8,["show","placement"]),n(x,{to:!1,"display-directive":"show",show:e(o).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(o).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(N,{align:"center"},{default:t(()=>[n(N,{align:"start",wrap:!1},{default:t(()=>[n(I,null,{default:t(()=>[n(e(ta))]),_:1}),m("span",Oi,d(e(a)("settings.quality"))+":",1),n(N,{align:"center",justify:"space-between"},{default:t(()=>[n(H,{tooltip:!1,value:_.value,"onUpdate:value":A[1]||(A[1]=g=>_.value=g),step:1,style:{width:"120px"},disabled:y.value},null,8,["value","disabled"]),n(V,{onBlur:A[2]||(A[2]=g=>_.value??(_.value=0)),value:_.value,"onUpdate:value":A[3]||(A[3]=g=>_.value=g),step:"1",min:"0",max:"100",disabled:y.value,style:{width:"90px"},size:"small"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:t(()=>[z(" "+d(e(a)("settings.qualitytooltip")),1)]),_:1},8,["show","placement"])]),_:1})]),_:1}),m("canvas",{ref_key:"canvas",ref:b,width:"1",height:"1",style:{display:"none"}},null,512)],64)}}}),Mi=Qe(Ui,[["__scopeId","data-v-060333f5"]]),Ri={style:{width:"4em","text-align":"left"}},ji={style:{width:"4em","text-align":"left"}},on=100,jn=2e3,Nn=4096,Dn=4096,Ni=100,Di=100,Bi=Ae({__name:"settings-adv",props:{expanded:{type:Boolean,required:!1},expandedModifiers:{},multithread:{type:Boolean,required:!0},multithreadModifiers:{},threadCount:{required:!0},threadCountModifiers:{},maxZipSize:{required:!0},maxZipSizeModifiers:{},retainExt:{type:Boolean,required:!0},retainExtModifiers:{},useFolderNameForZip:{type:Boolean,required:!0},useFolderNameForZipModifiers:{},shrinkImage:{type:Boolean,required:!0},shrinkImageModifiers:{},maxWidth:{required:!0},maxWidthModifiers:{},maxHeight:{required:!0},maxHeightModifiers:{}},emits:["update:expanded","update:multithread","update:threadCount","update:maxZipSize","update:retainExt","update:useFolderNameForZip","update:shrinkImage","update:maxWidth","update:maxHeight"],setup(l){const i={trigger:"hover",placement:"left",keepAliveOnHover:!1,duration:0,delay:0,style:"max-width: 20vw;"},r=je(l,"expanded"),c=je(l,"multithread"),a=je(l,"threadCount"),o=je(l,"maxZipSize"),p=je(l,"retainExt"),h=je(l,"useFolderNameForZip"),f=je(l,"shrinkImage"),_=je(l,"maxWidth"),y=je(l,"maxHeight");ze(Ue,v=>{v>1||(c.value=!1),a.value>v&&(a.value=v)},{immediate:!0});const b=be(()=>c.value&&Ue.value>1);return qe(()=>{Ue.value>1&&typeof a.value>"u"&&(a.value=Math.max(Ue.value,2))}),(v,u)=>{const T=we,A=Ce,I=fl,$=Me,N=Kt,x=aa,H=Jn,V=Xn;return E(),oe($,{justify:"center"},{default:t(()=>[n(V,{"display-directive":"show","default-expanded-names":r.value?["collapitem"]:"","on-update:expanded-names":g=>r.value=!!String(g),"trigger-areas":["arrow","main"],class:ft(["settings-body",r.value?"expand-adv-settings":""])},cl({arrow:t(()=>[n(T,{style:se(r.value&&{top:"8px"})},{default:t(()=>[n(e(vl))]),_:1},8,["style"]),n(T,null,{default:t(()=>[n(e(hl))]),_:1})]),default:t(()=>[n(H,{title:v.$t("settings.advancedSettings"),name:"collapitem"},{default:t(()=>[n($,{vertical:"",style:{"padding-left":"2em"}},{default:t(()=>[n(e(ye),yt(bt(i)),{trigger:t(()=>[n($,{vertical:""},{default:t(()=>[n($,{wrap:!1,align:"center"},{default:t(()=>[n(A,{text:"",disabled:!e(Ue),style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:u[0]||(u[0]=g=>c.value=!c.value)},{icon:t(()=>[n(T,null,{default:t(()=>[n(e(pl))]),_:1})]),default:t(()=>[z(" "+d(v.$t("settings.enableMultiThreads")),1)]),_:1},8,["disabled"]),n(I,{value:c.value,"onUpdate:value":u[1]||(u[1]=g=>c.value=g),disabled:!e(Ue),size:"small"},null,8,["value","disabled"])]),_:1}),n($,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(N,{value:a.value,"onUpdate:value":u[2]||(u[2]=g=>a.value=g),disabled:!e(Ue)||!c.value,step:1,min:2,max:e(Ue),style:{width:"120px"}},null,8,["value","disabled","max"]),n(x,{onBlur:u[3]||(u[3]=g=>a.value??(a.value=2)),size:"tiny",value:a.value,"onUpdate:value":u[4]||(u[4]=g=>a.value=g),disabled:!e(Ue)||!c.value,step:1,min:2,max:e(Ue),style:{width:"10em"}},{suffix:t(()=>[z(d(v.$t("threads",a.value)),1)]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[z(" "+d(v.$t("settings.multiThreadsTooltip")),1)]),_:1},16),n(e(ye),yt(bt(i)),{trigger:t(()=>[n($,{vertical:""},{default:t(()=>[n($,{wrap:!1,align:"center"},{default:t(()=>[n(A,{text:"",focusable:!1,style:{"white-space":"nowrap","font-size":"smaller"}},{icon:t(()=>[n(T,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(gl))]),_:1})]),default:t(()=>[z(" "+d(v.$t("settings.maxZipFileSize"))+": ",1)]),_:1})]),_:1}),n($,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(N,{tooltip:!1,value:o.value,"onUpdate:value":u[5]||(u[5]=g=>o.value=g),step:1,min:on,max:jn,style:{width:"120px"}},null,8,["value"]),n(x,{onBlur:u[6]||(u[6]=g=>o.value??(o.value=on)),size:"tiny",value:o.value,"onUpdate:value":u[7]||(u[7]=g=>o.value=g),step:"1",min:on,max:jn,style:{width:"10em"}},{suffix:t(()=>u[20]||(u[20]=[z("(MB)")])),_:1},8,["value"])]),_:1})]),_:1})]),default:t(()=>[z(" "+d(v.$t("settings.maxZipFileSizeTooltip")),1)]),_:1},16),n(e(ye),yt(bt(i)),{trigger:t(()=>[n($,{wrap:!1,align:"center"},{default:t(()=>[n(A,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:u[8]||(u[8]=g=>h.value=!h.value)},{icon:t(()=>[n(T,null,{default:t(()=>[n(e(fn))]),_:1})]),default:t(()=>[z(" "+d(v.$t("settings.useFolderNameForZip")),1)]),_:1}),n(I,{value:h.value,"onUpdate:value":u[9]||(u[9]=g=>h.value=g),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[z(" "+d(v.$t("settings.useFolderNameForZipTooltip")),1)]),_:1},16),n(e(ye),yt(bt(i)),{trigger:t(()=>[n($,{wrap:!1,align:"center"},{default:t(()=>[n(A,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:u[10]||(u[10]=g=>p.value=!p.value)},{icon:t(()=>[n(T,null,{default:t(()=>[n(e(Yn))]),_:1})]),default:t(()=>[z(" "+d(v.$t("settings.retainOriginalExtension")),1)]),_:1}),n(I,{value:p.value,"onUpdate:value":u[11]||(u[11]=g=>p.value=g),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[z(" "+d(v.$t("settings.retainExtTooltip")),1)]),_:1},16),n(e(ye),yt(bt(i)),{trigger:t(()=>[n($,{vertical:""},{default:t(()=>[n($,{wrap:!1,align:"center"},{default:t(()=>[n(A,{disabled:!b.value,text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:u[12]||(u[12]=g=>f.value=!f.value)},{icon:t(()=>[n(T,null,{default:t(()=>[n(e(ml))]),_:1})]),default:t(()=>[z(" "+d(v.$t("settings.shrinkImage")),1)]),_:1},8,["disabled"]),n(I,{disabled:!b.value,value:f.value,"onUpdate:value":u[13]||(u[13]=g=>f.value=g),size:"small"},null,8,["disabled","value"])]),_:1}),n($,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(N,{value:_.value,"onUpdate:value":u[14]||(u[14]=g=>_.value=g),disabled:!f.value||!b.value,step:1,min:Ni,max:Nn,style:{width:"120px"}},null,8,["value","disabled"]),n(x,{size:"tiny",onBlur:u[15]||(u[15]=g=>_.value??(_.value=8)),value:_.value,"onUpdate:value":u[16]||(u[16]=g=>_.value=g),disabled:!f.value||!b.value,step:1,min:8,max:Nn*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[m("span",Ri,d(v.$t("width")),1)]),suffix:t(()=>u[21]||(u[21]=[z("px")])),_:1},8,["value","disabled","max"])]),_:1}),n($,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(N,{value:y.value,"onUpdate:value":u[17]||(u[17]=g=>y.value=g),disabled:!f.value||!b.value,step:1,min:Di,max:Dn,style:{width:"120px"}},null,8,["value","disabled"]),n(x,{size:"tiny",onBlur:u[18]||(u[18]=g=>y.value??(y.value=8)),value:y.value,"onUpdate:value":u[19]||(u[19]=g=>y.value=g),disabled:!f.value||!b.value,step:1,min:8,max:Dn*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[m("span",ji,d(v.$t("height")),1)]),suffix:t(()=>u[22]||(u[22]=[z("px")])),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[z(" "+d(v.$t("settings.shrinkImageTooltip")),1)]),_:1},16)]),_:1})]),_:1},8,["title"])]),_:2},[r.value?{name:"header-extra",fn:t(()=>[n(e(ye),{"keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(A,{onClick:e($l),size:"tiny",style:{"font-size":"xx-small"}},{default:t(()=>[z(d(v.$t("reset")),1)]),_:1},8,["onClick"])]),default:t(()=>[z(" "+d(v.$t("settings.resetButtonTooltip")),1)]),_:1})]),key:"0"}:void 0]),1032,["default-expanded-names","on-update:expanded-names","class"])]),_:1})}}}),Zi=Qe(Bi,[["__scopeId","data-v-661ec94b"]]),Hi={},Vi={style:{color:"gray","padding-left":"20px"}},Wi=["innerHTML"];function qi(l,i){const r=Wn,c=Me;return E(),oe(c,{vertical:"",justify:"end"},{default:t(()=>[n(r,{style:{margin:"0px"}}),n(c,{justify:"center"},{default:t(()=>[m("ul",Vi,[(E(!0),ne(Pe,null,xt(l.$tm("descriptions"),a=>(E(),ne("li",{key:a,style:{"text-align":"left"},innerHTML:a},null,8,Wi))),128))])]),_:1})]),_:1})}const Gi=Qe(Hi,[["render",qi]]),Ki="modulepreload",Qi=function(l){return"/avif2jpeg/dist/"+l},Bn={},he=function(i,r,c){let a=Promise.resolve();if(r&&r.length>0){let p=function(_){return Promise.all(_.map(y=>Promise.resolve(y).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),f=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));a=p(r.map(_=>{if(_=Qi(_),_ in Bn)return;Bn[_]=!0;const y=_.endsWith(".css"),b=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${b}`))return;const v=document.createElement("link");if(v.rel=y?"stylesheet":Ki,y||(v.as="script"),v.crossOrigin="",v.href=_,f&&v.setAttribute("nonce",f),document.head.appendChild(v),y)return new Promise((u,T)=>{v.addEventListener("load",u),v.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${_}`)))})}))}function o(p){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=p,window.dispatchEvent(h),!h.defaultPrevented)throw p}return a.then(p=>{for(const h of p||[])h.status==="rejected"&&o(h.reason);return i().catch(o)})},fa="English",ga="ðŸ‡¬ðŸ‡§",ma='AVIF to JPEG "Offline" Batch Converter',va="It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",ha="Drag & Drop AVIF Images to Convert",_a=["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data is sent to any server</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.'],wa="Select your language",ya="Choose Target File Extentions",ba={avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types",edit_type:"Edit File Extension List"},ka="Input a list of comma separated file extentions to load.<br>e.g.) .jpg,.gif,.png",xa="Load Images",za="Select your images from a dialog window.<br>*Multiple selection allowed.",Aa="Load a Whole Folder",Ia=`Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>*It will show "Upload" button, but it actually doesn't upload anything to any server.`,Ta="Converting images",Sa="Aborted",La="Some files failed to convert",Ca="Completed",$a="Currently Busy",Ea="No files with the extentions were found.",Fa="Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",Pa="Cancel",Oa="Save",Ua="Close",Ma="Open",Ra="Re-convert",ja="Convert previous selected {n} @:files again",Na="File | Files",Da="thread | threads",Ba="You have not saved the converted images yet.",Za="Data have not been saved",Ha="Open Source",Va="Open the converted image",Wa="Copied to clipboard",qa="The converted image was copied to your clipboard as DataURL.",Ga="Copy the converted image as DataURL",Ka="Convert Again",Qa={expandLogTooltip:"Displaying the entire log may severely reduce conversion speed.",showOnlyErrors:"Show only errors",outInRate:"Out / In Ratio",elapsedTime:"Elapsed Time",multiThreading:"Multi-Threading",outputSettings:"Output Settings",totalSize:"Total Size",totalFiles:"Number of Files",confirmDownloadMessage:"It will start to download {0} zip files.",inputSize:"Input Size",outputSize:"Output Size",filterSuccess:"Hide completed item",progressErrors:"Failed items",progressStarted:"Started Items",progressTotal:"Total number of files",zippingProgress:"Zipping progress",zipped:"ZIPPED",openFailedList:"Open failed file list",zipFailedList:"Pack failed files into Zips",table:{index:"index",status:"status",core:"thread",details:"file"},saveFailedList:"Save failed file list",done:"done",convertedZips:"successfully completed ZIP",progressSuccess:"Completed Files",downloadConvertedImage:"Download Converted Image",failureZippingFailedFiles:"Failure while zipping the failed files.",browseConvertedImages:"Browse converted images",index:"Index",Original:"Original",Converted:"Converted",saveAllZipsTooltip:"Save all ZIP files",Shrinked:"Shrinked",Shrinking:"Shrinking",saveAll:"Save All",progressRetries:"Retrying files",success:"success",started:"started",total:"total",files:"files",failure:"failure",all:"all",filterLogSelect:"filter",showOnlySuccess:"Only successes",showOnlyError:"Only errors",showAll:"Show all",Progress:"Progress",PreviewImage:"Preview Images",Log:"Log",log:"Log",Output:"Output Results",expandLog:"expand log size",autoScroll:"auto-scroll"},Ya={maxZipFileSize:"Max zip file size",retainExtTooltip:"New extension will be appended to original extension",retainOriginalExtension:"Keep Original File Extension",qualitytooltip:"Set image quality for output",quality:"Image Quality",maxZipFileSizeTooltip:"Set smaller value if memory problems occur.",ignoreExtTooltip:'Try to load files that don"t have image file extension',ignoreFileExtensions:"Load All File Types",imageTypeTooltip:"Choose image format for output",imageType:"Image Type",advancedSettings:"Advanced Settings",enableMultiThreads:"Enable multi-threading",resetButtonTooltip:"Restore all settings to default.",multiThreadsTooltip:"Convert images in multi-threaded",shrinkImageTooltip:"If the image dimensions are larger than the specified value, shrink the image to that value",shrinkImage:"Shrink images that exceed the following dimensions",useFolderNameForZip:"Use dropped folder name for the zip file",useFolderNameForZipTooltip:"If a folder is dropped or selected, its name is used as the name of the output ZIP file"},Xa="Disabled",Ja="Download",eo="Reset",to="Back",no="Failed",ao="Success",oo="Previous version",lo=`
Height`,so="Width",io="Don't show this message again",ro="About the warning when selecting a folder",uo="OK",co={},po="You must press the â€œUploadâ€ button here to load all the images in the folder, but the data loaded by this application is never actually uploaded to the server.",fo="Continue",go="Cancel",mo="When you select a folder instead of a file as input on a website, major web browsers will display a warning like the image below.",vo="This page may be an outdated version. Please reload the page.",ho="Reload",_o='If the conversion process frequently fails and an â€œOut of Memoryâ€ message appears, try reducing or disabling the number of "multi-threads" in the "Advanced Settings".',wo="Next",yo="Previous",bo="or",ko="Target File Extensions",xo={lang:fa,flags:ga,title:ma,metaDescription:va,droptarget:ha,descriptions:_a,selectLanguage:wa,fileTypeRadioTitle:ya,fileTypeRadioOptions:ba,editAcceptTypes:ka,loadbutton:xa,loadbuttontooltip:za,loadfolderbutton:Aa,loadfoldertooltip:Ia,processing:Ta,aborted:Sa,incomplete:La,completed:Ca,interfered:$a,noimage:Ea,avifUnsupported:Fa,cancel:Pa,save:Oa,close:Ua,open:Ma,reconvert:Ra,reconvertTip:ja,files:Na,threads:Da,confirmCloseDialog:Ba,confirmCloseDialogTitle:Za,githubOpenSource:Ha,convertedImageUrlTooltip:Va,copiedDataURLDialogTitle:Wa,copiedDataURLMessage:qa,convertedImageDataUrlTooltip:Ga,convertAgain:Ka,status:Qa,settings:Ya,disabled:Xa,Download:Ja,reset:eo,back:to,failed:no,success:ao,previousVersion:oo,height:lo,width:so,checkboxTextDontShowThis:io,loadfolderNotifyingTitle:ro,OK:uo,loadfolderNotifyingMessage:co,loadfolderNotifyingMessageTerm2:po,Continue:fo,Cancel:go,loadfolderNotifyingMessageTerm1:mo,errMsgWorkerLoadError:vo,Reload:ho,annotationOutOfMemory:_o,Next:wo,Prev:yo,or:bo,TargetFileTypeExt:ko},Yi=Object.freeze(Object.defineProperty({__proto__:null,Cancel:go,Continue:fo,Download:Ja,Next:wo,OK:uo,Prev:yo,Reload:ho,TargetFileTypeExt:ko,aborted:Sa,annotationOutOfMemory:_o,avifUnsupported:Fa,back:to,cancel:Pa,checkboxTextDontShowThis:io,close:Ua,completed:Ca,confirmCloseDialog:Ba,confirmCloseDialogTitle:Za,convertAgain:Ka,convertedImageDataUrlTooltip:Ga,convertedImageUrlTooltip:Va,copiedDataURLDialogTitle:Wa,copiedDataURLMessage:qa,default:xo,descriptions:_a,disabled:Xa,droptarget:ha,editAcceptTypes:ka,errMsgWorkerLoadError:vo,failed:no,fileTypeRadioOptions:ba,fileTypeRadioTitle:ya,files:Na,flags:ga,githubOpenSource:Ha,height:lo,incomplete:La,interfered:$a,lang:fa,loadbutton:xa,loadbuttontooltip:za,loadfolderNotifyingMessage:co,loadfolderNotifyingMessageTerm1:mo,loadfolderNotifyingMessageTerm2:po,loadfolderNotifyingTitle:ro,loadfolderbutton:Aa,loadfoldertooltip:Ia,metaDescription:va,noimage:Ea,open:Ma,or:bo,previousVersion:oo,processing:Ta,reconvert:Ra,reconvertTip:ja,reset:eo,save:Oa,selectLanguage:wa,settings:Ya,status:Qa,success:ao,threads:Da,title:ma,width:so},Symbol.toStringTag,{value:"Module"})),Xi="Arabic",Ji="German",er="English",tr="Spanish",nr="Finnish",ar="French",or="Hindi",lr="Indonesian",sr="Italian",ir="Japanese",rr="Korean",ur="Dutch",dr="Polish",cr="Portuguese",pr="Russian",fr="Turkish",gr="Ukrainian",mr="Chinese",vr={ar:Xi,de:Ji,en:er,es:tr,fi:nr,fr:ar,hi:or,id:lr,it:sr,ja:ir,ko:rr,nl:ur,pl:dr,pt:cr,ru:pr,tr:fr,uk:gr,"zh-hant":"Chinese(hant)",zh:mr},Vt=[],zo={en:xo},vn={},Zn=Object.assign({"./locales/ar.json":()=>he(()=>import("./ar-8ZhJyh-p.js"),[]),"./locales/de.json":()=>he(()=>import("./de-C1juEtJ3.js"),[]),"./locales/en.json":()=>he(()=>Promise.resolve().then(()=>Yi),void 0),"./locales/es.json":()=>he(()=>import("./es-D-YuDBrt.js"),[]),"./locales/fi.json":()=>he(()=>import("./fi-DzZHtI3X.js"),[]),"./locales/fr.json":()=>he(()=>import("./fr-DnBNbEr8.js"),[]),"./locales/hi.json":()=>he(()=>import("./hi-x6aU7sxH.js"),[]),"./locales/id.json":()=>he(()=>import("./id-BtqMCWRJ.js"),[]),"./locales/it.json":()=>he(()=>import("./it-BXwbSIqs.js"),[]),"./locales/ja.json":()=>he(()=>import("./ja-BCB_kYJD.js"),[]),"./locales/ko.json":()=>he(()=>import("./ko-DXSid08B.js"),[]),"./locales/nl.json":()=>he(()=>import("./nl-CSMPt6F2.js"),[]),"./locales/pl.json":()=>he(()=>import("./pl-NBbDOjaY.js"),[]),"./locales/pt.json":()=>he(()=>import("./pt-CZH32qtC.js"),[]),"./locales/ru.json":()=>he(()=>import("./ru-CncDOFDX.js"),[]),"./locales/tr.json":()=>he(()=>import("./tr-CU61d9cq.js"),[]),"./locales/uk.json":()=>he(()=>import("./uk-DTekiRi7.js"),[]),"./locales/zh-hant.json":()=>he(()=>import("./zh-hant-b29I6_cx.js"),[]),"./locales/zh.json":()=>he(()=>import("./zh-D1HJA8P8.js"),[])});var Hn;for(const l in Zn){const i=(Hn=l.match(/\/([a-z]{2}(?:-[a-z]+)?)\.json$/i))==null?void 0:Hn[1];i&&(Vt.push(i),!(i in zo)&&(vn[i]=Zn[l]))}let rn=_r();rn in vn||(rn="en");const Wt=_l({legacy:!1,globalInjection:!0,locale:rn,fallbackLocale:"en",messages:zo,warnHtmlMessage:!1,missingWarn:!1,fallbackWarn:!1});async function hr(l){if(Wt.global.availableLocales.indexOf(l)>=0)return;const i=await vn[l]();Wt.global.setLocaleMessage(l,i),await Le()}function _r(){const l=location.pathname;return String(l.match(/[^/]+(?=\/?$)/)||"").toLowerCase()}const wr=["innerHTML"],yr=Ae({__name:"switch-lang",props:{delay:{}},emits:["lang-ready","lang-change"],async setup(l,{emit:i}){let r,c;const a=st(et),o=qn(),{locale:p,t:h}=Je(),f=l,_=i,y=Object.entries(vr).map(([I,$])=>({label:$,value:I}));y.sort((I,$)=>{const N=I.label,x=$.label;return N>x?1:N<x?-1:0}),qe(()=>{o.afterEach((I,$,N)=>{v(),a.switchToolTipVisibility()})}),[r,c]=wl(()=>v()),await r,c();async function b(I){(I!==p.value||Wt.global.availableLocales.indexOf(I)===-1)&&(_("lang-change",I),await ds(f.delay),await hr(I),p.value=I,document.title=h("title"),await Le()),_("lang-ready",I)}async function v(){const I=o.currentRoute.value.path||"",$=String(I.match(new RegExp("(?<=^\\/)[^/]+"))||"");$&&Vt.includes($)?(await b($),p.value=$):await u()}async function u(){const I=T().toLowerCase(),$=I.split(/[-_]/)[0];if(Vt.includes($)){let N=$;if($==="zh")switch(I){case"zh-hant":case"zh-mo":case"zh-hk":case"zh-tw":N="zh-hant"}await b(N)}}function T(){const I=window.navigator;return I.language||I.userLanguage||I.browserLanguage}function A(I){o.push("/"+I+"/")}return(I,$)=>{const N=we,x=Qt,H=ye;return E(),oe(H,{to:!1,"display-directive":"show",show:e(a).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(a).LANDSCAPE.value?"left":"bottom",duration:0,delay:50},{trigger:t(()=>[n(x,{ref:"langselect",size:"tiny",style:{width:"auto"},"consistent-menu-width":!1,options:e(y),"_v-model:value":"locale",value:e(p),"onUpdate:value":A},{arrow:t(()=>[n(N,null,{default:t(()=>[n(e(yl))]),_:1})]),_:1},8,["options","value"])]),default:t(()=>[m("div",{innerHTML:I.$t("selectLanguage")},null,8,wr)]),_:1},8,["show","placement"])}}}),et=Symbol("global variables"),br=Ae({__name:"Avif2Jpeg",emits:["ready"],setup(l,{emit:i}){const{t:r,locale:c}=Je(),a=200,o=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),p=w(null);w(0);let h=w(void 0);const f=w(!0),_=w(!1),y=w(!1),b=w(!1),v=w(!0),u=w(!1);xl(et,{showTooltipsBeforeMounted:h,LANDSCAPE:f,IS_SP:o,switchToolTipVisibility:$,SSR:!1}),qe(()=>{N(),window.addEventListener("resize",N),$(),setTimeout(()=>y.value=!0,3e3)}),jt(()=>{window.removeEventListener("resize",N)});let T=0;function A(){b.value=!1,T=Date.now()}function I(){const V=v.value?0:Math.max(0,a-(Date.now()-T));v.value=!1,Le(()=>{setTimeout(()=>b.value=!0,V)})}async function $(){}function N(){const V=document.body.clientWidth,g=document.body.clientHeight;f.value=V*.75>g||V>900}function x(V){p.value=V}function H(V){u.value=V}return(V,g)=>{const Y=Me,q=we,ie=gt;return E(),oe(Y,{vertical:"",align:"stretch",class:"avif2jpeg"},{default:t(()=>[n(Bl,null,{"lang-switch":t(()=>[(E(),oe(bl,null,{default:t(()=>[n(yr,{onLangChange:A,onLangReady:I,delay:e(v)?0:a},null,8,["delay"])]),_:1}))]),_:1}),n(lt,{name:"fade"},{default:t(()=>[Ve(n(Y,{vertical:"",align:"stretch",justify:"space-between",style:{height:"100%"}},{default:t(()=>[n(Y,{justify:"space-around",vertical:"",style:{height:"100%"}},{default:t(()=>[n(Hl),n(Y,{justify:"center"},{default:t(()=>[n(Pi,{"_v-model:expanded":"UserSettings.expandExtButtons",target:e(Z).acceptTypeValue,"onUpdate:target":g[0]||(g[0]=O=>e(Z).acceptTypeValue=O),userExtensions:e(Z).editedAcceptTypes,"onUpdate:userExtensions":g[1]||(g[1]=O=>e(Z).editedAcceptTypes=O),"disable-notifying-folder-select":e(Z).disableNotifyingFolderSelect,"onUpdate:disableNotifyingFolderSelect":g[2]||(g[2]=O=>e(Z).disableNotifyingFolderSelect=O),forbidden:e(_),onInput:x,onClick:g[3]||(g[3]=O=>H(!0)),onCancel:g[4]||(g[4]=O=>H(!1))},null,8,["target","userExtensions","disable-notifying-folder-select","forbidden"])]),_:1}),n(mi,{input:e(p),format:e(Z).imageFormat,quality:e(Z).imageQuality,"retain-extension":e(Z).retainExtension,maxZipSizeMB:e(Z).maxZipSizeMB,threads:e(Z).multithread?e(Z).threadCount:0,"show-note":e(u),"onUpdate:showNote":g[5]||(g[5]=O=>De(u)?u.value=O:null),onStart:g[6]||(g[6]=O=>_.value=!0),onEnd:g[7]||(g[7]=O=>_.value=!1),"_:multi-thread-count":"val => availableThreadCount = val"},{"lang-switch":t(()=>g[18]||(g[18]=[])),_:1},8,["input","format","quality","retain-extension","maxZipSizeMB","threads","show-note"]),n(Y,{vertical:"",align:"center"},{default:t(()=>[n(ie,{trigger:"manual",placement:"top","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(q,{size:"5vh",color:"#DADADA",style:{margin:"0px"}},{default:t(()=>[n(e(kl))]),_:1})]),default:t(()=>[g[19]||(g[19]=m("span",null,"CONVERT TOðŸ‘‡",-1))]),_:1})]),_:1}),n(Y,{vertical:"",align:"center"},{default:t(()=>[n(Mi,{format:e(Z).imageFormat,"onUpdate:format":g[8]||(g[8]=O=>e(Z).imageFormat=O),quality:e(Z).imageQuality,"onUpdate:quality":g[9]||(g[9]=O=>e(Z).imageQuality=O)},null,8,["format","quality"]),n(Zi,{"retain-ext":e(Z).retainExtension,"onUpdate:retainExt":g[10]||(g[10]=O=>e(Z).retainExtension=O),"use-folder-name-for-zip":e(Z).useFolderNameForZip,"onUpdate:useFolderNameForZip":g[11]||(g[11]=O=>e(Z).useFolderNameForZip=O),"max-zip-size":e(Z).maxZipSizeMB,"onUpdate:maxZipSize":g[12]||(g[12]=O=>e(Z).maxZipSizeMB=O),"_v-model:expanded":"UserSettings.expandAdvSettings",multithread:e(Z).multithread,"onUpdate:multithread":g[13]||(g[13]=O=>e(Z).multithread=O),"thread-count":e(Z).threadCount,"onUpdate:threadCount":g[14]||(g[14]=O=>e(Z).threadCount=O),"_:thread-max":"availableThreadCount","shrink-image":e(Z).shrinkImage,"onUpdate:shrinkImage":g[15]||(g[15]=O=>e(Z).shrinkImage=O),"max-width":e(Z).maxWidth,"onUpdate:maxWidth":g[16]||(g[16]=O=>e(Z).maxWidth=O),"max-height":e(Z).maxHeight,"onUpdate:maxHeight":g[17]||(g[17]=O=>e(Z).maxHeight=O)},null,8,["retain-ext","use-folder-name-for-zip","max-zip-size","multithread","thread-count","shrink-image","max-width","max-height"])]),_:1}),n(Gi)]),_:1})]),_:1},512),[[We,e(b)]])]),_:1})]),_:1})}}}),hn=Ae({__name:"App",setup(l){const i={Statistic:{valueFontSize:"1em"},Popover:{borderRadius:"0.4em",boxShadow:"2px 2px 5px 0px #555555"},Tooltip:{},Image:{toolbarColor:"#00000099"}},r=w(!0);return qe(()=>{r.value=!1}),(c,a)=>{const o=Tl,p=Il,h=Al,f=zl,_=Sl;return E(),oe(_,{"theme-overrides":i,style:{width:"100%",height:"100%"}},{default:t(()=>[n(f,null,{default:t(()=>[n(h,{placement:"top-left",closable:!0,max:50},{default:t(()=>[n(p,null,{default:t(()=>[n(o,null,{default:t(()=>[n(br,{class:ft({hide:e(r)})},null,8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),Ao=[{path:"/",name:"Home",component:hn}];for(const l of Vt)Ao.push({path:"/"+l+"/",strict:!0,name:l,component:hn});Ll(hn,{routes:Ao,base:"/avif2jpeg/dist/"},({app:l,router:i,routes:r,isClient:c,initialState:a})=>{l.use(Wt)});
