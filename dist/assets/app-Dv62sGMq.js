var Co=Object.defineProperty;var $o=(l,i,r)=>i in l?Co(l,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[i]=r;var ut=(l,i,r)=>$o(l,typeof i!="symbol"?i+"":i,r);import{r as _,a as Wt,d as Te,i as lt,c as ee,o as E,_ as ke,u as e,w as t,b as A,t as d,e as n,f as Eo,N as be,L as Fo,g as ne,B as Le,h as un,j as g,F as Pe,k as bt,l as Po,m as G,n as Oo,p as Uo,q as Ue,s as ve,v as Mo,x as Vn,y as Hn,z as xe,A as Ae,C as Fe,D as ln,E as sn,G as Je,H as ct,I as Ro,J as No,K as Be,M as kt,O as le,P as at,T as ot,Q as Wn,R as Ze,S as dn,U as qt,V as cn,W as dt,X as He,Y as Rt,Z as jo,$ as pt,a0 as Do,a1 as Ln,a2 as Cn,a3 as qn,a4 as ft,a5 as Bo,a6 as Gt,a7 as Zo,a8 as Vo,a9 as pn,aa as Ho,ab as $n,ac as Gn,ad as Wo,ae as qo,af as Go,ag as Kn,ah as Ko,ai as Yn,aj as je,ak as Qn,al as Yo,am as Kt,an as Xn,ao as En,ap as Jn,aq as Qo,ar as Xo,as as Jo,at as Nt,au as el,av as Re,aw as tl,ax as nl,ay as fn,az as ea,aA as al,aB as ol,aC as ta,aD as ll,aE as _t,aF as wt,aG as sl,aH as il,aI as rl,aJ as ul,aK as dl,aL as cl,aM as pl,aN as fl,aO as gl,aP as ml,aQ as Fn,aR as vl,aS as hl,aT as _l,aU as wl,aV as yl,aW as bl,aX as kl,aY as xl}from"./vendor-DaNf9RZG.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))c(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const p of o.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&c(p)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();const Oe=_(navigator.hardwareConcurrency?Math.min(navigator.hardwareConcurrency,12):0),yt={threadCount:{min:2,max:Math.max(2,Oe.value)}},zl={imageFormat:"image/jpeg",imageQuality:90,expandExtButtons:!1,acceptTypeValue:void 0,editedAcceptTypes:"",expandAdvSettings:!1,retainExtension:!1,maxZipSizeMB:1e3,useFolderNameForZip:!1,multithread:!0,threadCount:Oe.value,shrinkImage:!1,maxWidth:4096,maxHeight:4096,disableNotifyingFolderSelect:!1},W=Wt(na({}));function Il(){na(W)}function na(l){return Object.assign(l,zl)}const aa="avif2jpeg",tn=JSON.parse(localStorage.getItem(aa)||"{}");for(const l in W)if(tn.hasOwnProperty(l)&&tn[l]!==void 0){let i=tn[l];yt.hasOwnProperty(l)&&(yt[l].min>i&&(i=yt[l].min),yt[l].max<i&&(i=yt[l].max)),W[l]=i}const Al=()=>{const l={};for(const i in W)l[i]=W[i];localStorage.setItem(aa,JSON.stringify(l))};window.addEventListener("beforeunload",Al);const Tl=Te({__name:"github",setup(l){const i=lt(et);return(r,c)=>{const a=be,o=Eo,p=ke;return E(),ee(p,{to:!1,"display-directive":"show",show:e(i).showTooltipsBeforeMounted.value,trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(o,{href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-size":"small","font-weight":"bolder"}},{default:t(()=>[n(a,null,{default:t(()=>[n(e(Fo))]),_:1}),c[0]||(c[0]=A("GitHub"))]),_:1})]),default:t(()=>[A(" "+d(r.$t("githubOpenSource")),1)]),_:1},8,["show"])}}}),Sl=["href"],Ll=Te({__name:"licenses",setup(l){const i=_(!1),r={Vue:"https://github.com/vuejs/core/blob/main/LICENSE",Vite:"https://github.com/vitejs/vite/blob/main/LICENSE","Vite SSG":"https://github.com/antfu/vite-ssg/blob/main/LICENSE","Naive UI":"https://github.com/TuSimple/naive-ui/blob/main/LICENSE",Ionicons:"https://github.com/ionic-team/ionicons/blob/main/LICENSE"};return(c,a)=>{const o=Le;return E(),ne(Pe,null,[n(o,{text:"",onClick:a[0]||(a[0]=p=>i.value=!0),style:{color:"black","font-size":"small"}},{default:t(()=>a[2]||(a[2]=[A("Licenses")])),_:1}),n(e(un),{preset:"dialog",ref:"dialog",show:i.value,"onUpdate:show":a[1]||(a[1]=p=>i.value=p),"positive-text":"OK",title:"Licenses"},{default:t(()=>[a[3]||(a[3]=g("h3",null,"Used Framework and Libraries",-1)),g("ul",null,[(E(),ne(Pe,null,bt(r,(p,v)=>g("li",null,[g("a",{href:p},d(v),9,Sl)])),64))])]),_:1},8,["show"])],64)}}}),Cl=1,$l=10,El=3,Fl="",Ot={major:Cl,minor:$l,build:El,tag:Fl},Pl={style:{"font-size":"x-small","user-select":"none"}},Ol=Te({__name:"version",setup(l){const i=["0.0.118"],r=`${Ot.major}.${Ot.minor}.${Ot.build}${Ot.tag}`,c=i.map(v=>({label:`v${v}`,key:v,value:v}));function a(v){const{key:f,label:h}=v,y=p(f),b=G("a",{href:y},h),m=G("div",null,b);return G("div",null,m)}function o(v){location.href=p(v)}function p(v){return`/avif2jpeg/old/${v}/`}return(v,f)=>{const h=Po;return E(),ee(h,{"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start",options:e(c),"render-label":a,"onUpdate:value":o},{header:t(()=>[g("span",Pl,d(v.$t("previousVersion")),1)]),default:t(()=>[g("span",{style:{cursor:"pointer"}},"v"+d(r))]),_:1},8,["options"])}}}),Ul=Te({__name:"header",setup(l){const i=Oo();return(r,c)=>{const a=Uo("router-link"),o=Ue,p=Vn;return E(),ee(o,{vertical:"",justify:"start"},{default:t(()=>[n(o,{justify:"space-between",align:"center",wrap:!1},{default:t(()=>[n(o,{align:"center"},{default:t(()=>[n(Tl),n(Ol),n(Ll),n(o,{style:{"font-size":"small"}},{default:t(()=>[e(i).path!=="/"?(E(),ee(a,{key:0,to:"/"},{default:t(()=>c[0]||(c[0]=[A("HOME")])),_:1})):ve("",!0)]),_:1})]),_:1}),n(o,{align:"end",style:{"font-size":"x-small"}},{default:t(()=>[Mo(r.$slots,"lang-switch")]),_:3})]),_:3}),n(p,{style:{margin:"0px"}})]),_:3})}}}),Ml={style:{padding:"0px",margin:"0px","text-align":"center"}},Rl=Te({__name:"title",setup(l){const i=Hn();return xe(()=>{const r=i.currentRoute.value.path||"";return!String(r.match(new RegExp("(?<=^\\/)[^/]+"))||"")}),(r,c)=>{const a=Ue;return E(),ee(a,{align:"center",justify:"center",style:{margin:"0px"}},{default:t(()=>[g("h1",Ml,d(r.$t("title")),1)]),_:1})}}}),Pn=new Set,Nl=new Set,jl=new Set,jt=new Map;function Dl(l){const i=jt.get(l);i&&(jt.delete(l),i(),Ut==null||Ut(),Ut=null)}function Bl(){for(const l of jt.keys())Dl(l)}let Ut=null;function oa(){Bl();for(const l of Pn)l.onmessage=null,l.terminate();Pn.clear(),Nl.clear(),jl.clear(),jt.clear()}function Zl(l){return new Worker("/avif2jpeg/dist/assets/worker.zip-CRj0gJBD.js",{name:l==null?void 0:l.name})}function Vl(l){return new Worker("/avif2jpeg/dist/assets/worker.loader-PhexzccB.js",{name:l==null?void 0:l.name})}const Hl=1e3*10;let Xe;const Ve=new Map,Dt=new Map,Bt=new Map,zt=new Map;let gn,K,mn,Zt,Mt,la,sa,ia,ra,It;function nn(l){if({files:Mt,completedFileIdSet:gn,ConvStats:K,canceled:mn,props:Zt,format:la,quality:sa,outputExt:ia,imageType:ra,message:It}=l||{},Xe=null,Ve.clear(),Dt.clear(),Bt.clear(),zt.clear(),Dt.clear(),Bt.clear(),zt.clear(),l)for(const r in l)delete l[r]}async function Wl(l){nn(l),gn.clear();let i;try{i=await ql()}catch{return nn(),{exception:new Error("worker-load-error"),callbackToClearConverter:new Function,callbackToGenerateFailedZips:new Function}}const[r,c]=i;Xe=c;const a=new Promise(m=>{c.onmessage=u=>{const S=u.data,{action:w}=S;switch(w){case"squeeze-zip":case"zip-squeeze-error":m(void 0);break}}}),o=new Promise(m=>{r.onmessage=u=>{const{data:{action:S}}=u;S==="end-convert"&&m()}}),p=Mt.map(m=>m._id);Mt.forEach(m=>Dt.set(m._id,m));const v=Ae(mn,m=>{if(!m)return;v();const u={action:"cancel-convert"};r.postMessage(u)}),f={action:"start-convert",list:Mt,fileIdList:p,outputQuality:sa,outputType:la,threads:Zt.threads};r.postMessage(f),await o,c.postMessage({action:"squeeze"}),await a,v();const h=()=>{oa(),c.onmessage=null,c.terminate(),r.terminate(),nn()};let y=!1;return{callbackToClearConverter:h,callbackToGenerateFailedZips:async m=>{y||(y=!0,await ns(m,c,{},K))}}}async function ql(){oa();const l=new Vl,i=new Zl,r=new Promise((p,v)=>{const f=u=>{i.removeEventListener("message",b),l.removeEventListener("message",b),clearTimeout(m),u?p(u):v(u)};let h=!1,y=!1;const b=u=>{u.target===i&&(h=!0),u.target===l&&(y=!0),h&&y&&f(!0)};let m=0;i.addEventListener("message",b),l.addEventListener("message",b),m=window.setTimeout(()=>f(!1),Hl)}),{port1:c,port2:a}=new MessageChannel,o={action:"set-zip-port"};return i.postMessage({action:"set-port-loader"},[c]),l.postMessage(o,[a]),await r,i.postMessage({action:"set-config",zipSize:Zt.maxZipSizeMB*1024*1024,keepExt:Zt.retainExtension,outputExt:ia,imageType:ra}),l.addEventListener("message",Kl),i.addEventListener("message",Gl),[l,i]}const Gl=l=>{var p;const i=l.data,{action:r}=i;switch(r){case"add-zip-completed":{const{fileId:v,entireIndex:f,storedPath:h}=i;return}case"respond-image":{const{url:v,index:f,path:h,size:y,fileId:b}=i;K.convertedImageUrl=v,K.convertedImageSize=y,K.convertedImageIndex=f,K.convertedImageName=h;let m="",u=0,S="";if(b>=0){const w=Dt.get(b);m=URL.createObjectURL(w),u=w.size,S=w.webkitRelativePath||w.name}K.convertedImageOrgUrl=m,K.convertedImageOrgSize=u,K.convertedImageOrgName=S,K.convertedImageShrinked=(p=zt.get(b))==null?void 0:p.shrinked;return}case"respond-delete":{const{index:v,success:f,fileId:h}=i;Ve.get(h).command="âŒdeleted",Ve.get(h).completed=!1;return}}switch(r){case"error-push-filelist-zip":const{path:v}=i;K.failedZipDone=!0,It.error(`an error occurred "${v}"`,{duration:3e3});return}const{size:c,count:a}=i,o="url"in l.data?l.data.url:"";switch(r){case"push-zip":K.zips.push({url:o,size:c,count:a}),K.zippedTotalCount+=a,K.zippedTotalSize+=c;break;case"squeeze-zip":a>0&&(K.zips.push({url:o,size:c,count:a}),K.zippedTotalCount+=a,K.zippedTotalSize+=c);break;case"push-filelist":K.failedFileZippedCount++;break;case"squeeze-filelist-zip":K.failedZipDone=!0;case"push-filelist-zip":K.failedZips.push({url:o,size:c,count:a});break;case"zip-error":case"zip-squeeze-error":K.zippingErrorCount+=a;break}},Kl=l=>{l.target;const{data:i}=l,{action:r}=i;switch(r){case"list-start":break;case"list-end":break;case"file-start":{const{index:c,path:a,fileId:o}=i;Ql(c,a,o);break}case"file-load":{const{thumbnail:c,width:a,height:o,fileId:p,shrinked:v,workerId:f}=i,h=Ve.get(p);h.core=f,h.command="ðŸ–¼ï¸loaded",c&&(K.thumbnail=c);let y=zt.get(p);y||(y={},zt.set(p,y)),y.shrinked??(y.shrinked=v);break}case"file-converted":{const{index:c,path:a,fileId:o}=i,p=Ve.get(o);p.command="ðŸ”ƒconverted",K.converted++;break}case"file-completed":{const{inputsize:c,outputsize:a,fileId:o,entireIndex:p,storedPath:v}=i,f=Ve.get(o);f&&(f.command="âœ…completed",f.completed=!0,f.fileId=o),K.inputTotalSize+=c,K.outputTotalSize+=a,K.done++,K.success++,gn.add(o),f.zippedIndex=p,K.ziplogs.push({fileId:o,storedPath:v});break}case"file-retry":{const{index:c,path:a,fileId:o}=i;Xl(c,a,o);break}case"file-error":{const{index:c,path:a,fileId:o}=i;Jl(c,a,o);break}case"file-canceled":{const{fileId:c,path:a}=i;es(c);break}}};let Yl=0;function Ql(l,i,r){const c={key:Yl++,core:-1,index:l,path:i,command:"âž¡ï¸started"};Ve.set(r,c),K.logs.push(c),Bt.has(r)||mn.value||K.startedCount++}function Xl(l,i,r){const c=Ve.get(r);c.command="âš ï¸retrying",c.error=!0,It.warning(`retrying "${i}"`,{duration:3e3}),K.retried++,Bt.set(r,1)}function Jl(l,i,r){const c=Ve.get(r);K.done++,K.failure++,c.command="â—failed",c.error=!0,It.error(`failed to load "${i}"`,{duration:5e3})}function es(l){const i=Ve.get(l);K.done++,K.failure++,i.command="â—canceled",i.error=!0}function ts(l){Xe==null||Xe.postMessage({action:"request-image",index:l})}function an(l){Xe==null||Xe.postMessage({action:"delete-image",index:l})}async function ns(l,i,r,c){let a=0;for(const o of l){const p=(o.webkitRelativePath||o.name).replace(/^\//,"");if(c.failedZipDone)break;if(r.value)return;a-c.failedFileZippedCount>20&&await new Promise(v=>setTimeout(v,10)),i.postMessage({action:"add-filelist",file:o,path:p}),a++}if(c.failedZipDone){It.error("Zipping error files was aborted",{duration:5e3});return}i.postMessage({action:"squeeze-filelist"})}function Qe(l,i=2){const r=Math.sign(l);l=Math.abs(l);const c=["Bytes","KB","MB","GB"],a=l?Math.floor(Math.log(l)/Math.log(1024)):0;return`${(l/Math.pow(1024,a)*r).toFixed(i)}${c[a]}`}function ua(l,i=100,r=!1){i=typeof i=="number"?{width:i,height:i}:i;const{width:c,height:a}=i;let{width:o,height:p}=l;const v=o/p,f=c/a;return v>=f?(o=r?Math.min(c,o):c,p=o/v|0):(p=r?Math.min(a,p):a,o=p*v|0),{width:o,height:p}}class as{constructor(){ut(this,"_currentFileCount",0);ut(this,"_currentZipIndex",0);ut(this,"_totalFileCount",0);ut(this,"_zipLengthSumList",[]);ut(this,"_pathBank",{})}increase(i){return i&&(this._pathBank[i]=[this._zipLengthSumList.length,this._currentFileCount]),this._currentFileCount++,this._totalFileCount++}split(){this._zipLengthSumList.push(this._totalFileCount),this._currentZipIndex++,this._currentFileCount=0}get(i){if(typeof i=="number"){let r=this._zipLengthSumList.findIndex((o,p)=>i<o);r===-1&&(r=this._zipLengthSumList.length);const c=this._zipLengthSumList[r-1]||0,a=i-c;return[r,a]}else{const r=this._pathBank[String(i)];if(r)return r}return null}getZipIndex(){return this._currentZipIndex}getIndex(){return this._totalFileCount}}function os(l,i=100){const r=_(l);return Ae(r,c=>{c!==void 0&&Fe(()=>{setTimeout(()=>r.value=void 0,i)})},{immediate:!0}),r}let xt;async function ls(l,i,r,c,a){let o="";const p=document.createElement("canvas"),v=p.getContext("2d");let f=new ln;const h=[f],y=new as,b=r.format,m=r.quality/100,u=[...b.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),S=l.length,w=r.maxZipSizeMB*1024*1024;let $=0,F=null,H="",k="",Z=0,Y=0,z=0,T=0,q=0,se=!1;xt=L=>{const[V,te]=y.get(L),X=h[V],ie=X.get(te,b);a.convertedImageIndex=L,a.convertedImageName=X.getPathByIndex(te),a.convertedImageUrl=URL.createObjectURL(ie),a.convertedImageSize=ie.size;let de="",me=0,he="";const _e=ce[L];de=URL.createObjectURL(_e),me=_e.size,he=_e.webkitRelativePath||_e.name,a.convertedImageOrgUrl=de,a.convertedImageOrgSize=me,a.convertedImageOrgName=he};const ce=[];for(const L of l){if(c.value)break;const V=L.name;let te="";const X=L.size,ie=(L.webkitRelativePath||L.relativePath||V).replace(/^\//,""),de=document.createElement("img"),me={key:z++,core:-1,index:$++,path:ie,command:"âž¡ï¸start"};a.startedCount=$,a.logs.push(me),a.logs.length-1,o&&(URL.revokeObjectURL(o),o=""),o=URL.createObjectURL(L),k=o,Z=L.size,de.src=o;const he=await da(de).then(()=>!0).catch(()=>!1);if(!de.complete||!he||c.value){a.done++,a.failure++,me.command="â—failed";continue}const _e=de.width,N=de.height;p.width=_e,p.height=N,v.drawImage(de,0,0,_e,N,0,0,_e,N),me.command="ðŸ–¼ï¸imgload",a.thumbnail=de;const P=await new Promise(fe=>{const D=Me=>{F=Me,fe(Me)};p.toBlob(D,b,m)});if(c.value)break;if(!P){a.failure++;continue}Y=P.size,a.converted++;let pe="";if(q+Y>=w){try{await f.wait(),pe=await f.url()}catch{se=!0,alert("memory problem occurred");break}a.zips.push({url:pe,size:q,count:T}),a.zippedTotalCount+=T,a.zippedTotalSize+=q,q=0,T=0,y.split(),f=new ln,h.push(f)}q+=Y;const ae=ie||V;for(let fe=1;fe<255&&(te=ae.replace(r.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+(fe>1?`(${fe})`:"")+"."+u,!!f.has(te));fe++);a.done++;try{T++,f.add(te,P)}catch{continue}y.increase(),ce.push(L),a.inputTotalSize+=X,a.outputTotalSize+=Y,a.ziplogs.push({fileId:L._id,storedPath:te}),H=te,me.zippedIndex=a.success,a.success++,me.command="âœ…completed",me.completed=!0,me.fileId=L._id,i.add(L._id)}if(a.success>0)if(S===1)F&&(a.convertedImageIndex=0,a.convertedImageName=H.replace(/^.*\/(?=[^/]+$)/,"").replace(r.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+u,a.convertedImageUrl=URL.createObjectURL(F),a.convertedImageOrgUrl=k,a.convertedImageOrgSize=Z);else try{if(se)throw new Error("terminated zipping process for memory problems");await f.wait();const L=await f.url();a.zips.push({url:L,count:T,size:q}),a.zippedTotalCount+=T,a.zippedTotalSize+=q}catch{}const B={value:!1},Ne=()=>{B.value=!0,h.forEach(L=>L.clear()),h.length=0,ce.length=0,xt=null};let Ce=!1;return{callbackToClearConverter:Ne,callbackToGenerateFailedZips:async L=>{Ce||(Ce=!0,is(L,w,a,B))}}}function ss(l){xt==null||xt(l)}async function is(l,i,r,c){let a=0,o=0,p=new ln;for(let v=0;v<l.length;v++){const f=l[v],h=(f.webkitRelativePath||f.name).replace(/^\//,"");if(c.value)return;try{await p.add(h,f)}catch{alert(`an error occurred during access to "${h}"`);break}if(o+=f.size,a++,r.failedFileZippedCount++,o>=i||v===l.length-1){await p.zip();const y=await p.url();r.failedZips.push({url:y,size:o,count:a}),p.clear(),o=0,a=0}}r.failedZipDone=!0}function da(l){if(typeof l.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((i,r)=>{l.onload=i,l.onerror=r})}const We=(l,i)=>{const r=l.__vccOpts||l;for(const[c,a]of i)r[c]=a;return r},rs={class:"container"},us={__name:"zipicon",setup(l){return(i,r)=>(E(),ne("span",rs,[n(e(be),null,{default:t(()=>[n(e(sn))]),_:1}),r[0]||(r[0]=g("span",{class:"text"},"ZIP",-1))]))}},ds=We(us,[["__scopeId","data-v-8b8df2f0"]]),cs=["href","download","title"],ps='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',fs=Te({__name:"thumbnail",props:{src:{},width:{},height:{},maxWidth:{default:100},maxHeight:{default:100},expand:{type:Boolean,default:!1},loading:{type:Boolean},fileName:{},allowNext:{type:Boolean},allowPrev:{type:Boolean},hidden:{type:Boolean}},emits:["load","error","next","prev"],setup(l,{expose:i,emit:r}){const{t:c}=Je(),a=l,o=r,p=_();_();const v=_(!0),f=_(""),h=_(a.width||100),y=_(a.height||100),b=_(!1),m=Wt({width:h.value+"px",height:y.value+"px",minWidth:"50px",minHeight:"50px"});ct(()=>{var k,Z,Y;(Z=(k=p.value)==null?void 0:k.previewInstRef)==null||Z.setPreviewSrc(ps),URL.revokeObjectURL((((Y=p.value)==null?void 0:Y.imageRef)||{}).src),p.value=null});const u=_(!0);Ro(()=>{u.value=!1}),No(()=>{u.value=!0}),Ae(a,(k,Z)=>{m.width=(a.width||100)+"px",m.height=(a.height||100)+"px"}),Ae(()=>a.src,(k,Z)=>{u.value&&$(k)},{immediate:!0}),i({download:F,openPreview:H,active:u});async function S(k){const Z=k.target,Y=Z.naturalWidth,z=Z.naturalHeight,{width:T,height:q}=ua({width:Y,height:z},{width:a.maxWidth||100,height:a.maxHeight||100},a.expand);h.value=T,y.value=q,o("load",{src:Z.src,width:Y,height:z}),v.value=!1,await new Promise(se=>setTimeout(se,100)),!v.value&&(b.value=!0)}function w(k){const Z=k.target;o("error",Z.src)}async function $(k){v.value=!0,b.value=!1,f.value=k}function F(){const k=document.createElement("a");k.href=f.value,k.download=a.fileName,k.click()}function H(){var k;(k=p.value)==null||k.click()}return(k,Z)=>{const Y=Wn,z=dn,T=Ue,q=kt;return Be((E(),ne("div",null,[n(e(ke),null,{trigger:t(()=>[n(q,{show:e(v)||a.loading},{default:t(()=>[n(T,{justify:"center",align:"center",style:le(e(m))},{default:t(()=>[g("a",{"_v-show":"!(imgloading || props.loading)",href:e(f),onClick:Z[0]||(Z[0]=at(()=>{},["left","prevent"])),target:"_blank",download:a.fileName,title:a.fileName,style:{"line-height":"0px"}},[n(ot,{mode:"in-out"},{default:t(()=>[Be(n(Y,{ref_key:"nImageRef",ref:p,"show-toolbar-tooltip":"",onLoad:S,onError:w,src:e(f),width:e(h),height:e(y),style:{border:"1px solid silver"}},null,8,["src","width","height"]),[[Ze,e(b)]])]),_:1})],8,cs),e(v)||a.loading?(E(),ee(z,{key:0})):ve("",!0)]),_:1},8,["style"])]),_:1},8,["show"])]),default:t(()=>[A(" "+d(a.fileName),1)]),_:1})],512)),[[Ze,!k.hidden]])}}}),On=We(fs,[["__scopeId","data-v-6c94d582"]]),gs=["href","download","title"],ms={class:"left-num"},vs={class:"right-num"},hs=["href","download","title"],_s={class:"left-num"},ws={class:"right-num"},ys=["href","download"],bs=Te({__name:"image-viewer",props:{url:{},originalUrl:{},name:{},originalName:{},size:{},originalSize:{},length:{},index:{},isSingle:{type:Boolean},variousInfo:{}},emits:["demand-image","delete-image","close"],setup(l,{expose:i,emit:r}){const c=lt(et),a=l,o=r;i({download:_e,cleanup:Se,openPreview:oe,isPreviewing(){return z.value},changeIndex(I){u.value=I}});const p=qt(),{t:v}=Je();cn();const f=_(),h=_(),y=_(),b=dt("viewerItemContainer"),m=_(!0),u=_(Math.max(a.index,0)+1),S=_(1),w=_(1),$=_(""),F=_(1),H=_(1),k=_(!1),Z=_(!1),Y=_(!1),z=xe(()=>{var I,C;return(C=(I=y.value)==null?void 0:I.previewInstRef)==null?void 0:C.displayed}),T=xe(()=>{var I,C;return((C=(I=y==null?void 0:y.value)==null?void 0:I.previewInstRef)==null?void 0:C.previewSrc)===$.value}),q=xe(()=>u.value<a.length),se=xe(()=>u.value>1),ce=_("viewer-item-init"),B=_(0),Ne=_(!0);_({width:"auto",height:"auto"});const Ce=_(!1);He(()=>{document.body.addEventListener("keydown",de),document.body.addEventListener("keydown",ie),te(u.value-1),X()}),ct(()=>{clearTimeout($e),document.body.removeEventListener("keydown",de),document.body.removeEventListener("keydown",ie),Ce.value=!0}),Rt(()=>{URL.revokeObjectURL(a.url),URL.revokeObjectURL(a.originalUrl)});let $e=-1;Ae(u,(I,C)=>{u.value<1||u.value>a.length||I===C||(clearTimeout($e),I>C?ce.value="viewer-item-next":ce.value="viewer-item-prev",$e=setTimeout(()=>{a.index!==u.value-1&&(B.value=m.value?B.value:~B.value,Ne.value=!1,te(u.value-1))},50))});let L="",V="";Ae(()=>a.url,()=>{var O,re;let I="";a.index===0&&m.value?(m.value=!1,u.value=1,I=a.url):a.index===u.value-1?(m.value=!1,k.value=!1,I=a.url):(URL.revokeObjectURL(a.url),URL.revokeObjectURL(a.originalUrl));const C=L,Q=V;if(URL.revokeObjectURL(C),URL.revokeObjectURL(Q),L=a.url,V=a.originalUrl,I){try{if((re=(O=y.value)==null?void 0:O.previewInstRef)!=null&&re.displayed){T.value?y.value.previewInstRef.setPreviewSrc(I):y.value.previewInstRef.setPreviewSrc(a.originalUrl);try{const ye=y.value.previewInstRef.displayed;y.value.previewInstRef.handleAfterLeave(),y.value.previewInstRef.displayed=ye}catch{}}}catch{}$.value=I}},{immediate:!0});function te(I){k.value=!0,Z.value=!1,Y.value=!1,Fe(()=>o("demand-image",I))}function X(){if(!c.IS_SP)return;let I=b.value.$el,C=0,Q=0,O=0,re=0,ye=0;const qe=Ee=>{C=Ee.touches[0].pageX,Q=Ee.touches[0].pageY,ye=Date.now()};I.addEventListener("touchstart",qe);const tt=Ee=>{O=Ee.touches[0].pageX,re=Ee.touches[0].pageY,Ge()};window.addEventListener("touchmove",tt);const J=()=>{Ge();const Ee=O-C,At=Math.abs(Ee),Yt=re-Q,Qt=Math.abs(Yt);At<Qt||At<30||P(Ee>0?-1:1)};window.addEventListener("touchend",J);const Ge=()=>{const Ee=Date.now();Ee-ye>500&&(C=O,Q=re),ye=Ee};ct(()=>{I.removeEventListener("touchstart",qe),window.removeEventListener("touchmove",tt),window.removeEventListener("touchend",J),I=null})}function ie(I){var C,Q,O,re;if(I.key==="Escape")try{(Q=(C=y.value)==null?void 0:C.previewInstRef)!=null&&Q.displayed&&(I.stopPropagation(),(re=(O=y.value)==null?void 0:O.previewInstRef)==null||re.toggleShow(!1))}catch{}}function de(I){switch(I.code){case"ArrowRight":P(1);break;case"ArrowLeft":P(-1);break;case"Home":u.value=1;break;case"End":u.value=a.length;break;case"Space":case"Enter":if(!z.value)return;ae();break;case"ArrowUp":case"ArrowDown":default:return}I.stopPropagation(),I.preventDefault()}function me({width:I,height:C}){S.value=I,w.value=C,Z.value=!0}function he({width:I,height:C}){F.value=I,H.value=C,Y.value=!0}function _e(){T.value?f.value.download():h.value.download()}async function N(I){try{const C=await fetch(I).then(Q=>Q.blob()).then(Q=>new Promise(O=>{const re=new FileReader;re.onload=O,re.readAsDataURL(Q)})).then(Q=>Q.target.result);navigator.clipboard.writeText(C),p.info({title:v("copiedDataURLDialogTitle"),content:()=>G("div",[G("div",v("copiedDataURLMessage"))]),positiveText:"OK"})}catch{p.error({title:"failed to copy Data URL",content:"could not copy Data URL",positiveText:"OK"})}}function P(I){I>0?u.value=Math.min(a.length,u.value+I)|0:I<0&&(u.value=Math.max(1,u.value+I)|0)}let pe="";const ae=()=>{var C,Q,O,re;pe=(O=window.getComputedStyle((Q=(C=y==null?void 0:y.value)==null?void 0:C.previewInstRef)==null?void 0:Q.previewRef))==null?void 0:O.transform;const I=T.value;(re=y==null?void 0:y.value)==null||re.next(),Fe(()=>{var ye;T.value===I&&((ye=y==null?void 0:y.value)==null||ye.next())})};function fe(){try{Fe(()=>y.value.previewInstRef.previewRef.style.transform=pe)}catch{}}function D({nodes:I}){const C=G(pn,{color:T.value?"green":"gray",offset:[-20,-12],value:T.value?v("status.Converted"):v("status.Original")},()=>G(Le,{round:!0,onClick(){ae()},textColor:"white",size:"small",style:{marginLeft:"4px"}},{icon:()=>G(T.value?Zo:Vo)}));I.next=G(Le,{onClick(){P(1)},disabled:!q.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>G(Cn)}),I.prev=G(Le,{onClick(){P(-1)},disabled:!se.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>G(Ho)});try{const Q=I.download.children;Q.default=()=>v("save");const O=Q.trigger();O.props.onClick=_e,Q.trigger=()=>O}catch{}return ze(),[C,...Object.values(I)]}const Me="#pathbox-"+String(Math.random()).substring(2);let ge;function ze(){var I,C,Q;try{if(ge=(Q=(C=(I=y.value)==null?void 0:I.previewInstRef)==null?void 0:C.previewWrapperRef)==null?void 0:Q.parentNode,!ge||ge.querySelector(Me))return;let O=G("div",{id:Me,onMousedown:re=>{re.stopPropagation()},className:"__preview-injected-pathbox"+(T.value?" converted":"")},[G("div",`${String(u.value).padStart(String(a.length).length,"0")}/${String(a.length).padStart(String(a.length).length,"0")}`),G("div",Qe(T.value?a.size:a.originalSize,0)),G("div",T.value?a.name:a.originalName)]);$n(O,ge),O=null}catch{}}ct(()=>{ge&&($n(null,ge),ge=null)});function oe(){f.value.openPreview()}function Se(){}return(I,C)=>{const Q=be,O=Ue,re=qn,ye=ft,qe=Gt,tt=jo;return E(),ee(O,{justify:"center",align:"center",vertical:"",style:le({visibility:m.value?"hidden":"visible"}),class:"body",ref:"body"},{default:t(()=>[n(tt,{ref_key:"nImageGroupRef",ref:y,"show-toolbar-tooltip":"","render-toolbar":D,onPreviewNext:fe},{default:t(()=>[n(O,{wrap:!1,align:"center",justify:"center"},{default:t(()=>[n(e(Le),{onClick:C[0]||(C[0]=J=>P(-1)),disabled:!e(se),block:"",class:pt({"thumb-arrow":!0,pale:!e(se)}),title:I.$t("Prev")},{icon:t(()=>[n(Q,{size:"30"},{default:t(()=>[n(e(Do))]),_:1})]),_:1},8,["disabled","class","title"]),n(O,{justify:"center",ref_key:"viewerItemContainer",ref:b,class:"viewer-item-container"},{default:t(()=>[n(ot,{name:ce.value},{default:t(()=>[(E(),ee(O,{vertical:"",key:B.value,"_v-show":"viewerItemVisibility"},{default:t(()=>[n(O,{align:"center",wrap:!1},{default:t(()=>[n(O,{vertical:""},{default:t(()=>[n(O,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(O,{align:"center",justify:"center",vertical:"",class:"original-thumb"},{default:t(()=>[g("a",{href:I.originalUrl,onClick:C[4]||(C[4]=at(J=>{h.value.openPreview()},["prevent"])),download:I.originalName,title:I.originalName,class:"imglink"},[n(O,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(On,{ref:J=>{J!=null&&J.active&&(h.value=J)},src:I.originalUrl,width:1,"max-width":1,"max-height":1,loading:k.value,"file-name":I.originalName,"allow-next":u.value<a.length,"allow-prev":u.value>1,onLoad:he,onNext:C[1]||(C[1]=J=>P(1)),onPrev:C[2]||(C[2]=J=>P(-1)),hidden:!0},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(O,{vertical:"",align:"center"},{default:t(()=>[n(O,{class:"imglink-label"},{default:t(()=>[A(d(e(v)("status.Original")),1)]),_:1}),n(O,{justify:"center",class:"img-size",wrap:!1},{default:t(()=>[g("span",ms,d(Y.value?F.value:"?"),1),C[11]||(C[11]=A(" Ã— ")),g("span",vs,d(Y.value?H.value:"?"),1)]),_:1}),n(O,{justify:"center"},{default:t(()=>[C[3]||(Ln(-1,!0),(C[3]=n(O,null,{default:t(()=>[A(d(Y.value?e(Qe)(a.originalSize,0):"?"),1)]),_:1})).cacheIndex=3,Ln(1),C[3])]),_:1})]),_:1})]),_:1})],8,gs)]),_:1}),n(O,{vertical:"",align:"center",style:{margin:"1em"},class:"original-thumb"},{default:t(()=>[n(Q,{size:"20",color:"silver",component:e(Cn)},null,8,["component"])]),_:1}),g("a",{href:$.value,onClick:C[5]||(C[5]=at(J=>oe(),["prevent"])),download:a.name,title:a.name,class:"imglink"},[n(O,{vertical:"",align:"center",justify:"center"},{default:t(()=>[n(O,{class:"imglink-label"},{default:t(()=>[A(d(e(v)("status.Converted")),1)]),_:1}),n(O,{vertical:"",align:"center",justify:"center",size:0},{default:t(()=>[n(O,{justify:"center"},{default:t(()=>{var J;return[n(O,{wrap:!1,style:le((J=a.variousInfo)!=null&&J.shrinked?{color:"blue"}:{}),class:"img-size"},{default:t(()=>[g("span",_s,d(Z.value?S.value:"?"),1),C[12]||(C[12]=A(" Ã— ")),g("span",ws,d(Z.value?w.value:"?"),1)]),_:1},8,["style"])]}),_:1})]),_:1}),n(O,{justify:"center"},{default:t(()=>[A(d(Z.value?e(Qe)(a.size,0):"?"),1)]),_:1})]),_:1})],8,hs)]),_:1}),n(O,{ref:"fileNameContainer",justify:"center",align:"center",class:"pathbox",title:a.name},{default:t(()=>[n(re,{"x-scrollable":!0,trigger:"hover",style:{"text-align":"center","font-size":"smaller",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},{default:t(()=>[A(d(Z.value?a.name:"?"),1)]),_:1})]),_:1},8,["title"])]),_:1}),n(O,{vertical:""},{default:t(()=>[n(On,{ref:J=>{J!=null&&J.active&&(f.value=J)},src:$.value,width:142,"max-width":140,"max-height":100,loading:k.value,"file-name":a.name,"allow-next":u.value<a.length,"allow-prev":u.value>1,onLoad:me,onNext:C[6]||(C[6]=J=>P(1)),onPrev:C[7]||(C[7]=J=>P(-1))},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(O,{justify:"center",wrap:!0},{default:t(()=>[n(ye,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[g("a",{href:a.url,ref:"saveImg",target:"_blank",download:a.name},[n(e(Le),{disabled:!Z.value,round:"",size:"tiny"},{default:t(()=>[A(d(I.$t("save")),1)]),_:1},8,["disabled"])],8,ys)]),default:t(()=>[A(" "+d(I.$t("save")),1)]),_:1}),n(ye,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(e(Le),{disabled:!Z.value,onClick:C[8]||(C[8]=J=>N(a.url)),round:"",size:"tiny"},{default:t(()=>C[13]||(C[13]=[A("DataURL")])),_:1},8,["disabled"])]),default:t(()=>[A(" "+d(I.$t("convertedImageDataUrlTooltip")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1},8,["name"])]),_:1},512),n(e(Le),{onClick:C[9]||(C[9]=J=>P(1)),disabled:!e(q),block:"",class:pt({"thumb-arrow":!0,next:!0,pale:!e(q)}),title:I.$t("Next")},{icon:t(()=>[n(Q,{size:"30"},{default:t(()=>[n(e(Bo))]),_:1})]),_:1},8,["disabled","class","title"])]),_:1}),Be(n(O,{style:{width:"100%"},wrap:!1},{default:t(()=>[n(qe,{value:u.value,"onUpdate:value":C[10]||(C[10]=J=>u.value=J),tooltip:!1,step:1,min:1,max:a.length,keyboard:!1,class:"index-slider"},null,8,["value","max"]),n(O,{class:"index",align:"center",justify:"center",wrap:!1,size:3},{default:t(()=>[n(O,null,{default:t(()=>[A(d(e(v)("status.index"))+":",1)]),_:1}),n(O,{justify:"end",align:"center",class:"counter"},{default:t(()=>[A(d(u.value),1)]),_:1}),n(O,null,{default:t(()=>C[14]||(C[14]=[A("/")])),_:1}),n(O,{justify:"start",align:"center",class:"counter"},{default:t(()=>[A(d(a.length),1)]),_:1})]),_:1})]),_:1},512),[[Ze,!I.isSingle]])]),_:1},512)]),_:1},8,["style"])}}}),ks=We(bs,[["__scopeId","data-v-024b21e9"]]),xs={class:"status-table"},zs={class:"started"},Is={class:"mini-counter"},As={class:"failure"},Ts={class:"mini-counter"},Ss={colspan:"2"},Ls={class:"completed"},Cs={class:"main-counter"},$s={class:"total"},Es={class:"main-counter"},Fs=Te({__name:"status.center-column",props:{processing:{type:Boolean},interval:{},statusColor:{},success:{},successTo:{},successFrom:{},index:{},length:{},failure:{},retried:{},successPercTo:{},successPercFrom:{}},setup(l){const i=l,r=cn(),c=_(r.value.successColor),a=_(!1);return Ae(()=>i.processing,o=>{o||(i.success===i.length?a.value=!0:c.value=r.value.errorColor)}),(o,p)=>{const v=ft,f=be,h=qo,y=Ue,b=Gn;return E(),ee(b,{type:"multiple-circle","stroke-width":2,percentage:[o.successTo/o.length*100|0,o.index/o.length*100|0],color:[e(r).successColor,o.statusColor],"rail-style":[{stroke:e(c),opacity:.3}]},{default:t(()=>[n(y,{vertical:"",align:"center",justify:"center",size:0,style:{"font-family":"v-mono","white-space":"nowrap"},wrap:!1,"wrap-item":!1},{default:t(()=>[g("table",xs,[g("tbody",null,[g("tr",zs,[g("td",null,d(o.$t("status.started"))+":",1),g("td",Is,[n(v,{trigger:"hover",style:le({color:e(r).infoColor}),placement:"left"},{trigger:t(()=>[g("span",{style:le({color:e(r).infoColor})},d(o.index.toLocaleString("en-us")),5)]),default:t(()=>[A(" "+d(o.$t("status.progressStarted"))+" ("+d(o.index.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])])]),g("tr",As,[g("td",null,d(o.$t("status.failure"))+":",1),g("td",Ts,[n(v,{trigger:"hover",style:le({color:e(r).errorColor}),placement:"left"},{trigger:t(()=>[g("span",{style:le({color:e(r).errorColor})},d(o.failure.toLocaleString("en-us")),5)]),default:t(()=>[A(" "+d(o.$t("status.progressErrors"))+" ("+d(o.failure.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"]),o.retried>0?(E(),ee(v,{key:0,trigger:"hover",style:le({color:e(r).warningColor}),placement:"left"},{trigger:t(()=>[g("span",{style:le({color:e(r).warningColor})}," ("+d(o.retried.toLocaleString("en-us"))+") ",5)]),default:t(()=>[A(" "+d(o.$t("status.progressRetries"))+" ("+d(o.retried.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):ve("",!0)])]),g("tr",null,[g("td",Ss,[n(y,{size:0,align:"center",justify:"center",style:le({color:o.processing?o.statusColor:e(c)}),wrap:!1,class:"perc"},{default:t(()=>[e(a)?(E(),ee(f,{key:0,component:e(Wo)},null,8,["component"])):ve("",!0),n(h,{duration:o.interval*3|0,from:o.successPercFrom|0,to:o.successPercTo|0,active:!0},null,8,["duration","from","to"]),p[0]||(p[0]=A("% "))]),_:1},8,["style"])])]),g("tr",Ls,[g("td",null,d(o.$t("status.success"))+":",1),g("td",Cs,[n(v,{trigger:"hover",duration:0,delay:0,style:le({color:e(r).successColor}),placement:"bottom"},{trigger:t(()=>[g("span",{style:le({color:e(r).successColor})},[n(h,{duration:o.interval*3|0,from:o.successFrom,to:o.successTo,active:!0,"show-separator":!0},null,8,["duration","from","to"])],4)]),default:t(()=>[A(" "+d(o.$t("status.progressSuccess"))+" ("+d(o.successTo.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])])]),g("tr",$s,[g("td",null,d(o.$t("status.all"))+":",1),g("td",Es,[n(v,{trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:t(()=>[A(d(o.length.toLocaleString("en-us")),1)]),default:t(()=>[A(" "+d(o.$t("status.progressTotal"))+" ("+d(o.length.toLocaleString("en-us"))+") ",1)]),_:1})])])])])]),_:1})]),_:1},8,["percentage","color","rail-style"])}}}),Ps={key:0},Os={style:{}},Us={key:0,class:"log-table",ref:"table"},Ms={class:"log-tr label"},Rs=["title"],Ns={style:{"min-width":"7em"},class:"log-th"},js={style:{"padding-left":"2em"},class:"log-th"},Ds={ref:"tbody"},Bs=["onClick","onDblclick"],Zs={class:"log-td"},Vs={class:"log-td"},Hs={class:"log-td"},Ws={class:"log-td"},qs=["innerHTML"],Gs={style:{margin:"1px"}},Ks=["href","download","onClick"],Ys={key:0,style:{position:"relative"}},Qs=["href","download"],Xs=["href","download"],Js={key:0,style:{margin:"1px"}},ei=["href","download","onClick"],Un=3,ti=100,ni=Te({__name:"status",props:{processing:{type:Boolean},status:{},interval:{}},emits:["all-zips-clicked","demand-zip-errors","demand-image","delete-image"],setup(l,{expose:i,emit:r}){const c={itemMargin:"1px",titlePadding:"2px",titleFontSize:"0.8rem"},a=qt(),{t:o}=Je(),p=cn(),v={W:160,H:80},f=l,h=r;i({cleanup:xn});const y=_(!1),b=_([]),m=_(!1);dt("table");const u=dt("tbody"),S=_(null),w=_([]),$=_([]),F=_([0,0]),H=_([0,0]),k=_([0,0]),Z=_([0,0]),Y=_([0,0]),z=_([0,0]),T=_(0),q=_(0),se=_([0,0]),ce=_(p.value.infoColor),B=_("#000000"),Ne=_("#000000"),Ce=_(0),$e=_(0),L=_(""),V=_("00:00:00"),te=_(void 0),X=_(!1),ie=_(!0);_(!1);const de=_(80),me=_(200),he=xe(()=>P.value.includes("log")),_e=xe(()=>{let s=b.value;switch(Tt.value){case"success":s=s.filter(x=>x.completed);break;case"error":s=s.filter(x=>!x.completed);break}return s}),N=os(!1),P=_(["progress","log","output"]),pe=s=>P.value.includes(s),ae=s=>P.value.push(s),fe=s=>{const x=P.value.findIndex(M=>M===s);x>=0&&P.value.splice(x,1)},D=Wt({name:"",originalName:"",size:0,url:"",originalUrl:"",originalSize:0,dataUrl:"",index:0,various:{shrinked:!1}}),Me=dt("body"),ge=_(null),ze=_(null),oe=_(),Se=dt("imageViewer");He(()=>{Ae(f.status,()=>Ee(),{deep:!1}),Ae([ze,he],()=>{if(!ze.value||!he.value)return;const{width:j,height:U}=ua(ze.value,{width:v.W,height:v.H});ge.value.width=j,ge.value.height=U,ge.value.style.width=j+"px",ge.value.style.height=U+"px",ze.value instanceof HTMLImageElement?ge.value.getContext("2d").drawImage(ze.value,0,0,j,U):(ge.value.getContext("bitmaprenderer").transferFromImageBitmap(ze.value),ze.value.close(),ze.value=null,f.status.thumbnail=null)});let s=0;const x=()=>{if(s)return;const j=Date.now();V.value="00:00:00",s=window.setInterval(()=>{const U=(Date.now()-j)/1e3;V.value=`${String(U/3600|0).padStart(2,"0")}:${String(U/60%60|0).padStart(2,"0")}:${String(U%60|0).padStart(2,"0")}`},300)};x(),Ae(()=>f.processing,(j,U)=>{j?(x(),b.value.length=0,y.value=!1,m.value=!1,w.value=[],$.value=[]):(clearInterval(s),s=0),f.processing||At()}),C=Go(),re(),window.addEventListener("resize",re);const M=new ResizeObserver(re);M.observe(C.parent.parent.vnode.el),ct(()=>{clearInterval(s),clearTimeout(I),clearTimeout(Ge),clearTimeout(vt),window.removeEventListener("resize",re),M.disconnect()}),Rt(()=>clearInterval(s))});let I,C;const Q=_(document.documentElement.clientHeight),O=_(10),re=()=>{clearTimeout(I),I=setTimeout(()=>{const s=oe.value.$parent.$el.offsetHeight,x=window.innerHeight-C.parent.parent.vnode.el.offsetHeight-8,M=Math.max(100,s+x);Q.value=document.documentElement.clientHeight,O.value=M,!(!he.value||!X.value)&&(de.value=Math.max(M,me.value))},100)};ct(()=>{xn()}),Rt(()=>{clearTimeout(I),clearTimeout(Ge),clearTimeout(vt),clearTimeout(St)}),Ae([()=>f.status.zips.length,()=>f.status.failedZips.length],()=>{const s=f.status;{w.value.length>s.zips.length&&(w.value.length=0);let x=0;const M=s.zips.length===1&&s.zippedTotalCount===s.length;for(let j=w.value.length;j<s.zips.length;j++){const U=s.zips[j],ue=s.baseZipName+(M?"":"-"+String(j+1).padStart(2,"0"))+".zip";x+=U.size,w.value[j]={url:U.url,size:U.size,number:M?0:j+1,sizeByUnit:Qe(U.size),name:ue,count:U.count,clicked:!1}}}{$.value.length>s.failedZips.length&&($.value.length=0);let x=0;const M=s.failedZipDone&&s.failedZips.length===1;for(let j=$.value.length;j<s.failedZips.length;j++){const U=s.failedZips[j],ue=s.baseZipName+"-error"+(M?"":"-"+String(j+1).padStart(2,"0"))+".zip";x+=U.size,$.value[j]={url:U.url,size:U.size,number:M?0:j+1,sizeByUnit:Qe(U.size),name:ue,count:U.count,clicked:!1}}}});let ye=!1,qe=0;Ae(()=>D.index,async()=>{var j;const s=D.index;let x=_e.value.findIndex(U=>U.zippedIndex===s);x===-1&&(x=s);let M=!1;(mt.value>x||mt.value+Xt.value<x)&&((j=oe.value)==null||j.scrollTo({behavior:"instant",top:x*Ke}),await Fe(),st(!0),await Fe(),M=!0),Fe(()=>{var ue,Ie,nt;let U=S.value;qe>x&&(U=U.previousSibling||U,U instanceof HTMLElement||((ue=oe.value)==null||ue.scrollTo(0,0),U=null)),(Ie=U==null?void 0:U.scrollIntoView)==null||Ie.call(U,{behavior:"instant",block:M?qe>x?"start":"end":"nearest"}),ye||pe("preview")&&((nt=Se.value)==null||nt.$el.scrollIntoView({behavior:"smooth",block:"nearest"})),qe=x,ye=!1})});const tt=f.interval||100;let J=!1,Ge=0;function Ee(){if(J)return;if(Ge){J=!0;return}Ge=window.setTimeout(()=>{Ge=0,J&&(J=!1,Ee())},tt);const s=f.status;y.value=s.length>=2,H.value[1]=H.value[0],H.value[0]=s.startedCount,k.value[1]=k.value[0],k.value[0]=s.success,Z.value[1]=Z.value[0],Z.value[0]=s.failure,Y.value[1]=Y.value[0],Y.value[0]=s.done,z.value[1]=z.value[0],z.value[0]=s.converted,T.value=s.retried,q.value=s.length,se.value[1]=se.value[0],se.value[0]=s.zippedTotalCount,Ce.value=s.inputTotalSize,$e.value=s.outputTotalSize;const x=$e.value-Ce.value;L.value=(x>=0?"+ ":"")+Qe(x);const M=$e.value/Ce.value,j=(256|Math.min(255,Math.max(0,M-1.5)*255|0)).toString(16).substring(1);B.value="#"+j+"0000";const U=1024*1024,ue=(256|Math.min(255,Math.max(0,x/1024/U)*255|0)).toString(16).substring(1);if(Ne.value="#"+ue+"0000",F.value[1]=F.value[0],F.value[0]=k.value[0]/q.value*100,he.value||!f.processing){const Ie=s.logs;b.value.push(...Ie),Ie.length&&(ie.value&&Ct(),Fe(st))}s.logs.length=0,ze.value=s.thumbnail,f.processing&&(ce.value=Z.value[0]?p.value.errorColor:T.value?p.value.warningColor:p.value.infoColor),s.convertedImageUrl!==D.url&&(D.url=s.convertedImageUrl,D.name=s.convertedImageName,D.dataUrl=s.convertedImageDataUrl,D.size=s.convertedImageSize||s.outputTotalSize,D.originalSize=s.convertedImageOrgSize,D.originalName=s.convertedImageOrgName,D.index=s.convertedImageIndex,D.originalUrl=s.convertedImageOrgUrl,D.various={shrinked:s.convertedImageShrinked})}function At(){f.status,ce.value=f.status.success===f.status.length?p.value.successColor:p.value.errorColor,X.value||(fe("log"),X.value=!0),ae("preview")}async function Yt(s,x,M,j){var ue;if(!s)return;const U=f.status.ziplogs.findIndex(Ie=>Ie.fileId===M);U!==-1&&(pe("preview")||(ae("preview"),await Fe()),(ue=Se.value)==null||ue.changeIndex(U+1),await Fe(()=>{var Ie;try{(Ie=Se.value)==null||Ie.$el.scrollIntoView({behavior:"instant",block:"nearest"})}catch{}}))}function Qt(s){var $t,De;const x=b.value,M=x.findIndex(it=>it.zippedIndex===D.index);let j=0,U=1;switch(s.code){case"ArrowUp":j=-1;break;case"ArrowDown":j=1;break;case"PageUp":j=-1,U=de.value/Ke|0;break;case"PageDown":j=1,U=de.value/Ke|0;break;case"Enter":M>=0&&(($t=Se.value)!=null&&$t.isPreviewing()||(Fe(()=>{var it;return(it=Se.value)==null?void 0:it.openPreview()}),s.stopPropagation(),s.preventDefault()));break;default:return}let ue=M,Ie=-1;const nt=x.length;do{if(ue+=j,ue<0||ue>nt-1||ue===M)break;if(x[ue].completed){if(Ie=ue,--U>0)continue;break}}while(!0);Ie>=0&&((De=Se.value)==null||De.changeIndex(x[Ie].zippedIndex+1),s.preventDefault()),ye=!0}const _n=[{label:o("status.showAll"),value:""},{label:o("status.showOnlySuccess"),value:"success"},{label:o("status.showOnlyError"),value:"error"}],Tt=_(_n[0].value),wn=xe(()=>[{key:"open",label:o("status.openFailedList"),icon:()=>G(be,()=>G(Kn)),onSelect(){kn()}},{key:"download",label:o("status.saveFailedList"),icon:()=>G(be,()=>G(Ko)),onSelect(){kn(!0)}},{key:"zip",label:`${o("status.zipFailedList")}`+(f.status.failedZipDone?`(âœ”${o("status.done")})`:""),icon:()=>G(kt,{show:m.value&&!f.status.failedZipDone,size:"small"},()=>G(be,()=>G(sn))),disabled:m.value,onSelect(s){return m.value=!0,h("demand-zip-errors"),!1}}]);function gt(s,x=!1){const{url:M,name:j}=s;if(x){const U=document.createElement("a");U.href=M,U.download=j,U.click()}s.clicked||(s.clicked=!0,f.processing||w.value.every(U=>U.clicked)&&h("all-zips-clicked"))}async function zo(){if(y.value){if(w.value.length>=2&&!await new Promise((M,j)=>a.warning({title:o("Download"),content:o("status.confirmDownloadMessage",[w.value.length]),positiveText:"OK",negativeText:o("cancel"),onPositiveClick:()=>M(!0),onNegativeClick:()=>j()})))return;const s=w.value;for(const x of s)gt(x,!0)}else Se.value.download()}const yn=_({height:"0px"}),bn=_({height:"0px"}),mt=_(0),Xt=xe(()=>de.value/Ke+Un*2|0);let Ke=15,Jt=0,St=0,en=0;function st(s){const x=Date.now();if(s!==!0){if(St)return;if(x-en<30){St=window.setTimeout(()=>{St=0,st()},30-(x-en));return}}en=x,Jt||(Jt=u.value.rows[1].offsetHeight,Ke=Jt);const j=oe.value.scrollbarInstRef.containerRef.scrollTop,U=_e.value.length,ue=Math.max(0,(j/Ke|0)-Un);mt.value=ue,yn.value.height=ue*Ke+"px",bn.value.height=Math.max(0,U-(ue+Xt.value))*Ke+"px"}function Io(){var s;(s=oe.value)==null||s.scrollTo(0,0),st()}Ae(he,s=>{s&&st()});function kn(s=!1){const x=new Blob([f.status.unconvertedListText],{type:"text/plain;charset=utf8"}),M=URL.createObjectURL(x),j=document.createElement("a");j.href=M,j.target="_blank",s&&(j.download=f.status.baseZipName+"-error.txt"),j.click()}let vt=0,Lt=!1;function Ct(s=!1){if(!Lt){if(vt){Lt=!0;return}Fe(()=>{!s&&!ie.value||(oe.value.scrollTo({behavior:"instant",top:b.value.length*50}),vt=window.setTimeout(()=>{vt=0,Lt&&(Lt=!1,Ct())},ti))})}}const ht=_(!1);function xn(){ht.value=!0,URL.revokeObjectURL(D.url),URL.revokeObjectURL(D.originalName),D.originalUrl="",D.url="",D.index=0,f.status.logs.length=0,b.value.length=0,$.value.length=0,w.value.length=0,X.value=!1}return(s,x)=>{const M=Ue,j=Yo,U=Qn,ue=Kt,Ie=Xn,nt=ke,$t=Gt,De=ft,it=dn,zn=Gn,Et=Le,Ao=ds,In=pn,To=Qo,So=Yn;return E(),ee(M,{ref_key:"body",ref:Me,vertical:"",justify:"center"},{default:t(()=>[n(So,{"display-directive":"show","trigger-areas":["arrow","main"],"expanded-names":e(P),"onUpdate:expandedNames":x[14]||(x[14]=R=>je(P)?P.value=R:null),"theme-overrides":c,"_item-header-click":"preventOutputCollapsing"},{default:t(()=>[n(U,{name:"progress",style:{"white-space":"nowrap"}},{header:t(({collapsed:R})=>[n(M,null,{default:t(()=>[A(d(s.$t("status.Progress"))+" ",1),R?(E(),ne(Pe,{key:0},[A(" ("+d(e(F)[0]|0)+"%) ",1)],64)):ve("",!0)]),_:2},1024)]),default:t(()=>[n(M,{justify:"center",align:"center",wrap:!1,style:{"white-space":"nowrap","margin-top":"-2em"}},{default:t(()=>[n(M,{vertical:"",justify:"center",class:"left-column"},{default:t(()=>[n(j,{"tabular-nums":"",label:s.$t("status.elapsedTime")},{default:t(()=>[n(M,null,{default:t(()=>[A(d(e(V)),1)]),_:1})]),_:1},8,["label"]),n(j,{"tabular-nums":"",label:s.$t("status.multiThreading")},{default:t(()=>[n(M,{style:le({color:f.status.threads?"":"red",fontSize:"0.7rem"})},{default:t(()=>[A(d(f.status.threads?s.$rt("{n} @:threads",f.status.threads):s.$t("disabled")),1)]),_:1},8,["style"])]),_:1},8,["label"]),n(j,{"tabular-nums":"",label:s.$t("status.outputSettings")},{default:t(()=>[n(M,{vertical:"",justify:"end",style:{"font-size":"0.6rem","line-height":"0.6rem"}},{default:t(()=>[g("div",null,d(s.$t("settings.imageType"))+": "+d(f.status.type),1),s.status.shrink?(E(),ne("div",Ps,[A(d(s.$t("status.Shrinking"))+": ",1),g("span",Os,d(s.status.shrink[0])+"Ã—"+d(s.status.shrink[1]),1)])):ve("",!0),g("div",null,"Zip: "+d(f.status.zipSize)+"MB",1)]),_:1})]),_:1},8,["label"])]),_:1}),e(ht)?ve("",!0):(E(),ee(Fs,{key:0,index:e(H)[0],success:e(k)[0],length:s.status.length,"success-to":e(k)[0],"success-from":e(k)[1],failure:e(Z)[0],"success-perc-to":e(F)[0],"success-perc-from":e(F)[1],retried:e(T),processing:s.processing,interval:e(tt),"status-color":e(ce),class:"center-column"},null,8,["index","success","length","success-to","success-from","failure","success-perc-to","success-perc-from","retried","processing","interval","status-color"])),n(M,{vertical:"",style:{height:"100%"},justify:"center"},{default:t(()=>[n(j,{"tabular-nums":"",label:s.$t("status.inputSize")},{default:t(()=>[n(M,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[A(d((e(Ce)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(j,{"tabular-nums":"",label:s.$t("status.outputSize")},{default:t(()=>[n(M,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[A(d((e($e)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(j,{"tabular-nums":"",label:s.$t("status.outInRate")},{default:t(()=>[n(M,{vertical:"",align:"end",justify:"start",style:{"font-size":"smaller","font-family":"v-mono","line-height":"50%"}},{default:t(()=>[g("span",{style:le({color:e(B),fontSize:"larger"})},"Ã— "+d((e($e)/e(Ce)||1).toFixed(2)),5),g("span",{style:le({color:e(Ne)})},"("+d(e(L))+")",5)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),n(U,{name:"log",style:{"white-space":"nowrap"}},{header:t(()=>[n(M,{align:"center",wrap:!1},{default:t(()=>[A(d(s.$t("status.Log")),1),Be(n(e(kt),{size:16},null,512),[[Ze,s.processing&&!e(he)]])]),_:1})]),"header-extra":t(()=>[Be(n(M,{align:"center",justify:"end",wrap:!0,style:{"margin-top":"0.2em","margin-left":"0.5em"}},{default:t(()=>[n(ue,{value:e(Tt),"onUpdate:value":[x[0]||(x[0]=R=>je(Tt)?Tt.value=R:null),x[1]||(x[1]=R=>Io())],options:_n,placeholder:s.$t("status.filterLogSelect"),size:"tiny",style:{width:"auto","font-size":"smaller"},"consistent-menu-width":!1,"show-on-focus":!1},null,8,["value","placeholder"]),n(Ie,{key:"b",checked:e(ie),"onUpdate:checked":[x[2]||(x[2]=R=>je(ie)?ie.value=R:null),x[3]||(x[3]=R=>R&&Ct(!0))],size:"small",style:{"font-size":"smaller"}},{default:t(()=>[A(d(s.$t("status.autoScroll")),1)]),_:1},8,["checked"]),n(De,{trigger:"hover",show:e(N),disabled:!e(X),placement:"top",delay:0},{trigger:t(()=>[n(nt,{style:{"max-width":"30em"},disabled:!0},{trigger:t(()=>[n(Ie,{size:"small",checked:e(X),"onUpdate:checked":[x[4]||(x[4]=R=>je(X)?X.value=R:null),x[5]||(x[5]=R=>{R&&(Ct(!0),re(),N.value=!0)})],style:{"font-size":"smaller"}},{default:t(()=>[A(d(s.$t("status.expandLog")),1)]),_:1},8,["checked"])]),default:t(()=>[A(d(s.$t("status.expandLog")),1)]),_:1})]),default:t(()=>[n(M,{wrap:!1,align:"center",style:{"font-size":"0.8rem"}},{default:t(()=>[n($t,{value:e(me),"onUpdate:value":x[6]||(x[6]=R=>je(me)?me.value=R:null),onUpdateValue:re,disabled:!e(X),"format-tooltip":R=>`Log size: ${R}`,tooltip:!0,step:1,min:e(O),max:e(Q),style:{"z-index":"3",width:"100px"}},null,8,["value","disabled","format-tooltip","min","max"])]),_:1})]),_:1},8,["show","disabled"])]),_:1},512),[[Ze,e(he)]])]),default:t(()=>[n(M,{wrap:!1,align:"stretch",class:pt({"log-container":1,"expand-log":e(X)}),style:le(e(X)?{maxHeight:e(de)+"px"}:{height:"110px"}),onKeydown:Qt,tabindex:"-1"},{default:t(()=>[n(e(qn),{ref_key:"scrollref",ref:oe,distance:10,"x-scrollable":!0,onMousedownCapture:x[7]||(x[7]=R=>ie.value=!1),onWheel:x[8]||(x[8]=R=>ie.value=!1),onScroll:st,load:"handleLogLoad",trigger:"none",style:le([{"z-index":"2","padding-right":"10px",height:"100%"},e(X)?{height:e(de)+"px"}:{}]),size:50},{default:t(()=>[e(he)?(E(),ne("table",Us,[g("thead",null,[g("tr",Ms,[g("th",{class:"log-th",title:s.$t("status.table.core")},"th",8,Rs),x[15]||(x[15]=g("th",{class:"log-th"},"no.",-1)),g("th",Ns,d(s.$t("status.table.status")),1),g("th",js,d(s.$t("status.table.details")),1)])]),g("tbody",Ds,[g("tr",{style:le(e(yn))},null,4),(E(!0),ne(Pe,null,bt(e(_e).slice(e(mt),e(mt)+e(Xt)),({index:R,key:rt,command:Ye,path:Ft,core:An,zippedIndex:Pt,completed:Tn,fileId:Lo},cr)=>(E(),ne("tr",{key:rt,class:pt({"log-tr":1,completed:Tn,selected:e(D).index===Pt}),ref_for:!0,ref:Sn=>{e(D).index===Pt&&(S.value=Sn)},onClick:Sn=>Yt(Tn,Ft,Lo,Pt),onDblclick:()=>{e(D).index===Pt&&e(Se).openPreview()}},[g("td",Zs,d(An>=0?An+1:"-"),1),g("td",Vs,d(R+1),1),g("td",Hs,d(Ye),1),g("td",Ws,d(Ft),1)],42,Bs))),128)),g("tr",{style:le(e(bn))},null,4)],512)],512)):ve("",!0),x[16]||(x[16]=g("div",{style:{height:"1em"}},null,-1))]),_:1},8,["style"]),n(M,{style:le([{"align-self":"center",position:"absolute","z-index":"0","margin-top":"10px",right:"0.1em","line-height":"0px"},{width:v.W+"px",height:v.H+"px"}]),justify:"center",align:"center"},{default:t(()=>[n(e(kt),{size:"small",show:s.processing},{default:t(()=>[f.status.thumbnail===void 0?(E(),ee(it,{key:0,description:"EMPTY"})):ve("",!0),Be(g("canvas",{ref_key:"thumbcanvas",ref:ge,width:"106",height:"80",style:le({border:"1px solid gray",filter:s.processing?"":"opacity(0.35)"})},null,4),[[Ze,f.status.thumbnail!==void 0]])]),_:1},8,["show"])]),_:1},8,["style"])]),_:1},8,["class","style"])]),_:1}),n(U,{title:s.$t("status.PreviewImage"),name:"preview",style:{"white-space":"nowrap"},disabled:!(e(k)[0]>0)},{default:t(()=>[n(M,{justify:"center",align:"center",vertical:""},{default:t(()=>[n(ks,{"_v-else-if":"imageViewerStarted && status.success > 0 /*&& (props.status.threads || !zippingFlag)*/ && !cleaningUp",ref_key:"imageViewer",ref:Se,url:e(D).url,size:e(D).size,"original-url":e(D).originalUrl,"original-size":e(D).originalSize,name:e(D).name,originalName:e(D).originalName,length:e(k)[0],index:e(D).index,"various-info":e(D).various,"is-single":!e(y),onDemandImage:x[9]||(x[9]=R=>h("demand-image",R)),on_deleteImage:x[10]||(x[10]=R=>h("delete-image",R)),_close:"imageViewerStarted=false"},null,8,["url","size","original-url","original-size","name","originalName","length","index","various-info","is-single"])]),_:1})]),_:1},8,["title","disabled"]),n(U,{name:"output",style:{"white-space":"nowrap"},disabled:""},{header:t(()=>[g("span",{style:{color:"black"},innerHTML:s.$t("status.Output")},null,8,qs)]),default:t(()=>[n(M,{wrap:!1,vertical:"",style:{"margin-top":"-1.3em"}},{default:t(()=>[e(ht)?ve("",!0):(E(),ee(M,{key:0,justify:"center"},{default:t(()=>[Be(n(M,{vertical:"",align:"center"},{default:t(()=>[n(De,{placement:"left"},{trigger:t(()=>[n(zn,{type:"line","indicator-placement":"inside",color:"lime","rail-color":"rgba(99, 255, 99, 0.5)","indicator-text-color":e(se)[0]===e(q)?"white":"green",processing:s.processing,percentage:e(se)[0]/e(q)*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[g("span",Gs,d(e(se)[0]/e(q)*100|0)+"% "+d(s.$t("status.zipped"))+" ("+d(e(se)[0])+"/"+d(e(z)[0])+")",1)]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[A(" "+d(s.$t("status.zippingProgress"))+" ("+d(e(se)[0]/e(q)*100|0)+"%) ",1)]),_:1}),n(ot,{name:"zipcontainer"},{default:t(()=>[e(w).length>=1||f.processing?(E(),ee(En,{key:0,name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(E(!0),ne(Pe,null,bt(e(w),(R,rt)=>(E(),ne("span",{key:rt},[n(De,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[g("a",{href:R.url,download:R.name,class:"in-button-anchor",onClick:Ye=>gt(R)},[n(Et,{class:"zip-button",size:"tiny",color:R.clicked?"#050":"lime","text-color":R.clicked?"gray":"white",onClick:at(Ye=>gt(R),["stop"]),round:""},{default:t(()=>[n(e(be),{size:"tiny"},{default:t(()=>[n(e(sn))]),_:1}),A("ZIP"+d(R.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Ks)]),default:t(()=>[g("div",{style:le({color:e(p).successColor})},[g("div",null,"ZIP "+d(R.number||"")+" ("+d(s.$t("success"))+")",1),g("div",null,d(R.name),1),g("div",null,d(R.sizeByUnit),1),g("div",null,d(s.$rt("{n} @:files",R.count)),1)],4)]),_:2},1024)]))),128))]),_:1})):ve("",!0)]),_:1})]),_:1},512),[[Ze,e(y)]])]),_:1})),n(ot,null,{default:t(()=>[e(ht)?ve("",!0):Be((E(),ee(M,{key:0,justify:"center",align:"center"},{default:t(()=>[n(De,{trigger:"hover",duration:0,delay:0,placement:"left",style:le({color:"white",backgroundColor:e(p).successColor}),"arrow-style":{backgroundColor:e(p).successColor}},{trigger:t(()=>[n(ot,{name:"save"},{default:t(()=>[e(k)[0]>0?(E(),ne("span",Ys,[n(In,{value:e(y)?e(se)[0].toLocaleString("en-us"):f.status.type.replace(/\(.+\)/,""),color:e(p).successColorHover,offset:[-20,-3]},{default:t(()=>[n(Et,{size:"medium",onClick:zo,color:e(p).successColor,round:""},{default:t(()=>[e(y)?(E(),ne(Pe,{key:0},[e(w).length?(E(),ne("a",{key:0,href:e(w)[0].url,download:e(w)[0].name,class:"in-button-anchor",onClick:x[11]||(x[11]=at(()=>{},["prevent"]))},[n(Ao),A(" Ã— "+d(e(w).length)+" "+d(s.$t("status.saveAll")),1)],8,Qs)):ve("",!0)],64)):(E(),ne("a",{key:1,href:e(D).url,download:e(D).name,class:"in-button-anchor",onClick:x[12]||(x[12]=at(()=>{},["prevent"]))},[n(e(be),{size:"tiny"},{default:t(()=>[n(e(Jn))]),_:1}),A(" "+d(s.$t("save")),1)],8,Xs))]),_:1},8,["color"])]),_:1},8,["value","color"])])):ve("",!0)]),_:1})]),default:t(()=>[s.status.length>=2?(E(),ne(Pe,{key:0},[g("div",null,d(e(o)("success"))+": "+d(e(se)[0].toLocaleString()),1),g("div",null,d(e(o)("status.totalSize"))+": "+d(e(Qe)(s.status.zippedTotalSize)),1),g("div",null,"ZIP Ã— "+d(e(w).length),1),g("div",null,d(e(o)("status.saveAllZipsTooltip")),1)],64)):(E(),ne(Pe,{key:1},[A(d(s.$t("status.downloadConvertedImage",e(w).length)),1)],64))]),_:1},8,["style","arrow-style"]),n(To,{"_v-if":"!processing && !(status.success === length)",options:e(wn),onSelect:x[13]||(x[13]=(R,rt)=>{var Ye;return(Ye=e(wn).find(({key:Ft})=>R===Ft))==null?void 0:Ye.onSelect()}),"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start"},{default:t(()=>[n(De,{show:e(te),duration:0,delay:0,placement:"right",style:le({color:"white",backgroundColor:e(p).errorColor}),"arrow-style":{backgroundColor:e(p).errorColor}},{trigger:t(()=>[n(In,{value:s.status.unconvertedFileCount.toLocaleString(),color:e(p).errorColorHover,offset:[-0,-3]},{default:t(()=>[n(Et,{size:"small",color:e(p).errorColor},{default:t(()=>[n(e(be),{size:"medium",style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Xo))]),_:1})]),_:1},8,["color"])]),_:1},8,["value","color"])]),default:t(()=>[g("div",null,[g("div",null,d(e(o)("failed"))+": "+d(s.status.unconvertedFileCount.toLocaleString()),1),g("div",null,d(e(o)("status.totalSize"))+": "+d(e(Qe)(s.status.unconvertedTotalSize)),1)])]),_:1},8,["show","style","arrow-style"])]),_:1},8,["options"])]),_:1},512)),[[Ze,!f.processing]])]),_:1}),n(ot,{name:"zipcontainer"},{default:t(()=>[e(ht)?ve("",!0):Be((E(),ee(M,{key:0,vertical:"",align:"center"},{default:t(()=>[n(De,{placement:"left"},{trigger:t(()=>[n(zn,{type:"line","indicator-placement":"inside",color:"red","rail-color":"rgba(255, 0, 0, 0.5)","indicator-text-color":s.status.failedFileZippedCount===s.status.unconvertedFileCount?"white":"#500",processing:e(m)&&!s.status.failedZipDone&&!s.status.failedToCreateFailedZip,percentage:s.status.failedFileZippedCount/s.status.unconvertedFileCount*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[s.status.failedToCreateFailedZip?(E(),ne("div",{key:1,style:le({color:e(p).errorColor})},d(s.$t("status.failureZippingFailedFiles")),5)):(E(),ne("span",Js,d(s.status.failedFileZippedCount/s.status.unconvertedFileCount*100|0)+"% "+d(s.$t("status.zipped"))+" ("+d(s.status.failedFileZippedCount)+"/"+d(s.status.unconvertedFileCount)+")",1))]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[A(" "+d(s.$t("status.zippingProgress"))+" ("+d(s.status.failedFileZippedCount/s.status.unconvertedFileCount*100|0)+"%) ",1)]),_:1}),n(En,{name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(E(!0),ne(Pe,null,bt(e($),(R,rt)=>(E(),ne("span",{key:rt},[n(De,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[g("a",{href:R.url,download:R.name,class:"in-button-anchor",onClick:Ye=>gt(R)},[n(Et,{class:"zip-button",size:"tiny",color:R.clicked?"#551122":"#F00","text-color":R.clicked?"gray":"white",onClick:at(Ye=>gt(R),["stop"]),round:""},{default:t(()=>[n(e(be),{size:"tiny"},{default:t(()=>[n(e(Jo))]),_:1}),A("ZIP"+d(R.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,ei)]),default:t(()=>[g("div",{style:le({color:e(p).errorColor})},[g("div",null,"ZIP "+d(R.number||"")+" ("+d(s.$t("failed"))+")",1),g("div",null,d(R.name),1),g("div",null,d(R.sizeByUnit),1),g("div",null,d(s.$rt("{n} @:files",R.count)),1)],4)]),_:2},1024)]))),128))]),_:1})]),_:1},512)),[[Ze,e(m)]])]),_:1})]),_:1})]),_:1})]),_:1},8,["expanded-names"])]),_:1},512)}}}),ai=We(ni,[["__scopeId","data-v-465a2730"]]),oi=["innerHTML"],li=Te({__name:"converter",props:Nt({input:{},format:{},quality:{},retainExtension:{type:Boolean},maxZipSizeMB:{},threads:{}},{showNote:{type:Boolean},showNoteModifiers:{}}),emits:Nt(["start","end"],["update:showNote"]),setup(l,{emit:i}){lt(et);const{t:r}=Je(),c=qt(),a=el(),o=10,p=navigator.hardwareConcurrency,v=typeof OffscreenCanvas=="function",f=100,h=l,y=Re(l,"showNote"),b=i,m=_(!1),u=_(!1),S=_(!1),w=_(!1),$=_(!1),F=_("initializing"),H=_("info"),k=Wt(te()),Z=dt("stat"),Y=_(0);let z=!1,T=()=>{},q,se=0,ce=!1;Ae(()=>h.input,N=>{N!=null&&N.length&&ie(N)}),Ae(w,N=>{document.body.style.overflowY=N?"hidden":"auto"}),He(async()=>{await he(),_e()});async function B(){let N=!0;if(se>o*1e3&&!ce&&k.success>0&&(N=!1,await new Promise(P=>{c.warning({title:r("confirmCloseDialogTitle"),autoFocus:!0,maskClosable:!1,positiveText:r("close"),negativeText:r("back"),onPositiveClick:()=>N=!0,onAfterLeave:P,content:r("confirmCloseDialog")})})),!N)return!1;a.destroyAll(),w.value=!1,y.value=!1}function Ne(N){q==null||q(N)}function Ce(N){an==null||an(N)}function $e(){!u.value&&m.value?u.value=!0:B()}function L(){ie(h.input)}let V=_(()=>{});function te(N){const P={logs:[],ziplogs:[],startedCount:0,converted:0,success:0,failure:0,retried:0,done:0,length:0,zippedTotalCount:0,zippingErrorCount:0,zippedTotalSize:0,processing:!1,zips:[],inputTotalSize:0,outputTotalSize:0,thumbnail:null,baseZipName:"testzipname",type:"image/any",startedTime:Date.now(),convertedImageDataUrl:"",convertedImageName:"",convertedImageUrl:"",convertedImageOrgUrl:"",convertedImageIndex:-1,convertedImageShrinked:!1,zipSize:h.maxZipSizeMB,shrink:W.multithread&&W.shrinkImage?[W.maxWidth,W.maxHeight]:void 0,unconvertedListText:"",failedZipDone:!1,failedZips:[],unconvertedFileCount:0,unconvertedTotalSize:0,failedFileZippedCount:0,failedToCreateFailedZip:!1};return Object.assign(N||{},P)}function X(){$.value=!1,URL.revokeObjectURL(k.convertedImageUrl),URL.revokeObjectURL(k.convertedImageOrgUrl);for(const N of k.zips)URL.revokeObjectURL(N.url);k.zips.length=0;for(const N of k.failedZips)URL.revokeObjectURL(N.url);k.failedZips.length=0,te(k),T(),T=()=>{},q=null,ce=!1,S.value=!1,u.value=!1}async function ie(N){if(m.value){c.error({title:"Busy",positiveText:"OK",content:r("interfered")});return}w.value&&(Y.value^=1);let P=N.concat();te(k),X(),w.value=!0,$.value=!0,m.value=!0,k.processing=!0,H.value="info",F.value=r("processing");const pe=new Set,ae=h.format,fe=h.quality,D=[...ae.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),Me=me(ae,fe,P[0].webkitRelativePath);k.length=P.length,k.baseZipName=Me,k.type=ae.replace(/image\//,"").toUpperCase()+(/jpe?g|webp/i.test(ae)?" ("+fe+")":""),k.threads=z?0:h.threads;const ge=Date.now();b("start");let ze,oe,Se;if(!z&&h.threads>=2?(q=ts,Se=await Wl({files:P,completedFileIdSet:pe,ConvStats:k,canceled:u,props:h,imageType:ae,quality:fe,outputExt:D,format:ae,message:a})):(q=ss,Se=await ls(P,pe,h,u,k)),{exception:oe,callbackToGenerateFailedZips:ze,callbackToClearConverter:T}=Se,oe){let I;switch(oe.message){case"worker-load-error":I=r("errMsgWorkerLoadError");break;default:I="unexpected error"}c.error({title:"Error",autoFocus:!0,maskClosable:!1,closable:!1,content:()=>G("div",[G("p",I),G(Le,{onClick(){location.reload()}},r("Reload"))])})}if(k.length,k.success===k.length?(H.value="success",F.value=r("completed")):(H.value="error",F.value=u.value?r("aborted"):r("incomplete")),pe.size!==P.length){const I=de(N,pe);V.value=()=>{!I||!I.length||ze(I)}}m.value=!1,k.processing=!1,S.value=!0,P.length=0,se=Date.now()-ge,b("end")}function de(N,P){const pe=[],ae=[];let fe=0;for(const D of N)P.has(D._id)||(pe.push(D),ae.push(D.webkitRelativePath||D.relativePath||D.name),fe+=D.size);return ae.length&&(k.unconvertedListText=ae.join(`
`),k.unconvertedFileCount=pe.length,k.unconvertedTotalSize=fe),pe}function me(N,P,pe){var ge;const ae=new Date;N=N.replace(/^image\//,"").toLowerCase();const fe=W.useFolderNameForZip&&((ge=String(pe).match(/^\/?([^/]+)\//))==null?void 0:ge[1])||"avif2jpg",D=`
    ${ae.getFullYear().toString().substring(2)}
    ${String((ae.getMonth()+1)*100+ae.getDate()).padStart(4,"0")}
    ${String(ae.getHours()*1e4+ae.getMinutes()*100+ae.getSeconds()).padStart(6,"0")}
    -
    ${N+(/jpe?g|webp/i.test(N)?P:"")}
  `.replace(/\s/g,"");return`${fe}-${D}`.replace(/\s+/g," ")}async function he(){const N="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",P=document.createElement("img"),pe=da(P).then(()=>!0,()=>!1);P.src=N,await pe||c.warning({title:"Unsupported",positiveText:"OK",maskClosable:!1,content:r("avifUnsupported")})}function _e(){(!v||p<2||!Promise.any)&&(z=!0),z&&(Oe.value=0)}return(N,P)=>{var ze;const pe=be,ae=pn,fe=ke,D=Ue,Me=kt,ge=un;return E(),ne(Pe,null,[!e(m)&&((ze=h.input)!=null&&ze.length)?(E(),ee(D,{key:0,justify:"center",align:"center",style:{"margin-top":"0.4em"}},{default:t(()=>[n(fe,{trigger:"hover",placement:"top","keep-alive-on-hover":!1,duration:0,delay:50},{trigger:t(()=>{var oe;return[n(ae,{value:((oe=N.input)==null?void 0:oe.length)||0,offset:[-12,-5],color:"#99999966"},{default:t(()=>[n(e(Le),{onClick:L,round:"",size:"medium"},{icon:t(()=>[n(pe,{size:"1.2em",color:"#CCCCCC"},{default:t(()=>[n(e(tl))]),_:1})]),default:t(()=>[A(" "+d(e(r)("convertAgain")),1)]),_:1})]),_:1},8,["value"])]}),default:t(()=>{var oe;return[g("div",{innerHTML:e(r)("reconvertTip",(oe=h.input)==null?void 0:oe.length)},null,8,oi)]}),_:1})]),_:1})):ve("",!0),n(ge,{ref:"processingModal","display-directive":"show",show:e(w),"onUpdate:show":P[2]||(P[2]=oe=>je(w)?w.value=oe:null),closable:e(S),"close-on-esc":!1,preset:"dialog",onClick:P[3]||(P[3]=oe=>{e(a).destroyAll()}),onMaskClick:P[4]||(P[4]=oe=>{e(a).destroyAll()}),onClose:B,onEsc:$e,title:e(F),type:e(H),"mask-closable":!1,onAfterLeave:X,onBeforeLeave:P[5]||(P[5]=oe=>{e(Z).cleanup()}),class:"processing-dialog"},{default:t(()=>[n(D,{vertical:"",style:{"flex-grow":"1"}},{default:t(()=>[e($)?(E(),ee(ai,{ref_key:"stat",ref:Z,key:e(Y),processing:e(m),status:e(k),interval:f,onAllZipsClicked:P[0]||(P[0]=oe=>je(ce)?ce.value=!0:ce=!0),onDemandZipErrors:e(V),onDemandImage:Ne,onDeleteImage:Ce},null,8,["processing","status","onDemandZipErrors"])):ve("",!0),n(D,{justify:"end",align:"center",wrap:!1},{default:t(()=>[e(m)?(E(),ee(e(Le),{key:0,disabled:e(u),ref:"cancelbutton",round:"",size:"large",onClick:P[1]||(P[1]=oe=>u.value=!0)},{default:t(()=>[n(Me,{show:e(u)&&!e(S),size:"small"},{default:t(()=>[A(d(e(r)("cancel")),1)]),_:1},8,["show"])]),_:1},8,["disabled"])):e(S)?(E(),ee(e(Le),{key:1,onClick:B,round:"",size:"large",style:{"font-size":"small","margin-top":"1em"}},{default:t(()=>[A(d(e(r)("close")),1)]),_:1})):ve("",!0)]),_:1})]),_:1})]),_:1},8,["show","closable","title","type"])],64)}}}),si="/avif2jpeg/dist/avif.png",ii={class:"container-1"},ri={style:{position:"relative"}},ui={style:{position:"absolute","font-size":"0.5em",right:"-3.5em",bottom:"-1.5em","white-space":"nowrap"}},di={style:{color:"#666666"}},ci=["innerHTML"],pi={style:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","font-size":"xx-small","white-space":"nowrap"}},fi=Te({__name:"droptarget",props:{forbidden:{type:Boolean},dropTarget:{}},emits:["drop"],setup(l,{emit:i}){lt(et);const r=l,c=i,a=nl(),o=_(!1),p=_(0),v=_("");He(()=>{f(r.dropTarget||document)});function f(y){document.ondragstart=b=>b.preventDefault(),document.ondragover=b=>b.preventDefault(),y.ondrop=async b=>{var u;if(b.preventDefault(),o.value||r.forbidden)return;o.value=!0,p.value=0,v.value="";let m;try{const S=[...b.dataTransfer.items].map(w=>w.webkitGetAsEntry());a.start(),m=await h(S),a.finish()}catch{m=[...((u=b.dataTransfer)==null?void 0:u.files)??[]],a.error()}o.value&&(o.value=!1,c("drop",m))}}async function h(y,b){b=b||[];for(const m of y)if(m.isFile){const u=await new Promise(S=>m.file(w=>S(w)));Object.defineProperty(u,"webkitRelativePath",{value:m.fullPath}),b.push(u),p.value++}else if(m.isDirectory){v.value=m.fullPath;const u=m.createReader();do{const S=await new Promise(w=>u.readEntries($=>w($)));if(!S.length)break;await h(S,b)}while(!0)}return b}return(y,b)=>{const m=be,u=ft,S=Ue,w=ke,$=un;return E(),ne("div",ii,[n(w,{to:!1,"display-directive":"show",trigger:"hover",duration:0,delay:0,placement:"bottom-end"},{trigger:t(()=>[n(S,{vertical:"",class:"container-2"},{default:t(()=>[n(S,{align:"center",wrap:!1,class:"container-3"},{default:t(()=>[n(S,{vertical:"",align:"center",wrap:!1,style:{"font-weight":"bold","font-size":"1em","line-height":"90%","white-space":"nowrap"}},{default:t(()=>[b[5]||(b[5]=g("span",null,"Drag & Drop",-1)),g("span",ri,[b[4]||(b[4]=A(" AVIF Images ")),g("span",ui,[b[3]||(b[3]=A(" or ")),n(u,{placement:"bottom-end"},{trigger:t(()=>[g("span",di,[n(m,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(fn))]),_:1}),b[1]||(b[1]=A(" Folders "))])]),default:t(()=>[b[2]||(b[2]=A(" You can drag and drop your local folders "))]),_:1})])])]),_:1}),n(S,null,{default:t(()=>b[6]||(b[6]=[g("img",{src:si,class:"avif"},null,-1)])),_:1})]),_:1})]),_:1})]),default:t(()=>[g("h3",{innerHTML:y.$t("droptarget"),style:{"max-width":"200px","text-align":"center","word-break":"keep-all","overflow-wrap":"break-word"}},null,8,ci)]),_:1}),n($,{show:e(o),"onUpdate:show":b[0]||(b[0]=F=>je(o)?o.value=F:null),closable:!0,preset:"dialog",title:"Parsing dropped items.",type:"info","mask-closable":!1,"negative-text":y.$t("cancel")},{default:t(()=>[n(S,{vertical:"",align:"center"},{default:t(()=>[g("div",pi,d(e(v)),1),g("div",null,"found "+d(e(p))+" files",1)]),_:1})]),_:1},8,["show","negative-text"])])}}}),gi=We(fi,[["__scopeId","data-v-963c44a5"]]),mi={class:"container-1"},vi={class:"container-2"},hi=["innerHTML"],_i=["innerHTML"],wi={style:{"white-space":"nowrap"}},yi={style:{"padding-left":"1em"}},bi=["innerHTML"],ki=["accept"],xi=Te({__name:"file-selector",props:Nt({target:{},userExtensions:{},forbidden:{type:Boolean}},{expanded:{type:Boolean,required:!1},expandedModifiers:{},disableNotifyingFolderSelect:{type:Boolean},disableNotifyingFolderSelectModifiers:{}}),emits:Nt(["input","click","cancel","on-change-accept","update:target","update:userExtensions"],["update:expanded","update:disableNotifyingFolderSelect"]),setup(l,{emit:i}){const r=qt(),{t:c}=Je(),a=lt(et),o=["avif_only","all_images","all_files","edit_type"],p=[];for(const L of o)p.push({label:()=>c("fileTypeRadioOptions."+L),value:L});const v=({node:L,option:V})=>G(ke,{placement:"right"},{trigger:()=>L,default:()=>ce(V.value).replace(/,/g,", ")}),f=l,h=i,y=_(0),b=_(!1),m=_(!1),u=xe(()=>ce($.value)),S=xe(()=>F.value.split(",").every(V=>/^\s*(\.[\w\-]+)*\s*$/.test(V))?"success":"error"),w=xe(()=>!f.forbidden&&!m.value);Re(l,"expanded");const $=xe({get:()=>o.indexOf(f.target)>=0?f.target:o[0],set:L=>{h("update:target",L)}}),F=xe({get:()=>f.userExtensions,set:L=>{h("update:userExtensions",L)}}),H=Re(l,"disableNotifyingFolderSelect"),k=_(null),Z=_(null),Y=_(se());Ae($,L=>{h("on-change-accept",u.value)}),He(()=>{});async function z(L){if(h("click"),L===Z.value&&!H.value){let V=!1;if(await new Promise(te=>{r.info({title:c("loadfolderNotifyingTitle"),positiveText:c("Continue"),negativeText:c("Cancel"),onAfterLeave:()=>te(V),onPositiveClick:()=>V=!0,content:()=>G("div",[G("p",{},c("loadfolderNotifyingMessageTerm1")),G("div",[G(Wn,{width:250,style:{border:"3px solid gray"},src:"/avif2jpeg/dist//notification-folder.png"})]),G("p",{},c("loadfolderNotifyingMessageTerm2")),G("p",[G(Xn,{onUpdateChecked:X=>H.value=X,checked:H.value},()=>c("checkboxTextDontShowThis"))])])})}),!V){H.value=!1,h("cancel");return}}L.click()}function T(){h("cancel")}function q(L){const te=[...L.target.files];k.value.value="",Z.value.value="",Ne(te)}function se(){return"webkitdirectory"in document.createElement("input")}function ce(L){switch(L){case"avif_only":return".avif, .webp";case"all_images":return".jpg, .jpeg, .jfif, .pjpeg, .pjp, .gif, .png, .webp, .avif, .bmp, .apng, .ico";case"edit_type":return F.value;case"all_files":default:return".*"}}async function B(L){const V=String(u.value).toLowerCase().replace(/\s+/g,"");if(V&&u.value!==".*"){const te=V.split(",");L=L.filter(X=>te.includes(X.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),L.length||(await new Promise(X=>{r.error({title:"Images Not Found",positiveText:"OK",onAfterLeave:X,content:()=>G("div",[G(dn,{description:"NO IMAGES"}),`${c("noimage")}`,G("br"),u.value])})}),T())}return L}async function Ne(L){m.value=!0,L=await B(L),y.value=L.length,L.length>0&&h("input",$e(L)),m.value=!1}let Ce=0;function $e(L){const V=[];for(const te of L)te.hasOwnProperty("_id")||Object.defineProperty(te,"_id",{value:Ce++}),V.push(te);return V}return(L,V)=>{const te=be,X=Le,ie=Ue,de=Kt,me=ol,he=al,_e=ft;return E(),ne(Pe,null,[g("div",mi,[g("div",vi,[n(ie,{vertical:"",align:"center",justify:"center",inline:"",size:"large"},{default:t(()=>[n(ie,{align:"center",justify:"space-around",class:"main-buttons"},{default:t(()=>[n(ie,{vertical:"",align:"stretch",justify:"center"},{default:t(()=>[n(e(ke),{to:!1,"display-directive":"show",show:e(a).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(a).LANDSCAPE.value?"right":"top",duration:0,delay:0,"z-index":10},{trigger:t(()=>[n(X,{disabled:!e(w),size:"large",onClick:V[0]||(V[0]=N=>z(e(k))),round:"",style:{width:"100%","background-color":"white","font-size":"large"}},{icon:t(()=>[n(te,{size:"large",color:"gray"},{default:t(()=>[n(e(ea))]),_:1})]),default:t(()=>[A(" "+d(L.$t("loadbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[g("div",{innerHTML:L.$t("loadbuttontooltip")},null,8,hi)]),_:1},8,["show","placement"]),!e(a).IS_SP&&e(Y)||e(a).SSR?(E(),ne(Pe,{key:0},[n(ie,{align:"center",justify:"center",style:{color:"gray",margin:"0em"}},{default:t(()=>[A(d(L.$t("or")),1)]),_:1}),n(e(ke),{to:!1,"display-directive":"show",trigger:"hover",placement:"left","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:e(a).showTooltipsBeforeMounted.value},{trigger:t(()=>[n(X,{disabled:!e(w),size:"large",onClick:V[1]||(V[1]=N=>z(e(Z))),round:"",style:{width:"100%","background-color":"white","font-size":"large"}},{icon:t(()=>[n(te,{size:"large",color:"gray"},{default:t(()=>[n(e(fn))]),_:1})]),default:t(()=>[A(" "+d(L.$t("loadfolderbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[g("div",{innerHTML:L.$t("loadfoldertooltip")},null,8,_i)]),_:1},8,["show"])],64)):ve("",!0)]),_:1}),e(a).IS_SP?ve("",!0):(E(),ee(gi,{key:0,onDrop:Ne,forbidden:!e(w),class:"drop-target"},null,8,["forbidden"]))]),_:1}),n(ie,{vertical:""},{default:t(()=>[n(ie,{wrap:e(a).IS_SP,align:"center",justify:"stretch"},{default:t(()=>[g("span",wi,d(L.$t("TargetFileTypeExt"))+": ",1),n(e(ke),{"keep-alive-on-hover":!1,placement:"right",style:{"max-width":"200px"},duration:0,delay:0},{trigger:t(()=>[n(de,{trigger:"click",width:"trigger",size:"small",value:e($),"onUpdate:value":V[2]||(V[2]=N=>je($)?$.value=N:null),options:p,"render-option":v,"consistent-menu-width":!1},null,8,["value"])]),default:t(()=>[A(" "+d(ce(e($)).replace(/,/g,", ")),1)]),_:1})]),_:1},8,["wrap"]),e($)==="edit_type"?(E(),ee(e(ke),{key:0,trigger:"hover","keep-alive-on-hover":!1,placement:"bottom-start",show:e(b),duration:0,delay:0},{trigger:t(()=>[g("div",yi,[n(_e,{trigger:"manual",placement:"right-end",show:e($)==="edit_type"&&e(S)!=="success"&&!!e(b)},{trigger:t(()=>[n(me,{value:e(F),"onUpdate:value":V[3]||(V[3]=N=>je(F)?F.value=N:null),status:e(S),disabled:e($)!=="edit_type",onFocus:V[4]||(V[4]=N=>b.value=!0),onBlur:V[5]||(V[5]=N=>b.value=void 0),clearable:!0,size:"small",placeholder:".jpg, .gif, .png",spellcheck:"false"},null,8,["value","status","disabled"])]),default:t(()=>[n(he,{type:"error","show-icon":!0,title:"Validation error"},{default:t(()=>V[6]||(V[6]=[A(" Please correct the extension list."),g("br",null,null,-1),g("ul",null,[g("li",null,"Each extension must begin with a period. "),g("li",null,"Separate each extension with a comma. "),g("li",null,"Use alphameric characters.")],-1)])),_:1})]),_:1},8,["show"])])]),default:t(()=>[g("span",{innerHTML:L.$t("editAcceptTypes")},null,8,bi)]),_:1},8,["show"])):ve("",!0)]),_:1})]),_:1})])]),g("input",{ref_key:"fileinput",ref:k,onInput:q,onCancel:T,type:"file",multiple:"",accept:e(u),style:{display:"none"}},null,40,ki),g("input",{ref_key:"folderinput",ref:Z,webkitdirectory:"",directory:"",onInput:q,onCancel:T,type:"file",style:{display:"none"}},null,544)],64)}}}),zi=We(xi,[["__scopeId","data-v-946de019"]]),Ii={style:{"white-space":"nowrap"}},Ai=Te({__name:"settings-output",props:{quality:{},format:{}},emits:["update:format","update:quality"],setup(l,{emit:i}){const r=l,c=i,{t:a}=Je(),o=lt(et),p=_([]),v=["image/jpeg","image/png","image/gif","image/bmp","image/avif","image/webp"],f=xe({get:()=>r.format,set:S=>{S=m(S),c("update:format",S)}}),h=xe({get:()=>r.quality,set:S=>{c("update:quality",S)}}),y=xe(()=>/png|bmp/i.test(f.value)),b=_(null);He(()=>{u()});function m(S){return p.value.indexOf(S)<0&&(S=p.value[0]),S}function u(){for(const S of v)b.value.toDataURL(S).indexOf(S)>=0&&p.value.push(S);p.value.length===0&&p.value.push(v[0])}return(S,w)=>{const $=be,F=Kt,H=Ue,k=ke,Z=Gt,Y=ta;return E(),ne(Pe,null,[n(H,{justify:"center",class:"body"},{default:t(()=>[n(H,{vertical:""},{default:t(()=>[n(k,{to:!1,"display-directive":"show",show:e(o).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(o).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(H,{align:"center",wrap:!1},{default:t(()=>[n($,null,{default:t(()=>[n(e(ea))]),_:1}),A(d(e(a)("settings.imageType"))+": ",1),n(F,{value:f.value,"onUpdate:value":w[0]||(w[0]=z=>f.value=z),options:p.value.map(z=>({value:z,label:z})),"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),_:1})]),default:t(()=>[A(" "+d(e(a)("settings.imageTypeTooltip")),1)]),_:1},8,["show","placement"]),n(k,{to:!1,"display-directive":"show",show:e(o).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(o).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(H,{align:"center"},{default:t(()=>[n(H,{align:"start",wrap:!1},{default:t(()=>[n($,null,{default:t(()=>[n(e(Jn))]),_:1}),g("span",Ii,d(e(a)("settings.quality"))+":",1),n(H,{align:"center",justify:"space-between"},{default:t(()=>[n(Z,{tooltip:!1,value:h.value,"onUpdate:value":w[1]||(w[1]=z=>h.value=z),step:1,style:{width:"120px"},disabled:y.value},null,8,["value","disabled"]),n(Y,{onBlur:w[2]||(w[2]=z=>h.value??(h.value=0)),value:h.value,"onUpdate:value":w[3]||(w[3]=z=>h.value=z),step:"1",min:"0",max:"100",disabled:y.value,style:{width:"90px"},size:"small"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:t(()=>[A(" "+d(e(a)("settings.qualitytooltip")),1)]),_:1},8,["show","placement"])]),_:1})]),_:1}),g("canvas",{ref_key:"canvas",ref:b,width:"1",height:"1",style:{display:"none"}},null,512)],64)}}}),Ti=We(Ai,[["__scopeId","data-v-060333f5"]]),Si={style:{width:"4em","text-align":"left"}},Li={style:{width:"4em","text-align":"left"}},on=100,Mn=2e3,Rn=4096,Nn=4096,Ci=100,$i=100,Ei=Te({__name:"settings-adv",props:{expanded:{type:Boolean,required:!1},expandedModifiers:{},multithread:{type:Boolean,required:!0},multithreadModifiers:{},threadCount:{required:!0},threadCountModifiers:{},maxZipSize:{required:!0},maxZipSizeModifiers:{},retainExt:{type:Boolean,required:!0},retainExtModifiers:{},useFolderNameForZip:{type:Boolean,required:!0},useFolderNameForZipModifiers:{},shrinkImage:{type:Boolean,required:!0},shrinkImageModifiers:{},maxWidth:{required:!0},maxWidthModifiers:{},maxHeight:{required:!0},maxHeightModifiers:{}},emits:["update:expanded","update:multithread","update:threadCount","update:maxZipSize","update:retainExt","update:useFolderNameForZip","update:shrinkImage","update:maxWidth","update:maxHeight"],setup(l){const i={trigger:"hover",placement:"left",keepAliveOnHover:!1,duration:0,delay:0,style:"max-width: 20vw;"},r=Re(l,"expanded"),c=Re(l,"multithread"),a=Re(l,"threadCount"),o=Re(l,"maxZipSize"),p=Re(l,"retainExt"),v=Re(l,"useFolderNameForZip"),f=Re(l,"shrinkImage"),h=Re(l,"maxWidth"),y=Re(l,"maxHeight");Ae(Oe,m=>{m>1||(c.value=!1),a.value>m&&(a.value=m)},{immediate:!0});const b=xe(()=>c.value&&Oe.value>1);return He(()=>{Oe.value>1&&typeof a.value>"u"&&(a.value=Math.max(Oe.value,2))}),(m,u)=>{const S=be,w=Le,$=il,F=Ue,H=Gt,k=ta,Z=Qn,Y=Yn;return E(),ee(F,{justify:"center"},{default:t(()=>[n(Y,{"display-directive":"show","default-expanded-names":r.value?["collapitem"]:"","on-update:expanded-names":z=>r.value=!!String(z),"trigger-areas":["arrow","main"],class:pt(["settings-body",r.value?"expand-adv-settings":""])},ll({arrow:t(()=>[n(S,{style:le(r.value&&{top:"8px"})},{default:t(()=>[n(e(dl))]),_:1},8,["style"]),n(S,null,{default:t(()=>[n(e(cl))]),_:1})]),default:t(()=>[n(Z,{title:m.$t("settings.advancedSettings"),name:"collapitem"},{default:t(()=>[n(F,{vertical:"",style:{"padding-left":"2em"}},{default:t(()=>[n(e(ke),_t(wt(i)),{trigger:t(()=>[n(F,{vertical:""},{default:t(()=>[n(F,{wrap:!1,align:"center"},{default:t(()=>[n(w,{text:"",disabled:!e(Oe),style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:u[0]||(u[0]=z=>c.value=!c.value)},{icon:t(()=>[n(S,null,{default:t(()=>[n(e(sl))]),_:1})]),default:t(()=>[A(" "+d(m.$t("settings.enableMultiThreads")),1)]),_:1},8,["disabled"]),n($,{value:c.value,"onUpdate:value":u[1]||(u[1]=z=>c.value=z),disabled:!e(Oe),size:"small"},null,8,["value","disabled"])]),_:1}),n(F,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(H,{value:a.value,"onUpdate:value":u[2]||(u[2]=z=>a.value=z),disabled:!e(Oe)||!c.value,step:1,min:2,max:e(Oe),style:{width:"120px"}},null,8,["value","disabled","max"]),n(k,{onBlur:u[3]||(u[3]=z=>a.value??(a.value=2)),size:"tiny",value:a.value,"onUpdate:value":u[4]||(u[4]=z=>a.value=z),disabled:!e(Oe)||!c.value,step:1,min:2,max:e(Oe),style:{width:"10em"}},{suffix:t(()=>[A(d(m.$t("threads",a.value)),1)]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[A(" "+d(m.$t("settings.multiThreadsTooltip")),1)]),_:1},16),n(e(ke),_t(wt(i)),{trigger:t(()=>[n(F,{vertical:""},{default:t(()=>[n(F,{wrap:!1,align:"center"},{default:t(()=>[n(w,{text:"",focusable:!1,style:{"white-space":"nowrap","font-size":"smaller"}},{icon:t(()=>[n(S,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(rl))]),_:1})]),default:t(()=>[A(" "+d(m.$t("settings.maxZipFileSize"))+": ",1)]),_:1})]),_:1}),n(F,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(H,{tooltip:!1,value:o.value,"onUpdate:value":u[5]||(u[5]=z=>o.value=z),step:1,min:on,max:Mn,style:{width:"120px"}},null,8,["value"]),n(k,{onBlur:u[6]||(u[6]=z=>o.value??(o.value=on)),size:"tiny",value:o.value,"onUpdate:value":u[7]||(u[7]=z=>o.value=z),step:"1",min:on,max:Mn,style:{width:"10em"}},{suffix:t(()=>u[20]||(u[20]=[A("(MB)")])),_:1},8,["value"])]),_:1})]),_:1})]),default:t(()=>[A(" "+d(m.$t("settings.maxZipFileSizeTooltip")),1)]),_:1},16),n(e(ke),_t(wt(i)),{trigger:t(()=>[n(F,{wrap:!1,align:"center"},{default:t(()=>[n(w,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:u[8]||(u[8]=z=>v.value=!v.value)},{icon:t(()=>[n(S,null,{default:t(()=>[n(e(fn))]),_:1})]),default:t(()=>[A(" "+d(m.$t("settings.useFolderNameForZip")),1)]),_:1}),n($,{value:v.value,"onUpdate:value":u[9]||(u[9]=z=>v.value=z),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[A(" "+d(m.$t("settings.useFolderNameForZipTooltip")),1)]),_:1},16),n(e(ke),_t(wt(i)),{trigger:t(()=>[n(F,{wrap:!1,align:"center"},{default:t(()=>[n(w,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:u[10]||(u[10]=z=>p.value=!p.value)},{icon:t(()=>[n(S,null,{default:t(()=>[n(e(Kn))]),_:1})]),default:t(()=>[A(" "+d(m.$t("settings.retainOriginalExtension")),1)]),_:1}),n($,{value:p.value,"onUpdate:value":u[11]||(u[11]=z=>p.value=z),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[A(" "+d(m.$t("settings.retainExtTooltip")),1)]),_:1},16),n(e(ke),_t(wt(i)),{trigger:t(()=>[n(F,{vertical:""},{default:t(()=>[n(F,{wrap:!1,align:"center"},{default:t(()=>[n(w,{disabled:!b.value,text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:u[12]||(u[12]=z=>f.value=!f.value)},{icon:t(()=>[n(S,null,{default:t(()=>[n(e(ul))]),_:1})]),default:t(()=>[A(" "+d(m.$t("settings.shrinkImage")),1)]),_:1},8,["disabled"]),n($,{disabled:!b.value,value:f.value,"onUpdate:value":u[13]||(u[13]=z=>f.value=z),size:"small"},null,8,["disabled","value"])]),_:1}),n(F,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(H,{value:h.value,"onUpdate:value":u[14]||(u[14]=z=>h.value=z),disabled:!f.value||!b.value,step:1,min:Ci,max:Rn,style:{width:"120px"}},null,8,["value","disabled"]),n(k,{size:"tiny",onBlur:u[15]||(u[15]=z=>h.value??(h.value=8)),value:h.value,"onUpdate:value":u[16]||(u[16]=z=>h.value=z),disabled:!f.value||!b.value,step:1,min:8,max:Rn*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[g("span",Si,d(m.$t("width")),1)]),suffix:t(()=>u[21]||(u[21]=[A("px")])),_:1},8,["value","disabled","max"])]),_:1}),n(F,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(H,{value:y.value,"onUpdate:value":u[17]||(u[17]=z=>y.value=z),disabled:!f.value||!b.value,step:1,min:$i,max:Nn,style:{width:"120px"}},null,8,["value","disabled"]),n(k,{size:"tiny",onBlur:u[18]||(u[18]=z=>y.value??(y.value=8)),value:y.value,"onUpdate:value":u[19]||(u[19]=z=>y.value=z),disabled:!f.value||!b.value,step:1,min:8,max:Nn*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[g("span",Li,d(m.$t("height")),1)]),suffix:t(()=>u[22]||(u[22]=[A("px")])),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[A(" "+d(m.$t("settings.shrinkImageTooltip")),1)]),_:1},16)]),_:1})]),_:1},8,["title"])]),_:2},[r.value?{name:"header-extra",fn:t(()=>[n(e(ke),{"keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(w,{onClick:e(Il),size:"tiny",style:{"font-size":"xx-small"}},{default:t(()=>[A(d(m.$t("reset")),1)]),_:1},8,["onClick"])]),default:t(()=>[A(" "+d(m.$t("settings.resetButtonTooltip")),1)]),_:1})]),key:"0"}:void 0]),1032,["default-expanded-names","on-update:expanded-names","class"])]),_:1})}}}),Fi=We(Ei,[["__scopeId","data-v-661ec94b"]]),Pi={},Oi={style:{color:"gray","padding-left":"20px"}},Ui=["innerHTML"];function Mi(l,i){const r=Vn,c=Ue;return E(),ee(c,{vertical:"",justify:"end"},{default:t(()=>[n(r,{style:{margin:"0px"}}),n(c,{justify:"center"},{default:t(()=>[g("ul",Oi,[(E(!0),ne(Pe,null,bt(l.$tm("descriptions"),a=>(E(),ne("li",{key:a,style:{"text-align":"left"},innerHTML:a},null,8,Ui))),128))])]),_:1})]),_:1})}const Ri=We(Pi,[["render",Mi]]),Ni="modulepreload",ji=function(l){return"/avif2jpeg/dist/"+l},jn={},we=function(i,r,c){let a=Promise.resolve();if(r&&r.length>0){let p=function(h){return Promise.all(h.map(y=>Promise.resolve(y).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const v=document.querySelector("meta[property=csp-nonce]"),f=(v==null?void 0:v.nonce)||(v==null?void 0:v.getAttribute("nonce"));a=p(r.map(h=>{if(h=ji(h),h in jn)return;jn[h]=!0;const y=h.endsWith(".css"),b=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${b}`))return;const m=document.createElement("link");if(m.rel=y?"stylesheet":Ni,y||(m.as="script"),m.crossOrigin="",m.href=h,f&&m.setAttribute("nonce",f),document.head.appendChild(m),y)return new Promise((u,S)=>{m.addEventListener("load",u),m.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(p){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=p,window.dispatchEvent(v),!v.defaultPrevented)throw p}return a.then(p=>{for(const v of p||[])v.status==="rejected"&&o(v.reason);return i().catch(o)})},ca="English",pa="ðŸ‡¬ðŸ‡§",fa='AVIF to JPEG "Offline" Batch Converter',ga="It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",ma="Drag & Drop AVIF Images to Convert",va=["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data is sent to any server</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.'],ha="Select your language",_a="Choose Target File Extentions",wa={avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types",edit_type:"Edit File Extension List"},ya="Input a list of comma separated file extentions to load.<br>e.g.) .jpg,.gif,.png",ba="Load Images",ka="Select your images from a dialog window.<br>*Multiple selection allowed.",xa="Load a Whole Folder",za=`Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>*It will show "Upload" button, but it actually doesn't upload anything to any server.`,Ia="Converting images",Aa="Aborted",Ta="Some files failed to convert",Sa="Completed",La="Currently Busy",Ca="No files with the extentions were found.",$a="Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",Ea="Cancel",Fa="Save",Pa="Close",Oa="Open",Ua="Re-convert",Ma="Convert previous selected {n} @:files again",Ra="File | Files",Na="thread | threads",ja="You have not saved the converted images yet.",Da="Data have not been saved",Ba="Open Source",Za="Open the converted image",Va="Copied to clipboard",Ha="The converted image was copied to your clipboard as DataURL.",Wa="Copy the converted image as DataURL",qa="Convert Again",Ga={expandLogTooltip:"Displaying the entire log may severely reduce conversion speed.",showOnlyErrors:"Show only errors",outInRate:"Out / In Ratio",elapsedTime:"Elapsed Time",multiThreading:"Multi-Threading",outputSettings:"Output Settings",totalSize:"Total Size",totalFiles:"Number of Files",confirmDownloadMessage:"It will start to download {0} zip files.",inputSize:"Input Size",outputSize:"Output Size",filterSuccess:"Hide completed item",progressErrors:"Failed items",progressStarted:"Started Items",progressTotal:"Total number of files",zippingProgress:"Zipping progress",zipped:"ZIPPED",openFailedList:"Open failed file list",zipFailedList:"Pack failed files into Zips",table:{index:"index",status:"status",core:"thread",details:"file"},saveFailedList:"Save failed file list",done:"done",convertedZips:"successfully completed ZIP",progressSuccess:"Completed Files",downloadConvertedImage:"Download Converted Image",failureZippingFailedFiles:"Failure while zipping the failed files.",browseConvertedImages:"Browse converted images",index:"Index",Original:"Original",Converted:"Converted",saveAllZipsTooltip:"Save all ZIP files",Shrinked:"Shrinked",Shrinking:"Shrinking",saveAll:"Save All",progressRetries:"Retrying files",success:"success",started:"started",total:"total",files:"files",failure:"failure",all:"all",filterLogSelect:"filter",showOnlySuccess:"Only successes",showOnlyError:"Only errors",showAll:"Show all",Progress:"Progress",PreviewImage:"Preview Images",Log:"Log",log:"Log",Output:"Output Results",expandLog:"expand log size",autoScroll:"auto-scroll"},Ka={maxZipFileSize:"Max zip file size",retainExtTooltip:"New extension will be appended to original extension",retainOriginalExtension:"Keep Original File Extension",qualitytooltip:"Set image quality for output",quality:"Image Quality",maxZipFileSizeTooltip:"Set smaller value if memory problems occur.",ignoreExtTooltip:'Try to load files that don"t have image file extension',ignoreFileExtensions:"Load All File Types",imageTypeTooltip:"Choose image format for output",imageType:"Image Type",advancedSettings:"Advanced Settings",enableMultiThreads:"Enable multi-threading",resetButtonTooltip:"Restore all settings to default.",multiThreadsTooltip:"Convert images in multi-threaded",shrinkImageTooltip:"If the image dimensions are larger than the specified value, shrink the image to that value",shrinkImage:"Shrink images that exceed the following dimensions",useFolderNameForZip:"Use dropped folder name for the zip file",useFolderNameForZipTooltip:"If a folder is dropped or selected, its name is used as the name of the output ZIP file"},Ya="Disabled",Qa="Download",Xa="Reset",Ja="Back",eo="Failed",to="Success",no="Previous version",ao=`
Height`,oo="Width",lo="Don't show this message again",so="About the warning when selecting a folder",io="OK",ro={},uo="You must press the â€œUploadâ€ button here to load all the images in the folder, but the data loaded by this application is never actually uploaded to the server.",co="Continue",po="Cancel",fo="When you select a folder instead of a file as input on a website, major web browsers will display a warning like the image below.",go="This page may be an outdated version. Please reload the page.",mo="Reload",vo='If the conversion process frequently fails and an â€œOut of Memoryâ€ message appears, try reducing or disabling the number of "multi-threads" in the "Advanced Settings".',ho="Next",_o="Previous",wo="or",yo="Target File Extensions",bo={lang:ca,flags:pa,title:fa,metaDescription:ga,droptarget:ma,descriptions:va,selectLanguage:ha,fileTypeRadioTitle:_a,fileTypeRadioOptions:wa,editAcceptTypes:ya,loadbutton:ba,loadbuttontooltip:ka,loadfolderbutton:xa,loadfoldertooltip:za,processing:Ia,aborted:Aa,incomplete:Ta,completed:Sa,interfered:La,noimage:Ca,avifUnsupported:$a,cancel:Ea,save:Fa,close:Pa,open:Oa,reconvert:Ua,reconvertTip:Ma,files:Ra,threads:Na,confirmCloseDialog:ja,confirmCloseDialogTitle:Da,githubOpenSource:Ba,convertedImageUrlTooltip:Za,copiedDataURLDialogTitle:Va,copiedDataURLMessage:Ha,convertedImageDataUrlTooltip:Wa,convertAgain:qa,status:Ga,settings:Ka,disabled:Ya,Download:Qa,reset:Xa,back:Ja,failed:eo,success:to,previousVersion:no,height:ao,width:oo,checkboxTextDontShowThis:lo,loadfolderNotifyingTitle:so,OK:io,loadfolderNotifyingMessage:ro,loadfolderNotifyingMessageTerm2:uo,Continue:co,Cancel:po,loadfolderNotifyingMessageTerm1:fo,errMsgWorkerLoadError:go,Reload:mo,annotationOutOfMemory:vo,Next:ho,Prev:_o,or:wo,TargetFileTypeExt:yo},Di=Object.freeze(Object.defineProperty({__proto__:null,Cancel:po,Continue:co,Download:Qa,Next:ho,OK:io,Prev:_o,Reload:mo,TargetFileTypeExt:yo,aborted:Aa,annotationOutOfMemory:vo,avifUnsupported:$a,back:Ja,cancel:Ea,checkboxTextDontShowThis:lo,close:Pa,completed:Sa,confirmCloseDialog:ja,confirmCloseDialogTitle:Da,convertAgain:qa,convertedImageDataUrlTooltip:Wa,convertedImageUrlTooltip:Za,copiedDataURLDialogTitle:Va,copiedDataURLMessage:Ha,default:bo,descriptions:va,disabled:Ya,droptarget:ma,editAcceptTypes:ya,errMsgWorkerLoadError:go,failed:eo,fileTypeRadioOptions:wa,fileTypeRadioTitle:_a,files:Ra,flags:pa,githubOpenSource:Ba,height:ao,incomplete:Ta,interfered:La,lang:ca,loadbutton:ba,loadbuttontooltip:ka,loadfolderNotifyingMessage:ro,loadfolderNotifyingMessageTerm1:fo,loadfolderNotifyingMessageTerm2:uo,loadfolderNotifyingTitle:so,loadfolderbutton:xa,loadfoldertooltip:za,metaDescription:ga,noimage:Ca,open:Oa,or:wo,previousVersion:no,processing:Ia,reconvert:Ua,reconvertTip:Ma,reset:Xa,save:Fa,selectLanguage:ha,settings:Ka,status:Ga,success:to,threads:Na,title:fa,width:oo},Symbol.toStringTag,{value:"Module"})),Bi="Arabic",Zi="German",Vi="English",Hi="Spanish",Wi="Finnish",qi="French",Gi="Hindi",Ki="Indonesian",Yi="Italian",Qi="Japanese",Xi="Korean",Ji="Dutch",er="Polish",tr="Portuguese",nr="Russian",ar="Turkish",or="Ukrainian",lr="Chinese",sr={ar:Bi,de:Zi,en:Vi,es:Hi,fi:Wi,fr:qi,hi:Gi,id:Ki,it:Yi,ja:Qi,ko:Xi,nl:Ji,pl:er,pt:tr,ru:nr,tr:ar,uk:or,"zh-hant":"Chinese(hant)",zh:lr},Vt=[],ko={en:bo},vn={},Dn=Object.assign({"./locales/ar.json":()=>we(()=>import("./ar-8ZhJyh-p.js"),[]),"./locales/de.json":()=>we(()=>import("./de-C1juEtJ3.js"),[]),"./locales/en.json":()=>we(()=>Promise.resolve().then(()=>Di),void 0),"./locales/es.json":()=>we(()=>import("./es-D-YuDBrt.js"),[]),"./locales/fi.json":()=>we(()=>import("./fi-DzZHtI3X.js"),[]),"./locales/fr.json":()=>we(()=>import("./fr-DnBNbEr8.js"),[]),"./locales/hi.json":()=>we(()=>import("./hi-x6aU7sxH.js"),[]),"./locales/id.json":()=>we(()=>import("./id-BtqMCWRJ.js"),[]),"./locales/it.json":()=>we(()=>import("./it-BXwbSIqs.js"),[]),"./locales/ja.json":()=>we(()=>import("./ja-BCB_kYJD.js"),[]),"./locales/ko.json":()=>we(()=>import("./ko-DXSid08B.js"),[]),"./locales/nl.json":()=>we(()=>import("./nl-CSMPt6F2.js"),[]),"./locales/pl.json":()=>we(()=>import("./pl-NBbDOjaY.js"),[]),"./locales/pt.json":()=>we(()=>import("./pt-CZH32qtC.js"),[]),"./locales/ru.json":()=>we(()=>import("./ru-CncDOFDX.js"),[]),"./locales/tr.json":()=>we(()=>import("./tr-CU61d9cq.js"),[]),"./locales/uk.json":()=>we(()=>import("./uk-DTekiRi7.js"),[]),"./locales/zh-hant.json":()=>we(()=>import("./zh-hant-b29I6_cx.js"),[]),"./locales/zh.json":()=>we(()=>import("./zh-D1HJA8P8.js"),[])});var Zn;for(const l in Dn){const i=(Zn=l.match(/\/([a-z]{2}(?:-[a-z]+)?)\.json$/i))==null?void 0:Zn[1];i&&(Vt.push(i),!(i in ko)&&(vn[i]=Dn[l]))}let rn=rr();rn in vn||(rn="en");const Ht=pl({legacy:!1,globalInjection:!0,locale:rn,fallbackLocale:"en",messages:ko,warnHtmlMessage:!1,missingWarn:!1,fallbackWarn:!1});async function ir(l){if(Ht.global.availableLocales.indexOf(l)>=0)return;const i=await vn[l]();Ht.global.setLocaleMessage(l,i),await Fe()}function rr(){const l=location.pathname;return String(l.match(/[^/]+(?=\/?$)/)||"").toLowerCase()}const ur=["innerHTML"],Bn=Te({__name:"switch-lang",emits:["lang-ready","lang-change"],async setup(l,{emit:i}){let r,c;const a=lt(et),o=Hn(),{locale:p,t:v}=Je(),f=i,h=Object.entries(sr).map(([w,$])=>({label:$,value:w}));h.sort((w,$)=>{const F=w.label,H=$.label;return F>H?1:F<H?-1:0}),He(()=>{o.afterEach((w,$,F)=>{b(),a.switchToolTipVisibility()})}),fl(async()=>{}),[r,c]=gl(()=>b()),await r,c();async function y(w){(w!==p.value||Ht.global.availableLocales.indexOf(w)===-1)&&(f("lang-change",w),await ir(w),p.value=w,document.title=v("title"),await Fe()),f("lang-ready",w)}async function b(){const w=o.currentRoute.value.path||"",$=String(w.match(new RegExp("(?<=^\\/)[^/]+"))||"");$&&Vt.includes($)?(await y($),p.value=$):await m()}async function m(){const w=u().toLowerCase(),$=w.split(/[-_]/)[0];if(Vt.includes($)){let F=$;if($==="zh")switch(w){case"zh-hant":case"zh-mo":case"zh-hk":case"zh-tw":F="zh-hant"}await y(F)}}function u(){const w=window.navigator;return w.language||w.userLanguage||w.browserLanguage}function S(w){o.push("/"+w+"/")}return(w,$)=>{const F=be,H=Kt,k=ke;return E(),ee(k,{to:!1,"display-directive":"show",show:e(a).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(a).LANDSCAPE.value?"left":"bottom",duration:0,delay:50},{trigger:t(()=>[n(H,{ref:"langselect",size:"tiny",style:{width:"100%"},"consistent-menu-width":!1,options:e(h),"_v-model:value":"locale",value:e(p),"onUpdate:value":S},{arrow:t(()=>[n(F,null,{default:t(()=>[n(e(ml))]),_:1})]),_:1},8,["options","value"])]),default:t(()=>[g("div",{innerHTML:w.$t("selectLanguage")},null,8,ur)]),_:1},8,["show","placement"])}}}),et=Symbol("global variables"),dr=Te({__name:"Avif2Jpeg",emits:["ready"],setup(l,{emit:i}){const{t:r,locale:c}=Je(),a=i,o=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),p=_(null);_(0);let v=_(void 0);const f=_(!0),h=_(!1),y=_(!1),b=_(!0),m=_(!1);hl(et,{showTooltipsBeforeMounted:v,LANDSCAPE:f,IS_SP:o,switchToolTipVisibility:H,SSR:!1}),He(()=>{k(),window.addEventListener("resize",k),H(),setTimeout(()=>y.value=!0,3e3)}),Rt(()=>{window.removeEventListener("resize",k)});const u=200;let S=0,w=!0;function $(){b.value=!1,S=Date.now()}function F(){const z=w?0:Math.max(0,u-(Date.now()-S));w=!1,setTimeout(()=>b.value=!0,z),a("ready")}async function H(){}function k(){const z=document.body.clientWidth,T=document.body.clientHeight;f.value=z*.75>T||z>900}function Z(z){p.value=z}function Y(z){m.value=z}return(z,T)=>{const q=Ue,se=be,ce=ft;return E(),ee(q,{vertical:"",align:"stretch",class:"avif2jpeg"},{default:t(()=>[n(Ul,null,{"lang-switch":t(()=>[(E(),ee(Fn,null,{default:t(()=>[n(Bn,{onLangChange:$,onLangReady:F})]),_:1}))]),_:1}),n(ot,{name:"fade"},{default:t(()=>[Be(n(q,{vertical:"",align:"stretch",justify:"space-between",style:{height:"100%"}},{default:t(()=>[n(q,{justify:"space-around",vertical:"",style:{height:"100%"}},{default:t(()=>[n(Rl),n(q,{justify:"center"},{default:t(()=>[n(zi,{"_v-model:expanded":"UserSettings.expandExtButtons",target:e(W).acceptTypeValue,"onUpdate:target":T[0]||(T[0]=B=>e(W).acceptTypeValue=B),userExtensions:e(W).editedAcceptTypes,"onUpdate:userExtensions":T[1]||(T[1]=B=>e(W).editedAcceptTypes=B),"disable-notifying-folder-select":e(W).disableNotifyingFolderSelect,"onUpdate:disableNotifyingFolderSelect":T[2]||(T[2]=B=>e(W).disableNotifyingFolderSelect=B),forbidden:e(h),onInput:Z,onClick:T[3]||(T[3]=B=>Y(!0)),onCancel:T[4]||(T[4]=B=>Y(!1))},null,8,["target","userExtensions","disable-notifying-folder-select","forbidden"])]),_:1}),n(li,{input:e(p),format:e(W).imageFormat,quality:e(W).imageQuality,"retain-extension":e(W).retainExtension,maxZipSizeMB:e(W).maxZipSizeMB,threads:e(W).multithread?e(W).threadCount:0,"show-note":e(m),"onUpdate:showNote":T[5]||(T[5]=B=>je(m)?m.value=B:null),onStart:T[6]||(T[6]=B=>h.value=!0),onEnd:T[7]||(T[7]=B=>h.value=!1),"_:multi-thread-count":"val => availableThreadCount = val"},{"lang-switch":t(()=>[(E(),ee(Fn,null,{default:t(()=>[n(Bn)]),_:1}))]),_:1},8,["input","format","quality","retain-extension","maxZipSizeMB","threads","show-note"]),n(q,{vertical:"",align:"center"},{default:t(()=>[n(ce,{trigger:"manual",placement:"top","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(se,{size:"5vh",color:"#DADADA",style:{margin:"0px"}},{default:t(()=>[n(e(vl))]),_:1})]),default:t(()=>[T[18]||(T[18]=g("span",null,"CONVERT TOðŸ‘‡",-1))]),_:1})]),_:1}),n(q,{vertical:"",align:"center"},{default:t(()=>[n(Ti,{format:e(W).imageFormat,"onUpdate:format":T[8]||(T[8]=B=>e(W).imageFormat=B),quality:e(W).imageQuality,"onUpdate:quality":T[9]||(T[9]=B=>e(W).imageQuality=B)},null,8,["format","quality"]),n(Fi,{"retain-ext":e(W).retainExtension,"onUpdate:retainExt":T[10]||(T[10]=B=>e(W).retainExtension=B),"use-folder-name-for-zip":e(W).useFolderNameForZip,"onUpdate:useFolderNameForZip":T[11]||(T[11]=B=>e(W).useFolderNameForZip=B),"max-zip-size":e(W).maxZipSizeMB,"onUpdate:maxZipSize":T[12]||(T[12]=B=>e(W).maxZipSizeMB=B),"_v-model:expanded":"UserSettings.expandAdvSettings",multithread:e(W).multithread,"onUpdate:multithread":T[13]||(T[13]=B=>e(W).multithread=B),"thread-count":e(W).threadCount,"onUpdate:threadCount":T[14]||(T[14]=B=>e(W).threadCount=B),"_:thread-max":"availableThreadCount","shrink-image":e(W).shrinkImage,"onUpdate:shrinkImage":T[15]||(T[15]=B=>e(W).shrinkImage=B),"max-width":e(W).maxWidth,"onUpdate:maxWidth":T[16]||(T[16]=B=>e(W).maxWidth=B),"max-height":e(W).maxHeight,"onUpdate:maxHeight":T[17]||(T[17]=B=>e(W).maxHeight=B)},null,8,["retain-ext","use-folder-name-for-zip","max-zip-size","multithread","thread-count","shrink-image","max-width","max-height"])]),_:1}),n(Ri)]),_:1})]),_:1},512),[[Ze,e(b)]])]),_:1})]),_:1})}}}),hn=Te({__name:"App",setup(l){const i={Statistic:{valueFontSize:"1em"},Popover:{borderRadius:"0.4em",boxShadow:"2px 2px 5px 0px #555555"},Tooltip:{},Image:{toolbarColor:"#00000099"}},r=_(!0);return He(()=>{r.value=!1}),(c,a)=>{const o=bl,p=yl,v=wl,f=_l,h=kl;return E(),ee(h,{"theme-overrides":i,style:{width:"100%",height:"100%"}},{default:t(()=>[n(f,null,{default:t(()=>[n(v,{placement:"top-left",closable:!0,max:50},{default:t(()=>[n(p,null,{default:t(()=>[n(o,null,{default:t(()=>[n(dr,{class:pt({hide:e(r)})},null,8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),xo=[{path:"/",name:"Home",component:hn}];for(const l of Vt)xo.push({path:"/"+l+"/",strict:!0,name:l,component:hn});xl(hn,{routes:xo,base:"/avif2jpeg/dist/"},({app:l,router:i,routes:r,isClient:c,initialState:a})=>{l.use(Ht)});
