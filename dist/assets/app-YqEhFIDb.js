var da=Object.defineProperty;var ca=(l,i,d)=>i in l?da(l,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):l[i]=d;var We=(l,i,d)=>ca(l,typeof i!="symbol"?i+"":i,d);import{r as y,a as Lt,d as _e,i as ut,c as ne,o as F,_ as Se,u as t,w as e,b as z,t as u,e as n,f as wn,N as he,L as pa,g as ae,B as be,h as Zt,j as _,F as Ce,k as at,l as fa,m as ee,n as Le,p as ga,q as Wt,s as bn,v as ze,x as ma,y as Ae,z as Rt,A as Dt,C as qe,D as Tt,E as va,G as ha,H as Pe,I as Me,J as ht,K as ie,M as ve,O as Ve,T as He,P as kn,Q as Ht,R as $t,S as Vt,U as lt,V as Ne,W as zn,X as st,Y as _a,Z as Je,$ as ya,a0 as rn,a1 as un,a2 as An,a3 as dt,a4 as wa,a5 as qt,a6 as ba,a7 as Tn,a8 as ka,a9 as za,aa as Gt,ab as Aa,ac as xn,ad as Ta,ae as xa,af as dn,ag as In,ah as Ia,ai as Sa,aj as Kt,ak as Yt,al as Ot,am as Sn,an as je,ao as Cn,ap as Ca,aq as La,ar as $a,as as xt,at as Ea,au as Fa,av as Ee,aw as Ua,ax as Oa,ay as Qt,az as Ln,aA as Pa,aB as Ma,aC as Na,aD as Ra,aE as $n,aF as En,aG as Da,aH as ft,aI as gt,aJ as ja,aK as Ba,aL as Za,aM as Wa,aN as Ha,aO as Va,aP as qa,aQ as Ga,aR as Ka,aS as Ya,aT as Qa,aU as Xa,aV as Ja,aW as el,aX as tl,aY as nl,aZ as ol,a_ as al,a$ as ll,b0 as sl}from"./vendor-B0Xl-wei.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const p of a.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function d(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=d(o);fetch(o.href,a)}})();const Ie=y(navigator.hardwareConcurrency?Math.min(navigator.hardwareConcurrency,12):0),mt={threadCount:{min:2,max:Math.max(2,Ie.value)}},il={imageFormat:"image/jpeg",imageQuality:90,expandExtButtons:!1,acceptTypeValue:void 0,editedAcceptTypes:"",expandAdvSettings:!1,retainExtension:!1,maxZipSizeMB:1e3,useFolderNameForZip:!1,multithread:!0,threadCount:Ie.value,shrinkImage:!1,maxWidth:4096,maxHeight:4096,disableNotifyingFolderSelect:!1},Z=Lt(Fn({}));function rl(){Fn(Z)}function Fn(l){return Object.assign(l,il)}const Un="avif2jpeg",Pt=JSON.parse(localStorage.getItem(Un)||"{}");for(const l in Z)if(Pt.hasOwnProperty(l)&&Pt[l]!==void 0){let i=Pt[l];mt.hasOwnProperty(l)&&(mt[l].min>i&&(i=mt[l].min),mt[l].max<i&&(i=mt[l].max)),Z[l]=i}const ul=()=>{const l={};for(const i in Z)l[i]=Z[i];localStorage.setItem(Un,JSON.stringify(l))};window.addEventListener("beforeunload",ul);const dl=_e({__name:"github",setup(l){const i=ut(et);return(d,s)=>{const o=he,a=wn,p=Se;return F(),ne(p,{to:!1,"display-directive":"show",show:t(i).showTooltipsBeforeMounted.value,trigger:"hover",duration:0,delay:0},{trigger:e(()=>[n(a,{href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-size":"small","font-weight":"bolder"}},{default:e(()=>[n(o,null,{default:e(()=>[n(t(pa))]),_:1}),s[0]||(s[0]=z("GitHub"))]),_:1})]),default:e(()=>[z(" "+u(d.$t("githubOpenSource")),1)]),_:1},8,["show"])}}}),cl=["href"],pl=_e({__name:"licenses",setup(l){const i=y(!1),d={Vue:"https://github.com/vuejs/core/blob/main/LICENSE",Vite:"https://github.com/vitejs/vite/blob/main/LICENSE","Vite SSG":"https://github.com/antfu/vite-ssg/blob/main/LICENSE","Naive UI":"https://github.com/TuSimple/naive-ui/blob/main/LICENSE",Ionicons:"https://github.com/ionic-team/ionicons/blob/main/LICENSE"};return(s,o)=>{const a=be;return F(),ae(Ce,null,[n(a,{text:"",onClick:o[0]||(o[0]=p=>i.value=!0),style:{color:"black","font-size":"small"}},{default:e(()=>o[2]||(o[2]=[z("Licenses")])),_:1}),n(t(Zt),{preset:"dialog",ref:"dialog",show:i.value,"onUpdate:show":o[1]||(o[1]=p=>i.value=p),"positive-text":"OK",title:"Licenses"},{default:e(()=>[o[3]||(o[3]=_("h3",null,"Used Framework and Libraries",-1)),_("ul",null,[(F(),ae(Ce,null,at(d,(p,c)=>_("li",null,[_("a",{href:p},u(c),9,cl)])),64))])]),_:1},8,["show"])],64)}}}),fl=1,gl=8,ml=16,vl="",At={major:fl,minor:gl,build:ml,tag:vl},hl={style:{"font-size":"x-small","user-select":"none"}},_l=_e({__name:"version",setup(l){const i=["0.0.118"],d=`${At.major}.${At.minor}.${At.build}${At.tag}`,s=i.map(c=>({label:`v${c}`,key:c,value:c}));function o(c){const{key:h,label:g}=c,k=p(h),m=ee("a",{href:k},g),r=ee("div",null,m);return ee("div",null,r)}function a(c){location.href=p(c)}function p(c){return`/avif2jpeg/old/${c}/`}return(c,h)=>{const g=fa;return F(),ne(g,{"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start",options:t(s),"render-label":o,"onUpdate:value":a},{header:e(()=>[_("span",hl,u(c.$t("previousVersion")),1)]),default:e(()=>[_("span",{style:{cursor:"pointer"}},"v"+u(d))]),_:1},8,["options"])}}}),yl=_e({__name:"header",setup(l){return(i,d)=>{const s=Le,o=Wt;return F(),ne(s,{vertical:"",justify:"start"},{default:e(()=>[n(s,{justify:"space-between",align:"center"},{default:e(()=>[n(s,{align:"center"},{default:e(()=>[n(dl),n(_l),n(pl)]),_:1}),n(s,{align:"end",style:{"font-size":"x-small"}},{default:e(()=>[ga(i.$slots,"lang-switch")]),_:3})]),_:3}),n(o,{style:{margin:"0px"}})]),_:3})}}}),wl={style:{padding:"0px",margin:"0px","text-align":"center"}},bl={key:0},kl=_e({__name:"title",setup(l){const i=bn(),d=ze(()=>{const s=i.currentRoute.value.path||"";return!String(s.match(new RegExp("(?<=^\\/)[^/]+"))||"")});return(s,o)=>{const a=wn,p=ma("router-link"),c=Le;return F(),ne(c,{align:"center",justify:"center",style:{margin:"0px"}},{default:e(()=>[_("h1",wl,[t(d)?(F(),ae("span",bl,u(s.$t("title")),1)):(F(),ne(p,{key:1,to:"../",custom:""},{default:e(({navigate:h,href:g})=>[n(a,{href:g,onClick:h,style:{color:"black","word-break":"keep-all","overflow-wrap":"break-word"}},{default:e(()=>[z(u(s.$t("title")),1)]),_:2},1032,["href","onClick"])]),_:1}))])]),_:1})}}});function zl(l){return new Worker("/avif2jpeg/dist/assets/worker.canvas-ByxzuV0b.js",{name:l==null?void 0:l.name})}let On=0;class Al extends zl{constructor(d){super();We(this,"id",On++);We(this,"priority");this.priority=d||!1}release(){Et(this)}}class Tl extends Promise{constructor(){super(...arguments);We(this,"wid",-1)}}const jt=new Set,it=new Set,Qe=new Set,_t=new Map,Pn=[];function xl(l){const i=new Al;return jt.add(i),Mn(i,l),Et(i),l&&Pn.push(i.id),i}function Mn(l,i){const d=i?Qe:it,s=new Tl(o=>{_t.set(l,()=>o([l,s,!!i]))});s.wid=l.id,d.add(s)}async function Il(l){let i;if(!l)i=new Set([...Qe,...it]);else if(typeof l=="number"){const a=Pn.slice(0,l);i=new Set([...Qe].filter(p=>a.includes(p.wid)))}else i=l?Qe:it;const[d,s,o]=await Promise.any(i);return(o?Qe:it).delete(s),Mn(d,o),d}function Et(l){const i=_t.get(l);i&&(_t.delete(l),i())}function Sl(){for(const l of _t.keys())Et(l)}async function cn(){return await Promise.all([...it,...Qe])}function Nn(){Sl();for(const l of jt)l.onmessage=null,l.terminate();jt.clear(),it.clear(),Qe.clear(),_t.clear(),On=0}function Cl(l){return new Worker("/avif2jpeg/dist/assets/worker.zip-D4CHLUmx.js",{name:l==null?void 0:l.name})}const Ll=1e3*10,$l=1,Xt=2e3*2e3*5,El=5,Fl=2,Ul=Xt*1,pn=Xt*6,Ol=300,yt=new Map,It=new Map;let vt=0;const Xe=new Map,rt=new Map,wt=new Map,bt=new Map;let Jt,J,Fe,kt,De,Rn,Dn,jn,Bn,Zn,Wn;function Mt(l){({files:De,completedFileIdSet:Jt,ConvStats:J,canceled:Fe,props:kt,format:Rn,quality:Dn,outputExt:jn,imageType:Bn,message:Zn,notification:Wn}=l||{}),yt.clear(),It.clear(),Xe.clear(),rt.clear(),wt.clear(),bt.clear(),rt.clear(),wt.clear(),bt.clear()}async function Pl(l){Mt(l),Jt.clear();const i=Math.min(kt.threads-1,De.length),d=Math.min(El,i),s=Rl(J,Fe);let o;try{o=await Ml(i,d,s)}catch{return Mt(),{exception:new Error("worker-load-error"),callbackToClearConverter:new Function,callbackToGenerateFailedZips:new Function}}const a=Nl(o),p=Ae(Fe,S=>{S&&p()});J.demandImage=S=>{o.postMessage({action:"request-image",index:S})};const h=De.length===1;let g=0,k=0,m="",r=0;for(vt=0,yt.clear();r<De.length;){if(vt>pn&&!Fe.value){await new Promise(V=>setTimeout(V,100));continue}const S=[],T=[];let E=!1;const W=De.length-r,H=Math.min(r+Math.max(Math.min(Fl,W/kt.threads|0),1),De.length);let b=0,I=!1;for(;r<H&&!((b>Ul||vt>pn)&&!Fe.value);r++){const V=De[r],re=V.webkitRelativePath||V.name,M=It.get(V);I=I||!!M;const ye=0;Fe.value;const ue=V._id;if(b+=V.size,E=r===De.length-1,rt.has(ue)||rt.set(ue,V),Hn(r,re,ue),wt.has(V)||(g++,J.index=g),Fe.value){qn(ue);continue}let we;try{we=await createImageBitmap(V)}catch{Vn(r,re,ue);continue}T.push(we);const x=we.width*we.height*4;b+=x+V.size,vt+=x+V.size;let P=!1;const X=Date.now();X-k>Ol&&(k=X,P=!0),S.push({index:r,bitmap:we,file:V,fileId:ue,outputPath:m,type:Rn,quality:Dn/100,demandThumbnail:P||E,isSingleImage:h,maxSize:Z.shrinkImage?{width:Z.maxWidth,height:Z.maxHeight}:null,retriedTime:It.get(V)||0,webkitRelativePath:V.webkitRelativePath}),P=!1}let G;if(S.length){const V=b>Xt;G=await Il(d>0&&(I?1:V)),yt.set(G,b)}if(G&&(G.postMessage(S,T),T.forEach(V=>V.close()),T.length=0),E&&(await cn(),Fe.value))break}if(!Fe.value){let S;await new Promise(T=>{S=Ae([()=>J.done,Fe],()=>{(J.done>=g||Fe.value)&&T(void 0)},{immediate:!0})}),S()}p(),o.postMessage({action:"squeeze"}),await a,await cn();const v={value:!1},A=()=>{v.value=!0,Nn(),o.onmessage=null,o.terminate(),Mt()};let w=!1;return{callbackToClearConverter:A,callbackToGenerateFailedZips:async S=>{w||(w=!0,await jl(S,o,v,J))}}}async function Ml(l,i,d){Nn();const s=new Cl;s.postMessage({action:"set-config",zipSize:kt.maxZipSizeMB*1024*1024,keepExt:kt.retainExtension,outputExt:jn,imageType:Bn});let o;for(let p=0;p<l;p++){const c=xl(i>p);o??(o=c),c.onmessage=d;const{port1:h,port2:g}=new MessageChannel;s.postMessage({action:"set-port"},[h]),c.postMessage({},[g])}return await new Promise((p,c)=>{const h=v=>{s.removeEventListener("message",m),o.removeEventListener("message",m),clearTimeout(r),v?p(v):c(v)};let g=!1,k=!1;const m=v=>{v.target===s&&(g=!0),v.target===o&&(k=!0),g&&k&&h(!0)};let r=0;s.addEventListener("message",m),o.addEventListener("message",m),r=window.setTimeout(()=>h(!1),Ll)}),s}function Nl(l){return new Promise(d=>{l.onmessage=s=>{var g;const o=s.data,{action:a}=o;if(a==="add-zip-completed"){const{fileId:k}=o;J.done++,J.success++,Jt.add(k);return}if(a==="respond-image"){const{url:k,index:m,path:r,size:v,fileId:A}=o;J.convertedImageUrl=k,J.convertedImageSize=v,J.convertedImageIndex=m,J.convertedImageName=r,J.convertedImageFileId=A;let w="",L=0,S="";if(A>=0){const T=rt.get(A);w=URL.createObjectURL(T),L=T.size,S=T.name}J.convertedImageOrgUrl=w,J.convertedImageOrgSize=L,J.convertedImageOrgName=S,J.convertedImageShrinked=(g=bt.get(A))==null?void 0:g.shrinked;return}const{size:p,count:c}=o,h="url"in s.data?s.data.url:"";switch(a){case"push-zip":J.zips.push({url:h,size:p,count:c}),J.zippedTotalCount+=c,J.zippedTotalSize+=p;break;case"squeeze-zip":c>0&&(J.zips.push({url:h,size:p,count:c}),J.zippedTotalCount+=c,J.zippedTotalSize+=p),d(void 0);break;case"push-filelist":J.failedFileZippedCount++;break;case"squeeze-filelist-zip":J.failedZipDone=!0;case"push-filelist-zip":J.failedZips.push({url:h,size:p,count:c});break;case"zip-error":case"zip-squeeze-error":J.zippingErrorCount+=c,a==="zip-squeeze-error"&&d(void 0);break}}})}function Rl(l,i,d,s){return a=>{const p=a.target,{data:c}=a,{action:h}=c;switch(i.value,h){case"list-start":break;case"file-start":{const{index:g,path:k,fileId:m}=c;Hn(g,k,m);break}case"file-load":{const{thumbnail:g,width:k,height:m,fileId:r,shrinked:v}=c,A=Xe.get(r);A.core=p.id,A.command="🖼️loaded",g&&(l.thumbnail=g);let w=bt.get(r);w||(w={},bt.set(r,w)),w.shrinked??(w.shrinked=v);break}case"file-converted":{const{index:g,path:k,fileId:m}=c,r=Xe.get(m);r.command="🔃converted",l.converted++;break}case"file-completed":{const{inputsize:g,outputsize:k,fileId:m}=c,r=Xe.get(m);r&&(r.command="✅completed",r.completed=!0),l.inputTotalSize+=g,l.outputTotalSize+=k;break}case"file-error":{const{index:g,path:k,fileId:m}=c;Vn(g,k,m);break}case"file-canceled":{const{fileId:g,path:k}=c;qn(g);break}case"list-end":{Et(p),vt-=yt.get(p)||0,yt.delete(p);break}}}}let Dl=0;function Hn(l,i,d){const s={key:Dl++,core:-1,index:l,path:i,command:"➡️started"};Xe.set(d,s),J.logs.push(s)}function Vn(l,i,d){const s=rt.get(d);if(!s)throw new Error(`the file doesn't exist in the Map. "${d}":"${i}"`);const o=wt.get(s)||0,a=Xe.get(d);o<$l?(wt.set(s,o+1),De.push(s),It.set(s,Date.now()),a.command="⚠️retrying",a.error=!0,Zn.warning(`retrying "${i}"`,{duration:3e3}),J.retried++):(J.done++,J.failure++,a.command="❗failed",a.error=!0,Wn.error({content:`failed to load "${i}"`,duration:5e3}))}function qn(l){const i=Xe.get(l);J.done++,i.command="❗canceled",i.error=!0}async function jl(l,i,d,s){let o=0;for(const a of l){const p=(a.webkitRelativePath||a.name).replace(/^\//,"");if(d.value)return;o-s.failedFileZippedCount>20&&await new Promise(c=>setTimeout(c,10)),i.postMessage({action:"add-filelist",file:a,path:p}),o++}i.postMessage({action:"squeeze-filelist"})}function Ye(l,i=2){const d=Math.sign(l);l=Math.abs(l);const s=["Bytes","KB","MB","GB"],o=l?Math.floor(Math.log(l)/Math.log(1024)):0;return`${(l/Math.pow(1024,o)*d).toFixed(i)}${s[o]}`}function Gn(l,i=100,d=!1){i=typeof i=="number"?{width:i,height:i}:i;const{width:s,height:o}=i;let{width:a,height:p}=l;const c=a/p,h=s/o;return c>=h?(a=d?Math.min(s,a):s,p=a/c|0):(p=d?Math.min(o,p):o,a=p*c|0),{width:a,height:p}}class Bl{constructor(){We(this,"_currentFileCount",0);We(this,"_totalFileCount",0);We(this,"_zipLengthSumList",[]);We(this,"_pathBank",{})}increase(i){i&&(this._pathBank[i]=[this._zipLengthSumList.length,this._currentFileCount]),this._currentFileCount++,this._totalFileCount++}split(){this._zipLengthSumList.push(this._totalFileCount),this._currentFileCount=0}get(i){if(typeof i=="number"){let d=this._zipLengthSumList.findIndex((a,p)=>i<a);d===-1&&(d=this._zipLengthSumList.length);const s=this._zipLengthSumList[d-1]||0,o=i-s;return[d,o]}else{const d=this._pathBank[String(i)];if(d)return d}return null}}async function Zl(l,i,d,s,o){let a="";const p=document.createElement("canvas"),c=p.getContext("2d");let h=new Rt;const g=[h],k=new Bl,m=d.format,r=d.quality/100,v=[...m.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),A=l.length,w=d.maxZipSizeMB*1024*1024;let L=0,S=null,T="",E="",W=0,H=0,b=0,I=0,G=0,V=!1;const re=[];o.demandImage=x=>{const[P,X]=k.get(x),pe=g[P];o.convertedImageIndex=x,o.convertedImageName=pe.getPathByIndex(X),o.convertedImageUrl=URL.createObjectURL(new Blob([pe.get(X)],{type:m}));let fe="",U=0,N="";const j=re[x];fe=URL.createObjectURL(j),U=j.size,N=j.name,o.convertedImageOrgUrl=fe,o.convertedImageOrgSize=U,o.convertedImageOrgName=N};for(const x of l){if(s.value)break;const P=x.name;let X="";const pe=x.size,fe=(x.webkitRelativePath||x.relativePath||P).replace(/^\//,""),U=document.createElement("img");L++;const N={key:b++,core:-1,index:L,path:fe,command:"➡️start"};o.index=L,o.logs.push(N),o.logs.length-1,a&&(URL.revokeObjectURL(a),a=""),a=URL.createObjectURL(x),E=a,W=x.size,U.src=a;const j=await Kn(U).then(()=>!0).catch(()=>!1);if(!U.complete||!j||s.value){o.done++,o.failure++,N.command="❗failed";continue}const Y=U.width,B=U.height;p.width=Y,p.height=B,c.drawImage(U,0,0,Y,B,0,0,Y,B),N.command="🖼️imgload",o.thumbnail=U;const se=await new Promise(ce=>{const q=Be=>{S=Be,ce(Be)};p.toBlob(q,m,r)});if(s.value)break;if(!se){o.failure++;continue}H=se.size,o.converted++;let ge="";if(G+H>=w){try{await h.wait(),ge=h.url()}catch{V=!0,alert("memory problem occurred");break}o.zips.push({url:ge,size:G,count:I}),o.zippedTotalCount+=I,o.zippedTotalSize+=G,G=0,I=0,k.split(),h=new Rt,g.push(h)}G+=H;const de=fe||P;for(let ce=1;ce<255&&(X=de.replace(d.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+(ce>1?`(${ce})`:"")+"."+v,!!h.has(X));ce++);o.done++;try{I++,h.add(X,se),k.increase(),re.push(x),o.inputTotalSize+=pe,o.outputTotalSize+=H}catch{continue}T=X,o.success++,N.command="✅completed",N.completed=!0,i.add(x._id)}if(o.success>0)if(A===1)S&&(o.convertedImageIndex=0,o.convertedImageName=T.replace(/^.*\/(?=[^/]+$)/,"").replace(d.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+v,o.convertedImageUrl=URL.createObjectURL(S),o.convertedImageOrgUrl=E,o.convertedImageOrgSize=W);else try{if(V)throw new Error("terminated zipping process for memory problems");await h.wait();const x=h.url();o.zips.push({url:x,count:I,size:G}),o.zippedTotalCount+=I,o.zippedTotalSize+=G}catch{}const M={value:!1},ye=()=>{M.value=!0,g.forEach(x=>x.clear()),g.length=0,re.length=0};let ue=!1;return{callbackToClearConverter:ye,callbackToGenerateFailedZips:async x=>{ue||(ue=!0,Wl(x,w,o,M))}}}async function Wl(l,i,d,s){let o=0,a=0,p=new Rt;for(let c=0;c<l.length;c++){const h=l[c],g=(h.webkitRelativePath||h.name).replace(/^\//,"");if(s.value)return;if(await p.add(g,h),a+=h.size,o++,d.failedFileZippedCount++,a>=i||c===l.length-1){await p.zip();const k=p.url();d.failedZips.push({url:k,size:a,count:o}),p.clear(),a=0,o=0}}d.failedZipDone=!0}function Kn(l){if(typeof l.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((i,d)=>{l.onload=i,l.onerror=d})}const Re=(l,i)=>{const d=l.__vccOpts||l;for(const[s,o]of i)d[s]=o;return d},Hl={class:"container"},Vl={__name:"zipicon",setup(l){return(i,d)=>(F(),ae("span",Hl,[n(t(he),null,{default:e(()=>[n(t(Dt))]),_:1}),d[0]||(d[0]=_("span",{class:"text"},"ZIP",-1))]))}},ql=Re(Vl,[["__scopeId","data-v-5dab19ad"]]),Gl=["href","download","title"],Kl='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',Yl=_e({__name:"thumbnail",props:{src:{},width:{},height:{},maxWidth:{default:100},maxHeight:{default:100},expand:{type:Boolean,default:!1},loading:{type:Boolean},fileName:{},allowNext:{type:Boolean},allowPrev:{type:Boolean},hidden:{type:Boolean}},emits:["load","error","next","prev"],setup(l,{expose:i,emit:d}){const{t:s}=qe(),o=l,a=d,p=y();y();const c=y(!0),h=y(""),g=y(o.width||100),k=y(o.height||100),m=y(!1),r=Lt({width:g.value+"px",height:k.value+"px",minWidth:"50px",minHeight:"50px"});Tt(()=>{var E,W,H;(W=(E=p.value)==null?void 0:E.previewInstRef)==null||W.setPreviewSrc(Kl),URL.revokeObjectURL((((H=p.value)==null?void 0:H.imageRef)||{}).src),p.value=null});const v=y(!0);va(()=>{v.value=!1}),ha(()=>{v.value=!0}),Ae(o,(E,W)=>{r.width=(o.width||100)+"px",r.height=(o.height||100)+"px"}),Ae(()=>o.src,(E,W)=>{v.value&&L(E)},{immediate:!0}),i({download:S,openPreview:T,active:v});async function A(E){const W=E.target,H=W.naturalWidth,b=W.naturalHeight,{width:I,height:G}=Gn({width:H,height:b},{width:o.maxWidth||100,height:o.maxHeight||100},o.expand);g.value=I,k.value=G,a("load",{src:W.src,width:H,height:b}),c.value=!1,await new Promise(V=>setTimeout(V,100)),!c.value&&(m.value=!0)}function w(E){const W=E.target;a("error",W.src)}async function L(E){c.value=!0,m.value=!1,h.value=E}function S(){const E=document.createElement("a");E.href=h.value,E.download=o.fileName,E.click()}function T(){var E;(E=p.value)==null||E.click()}return(E,W)=>{const H=kn,b=Ht,I=Le,G=ht;return Pe((F(),ae("div",null,[n(t(Se),null,{trigger:e(()=>[n(G,{show:t(c)||o.loading},{default:e(()=>[n(I,{justify:"center",align:"center",style:ie(t(r))},{default:e(()=>[_("a",{"_v-show":"!(imgloading || props.loading)",href:t(h),onClick:W[0]||(W[0]=Ve(()=>{},["left","prevent"])),target:"_blank",download:o.fileName,title:o.fileName,style:{"line-height":"0px"}},[n(He,{mode:"in-out"},{default:e(()=>[Pe(n(H,{ref_key:"nImageRef",ref:p,"show-toolbar-tooltip":"",onLoad:A,onError:w,src:t(h),width:t(g),height:t(k),style:{border:"1px solid silver"}},null,8,["src","width","height"]),[[Me,t(m)]])]),_:1})],8,Gl),t(c)||o.loading?(F(),ne(b,{key:0})):ve("",!0)]),_:1},8,["style"])]),_:1},8,["show"])]),default:e(()=>[z(" "+u(o.fileName),1)]),_:1})],512)),[[Me,!E.hidden]])}}}),fn=Re(Yl,[["__scopeId","data-v-dbebbe1a"]]),Ql=["href","download","title"],Xl={class:"left-num"},Jl={class:"right-num"},es=["href","download","title"],ts={class:"left-num"},ns={class:"right-num"},os=["href","download"],as=_e({__name:"image-viewer",props:{url:{},originalUrl:{},name:{},originalName:{},size:{},originalSize:{},length:{},index:{},isSingle:{type:Boolean},variousInfo:{}},emits:["demand-image","close"],setup(l,{expose:i,emit:d}){const s=l,o=d;i({download:U,cleanup:Be});const a=$t(),{t:p}=qe();Vt();const c=y(),h=y(),g=y(),k=lt("viewerItemContainer"),m=y(!0),r=y(Math.max(s.index,0)+1),v=y(1),A=y(1),w=y(""),L=y(1),S=y(1),T=y(!1),E=y(!1),W=y(!1),H=ze(()=>{var $,C;return((C=($=g==null?void 0:g.value)==null?void 0:$.previewInstRef)==null?void 0:C.previewSrc)===w.value}),b=ze(()=>r.value<s.length),I=ze(()=>r.value>1),G=y("viewer-item-init"),V=y(0),re=y(!0);y({width:"auto",height:"auto"});const M=y(!1);Ne(()=>{document.body.addEventListener("keydown",X),document.body.addEventListener("keydown",P),x(r.value-1)}),Tt(()=>{clearTimeout(ye),document.body.removeEventListener("keydown",X),document.body.removeEventListener("keydown",P),M.value=!0}),zn(()=>{URL.revokeObjectURL(s.url),URL.revokeObjectURL(s.originalUrl)});let ye=-1;Ae(r,($,C)=>{r.value<1||r.value>s.length||(clearTimeout(ye),$>C?G.value="viewer-item-next":G.value="viewer-item-prev",V.value=m.value?V.value:~V.value,ye=setTimeout(()=>{s.index!==r.value-1&&(re.value=!1,x(r.value-1))},50))});let ue="",we="";Ae(()=>s.url,()=>{var O,Te;let $="";s.index===0&&m.value?(m.value=!1,r.value=1,$=s.url):s.index===r.value-1?(m.value=!1,T.value=!1,$=s.url):(URL.revokeObjectURL(s.url),URL.revokeObjectURL(s.originalUrl));const C=ue,le=we;if(URL.revokeObjectURL(C),URL.revokeObjectURL(le),ue=s.url,we=s.originalUrl,$){try{(Te=(O=g.value)==null?void 0:O.previewInstRef)!=null&&Te.displayed&&(H.value?g.value.previewInstRef.setPreviewSrc($):g.value.previewInstRef.setPreviewSrc(s.originalUrl))}catch{}w.value=$}},{immediate:!0});function x($){T.value=!0,E.value=!1,W.value=!1,st(()=>o("demand-image",$))}function P($){var C,le,O,Te;if($.key==="Escape")try{(le=(C=g.value)==null?void 0:C.previewInstRef)!=null&&le.displayed&&($.stopPropagation(),(Te=(O=g.value)==null?void 0:O.previewInstRef)==null||Te.toggleShow(!1))}catch{}}function X($){var C,le;switch($.key){case"ArrowRight":case"PageDown":case"ArrowDown":j(1);break;case"ArrowLeft":case"PageUp":case"ArrowUp":j(-1);break;case"Home":r.value=1;break;case"End":r.value=s.length;break;case" ":case"Enter":B();break;default:return}$.stopPropagation(),(le=(C=g.value)==null?void 0:C.previewInstRef)!=null&&le.displayed&&$.preventDefault()}function pe({width:$,height:C}){v.value=$,A.value=C,E.value=!0}function fe({width:$,height:C}){L.value=$,S.value=C,W.value=!0}function U(){H.value?c.value.download():h.value.download()}async function N($){try{const C=await fetch($).then(O=>O.blob()).then(O=>new Promise(Te=>{const ke=new FileReader;ke.onload=Te,ke.readAsDataURL(O)})).then(O=>O.target.result);navigator.clipboard.writeText(C);const le=O=>{O.target.focus(),O.target.select()};a.info({title:p("copiedDataURLDialogTitle"),content:()=>ee("div",[ee("div",p("copiedDataURLMessage")),ee(Tn,{onFocus:le,onClick:le,type:"textarea",value:C,readonly:!0,size:"small",style:{marginTop:"2em",fontSize:"x-small"}})]),positiveText:"OK"})}catch{a.error({title:"failed to copy Data URL",content:"could not copy Data URL",positiveText:"OK"})}}function j($){$>0&&r.value<s.length?r.value++:$<0&&r.value>1&&r.value--}let Y="";const B=()=>{var C,le,O,Te,ke,Ue;Y=(O=window.getComputedStyle((le=(C=g==null?void 0:g.value)==null?void 0:C.previewInstRef)==null?void 0:le.previewRef))==null?void 0:O.transform;const $=H.value;(Ue=(ke=(Te=g==null?void 0:g.value)==null?void 0:Te.previewInstRef)==null?void 0:ke.handleSwitchNext)==null||Ue.call(ke),st(()=>{var tt,te,Ge;H.value===$&&((Ge=(te=(tt=g==null?void 0:g.value)==null?void 0:tt.previewInstRef)==null?void 0:te.handleSwitchNext)==null||Ge.call(te))})};function se(){try{st(()=>g.value.previewInstRef.previewRef.style.transform=Y)}catch{}}function ge({nodes:$}){const C=ee(Gt,{color:H.value?"green":"gray",offset:[-20,-12],value:(H.value?p("status.Converted"):p("status.Original"))+" "+r.value},()=>ee(be,{round:!0,onClick(){B()},textColor:"white",size:"small",style:{marginLeft:"4px"}},{icon:()=>ee(H.value?ka:za)}));$.next=ee(be,{onClick(){j(1)},disabled:!b.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>ee(un)}),$.prev=ee(be,{onClick(){j(-1)},disabled:!I.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>ee(Aa)});try{const le=$.download.children;le.default=()=>p("save");const O=le.trigger();O.props.onClick=U,le.trigger=()=>O}catch{}return[C,...Object.values($)]}function de($){setTimeout(()=>re.value=!0,20)}function ce(){c.value.openPreview()}const q=lt("body");function Be(){}return($,C)=>{const le=he,O=Le,Te=An,ke=dt,Ue=qt,tt=_a;return F(),ne(O,{justify:"center",align:"center",vertical:"",style:ie({visibility:m.value?"hidden":"visible"}),class:"body",ref_key:"body",ref:q},{default:e(()=>[n(tt,{ref_key:"nImageGroupRef",ref:g,"show-toolbar-tooltip":"","render-toolbar":ge,onPreviewNext:se},{default:e(()=>[n(O,{wrap:!1,align:"center",justify:"center"},{default:e(()=>[n(t(be),{onClick:C[0]||(C[0]=te=>j(-1)),disabled:!t(I),block:"",class:Je({"thumb-arrow":!0,pale:!t(I)}),title:$.$t("Prev")},{icon:e(()=>[n(le,{size:"30"},{default:e(()=>[n(t(ya))]),_:1})]),_:1},8,["disabled","class","title"]),n(O,{justify:"center",ref_key:"viewerItemContainer",ref:k,class:"viewer-item-container"},{default:e(()=>[n(He,{name:G.value,on_afterLeave:de},{default:e(()=>[(F(),ne(O,{vertical:"",key:V.value,"_v-show":"viewerItemVisibility"},{default:e(()=>[n(O,{align:"center",wrap:!1},{default:e(()=>[n(O,{vertical:"",align:"center"},{default:e(()=>[n(O,{align:"center",justify:"center",wrap:!1},{default:e(()=>[n(O,{align:"center",justify:"center",vertical:"",class:"original-thumb"},{default:e(()=>[_("a",{href:$.originalUrl,onClick:C[4]||(C[4]=Ve(te=>{h.value.openPreview()},["prevent"])),download:$.originalName,title:$.originalName,class:"imglink"},[n(O,{align:"center",justify:"center",wrap:!1},{default:e(()=>[n(fn,{ref:te=>{te!=null&&te.active&&(h.value=te)},src:$.originalUrl,width:1,"max-width":1,"max-height":1,loading:T.value,"file-name":$.originalName,"allow-next":r.value<s.length,"allow-prev":r.value>1,onLoad:fe,onNext:C[1]||(C[1]=te=>j(1)),onPrev:C[2]||(C[2]=te=>j(-1)),hidden:!0},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(O,{vertical:"",align:"center"},{default:e(()=>[n(O,{class:"imglink-label"},{default:e(()=>[z(u(t(p)("status.Original")),1)]),_:1}),n(O,{justify:"center",class:"img-size",wrap:!1},{default:e(()=>[_("span",Xl,u(W.value?L.value:"?"),1),C[13]||(C[13]=z(" × ")),_("span",Jl,u(W.value?S.value:"?"),1)]),_:1}),n(O,{justify:"center"},{default:e(()=>[C[3]||(rn(-1,!0),(C[3]=n(O,null,{default:e(()=>[z(u(W.value?t(Ye)(s.originalSize,0):"?"),1)]),_:1})).cacheIndex=3,rn(1),C[3])]),_:1})]),_:1})]),_:1})],8,Ql)]),_:1}),n(O,{style:{margin:"1em"},class:"original-thumb"},{default:e(()=>[n(le,{size:"20",color:"silver"},{default:e(()=>[n(t(un))]),_:1})]),_:1}),_("a",{href:w.value,onClick:C[5]||(C[5]=Ve(te=>ce(),["prevent"])),download:s.name,title:s.name,class:"imglink"},[n(O,{vertical:"",align:"center",justify:"center"},{default:e(()=>[n(O,{class:"imglink-label"},{default:e(()=>[z(u(t(p)("status.Converted")),1)]),_:1}),n(O,{vertical:"",align:"center",justify:"center",size:0},{default:e(()=>[n(O,{justify:"center"},{default:e(()=>{var te;return[n(O,{wrap:!1,style:ie((te=s.variousInfo)!=null&&te.shrinked?{color:"blue"}:{}),class:"img-size"},{default:e(()=>[_("span",ts,u(E.value?v.value:"?"),1),C[14]||(C[14]=z(" × ")),_("span",ns,u(E.value?A.value:"?"),1)]),_:1},8,["style"])]}),_:1})]),_:1}),n(O,{justify:"center"},{default:e(()=>[z(u(E.value?t(Ye)(s.size,0):"?"),1)]),_:1})]),_:1})],8,es)]),_:1}),n(O,{ref:"fileNameContainer",align:"center",class:"pathbox",title:s.name},{default:e(()=>[n(Te,{"x-scrollable":!0,trigger:"hover",style:{"font-size":"smaller",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},{default:e(()=>[z(u(E.value?s.name:"?"),1)]),_:1})]),_:1},8,["title"])]),_:1}),n(O,{vertical:""},{default:e(()=>[n(fn,{ref:te=>{te!=null&&te.active&&(c.value=te)},src:w.value,width:142,"max-width":140,"max-height":100,loading:T.value,"file-name":s.name,"allow-next":r.value<s.length,"allow-prev":r.value>1,onLoad:pe,onNext:C[6]||(C[6]=te=>j(1)),onPrev:C[7]||(C[7]=te=>j(-1))},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(O,{justify:"center",wrap:!0},{default:e(()=>[n(ke,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:e(()=>[_("a",{href:s.url,ref:"saveImg",target:"_blank",download:s.name},[n(t(be),{disabled:!E.value,round:"",size:"tiny"},{default:e(()=>[z(u($.$t("save")),1)]),_:1},8,["disabled"])],8,os)]),default:e(()=>[z(" "+u($.$t("save")),1)]),_:1}),n(ke,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:e(()=>[n(t(be),{disabled:!E.value,onClick:C[8]||(C[8]=te=>N(s.url)),round:"",size:"tiny"},{default:e(()=>C[15]||(C[15]=[z("DataURL")])),_:1},8,["disabled"])]),default:e(()=>[z(" "+u($.$t("convertedImageDataUrlTooltip")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1},8,["name"])]),_:1},512),n(t(be),{onClick:C[9]||(C[9]=te=>j(1)),disabled:!t(b),block:"",class:Je({"thumb-arrow":!0,next:!0,pale:!t(b)}),title:$.$t("Next")},{icon:e(()=>[n(le,{size:"30"},{default:e(()=>[n(t(wa))]),_:1})]),_:1},8,["disabled","class","title"])]),_:1}),Pe(n(O,{style:{width:"100%"},wrap:!1},{default:e(()=>[n(Ue,{value:r.value,"onUpdate:value":C[10]||(C[10]=te=>r.value=te),tooltip:!1,step:1,min:1,max:s.length,onKeydown:C[11]||(C[11]=Ve(()=>{},["prevent","stop"])),class:"index-slider"},null,8,["value","max"]),n(O,{class:"index",align:"center",justify:"center",wrap:!1,size:3},{default:e(()=>[n(O,null,{default:e(()=>[z(u(t(p)("status.index"))+":",1)]),_:1}),n(O,{justify:"end",align:"center",class:"counter"},{default:e(()=>[z(u(r.value),1)]),_:1}),n(O,null,{default:e(()=>C[16]||(C[16]=[z("/")])),_:1}),n(O,{justify:"start",align:"center",class:"counter"},{default:e(()=>[z(u(s.length),1)]),_:1})]),_:1})]),_:1},512),[[Me,!$.isSingle]]),n(t(be),{onClick:C[12]||(C[12]=te=>{o("close")}),circle:"",size:"tiny",color:"silver",class:"close-button",title:$.$t("close")},{icon:e(()=>[n(le,{size:"12"},{default:e(()=>[n(t(ba))]),_:1})]),_:1},8,["title"])]),_:1},512)]),_:1},8,["style"])}}}),ls=Re(as,[["__scopeId","data-v-e6969a54"]]),ss={class:"status-table"},is={class:"started"},rs={class:"completed"},us={style:{"font-size":"medium"}},ds={class:"total"},cs={style:{"font-size":"medium"}},ps=_e({__name:"status.center-column",props:{processing:{type:Boolean},interval:{},statusColor:{},success:{},successTo:{},successFrom:{},index:{},length:{},failure:{},retried:{},successPercTo:{},successPercFrom:{}},setup(l){const i=l,d=Vt(),s=y(d.value.successColor),o=y(!1);return Ae(()=>i.processing,a=>{a||(i.success===i.length?o.value=!0:s.value=d.value.errorColor)}),(a,p)=>{const c=he,h=xa,g=Le,k=dt,m=xn;return F(),ne(m,{type:"multiple-circle","stroke-width":2,percentage:[a.successTo/a.length*100|0,a.index/a.length*100|0],color:[t(d).successColor,a.statusColor],"rail-style":[{stroke:t(s),opacity:.3}]},{default:e(()=>[n(g,{vertical:"",align:"center",justify:"center",size:0,style:{"font-family":"v-mono","white-space":"nowrap"},wrap:!1,"wrap-item":!1},{default:e(()=>[n(g,{size:0,align:"center",style:ie({color:a.processing?a.statusColor:t(s),fontSize:"1.4em"}),wrap:!1},{default:e(()=>[t(o)?(F(),ne(c,{key:0},{default:e(()=>[n(t(Ta))]),_:1})):ve("",!0),n(h,{duration:a.interval*3|0,from:a.successPercFrom|0,to:a.successPercTo|0,active:!0},null,8,["duration","from","to"]),p[0]||(p[0]=z("% "))]),_:1},8,["style"]),_("table",ss,[_("tbody",null,[_("tr",is,[_("td",null,u(a.$t("status.started"))+":",1),_("td",null,[n(k,{trigger:"hover",style:ie({color:t(d).infoColor}),placement:"left"},{trigger:e(()=>[_("span",{style:ie({fontSize:"xx-small",color:a.statusColor,lineHeight:"0"})},u(a.index.toLocaleString("en-us")),5)]),default:e(()=>[z(" "+u(a.$t("status.progressStarted"))+" ("+u(a.index.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"]),a.retried>0?(F(),ne(k,{key:0,trigger:"hover",style:ie({color:t(d).warningColor}),placement:"left"},{trigger:e(()=>[_("span",{style:ie({fontSize:"xx-small",color:t(d).warningColor,lineHeight:"0"})}," ("+u(a.retried.toLocaleString("en-us"))+") ",5)]),default:e(()=>[z(" "+u(a.$t("status.progressRetries"))+" ("+u(a.retried.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):ve("",!0),a.failure>0?(F(),ne(k,{key:1,trigger:"hover",style:ie({color:t(d).errorColor}),placement:"left"},{trigger:e(()=>[_("span",{style:ie({fontSize:"xx-small",color:t(d).errorColor,lineHeight:"0"})}," ("+u(a.failure.toLocaleString("en-us"))+") ",5)]),default:e(()=>[z(" "+u(a.$t("status.progressErrors"))+" ("+u(a.failure.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):ve("",!0)])]),_("tr",rs,[_("td",null,u(a.$t("status.success"))+":",1),_("td",us,[n(k,{trigger:"hover",duration:0,delay:0,style:ie({color:t(d).successColor}),placement:"bottom"},{trigger:e(()=>[_("span",{style:ie({color:t(d).successColor})},[n(h,{duration:a.interval*3|0,from:a.successFrom,to:a.successTo,active:!0,"show-separator":!0},null,8,["duration","from","to"])],4)]),default:e(()=>[z(" "+u(a.$t("status.progressSuccess"))+" ("+u(a.successTo.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])])]),_("tr",ds,[_("td",null,u(a.$t("status.total"))+":",1),_("td",cs,[n(k,{trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:e(()=>[z(u(a.length.toLocaleString("en-us")),1)]),default:e(()=>[z(" "+u(a.$t("status.progressTotal"))+" ("+u(a.length.toLocaleString("en-us"))+") ",1)]),_:1})])])])])]),_:1})]),_:1},8,["percentage","color","rail-style"])}}}),fs=Re(ps,[["__scopeId","data-v-19e58795"]]),gs={key:0},ms={style:{"font-size":"smaller"}},vs={key:0,class:"log-table",ref:"table"},hs={class:"log-tr"},_s={class:"log-th"},ys={class:"log-th"},ws={style:{"min-width":"7em"},class:"log-th"},bs={style:{"padding-left":"2em"},class:"log-th"},ks={class:"log-td"},zs={class:"log-td"},As={class:"log-td"},Ts={class:"log-td"},xs={style:{margin:"1px"}},Is=["href","download","onClick"],Ss={key:0,style:{position:"relative"}},Cs=["href","download"],Ls=["href","download"],$s={key:0,style:{margin:"1px"}},Es=["href","download","onClick"],Fs=99999,Us=250,Os=100,Ps=_e({__name:"status",props:{processing:{type:Boolean},status:{},interval:{}},emits:["all-zips-clicked","demand-zip-errors","demand-image"],setup(l,{expose:i,emit:d}){const s=$t(),{t:o}=qe(),a=Vt(),p={W:160,H:80},c=l,h=d,g=y(!1),k=y([]),m=y(!1);lt("table");const r=y([]),v=y([]),A=y([0,0]),w=y([0,0]),L=y([0,0]),S=y([0,0]),T=y([0,0]),E=y([0,0]),W=y(0),H=y(0),b=y([0,0]),I=y(a.value.infoColor),G=y("#000000"),V=y("#000000"),re=y(0),M=y(0),ye=y(""),ue=y("00:00:00");y(""),y("");const we=y(void 0),x=y(!1),P=y(!0),X=y(!1),pe=ze(()=>x.value?N.value:U.value),fe=y("16em"),U=y(5),N=y(1e3),j=y(!0),Y=y(!1),B=Lt({name:"",originalName:"",size:0,url:"",originalUrl:"",originalSize:0,dataUrl:"",index:0,various:{shrinked:!1}}),se=lt("body"),ge=y(null),de=y(null),ce=y(),q=lt("imageViewer");i({cleanup:on}),Ne(()=>{Ae(c.status,()=>le(),{deep:!1}),Ae([de,j],()=>{if(!de.value||!j.value)return;const{width:xe,height:$e}=Gn(de.value,{width:p.W,height:p.H});ge.value.width=xe,ge.value.height=$e,ge.value.style.width=xe+"px",ge.value.style.height=$e+"px",de.value instanceof HTMLImageElement?ge.value.getContext("2d").drawImage(de.value,0,0,xe,$e):(ge.value.getContext("bitmaprenderer").transferFromImageBitmap(de.value),de.value.close(),de.value=null,c.status.thumbnail=null)});let f=0;const D=()=>{if(f)return;const xe=Date.now();ue.value="00:00:00",f=window.setInterval(()=>{const $e=(Date.now()-xe)/1e3;ue.value=`${String($e/3600|0).padStart(2,"0")}:${String($e/60%60|0).padStart(2,"0")}:${String($e%60|0).padStart(2,"0")}`},300)};D(),Ae(()=>c.processing,(xe,$e)=>{xe?(D(),k.value=[],g.value=!1,m.value=!1,r.value=[],v.value=[]):(clearInterval(f),f=0),c.processing||Te()});const K=dn();let Q;const oe=()=>{clearTimeout(Q),Q=setTimeout(()=>{if(!j.value||Ke)return;const xe=ce.value.$parent.$el.offsetHeight,$e=window.innerHeight-K.parent.parent.vnode.el.offsetHeight-8;fe.value=Math.max(xe+$e,Us)+"px"},100)};oe(),window.addEventListener("resize",oe);const Oe=new ResizeObserver(oe);Oe.observe(K.parent.parent.vnode.el);let Ke=!1;Tt(()=>{Ke=!0,Oe.disconnect(),clearInterval(f),clearTimeout(Q),clearTimeout(C),clearTimeout(Ge),window.removeEventListener("resize",oe)})}),Tt(()=>{on()}),Ae([()=>c.status.zips.length,()=>c.status.failedZips.length],()=>{const f=c.status;{r.value.length>f.zips.length&&(r.value.length=0);let D=0;const K=f.zips.length===1&&f.zippedTotalCount===f.length;for(let Q=r.value.length;Q<f.zips.length;Q++){const oe=f.zips[Q],Oe=f.baseZipName+(K?"":"-"+String(Q+1).padStart(2,"0"))+".zip";D+=oe.size,r.value[Q]={url:oe.url,size:oe.size,number:K?0:Q+1,sizeByUnit:Ye(oe.size),name:Oe,count:oe.count,clicked:!1}}}{v.value.length>f.failedZips.length&&(v.value.length=0);let D=0;const K=f.failedZipDone&&f.failedZips.length===1;for(let Q=v.value.length;Q<f.failedZips.length;Q++){const oe=f.failedZips[Q],Oe=f.baseZipName+"-error"+(K?"":"-"+String(Q+1).padStart(2,"0"))+".zip";D+=oe.size,v.value[Q]={url:oe.url,size:oe.size,number:K?0:Q+1,sizeByUnit:Ye(oe.size),name:Oe,count:oe.count,clicked:!1}}}});const Be=c.interval||100;let $=!1,C=0;function le(){if($)return;if(C){$=!0;return}C=window.setTimeout(()=>{C=0,$&&($=!1,le())},Be);const f=c.status;g.value=f.length>=2,w.value[1]=w.value[0],w.value[0]=f.index,L.value[1]=L.value[0],L.value[0]=f.success,S.value[1]=S.value[0],S.value[0]=f.failure,T.value[1]=T.value[0],T.value[0]=f.done,E.value[1]=E.value[0],E.value[0]=f.converted,W.value=f.retried,H.value=f.length,b.value[1]=b.value[0],b.value[0]=f.zippedTotalCount,re.value=f.inputTotalSize,M.value=f.outputTotalSize;const D=M.value-re.value;ye.value=(D>=0?"+ ":"")+Ye(D);const K=M.value/re.value,Q=(256|Math.min(255,Math.max(0,K-1.5)*255|0)).toString(16).substring(1);G.value="#"+Q+"0000";const oe=1024*1024,Oe=(256|Math.min(255,Math.max(0,D/1024/oe)*255|0)).toString(16).substring(1);if(V.value="#"+Oe+"0000",A.value[1]=A.value[0],A.value[0]=L.value[0]/H.value*100,j.value||!c.processing){const Ke=f.logs.slice(-99999);k.value.push(...Ke);const xe=k.value.length-Fs;xe>0&&k.value.splice(0,xe),P.value&&Ke.length&&ct(),k.value.length>N.value&&(N.value*=2)}f.logs.length=0,de.value=f.thumbnail,c.processing&&(I.value=S.value[0]?a.value.errorColor:W.value?a.value.warningColor:a.value.infoColor),f.convertedImageUrl!==B.url&&(B.url=f.convertedImageUrl,B.name=f.convertedImageName,B.dataUrl=f.convertedImageDataUrl,B.size=f.convertedImageSize||f.outputTotalSize,B.originalSize=f.convertedImageOrgSize,B.originalName=f.convertedImageOrgName,B.index=f.convertedImageIndex,B.originalUrl=f.convertedImageOrgUrl,B.various={shrinked:f.convertedImageShrinked})}let O=dn();function Te(){c.status,I.value=c.status.success===c.status.length?a.value.successColor:a.value.errorColor,x.value||(j.value=!1,x.value=!0),Y.value=!0,j.value&&(setTimeout(ct,500),O.proxy.$forceUpdate(),O=null),le()}const ke=ze(()=>[{key:"open",label:o("status.openFailedList"),icon:()=>ee(he,()=>ee(In)),onSelect(){te()}},{key:"download",label:o("status.saveFailedList"),icon:()=>ee(he,()=>ee(Ia)),onSelect(){te(!0)}},{key:"zip",label:`${o("status.zipFailedList")}`+(c.status.failedZipDone?`(✔${o("status.done")})`:""),icon:()=>ee(ht,{show:m.value&&!c.status.failedZipDone,size:"small"},()=>ee(he,()=>ee(Dt))),disabled:m.value,onSelect(f){return m.value=!0,h("demand-zip-errors"),!1}}]);function Ue(f,D=!1){const{url:K,name:Q}=f;if(D){const oe=document.createElement("a");oe.href=K,oe.download=Q,oe.click()}f.clicked||(f.clicked=!0,c.processing||r.value.every(oe=>oe.clicked)&&h("all-zips-clicked"))}async function tt(){if(g.value){if(r.value.length>=2&&!await new Promise((K,Q)=>s.warning({title:o("Download"),content:o("status.confirmDownloadMessage",[r.value.length]),positiveText:"OK",negativeText:o("cancel"),onPositiveClick:()=>K(!0),onNegativeClick:()=>Q()})))return;const f=r.value;for(const D of f)Ue(D,!0)}else q.value.download()}function te(f=!1){const D=new Blob([c.status.unconvertedListText],{type:"text/plain;charset=utf8"}),K=URL.createObjectURL(D),Q=document.createElement("a");Q.href=K,Q.target="_blank",f&&(Q.download=c.status.baseZipName+"-error.txt"),Q.click()}let Ge=0,zt=!1;function ct(f=!1){if(!zt){if(Ge){zt=!0;return}st(()=>{!f&&(!x.value||!P.value)||(ce.value.scrollTo({behavior:"instant",top:k.value.length*50}),Ge=window.setTimeout(()=>{Ge=0,zt&&(zt=!1,ct())},Os))})}}const nn=y(!1);function on(){nn.value=!0,URL.revokeObjectURL(B.url),URL.revokeObjectURL(B.originalName),B.originalUrl="",B.url="",B.index=0,c.status.logs.length=0,k.value.length=0,v.value.length=0,r.value.length=0,x.value=!1,Y.value=!1}return(f,D)=>{const K=Le,Q=Sa,oe=Sn,Oe=Se,Ke=Ht,xe=Yt,$e=Kt,Ft=Wt,pt=be,an=xn,nt=dt,ra=ql,ln=Gt,ua=Ca;return F(),ne(K,{ref_key:"body",ref:se,vertical:"",justify:"center"},{default:e(()=>[n(K,{justify:"center",align:"center",wrap:!1,style:{"white-space":"nowrap"}},{default:e(()=>[n(K,{vertical:"",justify:"center",class:"left-column"},{default:e(()=>[n(Q,{"tabular-nums":"",label:f.$t("status.elapsedTime")},{default:e(()=>[n(K,null,{default:e(()=>[z(u(t(ue)),1)]),_:1})]),_:1},8,["label"]),n(Q,{"tabular-nums":"",label:f.$t("status.multiThreading")},{default:e(()=>[n(K,{style:ie({color:c.status.threads?"":"red",fontSize:"smaller"})},{default:e(()=>[z(u(c.status.threads?f.$rt("{n} @:threads",c.status.threads):f.$t("disabled")),1)]),_:1},8,["style"])]),_:1},8,["label"]),n(Q,{"tabular-nums":"",label:f.$t("status.outputSettings")},{default:e(()=>[n(K,{vertical:"",justify:"end",style:{"font-size":"smaller","line-height":"1em"}},{default:e(()=>[_("div",null,u(f.$t("settings.imageType"))+": "+u(c.status.type),1),f.status.shrink?(F(),ae("div",gs,[z(u(f.$t("status.Shrinking"))+": ",1),_("span",ms,u(f.status.shrink[0])+"×"+u(f.status.shrink[1]),1)])):ve("",!0),_("div",null,"Zip: "+u(c.status.zipSize)+"MB",1)]),_:1})]),_:1},8,["label"])]),_:1}),n(fs,{index:t(w)[0],success:f.status.success,length:f.status.length,"success-to":t(L)[0],"success-from":t(L)[1],failure:t(S)[0],"success-perc-to":t(A)[0],"success-perc-from":t(A)[1],retried:t(W),processing:f.processing,interval:t(Be),"status-color":t(I),class:"center-column"},null,8,["index","success","length","success-to","success-from","failure","success-perc-to","success-perc-from","retried","processing","interval","status-color"]),n(K,{vertical:"",style:{height:"100%"},justify:"center"},{default:e(()=>[n(Q,{"tabular-nums":"",label:f.$t("status.inputSize")},{default:e(()=>[n(K,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:e(()=>[z(u((t(re)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(Q,{"tabular-nums":"",label:f.$t("status.outputSize")},{default:e(()=>[n(K,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:e(()=>[z(u((t(M)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(Q,{"tabular-nums":"",label:f.$t("status.outInRate")},{default:e(()=>[n(K,{vertical:"",align:"end",justify:"start",style:{"font-size":"xx-small","font-family":"v-mono","line-height":"50%"}},{default:e(()=>[_("span",{style:ie({color:t(G),fontSize:"larger"})},"× "+u((t(M)/t(re)||1).toFixed(2)),5),_("span",{style:ie({color:t(V)})},"("+u(t(ye))+")",5)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1}),n($e,{"display-directive":"show","trigger-areas":["arrow","main"],"default-expanded-names":"log-collapse","expanded-names":t(j)?["log-collapse"]:[],onUpdateExpandedNames:D[7]||(D[7]=R=>{j.value=!!String(R)})},{default:e(()=>[n(xe,{title:"Log",name:"log-collapse",style:{"white-space":"nowrap"}},{header:e(()=>[n(K,{align:"center",wrap:!1},{default:e(()=>[z(u(f.$t("status.log")),1),Pe(n(t(ht),{size:16},null,512),[[Me,f.processing&&!t(j)]])]),_:1})]),"header-extra":e(()=>[Pe(n(K,{align:"center",wrap:!1},{default:e(()=>[n(Ot,null,{default:e(()=>[n(oe,{key:"a",checked:t(X),"onUpdate:checked":D[0]||(D[0]=R=>je(X)?X.value=R:null),size:"small",style:{"font-size":"smaller"},class:"hide-mobile"},{default:e(()=>[z(u(f.$t("status.filterSuccess")),1)]),_:1},8,["checked"]),Pe(n(oe,{key:"b",checked:t(P),"onUpdate:checked":[D[1]||(D[1]=R=>je(P)?P.value=R:null),D[2]||(D[2]=R=>R&&ct(!0))],size:"small",style:{"font-size":"smaller"}},{default:e(()=>[z(u(f.$t("status.autoScroll")),1)]),_:1},8,["checked"]),[[Me,t(x)]])]),_:1}),n(Oe,{style:{"max-width":"30em"}},{trigger:e(()=>[n(oe,{size:"small",checked:t(x),"onUpdate:checked":[D[3]||(D[3]=R=>je(x)?x.value=R:null),D[4]||(D[4]=R=>{P.value=R,ct(!0)})],style:{"font-size":"smaller"}},{default:e(()=>[z(u(f.$t("status.expandLog")),1)]),_:1},8,["checked"])]),default:e(()=>[z(u(f.$t("status.expandLogTooltip")),1)]),_:1})]),_:1},512),[[Me,t(j)]])]),default:e(()=>[n(K,{wrap:!1,class:Je({"log-container":1,"expand-log":t(x)}),align:"stretch",style:ie(t(x)?{height:t(fe),maxHeight:t(fe)}:{})},{default:e(()=>[n(t(An),{ref_key:"scrollref",ref:ce,"x-scrollable":!0,onMouseup:D[5]||(D[5]=R=>P.value=!1),onWheel:D[6]||(D[6]=R=>P.value=!1),trigger:"none",style:ie([{"z-index":"2","padding-right":"10px","min-height":"7em"},{maxHeight:t(fe)}]),size:50},{default:e(()=>[t(j)?(F(),ae("table",vs,[_("tbody",null,[_("tr",hs,[_("th",_s,u(f.$t("status.table.core")),1),_("th",ys,u(f.$t("status.table.index")),1),_("th",ws,u(f.$t("status.table.status")),1),_("th",bs,u(f.$t("status.table.details")),1)]),(F(!0),ae(Ce,null,at((t(X)?t(k).filter(R=>!R.completed):t(k)).slice(-t(pe)),({index:R,key:ot,command:Ze,path:Ut,core:sn})=>(F(),ae("tr",{key:ot,class:"log-tr"},[_("td",ks,u(sn>=0?sn+1:"-"),1),_("td",zs,u(R+1),1),_("td",As,u(Ze),1),_("td",Ts,u(Ut),1)]))),128))])],512)):ve("",!0)]),_:1},8,["style"]),n(K,{style:ie([{"align-self":"center",position:"absolute","z-index":"0","margin-top":"0.5em",right:"0.1em","line-height":"0px"},{width:p.W+"px",height:p.H+"px"}]),justify:"center",align:"center"},{default:e(()=>[n(t(ht),{size:"small",show:f.processing},{default:e(()=>[c.status.thumbnail===void 0?(F(),ne(Ke,{key:0,description:"EMPTY"})):ve("",!0),Pe(_("canvas",{ref_key:"thumbcanvas",ref:ge,width:"106",height:"80",style:ie({border:"1px solid gray",filter:f.processing?"":"opacity(0.35)"})},null,4),[[Me,c.status.thumbnail!==void 0]])]),_:1},8,["show"])]),_:1},8,["style"])]),_:1},8,["class","style"])]),_:1})]),_:1},8,["expanded-names"]),n(Ft,{style:{margin:"0.2em"}}),n(K,{wrap:!1,vertical:""},{default:e(()=>[n(K,{justify:"center",align:"center",vertical:""},{default:e(()=>[n(He,null,{default:e(()=>[t(Y)?t(Y)&&f.status.success>0&&!t(nn)?(F(),ne(ls,{key:1,ref_key:"imageViewer",ref:q,url:t(B).url,size:t(B).size,"original-url":t(B).originalUrl,"original-size":t(B).originalSize,name:t(B).name,originalName:t(B).originalName,length:c.status.success,index:t(B).index,"various-info":t(B).various,"is-single":!t(g),onDemandImage:D[9]||(D[9]=R=>h("demand-image",R)),onClose:D[10]||(D[10]=R=>Y.value=!1)},null,8,["url","size","original-url","original-size","name","originalName","length","index","various-info","is-single"])):ve("",!0):(F(),ne(pt,{key:0,tertiary:"",type:"success",size:"small",disabled:!(f.status.success>0),onClick:D[8]||(D[8]=R=>Y.value=!0)},{default:e(()=>[z(u(f.$t("status.browseConvertedImages")),1)]),_:1},8,["disabled"]))]),_:1})]),_:1}),n(K,{justify:"center"},{default:e(()=>[Pe(n(K,{vertical:"",align:"center"},{default:e(()=>[n(nt,{placement:"left"},{trigger:e(()=>[n(an,{type:"line","indicator-placement":"inside",color:"lime","rail-color":"rgba(99, 255, 99, 0.5)","indicator-text-color":t(b)[0]===t(H)?"white":"green",processing:f.processing,percentage:t(b)[0]/t(H)*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:e(()=>[_("span",xs,u(t(b)[0]/t(H)*100|0)+"% "+u(f.$t("status.zipped"))+" ("+u(t(b)[0])+"/"+u(t(E)[0])+")",1)]),_:1},8,["indicator-text-color","processing","percentage"])]),default:e(()=>[z(" "+u(f.$t("status.zippingProgress"))+" ("+u(t(b)[0]/t(H)*100|0)+"%) ",1)]),_:1}),n(He,{name:"zipcontainer"},{default:e(()=>[t(r).length>=1||c.processing?(F(),ne(Ot,{key:0,name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:e(()=>[(F(!0),ae(Ce,null,at(t(r),(R,ot)=>(F(),ae("span",{key:ot},[n(nt,{trigger:"hover",duration:0,delay:0},{trigger:e(()=>[_("a",{href:R.url,download:R.name,class:"in-button-anchor",onClick:Ze=>Ue(R)},[n(pt,{class:"zip-button",size:"tiny",color:R.clicked?"#050":"lime","text-color":R.clicked?"gray":"white",onClick:Ve(Ze=>Ue(R),["stop"]),round:""},{default:e(()=>[n(t(he),{size:"tiny"},{default:e(()=>[n(t(Dt))]),_:1}),z("ZIP"+u(R.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Is)]),default:e(()=>[_("div",{style:ie({color:t(a).successColor})},[_("div",null,"ZIP "+u(R.number||"")+" ("+u(f.$t("success"))+")",1),_("div",null,u(R.name),1),_("div",null,u(R.sizeByUnit),1),_("div",null,u(f.$rt("{n} @:files",R.count)),1)],4)]),_:2},1024)]))),128))]),_:1})):ve("",!0)]),_:1})]),_:1},512),[[Me,t(g)]])]),_:1}),n(He,null,{default:e(()=>[Pe(n(K,{justify:"center",align:"center"},{default:e(()=>[n(nt,{trigger:"hover",duration:0,delay:0,placement:"left",style:ie({color:"white",backgroundColor:t(a).successColor}),"arrow-style":{backgroundColor:t(a).successColor}},{trigger:e(()=>[n(He,{name:"save"},{default:e(()=>[t(L)[0]>0?(F(),ae("span",Ss,[n(ln,{value:t(g)?t(b)[0].toLocaleString("en-us"):c.status.type.replace(/\(.+\)/,""),color:t(a).successColorHover,offset:[-20,-3]},{default:e(()=>[n(pt,{size:"medium",onClick:tt,color:t(a).successColor,round:""},{default:e(()=>[t(g)?(F(),ae(Ce,{key:0},[t(r).length?(F(),ae("a",{key:0,href:t(r)[0].url,download:t(r)[0].name,class:"in-button-anchor",onClick:D[11]||(D[11]=Ve(()=>{},["prevent"]))},[n(ra),z(" × "+u(t(r).length)+" "+u(f.$t("status.saveAll")),1)],8,Cs)):ve("",!0)],64)):(F(),ae("a",{key:1,href:t(B).url,download:t(B).name,class:"in-button-anchor",onClick:D[12]||(D[12]=Ve(()=>{},["prevent"]))},[n(t(he),{size:"tiny"},{default:e(()=>[n(t(Cn))]),_:1}),z(" "+u(f.$t("save")),1)],8,Ls))]),_:1},8,["color"])]),_:1},8,["value","color"])])):ve("",!0)]),_:1})]),default:e(()=>[f.status.length>=2?(F(),ae(Ce,{key:0},[_("div",null,u(t(o)("success"))+": "+u(t(b)[0].toLocaleString()),1),_("div",null,u(t(o)("status.totalSize"))+": "+u(t(Ye)(f.status.zippedTotalSize)),1),_("div",null,"ZIP × "+u(t(r).length),1),_("div",null,u(t(o)("status.saveAllZipsTooltip")),1)],64)):(F(),ae(Ce,{key:1},[z(u(f.$t("status.downloadConvertedImage",t(r).length)),1)],64))]),_:1},8,["style","arrow-style"]),!f.processing&&f.status.success!==t(H)?(F(),ne(ua,{key:0,options:t(ke),onSelect:D[13]||(D[13]=(R,ot)=>{var Ze;return(Ze=t(ke).find(({key:Ut})=>R===Ut))==null?void 0:Ze.onSelect()}),"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start"},{default:e(()=>[n(nt,{show:t(we),duration:0,delay:0,placement:"right",style:ie({color:"white",backgroundColor:t(a).errorColor}),"arrow-style":{backgroundColor:t(a).errorColor}},{trigger:e(()=>[n(ln,{value:f.status.unconvertedFileCount.toLocaleString(),color:t(a).errorColorHover,offset:[-0,-3]},{default:e(()=>[n(pt,{size:"small",color:t(a).errorColor},{default:e(()=>[n(t(he),{size:"medium",style:{"vertical-align":"middle"}},{default:e(()=>[n(t(La))]),_:1})]),_:1},8,["color"])]),_:1},8,["value","color"])]),default:e(()=>[_("div",null,[_("div",null,u(t(o)("failed"))+": "+u(f.status.unconvertedFileCount.toLocaleString()),1),_("div",null,u(t(o)("status.totalSize"))+": "+u(t(Ye)(f.status.unconvertedTotalSize)),1)])]),_:1},8,["show","style","arrow-style"])]),_:1},8,["options"])):ve("",!0)]),_:1},512),[[Me,!c.processing]])]),_:1}),n(He,{name:"zipcontainer"},{default:e(()=>[Pe(n(K,{vertical:"",align:"center"},{default:e(()=>[n(nt,{placement:"left"},{trigger:e(()=>[n(an,{type:"line","indicator-placement":"inside",color:"red","rail-color":"rgba(255, 0, 0, 0.5)","indicator-text-color":f.status.failedFileZippedCount===f.status.unconvertedFileCount?"white":"#500",processing:t(m)&&!f.status.failedZipDone&&!f.status.failedToCreateFailedZip,percentage:f.status.failedFileZippedCount/f.status.unconvertedFileCount*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:e(()=>[f.status.failedToCreateFailedZip?(F(),ae("div",{key:1,style:ie({color:t(a).errorColor})},u(f.$t("status.failureZippingFailedFiles")),5)):(F(),ae("span",$s,u(f.status.failedFileZippedCount/f.status.unconvertedFileCount*100|0)+"% "+u(f.$t("status.zipped"))+" ("+u(f.status.failedFileZippedCount)+"/"+u(f.status.unconvertedFileCount)+")",1))]),_:1},8,["indicator-text-color","processing","percentage"])]),default:e(()=>[z(" "+u(f.$t("status.zippingProgress"))+" ("+u(f.status.failedFileZippedCount/f.status.unconvertedFileCount*100|0)+"%) ",1)]),_:1}),n(Ot,{name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:e(()=>[(F(!0),ae(Ce,null,at(t(v),(R,ot)=>(F(),ae("span",{key:ot},[n(nt,{trigger:"hover",duration:0,delay:0},{trigger:e(()=>[_("a",{href:R.url,download:R.name,class:"in-button-anchor",onClick:Ze=>Ue(R)},[n(pt,{class:"zip-button",size:"tiny",color:R.clicked?"#551122":"#F00","text-color":R.clicked?"gray":"white",onClick:Ve(Ze=>Ue(R),["stop"]),round:""},{default:e(()=>[n(t(he),{size:"tiny"},{default:e(()=>[n(t($a))]),_:1}),z("ZIP"+u(R.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Es)]),default:e(()=>[_("div",{style:ie({color:t(a).errorColor})},[_("div",null,"ZIP "+u(R.number||"")+" ("+u(f.$t("failed"))+")",1),_("div",null,u(R.name),1),_("div",null,u(R.sizeByUnit),1),_("div",null,u(f.$rt("{n} @:files",R.count)),1)],4)]),_:2},1024)]))),128))]),_:1})]),_:1},512),[[Me,t(m)]])]),_:1})]),_:1})]),_:1},512)}}}),Ms=Re(Ps,[["__scopeId","data-v-d47951d5"]]),Ns=["innerHTML"],Rs=10,Ds=100,js=_e({__name:"converter",props:xt({input:{},format:{},quality:{},retainExtension:{type:Boolean},maxZipSizeMB:{},threads:{}},{showNote:{type:Boolean},showNoteModifiers:{}}),emits:xt(["start","end"],["update:showNote"]),setup(l,{emit:i}){ut(et);const{t:d}=qe(),s=$t(),o=Ea(),a=Fa(),p=navigator.hardwareConcurrency,c=typeof OffscreenCanvas=="function",h=l,g=Ee(l,"showNote"),k=i,m=y(!1),r=y(!1),v=y(!1),A=y(!1),w=y(!1),L=y("initializing"),S=y("info"),T=Lt(ue()),E=lt("stat");let W=!1,H=()=>{},b=0,I=!1;Ae(()=>h.input,U=>{U!=null&&U.length&&x(U)}),Ae(A,U=>{document.body.style.overflowY=U?"hidden":"auto"}),Ne(async()=>{await pe(),fe()});async function G(){let U=!0;if(b>Rs*1e3&&!I&&T.success>0&&(U=!1,await new Promise(N=>{s.warning({title:d("confirmCloseDialogTitle"),autoFocus:!0,maskClosable:!1,positiveText:d("close"),negativeText:d("back"),onPositiveClick:()=>U=!0,onAfterLeave:N,content:d("confirmCloseDialog")})})),!U)return!1;a.destroyAll(),o.destroyAll(),A.value=!1,g.value=!1}function V(U){T.demandImage(U)}function re(){!r.value&&m.value?r.value=!0:G()}function M(){x(h.input)}let ye=y(()=>{});function ue(U){const N={logs:[],index:0,converted:0,success:0,failure:0,retried:0,done:0,length:0,zippedTotalCount:0,zippingErrorCount:0,zippedTotalSize:0,processing:!1,zips:[],inputTotalSize:0,outputTotalSize:0,thumbnail:null,baseZipName:"testzipname",type:"image/any",startedTime:Date.now(),convertedImageDataUrl:"",convertedImageName:"",convertedImageUrl:"",convertedImageOrgUrl:"",convertedImageIndex:-1,convertedImageFileId:-1,convertedImageShrinked:!1,zipSize:h.maxZipSizeMB,shrink:Z.multithread&&Z.shrinkImage?[Z.maxWidth,Z.maxHeight]:void 0,unconvertedListText:"",failedZipDone:!1,failedZips:[],unconvertedFileCount:0,unconvertedTotalSize:0,failedFileZippedCount:0,failedToCreateFailedZip:!1,demandImage:()=>{}};return Object.assign(U||{},N)}function we(){w.value=!1,URL.revokeObjectURL(T.convertedImageUrl),URL.revokeObjectURL(T.convertedImageOrgUrl);for(const U of T.zips)URL.revokeObjectURL(U.url);T.zips.length=0;for(const U of T.failedZips)URL.revokeObjectURL(U.url);T.failedZips.length=0,ue(T),H(),H=()=>{},I=!1,v.value=!1,r.value=!1}async function x(U){if(m.value){s.error({title:"Busy",positiveText:"OK",content:d("interfered")});return}let N=U.concat();ue(T),we(),A.value=!0,w.value=!0,m.value=!0,T.processing=!0,S.value="info",L.value=d("processing");const j=new Set,Y=h.format,B=h.quality,se=[...Y.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),ge=X(Y,B,N[0].webkitRelativePath);T.length=N.length,T.baseZipName=ge,T.type=Y.replace(/image\//,"").toUpperCase()+(/jpe?g|webp/i.test(Y)?" ("+B+")":""),T.threads=W?0:h.threads;const de=Date.now();k("start");let ce,q;if({exception:q,callbackToGenerateFailedZips:ce,callbackToClearConverter:H}=!W&&h.threads>=2?await Pl({files:N,completedFileIdSet:j,ConvStats:T,canceled:r,props:h,imageType:Y,quality:B,outputExt:se,format:Y,message:o,notification:a}):await Zl(N,j,h,r,T),q){let $;switch(q.message){case"worker-load-error":$=d("errMsgWorkerLoadError");break;default:$="unexpected error"}s.error({title:"Error",autoFocus:!0,maskClosable:!1,closable:!1,content:()=>ee("div",[ee("p",$),ee(be,{onClick(){location.reload()}},d("Reload"))])})}if(T.length,T.success===T.length?(S.value="success",L.value=d("completed")):(S.value="error",L.value=r.value?d("aborted"):d("incomplete")),j.size!==N.length){const $=P(U,j);ye.value=()=>{!$||!$.length||ce($)}}m.value=!1,T.processing=!1,v.value=!0,N.length=0,b=Date.now()-de,k("end")}function P(U,N){const j=[],Y=[];let B=0;for(const se of U)N.has(se._id)||(j.push(se),Y.push(se.webkitRelativePath||se.relativePath||se.name),B+=se.size);return Y.length&&(T.unconvertedListText=Y.join(`
`),T.unconvertedFileCount=j.length,T.unconvertedTotalSize=B),j}function X(U,N,j){var de;const Y=new Date;U=U.replace(/^image\//,"").toLowerCase();const B=Z.useFolderNameForZip&&((de=String(j).match(/^\/?([^/]+)\//))==null?void 0:de[1])||"avif2jpg",se=`
    ${Y.getFullYear().toString().substring(2)}
    ${String((Y.getMonth()+1)*100+Y.getDate()).padStart(4,"0")}
    ${String(Y.getHours()*1e4+Y.getMinutes()*100+Y.getSeconds()).padStart(6,"0")}
    -
    ${U+(/jpe?g|webp/i.test(U)?N:"")}
  `.replace(/\s/g,"");return`${B}-${se}`.replace(/\s+/g," ")}async function pe(){const U="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",N=document.createElement("img"),j=Kn(N).then(()=>!0,()=>!1);N.src=U,await j||s.warning({title:"Unsupported",positiveText:"OK",maskClosable:!1,content:d("avifUnsupported")})}function fe(){(!c||p<2||!Promise.any)&&(W=!0),W&&(Ie.value=0)}return(U,N)=>{const j=he,Y=Gt,B=Se,se=Le,ge=ht,de=Zt;return F(),ne(se,{justify:"center"},{default:e(()=>{var ce;return[!t(m)&&((ce=h.input)!=null&&ce.length)?(F(),ne(se,{key:0,justify:"center",align:"center"},{default:e(()=>[n(B,{trigger:"hover",placement:"top","keep-alive-on-hover":!1,duration:0,delay:50},{trigger:e(()=>{var q;return[n(Y,{value:((q=U.input)==null?void 0:q.length)||0,offset:[-12,-5],color:"#99999966"},{default:e(()=>[n(t(be),{onClick:M,round:""},{icon:e(()=>[n(j,{size:"1.5em",color:"#CCCCCC"},{default:e(()=>[n(t(Ua))]),_:1})]),default:e(()=>[z(" "+u(t(d)("convertAgain")),1)]),_:1})]),_:1},8,["value"])]}),default:e(()=>{var q;return[_("div",{innerHTML:t(d)("reconvertTip",(q=h.input)==null?void 0:q.length)},null,8,Ns)]}),_:1})]),_:1})):ve("",!0),n(de,{ref:"processingModal","display-directive":"show",show:t(A),"onUpdate:show":N[2]||(N[2]=q=>je(A)?A.value=q:null),closable:t(v),"close-on-esc":!1,preset:"dialog",onClick:N[3]||(N[3]=q=>{t(a).destroyAll(),t(o).destroyAll()}),onMaskClick:N[4]||(N[4]=q=>{t(a).destroyAll(),t(o).destroyAll()}),onClose:G,onEsc:re,title:t(L),type:t(S),"mask-closable":!1,onAfterLeave:we,onBeforeLeave:N[5]||(N[5]=q=>t(E).cleanup()),class:"processing-dialog"},{default:e(()=>[n(se,{vertical:"",style:{"flex-grow":"1"}},{default:e(()=>[t(w)?(F(),ne(Ms,{key:0,ref_key:"stat",ref:E,processing:t(m),status:t(T),interval:Ds,onAllZipsClicked:N[0]||(N[0]=q=>je(I)?I.value=!0:I=!0),onDemandZipErrors:t(ye),onDemandImage:V},null,8,["processing","status","onDemandZipErrors"])):ve("",!0),n(se,{justify:"end"},{default:e(()=>[t(m)?(F(),ne(t(be),{key:0,disabled:t(r),ref:"cancelbutton",round:"",size:"large",onClick:N[1]||(N[1]=q=>r.value=!0)},{default:e(()=>[n(ge,{show:t(r)&&!t(v),size:"small"},{default:e(()=>[z(u(t(d)("cancel")),1)]),_:1},8,["show"])]),_:1},8,["disabled"])):t(v)?(F(),ne(t(be),{key:1,onClick:G,round:"",size:"large",style:{"font-size":"small","margin-top":"1em"}},{default:e(()=>[z(u(t(d)("close")),1)]),_:1})):ve("",!0)]),_:1})]),_:1})]),_:1},8,["show","closable","title","type"])]}),_:1})}}}),Bs="/avif2jpeg/dist/avif.png",Zs={class:"container-1"},Ws={style:{position:"relative"}},Hs={style:{position:"absolute","font-size":"0.5em",right:"-3.5em",bottom:"-1.5em","white-space":"nowrap"}},Vs={style:{color:"#666666"}},qs=["innerHTML"],Gs={style:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","font-size":"xx-small","white-space":"nowrap"}},Ks=_e({__name:"droptarget",props:{forbidden:{type:Boolean},dropTarget:{}},emits:["drop"],setup(l,{emit:i}){ut(et);const d=l,s=i,o=Oa(),a=y(!1),p=y(0),c=y("");Ne(()=>{h(d.dropTarget||document)});function h(k){document.ondragstart=m=>m.preventDefault(),document.ondragover=m=>m.preventDefault(),k.ondrop=async m=>{var v;if(m.preventDefault(),a.value||d.forbidden)return;a.value=!0,p.value=0,c.value="";let r;try{const A=[...m.dataTransfer.items].map(w=>w.webkitGetAsEntry());o.start(),r=await g(A),o.finish()}catch{r=[...((v=m.dataTransfer)==null?void 0:v.files)??[]],o.error()}a.value&&(a.value=!1,s("drop",r))}}async function g(k,m){m=m||[];for(const r of k)if(r.isFile){const v=await new Promise(A=>r.file(w=>A(w)));Object.defineProperty(v,"webkitRelativePath",{value:r.fullPath}),m.push(v),p.value++}else if(r.isDirectory){c.value=r.fullPath;const v=r.createReader();do{const A=await new Promise(w=>v.readEntries(L=>w(L)));if(!A.length)break;await g(A,m)}while(!0)}return m}return(k,m)=>{const r=he,v=dt,A=Le,w=Se,L=Zt;return F(),ae("div",Zs,[n(w,{to:!1,"display-directive":"show",trigger:"hover",duration:0,delay:0,placement:"bottom-end"},{trigger:e(()=>[n(A,{vertical:"",class:"container-2"},{default:e(()=>[n(A,{align:"center",wrap:!1,class:"container-3"},{default:e(()=>[n(A,{vertical:"",align:"center",wrap:!1,style:{"font-weight":"bold","font-size":"1em","line-height":"90%","white-space":"nowrap"}},{default:e(()=>[m[5]||(m[5]=_("span",null,"Drag & Drop",-1)),_("span",Ws,[m[4]||(m[4]=z(" AVIF Images ")),_("span",Hs,[m[3]||(m[3]=z(" or ")),n(v,{placement:"bottom-end"},{trigger:e(()=>[_("span",Vs,[n(r,{style:{"vertical-align":"middle"}},{default:e(()=>[n(t(Qt))]),_:1}),m[1]||(m[1]=z(" Folders "))])]),default:e(()=>[m[2]||(m[2]=z(" You can drag and drop your local folders "))]),_:1})])])]),_:1}),n(A,null,{default:e(()=>m[6]||(m[6]=[_("img",{src:Bs,class:"avif"},null,-1)])),_:1})]),_:1})]),_:1})]),default:e(()=>[_("h3",{innerHTML:k.$t("droptarget"),style:{"max-width":"200px","text-align":"center","word-break":"keep-all","overflow-wrap":"break-word"}},null,8,qs)]),_:1}),n(L,{show:t(a),"onUpdate:show":m[0]||(m[0]=S=>je(a)?a.value=S:null),closable:!0,preset:"dialog",title:"Parsing dropped items.",type:"info","mask-closable":!1,"negative-text":k.$t("cancel")},{default:e(()=>[n(A,{vertical:"",align:"center"},{default:e(()=>[_("div",Gs,u(t(c)),1),_("div",null,"found "+u(t(p))+" files",1)]),_:1})]),_:1},8,["show","negative-text"])])}}}),Ys=Re(Ks,[["__scopeId","data-v-d17987b7"]]),Qs={class:"container-1"},Xs={class:"container-2"},Js=["innerHTML"],ei=["innerHTML"],ti={style:{"padding-left":"1em"}},ni=["innerHTML"],oi=["accept"],ai=_e({__name:"file-selector",props:xt({target:{},userExtensions:{},forbidden:{type:Boolean}},{expanded:{type:Boolean,required:!1},expandedModifiers:{},disableNotifyingFolderSelect:{type:Boolean},disableNotifyingFolderSelectModifiers:{}}),emits:xt(["input","click","cancel","on-change-accept","update:target","update:userExtensions"],["update:expanded","update:disableNotifyingFolderSelect"]),setup(l,{emit:i}){const d=$t(),{t:s}=qe(),o=ut(et),a=["avif_only","all_images","all_files","edit_type"],p={avif_only:"AVIF",all_images:"IMGS",all_files:"ALL",edit_type:"EDIT"},c=l,h=i,g=y(0),k=y(!1),m=y(!1),r=ze(()=>re(L.value)),v=ze(()=>S.value.split(",").every(P=>/^\s*(\.[\w\-]+)*\s*$/.test(P))?"success":"error"),A=ze(()=>!c.forbidden&&!m.value),w=Ee(l,"expanded"),L=ze({get:()=>a.indexOf(c.target)>=0?c.target:a[0],set:x=>{h("update:target",x)}}),S=ze({get:()=>c.userExtensions,set:x=>{h("update:userExtensions",x)}}),T=Ee(l,"disableNotifyingFolderSelect"),E=y(null),W=y(null),H=y(V());Ae(L,x=>{h("on-change-accept",r.value)}),Ne(()=>{});async function b(x){if(h("click"),x===W.value&&!T.value){let P=!1;if(await new Promise(X=>{d.info({title:s("loadfolderNotifyingTitle"),positiveText:s("Continue"),negativeText:s("Cancel"),onAfterLeave:()=>X(P),onPositiveClick:()=>P=!0,content:()=>ee("div",[ee("p",{},s("loadfolderNotifyingMessageTerm1")),ee("div",[ee(kn,{width:250,style:{border:"3px solid gray"},src:"/avif2jpeg/dist//notification-folder.png"})]),ee("p",{},s("loadfolderNotifyingMessageTerm2")),ee("p",[ee(Sn,{onUpdateChecked:pe=>T.value=pe,checked:T.value},()=>s("checkboxTextDontShowThis"))])])})}),!P){T.value=!1,h("cancel");return}}x.click()}function I(){h("cancel")}function G(x){const X=[...x.target.files];E.value.value="",W.value.value="",ye(X)}function V(){return"webkitdirectory"in document.createElement("input")}function re(x){switch(x){case"avif_only":return".avif, .webp";case"all_images":return".jpg, .jpeg, .jfif, .pjpeg, .pjp, .gif, .png, .webp, .avif, .bmp, .apng, .ico";case"edit_type":return S.value;case"all_files":default:return".*"}}async function M(x){const P=String(r.value).toLowerCase().replace(/\s+/g,"");if(P&&r.value!==".*"){const X=P.split(",");x=x.filter(pe=>X.includes(pe.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),x.length||(await new Promise(pe=>{d.error({title:"Images Not Found",positiveText:"OK",onAfterLeave:pe,content:()=>ee("div",[ee(Ht,{description:"NO IMAGES"}),`${s("noimage")}`,ee("br"),r.value])})}),I())}return x}async function ye(x){m.value=!0,x=await M(x),g.value=x.length,x.length>0&&h("input",we(x)),m.value=!1}let ue=0;function we(x){const P=[];for(const X of x)X.hasOwnProperty("_id")||Object.defineProperty(X,"_id",{value:ue++}),P.push(X);return P}return(x,P)=>{const X=he,pe=be,fe=Se,U=Le,N=Na,j=Ra,Y=Tn,B=Ma,se=dt,ge=Pa,de=Yt,ce=Kt;return F(),ae(Ce,null,[_("div",Qs,[_("div",Xs,[n(U,{vertical:"",align:"center",justify:"center",inline:""},{default:e(()=>[n(U,{align:"center",justify:"space-around",class:"main-buttons"},{default:e(()=>[n(U,{vertical:"",align:"stretch",justify:"center"},{default:e(()=>[n(fe,{to:!1,"display-directive":"show",show:t(o).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:t(o).LANDSCAPE.value?"right":"top",duration:0,delay:0,"z-index":10},{trigger:e(()=>[n(pe,{disabled:!t(A),size:"large",onClick:P[0]||(P[0]=q=>b(t(E))),round:"",style:{width:"100%","background-color":"white","font-size":"large"}},{icon:e(()=>[n(X,{size:"large",color:"gray"},{default:e(()=>[n(t(Ln))]),_:1})]),default:e(()=>[z(" "+u(x.$t("loadbutton")),1)]),_:1},8,["disabled"])]),default:e(()=>[_("div",{innerHTML:x.$t("loadbuttontooltip")},null,8,Js)]),_:1},8,["show","placement"]),!t(o).IS_SP&&t(H)||t(o).SSR?(F(),ae(Ce,{key:0},[n(U,{align:"center",justify:"center",style:{color:"gray",margin:"0em"}},{default:e(()=>[z(u(x.$t("or")),1)]),_:1}),n(fe,{to:!1,"display-directive":"show",trigger:"hover",placement:"left","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:t(o).showTooltipsBeforeMounted.value},{trigger:e(()=>[n(pe,{disabled:!t(A),size:"large",onClick:P[1]||(P[1]=q=>b(t(W))),round:"",style:{width:"100%","background-color":"white","font-size":"large"}},{icon:e(()=>[n(X,{size:"large",color:"gray"},{default:e(()=>[n(t(Qt))]),_:1})]),default:e(()=>[z(" "+u(x.$t("loadfolderbutton")),1)]),_:1},8,["disabled"])]),default:e(()=>[_("div",{innerHTML:x.$t("loadfoldertooltip")},null,8,ei)]),_:1},8,["show"])],64)):ve("",!0)]),_:1}),t(o).IS_SP?ve("",!0):(F(),ne(Ys,{key:0,onDrop:ye,forbidden:!t(A),class:"drop-target"},null,8,["forbidden"]))]),_:1}),_("div",{class:Je({"expand-ext-list-container":w.value}),style:{"margin-top":"1em"}},[n(ce,{"display-directive":"show","expanded-names":w.value?["extItem"]:"","on-update:expanded-names":q=>{w.value=!!(""+q)},class:Je({"expand-ext-list":w.value})},{"header-extra":e(()=>[n(N,{type:"success",round:"",size:"tiny",style:{"margin-left":"0.2em","font-size":"8px",opacity:"0.7"}},{default:e(()=>[z(u(p[t(L)]),1)]),_:1})]),default:e(()=>[n(de,{title:x.$t("fileTypeRadioTitle"),name:"extItem"},{default:e(()=>[n(ge,{value:t(L),"onUpdate:value":P[5]||(P[5]=q=>je(L)?L.value=q:null),name:"filetyperadios",size:"small"},{default:e(()=>[n(U,{vertical:"",style:{"padding-left":"1em"}},{default:e(()=>[(F(),ae(Ce,null,at(a,q=>n(fe,{key:q,trigger:"hover","keep-alive-on-hover":!1,"z-index":5,placement:"left",style:{"max-width":"200px"},duration:0,delay:0},{trigger:e(()=>[n(j,{value:q},{default:e(()=>[z(u(x.$t("fileTypeRadioOptions."+q)),1)]),_:2},1032,["value"])]),default:e(()=>[z(" "+u(re(q).replace(/,/g,", ")),1)]),_:2},1024)),64)),n(fe,{trigger:"hover","keep-alive-on-hover":!1,placement:"bottom-start",show:t(k),duration:0,delay:0},{trigger:e(()=>[_("div",ti,[n(se,{trigger:"manual",placement:"right-end",show:t(L)==="edit_type"&&t(v)!=="success"&&!!t(k)},{trigger:e(()=>[n(Y,{value:t(S),"onUpdate:value":P[2]||(P[2]=q=>je(S)?S.value=q:null),status:t(v),disabled:t(L)!=="edit_type",onFocus:P[3]||(P[3]=q=>k.value=!0),onBlur:P[4]||(P[4]=q=>k.value=void 0),clearable:!0,size:"small",placeholder:".jpg, .gif, .png",spellcheck:"false"},null,8,["value","status","disabled"])]),default:e(()=>[n(B,{type:"error","show-icon":!0,title:"Validation error"},{default:e(()=>P[6]||(P[6]=[z(" Please correct the extension list."),_("br",null,null,-1),_("ul",null,[_("li",null,"Each extension must begin with a period. "),_("li",null,"Separate each extension with a comma. "),_("li",null,"Use alphameric characters.")],-1)])),_:1})]),_:1},8,["show"])])]),default:e(()=>[_("span",{innerHTML:x.$t("editAcceptTypes")},null,8,ni)]),_:1},8,["show"])]),_:1})]),_:1},8,["value"])]),_:1},8,["title"])]),_:1},8,["expanded-names","on-update:expanded-names","class"])],2)]),_:1})])]),_("input",{ref_key:"fileinput",ref:E,onInput:G,onCancel:I,type:"file",multiple:"",accept:t(r),style:{display:"none"}},null,40,oi),_("input",{ref_key:"folderinput",ref:W,webkitdirectory:"",directory:"",onInput:G,onCancel:I,type:"file",style:{display:"none"}},null,544)],64)}}}),li=Re(ai,[["__scopeId","data-v-cdbdb0a5"]]),si={style:{"white-space":"nowrap"}},ii=_e({__name:"settings-output",props:{quality:{},format:{}},emits:["update:format","update:quality"],setup(l,{emit:i}){const d=l,s=i,{t:o}=qe(),a=ut(et),p=y([]),c=["image/jpeg","image/png","image/gif","image/bmp","image/avif","image/webp"],h=ze({get:()=>d.format,set:A=>{A=r(A),s("update:format",A)}}),g=ze({get:()=>d.quality,set:A=>{s("update:quality",A)}}),k=ze(()=>/png|bmp/i.test(h.value)),m=y(null);Ne(()=>{v()});function r(A){return p.value.indexOf(A)<0&&(A=p.value[0]),A}function v(){for(const A of c)m.value.toDataURL(A).indexOf(A)>=0&&p.value.push(A);p.value.length===0&&p.value.push(c[0])}return(A,w)=>{const L=he,S=$n,T=Le,E=Se,W=qt,H=En;return F(),ae(Ce,null,[n(T,{justify:"center",class:"body"},{default:e(()=>[n(T,{vertical:""},{default:e(()=>[n(E,{to:!1,"display-directive":"show",show:t(a).showTooltipsBeforeMounted.value,trigger:"hover",placement:t(a).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:e(()=>[n(T,{align:"center",wrap:!1},{default:e(()=>[n(L,null,{default:e(()=>[n(t(Ln))]),_:1}),z(u(t(o)("settings.imageType"))+": ",1),n(S,{value:h.value,"onUpdate:value":w[0]||(w[0]=b=>h.value=b),options:p.value.map(b=>({value:b,label:b})),"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),_:1})]),default:e(()=>[z(" "+u(t(o)("settings.imageTypeTooltip")),1)]),_:1},8,["show","placement"]),n(E,{to:!1,"display-directive":"show",show:t(a).showTooltipsBeforeMounted.value,trigger:"hover",placement:t(a).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:e(()=>[n(T,{align:"center"},{default:e(()=>[n(T,{align:"start",wrap:!1},{default:e(()=>[n(L,null,{default:e(()=>[n(t(Cn))]),_:1}),_("span",si,u(t(o)("settings.quality"))+":",1),n(T,{align:"center",justify:"space-between"},{default:e(()=>[n(W,{tooltip:!1,value:g.value,"onUpdate:value":w[1]||(w[1]=b=>g.value=b),step:1,style:{width:"120px"},disabled:k.value},null,8,["value","disabled"]),n(H,{onBlur:w[2]||(w[2]=b=>g.value??(g.value=0)),value:g.value,"onUpdate:value":w[3]||(w[3]=b=>g.value=b),step:"1",min:"0",max:"100",disabled:k.value,style:{width:"90px"},size:"small"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:e(()=>[z(" "+u(t(o)("settings.qualitytooltip")),1)]),_:1},8,["show","placement"])]),_:1})]),_:1}),_("canvas",{ref_key:"canvas",ref:m,width:"1",height:"1",style:{display:"none"}},null,512)],64)}}}),ri=Re(ii,[["__scopeId","data-v-d5c6e189"]]),ui={style:{width:"4em","text-align":"left"}},di={style:{width:"4em","text-align":"left"}},Nt=100,gn=2e3,mn=4096,vn=4096,ci=100,pi=100,fi=_e({__name:"settings-adv",props:{expanded:{type:Boolean,required:!1},expandedModifiers:{},multithread:{type:Boolean,required:!0},multithreadModifiers:{},threadCount:{required:!0},threadCountModifiers:{},maxZipSize:{required:!0},maxZipSizeModifiers:{},retainExt:{type:Boolean,required:!0},retainExtModifiers:{},useFolderNameForZip:{type:Boolean,required:!0},useFolderNameForZipModifiers:{},shrinkImage:{type:Boolean,required:!0},shrinkImageModifiers:{},maxWidth:{required:!0},maxWidthModifiers:{},maxHeight:{required:!0},maxHeightModifiers:{}},emits:["update:expanded","update:multithread","update:threadCount","update:maxZipSize","update:retainExt","update:useFolderNameForZip","update:shrinkImage","update:maxWidth","update:maxHeight"],setup(l){const i={trigger:"hover",placement:"left",keepAliveOnHover:!1,duration:0,delay:0,style:"max-width: 20vw;"},d=Ee(l,"expanded"),s=Ee(l,"multithread"),o=Ee(l,"threadCount"),a=Ee(l,"maxZipSize"),p=Ee(l,"retainExt"),c=Ee(l,"useFolderNameForZip"),h=Ee(l,"shrinkImage"),g=Ee(l,"maxWidth"),k=Ee(l,"maxHeight");Ae(Ie,r=>{r>1||(s.value=!1),o.value>r&&(o.value=r)},{immediate:!0});const m=ze(()=>s.value&&Ie.value>1);return Ne(()=>{Ie.value>1&&typeof o.value>"u"&&(o.value=Math.max(Ie.value,2))}),(r,v)=>{const A=he,w=be,L=Ba,S=Le,T=qt,E=En,W=Yt,H=Kt;return F(),ne(S,{justify:"center"},{default:e(()=>[n(H,{"display-directive":"show","default-expanded-names":d.value?["collapitem"]:"","on-update:expanded-names":b=>d.value=!!String(b),"trigger-areas":["arrow","main"],class:Je(["settings-body",d.value?"expand-adv-settings":""])},Da({arrow:e(()=>[n(A,{style:ie(d.value&&{top:"8px"})},{default:e(()=>[n(t(Ha))]),_:1},8,["style"]),n(A,null,{default:e(()=>[n(t(Va))]),_:1})]),default:e(()=>[n(W,{title:r.$t("settings.advancedSettings"),name:"collapitem"},{default:e(()=>[n(S,{vertical:"",style:{"padding-left":"2em"}},{default:e(()=>[n(t(Se),ft(gt(i)),{trigger:e(()=>[n(S,{vertical:""},{default:e(()=>[n(S,{wrap:!1,align:"center"},{default:e(()=>[n(w,{text:"",disabled:!t(Ie),style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:v[0]||(v[0]=b=>s.value=!s.value)},{icon:e(()=>[n(A,null,{default:e(()=>[n(t(ja))]),_:1})]),default:e(()=>[z(" "+u(r.$t("settings.enableMultiThreads")),1)]),_:1},8,["disabled"]),n(L,{value:s.value,"onUpdate:value":v[1]||(v[1]=b=>s.value=b),disabled:!t(Ie),size:"small"},null,8,["value","disabled"])]),_:1}),n(S,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:e(()=>[n(T,{value:o.value,"onUpdate:value":v[2]||(v[2]=b=>o.value=b),disabled:!t(Ie)||!s.value,step:1,min:2,max:t(Ie),style:{width:"120px"}},null,8,["value","disabled","max"]),n(E,{onBlur:v[3]||(v[3]=b=>o.value??(o.value=2)),size:"tiny",value:o.value,"onUpdate:value":v[4]||(v[4]=b=>o.value=b),disabled:!t(Ie)||!s.value,step:1,min:2,max:t(Ie),style:{width:"10em"}},{suffix:e(()=>[z(u(r.$t("threads",o.value)),1)]),_:1},8,["value","disabled","max"])]),_:1}),z(" "+u(t(Ie)),1)]),_:1})]),default:e(()=>[z(" "+u(r.$t("settings.multiThreadsTooltip")),1)]),_:1},16),n(t(Se),ft(gt(i)),{trigger:e(()=>[n(S,{vertical:""},{default:e(()=>[n(S,{wrap:!1,align:"center"},{default:e(()=>[n(w,{text:"",focusable:!1,style:{"white-space":"nowrap","font-size":"smaller"}},{icon:e(()=>[n(A,{style:{"vertical-align":"middle"}},{default:e(()=>[n(t(Za))]),_:1})]),default:e(()=>[z(" "+u(r.$t("settings.maxZipFileSize"))+": ",1)]),_:1})]),_:1}),n(S,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:e(()=>[n(T,{tooltip:!1,value:a.value,"onUpdate:value":v[5]||(v[5]=b=>a.value=b),step:1,min:Nt,max:gn,style:{width:"120px"}},null,8,["value"]),n(E,{onBlur:v[6]||(v[6]=b=>a.value??(a.value=Nt)),size:"tiny",value:a.value,"onUpdate:value":v[7]||(v[7]=b=>a.value=b),step:"1",min:Nt,max:gn,style:{width:"10em"}},{suffix:e(()=>v[20]||(v[20]=[z("(MB)")])),_:1},8,["value"])]),_:1})]),_:1})]),default:e(()=>[z(" "+u(r.$t("settings.maxZipFileSizeTooltip")),1)]),_:1},16),n(t(Se),ft(gt(i)),{trigger:e(()=>[n(S,{wrap:!1,align:"center"},{default:e(()=>[n(w,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:v[8]||(v[8]=b=>c.value=!c.value)},{icon:e(()=>[n(A,null,{default:e(()=>[n(t(Qt))]),_:1})]),default:e(()=>[z(" "+u(r.$t("settings.useFolderNameForZip")),1)]),_:1}),n(L,{value:c.value,"onUpdate:value":v[9]||(v[9]=b=>c.value=b),size:"small"},null,8,["value"])]),_:1})]),default:e(()=>[z(" "+u(r.$t("settings.useFolderNameForZipTooltip")),1)]),_:1},16),n(t(Se),ft(gt(i)),{trigger:e(()=>[n(S,{wrap:!1,align:"center"},{default:e(()=>[n(w,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:v[10]||(v[10]=b=>p.value=!p.value)},{icon:e(()=>[n(A,null,{default:e(()=>[n(t(In))]),_:1})]),default:e(()=>[z(" "+u(r.$t("settings.retainOriginalExtension")),1)]),_:1}),n(L,{value:p.value,"onUpdate:value":v[11]||(v[11]=b=>p.value=b),size:"small"},null,8,["value"])]),_:1})]),default:e(()=>[z(" "+u(r.$t("settings.retainExtTooltip")),1)]),_:1},16),n(t(Se),ft(gt(i)),{trigger:e(()=>[n(S,{vertical:""},{default:e(()=>[n(S,{wrap:!1,align:"center"},{default:e(()=>[n(w,{disabled:!m.value,text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:v[12]||(v[12]=b=>h.value=!h.value)},{icon:e(()=>[n(A,null,{default:e(()=>[n(t(Wa))]),_:1})]),default:e(()=>[z(" "+u(r.$t("settings.shrinkImage")),1)]),_:1},8,["disabled"]),n(L,{disabled:!m.value,value:h.value,"onUpdate:value":v[13]||(v[13]=b=>h.value=b),size:"small"},null,8,["disabled","value"])]),_:1}),n(S,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:e(()=>[n(T,{value:g.value,"onUpdate:value":v[14]||(v[14]=b=>g.value=b),disabled:!h.value||!m.value,step:1,min:ci,max:mn,style:{width:"120px"}},null,8,["value","disabled"]),n(E,{size:"tiny",onBlur:v[15]||(v[15]=b=>g.value??(g.value=8)),value:g.value,"onUpdate:value":v[16]||(v[16]=b=>g.value=b),disabled:!h.value||!m.value,step:1,min:8,max:mn*4,style:{"max-width":"15em","text-align":"right"}},{prefix:e(()=>[_("span",ui,u(r.$t("width")),1)]),suffix:e(()=>v[21]||(v[21]=[z("px")])),_:1},8,["value","disabled","max"])]),_:1}),n(S,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:e(()=>[n(T,{value:k.value,"onUpdate:value":v[17]||(v[17]=b=>k.value=b),disabled:!h.value||!m.value,step:1,min:pi,max:vn,style:{width:"120px"}},null,8,["value","disabled"]),n(E,{size:"tiny",onBlur:v[18]||(v[18]=b=>k.value??(k.value=8)),value:k.value,"onUpdate:value":v[19]||(v[19]=b=>k.value=b),disabled:!h.value||!m.value,step:1,min:8,max:vn*4,style:{"max-width":"15em","text-align":"right"}},{prefix:e(()=>[_("span",di,u(r.$t("height")),1)]),suffix:e(()=>v[22]||(v[22]=[z("px")])),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:e(()=>[z(" "+u(r.$t("settings.shrinkImageTooltip")),1)]),_:1},16)]),_:1})]),_:1},8,["title"])]),_:2},[d.value?{name:"header-extra",fn:e(()=>[n(t(Se),{"keep-alive-on-hover":!1,duration:0,delay:0},{trigger:e(()=>[n(w,{onClick:t(rl),size:"tiny",style:{"font-size":"xx-small"}},{default:e(()=>[z(u(r.$t("reset")),1)]),_:1},8,["onClick"])]),default:e(()=>[z(" "+u(r.$t("settings.resetButtonTooltip")),1)]),_:1})]),key:"0"}:void 0]),1032,["default-expanded-names","on-update:expanded-names","class"])]),_:1})}}}),gi=Re(fi,[["__scopeId","data-v-74c6f0f9"]]),mi={},vi={style:{color:"gray","padding-left":"20px"}},hi=["innerHTML"];function _i(l,i){const d=Wt,s=Le;return F(),ne(s,{vertical:"",justify:"end"},{default:e(()=>[n(d,{style:{margin:"0px"}}),n(s,{justify:"center"},{default:e(()=>[_("ul",vi,[(F(!0),ae(Ce,null,at(l.$tm("descriptions"),o=>(F(),ae("li",{key:o,style:{"text-align":"left"},innerHTML:o},null,8,hi))),128))])]),_:1})]),_:1})}const yi=Re(mi,[["render",_i]]),wi="modulepreload",bi=function(l){return"/avif2jpeg/dist/"+l},hn={},me=function(i,d,s){let o=Promise.resolve();if(d&&d.length>0){document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),c=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));o=Promise.allSettled(d.map(h=>{if(h=bi(h),h in hn)return;hn[h]=!0;const g=h.endsWith(".css"),k=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${k}`))return;const m=document.createElement("link");if(m.rel=g?"stylesheet":wi,g||(m.as="script"),m.crossOrigin="",m.href=h,c&&m.setAttribute("nonce",c),document.head.appendChild(m),g)return new Promise((r,v)=>{m.addEventListener("load",r),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(p){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=p,window.dispatchEvent(c),!c.defaultPrevented)throw p}return o.then(p=>{for(const c of p||[])c.status==="rejected"&&a(c.reason);return i().catch(a)})},Yn="English",Qn="🇬🇧",Xn='AVIF to JPEG "Offline" Batch Converter',Jn="It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",eo="Drag & Drop AVIF Images to Convert",to=["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data is sent to any server</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.'],no="Select your language",oo="Choose Target File Extentions",ao={avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types",edit_type:"Edit File Extension List"},lo="Input a list of comma separated file extentions to load.<br>e.g.) .jpg,.gif,.png",so="Load Images",io="Select your images from a dialog window.<br>*Multiple selection allowed.",ro="Load a Whole Folder",uo=`Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>*It will show "Upload" button, but it actually doesn't upload anything to any server.`,co="Converting images",po="Aborted",fo="Some files failed to convert",go="Completed",mo="Currently Busy",vo="No files with the extentions were found.",ho="Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",_o="Cancel",yo="Save",wo="Close",bo="Open",ko="Re-convert",zo="Convert previous selected {n} @:files again",Ao="File | Files",To="thread | threads",xo="You have not saved the converted images yet.",Io="Data have not been saved",So="Open Source",Co="Open the converted image",Lo="Copied to clipboard",$o="The converted image was copied to your clipboard as DataURL.",Eo="Copy the converted image as DataURL",Fo="Convert Again",Uo={expandLogTooltip:"Displaying the entire log may severely reduce conversion speed.",expandLog:"Show entire log",autoScroll:"Auto scroll",showOnlyErrors:"Show only errors",log:"Log",outInRate:"Out / In Ratio",elapsedTime:"Elapsed Time",multiThreading:"Multi-Threading",outputSettings:"Output Settings",totalSize:"Total Size",totalFiles:"Number of Files",confirmDownloadMessage:"It will start to download {0} zip files.",inputSize:"Input Size",outputSize:"Output Size",filterSuccess:"Hide completed item",progressErrors:"Failed items",progressStarted:"Started Items",progressTotal:"Total number of files",zippingProgress:"Zipping progress",zipped:"ZIPPED",openFailedList:"Open failed file list",zipFailedList:"Pack failed files into Zips",table:{index:"index",status:"status",core:"thread",details:"file"},saveFailedList:"Save failed file list",done:"done",convertedZips:"successfully completed ZIP",progressSuccess:"Completed Files",downloadConvertedImage:"Download Converted Image",failureZippingFailedFiles:"Failure while zipping the failed files.",browseConvertedImages:"Browse converted images",index:"Index",Original:"Original",Converted:"Converted",saveAllZipsTooltip:"Save all ZIP files",Shrinked:"Shrinked",Shrinking:"Shrinking",saveAll:"Save All",progressRetries:"Retrying files",success:"success",started:"started",total:"total"},Oo={maxZipFileSize:"Max zip file size",retainExtTooltip:"New extension will be appended to original extension",retainOriginalExtension:"Keep Original File Extension",qualitytooltip:"Set image quality for output",quality:"Image Quality",maxZipFileSizeTooltip:"Set smaller value if memory problems occur.",ignoreExtTooltip:'Try to load files that don"t have image file extension',ignoreFileExtensions:"Load All File Types",imageTypeTooltip:"Choose image format for output",imageType:"Image Type",advancedSettings:"Advanced Settings",enableMultiThreads:"Enable multi-threading",resetButtonTooltip:"Restore all settings to default.",multiThreadsTooltip:"Convert images in multi-threaded",shrinkImageTooltip:"If the image dimensions are larger than the specified value, shrink the image to that value",shrinkImage:"Shrink images that exceed the following dimensions",useFolderNameForZip:"Use dropped folder name for the zip file",useFolderNameForZipTooltip:"If a folder is dropped or selected, its name is used as the name of the output ZIP file"},Po="Disabled",Mo="Download",No="Reset",Ro="Back",Do="Failed",jo="Success",Bo="Previous version",Zo=`
Height`,Wo="Width",Ho="Don't show this message again",Vo="About the warning when selecting a folder",qo="OK",Go={},Ko="You must press the “Upload” button here to load all the images in the folder, but the data loaded by this application is never actually uploaded to the server.",Yo="Continue",Qo="Cancel",Xo="When you select a folder instead of a file as input on a website, major web browsers will display a warning like the image below.",Jo="This page may be an outdated version. Please reload the page.",ea="Reload",ta='If the conversion process frequently fails and an “Out of Memory” message appears, try reducing or disabling the number of "multi-threads" in the "Advanced Settings".',na="Next",oa="Previous",aa="or",la={lang:Yn,flags:Qn,title:Xn,metaDescription:Jn,droptarget:eo,descriptions:to,selectLanguage:no,fileTypeRadioTitle:oo,fileTypeRadioOptions:ao,editAcceptTypes:lo,loadbutton:so,loadbuttontooltip:io,loadfolderbutton:ro,loadfoldertooltip:uo,processing:co,aborted:po,incomplete:fo,completed:go,interfered:mo,noimage:vo,avifUnsupported:ho,cancel:_o,save:yo,close:wo,open:bo,reconvert:ko,reconvertTip:zo,files:Ao,threads:To,confirmCloseDialog:xo,confirmCloseDialogTitle:Io,githubOpenSource:So,convertedImageUrlTooltip:Co,copiedDataURLDialogTitle:Lo,copiedDataURLMessage:$o,convertedImageDataUrlTooltip:Eo,convertAgain:Fo,status:Uo,settings:Oo,disabled:Po,Download:Mo,reset:No,back:Ro,failed:Do,success:jo,previousVersion:Bo,height:Zo,width:Wo,checkboxTextDontShowThis:Ho,loadfolderNotifyingTitle:Vo,OK:qo,loadfolderNotifyingMessage:Go,loadfolderNotifyingMessageTerm2:Ko,Continue:Yo,Cancel:Qo,loadfolderNotifyingMessageTerm1:Xo,errMsgWorkerLoadError:Jo,Reload:ea,annotationOutOfMemory:ta,Next:na,Prev:oa,or:aa},ki=Object.freeze(Object.defineProperty({__proto__:null,Cancel:Qo,Continue:Yo,Download:Mo,Next:na,OK:qo,Prev:oa,Reload:ea,aborted:po,annotationOutOfMemory:ta,avifUnsupported:ho,back:Ro,cancel:_o,checkboxTextDontShowThis:Ho,close:wo,completed:go,confirmCloseDialog:xo,confirmCloseDialogTitle:Io,convertAgain:Fo,convertedImageDataUrlTooltip:Eo,convertedImageUrlTooltip:Co,copiedDataURLDialogTitle:Lo,copiedDataURLMessage:$o,default:la,descriptions:to,disabled:Po,droptarget:eo,editAcceptTypes:lo,errMsgWorkerLoadError:Jo,failed:Do,fileTypeRadioOptions:ao,fileTypeRadioTitle:oo,files:Ao,flags:Qn,githubOpenSource:So,height:Zo,incomplete:fo,interfered:mo,lang:Yn,loadbutton:so,loadbuttontooltip:io,loadfolderNotifyingMessage:Go,loadfolderNotifyingMessageTerm1:Xo,loadfolderNotifyingMessageTerm2:Ko,loadfolderNotifyingTitle:Vo,loadfolderbutton:ro,loadfoldertooltip:uo,metaDescription:Jn,noimage:vo,open:bo,or:aa,previousVersion:Bo,processing:co,reconvert:ko,reconvertTip:zo,reset:No,save:yo,selectLanguage:no,settings:Oo,status:Uo,success:jo,threads:To,title:Xn,width:Wo},Symbol.toStringTag,{value:"Module"})),zi="Arabic",Ai="German",Ti="English",xi="Spanish",Ii="Finnish",Si="French",Ci="Hindi",Li="Indonesian",$i="Italian",Ei="Japanese",Fi="Korean",Ui="Dutch",Oi="Polish",Pi="Portuguese",Mi="Russian",Ni="Turkish",Ri="Ukrainian",Di="Chinese",ji={ar:zi,de:Ai,en:Ti,es:xi,fi:Ii,fr:Si,hi:Ci,id:Li,it:$i,ja:Ei,ko:Fi,nl:Ui,pl:Oi,pt:Pi,ru:Mi,tr:Ni,uk:Ri,"zh-hant":"Chinese(hant)",zh:Di},St=[],sa={en:la},en={},_n=Object.assign({"./locales/ar.json":()=>me(()=>import("./ar-DfD8QPXL.js"),[]),"./locales/de.json":()=>me(()=>import("./de-BU09tukW.js"),[]),"./locales/en.json":()=>me(()=>Promise.resolve().then(()=>ki),void 0),"./locales/es.json":()=>me(()=>import("./es-BbqMQw-k.js"),[]),"./locales/fi.json":()=>me(()=>import("./fi-Bg4Q0A4Y.js"),[]),"./locales/fr.json":()=>me(()=>import("./fr-Bj1NzDiJ.js"),[]),"./locales/hi.json":()=>me(()=>import("./hi-CF5KUDAg.js"),[]),"./locales/id.json":()=>me(()=>import("./id-p3eQd0LU.js"),[]),"./locales/it.json":()=>me(()=>import("./it-qZHoBiXd.js"),[]),"./locales/ja.json":()=>me(()=>import("./ja-B2tAYRR8.js"),[]),"./locales/ko.json":()=>me(()=>import("./ko-BdoX2AzL.js"),[]),"./locales/nl.json":()=>me(()=>import("./nl-C3via9Iy.js"),[]),"./locales/pl.json":()=>me(()=>import("./pl-C-ez-M2H.js"),[]),"./locales/pt.json":()=>me(()=>import("./pt-yiXjlNFY.js"),[]),"./locales/ru.json":()=>me(()=>import("./ru-yy23iKqe.js"),[]),"./locales/tr.json":()=>me(()=>import("./tr-j9QJDiHr.js"),[]),"./locales/uk.json":()=>me(()=>import("./uk-WUNbmPD6.js"),[]),"./locales/zh-hant.json":()=>me(()=>import("./zh-hant-B4Spt8wj.js"),[]),"./locales/zh.json":()=>me(()=>import("./zh-BmlsH6Is.js"),[])});var yn;for(const l in _n){const i=(yn=l.match(/\/([a-z]{2}(?:-[a-z]+)?)\.json$/i))==null?void 0:yn[1];i&&(St.push(i),!(i in sa)&&(en[i]=_n[l]))}let Bt=Zi();Bt in en||(Bt="en");const Ct=qa({legacy:!1,globalInjection:!0,locale:Bt,fallbackLocale:"en",messages:sa,warnHtmlMessage:!1,missingWarn:!1,fallbackWarn:!1});async function Bi(l){if(Ct.global.availableLocales.indexOf(l)>=0)return;const i=await en[l]();Ct.global.setLocaleMessage(l,i),await st()}function Zi(){const l=location.pathname;return String(l.match(/[^/]+(?=\/?$)/)||"").toLowerCase()}const Wi=["innerHTML"],Hi=_e({__name:"switch-lang",emits:["lang-ready","lang-change"],async setup(l,{emit:i}){let d,s;const o=ut(et),a=bn(),{locale:p,t:c}=qe(),h=i,g=Object.entries(ji).map(([w,L])=>({label:L,value:w}));g.sort((w,L)=>{const S=w.label,T=L.label;return S>T?1:S<T?-1:0}),Ne(()=>{a.afterEach((w,L,S)=>{m(),o.switchToolTipVisibility()})}),Ga(async()=>{}),[d,s]=Ka(()=>m()),await d,s();async function k(w){(w!==p.value||Ct.global.availableLocales.indexOf(w)===-1)&&(h("lang-change",w),await Bi(w),p.value=w,document.title=c("title"),await st()),h("lang-ready",w)}async function m(){const w=a.currentRoute.value.path||"",L=String(w.match(new RegExp("(?<=^\\/)[^/]+"))||"");L&&St.includes(L)?(await k(L),p.value=L):await r()}async function r(){const w=v().toLowerCase(),L=w.split(/[-_]/)[0];if(St.includes(L)){let S=L;if(L==="zh")switch(w){case"zh-hant":case"zh-mo":case"zh-hk":case"zh-tw":S="zh-hant"}await k(S)}}function v(){const w=window.navigator;return w.language||w.userLanguage||w.browserLanguage}function A(w){a.push("/"+w+"/")}return(w,L)=>{const S=he,T=$n,E=Se;return F(),ne(E,{to:!1,"display-directive":"show",show:t(o).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:t(o).LANDSCAPE.value?"left":"bottom",duration:0,delay:50},{trigger:e(()=>[n(T,{ref:"langselect",size:"tiny",style:{width:"100%"},"consistent-menu-width":!1,options:t(g),"_v-model:value":"locale",value:t(p),"onUpdate:value":A},{arrow:e(()=>[n(S,null,{default:e(()=>[n(t(Ya))]),_:1})]),_:1},8,["options","value"])]),default:e(()=>[_("div",{innerHTML:w.$t("selectLanguage")},null,8,Wi)]),_:1},8,["show","placement"])}}}),et=Symbol("global variables"),Vi=_e({__name:"Avif2Jpeg",emits:["ready"],setup(l,{emit:i}){const{t:d,locale:s}=qe(),o=i,a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),p=y(null);y(0);let c=y(void 0);const h=y(!0),g=y(!1),k=y(!1),m=y(!1),r=y(!1);Ja(et,{showTooltipsBeforeMounted:c,LANDSCAPE:h,IS_SP:a,switchToolTipVisibility:T,SSR:!1}),Ne(()=>{E(),window.addEventListener("resize",E),T(),setTimeout(()=>k.value=!0,3e3)}),zn(()=>{window.removeEventListener("resize",E)});const v=200;let A=0,w=!0;function L(){m.value=!1,A=Date.now()}function S(){const b=w?0:Math.max(0,v-(Date.now()-A));w=!1,setTimeout(()=>m.value=!0,b),o("ready")}async function T(){}function E(){const b=document.body.clientWidth,I=document.body.clientHeight;h.value=b*.75>I||b>900}function W(b){p.value=b}function H(b){r.value=b}return(b,I)=>{const G=Le,V=he,re=dt;return F(),ne(G,{vertical:"",align:"stretch",class:"avif2jpeg"},{default:e(()=>[n(yl,null,{"lang-switch":e(()=>[(F(),ne(Qa,null,{default:e(()=>[n(Hi,{onLangChange:L,onLangReady:S})]),_:1}))]),_:1}),n(He,{name:"fade"},{default:e(()=>[t(m)?(F(),ne(G,{key:0,vertical:"",align:"stretch",justify:"space-between",style:{height:"100%"}},{default:e(()=>[n(G,{justify:"space-around",vertical:"",style:{height:"100%"}},{default:e(()=>[n(kl),n(G,{justify:"center"},{default:e(()=>[n(li,{"_v-model:expanded":"UserSettings.expandExtButtons",target:t(Z).acceptTypeValue,"onUpdate:target":I[0]||(I[0]=M=>t(Z).acceptTypeValue=M),userExtensions:t(Z).editedAcceptTypes,"onUpdate:userExtensions":I[1]||(I[1]=M=>t(Z).editedAcceptTypes=M),"disable-notifying-folder-select":t(Z).disableNotifyingFolderSelect,"onUpdate:disableNotifyingFolderSelect":I[2]||(I[2]=M=>t(Z).disableNotifyingFolderSelect=M),forbidden:t(g),onInput:W,onClick:I[3]||(I[3]=M=>H(!0)),onCancel:I[4]||(I[4]=M=>H(!1))},null,8,["target","userExtensions","disable-notifying-folder-select","forbidden"])]),_:1}),n(js,{input:t(p),format:t(Z).imageFormat,quality:t(Z).imageQuality,"retain-extension":t(Z).retainExtension,maxZipSizeMB:t(Z).maxZipSizeMB,threads:t(Z).multithread?t(Z).threadCount:0,"show-note":t(r),"onUpdate:showNote":I[5]||(I[5]=M=>je(r)?r.value=M:null),onStart:I[6]||(I[6]=M=>g.value=!0),onEnd:I[7]||(I[7]=M=>g.value=!1),"_:multi-thread-count":"val => availableThreadCount = val"},null,8,["input","format","quality","retain-extension","maxZipSizeMB","threads","show-note"]),n(G,{vertical:"",align:"center"},{default:e(()=>[n(re,{trigger:"manual",placement:"top","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:e(()=>[n(V,{size:"5vh",color:"#DADADA",style:{margin:"0px"}},{default:e(()=>[n(t(Xa))]),_:1})]),default:e(()=>[I[18]||(I[18]=_("span",null,"CONVERT TO👇",-1))]),_:1})]),_:1}),n(G,{vertical:"",align:"center"},{default:e(()=>[n(ri,{format:t(Z).imageFormat,"onUpdate:format":I[8]||(I[8]=M=>t(Z).imageFormat=M),quality:t(Z).imageQuality,"onUpdate:quality":I[9]||(I[9]=M=>t(Z).imageQuality=M)},null,8,["format","quality"]),n(gi,{"retain-ext":t(Z).retainExtension,"onUpdate:retainExt":I[10]||(I[10]=M=>t(Z).retainExtension=M),"use-folder-name-for-zip":t(Z).useFolderNameForZip,"onUpdate:useFolderNameForZip":I[11]||(I[11]=M=>t(Z).useFolderNameForZip=M),"max-zip-size":t(Z).maxZipSizeMB,"onUpdate:maxZipSize":I[12]||(I[12]=M=>t(Z).maxZipSizeMB=M),"_v-model:expanded":"UserSettings.expandAdvSettings",multithread:t(Z).multithread,"onUpdate:multithread":I[13]||(I[13]=M=>t(Z).multithread=M),"thread-count":t(Z).threadCount,"onUpdate:threadCount":I[14]||(I[14]=M=>t(Z).threadCount=M),"_:thread-max":"availableThreadCount","shrink-image":t(Z).shrinkImage,"onUpdate:shrinkImage":I[15]||(I[15]=M=>t(Z).shrinkImage=M),"max-width":t(Z).maxWidth,"onUpdate:maxWidth":I[16]||(I[16]=M=>t(Z).maxWidth=M),"max-height":t(Z).maxHeight,"onUpdate:maxHeight":I[17]||(I[17]=M=>t(Z).maxHeight=M)},null,8,["retain-ext","use-folder-name-for-zip","max-zip-size","multithread","thread-count","shrink-image","max-width","max-height"])]),_:1}),n(yi)]),_:1})]),_:1})):ve("",!0)]),_:1})]),_:1})}}}),tn=_e({__name:"App",setup(l){const i={Statistic:{valueFontSize:"1em"},Popover:{borderRadius:"0.4em",boxShadow:"2px 2px 5px 0px #555555"},Tooltip:{},Image:{toolbarColor:"#00000099"}},d=y(!0);return Ne(()=>{d.value=!1}),(s,o)=>{const a=al,p=ol,c=nl,h=tl,g=el,k=ll;return F(),ne(k,{"theme-overrides":i,style:{width:"100%",height:"100%"}},{default:e(()=>[n(g,null,{default:e(()=>[n(h,{placement:"top-right",max:20},{default:e(()=>[n(c,{placement:"top-left",closable:!0,max:50},{default:e(()=>[n(p,null,{default:e(()=>[n(a,null,{default:e(()=>[n(Vi,{class:Je({hide:t(d)})},null,8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),ia=[{path:"/",name:"Home",component:tn}];for(const l of St)ia.push({path:"/"+l+"/",strict:!0,name:l,component:tn});sl(tn,{routes:ia,base:"/avif2jpeg/dist/"},({app:l,router:i,routes:d,isClient:s,initialState:o})=>{l.use(Ct)});
