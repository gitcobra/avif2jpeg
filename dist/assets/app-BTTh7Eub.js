var Io=Object.defineProperty;var So=(o,i,c)=>i in o?Io(o,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):o[i]=c;var Ct=(o,i,c)=>So(o,typeof i!="symbol"?i+"":i,c);import{r as ot,d as ge,i as Ze,o as I,c as Z,w as t,a as n,u as e,b as T,t as p,N as he,_ as Ot,e as Le,L as Co,f as w,g as Q,h as y,F as we,j as Ue,B as Ie,k as vt,l as oe,m as Lo,n as $o,p as Se,q as _t,s as Ut,v as ce,x as Eo,y as Ae,z as dt,A as pt,C as ht,D as yt,E as $e,G as ke,H as Po,T as Oe,I as Bt,J as Rt,K as Ee,M as J,O as Mo,P as Fo,Q as Do,R as Ne,S as Be,U as at,V as Zt,W as ee,X as Ke,Y as wt,Z as bt,$ as Nt,a0 as jo,a1 as Vt,a2 as Oo,a3 as At,a4 as Ht,a5 as ut,a6 as be,a7 as We,a8 as Uo,a9 as Bo,aa as Ro,ab as Zo,ac as No,ad as Wt,ae as xt,af as zt,ag as qt,ah as Vo,ai as Gt,aj as Ho,ak as Wo,al as qo,am as Go,an as Ko,ao as Qo,ap as Kt,aq as Yo,ar as Jo,as as Xo,at as ea,au as Qt,av as ta,aw as na,ax as Yt,ay as oa,az as aa,aA as la,aB as sa,aC as ia,aD as ra,aE as ua,aF as ca,aG as da,aH as pa,aI as fa,aJ as ma,aK as ga,aL as va,aM as _a,aN as ha,aO as ya,aP as wa,aQ as ba}from"./vendor-CJQ_FVaI.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))d(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&d(s)}).observe(document,{childList:!0,subtree:!0});function c(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(l){if(l.ep)return;l.ep=!0;const r=c(l);fetch(l.href,r)}})();const Aa={imageFormat:"image/jpeg",imageQuality:90,expandExtButtons:!1,acceptTypeValue:void 0,editedAcceptTypes:"",expandAdvSettings:!1,retainExtension:!1,maxZipSizeMB:1e3,multithread:!0,threadCount:void 0},V=ot(Jt({}));function xa(){Jt(V)}function Jt(o){return Object.assign(o,Aa)}const Xt="avif2jpeg",ct=JSON.parse(localStorage.getItem(Xt)||"{}");for(const o in V)ct.hasOwnProperty(o)&&ct[o]!==void 0&&(V[o]=ct[o]);window.addEventListener("unload",()=>{const o={};for(const i in V)o[i]=V[i];localStorage.setItem(Xt,JSON.stringify(o))});const za=ge({__name:"github",setup(o){const i=Ze(Me);return(c,d)=>{const l=he,r=Ot,s=Le;return I(),Z(s,{to:!1,"display-directive":"show",show:e(i).showTooltipsBeforeMounted.value,trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(r,{href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-size":"small","font-weight":"bolder"}},{default:t(()=>[n(l,null,{default:t(()=>[n(e(Co))]),_:1}),T("GitHub")]),_:1})]),default:t(()=>[T(" "+p(c.$t("githubOpenSource")),1)]),_:1},8,["show"])}}}),ka=y("h3",null,"Used Framework and Libraries",-1),Ta=["href"],Ia=ge({__name:"licenses",setup(o){const i=w(!1),c={Vue:"https://github.com/vuejs/core/blob/main/LICENSE",Vite:"https://github.com/vitejs/vite/blob/main/LICENSE","Vite SSG":"https://github.com/antfu/vite-ssg/blob/main/LICENSE","Naive UI":"https://github.com/TuSimple/naive-ui/blob/main/LICENSE",Ionicons:"https://github.com/ionic-team/ionicons/blob/main/LICENSE"};return(d,l)=>{const r=Ie;return I(),Q(we,null,[n(r,{text:"",onClick:l[0]||(l[0]=s=>i.value=!0),style:{color:"black","font-size":"small"}},{default:t(()=>[T("Licenses")]),_:1}),n(e(vt),{preset:"dialog",ref:"dialog",show:i.value,"onUpdate:show":l[1]||(l[1]=s=>i.value=s),"positive-text":"OK",title:"Licenses"},{default:t(()=>[ka,y("ul",null,[(I(),Q(we,null,Ue(c,(s,g)=>y("li",null,[y("a",{href:s},p(g),9,Ta)])),64))])]),_:1},8,["show"])],64)}}}),Sa=1,Ca=5,La=2,$a="",et={major:Sa,minor:Ca,build:La,tag:$a},Ea={style:{"font-size":"x-small","user-select":"none"}},Pa=ge({__name:"version",setup(o){const i=["0.0.118"],c=`${et.major}.${et.minor}.${et.build}${et.tag}`,d=i.map(g=>({label:`v${g}`,key:g,value:g}));function l(g){const{key:h,label:f}=g,_=s(h),v=oe("a",{href:_},f),x=oe("div",null,v);return oe("div",null,x)}function r(g){location.href=s(g)}function s(g){return`/avif2jpeg/old/${g}/`}return(g,h)=>{const f=Lo;return I(),Z(f,{"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start",options:e(d),"render-label":l,"onUpdate:value":r},{header:t(()=>[y("span",Ea,p(g.$t("previousVersion")),1)]),default:t(()=>[y("span",{style:{cursor:"pointer"}},"v"+p(c))]),_:1},8,["options"])}}}),Ma=ge({__name:"header",setup(o){return(i,c)=>{const d=Se,l=_t;return I(),Z(d,{vertical:"",justify:"start"},{default:t(()=>[n(d,{justify:"space-between",style:{"box-sizing":"border-box",padding:"4px",margin:"0px"}},{default:t(()=>[n(d,{align:"start"},{default:t(()=>[n(za),n(Pa),n(d,{align:"center"},{default:t(()=>[n(Ia)]),_:1})]),_:1}),n(d,{align:"end",style:{"font-size":"x-small"}},{default:t(()=>[$o(i.$slots,"lang-switch")]),_:3})]),_:3}),n(l,{style:{margin:"0px"}})]),_:3})}}}),Fa={style:{padding:"0px",margin:"0px","text-align":"center"}},Da={key:0},ja=ge({__name:"title",setup(o){const i=Ut(),c=ce(()=>{const d=i.currentRoute.value.path||"";return!String(d.match(new RegExp("(?<=^\\/)[^/]+"))||"")});return(d,l)=>{const r=Ot,s=Eo("router-link"),g=Se;return I(),Z(g,{align:"center",justify:"center",style:{margin:"0px"}},{default:t(()=>[y("h1",Fa,[e(c)?(I(),Q("span",Da,p(d.$t("title")),1)):(I(),Z(s,{key:1,to:"../",custom:""},{default:t(({navigate:h,href:f})=>[n(r,{href:f,onClick:h,style:{color:"black","word-break":"keep-all","overflow-wrap":"break-word"}},{default:t(()=>[T(p(d.$t("title")),1)]),_:2},1032,["href","onClick"])]),_:1}))])]),_:1})}}});function Oa(o){return new Worker("/avif2jpeg/dist/assets/worker.canvas-CcITlExL.js",{name:o==null?void 0:o.name})}let en=0;class Ua extends Oa{constructor(){super(...arguments);Ct(this,"id",en++)}release(){st(this)}}const ft=[],Re=new Set,qe=new Map,Ge=new Map,lt=new Set;function Ba(o,i){const c=new Ua;ft.push(c);{const d=Promise.resolve(c);Re.add(d),qe.set(c,d)}return c}function Ra(o){const i=new Promise(c=>{Ge.set(o,c)});Re.add(i),qe.set(o,i),lt.add(o)}async function Za(){let o,i;do o=await Promise.any(Re);while(lt.has(o));return i=qe.get(o),qe.delete(o),Re.delete(i),Ra(o),o}function st(o){const i=Ge.get(o);i&&(Ge.delete(o),lt.delete(o),i(o))}function tn(){for(const o of Ge.keys())st(o)}async function Lt(){return await Promise.all(Re)}function $t(){tn();for(const o of ft)o.terminate();ft.length=0,Re.clear(),qe.clear(),Ge.clear(),lt.clear(),en=0}function Na(o){return new Worker("/avif2jpeg/dist/assets/worker.zip-DbLGSA5z.js",{name:o==null?void 0:o.name})}const Va=1,Ha=10,Wa=1024*1024*4,qa=100;async function Ga(o,i,c,d,l,r,s,g,h,f,_,v){const x=new Map,k=new Map,z=Math.min(c.threads-1,s.length);$t();const m=new Na,A=Ka(m,o,i,g);m.postMessage({action:"set-config",zipSize:c.maxZipSizeMB*1024*1024,keepExt:c.retainExtension,outputExt:_,imageType:v});const O=Qa(o,i,d,l,r,s,g,k,x);for(let C=0;C<z;C++){const W=Ba();W.onmessage=O;const{port1:te,port2:_e}=new MessageChannel;m.postMessage({action:"set-port"},[te]),W.postMessage({},[_e])}const P=Ae(i,C=>{C&&(P(),tn())});o.demandImage=C=>{m.postMessage({action:"request-image",index:C})};const a=s.length===1;let b=0,S=0,E="",F=0;for(;F<s.length;){const C=await Za();if(i.value){st(C);break}const W=[];let te=!1;const _e=s.length-F,de=Math.min(F+Math.max(Math.min(Ha,_e/c.threads|0),1),s.length);let pe=0,re=!1;const ne=Date.now();for(ne-S>qa&&(S=ne,re=!0);F<de&&!(pe>Wa);F++){const ae=s[F],H=ae._id;pe+=ae.size,te=F===s.length-1,x.has(H)||x.set(H,ae),W.push({index:F,file:ae,fileId:H,outputPath:E,type:h,quality:f/100,demandThumbnail:re||te,demandImage:a,webkitRelativePath:ae.webkitRelativePath}),ae.webkitRelativePath||ae.name,k.has(ae)||(b++,o.index=b),re=!1}if(C.postMessage(W),te&&(await Lt(),i.value))break}if(await Lt(),!i.value){let C;await new Promise(W=>{C=Ae([()=>o.done,i],()=>{(o.done>=b||i.value)&&W(void 0)},{immediate:!0})}),C()}a||(m.postMessage({action:"squeeze"}),await A),P();const M={value:!1},ve=()=>{M.value=!0,$t(),m.terminate()};let D=!1;return{callbackToClearConverter:ve,callbackToGenerateFailedZips:async C=>{D||(D=!0,await Ya(C,m,M,o))}}}function Ka(o,i,c,d){return new Promise(r=>{o.onmessage=s=>{const g=s.data,{action:h}=g;if(h==="add-zip-completed"){const{fileId:x}=g;i.done++,i.success++,d.add(x);return}if(h==="respond-image"){const{url:x,index:k,path:z,size:m}=g;i.convertedImageUrl=x,i.convertedImageSize=m,i.convertedImageIndex=k,i.convertedImageName=z;return}const{size:f,count:_}=g,v="url"in s.data?s.data.url:"";switch(h){case"push-zip":i.zips.push({url:v,size:f,count:_}),i.zippedTotalCount+=_,i.zippedTotalSize+=f;break;case"squeeze-zip":_>0&&(i.zips.push({url:v,size:f,count:_}),i.zippedTotalCount+=_,i.zippedTotalSize+=f),r(void 0);break;case"push-filelist":i.failedFileZippedCount++;break;case"squeeze-filelist-zip":i.failedZipDone=!0;case"push-filelist-zip":i.failedZips.push({url:v,size:f,count:_});break;case"zip-error":case"zip-squeeze-error":i.zippingErrorCount+=_,h==="zip-squeeze-error"&&r(void 0);break}}})}function Qa(o,i,c,d,l,r,s,g,h,f){let _=0;const v=w(new Map),x=w(new Map);return z=>{const m=z.target,{data:A}=z,{action:O}=A;if(i.value)switch(O){case"file-canceled":o.done++;return}switch(O){case"list-start":break;case"file-start":{const{index:P,path:$,fileId:a}=A,b={key:_++,core:m.id,index:P,path:$,command:"‚û°Ô∏èstarted"};v.value.set(m.id,b),o.logs.push(b);break}case"file-load":{const{thumbnail:P,width:$,height:a}=A;v.value.get(m.id).command="üñºÔ∏èloaded",P&&(o.thumbnail=P);break}case"file-converted":{const{index:P,path:$,fileId:a,image:b}=A,S=v.value.get(m.id);if(S.command="üîÉconverted",x.value.set(a,S),o.converted++,!b)break;const{width:E,height:F}=A;c.convertedImageBlob=b,c.convertedImageWidth=E,c.convertedImageHeight=F,c.convertedImageName=$,o.done++,o.success++}case"file-completed":{const{inputsize:P,outputsize:$,fileId:a}=A;o.inputTotalSize+=P,o.outputTotalSize+=$;const b=x.value.get(a);b&&(b.command="‚úÖcompleted",b.completed=!0);break}case"file-error":{const{index:P,path:$,fileId:a}=A,b=h.get(a);if(!b)throw new Error(`the file doesn't exist in the Map. "${a}":"${$}"`);const S=g.get(b)||0,E=v.value.get(m.id);S<Va?(g.set(b,S+1),r.push(b),E.command="‚ö†Ô∏èretrying",E.error=!0,d.warning(`retrying "${$}"`,{duration:3e3})):(o.done++,o.failure++,E.command="‚ùófailed",E.error=!0,l.error({content:`failed to load "${$}"`,duration:5e3}));break}case"file-canceled":{const{fileId:P,path:$}=A,a=x.value.get(P);o.done++,o.failure++,a.command="‚ùózip-aborted",a.error=!0;break}case"list-end":{st(m);break}}}}async function Ya(o,i,c,d){let l=0;for(const r of o){const s=(r.webkitRelativePath||r.name).replace(/^\//,"");if(c.value)return;l-d.failedFileZippedCount>20&&await new Promise(g=>setTimeout(g,10)),i.postMessage({action:"add-filelist",file:r,path:s}),l++}i.postMessage({action:"squeeze-filelist"})}async function Ja(o,i,c,d,l,r){let s="";const g=document.createElement("canvas"),h=g.getContext("2d");let f=new dt;const _=d.format,v=d.quality/100,x=[..._.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),k=o.length,z=d.maxZipSizeMB*1024*1024;let m=0,A=null,O="",P=0,$=0,a=0,b=0,S=0,E=0,F=!1;for(const C of o){if(l.value)break;const W=C.name;let te="";const _e=C.size,de=(C.webkitRelativePath||C.relativePath||W).replace(/^\//,""),pe=document.createElement("img");m++;const re={key:b++,core:-1,index:m,path:de,command:"‚û°Ô∏èstart"};r.index=m,r.logs.push(re),r.logs.length-1;let ne;s&&(URL.revokeObjectURL(s),s=""),s=URL.createObjectURL(C),pe.src=s;const ae=await mt(pe).then(()=>!0).catch(()=>!1);if(!pe.complete||!ae||l.value){r.done++,r.failure++,re.command="‚ùófailed";continue}const H=pe.width,fe=pe.height;if(g.width=H,g.height=fe,P=H,$=fe,h.drawImage(pe,0,0,H,fe,0,0,H,fe),re.command="üñºÔ∏èimgload",r.thumbnail=pe,ne=await new Promise(R=>{const le=Y=>{A=Y,R(Y==null?void 0:Y.arrayBuffer())};g.toBlob(le,_,v)}),l.value)break;if(!ne){r.failure++;continue}a=ne.byteLength,r.converted++;let U="";if(E+a>=z){try{U=f.url()}catch{F=!0,alert("memory problem occurred");break}r.zips.push({url:U,size:E,count:S}),r.zippedTotalCount+=S,r.zippedTotalSize+=E,E=0,S=0,f.clear(),f=new dt}E+=a;const L=de||W;for(let R=1;R<255&&(te=L.replace(d.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+(R>1?`(${R})`:"")+"."+x,!!f.has(te));R++);r.done++;try{S++,f.add(te,ne),r.inputTotalSize+=_e,r.outputTotalSize+=a}catch{continue}O=te,r.success++,re.command="‚úÖcompleted",re.completed=!0,i.add(C._id)}if(r.success>0)if(k===1)A&&(c.convertedImageBlob=A,c.convertedImageName=O,c.convertedImageWidth=P,c.convertedImageHeight=$);else try{if(F)throw new Error("terminated zipping process for memory problems");const C=f.url();r.zips.push({url:C,count:S,size:E}),r.zippedTotalCount+=S,r.zippedTotalSize+=E}catch{}const M={value:!1},ve=()=>{M.value=!0};let D=!1;return{callbackToClearConverter:ve,callbackToGenerateFailedZips:async C=>{D||(D=!0,Xa(C,z,r,M))}}}async function Xa(o,i,c,d){let l=0,r=0,s=new dt;for(let g=0;g<o.length;g++){const h=o[g],f=(h.webkitRelativePath||h.name).replace(/^\//,"");let _;try{_=await h.arrayBuffer()}catch{c.failedToCreateFailedZip=!0;return}if(d.value)return;if(s.add(f,_),r+=h.size,l++,c.failedFileZippedCount++,r>=i||g===o.length-1){const v=s.url();c.failedZips.push({url:v,size:r,count:l}),s.clear(),r=0,l=0}}c.failedZipDone=!0}function mt(o){if(typeof o.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((i,c)=>{o.onload=i,o.onerror=c})}const Pe=(o,i)=>{const c=o.__vccOpts||o;for(const[d,l]of i)c[d]=l;return c},el=o=>(ht("data-v-5dab19ad"),o=o(),yt(),o),tl={class:"container"},nl=el(()=>y("span",{class:"text"},"ZIP",-1)),ol={__name:"zipicon",setup(o){return(i,c)=>(I(),Q("span",tl,[n(e(he),null,{default:t(()=>[n(e(pt))]),_:1}),nl]))}},al=Pe(ol,[["__scopeId","data-v-5dab19ad"]]);function je(o,i=2){const c=Math.sign(o);o=Math.abs(o);const d=["Bytes","KB","MB","GB"],l=o?Math.floor(Math.log(o)/Math.log(1024)):0;return`${(o/Math.pow(1024,l)*c).toFixed(i)}${d[l]}`}function nn(o,i=100,c=!1){i=typeof i=="number"?{width:i,height:i}:i;const{width:d,height:l}=i;let{width:r,height:s}=o;const g=r/s,h=d/l;return g>=h?(r=c?Math.min(d,r):d,s=r/g|0):(s=c?Math.min(l,s):l,r=s*g|0),{width:r,height:s}}const ll=["href","download","title"],sl=ge({__name:"thumbnail",props:{src:{},width:{},height:{},maxWidth:{default:100},maxHeight:{default:100},expand:{type:Boolean,default:!1},loading:{type:Boolean},fileName:{},allowNext:{type:Boolean},allowPrev:{type:Boolean}},emits:["load","error","next","prev"],setup(o,{expose:i,emit:c}){const{t:d}=$e(),l=o,r=c;i({download:O,openPreview:$});const s=w(),g=w(!0),h=w(""),f=w(100),_=w(100),v=w(!1),x=ot({width:"100px",height:"100px",minWidth:"50px",minHeight:"50px"});Ae(l,(a,b)=>{x.width=(l.width||100)+"px",x.height=(l.height||100)+"px"}),Ae(()=>l.src,()=>{m(l.src)}),ke(()=>{document.body.addEventListener("keydown",P)}),Po(()=>{document.body.removeEventListener("keydown",P)});async function k(a){const b=a.target,S=b.naturalWidth,E=b.naturalHeight,{width:F,height:M}=nn({width:S,height:E},{width:l.maxWidth||100,height:l.maxHeight||100},l.expand);f.value=F,_.value=M,r("load",{src:b.src,width:S,height:E}),g.value=!1,await new Promise(ve=>setTimeout(ve,100)),!g.value&&(v.value=!0)}function z(a){const b=a.target;r("error",b.src)}async function m(a){var b,S;g.value=!0,v.value=!1,await new Promise(E=>setTimeout(E,150)),h.value=a;try{(S=(b=s.value)==null?void 0:b.previewInstRef)!=null&&S.displayed&&s.value.previewInstRef.setPreviewSrc(a)}catch{}}function A({nodes:a}){return a.next=oe(Ie,{onClick(){r("next")},disabled:!l.allowNext,circle:!0,textColor:"white",size:"small",style:{marginLeft:"12px"}},{icon:()=>oe(Mo)}),a.prev=oe(Ie,{onClick(){r("prev")},disabled:!l.allowPrev,circle:!0,textColor:"white",size:"small",style:{marginLeft:"12px"}},{icon:()=>oe(Fo)}),a.download=oe(Ie,{onClick(){O()},round:!0,textColor:"white",size:"small",style:{marginLeft:"12px"}},{default:()=>d("Download")}),Object.values(a)}function O(){const a=document.createElement("a");a.href=h.value,a.download=l.fileName,a.click()}function P(a){var b,S,E,F;if(a.code==="Escape")try{(S=(b=s.value)==null?void 0:b.previewInstRef)!=null&&S.displayed&&(a.stopPropagation(),(F=(E=s.value)==null?void 0:E.previewInstRef)==null||F.toggleShow(!1))}catch{}}function $(){var a,b,S,E;try{(b=(a=s.value)==null?void 0:a.previewInstRef)==null||b.setPreviewSrc(l.src),(E=(S=s.value)==null?void 0:S.previewInstRef)==null||E.toggleShow(!0)}catch{}}return(a,b)=>{const S=Do,E=Ne,F=Be;return I(),Z(F,{show:e(g)||l.loading},{default:t(()=>[n(E,{justify:"center",align:"center",style:J(e(x))},{default:t(()=>[y("a",{href:e(h),onClick:b[0]||(b[0]=Ee(()=>{},["left","prevent"])),target:"_blank",download:l.fileName,title:l.fileName,style:{"line-height":"0px"}},[n(Oe,{mode:"in-out"},{default:t(()=>[Bt(n(S,{ref_key:"nImageRef",ref:s,"show-toolbar-tooltip":"","render-toolbar":A,onLoad:k,onError:z,src:e(h),width:e(f),height:e(_),style:{border:"1px solid silver"}},null,8,["src","width","height"]),[[Rt,e(v)]])]),_:1})],8,ll)]),_:1},8,["style"])]),_:1},8,["show"])}}}),il=Pe(sl,[["__scopeId","data-v-830fe8ea"]]),rl=["href"],ul=["href","download"],cl=["href"],dl=ge({__name:"image-viewer",props:{url:{},dataUrl:{},name:{},size:{},length:{},index:{},isSingle:{type:Boolean}},emits:["demand-image"],setup(o,{expose:i,emit:c}){const d=o,l=c;i({download:P});const r=w(),s=at(),{t:g}=$e();Zt();const h=w(!0),f=w(1),_=w(1),v=w(1);w(0);const x=w(""),k=w(!1);let z=w(!1),m=-1;Ae(f,()=>{f.value<1||f.value>d.length||(clearTimeout(m),m=setTimeout(()=>{d.index!==f.value-1&&(l("demand-image",f.value-1),k.value=!0,z.value=!1)},100))}),Ae(()=>d.index,()=>{if(d.index===0&&h.value){h.value=!1,f.value=1,x.value=d.url;return}d.index===f.value-1&&(k.value=!1,x.value=d.url)});let A="";Ae(()=>d.url,()=>{if(d.url!==A){const a=A;setTimeout(()=>URL.revokeObjectURL(a),1e3),A=d.url}d.isSingle&&(h.value=!1,x.value=d.url)}),ke(()=>{d.isSingle||l("demand-image",0)});function O({width:a,height:b}){_.value=a,v.value=b,z.value=!0}function P(){r.value.download()}async function $(a){try{const b=await fetch(a).then(S=>S.blob()).then(S=>new Promise(E=>{const F=new FileReader;F.onload=E,F.readAsDataURL(S)})).then(S=>S.target.result);navigator.clipboard.writeText(b),s.info({title:g("copiedDataURLDialogTitle"),content:()=>oe("div",[oe("div",g("copiedDataURLMessage"))]),positiveText:"OK"})}catch{s.error({title:"failed to copy Data URL",content:"could not copy Data URL",positiveText:"OK"})}}return(a,b)=>{const S=Be,E=Ne,F=Ie,M=Ke,ve=wt,D=bt,G=Nt;return I(),Z(S,{size:"large",show:h.value},{default:t(()=>[n(E,{justify:"center",align:"center",vertical:"",style:J({visibility:h.value?"hidden":"visible"})},{default:t(()=>[n(E,{align:"center",wrap:!1},{default:t(()=>[n(E,{align:"center",justify:"center",vertical:""},{default:t(()=>[n(S,{size:"small",show:!1,_show:k.value||!e(z)},{default:t(()=>[n(il,{ref_key:"thumbref",ref:r,src:x.value,width:180,"max-width":160,"max-height":100,loading:k.value,"file-name":d.name,"allow-next":f.value<d.length,"allow-prev":f.value>1,onLoad:O,onNext:b[0]||(b[0]=C=>{f.value<d.length&&f.value++}),onPrev:b[1]||(b[1]=C=>{f.value>1&&f.value--})},null,8,["src","loading","file-name","allow-next","allow-prev"])]),_:1},8,["_show"])]),_:1}),n(E,{vertical:""},{default:t(()=>[n(E,{justify:"center",wrap:!1},{default:t(()=>[d.url?(I(),Z(M,{key:0,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:d.url,target:"_blank",onClick:b[2]||(b[2]=Ee(C=>{r.value.openPreview()},["prevent"]))},[n(F,{round:"",size:"tiny"},{default:t(()=>[T(p(a.$t("open")),1)]),_:1})],8,rl)]),default:t(()=>[T(" "+p(a.$t("convertedImageUrlTooltip")),1)]),_:1})):ee("",!0),d.url&&!a.isSingle?(I(),Z(M,{key:1,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:d.url,ref:"saveImg",target:"_blank",download:d.name},[n(F,{round:"",size:"tiny"},{default:t(()=>[T(p(a.$t("save")),1)]),_:1})],8,ul)]),default:t(()=>[T(" "+p(a.$t("save")),1)]),_:1})):ee("",!0),d.url?(I(),Z(M,{key:2,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:d.url,target:"_self"},[n(F,{onClick:b[3]||(b[3]=Ee(C=>$(d.url),["left","prevent","stop"])),round:"",size:"tiny"},{default:t(()=>[T("DataURL")]),_:1})],8,cl)]),default:t(()=>[T(" "+p(a.$t("convertedImageDataUrlTooltip")),1)]),_:1})):ee("",!0)]),_:1}),n(E,{justify:"center"},{default:t(()=>[T(p(_.value)+" √ó "+p(v.value),1)]),_:1}),n(E,{justify:"center"},{default:t(()=>[T(p(e(je)(d.size,0)),1)]),_:1})]),_:1})]),_:1}),a.isSingle?ee("",!0):(I(),Z(E,{key:0,align:"center",justify:"center"},{default:t(()=>[n(ve,{value:f.value,"onUpdate:value":b[4]||(b[4]=C=>f.value=C),tooltip:!1,step:1,min:1,max:d.length,style:{width:"180px"}},null,8,["value","max"]),n(E,{style:{"font-family":"v-mono"},align:"center"},{default:t(()=>[n(D,{value:f.value,"onUpdate:value":b[5]||(b[5]=C=>f.value=C),step:"1",min:"1",max:d.length,"button-placement":"both",size:"small",style:{width:"8em"}},null,8,["value","max"]),T(" / "+p(d.length),1)]),_:1})]),_:1})),n(E,{ref:"fileNameContainer",justify:"center",style:{"max-width":"320px"},title:d.name},{default:t(()=>[n(G,{"x-scrollable":!0,trigger:"hover",style:{"font-size":"smaller",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},{default:t(()=>[T(p(d.name),1)]),_:1})]),_:1},8,["title"])]),_:1},8,["style"])]),_:1},8,["show"])}}}),pl={class:"log-table"},fl={class:"log-tr"},ml={class:"log-th"},gl={class:"log-th"},vl={style:{"min-width":"7em"},class:"log-th"},_l={style:{"padding-left":"2em"},class:"log-th"},hl={class:"log-td"},yl={class:"log-td"},wl={class:"log-td"},bl={class:"log-td"},Al={style:{margin:"1px"}},xl=["href","download","onClick"],zl={key:0,style:{position:"relative"}},kl=["href","download"],Tl=["href","download"],Il={key:0,style:{margin:"1px"}},Sl=["href","download","onClick"],Et=99999,Cl=100,Ll=ge({__name:"status",props:{processing:{type:Boolean},status:{},interval:{}},emits:["all-zips-clicked","demand-zip-errors","demand-image"],setup(o,{emit:i}){const c=at(),{t:d}=$e(),l=Zt(),r={W:160,H:80},s=o,g=i,h=w(!1),f=w([]),_=w(!1),v=w([]),x=w([]),k=w([0,0]),z=w([0,0]),m=w([0,0]),A=w([0,0]),O=w([0,0]),P=w([0,0]),$=w(0),a=w([0,0]),b=w(l.value.infoColor),S=w("#000000"),E=w("#000000"),F=w(0),M=w(0),ve=w(""),D=w("00:00:00");w(""),w("");const G=w(void 0),C=w(!1),W=w(!0),te=w(!1),_e=ce(()=>C.value?re.value:pe.value),de=w("16em"),pe=w(5),re=w(1e3),ne=w(!0),ae=w(!1),H=ot({name:"",width:0,height:0,size:0,url:"",dataUrl:"",index:-1}),fe=w(null),U=w(null),L=w(),R=w();ke(()=>{Ae(s.status,()=>Te(),{deep:!1}),Ae([U,ne],()=>{if(!U.value||!ne.value)return;const{width:me,height:ye}=nn(U.value,{width:r.W,height:r.H});fe.value.width=me,fe.value.height=ye,fe.value.style.width=me+"px",fe.value.style.height=ye+"px",U.value instanceof HTMLImageElement?fe.value.getContext("2d").drawImage(U.value,0,0,me,ye):(fe.value.getContext("bitmaprenderer").transferFromImageBitmap(U.value),U.value=null,s.status.thumbnail=null)});let u=0;const B=()=>{if(u)return;const me=Date.now();D.value="00:00:00",u=window.setInterval(()=>{const ye=(Date.now()-me)/1e3;D.value=`${String(ye/3600|0).padStart(2,"0")}:${String(ye/60%60|0).padStart(2,"0")}:${String(ye%60|0).padStart(2,"0")}`},300)};B(),Ae(()=>s.processing,(me,ye)=>{me?(B(),f.value=[],h.value=!1,_.value=!1,v.value=[],x.value=[]):(clearInterval(u),Te(),u=0),ne.value=!1,ae.value=!0,s.processing||Ve()});const q=Uo();let N;const K=()=>{clearTimeout(N),N=setTimeout(()=>{if(!ne.value||X)return;const me=L.value.$parent.$el.offsetHeight,ye=window.innerHeight-q.parent.parent.vnode.el.offsetHeight-8;de.value=me+ye+"px"},100)};K(),window.addEventListener("resize",K);const se=new ResizeObserver(K);se.observe(q.parent.parent.vnode.el);let X=!1;jo(()=>{X=!0,se.disconnect(),clearInterval(u),clearTimeout(N),clearTimeout(ue),clearTimeout(Ye)})}),Ae([()=>s.status.zips.length,()=>s.status.failedZips.length],()=>{const u=s.status;{v.value.length>u.zips.length&&(v.value.length=0);let B=0;const q=u.zips.length===1&&u.zippedTotalCount===u.length;for(let N=v.value.length;N<u.zips.length;N++){const K=u.zips[N],se=u.baseZipName+(q?"":"-"+String(N+1).padStart(2,"0"))+".zip";B+=K.size,v.value[N]={url:K.url,size:K.size,number:q?0:N+1,sizeByUnit:je(K.size),name:se,count:K.count,clicked:!1}}}{x.value.length>u.failedZips.length&&(x.value.length=0);let B=0;const q=u.failedZipDone&&u.failedZips.length===1;for(let N=x.value.length;N<u.failedZips.length;N++){const K=u.failedZips[N],se=u.baseZipName+"-error"+(q?"":"-"+String(N+1).padStart(2,"0"))+".zip";B+=K.size,x.value[N]={url:K.url,size:K.size,number:q?0:N+1,sizeByUnit:je(K.size),name:se,count:K.count,clicked:!1}}}});const le=s.interval||100;let Y=!1,ue=0;function Te(){if(Y)return;if(ue){Y=!0;return}ue=window.setTimeout(()=>{ue=0,Y&&(Y=!1,Te())},le);const u=s.status;h.value=u.length>=2,z.value[1]=z.value[0],z.value[0]=u.index,m.value[1]=m.value[0],m.value[0]=u.success,A.value[1]=A.value[0],A.value[0]=u.failure,O.value[1]=O.value[0],O.value[0]=u.done,P.value[1]=P.value[0],P.value[0]=u.converted,$.value=u.length,a.value[1]=a.value[0],a.value[0]=u.zippedTotalCount,F.value=u.inputTotalSize,M.value=u.outputTotalSize;const B=M.value-F.value;ve.value=(B>=0?"+ ":"")+je(B);const q=M.value/F.value,N=(256|Math.min(255,Math.max(0,q-1.5)*255|0)).toString(16).substring(1);S.value="#"+N+"0000";const K=1024*1024,se=(256|Math.min(255,Math.max(0,B/1024/K)*255|0)).toString(16).substring(1);if(E.value="#"+se+"0000",k.value[1]=k.value[0],k.value[0]=m.value[0]/$.value*100,ne.value||!s.processing){const X=u.logs.slice(-Et);f.value.push(...X);const me=f.value.length-Et;me>0&&f.value.splice(0,me),W.value&&X.length&&Xe(),f.value.length>re.value&&(re.value*=2)}u.logs.length=0,U.value=u.thumbnail,s.processing&&(b.value=A.value[0]?l.value.warningColor:l.value.infoColor),u.convertedImageUrl!==H.url&&(H.url=u.convertedImageUrl,H.name=u.convertedImageName,H.dataUrl=u.convertedImageDataUrl,H.size=u.convertedImageSize||u.outputTotalSize,H.width=u.convertedImageWidth,H.height=u.convertedImageHeight,H.index=u.convertedImageIndex)}function Ve(){const u=s.status;b.value=s.status.success===s.status.length?l.value.successColor:l.value.errorColor,u.unconvertedFileCount>0,A.value[0]>0||(m.value[0],$.value)}const xe=ce(()=>[{key:"open",label:d("status.openFailedList"),icon:()=>oe(he,()=>oe(Vt)),onSelect(){Fe()}},{key:"download",label:d("status.saveFailedList"),icon:()=>oe(he,()=>oe(Oo)),onSelect(){Fe(!0)}},{key:"zip",label:`${d("status.zipFailedList")}`+(s.status.failedZipDone?`(‚úî${d("status.done")})`:""),icon:()=>oe(Be,{show:_.value&&!s.status.failedZipDone,size:"small"},()=>oe(he,()=>oe(pt))),disabled:_.value,onSelect(u){return _.value=!0,g("demand-zip-errors"),!1}}]);function ze(u,B=!1){const{url:q,name:N}=u;if(B){const K=document.createElement("a");K.href=q,K.download=N,K.click()}u.clicked||(u.clicked=!0,s.processing||v.value.every(K=>K.clicked)&&g("all-zips-clicked"))}async function Qe(){if(h.value){if(v.value.length>=2&&!await new Promise((q,N)=>c.warning({title:d("Download"),content:d("status.confirmDownloadMessage",[v.value.length]),positiveText:"OK",negativeText:d("cancel"),onPositiveClick:()=>q(!0),onNegativeClick:()=>N()})))return;const u=v.value;for(const B of u)ze(B,!0)}else R.value.download()}function Fe(u=!1){const B=new Blob([s.status.unconvertedListText],{type:"text/plain;charset=utf8"}),q=URL.createObjectURL(B),N=document.createElement("a");N.href=q,N.target="_blank",u&&(N.download=s.status.baseZipName+"-error.txt"),N.click()}let Ye=0,Je=!1;function Xe(u=!1){if(!Je){if(Ye){Je=!0;return}At(()=>{!u&&(!C.value||!W.value)||(L.value.scrollTo({behavior:u?"instant":"smooth",top:f.value.length*50}),Ye=window.setTimeout(()=>{Ye=0,Je&&(Je=!1,Xe())},Cl))})}}return(u,B)=>{const q=Se,N=Bo,K=Ro,se=Ke,X=Ne,me=Zo,ye=No,it=Le,bo=Wt,Ao=xt,xo=zt,zo=_t,He=Ie,ko=al,It=qt,To=Vo;return I(),Z(X,{vertical:"",justify:"center"},{default:t(()=>[n(q,{justify:"center",align:"center",wrap:!1,style:{"white-space":"nowrap"}},{default:t(()=>[n(q,{vertical:"",justify:"center",class:"left-column"},{default:t(()=>[n(N,{"tabular-nums":"",label:u.$t("status.elapsedTime")},{default:t(()=>[n(q,null,{default:t(()=>[T(p(e(D)),1)]),_:1})]),_:1},8,["label"]),n(N,{"tabular-nums":"",label:u.$t("status.multiThreading")},{default:t(()=>[n(q,{style:J({color:s.status.threads?"":"red"})},{default:t(()=>[T(p(s.status.threads?u.$rt("{n} @:threads",s.status.threads):u.$t("disabled")),1)]),_:1},8,["style"])]),_:1},8,["label"]),n(N,{"tabular-nums":"",label:u.$t("status.outputSettings")},{default:t(()=>[n(q,{vertical:"",justify:"end",style:{"font-size":"smaller","line-height":"1em"}},{default:t(()=>[y("div",null,"Type: "+p(s.status.type),1),y("div",null,"Zip: "+p(s.status.zipSize)+"MB",1)]),_:1})]),_:1},8,["label"])]),_:1}),n(me,{type:"multiple-circle","stroke-width":1,percentage:[e(m)[0]/e($)*100|0,e(z)[0]/e($)*100|0],color:[e(l).successColor,e(b)],"rail-style":[{stroke:u.processing?e(l).successColor:e(b),opacity:.3},{stroke:e(b),opacity:.3}],class:"center-column"},{default:t(()=>[n(q,{vertical:"",align:"center",style:{"font-family":"v-mono","font-size":"xx-large","white-space":"nowrap"},wrap:!1,"wrap-item":!1},{default:t(()=>[y("span",{style:J({color:e(A)[0]?e(b):u.processing?e(l).successColor:e(b)})},[n(K,{duration:e(le)*3|0,from:e(k)[1]|0,to:e(k)[0]|0,active:!0},null,8,["duration","from","to"]),T("% ")],4),n(X,{wrap:!1,style:{border:"0px solid"}},{default:t(()=>[n(X,{vertical:"",size:"small",justify:"end"},{default:t(()=>[n(X,{justify:"end",wrap:!1},{default:t(()=>[e(A)[0]>0?(I(),Z(se,{key:0,trigger:"hover",duration:0,delay:0,style:J({color:e(l).errorColor}),placement:"left"},{trigger:t(()=>[y("span",{style:J({fontSize:"xx-small",color:e(l).errorColor,lineHeight:"0"})}," ("+p(e(A)[0].toLocaleString("en-us"))+") ",5)]),default:t(()=>[T(" "+p(u.$t("status.progressErrors"))+" ("+p(e(A)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):ee("",!0),n(se,{trigger:"hover",duration:0,delay:0,style:J({color:e(l).infoColor}),placement:"left"},{trigger:t(()=>[y("span",{style:J({fontSize:"xx-small",color:e(l).infoColor,lineHeight:"0"})},p(e(z)[0].toLocaleString("en-us")),5)]),default:t(()=>[T(" "+p(u.$t("status.progressStarted"))+" ("+p(e(z)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])]),_:1}),n(X,{justify:"end"},{default:t(()=>[n(se,{trigger:"hover",duration:0,delay:0,style:J({color:e(l).successColor}),placement:"bottom"},{trigger:t(()=>[y("span",{style:J({fontSize:"medium",color:e(l).successColor})},[n(K,{duration:e(le)*3|0,from:e(m)[1],to:e(m)[0],active:!0,"show-separator":!0},null,8,["duration","from","to"])],4)]),default:t(()=>[T(" "+p(u.$t("status.progressSuccess"))+" ("+p(e(m)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])]),_:1})]),_:1}),n(X,{align:"end",style:{"font-size":"medium",border:"0px solid"}},{default:t(()=>[n(se,{trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:t(()=>[T(" / "+p(e($).toLocaleString("en-us")),1)]),default:t(()=>[T(" "+p(u.$t("status.progressTotal"))+" ("+p(e($).toLocaleString("en-us"))+") ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["percentage","color","rail-style"]),n(q,{vertical:"",style:{height:"100%"},justify:"center"},{default:t(()=>[n(N,{"tabular-nums":"",label:u.$t("status.inputSize")},{default:t(()=>[n(q,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[T(p((e(F)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(N,{"tabular-nums":"",label:u.$t("status.outputSize")},{default:t(()=>[n(q,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[T(p((e(M)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(N,{"tabular-nums":"",label:u.$t("status.outInRate")},{default:t(()=>[n(q,{vertical:"",align:"end",justify:"start",style:{"font-size":"xx-small","font-family":"v-mono","line-height":"50%"}},{default:t(()=>[y("span",{style:J({color:e(S),fontSize:"larger"})},"√ó "+p((e(M)/e(F)||1).toFixed(2)),5),y("span",{style:J({color:e(E)})},"("+p(e(ve))+")",5)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1}),n(xo,{"display-directive":"show","trigger-areas":["arrow","main"],"default-expanded-names":"log-collapse","expanded-names":e(ne)?["log-collapse"]:[],"on-update:expanded-names":j=>{ne.value=!!String(j)}},{default:t(()=>[n(Ao,{title:"Log",name:"log-collapse",style:{"white-space":"nowrap"}},Ht({header:t(()=>[n(X,{align:"center",wrap:!1},{default:t(()=>[T(p(u.$t("status.log")),1),u.processing&&!e(ne)?(I(),Z(e(Be),{key:0,size:16})):ee("",!0)]),_:1})]),default:t(()=>[n(X,{wrap:!1,class:We({"log-container":1,"expand-log":e(C)}),align:"stretch",style:J(e(C)?{height:e(de),maxHeight:e(de)}:{})},{default:t(()=>[n(e(Nt),{ref_key:"scrollref",ref:L,"x-scrollable":!0,onMouseup:B[5]||(B[5]=j=>W.value=!1),onWheel:B[6]||(B[6]=j=>W.value=!1),trigger:"none",style:J([{"z-index":"2","padding-right":"10px","min-height":"7em"},{maxHeight:e(de)}]),size:50},{default:t(()=>[y("table",pl,[y("tr",fl,[y("th",ml,p(u.$t("status.table.core")),1),y("th",gl,p(u.$t("status.table.index")),1),y("th",vl,p(u.$t("status.table.status")),1),y("th",_l,p(u.$t("status.table.details")),1)]),(I(!0),Q(we,null,Ue((e(te)?e(f).filter(j=>!j.completed):e(f)).slice(-e(_e)),({index:j,key:De,command:Ce,path:rt,core:St})=>(I(),Q("tr",{key:De,class:"log-tr"},[y("td",hl,p(St>=0?St+1:"-"),1),y("td",yl,p(j+1),1),y("td",wl,p(Ce),1),y("td",bl,p(rt),1)]))),128))])]),_:1},8,["style"]),n(X,{style:J([{"align-self":"center",position:"absolute","z-index":"0","margin-top":"0.5em",right:"0.1em","line-height":"0px"},{width:r.W+"px",height:r.H+"px"}]),justify:"center",align:"center"},{default:t(()=>[n(e(Be),{size:"small",show:u.processing},{default:t(()=>[s.status.thumbnail===void 0?(I(),Z(bo,{key:0,description:"EMPTY"})):ee("",!0),Bt(y("canvas",{ref_key:"thumbcanvas",ref:fe,width:"106",height:"80",style:J({border:"1px solid gray",filter:u.processing?"":"opacity(0.35)"})},null,4),[[Rt,s.status.thumbnail!==void 0]])]),_:1},8,["show"])]),_:1},8,["style"])]),_:1},8,["class","style"])]),_:2},[e(ne)?{name:"header-extra",fn:t(()=>[n(X,{align:"center",wrap:!1},{default:t(()=>[n(ut,null,{default:t(()=>[n(ye,{key:"a",checked:e(te),"onUpdate:checked":B[0]||(B[0]=j=>be(te)?te.value=j:null),size:"small",style:{"font-size":"smaller"},class:"hide-mobile"},{default:t(()=>[T(p(u.$t("status.filterSuccess")),1)]),_:1},8,["checked"]),e(C)?(I(),Z(ye,{key:"b",checked:e(W),"onUpdate:checked":[B[1]||(B[1]=j=>be(W)?W.value=j:null),B[2]||(B[2]=j=>j&&Xe(!0))],size:"small",style:{"font-size":"smaller"}},{default:t(()=>[T(p(u.$t("status.autoScroll")),1)]),_:1},8,["checked"])):ee("",!0)]),_:1}),n(it,{style:{"max-width":"30em"}},{trigger:t(()=>[n(ye,{size:"small",checked:e(C),"onUpdate:checked":[B[3]||(B[3]=j=>be(C)?C.value=j:null),B[4]||(B[4]=j=>{W.value=j,Xe(!0)})],style:{"font-size":"smaller"}},{default:t(()=>[T(p(u.$t("status.expandLog")),1)]),_:1},8,["checked"])]),default:t(()=>[T(p(u.$t("status.expandLogTooltip")),1)]),_:1})]),_:1})]),key:"0"}:void 0]),1024)]),_:1},8,["expanded-names","on-update:expanded-names"]),n(zo,{style:{margin:"0.2em"}}),n(X,{wrap:!1,vertical:""},{default:t(()=>[n(X,{justify:"center",align:"center",vertical:""},{default:t(()=>[y("div",{class:"singleimage",style:J({maxHeight:e(ae)?"2000px":"100px"})},[!e(ae)&&e(h)&&s.status.threads?(I(),Z(He,{key:0,tertiary:"",type:"success",size:"small",disabled:!(u.status.success>0),onClick:B[7]||(B[7]=j=>ae.value=!0)},{default:t(()=>[T(p(u.$t("status.browseConvertedImages")),1)]),_:1},8,["disabled"])):u.status.success>0&&(s.status.threads||!e(h))?(I(),Z(dl,{key:1,ref_key:"imageViewer",ref:R,size:e(H).size,url:e(H).url,"data-url":e(H).dataUrl,width:e(H).width,height:e(H).height,name:e(H).name,length:s.status.success,index:e(H).index,"is-single":!e(h),onDemandImage:B[8]||(B[8]=j=>g("demand-image",j))},null,8,["size","url","data-url","width","height","name","length","index","is-single"])):ee("",!0)],4)]),_:1}),n(X,{justify:"center"},{default:t(()=>[e(h)?(I(),Z(X,{key:0,vertical:"",align:"center"},{default:t(()=>[n(se,{placement:"left"},{trigger:t(()=>[n(me,{type:"line","indicator-placement":"inside",color:"lime","rail-color":"rgba(99, 255, 99, 0.5)","indicator-text-color":e(a)[0]===e($)?"white":"green",processing:u.processing,percentage:e(a)[0]/e($)*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[y("span",Al,p(e(a)[0]/e($)*100|0)+"% "+p(u.$t("status.zipped"))+" ("+p(e(a)[0])+"/"+p(e(P)[0])+")",1)]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[T(" "+p(u.$t("status.zippingProgress"))+" ("+p(e(a)[0]/e($)*100|0)+"%) ",1)]),_:1}),n(Oe,{name:"zipcontainer"},{default:t(()=>[e(v).length>=1||s.processing?(I(),Z(ut,{key:0,name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(I(!0),Q(we,null,Ue(e(v),(j,De)=>(I(),Q("span",{key:De},[n(se,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:j.url,download:j.name,class:"in-button-anchor",onClick:Ce=>ze(j)},[n(He,{class:"zip-button",size:"tiny",color:j.clicked?"#050":"lime","text-color":j.clicked?"gray":"white",onClick:Ee(Ce=>ze(j),["stop"]),round:""},{default:t(()=>[n(e(he),{size:"tiny"},{default:t(()=>[n(e(pt))]),_:1}),T("ZIP"+p(j.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,xl)]),default:t(()=>[y("div",{style:J({color:e(l).successColor})},[y("div",null,"ZIP "+p(j.number||"")+" ("+p(u.$t("success"))+")",1),y("div",null,p(j.name),1),y("div",null,p(j.sizeByUnit),1),y("div",null,p(u.$rt("{n} @:files",j.count)),1)],4)]),_:2},1024)]))),128))]),_:1})):ee("",!0)]),_:1})]),_:1})):ee("",!0)]),_:1}),n(Oe,null,{default:t(()=>[s.processing?ee("",!0):(I(),Z(X,{key:0,justify:"center",align:"center"},{default:t(()=>[n(se,{trigger:"hover",duration:0,delay:0,placement:"left",style:J({color:"white",backgroundColor:e(l).successColor}),"arrow-style":{backgroundColor:e(l).successColor}},{trigger:t(()=>[n(Oe,{name:"save"},{default:t(()=>[e(m)[0]>0?(I(),Q("span",zl,[n(It,{value:e(h)?e(a)[0].toLocaleString("en-us"):s.status.type.replace(/\(.+\)/,""),color:e(l).successColorHover,offset:[-20,-3]},{default:t(()=>[n(He,{size:"medium",onClick:Qe,color:e(l).successColor,round:""},{default:t(()=>[e(h)?(I(),Q(we,{key:0},[e(v).length?(I(),Q("a",{key:0,href:e(v)[0].url,download:e(v)[0].name,class:"in-button-anchor",onClick:B[9]||(B[9]=Ee(()=>{},["prevent"]))},[n(ko),T(" √ó "+p(e(v).length)+" "+p(u.$t("save")),1)],8,kl)):ee("",!0)],64)):(I(),Q("a",{key:1,href:e(H).url,download:e(H).name,class:"in-button-anchor",onClick:B[10]||(B[10]=Ee(()=>{},["prevent"]))},[n(e(he),{size:"tiny"},{default:t(()=>[n(e(Gt))]),_:1}),T(" "+p(u.$t("save")),1)],8,Tl))]),_:1},8,["color"])]),_:1},8,["value","color"])])):ee("",!0)]),_:1})]),default:t(()=>[u.status.length>=2?(I(),Q(we,{key:0},[y("div",null,p(e(d)("success"))+": "+p(e(a)[0].toLocaleString()),1),y("div",null,p(e(d)("status.totalSize"))+": "+p(e(je)(u.status.zippedTotalSize)),1),y("div",null,"ZIP √ó "+p(e(v).length),1)],64)):(I(),Q(we,{key:1},[T(p(u.$t("status.downloadConvertedImage")),1)],64))]),_:1},8,["style","arrow-style"]),!u.processing&&u.status.success!==e($)?(I(),Z(To,{key:0,options:e(xe),onSelect:B[11]||(B[11]=(j,De)=>{var Ce;return(Ce=e(xe).find(({key:rt})=>j===rt))==null?void 0:Ce.onSelect()}),"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start"},{default:t(()=>[n(se,{show:e(G),duration:0,delay:0,placement:"right",style:J({color:"white",backgroundColor:e(l).errorColor}),"arrow-style":{backgroundColor:e(l).errorColor}},{trigger:t(()=>[n(It,{value:u.status.unconvertedFileCount.toLocaleString(),color:e(l).errorColorHover,offset:[-0,-3]},{default:t(()=>[n(He,{size:"small",color:e(l).errorColor},{default:t(()=>[n(e(he),{size:"medium",style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Ho))]),_:1})]),_:1},8,["color"])]),_:1},8,["value","color"])]),default:t(()=>[y("div",null,[y("div",null,p(e(d)("failed"))+": "+p(u.status.unconvertedFileCount.toLocaleString()),1),y("div",null,p(e(d)("status.totalSize"))+": "+p(e(je)(u.status.unconvertedTotalSize)),1)])]),_:1},8,["show","style","arrow-style"])]),_:1},8,["options"])):ee("",!0)]),_:1}))]),_:1}),n(Oe,{name:"zipcontainer"},{default:t(()=>[e(_)?(I(),Z(X,{key:0,vertical:"",align:"center"},{default:t(()=>[n(se,{placement:"left"},{trigger:t(()=>[n(me,{type:"line","indicator-placement":"inside",color:"red","rail-color":"rgba(255, 0, 0, 0.5)","indicator-text-color":u.status.failedFileZippedCount===u.status.unconvertedFileCount?"white":"#500",processing:e(_)&&!u.status.failedZipDone&&!u.status.failedToCreateFailedZip,percentage:u.status.failedFileZippedCount/u.status.unconvertedFileCount*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[u.status.failedToCreateFailedZip?(I(),Q("div",{key:1,style:J({color:e(l).errorColor})},p(u.$t("status.failureZippingFailedFiles")),5)):(I(),Q("span",Il,p(u.status.failedFileZippedCount/u.status.unconvertedFileCount*100|0)+"% "+p(u.$t("status.zipped"))+" ("+p(u.status.failedFileZippedCount)+"/"+p(u.status.unconvertedFileCount)+")",1))]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[T(" "+p(u.$t("status.zippingProgress"))+" ("+p(u.status.failedFileZippedCount/u.status.unconvertedFileCount*100|0)+"%) ",1)]),_:1}),n(ut,{name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(I(!0),Q(we,null,Ue(e(x),(j,De)=>(I(),Q("span",{key:De},[n(se,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:j.url,download:j.name,class:"in-button-anchor",onClick:Ce=>ze(j)},[n(He,{class:"zip-button",size:"tiny",color:j.clicked?"#551122":"#F00","text-color":j.clicked?"gray":"white",onClick:Ee(Ce=>ze(j),["stop"]),round:""},{default:t(()=>[n(e(he),{size:"tiny"},{default:t(()=>[n(e(Wo))]),_:1}),T("ZIP"+p(j.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Sl)]),default:t(()=>[y("div",{style:J({color:e(l).errorColor})},[y("div",null,"ZIP "+p(j.number||"")+" ("+p(u.$t("failed"))+")",1),y("div",null,p(j.name),1),y("div",null,p(j.sizeByUnit),1),y("div",null,p(u.$rt("{n} @:files",j.count)),1)],4)]),_:2},1024)]))),128))]),_:1})]),_:1})):ee("",!0)]),_:1})]),_:1})]),_:1})}}}),$l=Pe(Ll,[["__scopeId","data-v-2c68d313"]]),El=["innerHTML"],Pl={style:{"flex-grow":"1"}},Ml=ge({__name:"converter",props:{input:{},format:{},quality:{},retainExtension:{type:Boolean},maxZipSizeMB:{},threads:{}},emits:["start","end","multi-thread-count"],setup(o,{emit:i}){Ze(Me);const{t:c}=$e(),d=at(),l=qo(),r=Go(),s=10,g=navigator.hardwareConcurrency,h=typeof OffscreenCanvas=="function",f=300,_=o,v=i,x=w(!1),k=w(!1),z=w(!1),m=w(0),A=w(!1),O=w(!1),P=w("initializing"),$=w("info"),a=ot(W());let b=!1,S=()=>{},E=0,F=!1;Ae(()=>_.input,U=>{U!=null&&U.length&&_e(U)}),ke(async()=>{await H(),fe()});function M(){if(E>s*1e3&&!F&&a.success>0)return d.warning({title:c("confirmCloseDialogTitle"),autoFocus:!0,maskClosable:!1,positiveText:c("close"),negativeText:c("back"),onPositiveClick(){A.value=!1,r.destroyAll(),l.destroyAll()},onNegativeClick(){},content:c("confirmCloseDialog")}),!1;r.destroyAll(),l.destroyAll(),A.value=!1}function ve(U){a.demandImage(U)}function D(){!k.value&&x.value?k.value=!0:M()}function G(){_e(_.input)}let C=w(()=>{});function W(U){const L={logs:[],index:0,converted:0,success:0,failure:0,done:0,length:0,zippedTotalCount:0,zippingErrorCount:0,zippedTotalSize:0,processing:!1,zips:[],inputTotalSize:0,outputTotalSize:0,thumbnail:null,baseZipName:"testzipname",type:"image/any",startedTime:Date.now(),convertedImageDataUrl:"",convertedImageName:"",convertedImageUrl:"",zipSize:_.maxZipSizeMB,unconvertedListText:"",failedZipDone:!1,failedZips:[],unconvertedFileCount:0,unconvertedTotalSize:0,failedFileZippedCount:0,failedToCreateFailedZip:!1,demandImage:()=>{}};return Object.assign(U||{},L)}function te(){O.value=!1,URL.revokeObjectURL(a.convertedImageUrl);for(const U of a.zips)URL.revokeObjectURL(U.url);a.zips.length=0;for(const U of a.failedZips)URL.revokeObjectURL(U.url);a.failedZips.length=0,W(a),S(),S=()=>{},F=!1,z.value=!1,k.value=!1}async function _e(U){if(x.value){d.error({title:"Busy",positiveText:"OK",content:c("interfered")});return}let L=ne(U);W(a),te();const R={convertedImageBlob:null,convertedImageWidth:0,convertedImageHeight:0,convertedImageName:""};m.value++,A.value=!0,O.value=!0,x.value=!0,a.processing=!0,$.value="info",P.value=c("processing");const le=new Set,Y=_.format,ue=_.quality,Te=[...Y.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),Ve=ae(Y,ue);a.length=L.length,a.baseZipName=Ve,a.type=Y.replace(/image\//,"").toUpperCase()+(/jpe?g|webp/i.test(Y)?" ("+ue+")":""),a.threads=b?0:_.threads;const xe=Date.now();v("start");const ze=L.concat();let Qe;if({callbackToGenerateFailedZips:Qe,callbackToClearConverter:S}=!b&&_.threads>=2?await Ga(a,k,_,R,l,r,ze,le,Y,ue,Te,Y):await Ja(ze,le,R,_,k,a),a.length===1&&await de(Te,R),a.success===a.length?($.value="success",P.value=c("completed")):($.value="error",P.value=k.value?c("aborted"):c("incomplete")),le.size!==L.length){const Fe=pe(L,le);C.value=()=>{!Fe||!Fe.length||Qe(Fe)}}x.value=!1,a.processing=!1,z.value=!0,E=Date.now()-xe,v("end")}async function de(U,L){if(L.convertedImageBlob){const R=new FileReader;R.readAsDataURL(L.convertedImageBlob);const le=await mt(R).then(Y=>Y.target.result);a.convertedImageName=L.convertedImageName.replace(/^.*\/(?=[^/]+$)/,"").replace(_.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+U,a.convertedImageUrl=URL.createObjectURL(L.convertedImageBlob),a.convertedImageDataUrl=le,a.convertedImageWidth=L.convertedImageWidth,a.convertedImageHeight=L.convertedImageHeight}}function pe(U,L){const R=[],le=[];let Y=0;for(const ue of U)L.has(ue._id)||(R.push(ue),le.push(ue.webkitRelativePath||ue.relativePath||ue.name),Y+=ue.size);return le.length&&(a.unconvertedListText=le.join(`
`),a.unconvertedFileCount=R.length,a.unconvertedTotalSize=Y),R}let re=0;function ne(U){const L=[];for(const R of U)R.hasOwnProperty("_id")||Object.defineProperty(R,"_id",{value:re++}),L.push(R);return L}function ae(U,L){const R=new Date;return U=U.replace(/^image\//,"").toLowerCase(),`avif2jpg-
    ${R.getFullYear().toString().substring(2)}
    ${String((R.getMonth()+1)*100+R.getDate()).padStart(4,"0")}
    ${String(R.getHours()*1e4+R.getMinutes()*100+R.getSeconds()).padStart(6,"0")}
    -
    ${U+(/jpe?g|webp/i.test(U)?L:"")}
  `.replace(/\s/g,"")}async function H(){const U="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",L=document.createElement("img"),R=mt(L).then(()=>!0,()=>!1);L.src=U,await R||d.warning({title:"Unsupported",positiveText:"OK",maskClosable:!1,content:c("avifUnsupported")})}function fe(){(!h||g<2||!Promise.any)&&(b=!0),v("multi-thread-count",b?0:g)}return(U,L)=>{const R=Ie,le=Le,Y=Se,ue=Be,Te=Ne,Ve=vt;return I(),Q(we,null,[n(Y,{justify:"center",align:"center"},{default:t(()=>{var xe;return[!e(x)&&((xe=_.input)!=null&&xe.length)?(I(),Z(le,{key:0,trigger:"hover",placement:"top","keep-alive-on-hover":!1,duration:0,delay:50},{trigger:t(()=>[n(R,{onClick:G,round:""},{default:t(()=>[T(p(e(c)("convertAgain")),1)]),_:1})]),default:t(()=>{var ze;return[y("div",{innerHTML:e(c)("reconvertTip",(ze=_.input)==null?void 0:ze.length)},null,8,El)]}),_:1})):ee("",!0)]}),_:1}),n(Ve,{ref:"processingModal",show:e(A),"onUpdate:show":L[2]||(L[2]=xe=>be(A)?A.value=xe:null),closable:e(z),"close-on-esc":!1,preset:"dialog","display-directive":"show",onClick:L[3]||(L[3]=xe=>{e(r).destroyAll(),e(l).destroyAll()}),onMaskClick:L[4]||(L[4]=xe=>{e(r).destroyAll(),e(l).destroyAll()}),onClose:M,onEsc:D,title:e(P),type:e($),"mask-closable":!1,"on-after-leave":te,class:"processing-dialog"},{default:t(()=>[n(Te,{vertical:"",style:{"flex-grow":"1"}},{default:t(()=>[y("div",Pl,[e(O)?(I(),Z($l,{key:e(m),processing:e(x),status:e(a),interval:f,onAllZipsClicked:L[0]||(L[0]=xe=>be(F)?F.value=!0:F=!0),onDemandZipErrors:e(C),onDemandImage:ve},null,8,["processing","status","onDemandZipErrors"])):ee("",!0)]),n(Te,{justify:"end"},{default:t(()=>[e(x)?(I(),Z(R,{key:0,disabled:e(k),ref:"cancelbutton",round:"",size:"large",onClick:L[1]||(L[1]=xe=>k.value=!0)},{default:t(()=>[n(ue,{show:e(k)&&!e(z),size:"small"},{default:t(()=>[T(p(e(c)("cancel")),1)]),_:1},8,["show"])]),_:1},8,["disabled"])):e(z)?(I(),Z(R,{key:1,onClick:M,round:"",size:"large",style:{"font-size":"small","margin-top":"1em"}},{default:t(()=>[T(p(e(c)("close")),1)]),_:1})):ee("",!0)]),_:1})]),_:1})]),_:1},8,["show","closable","title","type"])],64)}}}),Fl="/avif2jpeg/dist/avif.png",on=o=>(ht("data-v-61ec1790"),o=o(),yt(),o),Dl={class:"container-1"},jl=on(()=>y("span",null,"Drag & Drop",-1)),Ol={style:{position:"relative"}},Ul={style:{position:"absolute","font-size":"small",right:"-3.5em",bottom:"-1.1em","white-space":"nowrap"}},Bl={style:{color:"#666666","font-size":"smaller"}},Rl=on(()=>y("img",{src:Fl,class:"avif"},null,-1)),Zl=["innerHTML"],Nl={style:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","font-size":"xx-small","white-space":"nowrap"}},Vl=ge({__name:"droptarget",props:{forbidden:{type:Boolean},dropTarget:{}},emits:["drop"],setup(o,{emit:i}){Ze(Me);const c=o,d=i,l=Ko(),r=w(!1),s=w(0),g=w("");ke(()=>{h(c.dropTarget||document)});function h(_){document.ondragstart=v=>v.preventDefault(),document.ondragover=v=>v.preventDefault(),_.ondrop=async v=>{var k;if(v.preventDefault(),r.value||c.forbidden)return;r.value=!0,s.value=0,g.value="";let x;try{const z=[...v.dataTransfer.items].map(m=>m.webkitGetAsEntry());l.start(),x=await f(z),l.finish()}catch{x=[...((k=v.dataTransfer)==null?void 0:k.files)??[]],l.error()}r.value&&(r.value=!1,d("drop",x))}}async function f(_,v){v=v||[];for(const x of _)if(x.isFile){const k=await new Promise(z=>x.file(m=>z(m)));Object.defineProperty(k,"webkitRelativePath",{value:x.fullPath}),v.push(k),s.value++}else if(x.isDirectory){g.value=x.fullPath;const k=x.createReader();do{const z=await new Promise(m=>k.readEntries(A=>m(A)));if(!z.length)break;await f(z,v)}while(!0)}return v}return(_,v)=>{const x=he,k=Se,z=Ke,m=Le,A=vt;return I(),Q(we,null,[y("div",Dl,[n(m,{to:!1,"display-directive":"show",trigger:"hover",duration:0,delay:0,placement:"left"},{trigger:t(()=>[n(k,{vertical:"",class:"container-2"},{default:t(()=>[n(k,{align:"center",wrap:!1,class:"container-3"},{default:t(()=>[n(k,{align:"center"},{default:t(()=>[n(x,{size:"64",color:"white"},{default:t(()=>[n(e(Qo))]),_:1})]),_:1}),n(k,{vertical:"",align:"center",wrap:!1,style:{"font-weight":"bold","font-size":"x-large","line-height":"90%","white-space":"nowrap"}},{default:t(()=>[jl,y("span",Ol,[T(" AVIF Images "),y("span",Ul,[T(" or "),n(z,{placement:"bottom-end"},{trigger:t(()=>[y("span",Bl,[n(x,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Kt))]),_:1}),T(" Folders ")])]),default:t(()=>[T(" You can drag and drop your local folders ")]),_:1})])])]),_:1}),n(k,null,{default:t(()=>[Rl]),_:1})]),_:1})]),_:1})]),default:t(()=>[y("h3",{innerHTML:_.$t("droptarget"),style:{"max-width":"200px","text-align":"center","word-break":"keep-all","overflow-wrap":"break-word"}},null,8,Zl)]),_:1})]),n(A,{show:e(r),"onUpdate:show":v[0]||(v[0]=O=>be(r)?r.value=O:null),closable:!0,preset:"dialog",title:"Parsing dropped items.",type:"info","mask-closable":!1,"negative-text":_.$t("cancel")},{default:t(()=>[n(k,{vertical:"",align:"center"},{default:t(()=>[y("div",Nl,p(e(g)),1),y("div",null,"found "+p(e(s))+" files",1)]),_:1})]),_:1},8,["show","negative-text"])],64)}}}),Hl=Pe(Vl,[["__scopeId","data-v-61ec1790"]]),an=o=>(ht("data-v-977d699f"),o=o(),yt(),o),Wl={class:"container-1"},ql={class:"container-2"},Gl=["innerHTML"],Kl=["innerHTML"],Ql={style:{"padding-left":"1em"}},Yl=an(()=>y("br",null,null,-1)),Jl=an(()=>y("ul",null,[y("li",null,"Each extension must begin with a period. "),y("li",null,"Separate each extension with a comma. "),y("li",null,"Use alphameric characters.")],-1)),Xl=["innerHTML"],es=["accept"],ts=ge({__name:"file-selector",props:{expanded:{type:Boolean},target:{},userExtensions:{},forbidden:{type:Boolean}},emits:["input","on-change-accept","update:target","update:userExtensions","update:expanded"],setup(o,{emit:i}){const c=at(),{t:d}=$e(),l=Ze(Me),r=["avif_only","all_images","all_files","edit_type"],s=o,g=i,h=w(0),f=w(!1),_=w(!1),v=ce(()=>F(m.value)),x=ce(()=>A.value.split(",").every(G=>/^\s*(\.[\w\-]+)*\s*$/.test(G))?"success":"error"),k=ce(()=>!s.forbidden&&!_.value),z=ce({get:()=>s.expanded,set:D=>{g("update:expanded",D)}}),m=ce({get:()=>r.indexOf(s.target)>=0?s.target:r[0],set:D=>{g("update:target",D)}}),A=ce({get:()=>s.userExtensions,set:D=>{g("update:userExtensions",D)}}),O=w(null),P=w(null),$=w(E());Ae(m,D=>{g("on-change-accept",v.value)}),ke(()=>{});function a(D){D.click()}function b(){}function S(D){const C=[...D.target.files];O.value.value="",P.value.value="",ve(C)}function E(){return"webkitdirectory"in document.createElement("input")}function F(D){switch(D){case"avif_only":return".avif, .webp";case"all_images":return".jpg, .jpeg, .jfif, .pjpeg, .pjp, .gif, .png, .webp, .avif, .bmp, .apng, .ico";case"edit_type":return A.value;case"all_files":default:return".*"}}async function M(D){const G=String(v.value).toLowerCase().replace(/\s+/g,"");if(G&&v.value!==".*"){const C=G.split(",");D=D.filter(W=>C.includes(W.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),D.length||await new Promise(W=>{c.error({title:"Images Not Found",positiveText:"OK",onAfterLeave:W,content:()=>oe("div",[oe(Wt,{description:"NO IMAGES"}),`${d("noimage")}`,oe("br"),v.value])})})}return D}async function ve(D){_.value=!0,D=await M(D),h.value=D.length,D.length>0&&g("input",D),_.value=!1}return(D,G)=>{const C=he,W=qt,te=Ie,_e=Le,de=Se,pe=na,re=Yo,ne=Jo,ae=Ke,H=Xo,fe=xt,U=zt;return I(),Q(we,null,[y("div",Wl,[y("div",ql,[n(de,{vertical:"",align:"center",justify:"center",inline:""},{default:t(()=>[n(de,{align:"center",justify:"space-around"},{default:t(()=>[n(W,{value:e(h),max:999,offset:[-8,0],color:"#999999",style:{"margin-right":"1em"}},{default:t(()=>[n(C,{size:"4em",color:"#CCCCCC"},{default:t(()=>[n(e(ea))]),_:1})]),_:1},8,["value"]),n(de,{vertical:"",align:"stretch",justify:"center"},{default:t(()=>[n(_e,{to:!1,"display-directive":"show",show:e(l).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(l).LANDSCAPE.value?"right":"top",duration:0,delay:0,"z-index":10},{trigger:t(()=>[n(te,{disabled:!e(k),onClick:G[0]||(G[0]=L=>a(e(O))),round:"",style:{width:"100%"},color:"white","text-color":"black"},{icon:t(()=>[n(C,{size:"large",color:"gray"},{default:t(()=>[n(e(Qt))]),_:1})]),default:t(()=>[T(" "+p(D.$t("loadbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[y("div",{innerHTML:D.$t("loadbuttontooltip")},null,8,Gl)]),_:1},8,["show","placement"]),!e(l).IS_SP&&e($)||e(l).SSR?(I(),Z(_e,{key:0,to:!1,"display-directive":"show",trigger:"hover",placement:"left","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:e(l).showTooltipsBeforeMounted.value},{trigger:t(()=>[n(te,{disabled:!e(k),onClick:G[1]||(G[1]=L=>a(e(P))),round:"",style:{width:"100%"},color:"white","text-color":"black"},{icon:t(()=>[n(C,{size:"large",color:"gray"},{default:t(()=>[n(e(Kt))]),_:1})]),default:t(()=>[T(" "+p(D.$t("loadfolderbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[y("div",{innerHTML:D.$t("loadfoldertooltip")},null,8,Kl)]),_:1},8,["show"])):ee("",!0)]),_:1})]),_:1}),y("div",{class:We({"expand-ext-list-container":e(z)})},[n(U,{"display-directive":"show","expanded-names":e(z)?["extItem"]:"","on-update:expanded-names":L=>{z.value=!!(""+L)},class:We({"expand-ext-list":e(z)})},{"header-extra":t(()=>[n(C,{size:"large"},{default:t(()=>[n(e(ta))]),_:1})]),default:t(()=>[n(fe,{title:D.$t("fileTypeRadioTitle"),name:"extItem"},{default:t(()=>[n(H,{value:e(m),"onUpdate:value":G[5]||(G[5]=L=>be(m)?m.value=L:null),name:"filetyperadios",size:"small"},{default:t(()=>[n(de,{vertical:"",style:{"padding-left":"1em"}},{default:t(()=>[(I(),Q(we,null,Ue(r,L=>n(_e,{key:L,trigger:"hover","keep-alive-on-hover":!1,"z-index":5,placement:"left",style:{"max-width":"200px"},duration:0,delay:0},{trigger:t(()=>[n(pe,{value:L},{default:t(()=>[T(p(D.$t("fileTypeRadioOptions."+L)),1)]),_:2},1032,["value"])]),default:t(()=>[T(" "+p(F(L).replace(/,/g,", ")),1)]),_:2},1024)),64)),n(_e,{trigger:"hover","keep-alive-on-hover":!1,placement:"bottom-start",show:e(f),duration:0,delay:0},{trigger:t(()=>[y("div",Ql,[n(ae,{trigger:"manual",placement:"right-end",show:e(m)==="edit_type"&&e(x)!=="success"&&!!e(f)},{trigger:t(()=>[n(re,{value:e(A),"onUpdate:value":G[2]||(G[2]=L=>be(A)?A.value=L:null),status:e(x),disabled:e(m)!=="edit_type",onFocus:G[3]||(G[3]=L=>f.value=!0),onBlur:G[4]||(G[4]=L=>f.value=void 0),clearable:!0,size:"small",placeholder:".jpg, .gif, .png",spellcheck:"false"},null,8,["value","status","disabled"])]),default:t(()=>[n(ne,{type:"error","show-icon":!0,title:"Validation error"},{default:t(()=>[T(" Please correct the extension list."),Yl,Jl]),_:1})]),_:1},8,["show"])])]),default:t(()=>[y("span",{innerHTML:D.$t("editAcceptTypes")},null,8,Xl)]),_:1},8,["show"])]),_:1})]),_:1},8,["value"])]),_:1},8,["title"])]),_:1},8,["expanded-names","on-update:expanded-names","class"])],2),e(l).IS_SP?ee("",!0):(I(),Z(Hl,{key:0,onDrop:ve,forbidden:!e(k)},null,8,["forbidden"]))]),_:1})])]),y("input",{ref_key:"fileinput",ref:O,onInput:S,onCancel:b,type:"file",multiple:"",accept:e(v),style:{display:"none"}},null,40,es),y("input",{ref_key:"folderinput",ref:P,webkitdirectory:"",directory:"",onInput:S,onCancel:b,type:"file",style:{display:"none"}},null,544)],64)}}}),ns=Pe(ts,[["__scopeId","data-v-977d699f"]]),os={style:{"white-space":"nowrap"}},as=ge({__name:"settings-output",props:{quality:{},format:{}},emits:["update:format","update:quality"],setup(o,{emit:i}){const c=o,d=i,{t:l}=$e(),r=Ze(Me),s=w([]),g=["image/jpeg","image/png","image/gif","image/bmp","image/avif","image/webp"],h=ce({get:()=>c.format,set:z=>{z=x(z),d("update:format",z)}}),f=ce({get:()=>c.quality,set:z=>{d("update:quality",z)}}),_=ce(()=>/png|bmp/i.test(h.value)),v=w(null);ke(()=>{k()});function x(z){return s.value.indexOf(z)<0&&(z=s.value[0]),z}function k(){for(const z of g)v.value.toDataURL(z).indexOf(z)>=0&&s.value.push(z);s.value.length===0&&s.value.push(g[0])}return(z,m)=>{const A=he,O=Yt,P=Se,$=Le,a=wt,b=bt;return I(),Q(we,null,[n(P,{justify:"center"},{default:t(()=>[n(P,{vertical:""},{default:t(()=>[n($,{to:!1,"display-directive":"show",show:e(r).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(r).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(P,{align:"center"},{default:t(()=>[n(A,null,{default:t(()=>[n(e(Qt))]),_:1}),T(p(e(l)("settings.imageType"))+": ",1),n(O,{value:h.value,"onUpdate:value":m[0]||(m[0]=S=>h.value=S),options:s.value.map(S=>({value:S,label:S})),"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),_:1})]),default:t(()=>[T(" "+p(e(l)("settings.imageTypeTooltip")),1)]),_:1},8,["show","placement"]),n($,{to:!1,"display-directive":"show",show:e(r).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(r).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(P,{align:"center"},{default:t(()=>[n(P,{align:"start",wrap:!1},{default:t(()=>[n(A,null,{default:t(()=>[n(e(Gt))]),_:1}),y("span",os,p(e(l)("settings.quality"))+":",1),n(P,{align:"center",justify:"space-between"},{default:t(()=>[n(a,{tooltip:!1,value:f.value,"onUpdate:value":m[1]||(m[1]=S=>f.value=S),step:1,style:{width:"120px"},disabled:_.value},null,8,["value","disabled"]),n(b,{value:f.value,"onUpdate:value":m[2]||(m[2]=S=>f.value=S),step:"1",min:"0",max:"100",disabled:_.value,style:{width:"90px"},size:"small"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:t(()=>[T(" "+p(e(l)("settings.qualitytooltip")),1)]),_:1},8,["show","placement"])]),_:1})]),_:1}),y("canvas",{ref_key:"canvas",ref:v,width:"1",height:"1",style:{display:"none"}},null,512)],64)}}}),Pt=100,Mt=2e3,ls=ge({__name:"settings-adv",props:{expanded:{type:Boolean},retainExt:{type:Boolean},maxZipSize:{},multithread:{type:Boolean},threadCount:{},threadMax:{}},emits:["update:expanded","update:retainExt","update:maxZipSize","update:multithread","update:threadCount"],setup(o,{emit:i}){const c=o,d=i,l=ce({get:()=>c.expanded,set:f=>{d("update:expanded",f)}}),r=ce({get:()=>c.retainExt,set:f=>{d("update:retainExt",f)}}),s=ce({get:()=>c.maxZipSize,set:f=>{d("update:maxZipSize",f)}}),g=ce({get:()=>c.multithread,set:f=>{d("update:multithread",f)}}),h=ce({get:()=>typeof c.threadCount>"u"?c.threadMax:c.threadCount,set:f=>{d("update:threadCount",f)}});return Ae(()=>[c.threadMax,c.threadCount],([f])=>{f>1&&typeof c.threadCount>"u"&&(h.value=f)}),(f,_)=>{const v=he,x=Ie,k=Le,z=oa,m=Ne,A=wt,O=bt,P=xt,$=zt;return I(),Z(m,{justify:"center"},{default:t(()=>[n($,{"display-directive":"show","default-expanded-names":e(l)?["collapitem"]:"","on-update:expanded-names":a=>l.value=!!String(a),"trigger-areas":["arrow","main"],class:We(["settings-body",e(l)?"expand-adv-settings":""])},Ht({arrow:t(()=>[n(v,{style:J(e(l)&&{top:"8px"})},{default:t(()=>[n(e(aa))]),_:1},8,["style"]),n(v,null,{default:t(()=>[n(e(la))]),_:1})]),default:t(()=>[n(P,{title:f.$t("settings.advancedSettings"),name:"collapitem"},{default:t(()=>[n(m,{vertical:"",style:{"padding-left":"2em"}},{default:t(()=>[n(k,{trigger:"hover",placement:"left","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(m,{wrap:!1,align:"center"},{default:t(()=>[n(x,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:_[0]||(_[0]=a=>r.value=!e(r))},{icon:t(()=>[n(v,null,{default:t(()=>[n(e(Vt))]),_:1})]),default:t(()=>[T(" "+p(f.$t("settings.retainOriginalExtension")),1)]),_:1}),n(z,{value:e(r),"onUpdate:value":_[1]||(_[1]=a=>be(r)?r.value=a:null),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[T(" "+p(f.$t("settings.retainExtTooltip")),1)]),_:1}),n(k,{trigger:"hover",placement:"left","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(m,{vertical:""},{default:t(()=>[n(m,{wrap:!1,align:"center"},{default:t(()=>[n(x,{text:"",focusable:!1,style:{"white-space":"nowrap","font-size":"smaller"}},{icon:t(()=>[n(v,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(sa))]),_:1})]),default:t(()=>[T(" "+p(f.$t("settings.maxZipFileSize"))+": ",1)]),_:1})]),_:1}),n(m,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(A,{tooltip:!1,value:e(s),"onUpdate:value":_[2]||(_[2]=a=>be(s)?s.value=a:null),step:1,min:Pt,max:Mt,style:{width:"120px"}},null,8,["value"]),n(O,{size:"tiny",value:e(s),"onUpdate:value":_[3]||(_[3]=a=>be(s)?s.value=a:null),step:"1",min:Pt,max:Mt,style:{width:"10em"}},{suffix:t(()=>[T("(MB)")]),_:1},8,["value"])]),_:1})]),_:1})]),default:t(()=>[T(" "+p(f.$t("settings.maxZipFileSizeTooltip")),1)]),_:1}),n(k,{trigger:"hover",placement:"left","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(m,{vertical:""},{default:t(()=>[n(m,{wrap:!1,align:"center"},{default:t(()=>[n(x,{text:"",disabled:!c.threadMax,style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:_[4]||(_[4]=a=>g.value=!e(g))},{icon:t(()=>[n(v,null,{default:t(()=>[n(e(ia))]),_:1})]),default:t(()=>[T(" "+p(f.$t("settings.enableMultiThreads")),1)]),_:1},8,["disabled"]),n(z,{value:e(g),"onUpdate:value":_[5]||(_[5]=a=>be(g)?g.value=a:null),disabled:!c.threadMax,size:"small"},null,8,["value","disabled"])]),_:1}),n(m,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(A,{value:e(h),"onUpdate:value":_[6]||(_[6]=a=>be(h)?h.value=a:null),disabled:!c.threadMax||!e(g),step:1,min:2,max:c.threadMax,style:{width:"120px"}},null,8,["value","disabled","max"]),n(O,{size:"tiny",value:e(h),"onUpdate:value":_[7]||(_[7]=a=>be(h)?h.value=a:null),disabled:!c.threadMax||!e(g),step:1,min:2,max:c.threadMax,style:{width:"10em"}},{suffix:t(()=>[T(p(f.$t("threads",e(h))),1)]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[T(" "+p(f.$t("settings.multiThreadsTooltip")),1)]),_:1})]),_:1})]),_:1},8,["title"])]),_:2},[e(l)?{name:"header-extra",fn:t(()=>[n(k,{"keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(x,{onClick:e(xa),size:"tiny",style:{"font-size":"xx-small"}},{default:t(()=>[T(p(f.$t("reset")),1)]),_:1},8,["onClick"])]),default:t(()=>[T(" "+p(f.$t("settings.resetButtonTooltip")),1)]),_:1})]),key:"0"}:void 0]),1032,["default-expanded-names","on-update:expanded-names","class"])]),_:1})}}}),ss=Pe(ls,[["__scopeId","data-v-69ab40d5"]]),is={},rs={style:{color:"gray","padding-left":"20px"}},us=["innerHTML"];function cs(o,i){const c=_t,d=Se;return I(),Z(d,{vertical:"",justify:"end"},{default:t(()=>[n(c,{style:{margin:"0px"}}),n(d,{justify:"center"},{default:t(()=>[y("ul",rs,[(I(!0),Q(we,null,Ue(o.$tm("descriptions"),l=>(I(),Q("li",{key:l,style:{"text-align":"left"},innerHTML:l},null,8,us))),128))])]),_:1})]),_:1})}const ds=Pe(is,[["render",cs]]),ps="modulepreload",fs=function(o){return"/avif2jpeg/dist/"+o},Ft={},ie=function(i,c,d){let l=Promise.resolve();if(c&&c.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),g=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));l=Promise.allSettled(c.map(h=>{if(h=fs(h),h in Ft)return;Ft[h]=!0;const f=h.endsWith(".css"),_=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${_}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":ps,f||(v.as="script"),v.crossOrigin="",v.href=h,g&&v.setAttribute("nonce",g),document.head.appendChild(v),f)return new Promise((x,k)=>{v.addEventListener("load",x),v.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${h}`)))})}))}function r(s){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=s,window.dispatchEvent(g),!g.defaultPrevented)throw s}return l.then(s=>{for(const g of s||[])g.status==="rejected"&&r(g.reason);return i().catch(r)})},ln="English",sn="üá¨üáß",rn='AVIF to JPEG "Offline" Batch Converter',un="It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",cn="Drag & Drop AVIF Images to Convert",dn=["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data is sent to any server</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.'],pn="Select your language",fn="Choose Target File Extentions",mn={avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types",edit_type:"Edit File Extension List"},gn="Input a list of comma separated file extentions to load.<br>e.g.) .jpg,.gif,.png",vn="Load Images",_n="Select your images from a dialog window.<br>*Multiple selection allowed.",hn="Load a Whole Folder",yn=`Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>*It will show "Upload" button, but it actually doesn't upload anything to any server.`,wn="Converting images",bn="Aborted",An="Some files failed to convert",xn="Completed",zn="Currently Busy",kn="No files with the extentions were found.",Tn="Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",In="Cancel",Sn="Save",Cn="Close",Ln="Open",$n="Re-convert",En="Convert previous selected {n} @:files again",Pn="File | Files",Mn="thread | threads",Fn="You have not saved the converted images yet.",Dn="Data have not been saved",jn="Open Source",On="Open the converted image",Un="Copied to clipboard",Bn="The converted image was copied to your clipboard as DataURL.",Rn="Copy the converted image as DataURL",Zn="Convert Again",Nn={expandLogTooltip:"Displaying the entire log may severely reduce conversion speed.",expandLog:"Show entire log",autoScroll:"Auto scroll",showOnlyErrors:"Show only errors",log:"Log",outInRate:"Out / In Ratio",elapsedTime:"Elapsed Time",multiThreading:"Multi-Threading",outputSettings:"Output Settings",totalSize:"Total Size",totalFiles:"Number of Files",confirmDownloadMessage:"It will start to download {0} zip files.",inputSize:"Input Size",outputSize:"Output Size",filterSuccess:"Hide completed item",progressErrors:"Failed items",progressStarted:"Started Items",progressTotal:"Total number of files",zippingProgress:"Zipping progress",zipped:"ZIPPED",openFailedList:"Open failed file list",zipFailedList:"Pack failed files into Zips",table:{index:"index",status:"status",core:"thread",details:"file"},saveFailedList:"Save failed file list",done:"done",convertedZips:"successfully completed ZIP",progressSuccess:"Completed Files",downloadConvertedImage:"Download Converted Image",failureZippingFailedFiles:"Failure while zipping the failed files.",browseConvertedImages:"Browse converted images"},Vn={maxZipFileSize:"Max zip file size",retainExtTooltip:"New extension will be appended to original extension",retainOriginalExtension:"Keep Original File Extension",qualitytooltip:"Set image quality for output",quality:"Image Quality",maxZipFileSizeTooltip:"Set smaller value if memory problems occur.",ignoreExtTooltip:'Try to load files that don"t have image file extension',ignoreFileExtensions:"Load All File Types",imageTypeTooltip:"Choose image format for output",imageType:"Image Type",advancedSettings:"Advanced Settings",enableMultiThreads:"Enable multi-threading",resetButtonTooltip:"Restore all settings to default.",multiThreadsTooltip:"Convert images in multi-threaded"},Hn="Disabled",Wn="Download",qn="Reset",Gn="Back",Kn="Failed",Qn="Success",Yn="Previous version",Jn={lang:ln,flags:sn,title:rn,metaDescription:un,droptarget:cn,descriptions:dn,selectLanguage:pn,fileTypeRadioTitle:fn,fileTypeRadioOptions:mn,editAcceptTypes:gn,loadbutton:vn,loadbuttontooltip:_n,loadfolderbutton:hn,loadfoldertooltip:yn,processing:wn,aborted:bn,incomplete:An,completed:xn,interfered:zn,noimage:kn,avifUnsupported:Tn,cancel:In,save:Sn,close:Cn,open:Ln,reconvert:$n,reconvertTip:En,files:Pn,threads:Mn,confirmCloseDialog:Fn,confirmCloseDialogTitle:Dn,githubOpenSource:jn,convertedImageUrlTooltip:On,copiedDataURLDialogTitle:Un,copiedDataURLMessage:Bn,convertedImageDataUrlTooltip:Rn,convertAgain:Zn,status:Nn,settings:Vn,disabled:Hn,Download:Wn,reset:qn,back:Gn,failed:Kn,success:Qn,previousVersion:Yn},ms=Object.freeze(Object.defineProperty({__proto__:null,Download:Wn,aborted:bn,avifUnsupported:Tn,back:Gn,cancel:In,close:Cn,completed:xn,confirmCloseDialog:Fn,confirmCloseDialogTitle:Dn,convertAgain:Zn,convertedImageDataUrlTooltip:Rn,convertedImageUrlTooltip:On,copiedDataURLDialogTitle:Un,copiedDataURLMessage:Bn,default:Jn,descriptions:dn,disabled:Hn,droptarget:cn,editAcceptTypes:gn,failed:Kn,fileTypeRadioOptions:mn,fileTypeRadioTitle:fn,files:Pn,flags:sn,githubOpenSource:jn,incomplete:An,interfered:zn,lang:ln,loadbutton:vn,loadbuttontooltip:_n,loadfolderbutton:hn,loadfoldertooltip:yn,metaDescription:un,noimage:kn,open:Ln,previousVersion:Yn,processing:wn,reconvert:$n,reconvertTip:En,reset:qn,save:Sn,selectLanguage:pn,settings:Vn,status:Nn,success:Qn,threads:Mn,title:rn},Symbol.toStringTag,{value:"Module"})),Xn="Japanese",eo="Chinese",to="Ukrainian",no="Turkish",oo="Russian",ao="Portuguese",lo="Polish",so="Dutch",io="Korean",ro="Italian",uo="Indonesian",co="Hindi",po="French",fo="Spanish",mo="English",go="German",vo="Arabic",_o={browseConvertedImages:"Browse converted images"},ho={ja:Xn,zh:eo,"zh-hant":"Chinese(hant)",uk:to,tr:no,ru:oo,pt:ao,pl:lo,nl:so,ko:io,it:ro,id:uo,hi:co,fr:po,es:fo,en:mo,de:go,ar:vo,status:_o},gs=Object.freeze(Object.defineProperty({__proto__:null,ar:vo,de:go,default:ho,en:mo,es:fo,fr:po,hi:co,id:uo,it:ro,ja:Xn,ko:io,nl:so,pl:lo,pt:ao,ru:oo,status:_o,tr:no,uk:to,zh:eo},Symbol.toStringTag,{value:"Module"})),tt=[],yo={en:Jn},kt={},Dt=Object.assign({"./locales/ar.json":()=>ie(()=>import("./ar-DG_TyH0l.js"),[]),"./locales/de.json":()=>ie(()=>import("./de-BKQ1YZW1.js"),[]),"./locales/en.json":()=>ie(()=>Promise.resolve().then(()=>ms),void 0),"./locales/es.json":()=>ie(()=>import("./es-FyXUX11r.js"),[]),"./locales/fr.json":()=>ie(()=>import("./fr-CNeOu9ow.js"),[]),"./locales/hi.json":()=>ie(()=>import("./hi-DmwGm9Jx.js"),[]),"./locales/id.json":()=>ie(()=>import("./id-NBjXHgxa.js"),[]),"./locales/it.json":()=>ie(()=>import("./it-DjPNGeZf.js"),[]),"./locales/ja.json":()=>ie(()=>import("./ja-CnPy9wHS.js"),[]),"./locales/ko.json":()=>ie(()=>import("./ko-BPQUzibO.js"),[]),"./locales/langlist.json":()=>ie(()=>Promise.resolve().then(()=>gs),void 0),"./locales/nl.json":()=>ie(()=>import("./nl-OQQdIhSD.js"),[]),"./locales/pl.json":()=>ie(()=>import("./pl-CkeOhlBO.js"),[]),"./locales/pt.json":()=>ie(()=>import("./pt-DQbXk9Kl.js"),[]),"./locales/ru.json":()=>ie(()=>import("./ru-BVAuokFX.js"),[]),"./locales/tr.json":()=>ie(()=>import("./tr-B1nkTEr-.js"),[]),"./locales/uk.json":()=>ie(()=>import("./uk-DMIE9tAP.js"),[]),"./locales/zh-hant.json":()=>ie(()=>import("./zh-hant-BMxm1o6T.js"),[]),"./locales/zh.json":()=>ie(()=>import("./zh-BykOBR3X.js"),[])});var jt;for(const o in Dt){const i=(jt=o.match(/\/([a-z]{2}(?:-[a-z]+)?)\.json$/i))==null?void 0:jt[1];i&&(tt.push(i),!(i in yo)&&(kt[i]=Dt[o]))}let gt=_s();gt in kt||(gt="en");const nt=ra({legacy:!1,globalInjection:!0,locale:gt,fallbackLocale:"en",messages:yo,warnHtmlMessage:!1,missingWarn:!1,fallbackWarn:!1});async function vs(o){if(nt.global.availableLocales.indexOf(o)>=0)return;const i=await kt[o]();nt.global.setLocaleMessage(o,i),await At()}function _s(){const o=location.pathname;return String(o.match(/[^/]+(?=\/?$)/)||"").toLowerCase()}const hs=["innerHTML"],ys=ge({__name:"switch-lang",emits:["lang-ready","lang-change"],async setup(o,{emit:i}){let c,d;const l=Ze(Me),r=Ut(),{locale:s,t:g}=$e(),h=i,f=Object.entries(ho).map(([m,A])=>({label:A,value:m}));f.sort((m,A)=>{const O=m.label,P=A.label;return O>P?1:O<P?-1:0}),ke(()=>{r.afterEach((m,A,O)=>{v(),l.switchToolTipVisibility()})}),ua(async()=>{}),[c,d]=ca(()=>v()),await c,d();async function _(m){(m!==s.value||nt.global.availableLocales.indexOf(m)===-1)&&(h("lang-change",m),await vs(m),s.value=m,document.title=g("title"),await At()),h("lang-ready",m)}async function v(){const m=r.currentRoute.value.path||"",A=String(m.match(new RegExp("(?<=^\\/)[^/]+"))||"");A&&tt.includes(A)?(await _(A),s.value=A):await x()}async function x(){const m=k().toLowerCase(),A=m.split(/[-_]/)[0];if(tt.includes(A)){let O=A;if(A==="zh")switch(m){case"zh-hant":case"zh-mo":case"zh-hk":case"zh-tw":O="zh-hant"}await _(O)}}function k(){const m=window.navigator;return m.language||m.userLanguage||m.browserLanguage}function z(m){r.push("/"+m+"/")}return(m,A)=>{const O=he,P=Yt,$=Le;return I(),Z($,{to:!1,"display-directive":"show",show:e(l).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(l).LANDSCAPE.value?"left":"bottom",duration:0,delay:50},{trigger:t(()=>[n(P,{ref:"langselect",size:"tiny",style:{width:"100%"},"consistent-menu-width":!1,options:e(f),"_v-model:value":"locale",value:e(s),"onUpdate:value":z},{arrow:t(()=>[n(O,null,{default:t(()=>[n(e(da))]),_:1})]),_:1},8,["options","value"])]),default:t(()=>[y("div",{innerHTML:m.$t("selectLanguage")},null,8,hs)]),_:1},8,["show","placement"])}}}),ws=y("span",null,"CONVERT TOüëá",-1),Me=Symbol("global variables"),bs=ge({__name:"Avif2Jpeg",emits:["ready"],setup(o,{emit:i}){$e();const c=i,d=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),l=w(null),r=w(2);let s=w(void 0);const g=w(!0),h=w(!1),f=w(!1),_=w(!1);pa(Me,{showTooltipsBeforeMounted:s,LANDSCAPE:g,IS_SP:d,switchToolTipVisibility:A,SSR:!1}),ke(()=>{O(),window.addEventListener("resize",O),A(),setTimeout(()=>f.value=!0,3e3)});const v=200;let x=0,k=!0;function z(){_.value=!1,x=Date.now()}function m(){const $=k?0:Math.max(0,v-(Date.now()-x));k=!1,setTimeout(()=>_.value=!0,$),c("ready")}async function A(){}function O(){const $=document.body.clientWidth,a=document.body.clientHeight;g.value=$*.75>a||$>900}function P($){l.value=$}return($,a)=>{const b=Se,S=he,E=Ke,F=Ne;return I(),Z(F,{vertical:"",align:"stretch",justify:"start",style:{height:"100%",position:"relative"}},{default:t(()=>[n(Ma,null,{"lang-switch":t(()=>[(I(),Z(fa,null,{default:t(()=>[n(ys,{onLangChange:z,onLangReady:m})]),_:1}))]),_:1}),n(Oe,{name:"fade"},{default:t(()=>[e(_)?(I(),Z(F,{key:0,vertical:"",align:"stretch",justify:"space-between",style:{height:"100%"}},{default:t(()=>[n(ja),n(b,{justify:"center"},{default:t(()=>[n(ns,{expanded:e(V).expandExtButtons,"onUpdate:expanded":a[0]||(a[0]=M=>e(V).expandExtButtons=M),target:e(V).acceptTypeValue,"onUpdate:target":a[1]||(a[1]=M=>e(V).acceptTypeValue=M),userExtensions:e(V).editedAcceptTypes,"onUpdate:userExtensions":a[2]||(a[2]=M=>e(V).editedAcceptTypes=M),forbidden:e(h),onInput:P},null,8,["expanded","target","userExtensions","forbidden"])]),_:1}),n(Ml,{input:e(l),format:e(V).imageFormat,quality:e(V).imageQuality,"retain-extension":e(V).retainExtension,maxZipSizeMB:e(V).maxZipSizeMB,threads:e(V).multithread?e(V).threadCount:0,onStart:a[3]||(a[3]=M=>h.value=!0),onEnd:a[4]||(a[4]=M=>h.value=!1),onMultiThreadCount:a[5]||(a[5]=M=>r.value=M)},null,8,["input","format","quality","retain-extension","maxZipSizeMB","threads"]),n(b,{vertical:"",align:"center"},{default:t(()=>[n(E,{trigger:"manual",placement:"top","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(S,{size:"4vh",color:"#DADADA",style:{margin:"0px"}},{default:t(()=>[n(e(ma))]),_:1})]),default:t(()=>[ws]),_:1})]),_:1}),n(b,{vertical:"",align:"center"},{default:t(()=>[n(as,{format:e(V).imageFormat,"onUpdate:format":a[6]||(a[6]=M=>e(V).imageFormat=M),quality:e(V).imageQuality,"onUpdate:quality":a[7]||(a[7]=M=>e(V).imageQuality=M)},null,8,["format","quality"]),n(ss,{"retain-ext":e(V).retainExtension,"onUpdate:retainExt":a[8]||(a[8]=M=>e(V).retainExtension=M),"max-zip-size":e(V).maxZipSizeMB,"onUpdate:maxZipSize":a[9]||(a[9]=M=>e(V).maxZipSizeMB=M),expanded:e(V).expandAdvSettings,"onUpdate:expanded":a[10]||(a[10]=M=>e(V).expandAdvSettings=M),multithread:e(V).multithread,"onUpdate:multithread":a[11]||(a[11]=M=>e(V).multithread=M),"thread-count":e(V).threadCount,"onUpdate:threadCount":a[12]||(a[12]=M=>e(V).threadCount=M),"thread-max":e(r)||0},null,8,["retain-ext","max-zip-size","expanded","multithread","thread-count","thread-max"])]),_:1}),n(ds)]),_:1})):ee("",!0)]),_:1})]),_:1})}}}),Tt=ge({__name:"App",setup(o){const i={Statistic:{valueFontSize:"1em"},Popover:{borderRadius:"0.4em",boxShadow:"2px 2px 5px 0px #555555"},Tooltip:{color:"#000000AA"},Image:{toolbarColor:"#00000099"}},c=w(!0);return ke(()=>{c.value=!1}),(d,l)=>{const r=va,s=_a,g=ha,h=ya,f=wa,_=ga;return I(),Z(_,{"theme-overrides":i,style:{width:"100%",height:"100%"}},{default:t(()=>[n(f,null,{default:t(()=>[n(h,{placement:"top-right",max:20},{default:t(()=>[n(g,{placement:"top-left",closable:!0,max:50},{default:t(()=>[n(s,null,{default:t(()=>[n(r,null,{default:t(()=>[n(bs,{class:We({hide:e(c)})},null,8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),wo=[{path:"/",name:"Home",component:Tt}];for(const o of tt)wo.push({path:"/"+o+"/",strict:!0,name:o,component:Tt});ba(Tt,{routes:wo,base:"/avif2jpeg/dist/"},({app:o,router:i,routes:c,isClient:d,initialState:l})=>{o.use(nt)});
