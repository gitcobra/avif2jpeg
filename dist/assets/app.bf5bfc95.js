var et=(o,i)=>()=>(i||o((i={exports:{}}).exports,i),i.exports);import{d as ve,r as d,u as tt,a as ut,o as Ue,w as fe,b as I,c as H,e as A,f as at,n as ot,F as ee,g as u,h as t,i as Fe,j as e,N as X,t as y,k as lt,l as nt,m as it,p as Le,q as Se,s as rt,v as st,x as ct,y as Te,z as Ne,A as h,B as dt,C as j,D as ze,E as $,G as J,H as Pe,I as F,J as W,K as ft,L as R,M as pt,O as gt,P as vt,Q as mt,R as At,S as ht,T as yt,U as Et,V as Ft,W as _t,X as Bt,Y as bt,Z as wt,_ as Ct,$ as Dt,a0 as xt,a1 as kt}from"./vendor.d9c76061.js";var Fu=et((je,we)=>{(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))v(l);new MutationObserver(l=>{for(const m of l)if(m.type==="childList")for(const f of m.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&v(f)}).observe(document,{childList:!0,subtree:!0});function c(l){const m={};return l.integrity&&(m.integrity=l.integrity),l.referrerpolicy&&(m.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?m.credentials="include":l.crossorigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function v(l){if(l.ep)return;l.ep=!0;const m=c(l);fetch(l.href,m)}})();var It=function(){typeof we=="object"&&typeof je=="object"&&(we.exports=_);for(var o=typeof Uint8Array<"u",i=o?Uint8Array:Array,c=new(o?Uint32Array:Array)(256),v=0;v<256;v++){for(var l=v,m=0;m<8;m++)l=1&l?3988292384^l>>>1:l>>>1;c[v]=l}function f(p){var s=[];return encodeURIComponent(p).replace(/%(..)|(.)/g,function(D,B,b){s.push(B?parseInt(B,16):b.charCodeAt(0))}),o?new i(s):s}function S(p){return[255&p,p>>8&255,p>>16&255,p>>24&255]}function _(){this._d={},this._lfh=[],this._curLFHind=0,this._cdh=[],this._cdhLen=0,this._c=0}return _.prototype={add:function(p,s){if(!p)throw new Error("path is empty");if(p=String(p).replace(/\\/g,"/"),/\/{2,}|\\|^\/|^[a-z]+:/i.test(p))throw new Error('invalid path. containing a drive letter, a leading slash, or empty directory name: "'+p+'"');var D=0,B=0;if(s!==void 0){if(!/[^/]+$/.test(p))throw new Error('needs a file name: "'+p+'"');if(!((s=typeof s=="string"?f(s):s)instanceof i))try{if(!(s.buffer||s instanceof Array||s instanceof ArrayBuffer||s instanceof Buffer))throw new Error;s=new Uint8Array(s.buffer||s)}catch{throw new Error("data must be one of type Array, TypedArray, ArrayBuffer, Buffer, or string.")}if(this.has(p))throw new Error("the file already exists: "+p);D=s.length,B=function(U){for(var w=4294967295,V=0,O=U.length;V<O;V++)w=c[255&(w^U[V])]^w>>>8;return(4294967295^w)>>>0}(s)}for(var b=new Date,T=S(b.getFullYear()-1980<<25|b.getMonth()+1<<21|b.getDate()<<16|b.getHours()<<11|b.getMinutes()<<5|b.getSeconds()/2),x=p.replace(/\/+$/,"").split("/"),L="";x.length;){L+=x.shift();var z,N,k,C,P=s&&x.length===0;L+=P?"":"/",this._d[L]||(this._d[L]=!0,this._c++,N=(z=f(L)).length,C=S(k=P?D:0),this._lfh.push([80,75,3,4]),C=[10,0,0,8,0,0].concat(T,S(P?B:0),C,C,[255&N,N>>8&255,0,0]),this._lfh.push(C,z),this._cdh.push([80,75,1,2,10,0].concat(C,[0,0,0,0,0,0,P?0:16,0,0,0],S(this._curLFHind)),z),this._cdhLen+=46+N,this._curLFHind+=30+N+k)}s&&this._lfh.push(s)},has:function(p){return!!this._d[p.replace(/\/+$/,"")]},zip:function(){var p=[80,75,5,6,0,0,0,0,255&this._c,this._c>>8,255&this._c,this._c>>8].concat(S(this._cdhLen),S(this._curLFHind),[0,0]),s=this._lfh.concat(this._cdh,[p]);if(i===Array)B=[].concat.apply([],s);else for(var D=0,B=new i(this._curLFHind+this._cdhLen+p.length),b=0;b<s.length;b++){var T=s[b];B.set(T,D),D+=T.length}return B},url:function(){if(typeof Blob!="function"||typeof URL!="function")return null;var p=this.zip(),p=new Blob([p],{type:"application/zip"});return window.URL.createObjectURL(p)}},_}();let _e=!1,q=!1,de=["image/png"],ge=[];const Lt=ve({name:"converter",emits:["mounted","start","progress","success","failure","complete","prevent","noimage","avifsupport","imgload"],props:{target:[HTMLElement,HTMLDocument],format:{type:String,default:de[0],validator(o){return de.includes(o)}},quality:{type:Number,default:95,validator(o){return o>=0&&o<=100}},accept:String,processing:Boolean,input:Array,sendmessage:Array,style:Object,retainExtension:Boolean},setup(o,i){const c=d(null);let v,l;if(o.target&&!(o.target instanceof Node))throw new Error("target attribute must be a HTMLElement");const m=d(null),f=d(null);tt();const S=ut();return Ue(async()=>{l=c.value.getContext("2d"),f.value=o.style;const _=m.value;v=o.target||_,St(v,l,i,o),de=Pt(),i.emit("mounted",{formats:de}),i.emit("avifsupport",await zt())}),fe(()=>o.input,_=>{_!=null&&_.length&&(ge=_,Be(_,l,i,o))}),fe(()=>o.sendmessage,([_={},p="info"])=>{if(typeof _=="string"){switch(_){case"destroy":S.destroyAll();break;case"reconvert":const s=ge;s!=null&&s.length&&Be(s,l,i,o);break}return}S[p](_)}),fe(()=>o.processing,_=>{_||(q=!0)}),{container:m,canvas:c}}});function St(o,i,c,v){document.ondragstart=l=>l.preventDefault(),document.ondragover=l=>l.preventDefault(),o.ondrop=async l=>{var m,f;l.preventDefault(),ge=[...((m=l.dataTransfer)==null?void 0:m.files)||[]],Be((f=l.dataTransfer)==null?void 0:f.files,i,c,v)}}function Be(o,i,c,v){if(_e){c.emit("prevent");return}let l=Tt(o);if(v.accept&&(String(v.accept).toLowerCase(),l=l.filter(m=>v.accept.includes(m.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),!l.length)){c.emit("noimage");return}_e=!0,q=!1,Nt(l,i,c,v)}function Tt(o){let i;if(o instanceof Event)i=o.target.files;else if(o instanceof File)i=[o];else if(o instanceof FileList||o instanceof Array)i=o;else return console.log("could not find any file"),[];return[...i]}async function Nt(o,i,c,v){const l=i.canvas,m=new It,f=v.format,S=v.quality/100,_=[...f.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg");c.emit("start",{list:o,length:o.length});const p=o.length;let s=0,D=0,B=0,b=null,T="",x="";for(const k of o){if(q)break;const C=k.name,P=k.size,U=k.relativePath||k.webkitRelativePath,w=document.createElement("img");c.emit("progress",{name:C,index:s,length:p,success:D,failure:B}),s++,x=URL.createObjectURL(k),w.src=x;const V=await be(w).then(()=>!0).catch(()=>!1);if(!w.complete||!V||q){if(B++,c.emit("failure",{file:k,name:C,success:D,failure:B,index:s,length:p}),q)break;continue}const O=w.width,G=w.height;l.width=O,l.height=G,i.drawImage(w,0,0,O,G,0,0,O,G),c.emit("imgload",{width:w.width,height:w.height,img:w});const te=await new Promise(ae=>{const Q=M=>{b=M,ae(M==null?void 0:M.arrayBuffer())};l.toBlob(Q,f,S)});if(q)break;if(!te){console.log("failed to toBlob",C),B++,c.emit("failure",{name:C});continue}const Z=te.byteLength,Y=(U||C).replace(v.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+_;m.add(Y,te),D++,T=Y,c.emit("success",{name:C,success:D,failure:B,index:s,length:p,inputSize:P,outputSize:Z})}let L,z;if(b){L=URL.createObjectURL(b);const k=new FileReader;k.readAsDataURL(b),z=await be(k).then(C=>C.target.result)}const N=m.url();c.emit("complete",{aborted:q,success:D,failure:B,index:s,length:p,zip:N,lastImage:L,lastImageDataURL:z,name:T,inputFileCount:ge.length}),_e=!1}function zt(){const o="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",i=document.createElement("img"),c=be(i).then(()=>!0,()=>!1);return i.src=o,c}function Pt(){const o=["image/png","image/jpeg","image/gif","image/bmp","image/avif","image/webp"],i=document.createElement("canvas");i.width=1,i.height=1;const c=[];for(const v of o)i.toDataURL(v).indexOf(v)>=0&&c.push(v);return c}function be(o){if(typeof o.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((i,c)=>{o.onload=i,o.onerror=c})}const Ut=(o,i)=>{const c=o.__vccOpts||o;for(const[v,l]of i)c[v]=l;return c},jt={ref:"canvas",style:{position:"absolute",width:"1px",height:"1px","z-index":"-999"}};function $t(o,i,c,v,l,m){return I(),H(ee,null,[A("div",{ref:"container",class:"droptarget",style:ot(o.style)},[at(o.$slots,"default",{},void 0,!0)],4),A("canvas",jt,null,512)],64)}const Ot=Ut(Lt,[["render",$t],["__scopeId","data-v-7f01bfce"]]),Mt=A("h3",null,"Used Framework and Libraries",-1),Rt=["href"],Ht=ve({__name:"licenses",setup(o){const i=d(!1),c={Vue:"https://github.com/vuejs/core/blob/main/LICENSE",Vite:"https://github.com/vitejs/vite/blob/main/LICENSE","Vite SSG":"https://github.com/antfu/vite-ssg/blob/main/LICENSE","Naive UI":"https://github.com/TuSimple/naive-ui/blob/main/LICENSE",Ionicons:"https://github.com/ionic-team/ionicons/blob/main/LICENSE"};return(v,l)=>(I(),H(ee,null,[A("a",{href:"#",onClick:l[0]||(l[0]=m=>i.value=!0),style:{color:"black","font-size":"small"}},"Licenses"),u(e(X),{preset:"dialog",ref:"dialog",show:i.value,"onUpdate:show":l[1]||(l[1]=m=>i.value=m),"positive-text":"OK",title:"Licenses"},{default:t(()=>[Mt,A("ul",null,[(I(),H(ee,null,Fe(c,(m,f)=>A("li",null,[A("a",{href:m},y(f),9,Rt)])),64))])]),_:1},8,["show"])],64))}}),Vt=0,Gt=37,Qt="",Ee={major:Vt,build:Gt,tag:Qt},Jt=ve({__name:"version",setup(o){const i=`${Ee.major}.${String(Ee.build).padStart(3,"0")}${Ee.tag}`;return(c,v)=>" v"+y(i)}}),Wt=F(" English "),qt=F(" Switch to English "),Zt=F(" \u65E5\u672C\u8A9E "),Yt=F(" \u65E5\u672C\u8A9E\u306B\u5207\u308A\u66FF\u3048 "),Kt={style:{"text-decoration":"underline",padding:"0px",margin:"0px","text-decoration-style":"double","text-align":"center"}},Xt={style:{color:"black","word-break":"keep-all","overflow-wrap":"break-word"},href:"https://gitcobra.github.io/avif2jpeg/dist/"},eu=["accept"],tu=["innerHTML"],uu=["innerHTML"],au=A("span",null,"Drag & Drop",-1),ou=A("span",null,"AVIF Images",-1),lu=["innerHTML"],nu=["innerHTML"],iu={style:{"white-space":"nowrap"}},ru={style:{color:"gray","padding-left":"20px"}},su=["innerHTML"],cu={style:{"font-size":"x-small","text-align":"center",margin:"0px"}},du=F("GitHub"),fu=A("br",null,null,-1),pu=["href"],gu=F("DataURI"),vu={style:{"text-align":"right"}},mu={style:{"text-align":"right"}},Au={key:1,style:{position:"relative",width:"1px",height:"1px",overflow:"visible"}},hu={style:{position:"absolute",left:"4px",top:"-16px",transform:"rotate(25deg)",overflow:"visible"}},yu=A("span",{style:{position:"absolute",left:"28px",bottom:"4px",transform:"rotate(25deg)","white-space":"nowrap","font-size":"small","font-family":"impact",color:"rgba(0,255,0, 0.5)"}},"ZIP",-1),pe=ve({__name:"App",setup(o){const i={title:'AVIF to JPEG "Offline" Batch Converter',metaDescription:"It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",droptarget:"Drag & Drop AVIF Images to Convert",descriptions:["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data will be sent</strong> to a server and is therefore <strong>fast</strong> and <strong>safe</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/?search=avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.'],fileTypeRadioTitle:"Choose Target File Extentions",fileTypeRadioOptions:{avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types"},quality:"Image Quality",qualitytooltip:"Set image quality for output",imageType:"Image Type",imageTypeTooltip:"Choose image format for output",retainOriginalExtension:"Keep Original File Extension",retainExtTooltip:"New extension will be appended to original extension",ignoreFileExtensions:"Load All File Types",ignoreExtTooltip:"Try to load files that don't have image file extension",loadbutton:"Load Images",loadbuttontooltip:"Select your images from a dialog window.<br>*Multiple selection allowed.",loadfolderbutton:"Load A Whole Folder",loadfoldertooltip:`
    Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>
    *It will show "Upload" button, but it actually doesn't upload anything to a server.
  `,processing:"Converting images",aborted:"Aborted",incomplete:"Some files failed to convert",completed:"Completed",interfered:"Currently Busy",noimage:"No files with the extentions were found.",avifUnsupported:"Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",cancel:"Cancel",inputSize:"Input Size",outputSize:"Output Size",save:"Save",close:"Close",open:"Open",reconvert:"Reconvert",reconvertTip:"Reconvert previous selected files.",files:"Files",confirmCloseDialog:"You have not saved the converted images yet.",confirmCloseDialogTitle:"Data have not been saved"},c={title:"AVIF\u304B\u3089JPEG\u3078 \u30AA\u30D5\u30E9\u30A4\u30F3\u4E00\u62EC\u753B\u50CF\u5909\u63DB",metaDescription:"AVIF\u30FBWebP\u5F62\u5F0F\u306E\u753B\u50CF\u3092JPEG\u3084PNG\u7B49\u3078\u30AA\u30D5\u30E9\u30A4\u30F3\u3067\u4E00\u62EC\u5909\u63DB\u3059\u308B\u7121\u6599\u30C4\u30FC\u30EB",droptarget:"\u5909\u63DB\u3057\u305F\u3044AVIF\u753B\u50CF\u3092\u30C9\u30E9\u30C3\u30B0&\u30C9\u30ED\u30C3\u30D7\u3057\u3066\u4E0B\u3055\u3044",descriptions:["\u3053\u308C\u306FAVIF\u3001\u53C8\u306FWebP\u5F62\u5F0F\u306E\u753B\u50CF\u3092\u3001JPEG\u3001PNG\u7B49\u306E\u4E00\u822C\u7684\u306A\u5F62\u5F0F\u3078\u4E00\u62EC\u5909\u63DB\u3059\u308B\u305F\u3081\u306E\u7121\u6599Web\u30A2\u30D7\u30EA\u3067\u3059\u3002","\u5909\u63DB\u51E6\u7406\u306F\u30D6\u30E9\u30A6\u30B6\u306E\u7D44\u307F\u8FBC\u307F\u6A5F\u80FD\u3092\u5229\u7528\u3059\u308B\u305F\u3081\u3001\u753B\u50CF\u30C7\u30FC\u30BF\u304C\u30B5\u30FC\u30D0\u30FC\u3078<strong>\u9001\u4FE1\u3055\u308C\u308B\u4E8B\u306F\u306A\u304F</strong>\u3001\u307E\u305F\u305D\u308C\u3086\u3048\u306B<strong>\u9AD8\u901F</strong>\u304B\u3064<strong>\u5B89\u5168</strong>\u3067\u3059\u3002","\u8907\u6570\u679A\u306E\u753B\u50CF\u304C\u8AAD\u307F\u8FBC\u307E\u308C\u305F\u5834\u5408\u3001\u5909\u63DB\u3057\u305F\u753B\u50CF\u306F<strong>ZIP\u30D5\u30A1\u30A4\u30EB</strong>\u306B\u7E8F\u3081\u3066\u51FA\u529B\u3055\u308C\u307E\u3059\u3002",'AVIF\u753B\u50CF\u306E\u30ED\u30FC\u30C9\u306B\u306F<a href="https://caniuse.com/?search=avif" target="_self" style="color:red">\u6700\u65B0</a>\u306EFirefox\u53C8\u306FChrome\u304C\u5FC5\u8981\u3067\u3059\u3002'],fileTypeRadioTitle:"\u5909\u63DB\u5BFE\u8C61\u30D5\u30A1\u30A4\u30EB\u306E\u62E1\u5F35\u5B50\u3092\u6307\u5B9A",fileTypeRadioOptions:{avif_only:'".avif" \u53C8\u306F ".webp" \u306E\u307F',all_images:"\u5168\u3066\u306E\u753B\u50CF\u5F62\u5F0F",all_files:"\u5168\u3066\u306E\u5F62\u5F0F"},quality:"\u753B\u8CEA\u8A2D\u5B9A",qualitytooltip:"\u51FA\u529B\u3059\u308B\u753B\u50CF\u306E\u30AF\u30AA\u30EA\u30C6\u30A3\u3092\u6307\u5B9A\u3057\u307E\u3059",imageType:"\u753B\u50CF\u5F62\u5F0F",imageTypeTooltip:"\u51FA\u529B\u3059\u308B\u753B\u50CF\u306E\u5F62\u5F0F\u3092\u6307\u5B9A\u3057\u307E\u3059",retainOriginalExtension:"\u5143\u306E\u62E1\u5F35\u5B50\u3092\u4FDD\u6301\u3059\u308B",retainExtTooltip:"\u5143\u306E\u62E1\u5F35\u5B50\u306E\u5F8C\u308D\u306B\u65B0\u3057\u3044\u62E1\u5F35\u5B50\u3092\u4ED8\u52A0\u3057\u307E\u3059",ignoreFileExtensions:"\u5168\u3066\u306E\u62E1\u5F35\u5B50\u3092\u8AAD\u307F\u8FBC\u3080",ignoreExtTooltip:"\u753B\u50CF\u62E1\u5F35\u5B50\u4EE5\u5916\u306E\u30D5\u30A1\u30A4\u30EB\u3082\u30ED\u30FC\u30C9\u3067\u304D\u308B\u304B\u8A66\u884C\u3057\u307E\u3059",loadbutton:"\u753B\u50CF\u3092\u30ED\u30FC\u30C9",loadbuttontooltip:"\u30C0\u30A4\u30A2\u30ED\u30B0\u3092\u958B\u3044\u3066\u753B\u50CF\u3092\u9078\u629E\u3057\u307E\u3059<br>\u203B\u8907\u6570\u30D5\u30A1\u30A4\u30EB\u9078\u629E\u53EF",loadfolderbutton:"\u30D5\u30A9\u30EB\u30C0\u3054\u3068\u30ED\u30FC\u30C9",loadfoldertooltip:`
    \u9078\u629E\u3057\u305F\u30D5\u30A9\u30EB\u30C0\u3068\u30B5\u30D6\u30D5\u30A9\u30EB\u30C0\u306E\u5168\u3066\u306E\u753B\u50CF\u306B\u5BFE\u3057\u3066\u5909\u63DB\u51E6\u7406\u3092\u884C\u3044\u3001ZIP\u66F8\u5EAB\u3078\u76F8\u5BFE\u30D1\u30B9\u3067\u683C\u7D0D\u3057\u307E\u3059\u3002<br>
    \u203B\u300C\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u300D\u3068\u3044\u3046\u30DC\u30BF\u30F3\u304C\u8868\u793A\u3055\u308C\u307E\u3059\u304C\u5B9F\u969B\u306B\u306F\u30B5\u30FC\u30D0\u30FC\u3078\u306E\u30D5\u30A1\u30A4\u30EB\u306E\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u306F\u884C\u308F\u308C\u307E\u305B\u3093\u3002
  `,processing:"\u753B\u50CF\u5909\u63DB\u4E2D",aborted:"\u4E2D\u65AD",incomplete:"\u5909\u63DB\u306B\u5931\u6557\u3057\u305F\u30D5\u30A1\u30A4\u30EB\u304C\u3042\u308A\u307E\u3059",completed:"\u5909\u63DB\u7D42\u4E86",interfered:"\u65E2\u306B\u51E6\u7406\u4E2D\u3067\u3059",noimage:"\u3053\u306E\u62E1\u5F35\u5B50\u306E\u30D5\u30A1\u30A4\u30EB\u306F\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002",avifUnsupported:"\u3053\u306E\u30D6\u30E9\u30A6\u30B6\u306FAVIF\u5F62\u5F0F\u306B\u5BFE\u5FDC\u3057\u3066\u3044\u307E\u305B\u3093\u3002AVIF\u753B\u50CF\u3092\u5909\u63DB\u3059\u308B\u5834\u5408\u306F\u6700\u65B0\u7248\u306EFirefox\u53C8\u306FGoogle Chrome\u3092\u4F7F\u7528\u3057\u3066\u4E0B\u3055\u3044\u3002",cancel:"\u30AD\u30E3\u30F3\u30BB\u30EB",inputSize:"\u5165\u529B\u30B5\u30A4\u30BA",outputSize:"\u51FA\u529B\u30B5\u30A4\u30BA",save:"\u4FDD\u5B58",close:"\u9589\u3058\u308B",open:"\u958B\u304F",reconvert:"\u518D\u5909\u63DB",reconvertTip:"\u524D\u56DE\u9078\u629E\u3057\u305F\u30D5\u30A1\u30A4\u30EB\u3092\u518D\u5909\u63DB\u3057\u307E\u3059\u3002",files:"\u30D5\u30A1\u30A4\u30EB",confirmCloseDialog:"\u307E\u3060\u5909\u63DB\u3057\u305F\u30D5\u30A1\u30A4\u30EB\u3092\u4FDD\u5B58\u3057\u3066\u3044\u307E\u305B\u3093\u3002",confirmCloseDialogTitle:"\u5909\u63DB\u30D5\u30A1\u30A4\u30EB\u304C\u672A\u4FDD\u5B58"},v=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),l=document,m=d([{label:"image/png",value:"image/png"}]),f=lt({imageFormat:"image/png",imageQuality:90,retainExtension:!1,expandExtButtons:!1});d(!1);const S=["avif_only","all_images","all_files"],_=d(S[0]),p={avif_only:".avif,.webp",all_images:".jpg,.jpeg,.gif,.png,.webp,.avif,.bmp",all_files:""},s=d(0),D=d(0),B=d(0),b=d(0),T=d(!0),x=d(!1),L=d(!1),z=d(!1),N=d(!1),k=d(!1),C=d(!1);d(!1);const P=d(!1),U=d(!1),w=d(""),V=d(""),O=d(0),G=d(0),te=nt(()=>{switch(w.value){case r.value.completed:return b.value===D.value?"success":"warning";case r.value.aborted:return"error";case r.value.incomplete:return"warning";default:return"info"}}),Z=d("lime"),Y=d(0),ae=d(null),Q=d([]),M=d(null),oe=d(""),le=d(""),ne=d(null),ie=d(null),re=d(null),r=d(i),K=d(!1);let me=d(Te),Ae=d(Ne),he=!1;fe(K,(g,a)=>{g?(me.value=Le,Ae.value=Se,r.value=c):(me.value=Te,Ae.value=Ne,r.value=i)});const Ce=it().currentRoute.value.path;(/\/ja\b/.test(Ce)||/^\/?$/.test(Ce)&&/^ja\b/i.test(Ze()))&&(K.value=!0,me.value=Le,Ae.value=Se,r.value=c),rt({title:r.value.title,meta:[{property:"og:title",content:r.value.title},{property:"og:description",content:r.value.metaDescription}]}),Ue(()=>{document.querySelector("head").removeChild(document.getElementById("svgfix")),ne.value.oninput=ie.value.oninput=$e,De(),window.addEventListener("resize",De);const g="avif2jpeg",a=JSON.parse(localStorage.getItem(g)||"{}");for(const E in f)a.hasOwnProperty(E)&&(f[E]=a[E]);window.addEventListener("unload",()=>{const E={};for(const n in f)E[n]=f[n];localStorage.setItem(g,JSON.stringify(E))})});function $e(g){const E=[...g.target.files];ae.value=E,ne.value.value="",ie.value.value=""}function Oe({formats:g}){m.value=g.map(E=>({value:E,label:E}));const a=g.find(E=>/jpeg/i.test(E));a&&(f.imageFormat=a)}function Me(){x.value=!1}function Re({length:g}){D.value=0,B.value=0,b.value=g,U.value=!0,x.value=!0,L.value=!1,C.value=!1,s.value=0,oe.value="",le.value="",O.value=0,G.value=0,he=!1,k.value=!1,console.log("start"),w.value=r.value.processing,ue=null,Z.value="lime",Y.value=0}function He({length:g,index:a,name:E,success:n}){D.value=a,s.value=a/g*100|0,w.value=r.value.processing,V.value=`${E}`}let ue=null;function Ve({img:g,width:a,height:E}){ue&&(ue.remove(),ue.src="");const n=a/E;a>E?(a=120,E=a/n):(E=90,a=E*n),g.style.width=a+"px",g.style.height=E+"px",re.value&&(re.value.innerHTML="",re.value.appendChild(g)),ue=g}function Ge({name:g,index:a,success:E,inputSize:n,outputSize:se}){B.value=E,O.value+=n,G.value+=se}function Qe({name:g}){Q.value=[{description:`${g}`,duration:0},"warning"],Z.value="orange"}function Je({index:g,zip:a,aborted:E,success:n,length:se,lastImage:ke,lastImageDataURL:Ie,name:Ye,inputFileCount:Ke}){const ce=M.value,Xe=g/se*100|0;if(Y.value=Ke,n)if(n===1){ce.download=Ye;let ye=ke;ce.href=ye,oe.value=ke,Ie&&(le.value=Ie)}else{const ye=new Date;ce.download="avif2jpeg_"+f.imageFormat.replace(/^image\//,"")+"_"+ye.getTime()+".zip",ce.href=a,k.value=!0}!E||Xe===100?s.value=100:Z.value="red",D.value=g,n===se?w.value=r.value.completed:w.value=E?r.value.aborted:r.value.incomplete,x.value=!1,L.value=!0}function De(){const g=document.body.clientWidth,a=document.body.clientHeight;T.value=g*.75>a||g>900}function We(){Q.value=["destroy"],B.value>1&&!he?C.value=!0:M.value.href=""}function xe(){M.value.click(),he=!0}function qe(g){try{navigator.clipboard.writeText(g)}catch{}}function Ze(){const g=window.navigator;return g.language||g.userLanguage||g.browserLanguage}return(g,a)=>{const E=Dt("router-link");return I(),H(ee,null,[u(e(h),{vertical:"",align:"stretch",justify:"space-between",style:{height:"100%",width:"100%"}},{default:t(()=>[u(e(h),{justify:"end",align:"end",style:{"box-sizing":"border-box",padding:"4px",margin:"0px"}},{default:t(()=>[u(e(dt),{size:"tiny",style:{padding:"4px"}},{default:t(()=>[u(e(j),{trigger:"hover","keep-alive-on-hover":!1},{trigger:t(()=>[u(E,{to:{path:"/en"}},{default:t(()=>[u(e(ze),null,{default:t(()=>[u(e($),{color:K.value?"":"red",onClick:a[0]||(a[0]=n=>K.value=!1)},{default:t(()=>[Wt]),_:1},8,["color"])]),_:1})]),_:1})]),default:t(()=>[qt]),_:1}),u(E,{to:{path:"/ja"}},{default:t(()=>[u(e(j),{trigger:"hover","keep-alive-on-hover":!1},{trigger:t(()=>[u(e($),{color:K.value?"red":"",onClick:a[1]||(a[1]=n=>K.value=!0)},{default:t(()=>[Zt]),_:1},8,["color"])]),default:t(()=>[Yt]),_:1})]),_:1})]),_:1})]),_:1}),u(e(h),{vertical:"",justify:"center"},{default:t(()=>[A("h1",Kt,[A("a",Xt,y(r.value.title),1)])]),_:1}),u(e(h),{vertical:"",align:"center",justify:"center"},{default:t(()=>[A("input",{ref_key:"fileinput",ref:ne,type:"file",multiple:"",accept:p[_.value],style:{display:"none"}},null,8,eu),A("input",{webkitdirectory:"",directory:"",ref_key:"folderinput",ref:ie,type:"file",style:{display:"none"}},null,512),u(e(h),{vertical:"",align:"stretch",justify:"center"},{default:t(()=>[u(e(j),{trigger:"hover","keep-alive-on-hover":!1,placement:T.value?"left":"top",duration:0,delay:300},{trigger:t(()=>[u(e($),{round:"",onClick:a[2]||(a[2]=n=>ne.value.click()),style:{width:"100%"}},{default:t(()=>[u(e(J),{size:"large",color:"gray"},{default:t(()=>[u(e(Pe))]),_:1}),F(" "+y(r.value.loadbutton),1)]),_:1})]),default:t(()=>[A("div",{innerHTML:r.value.loadbuttontooltip},null,8,tu)]),_:1},8,["placement"]),e(v)?R("",!0):(I(),W(e(j),{key:0,trigger:"hover",placement:"bottom","keep-alive-on-hover":!1,style:{"max-width":"90vw"},duration:0,delay:300},{trigger:t(()=>[u(e($),{round:"",onClick:a[3]||(a[3]=n=>ie.value.click()),style:{width:"100%"}},{default:t(()=>[u(e(J),{size:"large",color:"gray"},{default:t(()=>[u(e(ft))]),_:1}),F(" "+y(r.value.loadfolderbutton),1)]),_:1})]),default:t(()=>[A("div",{innerHTML:r.value.loadfoldertooltip},null,8,uu)]),_:1}))]),_:1}),u(e(pt),{"display-directive":"show","expanded-names":f.expandExtButtons?["extItem"]:"","on-update:expanded-names":n=>f.expandExtButtons=!!String(n)},{default:t(()=>[u(e(gt),{title:r.value.fileTypeRadioTitle,name:"extItem"},{default:t(()=>[u(e(vt),{value:_.value,"onUpdate:value":a[4]||(a[4]=n=>_.value=n),name:"filetyperadios",size:"small"},{default:t(()=>[u(e(h),{vertical:"",style:{"padding-left":"1em"}},{default:t(()=>[(I(),H(ee,null,Fe(S,n=>u(e(j),{key:n,trigger:"hover","keep-alive-on-hover":!1},{trigger:t(()=>[u(e(xt),{value:n},{default:t(()=>[F(y(r.value.fileTypeRadioOptions[n]),1)]),_:2},1032,["value"])]),default:t(()=>[F(" "+y(p[n]||".*"),1)]),_:2},1024)),64))]),_:1})]),_:1},8,["value"])]),_:1},8,["title"])]),_:1},8,["expanded-names","on-update:expanded-names"])]),_:1}),u(e(mt),{placement:"top-right"},{default:t(()=>[u(e(At),{closable:!0,"container-style":"font-size:xx-small;"},{default:t(()=>[u(Ot,{target:e(l),format:f.imageFormat,quality:f.imageQuality,input:ae.value,sendmessage:Q.value,processing:x.value,accept:p[_.value],"retain-extension":f.retainExtension,onMounted:Oe,onStart:Re,onProgress:He,onSuccess:Ge,onFailure:Qe,onComplete:Je,onPrevent:a[5]||(a[5]=n=>{z.value=!0}),onNoimage:a[6]||(a[6]=n=>N.value=!0),onAvifsupport:a[7]||(a[7]=n=>P.value=!n),onImgload:Ve},{default:t(()=>[e(v)?R("",!0):(I(),W(e(j),{key:0,trigger:"hover","keep-alive-on-hover":!1,placement:"bottom",duration:0,delay:300},{trigger:t(()=>[u(e(h),{vertical:"",style:{border:"6px dashed #EEE","border-radius":"1em",padding:"2em"}},{default:t(()=>[u(e(h),{align:"stretch",style:{color:"silver","overflow-wrap":"break-word","word-break":"keep-all"}},{default:t(()=>[u(e(h),null,{default:t(()=>[u(e(J),{size:"64",color:"silver",class:"test"},{default:t(()=>[u(e(ht))]),_:1})]),_:1}),u(e(h),{vertical:"",style:{"font-weight":"bold","font-size":"x-large"}},{default:t(()=>[au,ou]),_:1})]),_:1})]),_:1})]),default:t(()=>[A("h3",{innerHTML:r.value.droptarget},null,8,lu)]),_:1}))]),_:1},8,["target","format","quality","input","sendmessage","processing","accept","retain-extension"])]),_:1})]),_:1}),u(e(h),{justify:"center",align:"center"},{default:t(()=>[L.value?(I(),W(e(j),{key:0,trigger:"hover",placement:"top","keep-alive-on-hover":!1,duration:0,delay:300},{trigger:t(()=>[u(e($),{onClick:a[8]||(a[8]=n=>Q.value=["reconvert"]),color:"#888",round:""},{default:t(()=>[F(y(r.value.reconvert),1)]),_:1})]),default:t(()=>[A("div",{innerHTML:`${Y.value} ${r.value.files}<br>${r.value.reconvertTip}`},null,8,nu)]),_:1})):R("",!0)]),_:1}),u(e(h),{justify:"center"},{default:t(()=>[u(e(h),{vertical:"",align:"start"},{default:t(()=>[u(e(j),{trigger:"hover",placement:T.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:300},{trigger:t(()=>[u(e(h),{align:"center"},{default:t(()=>[u(e(J),null,{default:t(()=>[u(e(Pe))]),_:1}),F(y(r.value.imageType)+": ",1),u(e(yt),{size:"small",value:f.imageFormat,"onUpdate:value":a[9]||(a[9]=n=>f.imageFormat=n),options:m.value,"consistent-menu-width":!1},null,8,["value","options"])]),_:1})]),default:t(()=>[F(" "+y(r.value.imageTypeTooltip),1)]),_:1},8,["placement"]),u(e(j),{trigger:"hover",placement:T.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:300},{trigger:t(()=>[u(e(h),{align:"center"},{default:t(()=>[u(e(h),{align:"start",wrap:!1},{default:t(()=>[u(e(J),null,{default:t(()=>[u(e(Et))]),_:1}),A("span",iu,y(r.value.quality)+":",1),u(e(h),{align:"center",justify:"space-between"},{default:t(()=>[u(e(Ft),{tooltip:!1,value:f.imageQuality,"onUpdate:value":a[10]||(a[10]=n=>f.imageQuality=n),step:1,style:{width:"120px"},disabled:/png|bmp/.test(f.imageFormat)},null,8,["value","disabled"]),u(e(_t),{style:{width:"90px"},size:"small",value:f.imageQuality,"onUpdate:value":a[11]||(a[11]=n=>f.imageQuality=n),step:"1",min:"0",max:"100",disabled:/png/.test(f.imageFormat)},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:t(()=>[F(" "+y(r.value.qualitytooltip),1)]),_:1},8,["placement"]),u(e(j),{trigger:"hover",placement:T.value?"left":"bottom-start","keep-alive-on-hover":!1,duration:0,delay:300},{trigger:t(()=>[u(e(Bt),{checked:f.retainExtension,"onUpdate:checked":a[12]||(a[12]=n=>f.retainExtension=n)},{default:t(()=>[F(y(r.value.retainOriginalExtension),1)]),_:1},8,["checked"])]),default:t(()=>[F(" "+y(r.value.retainExtTooltip),1)]),_:1},8,["placement"])]),_:1})]),_:1}),u(e(h),{justify:"center"},{default:t(()=>[A("ul",ru,[(I(!0),H(ee,null,Fe(r.value.descriptions,n=>(I(),H("li",{key:n,style:{"text-align":"left"},innerHTML:n},null,8,su))),128))])]),_:1}),u(e(h),{justify:"center",align:"baseline"},{default:t(()=>[A("p",cu,[u(Jt)]),u(e(h),{align:"center"},{default:t(()=>[u(e(h),{align:"center"},{default:t(()=>[u(e(ze),{href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-size":"small"}},{default:t(()=>[u(e(J),null,{default:t(()=>[u(e(bt))]),_:1}),du]),_:1})]),_:1}),u(e(h),{align:"center"},{default:t(()=>[u(Ht)]),_:1})]),_:1})]),_:1})]),_:1}),u(e(X),{show:N.value,"onUpdate:show":a[13]||(a[13]=n=>N.value=n),preset:"dialog",type:"error",title:"Images Not Found","positive-text":"OK"},{default:t(()=>[F(y(r.value.noimage),1),fu,F(y(p[_.value]||"*."),1)]),_:1},8,["show"]),u(e(X),{show:P.value,"onUpdate:show":a[14]||(a[14]=n=>P.value=n),preset:"dialog",type:"warning",title:"Unsupported","positive-text":"OK"},{default:t(()=>[F(y(r.value.avifUnsupported),1)]),_:1},8,["show"]),u(e(X),{show:C.value,"onUpdate:show":a[15]||(a[15]=n=>C.value=n),preset:"dialog",type:"warning",title:r.value.confirmCloseDialogTitle,"positive-text":r.value.save,"negative-text":r.value.close,maskClosable:!1,onPositiveClick:xe},{default:t(()=>[F(y(r.value.confirmCloseDialog),1)]),_:1},8,["show","title","positive-text","negative-text"]),u(e(X),{show:U.value,"onUpdate:show":a[18]||(a[18]=n=>U.value=n),closable:!x.value&&L.value,"close-on-esc":!x.value&&L.value,onMaskClick:a[19]||(a[19]=n=>Q.value=["destroy"]),preset:"dialog",title:w.value,type:e(te),"mask-closable":!1,"on-after-leave":We},{default:t(()=>[u(e(h),{vertical:"",align:"center"},{default:t(()=>[u(e(wt),{type:"circle",percentage:s.value,color:Z.value,"indicator-text-color":"black","rail-color":"silver"},{default:t(()=>[u(e(h),{vertical:"",align:"center",justify:"center"},{default:t(()=>[u(e(h),{style:{"font-size":"x-large"}},{default:t(()=>[F(y(s.value)+"%",1)]),_:1}),u(e(h),{style:{"font-size":"xx-small"}},{default:t(()=>[F("( "+y(B.value)+" / "+y(b.value)+" )",1)]),_:1})]),_:1})]),_:1},8,["percentage","color"]),u(e(h),{vertical:"",align:"center","item-style":"overflow:hidden; text-overflow: ellipsis; white-space:nowrap;"},{default:t(()=>[u(e(h),{style:{"font-size":"x-small"}},{default:t(()=>[A("span",null,y(V.value),1)]),_:1}),u(e(h),{vertical:"",style:{height:"90px"},align:"center",justify:"center"},{default:t(()=>[A("div",{ref_key:"thumbnail",ref:re},null,512)]),_:1}),u(e(h),null,{default:t(()=>[oe.value?(I(),H("a",{key:0,href:oe.value,target:"_blank"},[u(e($),{round:"",size:"tiny"},{default:t(()=>[F(y(r.value.open),1)]),_:1})],8,pu)):R("",!0),le.value?(I(),W(e($),{key:1,round:"",size:"tiny",onClick:a[16]||(a[16]=n=>qe(le.value))},{default:t(()=>[gu]),_:1})):R("",!0)]),_:1})]),_:1}),A("table",null,[A("tr",null,[A("td",null,y(r.value.inputSize)+": ",1),A("td",vu,y((O.value/1024|0).toLocaleString())+"KB",1)]),A("tr",null,[A("td",null,y(r.value.outputSize)+": ",1),A("td",mu,y((G.value/1024|0).toLocaleString())+"KB",1)])]),x.value?(I(),W(e($),{key:0,size:"large",ref:"cancelbutton",round:"",onClick:Me},{default:t(()=>[F(y(r.value.cancel),1)]),_:1},512)):R("",!0),u(e(h),{align:"center",vertical:""},{default:t(()=>[A("div",null,[!x.value&&B.value?(I(),W(e($),{key:0,size:"large",round:"",onClick:xe,color:"lime"},{default:t(()=>[F(y(r.value.save),1)]),_:1})):R("",!0),k.value?(I(),H("span",Au,[A("span",hu,[u(e(J),{depth:"4",size:"30",color:"lime"},{default:t(()=>[u(e(Ct))]),_:1}),yu])])):R("",!0)]),!x.value&&L.value?(I(),W(e($),{key:0,onClick:a[17]||(a[17]=n=>U.value=!1),round:"",size:"small",style:{"font-size":"small","margin-top":"1em"}},{default:t(()=>[F(y(r.value.close),1)]),_:1})):R("",!0)]),_:1})]),_:1})]),_:1},8,["show","closable","close-on-esc","title","type"]),st(A("a",{ref_key:"downloadlink",ref:M,href:""},null,512),[[ct,!1]]),u(e(X),{show:z.value,"onUpdate:show":a[20]||(a[20]=n=>z.value=n),preset:"dialog",type:"error","positive-text":"OK",title:"Busy"},{default:t(()=>[F(y(r.value.interfered),1)]),_:1},8,["show"])],64)}}}),Eu=[{path:"/",name:"Home",component:pe},{path:"/ja",name:"Japanese",component:pe,meta:{title:"jpn"}},{path:"/en",name:"English",component:pe,meta:{title:"eng"}}];kt(pe,{routes:Eu,base:"/avif2jpeg/dist/"},({app:o,router:i,routes:c,isClient:v,initialState:l})=>{})});export default Fu();
