var Ca=Object.defineProperty;var $a=(a,s,g)=>s in a?Ca(a,s,{enumerable:!0,configurable:!0,writable:!0,value:g}):a[s]=g;var Mt=(a,s,g)=>$a(a,typeof s!="symbol"?s+"":s,g);import{r as it,d as _e,i as Be,o as P,c as V,w as t,a as n,u as e,b as C,t as r,N as ve,_ as qt,e as be,L as La,f as _,g as ee,h,F as xe,j as je,B as ze,k as wt,l as K,m as Ea,n as Fa,p as Ie,q as bt,s as Gt,v as he,x as Ma,y as ye,z as mt,A as vt,C as xt,D as At,E as Fe,G as oe,T as De,H as Kt,I as Qt,J as Ne,K as Yt,M as He,O as Re,P as st,Q as Jt,R as Se,S as Xt,U as Ke,V as se,W as Pa,X as Oa,Y as kt,Z as pt,$ as Pt,a0 as Xe,a1 as Ua,a2 as en,a3 as zt,a4 as Da,a5 as tn,a6 as Na,a7 as nn,a8 as ft,a9 as Ee,aa as Qe,ab as ja,ac as Ra,ad as Za,ae as Ba,af as an,ag as on,ah as Tt,ai as It,aj as Ha,ak as ln,al as Wa,am as Va,an as qa,ao as Ga,ap as Ka,aq as Qa,ar as St,as as ht,at as Te,au as Ya,av as Ja,aw as Xa,ax as eo,ay as sn,az as to,aA as no,aB as rn,aC as un,aD as qe,aE as Ge,aF as ao,aG as oo,aH as lo,aI as io,aJ as so,aK as ro,aL as uo,aM as co,aN as po,aO as fo,aP as go,aQ as mo,aR as vo,aS as ho,aT as _o,aU as yo,aV as wo,aW as bo,aX as xo}from"./vendor-DBWRnW9a.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function g(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(i){if(i.ep)return;i.ep=!0;const c=g(i);fetch(i.href,c)}})();const Ao={imageFormat:"image/jpeg",imageQuality:90,expandExtButtons:!1,acceptTypeValue:void 0,editedAcceptTypes:"",expandAdvSettings:!1,retainExtension:!1,maxZipSizeMB:1e3,useFolderNameForZip:!1,multithread:!0,threadCount:void 0,shrinkImage:!1,maxWidth:4096,maxHeight:4096,disableNotifyingFolderSelect:!1},R=it(dn({}));function ko(){dn(R)}function dn(a){return Object.assign(a,Ao)}const cn="avif2jpeg",gt=JSON.parse(localStorage.getItem(cn)||"{}");for(const a in R)gt.hasOwnProperty(a)&&gt[a]!==void 0&&(R[a]=gt[a]);window.addEventListener("unload",()=>{const a={};for(const s in R)a[s]=R[s];localStorage.setItem(cn,JSON.stringify(a))});const zo=_e({__name:"github",setup(a){const s=Be(Oe);return(g,o)=>{const i=ve,c=qt,l=be;return P(),V(l,{to:!1,"display-directive":"show",show:e(s).showTooltipsBeforeMounted.value,trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(c,{href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-size":"small","font-weight":"bolder"}},{default:t(()=>[n(i,null,{default:t(()=>[n(e(La))]),_:1}),C("GitHub")]),_:1})]),default:t(()=>[C(" "+r(g.$t("githubOpenSource")),1)]),_:1},8,["show"])}}}),To=h("h3",null,"Used Framework and Libraries",-1),Io=["href"],So=_e({__name:"licenses",setup(a){const s=_(!1),g={Vue:"https://github.com/vuejs/core/blob/main/LICENSE",Vite:"https://github.com/vitejs/vite/blob/main/LICENSE","Vite SSG":"https://github.com/antfu/vite-ssg/blob/main/LICENSE","Naive UI":"https://github.com/TuSimple/naive-ui/blob/main/LICENSE",Ionicons:"https://github.com/ionic-team/ionicons/blob/main/LICENSE"};return(o,i)=>{const c=ze;return P(),ee(xe,null,[n(c,{text:"",onClick:i[0]||(i[0]=l=>s.value=!0),style:{color:"black","font-size":"small"}},{default:t(()=>[C("Licenses")]),_:1}),n(e(wt),{preset:"dialog",ref:"dialog",show:s.value,"onUpdate:show":i[1]||(i[1]=l=>s.value=l),"positive-text":"OK",title:"Licenses"},{default:t(()=>[To,h("ul",null,[(P(),ee(xe,null,je(g,(l,f)=>h("li",null,[h("a",{href:l},r(f),9,Io)])),64))])]),_:1},8,["show"])],64)}}}),Co=1,$o=7,Lo=7,Eo="",at={major:Co,minor:$o,build:Lo,tag:Eo},Fo={style:{"font-size":"x-small","user-select":"none"}},Mo=_e({__name:"version",setup(a){const s=["0.0.118"],g=`${at.major}.${at.minor}.${at.build}${at.tag}`,o=s.map(f=>({label:`v${f}`,key:f,value:f}));function i(f){const{key:b,label:x}=f,A=l(b),p=K("a",{href:A},x),$=K("div",null,p);return K("div",null,$)}function c(f){location.href=l(f)}function l(f){return`/avif2jpeg/old/${f}/`}return(f,b)=>{const x=Ea;return P(),V(x,{"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start",options:e(o),"render-label":i,"onUpdate:value":c},{header:t(()=>[h("span",Fo,r(f.$t("previousVersion")),1)]),default:t(()=>[h("span",{style:{cursor:"pointer"}},"v"+r(g))]),_:1},8,["options"])}}}),Po=_e({__name:"header",setup(a){return(s,g)=>{const o=Ie,i=bt;return P(),V(o,{vertical:"",justify:"start"},{default:t(()=>[n(o,{justify:"space-between",style:{"box-sizing":"border-box",padding:"4px",margin:"0px"}},{default:t(()=>[n(o,{align:"start"},{default:t(()=>[n(zo),n(Mo),n(o,{align:"center"},{default:t(()=>[n(So)]),_:1})]),_:1}),n(o,{align:"end",style:{"font-size":"x-small"}},{default:t(()=>[Fa(s.$slots,"lang-switch")]),_:3})]),_:3}),n(i,{style:{margin:"0px"}})]),_:3})}}}),Oo={style:{padding:"0px",margin:"0px","text-align":"center"}},Uo={key:0},Do=_e({__name:"title",setup(a){const s=Gt(),g=he(()=>{const o=s.currentRoute.value.path||"";return!String(o.match(new RegExp("(?<=^\\/)[^/]+"))||"")});return(o,i)=>{const c=qt,l=Ma("router-link"),f=Ie;return P(),V(f,{align:"center",justify:"center",style:{margin:"0px"}},{default:t(()=>[h("h1",Oo,[e(g)?(P(),ee("span",Uo,r(o.$t("title")),1)):(P(),V(l,{key:1,to:"../",custom:""},{default:t(({navigate:b,href:x})=>[n(c,{href:x,onClick:b,style:{color:"black","word-break":"keep-all","overflow-wrap":"break-word"}},{default:t(()=>[C(r(o.$t("title")),1)]),_:2},1032,["href","onClick"])]),_:1}))])]),_:1})}}});function No(a){return new Worker("/avif2jpeg/dist/assets/worker.canvas-BX2dRsq1.js",{name:a==null?void 0:a.name})}let pn=0;class jo extends No{constructor(){super(...arguments);Mt(this,"id",pn++)}release(){ut(this)}}const _t=[],Ze=new Set,Ye=new Map,Je=new Map,rt=new Set;function Ro(a,s){const g=new jo;_t.push(g);{const o=Promise.resolve(g);Ze.add(o),Ye.set(g,o)}return g}function Zo(a){const s=new Promise(g=>{Je.set(a,g)});Ze.add(s),Ye.set(a,s),rt.add(a)}async function Bo(){let a,s;do a=await Promise.any(Ze);while(rt.has(a));return s=Ye.get(a),Ye.delete(a),Ze.delete(s),Zo(a),a}function ut(a){const s=Je.get(a);s&&(Je.delete(a),rt.delete(a),s(a))}function fn(){for(const a of Je.keys())ut(a)}async function Ot(){return await Promise.all(Ze)}function Ut(){fn();for(const a of _t)a.terminate();_t.length=0,Ze.clear(),Ye.clear(),Je.clear(),rt.clear(),pn=0}function Ho(a){return new Worker("/avif2jpeg/dist/assets/worker.zip-B8hhgJxr.js",{name:a==null?void 0:a.name})}const Wo=1,Vo=10,qo=1024*1024*4,Go=100;async function Ko(a,s,g,o,i,c,l,f,b,x,A,p){const $=new Map,y=new Map,m=Math.min(g.threads-1,l.length);Ut();const v=new Ho,z=Qo(v,a,s,f,$);v.postMessage({action:"set-config",zipSize:g.maxZipSizeMB*1024*1024,keepExt:g.retainExtension,outputExt:A,imageType:p});const S=Yo(a,s,o,i,c,l,f,y,$);for(let E=0;E<m;E++){const W=Ro();W.onmessage=S;const{port1:Q,port2:te}=new MessageChannel;v.postMessage({action:"set-port"},[Q]),W.postMessage({},[te])}const w=ye(s,E=>{E&&(w(),fn())});a.demandImage=E=>{v.postMessage({action:"request-image",index:E})};const u=l.length===1;let D=0,N=0,T="",q=0;for(;q<l.length;){const E=await Bo();if(s.value){ut(E);break}const W=[];let Q=!1;const te=l.length-q,ue=Math.min(q+Math.max(Math.min(Vo,te/g.threads|0),1),l.length);let le=0,de=!1;const ne=Date.now();for(ne-N>Go&&(N=ne,de=!0);q<ue&&!(le>qo);q++){const F=l[q],k=F._id;le+=F.size,Q=q===l.length-1,$.has(k)||$.set(k,F),W.push({index:q,file:F,fileId:k,outputPath:T,type:b,quality:x/100,demandThumbnail:de||Q,isSingleImage:u,maxSize:R.shrinkImage?{width:R.maxWidth,height:R.maxHeight}:null,webkitRelativePath:F.webkitRelativePath}),F.webkitRelativePath||F.name,y.has(F)||(D++,a.index=D),de=!1}if(E.postMessage(W),Q&&(await Ot(),s.value))break}if(await Ot(),!s.value){let E;await new Promise(W=>{E=ye([()=>a.done,s],()=>{(a.done>=D||s.value)&&W(void 0)},{immediate:!0})}),E()}v.postMessage({action:"squeeze"}),await z,w();const O={value:!1},Ae=()=>{O.value=!0,Ut(),v.terminate()};let ge=!1;return{callbackToClearConverter:Ae,callbackToGenerateFailedZips:async E=>{ge||(ge=!0,await Jo(E,v,O,a))}}}function Qo(a,s,g,o,i){return new Promise(l=>{a.onmessage=f=>{const b=f.data,{action:x}=b;if(x==="add-zip-completed"){const{fileId:y}=b;s.done++,s.success++,o.add(y);return}if(x==="respond-image"){const{url:y,index:m,path:v,size:z,fileId:S}=b;s.convertedImageUrl=y,s.convertedImageSize=z,s.convertedImageIndex=m,s.convertedImageName=v,s.convertedImageFileId=S;let w="",M=0,u="";if(S>=0){const D=i.get(S);w=URL.createObjectURL(D),M=D.size,u=D.name}s.convertedImageOrgUrl=w,s.convertedImageOrgSize=M,s.convertedImageOrgName=u;return}const{size:A,count:p}=b,$="url"in f.data?f.data.url:"";switch(x){case"push-zip":s.zips.push({url:$,size:A,count:p}),s.zippedTotalCount+=p,s.zippedTotalSize+=A;break;case"squeeze-zip":p>0&&(s.zips.push({url:$,size:A,count:p}),s.zippedTotalCount+=p,s.zippedTotalSize+=A),l(void 0);break;case"push-filelist":s.failedFileZippedCount++;break;case"squeeze-filelist-zip":s.failedZipDone=!0;case"push-filelist-zip":s.failedZips.push({url:$,size:A,count:p});break;case"zip-error":case"zip-squeeze-error":s.zippingErrorCount+=p,x==="zip-squeeze-error"&&l(void 0);break}}})}function Yo(a,s,g,o,i,c,l,f,b,x,A,p){let $=0;const y=_(new Map),m=_(new Map);return z=>{const S=z.target,{data:w}=z,{action:M}=w;if(s.value)switch(M){case"file-canceled":a.done++;return}switch(M){case"list-start":break;case"file-start":{const{index:u,path:D,fileId:N}=w,T={key:$++,core:S.id,index:u,path:D,command:"‚û°Ô∏èstarted"};y.value.set(S.id,T),a.logs.push(T);break}case"file-load":{const{thumbnail:u,width:D,height:N}=w;y.value.get(S.id).command="üñºÔ∏èloaded",u&&(a.thumbnail=u);break}case"file-converted":{const{index:u,path:D,fileId:N}=w,T=y.value.get(S.id);T.command="üîÉconverted",m.value.set(N,T),a.converted++;break}case"file-completed":{const{inputsize:u,outputsize:D,fileId:N}=w;a.inputTotalSize+=u,a.outputTotalSize+=D;const T=m.value.get(N);T&&(T.command="‚úÖcompleted",T.completed=!0);break}case"file-error":{const{index:u,path:D,fileId:N}=w,T=b.get(N);if(!T)throw new Error(`the file doesn't exist in the Map. "${N}":"${D}"`);const q=f.get(T)||0,O=y.value.get(S.id);q<Wo?(f.set(T,q+1),c.push(T),O.command="‚ö†Ô∏èretrying",O.error=!0,o.warning(`retrying "${D}"`,{duration:3e3})):(a.done++,a.failure++,O.command="‚ùófailed",O.error=!0,i.error({content:`failed to load "${D}"`,duration:5e3}));break}case"file-canceled":{const{fileId:u,path:D}=w,N=m.value.get(u);a.done++,a.failure++,N.command="‚ùózip-aborted",N.error=!0;break}case"list-end":{ut(S);break}}}}async function Jo(a,s,g,o){let i=0;for(const c of a){const l=(c.webkitRelativePath||c.name).replace(/^\//,"");if(g.value)return;i-o.failedFileZippedCount>20&&await new Promise(f=>setTimeout(f,10)),s.postMessage({action:"add-filelist",file:c,path:l}),i++}s.postMessage({action:"squeeze-filelist"})}async function Xo(a,s,g,o,i,c){let l="";const f=document.createElement("canvas"),b=f.getContext("2d");let x=new mt;const A=o.format,p=o.quality/100,$=[...A.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),y=a.length,m=o.maxZipSizeMB*1024*1024;let v=0,z=null,S="",w="",M=0,u=0,D=0,N=0,T=0,q=!1;for(const E of a){if(i.value)break;const W=E.name;let Q="";const te=E.size,ue=(E.webkitRelativePath||E.relativePath||W).replace(/^\//,""),le=document.createElement("img");v++;const de={key:D++,core:-1,index:v,path:ue,command:"‚û°Ô∏èstart"};c.index=v,c.logs.push(de),c.logs.length-1;let ne;l&&(URL.revokeObjectURL(l),l=""),l=URL.createObjectURL(E),w=l,M=E.size,le.src=l;const F=await gn(le).then(()=>!0).catch(()=>!1);if(!le.complete||!F||i.value){c.done++,c.failure++,de.command="‚ùófailed";continue}const k=le.width,L=le.height;if(f.width=k,f.height=L,b.drawImage(le,0,0,k,L,0,0,k,L),de.command="üñºÔ∏èimgload",c.thumbnail=le,ne=await new Promise(U=>{const ae=Y=>{z=Y,U(Y==null?void 0:Y.arrayBuffer())};f.toBlob(ae,A,p)}),i.value)break;if(!ne){c.failure++;continue}u=ne.byteLength,c.converted++;let I="";if(T+u>=m){try{I=x.url()}catch{q=!0,alert("memory problem occurred");break}c.zips.push({url:I,size:T,count:N}),c.zippedTotalCount+=N,c.zippedTotalSize+=T,T=0,N=0,x.clear(),x=new mt}T+=u;const H=ue||W;for(let U=1;U<255&&(Q=H.replace(o.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+(U>1?`(${U})`:"")+"."+$,!!x.has(Q));U++);c.done++;try{N++,x.add(Q,ne),c.inputTotalSize+=te,c.outputTotalSize+=u}catch{continue}S=Q,c.success++,de.command="‚úÖcompleted",de.completed=!0,s.add(E._id)}if(c.success>0)if(y===1)z&&(c.convertedImageIndex=0,c.convertedImageName=S.replace(/^.*\/(?=[^/]+$)/,"").replace(o.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+$,c.convertedImageUrl=URL.createObjectURL(z),c.convertedImageOrgUrl=w,c.convertedImageOrgSize=M);else try{if(q)throw new Error("terminated zipping process for memory problems");const E=x.url();c.zips.push({url:E,count:N,size:T}),c.zippedTotalCount+=N,c.zippedTotalSize+=T}catch{}const O={value:!1},Ae=()=>{O.value=!0};let ge=!1;return{callbackToClearConverter:Ae,callbackToGenerateFailedZips:async E=>{ge||(ge=!0,el(E,m,c,O))}}}async function el(a,s,g,o){let i=0,c=0,l=new mt;for(let f=0;f<a.length;f++){const b=a[f],x=(b.webkitRelativePath||b.name).replace(/^\//,"");let A;try{A=await b.arrayBuffer()}catch{g.failedToCreateFailedZip=!0;return}if(o.value)return;if(l.add(x,A),c+=b.size,i++,g.failedFileZippedCount++,c>=s||f===a.length-1){const p=l.url();g.failedZips.push({url:p,size:c,count:i}),l.clear(),c=0,i=0}}g.failedZipDone=!0}function gn(a){if(typeof a.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((s,g)=>{a.onload=s,a.onerror=g})}const Me=(a,s)=>{const g=a.__vccOpts||a;for(const[o,i]of s)g[o]=i;return g},tl=a=>(xt("data-v-5dab19ad"),a=a(),At(),a),nl={class:"container"},al=tl(()=>h("span",{class:"text"},"ZIP",-1)),ol={__name:"zipicon",setup(a){return(s,g)=>(P(),ee("span",nl,[n(e(ve),null,{default:t(()=>[n(e(vt))]),_:1}),al]))}},ll=Me(ol,[["__scopeId","data-v-5dab19ad"]]);function Pe(a,s=2){const g=Math.sign(a);a=Math.abs(a);const o=["Bytes","KB","MB","GB"],i=a?Math.floor(Math.log(a)/Math.log(1024)):0;return`${(a/Math.pow(1024,i)*g).toFixed(s)}${o[i]}`}function mn(a,s=100,g=!1){s=typeof s=="number"?{width:s,height:s}:s;const{width:o,height:i}=s;let{width:c,height:l}=a;const f=c/l,b=o/i;return f>=b?(c=g?Math.min(o,c):o,l=c/f|0):(l=g?Math.min(i,l):i,c=l*f|0),{width:c,height:l}}const il=["href","download","title"],sl=_e({__name:"thumbnail",props:{src:{},width:{},height:{},maxWidth:{default:100},maxHeight:{default:100},expand:{type:Boolean,default:!1},loading:{type:Boolean},fileName:{},allowNext:{type:Boolean},allowPrev:{type:Boolean}},emits:["load","error","next","prev"],setup(a,{expose:s,emit:g}){Fe();const o=a,i=g;s({download:v,openPreview:z});const c=_(),l=_(!0),f=_(""),b=_(100),x=_(100),A=_(!1),p=it({width:"100px",height:"100px",minWidth:"50px",minHeight:"50px"});ye(o,(S,w)=>{p.width=(o.width||100)+"px",p.height=(o.height||100)+"px"}),ye(()=>o.src,()=>{m(o.src)},{immediate:!0});async function $(S){const w=S.target,M=w.naturalWidth,u=w.naturalHeight,{width:D,height:N}=mn({width:M,height:u},{width:o.maxWidth||100,height:o.maxHeight||100},o.expand);b.value=D,x.value=N,i("load",{src:w.src,width:M,height:u}),l.value=!1,await new Promise(T=>setTimeout(T,100)),!l.value&&(A.value=!0)}function y(S){const w=S.target;i("error",w.src)}async function m(S){l.value=!0,A.value=!1,await new Promise(w=>setTimeout(w,150)),f.value=S}function v(){const S=document.createElement("a");S.href=f.value,S.download=o.fileName,S.click()}function z(){var S,w,M,u;try{(w=(S=c.value)==null?void 0:S.previewInstRef)==null||w.setPreviewSrc(o.src),(u=(M=c.value)==null?void 0:M.previewInstRef)==null||u.toggleShow(!0)}catch{}}return(S,w)=>{const M=Yt,u=He,D=Re;return P(),V(e(be),null,{trigger:t(()=>[n(D,{show:e(l)||o.loading},{default:t(()=>[n(u,{justify:"center",align:"center",style:oe(e(p))},{default:t(()=>[h("a",{href:e(f),onClick:w[0]||(w[0]=Ne(()=>{},["left","prevent"])),target:"_blank",download:o.fileName,title:o.fileName,style:{"line-height":"0px"}},[n(De,{mode:"in-out"},{default:t(()=>[Kt(n(M,{ref_key:"nImageRef",ref:c,"show-toolbar-tooltip":"","_:render-toolbar":"renderToolbar",onLoad:$,onError:y,src:e(f),width:e(b),height:e(x),style:{border:"1px solid silver"}},null,8,["src","width","height"]),[[Qt,e(A)]])]),_:1})],8,il)]),_:1},8,["style"])]),_:1},8,["show"])]),default:t(()=>[C(" "+r(o.fileName),1)]),_:1})}}}),Dt=Me(sl,[["__scopeId","data-v-fc8adbf9"]]),rl={style:{"font-weight":"bold",color:"gray"}},ul={style:{"font-weight":"bold",color:"gray"}},dl=["href","download"],cl=["href"],pl={style:{"font-size":"0.8em"}},fl=_e({__name:"image-viewer",props:{url:{},originalUrl:{},name:{},originalName:{},size:{},originalSize:{},length:{},index:{},isSingle:{type:Boolean}},emits:["demand-image"],setup(a,{expose:s,emit:g}){const o=a,i=g;s({download:W});const c=_(),l=_(),f=_(),b=st(),{t:x}=Fe();Jt();const A=_(!0),p=_(1),$=_(1),y=_(1);_(0);const m=_(""),v=_(1),z=_(1),S=_(!1),w=_(!1),M=_(!1),u=he(()=>{var F,k;return((k=(F=f==null?void 0:f.value)==null?void 0:F.previewInstRef)==null?void 0:k.previewSrc)===m.value}),D=he(()=>p.value<o.length),N=he(()=>p.value>1);let T=-1;ye(p,()=>{p.value<1||p.value>o.length||(clearTimeout(T),T=setTimeout(()=>{o.index!==p.value-1&&(i("demand-image",p.value-1),S.value=!0,w.value=!1,M.value=!1)},100))}),ye(()=>o.index,()=>{var k,L;let F="";if(o.index===0&&A.value?(A.value=!1,p.value=1,F=o.url):o.index===p.value-1&&(S.value=!1,F=o.url),F){try{(L=(k=f.value)==null?void 0:k.previewInstRef)!=null&&L.displayed&&(u.value?f.value.previewInstRef.setPreviewSrc(F):f.value.previewInstRef.setPreviewSrc(o.originalUrl))}catch{}m.value=F}},{immediate:!0});let q="",O="";ye(()=>o.url,()=>{if(o.url!==q){const F=q,k=O;setTimeout(()=>{URL.revokeObjectURL(F),URL.revokeObjectURL(k)},1e3),q=o.url,O=o.originalUrl}o.isSingle&&(A.value=!1,m.value=o.url)}),Se(()=>{o.isSingle,i("demand-image",0),document.body.addEventListener("keydown",ge),document.body.addEventListener("keydown",Ae)}),Xt(()=>{document.body.removeEventListener("keydown",ge),document.body.removeEventListener("keydown",Ae)});function Ae(F){var k,L,I,H;if(F.key==="Escape")try{(L=(k=f.value)==null?void 0:k.previewInstRef)!=null&&L.displayed&&(F.stopPropagation(),(H=(I=f.value)==null?void 0:I.previewInstRef)==null||H.toggleShow(!1))}catch{}}function ge(F){var k,L;switch(F.key){case"ArrowRight":case"PageDown":te(1);break;case"ArrowLeft":case"PageUp":te(-1);break;case"ArrowUp":case"Home":p.value=1;break;case"ArrowDown":case"End":p.value=o.length;break;case" ":case"Enter":le();break;default:return}F.stopPropagation(),(L=(k=f.value)==null?void 0:k.previewInstRef)!=null&&L.displayed&&F.preventDefault()}function B({width:F,height:k}){$.value=F,y.value=k,w.value=!0}function E({width:F,height:k}){v.value=F,z.value=k,M.value=!0}function W(){u.value?c.value.download():l.value.download()}async function Q(F){try{const k=await fetch(F).then(L=>L.blob()).then(L=>new Promise(I=>{const H=new FileReader;H.onload=I,H.readAsDataURL(L)})).then(L=>L.target.result);navigator.clipboard.writeText(k),b.info({title:x("copiedDataURLDialogTitle"),content:()=>K("div",[K("div",x("copiedDataURLMessage"))]),positiveText:"OK"})}catch{b.error({title:"failed to copy Data URL",content:"could not copy Data URL",positiveText:"OK"})}}function te(F){F>0&&p.value<o.length&&p.value++,F<0&&p.value>1&&p.value--}let ue="";const le=()=>{var k,L,I,H,U,ae;ue=(I=window.getComputedStyle((L=(k=f==null?void 0:f.value)==null?void 0:k.previewInstRef)==null?void 0:L.previewRef))==null?void 0:I.transform;const F=u.value;(ae=(U=(H=f==null?void 0:f.value)==null?void 0:H.previewInstRef)==null?void 0:U.handleSwitchNext)==null||ae.call(U),Ke(()=>{var Y,ce,ke;u.value===F&&((ke=(ce=(Y=f==null?void 0:f.value)==null?void 0:Y.previewInstRef)==null?void 0:ce.handleSwitchNext)==null||ke.call(ce))})};function de(){try{Ke(()=>f.value.previewInstRef.previewRef.style.transform=ue)}catch{}}function ne({nodes:F}){const k=K(kt,{color:u.value?"green":"gray",offset:[-20,-12],value:(u.value?x("status.Converted"):x("status.Original"))+" "+p.value},()=>K(ze,{round:!0,onClick(){le()},textColor:"white",size:"small",style:{marginLeft:"4px"}},{icon:()=>K(u.value?Pa:Oa)}));F.next=K(ze,{onClick(){te(1)},disabled:!D.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>K(pt)}),F.prev=K(ze,{onClick(){te(-1)},disabled:!N.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>K(Pt)});try{const L=F.download.children;L.default=()=>x("save");const I=L.trigger();I.props.onClick=W,L.trigger=()=>I}catch{}return[k,...Object.values(F)]}return(F,k)=>{const L=Ie,I=He,H=ve,U=Xe,ae=Ua,Y=en,ce=zt,ke=Re;return P(),V(ke,{size:"large",show:A.value},{default:t(()=>[n(I,{justify:"center",align:"center",vertical:"",style:oe({visibility:A.value?"hidden":"visible"})},{default:t(()=>[n(I,{align:"center",wrap:!1},{default:t(()=>[n(ae,{ref_key:"nImageGroupRef",ref:f,"show-toolbar-tooltip":"","render-toolbar":ne,onPreviewNext:de},{default:t(()=>[n(I,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(I,{align:"center",justify:"center",vertical:""},{default:t(()=>[n(I,{align:"center",justify:"center",wrap:!1,style:{"font-size":"smaller"},class:"original-thumb"},{default:t(()=>[n(Dt,{ref_key:"thumbOrgRef",ref:l,src:F.originalUrl,width:100,"max-width":100,"max-height":80,loading:S.value,"file-name":F.originalName,"allow-next":p.value<o.length,"allow-prev":p.value>1,onLoad:E,onNext:k[0]||(k[0]=re=>te(1)),onPrev:k[1]||(k[1]=re=>te(-1))},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(L,{vertical:"",align:"center"},{default:t(()=>[h("span",rl,r(e(x)("status.Original")),1),n(L,{justify:"center",style:{"white-space":"nowrap","font-family":"v-mono"}},{default:t(()=>[C(r(String(v.value).padStart(4,"¬†"))+" √ó "+r(String(z.value).padStart(4,"¬†")),1)]),_:1}),n(L,{justify:"center"},{default:t(()=>[C(r(e(Pe)(o.originalSize,0)),1)]),_:1})]),_:1})]),_:1})]),_:1}),n(I,{style:{margin:"1em"},class:"original-thumb"},{default:t(()=>[n(H,{size:"48",color:"silver"},{default:t(()=>[n(e(pt))]),_:1})]),_:1}),n(I,{vertical:"",align:"center",justify:"center"},{default:t(()=>[n(I,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(Dt,{ref_key:"thumbConvRef",ref:c,src:m.value,width:140,"max-width":140,"max-height":100,loading:S.value,"file-name":o.name,"allow-next":p.value<o.length,"allow-prev":p.value>1,onLoad:B,onNext:k[2]||(k[2]=re=>te(1)),onPrev:k[3]||(k[3]=re=>te(-1))},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(I,{vertical:"",align:"center"},{default:t(()=>[h("span",ul,r(e(x)("status.Converted")),1),n(I,{justify:"center",wrap:!0},{default:t(()=>[o.url?(P(),V(U,{key:0,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[h("a",{href:o.url,ref:"saveImg",target:"_blank",download:o.name},[n(e(ze),{round:"",size:"tiny"},{default:t(()=>[C(r(F.$t("save")),1)]),_:1})],8,dl)]),default:t(()=>[C(" "+r(F.$t("save")),1)]),_:1})):se("",!0),o.url?(P(),V(U,{key:1,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[h("a",{href:o.url,target:"_self"},[n(e(ze),{onClick:k[4]||(k[4]=Ne(re=>Q(o.url),["left","prevent","stop"])),round:"",size:"tiny"},{default:t(()=>[C("DataURL")]),_:1})],8,cl)]),default:t(()=>[C(" "+r(F.$t("convertedImageDataUrlTooltip")),1)]),_:1})):se("",!0)]),_:1}),n(I,{justify:"center",style:{"white-space":"nowrap","font-family":"v-mono"}},{default:t(()=>[C(r(String($.value).padStart(4," "))+" √ó "+r(String(y.value).padStart(4," ")),1)]),_:1}),n(I,{justify:"center"},{default:t(()=>[C(r(e(Pe)(o.size,0)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),n(I,{ref:"fileNameContainer",justify:"center",style:{"max-width":"320px"},title:o.name},{default:t(()=>[n(Y,{"x-scrollable":!0,trigger:"hover",style:{"font-size":"smaller",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},{default:t(()=>[C(r(o.name),1)]),_:1})]),_:1},8,["title"]),F.isSingle?se("",!0):(P(),V(I,{key:0,style:{"font-family":"v-mono"},align:"center"},{default:t(()=>[h("span",pl,r(e(x)("status.index"))+":",1),C(" "+r(p.value)+" / "+r(o.length),1)]),_:1})),F.isSingle?se("",!0):(P(),V(I,{key:1,align:"center",justify:"center"},{default:t(()=>[n(e(ze),{onClick:k[5]||(k[5]=re=>te(-1)),disabled:!e(N),circle:!0,size:"small"},{icon:t(()=>[n(H,null,{default:t(()=>[n(e(Pt))]),_:1})]),_:1},8,["disabled"]),n(ce,{value:p.value,"onUpdate:value":k[6]||(k[6]=re=>p.value=re),tooltip:!1,step:1,min:1,max:o.length,style:{width:"180px"}},null,8,["value","max"]),n(e(ze),{onClick:k[7]||(k[7]=re=>te(1)),disabled:!e(D),circle:!0,size:"small"},{icon:t(()=>[n(H,null,{default:t(()=>[n(e(pt))]),_:1})]),_:1},8,["disabled"])]),_:1}))]),_:1},8,["style"])]),_:1},8,["show"])}}}),gl=Me(fl,[["__scopeId","data-v-d568baaa"]]),ml={class:"log-table"},vl={class:"log-tr"},hl={class:"log-th"},_l={class:"log-th"},yl={style:{"min-width":"7em"},class:"log-th"},wl={style:{"padding-left":"2em"},class:"log-th"},bl={class:"log-td"},xl={class:"log-td"},Al={class:"log-td"},kl={class:"log-td"},zl={style:{margin:"1px"}},Tl=["href","download","onClick"],Il={key:0,style:{position:"relative"}},Sl=["href","download"],Cl=["href","download"],$l={key:0,style:{margin:"1px"}},Ll=["href","download","onClick"],Nt=99999,El=100,Fl=_e({__name:"status",props:{processing:{type:Boolean},status:{},interval:{}},emits:["all-zips-clicked","demand-zip-errors","demand-image"],setup(a,{emit:s}){const g=st(),{t:o}=Fe(),i=Jt(),c={W:160,H:80},l=a,f=s,b=_(!1),x=_([]),A=_(!1),p=_([]),$=_([]),y=_([0,0]),m=_([0,0]),v=_([0,0]),z=_([0,0]),S=_([0,0]),w=_([0,0]),M=_(0),u=_([0,0]),D=_(i.value.infoColor),N=_("#000000"),T=_("#000000"),q=_(0),O=_(0),Ae=_(""),ge=_("00:00:00");_(""),_("");const B=_(void 0),E=_(!1),W=_(!0),Q=_(!1),te=he(()=>E.value?de.value:le.value),ue=_("16em"),le=_(5),de=_(1e3),ne=_(!0),F=_(!1),k=it({name:"",originalName:"",size:0,url:"",originalUrl:"",originalSize:0,dataUrl:"",index:-1}),L=_(null),I=_(null),H=_(),U=_();Se(()=>{ye(l.status,()=>ke(),{deep:!1}),ye([I,ne],()=>{if(!I.value||!ne.value)return;const{width:me,height:we}=mn(I.value,{width:c.W,height:c.H});L.value.width=me,L.value.height=we,L.value.style.width=me+"px",L.value.style.height=we+"px",I.value instanceof HTMLImageElement?L.value.getContext("2d").drawImage(I.value,0,0,me,we):(L.value.getContext("bitmaprenderer").transferFromImageBitmap(I.value),I.value=null,l.status.thumbnail=null)});let d=0;const Z=()=>{if(d)return;const me=Date.now();ge.value="00:00:00",d=window.setInterval(()=>{const we=(Date.now()-me)/1e3;ge.value=`${String(we/3600|0).padStart(2,"0")}:${String(we/60%60|0).padStart(2,"0")}:${String(we%60|0).padStart(2,"0")}`},300)};Z(),ye(()=>l.processing,(me,we)=>{me?(Z(),x.value=[],b.value=!1,A.value=!1,p.value=[],$.value=[]):(clearInterval(d),ke(),d=0),ne.value=!1,F.value=!0,l.processing||re()});const J=ja();let G;const X=()=>{clearTimeout(G),G=setTimeout(()=>{if(!ne.value||ie)return;const me=H.value.$parent.$el.offsetHeight,we=window.innerHeight-J.parent.parent.vnode.el.offsetHeight-8;ue.value=Math.max(me+we,50)+"px"},100)};X(),window.addEventListener("resize",X);const pe=new ResizeObserver(X);pe.observe(J.parent.parent.vnode.el);let ie=!1;Da(()=>{ie=!0,pe.disconnect(),clearInterval(d),clearTimeout(G),clearTimeout(ce),clearTimeout(et),window.removeEventListener("resize",X)})}),ye([()=>l.status.zips.length,()=>l.status.failedZips.length],()=>{const d=l.status;{p.value.length>d.zips.length&&(p.value.length=0);let Z=0;const J=d.zips.length===1&&d.zippedTotalCount===d.length;for(let G=p.value.length;G<d.zips.length;G++){const X=d.zips[G],pe=d.baseZipName+(J?"":"-"+String(G+1).padStart(2,"0"))+".zip";Z+=X.size,p.value[G]={url:X.url,size:X.size,number:J?0:G+1,sizeByUnit:Pe(X.size),name:pe,count:X.count,clicked:!1}}}{$.value.length>d.failedZips.length&&($.value.length=0);let Z=0;const J=d.failedZipDone&&d.failedZips.length===1;for(let G=$.value.length;G<d.failedZips.length;G++){const X=d.failedZips[G],pe=d.baseZipName+"-error"+(J?"":"-"+String(G+1).padStart(2,"0"))+".zip";Z+=X.size,$.value[G]={url:X.url,size:X.size,number:J?0:G+1,sizeByUnit:Pe(X.size),name:pe,count:X.count,clicked:!1}}}});const ae=l.interval||100;let Y=!1,ce=0;function ke(){if(Y)return;if(ce){Y=!0;return}ce=window.setTimeout(()=>{ce=0,Y&&(Y=!1,ke())},ae);const d=l.status;b.value=d.length>=2,m.value[1]=m.value[0],m.value[0]=d.index,v.value[1]=v.value[0],v.value[0]=d.success,z.value[1]=z.value[0],z.value[0]=d.failure,S.value[1]=S.value[0],S.value[0]=d.done,w.value[1]=w.value[0],w.value[0]=d.converted,M.value=d.length,u.value[1]=u.value[0],u.value[0]=d.zippedTotalCount,q.value=d.inputTotalSize,O.value=d.outputTotalSize;const Z=O.value-q.value;Ae.value=(Z>=0?"+ ":"")+Pe(Z);const J=O.value/q.value,G=(256|Math.min(255,Math.max(0,J-1.5)*255|0)).toString(16).substring(1);N.value="#"+G+"0000";const X=1024*1024,pe=(256|Math.min(255,Math.max(0,Z/1024/X)*255|0)).toString(16).substring(1);if(T.value="#"+pe+"0000",y.value[1]=y.value[0],y.value[0]=v.value[0]/M.value*100,ne.value||!l.processing){const ie=d.logs.slice(-Nt);x.value.push(...ie);const me=x.value.length-Nt;me>0&&x.value.splice(0,me),W.value&&ie.length&&nt(),x.value.length>de.value&&(de.value*=2)}d.logs.length=0,I.value=d.thumbnail,l.processing&&(D.value=z.value[0]?i.value.warningColor:i.value.infoColor),d.convertedImageUrl!==k.url&&(k.url=d.convertedImageUrl,k.name=d.convertedImageName,k.dataUrl=d.convertedImageDataUrl,k.size=d.convertedImageSize||d.outputTotalSize,k.originalSize=d.convertedImageOrgSize,k.originalName=d.convertedImageOrgName,k.index=d.convertedImageIndex,k.originalUrl=d.convertedImageOrgUrl)}function re(){const d=l.status;D.value=l.status.success===l.status.length?i.value.successColor:i.value.errorColor,d.unconvertedFileCount>0,z.value[0]>0||(v.value[0],M.value)}const Ce=he(()=>[{key:"open",label:o("status.openFailedList"),icon:()=>K(ve,()=>K(tn)),onSelect(){Lt()}},{key:"download",label:o("status.saveFailedList"),icon:()=>K(ve,()=>K(Na)),onSelect(){Lt(!0)}},{key:"zip",label:`${o("status.zipFailedList")}`+(l.status.failedZipDone?`(‚úî${o("status.done")})`:""),icon:()=>K(Re,{show:A.value&&!l.status.failedZipDone,size:"small"},()=>K(ve,()=>K(vt))),disabled:A.value,onSelect(d){return A.value=!0,f("demand-zip-errors"),!1}}]);function $e(d,Z=!1){const{url:J,name:G}=d;if(Z){const X=document.createElement("a");X.href=J,X.download=G,X.click()}d.clicked||(d.clicked=!0,l.processing||p.value.every(X=>X.clicked)&&f("all-zips-clicked"))}async function We(){if(b.value){if(p.value.length>=2&&!await new Promise((J,G)=>g.warning({title:o("Download"),content:o("status.confirmDownloadMessage",[p.value.length]),positiveText:"OK",negativeText:o("cancel"),onPositiveClick:()=>J(!0),onNegativeClick:()=>G()})))return;const d=p.value;for(const Z of d)$e(Z,!0)}else U.value.download()}function Lt(d=!1){const Z=new Blob([l.status.unconvertedListText],{type:"text/plain;charset=utf8"}),J=URL.createObjectURL(Z),G=document.createElement("a");G.href=J,G.target="_blank",d&&(G.download=l.status.baseZipName+"-error.txt"),G.click()}let et=0,tt=!1;function nt(d=!1){if(!tt){if(et){tt=!0;return}Ke(()=>{!d&&(!E.value||!W.value)||(H.value.scrollTo({behavior:d?"instant":"smooth",top:x.value.length*50}),et=window.setTimeout(()=>{et=0,tt&&(tt=!1,nt())},El))})}}return(d,Z)=>{const J=Ie,G=Ra,X=Za,pe=Xe,ie=He,me=Ba,we=an,dt=be,Aa=on,ka=Tt,za=It,Ta=bt,Ve=ze,Ia=ll,Et=kt,Sa=Ha;return P(),V(ie,{vertical:"",justify:"center"},{default:t(()=>[n(J,{justify:"center",align:"center",wrap:!1,style:{"white-space":"nowrap"}},{default:t(()=>[n(J,{vertical:"",justify:"center",class:"left-column"},{default:t(()=>[n(G,{"tabular-nums":"",label:d.$t("status.elapsedTime")},{default:t(()=>[n(J,null,{default:t(()=>[C(r(e(ge)),1)]),_:1})]),_:1},8,["label"]),n(G,{"tabular-nums":"",label:d.$t("status.multiThreading")},{default:t(()=>[n(J,{style:oe({color:l.status.threads?"":"red"})},{default:t(()=>[C(r(l.status.threads?d.$rt("{n} @:threads",l.status.threads):d.$t("disabled")),1)]),_:1},8,["style"])]),_:1},8,["label"]),n(G,{"tabular-nums":"",label:d.$t("status.outputSettings")},{default:t(()=>[n(J,{vertical:"",justify:"end",style:{"font-size":"smaller","line-height":"1em"}},{default:t(()=>[h("div",null,"Type: "+r(l.status.type),1),h("div",null,"Zip: "+r(l.status.zipSize)+"MB",1)]),_:1})]),_:1},8,["label"])]),_:1}),n(me,{type:"multiple-circle","stroke-width":1,percentage:[e(v)[0]/e(M)*100|0,e(m)[0]/e(M)*100|0],color:[e(i).successColor,e(D)],"rail-style":[{stroke:d.processing?e(i).successColor:e(D),opacity:.3},{stroke:e(D),opacity:.3}],class:"center-column"},{default:t(()=>[n(J,{vertical:"",align:"center",style:{"font-family":"v-mono","font-size":"xx-large","white-space":"nowrap"},wrap:!1,"wrap-item":!1},{default:t(()=>[h("span",{style:oe({color:e(z)[0]?e(D):d.processing?e(i).successColor:e(D)})},[n(X,{duration:e(ae)*3|0,from:e(y)[1]|0,to:e(y)[0]|0,active:!0},null,8,["duration","from","to"]),C("% ")],4),n(ie,{wrap:!1,style:{border:"0px solid"}},{default:t(()=>[n(ie,{vertical:"",size:"small",justify:"end"},{default:t(()=>[n(ie,{justify:"end",wrap:!1},{default:t(()=>[e(z)[0]>0?(P(),V(pe,{key:0,trigger:"hover",duration:0,delay:0,style:oe({color:e(i).errorColor}),placement:"left"},{trigger:t(()=>[h("span",{style:oe({fontSize:"xx-small",color:e(i).errorColor,lineHeight:"0"})}," ("+r(e(z)[0].toLocaleString("en-us"))+") ",5)]),default:t(()=>[C(" "+r(d.$t("status.progressErrors"))+" ("+r(e(z)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):se("",!0),n(pe,{trigger:"hover",duration:0,delay:0,style:oe({color:e(i).infoColor}),placement:"left"},{trigger:t(()=>[h("span",{style:oe({fontSize:"xx-small",color:e(i).infoColor,lineHeight:"0"})},r(e(m)[0].toLocaleString("en-us")),5)]),default:t(()=>[C(" "+r(d.$t("status.progressStarted"))+" ("+r(e(m)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])]),_:1}),n(ie,{justify:"end"},{default:t(()=>[n(pe,{trigger:"hover",duration:0,delay:0,style:oe({color:e(i).successColor}),placement:"bottom"},{trigger:t(()=>[h("span",{style:oe({fontSize:"medium",color:e(i).successColor})},[n(X,{duration:e(ae)*3|0,from:e(v)[1],to:e(v)[0],active:!0,"show-separator":!0},null,8,["duration","from","to"])],4)]),default:t(()=>[C(" "+r(d.$t("status.progressSuccess"))+" ("+r(e(v)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])]),_:1})]),_:1}),n(ie,{align:"end",style:{"font-size":"medium",border:"0px solid"}},{default:t(()=>[n(pe,{trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:t(()=>[C(" / "+r(e(M).toLocaleString("en-us")),1)]),default:t(()=>[C(" "+r(d.$t("status.progressTotal"))+" ("+r(e(M).toLocaleString("en-us"))+") ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["percentage","color","rail-style"]),n(J,{vertical:"",style:{height:"100%"},justify:"center"},{default:t(()=>[n(G,{"tabular-nums":"",label:d.$t("status.inputSize")},{default:t(()=>[n(J,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[C(r((e(q)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(G,{"tabular-nums":"",label:d.$t("status.outputSize")},{default:t(()=>[n(J,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[C(r((e(O)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(G,{"tabular-nums":"",label:d.$t("status.outInRate")},{default:t(()=>[n(J,{vertical:"",align:"end",justify:"start",style:{"font-size":"xx-small","font-family":"v-mono","line-height":"50%"}},{default:t(()=>[h("span",{style:oe({color:e(N),fontSize:"larger"})},"√ó "+r((e(O)/e(q)||1).toFixed(2)),5),h("span",{style:oe({color:e(T)})},"("+r(e(Ae))+")",5)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1}),n(za,{"display-directive":"show","trigger-areas":["arrow","main"],"default-expanded-names":"log-collapse","expanded-names":e(ne)?["log-collapse"]:[],"on-update:expanded-names":j=>{ne.value=!!String(j)}},{default:t(()=>[n(ka,{title:"Log",name:"log-collapse",style:{"white-space":"nowrap"}},nn({header:t(()=>[n(ie,{align:"center",wrap:!1},{default:t(()=>[C(r(d.$t("status.log")),1),d.processing&&!e(ne)?(P(),V(e(Re),{key:0,size:16})):se("",!0)]),_:1})]),default:t(()=>[n(ie,{wrap:!1,class:Qe({"log-container":1,"expand-log":e(E)}),align:"stretch",style:oe(e(E)?{height:e(ue),maxHeight:e(ue)}:{})},{default:t(()=>[n(e(en),{ref_key:"scrollref",ref:H,"x-scrollable":!0,onMouseup:Z[5]||(Z[5]=j=>W.value=!1),onWheel:Z[6]||(Z[6]=j=>W.value=!1),trigger:"none",style:oe([{"z-index":"2","padding-right":"10px","min-height":"7em"},{maxHeight:e(ue)}]),size:50},{default:t(()=>[h("table",ml,[h("tr",vl,[h("th",hl,r(d.$t("status.table.core")),1),h("th",_l,r(d.$t("status.table.index")),1),h("th",yl,r(d.$t("status.table.status")),1),h("th",wl,r(d.$t("status.table.details")),1)]),(P(!0),ee(xe,null,je((e(Q)?e(x).filter(j=>!j.completed):e(x)).slice(-e(te)),({index:j,key:Ue,command:Le,path:ct,core:Ft})=>(P(),ee("tr",{key:Ue,class:"log-tr"},[h("td",bl,r(Ft>=0?Ft+1:"-"),1),h("td",xl,r(j+1),1),h("td",Al,r(Le),1),h("td",kl,r(ct),1)]))),128))])]),_:1},8,["style"]),n(ie,{style:oe([{"align-self":"center",position:"absolute","z-index":"0","margin-top":"0.5em",right:"0.1em","line-height":"0px"},{width:c.W+"px",height:c.H+"px"}]),justify:"center",align:"center"},{default:t(()=>[n(e(Re),{size:"small",show:d.processing},{default:t(()=>[l.status.thumbnail===void 0?(P(),V(Aa,{key:0,description:"EMPTY"})):se("",!0),Kt(h("canvas",{ref_key:"thumbcanvas",ref:L,width:"106",height:"80",style:oe({border:"1px solid gray",filter:d.processing?"":"opacity(0.35)"})},null,4),[[Qt,l.status.thumbnail!==void 0]])]),_:1},8,["show"])]),_:1},8,["style"])]),_:1},8,["class","style"])]),_:2},[e(ne)?{name:"header-extra",fn:t(()=>[n(ie,{align:"center",wrap:!1},{default:t(()=>[n(ft,null,{default:t(()=>[n(we,{key:"a",checked:e(Q),"onUpdate:checked":Z[0]||(Z[0]=j=>Ee(Q)?Q.value=j:null),size:"small",style:{"font-size":"smaller"},class:"hide-mobile"},{default:t(()=>[C(r(d.$t("status.filterSuccess")),1)]),_:1},8,["checked"]),e(E)?(P(),V(we,{key:"b",checked:e(W),"onUpdate:checked":[Z[1]||(Z[1]=j=>Ee(W)?W.value=j:null),Z[2]||(Z[2]=j=>j&&nt(!0))],size:"small",style:{"font-size":"smaller"}},{default:t(()=>[C(r(d.$t("status.autoScroll")),1)]),_:1},8,["checked"])):se("",!0)]),_:1}),n(dt,{style:{"max-width":"30em"}},{trigger:t(()=>[n(we,{size:"small",checked:e(E),"onUpdate:checked":[Z[3]||(Z[3]=j=>Ee(E)?E.value=j:null),Z[4]||(Z[4]=j=>{W.value=j,nt(!0)})],style:{"font-size":"smaller"}},{default:t(()=>[C(r(d.$t("status.expandLog")),1)]),_:1},8,["checked"])]),default:t(()=>[C(r(d.$t("status.expandLogTooltip")),1)]),_:1})]),_:1})]),key:"0"}:void 0]),1024)]),_:1},8,["expanded-names","on-update:expanded-names"]),n(Ta,{style:{margin:"0.2em"}}),n(ie,{wrap:!1,vertical:""},{default:t(()=>[n(ie,{justify:"center",align:"center",vertical:""},{default:t(()=>[h("div",{class:"singleimage",style:oe({maxHeight:e(F)?"2000px":"100px"})},[!e(F)&&e(b)&&l.status.threads?(P(),V(Ve,{key:0,tertiary:"",type:"success",size:"small",disabled:!(d.status.success>0),onClick:Z[7]||(Z[7]=j=>F.value=!0)},{default:t(()=>[C(r(d.$t("status.browseConvertedImages")),1)]),_:1},8,["disabled"])):d.status.success>0&&(l.status.threads||!e(b))?(P(),V(gl,{key:1,ref_key:"imageViewer",ref:U,url:e(k).url,size:e(k).size,"original-url":e(k).originalUrl,"original-size":e(k).originalSize,name:e(k).name,originalName:e(k).originalName,length:l.status.success,index:e(k).index,"is-single":!e(b),onDemandImage:Z[8]||(Z[8]=j=>f("demand-image",j))},null,8,["url","size","original-url","original-size","name","originalName","length","index","is-single"])):se("",!0)],4)]),_:1}),n(ie,{justify:"center"},{default:t(()=>[e(b)?(P(),V(ie,{key:0,vertical:"",align:"center"},{default:t(()=>[n(pe,{placement:"left"},{trigger:t(()=>[n(me,{type:"line","indicator-placement":"inside",color:"lime","rail-color":"rgba(99, 255, 99, 0.5)","indicator-text-color":e(u)[0]===e(M)?"white":"green",processing:d.processing,percentage:e(u)[0]/e(M)*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[h("span",zl,r(e(u)[0]/e(M)*100|0)+"% "+r(d.$t("status.zipped"))+" ("+r(e(u)[0])+"/"+r(e(w)[0])+")",1)]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[C(" "+r(d.$t("status.zippingProgress"))+" ("+r(e(u)[0]/e(M)*100|0)+"%) ",1)]),_:1}),n(De,{name:"zipcontainer"},{default:t(()=>[e(p).length>=1||l.processing?(P(),V(ft,{key:0,name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(P(!0),ee(xe,null,je(e(p),(j,Ue)=>(P(),ee("span",{key:Ue},[n(pe,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[h("a",{href:j.url,download:j.name,class:"in-button-anchor",onClick:Le=>$e(j)},[n(Ve,{class:"zip-button",size:"tiny",color:j.clicked?"#050":"lime","text-color":j.clicked?"gray":"white",onClick:Ne(Le=>$e(j),["stop"]),round:""},{default:t(()=>[n(e(ve),{size:"tiny"},{default:t(()=>[n(e(vt))]),_:1}),C("ZIP"+r(j.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Tl)]),default:t(()=>[h("div",{style:oe({color:e(i).successColor})},[h("div",null,"ZIP "+r(j.number||"")+" ("+r(d.$t("success"))+")",1),h("div",null,r(j.name),1),h("div",null,r(j.sizeByUnit),1),h("div",null,r(d.$rt("{n} @:files",j.count)),1)],4)]),_:2},1024)]))),128))]),_:1})):se("",!0)]),_:1})]),_:1})):se("",!0)]),_:1}),n(De,null,{default:t(()=>[l.processing?se("",!0):(P(),V(ie,{key:0,justify:"center",align:"center"},{default:t(()=>[n(pe,{trigger:"hover",duration:0,delay:0,placement:"left",style:oe({color:"white",backgroundColor:e(i).successColor}),"arrow-style":{backgroundColor:e(i).successColor}},{trigger:t(()=>[n(De,{name:"save"},{default:t(()=>[e(v)[0]>0?(P(),ee("span",Il,[n(Et,{value:e(b)?e(u)[0].toLocaleString("en-us"):l.status.type.replace(/\(.+\)/,""),color:e(i).successColorHover,offset:[-20,-3]},{default:t(()=>[n(Ve,{size:"medium",onClick:We,color:e(i).successColor,round:""},{default:t(()=>[e(b)?(P(),ee(xe,{key:0},[e(p).length?(P(),ee("a",{key:0,href:e(p)[0].url,download:e(p)[0].name,class:"in-button-anchor",onClick:Z[9]||(Z[9]=Ne(()=>{},["prevent"]))},[n(Ia),C(" √ó "+r(e(p).length)+" "+r(d.$t("save")),1)],8,Sl)):se("",!0)],64)):(P(),ee("a",{key:1,href:e(k).url,download:e(k).name,class:"in-button-anchor",onClick:Z[10]||(Z[10]=Ne(()=>{},["prevent"]))},[n(e(ve),{size:"tiny"},{default:t(()=>[n(e(ln))]),_:1}),C(" "+r(d.$t("save")),1)],8,Cl))]),_:1},8,["color"])]),_:1},8,["value","color"])])):se("",!0)]),_:1})]),default:t(()=>[d.status.length>=2?(P(),ee(xe,{key:0},[h("div",null,r(e(o)("success"))+": "+r(e(u)[0].toLocaleString()),1),h("div",null,r(e(o)("status.totalSize"))+": "+r(e(Pe)(d.status.zippedTotalSize)),1),h("div",null,"ZIP √ó "+r(e(p).length),1),h("div",null,r(e(o)("status.saveAllZipsTooltip")),1)],64)):(P(),ee(xe,{key:1},[C(r(d.$t("status.downloadConvertedImage",e(p).length)),1)],64))]),_:1},8,["style","arrow-style"]),!d.processing&&d.status.success!==e(M)?(P(),V(Sa,{key:0,options:e(Ce),onSelect:Z[11]||(Z[11]=(j,Ue)=>{var Le;return(Le=e(Ce).find(({key:ct})=>j===ct))==null?void 0:Le.onSelect()}),"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start"},{default:t(()=>[n(pe,{show:e(B),duration:0,delay:0,placement:"right",style:oe({color:"white",backgroundColor:e(i).errorColor}),"arrow-style":{backgroundColor:e(i).errorColor}},{trigger:t(()=>[n(Et,{value:d.status.unconvertedFileCount.toLocaleString(),color:e(i).errorColorHover,offset:[-0,-3]},{default:t(()=>[n(Ve,{size:"small",color:e(i).errorColor},{default:t(()=>[n(e(ve),{size:"medium",style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Wa))]),_:1})]),_:1},8,["color"])]),_:1},8,["value","color"])]),default:t(()=>[h("div",null,[h("div",null,r(e(o)("failed"))+": "+r(d.status.unconvertedFileCount.toLocaleString()),1),h("div",null,r(e(o)("status.totalSize"))+": "+r(e(Pe)(d.status.unconvertedTotalSize)),1)])]),_:1},8,["show","style","arrow-style"])]),_:1},8,["options"])):se("",!0)]),_:1}))]),_:1}),n(De,{name:"zipcontainer"},{default:t(()=>[e(A)?(P(),V(ie,{key:0,vertical:"",align:"center"},{default:t(()=>[n(pe,{placement:"left"},{trigger:t(()=>[n(me,{type:"line","indicator-placement":"inside",color:"red","rail-color":"rgba(255, 0, 0, 0.5)","indicator-text-color":d.status.failedFileZippedCount===d.status.unconvertedFileCount?"white":"#500",processing:e(A)&&!d.status.failedZipDone&&!d.status.failedToCreateFailedZip,percentage:d.status.failedFileZippedCount/d.status.unconvertedFileCount*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[d.status.failedToCreateFailedZip?(P(),ee("div",{key:1,style:oe({color:e(i).errorColor})},r(d.$t("status.failureZippingFailedFiles")),5)):(P(),ee("span",$l,r(d.status.failedFileZippedCount/d.status.unconvertedFileCount*100|0)+"% "+r(d.$t("status.zipped"))+" ("+r(d.status.failedFileZippedCount)+"/"+r(d.status.unconvertedFileCount)+")",1))]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[C(" "+r(d.$t("status.zippingProgress"))+" ("+r(d.status.failedFileZippedCount/d.status.unconvertedFileCount*100|0)+"%) ",1)]),_:1}),n(ft,{name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(P(!0),ee(xe,null,je(e($),(j,Ue)=>(P(),ee("span",{key:Ue},[n(pe,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[h("a",{href:j.url,download:j.name,class:"in-button-anchor",onClick:Le=>$e(j)},[n(Ve,{class:"zip-button",size:"tiny",color:j.clicked?"#551122":"#F00","text-color":j.clicked?"gray":"white",onClick:Ne(Le=>$e(j),["stop"]),round:""},{default:t(()=>[n(e(ve),{size:"tiny"},{default:t(()=>[n(e(Va))]),_:1}),C("ZIP"+r(j.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Ll)]),default:t(()=>[h("div",{style:oe({color:e(i).errorColor})},[h("div",null,"ZIP "+r(j.number||"")+" ("+r(d.$t("failed"))+")",1),h("div",null,r(j.name),1),h("div",null,r(j.sizeByUnit),1),h("div",null,r(d.$rt("{n} @:files",j.count)),1)],4)]),_:2},1024)]))),128))]),_:1})]),_:1})):se("",!0)]),_:1})]),_:1})]),_:1})}}}),Ml=Me(Fl,[["__scopeId","data-v-67ba3525"]]),Pl=["innerHTML"],Ol={style:{"flex-grow":"1"}},Ul=_e({__name:"converter",props:{input:{},format:{},quality:{},retainExtension:{type:Boolean},maxZipSizeMB:{},threads:{}},emits:["start","end","multi-thread-count"],setup(a,{emit:s}){Be(Oe);const{t:g}=Fe(),o=st(),i=qa(),c=Ga(),l=10,f=navigator.hardwareConcurrency,b=typeof OffscreenCanvas=="function",x=300,A=a,p=s,$=_(!1),y=_(!1),m=_(!1),v=_(0),z=_(!1),S=_(!1),w=_("initializing"),M=_("info"),u=it(W());let D=!1,N=()=>{},T=0,q=!1;ye(()=>A.input,L=>{L!=null&&L.length&&te(L)}),Se(async()=>{await F(),k()});function O(){if(T>l*1e3&&!q&&u.success>0)return o.warning({title:g("confirmCloseDialogTitle"),autoFocus:!0,maskClosable:!1,positiveText:g("close"),negativeText:g("back"),onPositiveClick(){z.value=!1,c.destroyAll(),i.destroyAll()},onNegativeClick(){},content:g("confirmCloseDialog")}),!1;c.destroyAll(),i.destroyAll(),z.value=!1}function Ae(L){u.demandImage(L)}function ge(){!y.value&&$.value?y.value=!0:O()}function B(){te(A.input)}let E=_(()=>{});function W(L){const I={logs:[],index:0,converted:0,success:0,failure:0,done:0,length:0,zippedTotalCount:0,zippingErrorCount:0,zippedTotalSize:0,processing:!1,zips:[],inputTotalSize:0,outputTotalSize:0,thumbnail:null,baseZipName:"testzipname",type:"image/any",startedTime:Date.now(),convertedImageDataUrl:"",convertedImageName:"",convertedImageUrl:"",zipSize:A.maxZipSizeMB,unconvertedListText:"",failedZipDone:!1,failedZips:[],unconvertedFileCount:0,unconvertedTotalSize:0,failedFileZippedCount:0,failedToCreateFailedZip:!1,demandImage:()=>{}};return Object.assign(L||{},I)}function Q(){S.value=!1,URL.revokeObjectURL(u.convertedImageUrl),URL.revokeObjectURL(u.convertedImageOrgUrl);for(const L of u.zips)URL.revokeObjectURL(L.url);u.zips.length=0;for(const L of u.failedZips)URL.revokeObjectURL(L.url);u.failedZips.length=0,W(u),N(),N=()=>{},q=!1,m.value=!1,y.value=!1}async function te(L){if($.value){o.error({title:"Busy",positiveText:"OK",content:g("interfered")});return}let I=de(L);W(u),Q();const H={convertedImageBlob:null,convertedImageWidth:0,convertedImageHeight:0,convertedImageName:""};v.value++,z.value=!0,S.value=!0,$.value=!0,u.processing=!0,M.value="info",w.value=g("processing");const U=new Set,ae=A.format,Y=A.quality,ce=[...ae.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),ke=ne(ae,Y,I[0].webkitRelativePath);u.length=I.length,u.baseZipName=ke,u.type=ae.replace(/image\//,"").toUpperCase()+(/jpe?g|webp/i.test(ae)?" ("+Y+")":""),u.threads=D?0:A.threads;const re=Date.now();p("start");const Ce=I.concat();let $e;if({callbackToGenerateFailedZips:$e,callbackToClearConverter:N}=!D&&A.threads>=2?await Ko(u,y,A,H,i,c,Ce,U,ae,Y,ce,ae):await Xo(Ce,U,H,A,y,u),u.length,u.success===u.length?(M.value="success",w.value=g("completed")):(M.value="error",w.value=y.value?g("aborted"):g("incomplete")),U.size!==I.length){const We=ue(I,U);E.value=()=>{!We||!We.length||$e(We)}}$.value=!1,u.processing=!1,m.value=!0,T=Date.now()-re,p("end")}function ue(L,I){const H=[],U=[];let ae=0;for(const Y of L)I.has(Y._id)||(H.push(Y),U.push(Y.webkitRelativePath||Y.relativePath||Y.name),ae+=Y.size);return U.length&&(u.unconvertedListText=U.join(`
`),u.unconvertedFileCount=H.length,u.unconvertedTotalSize=ae),H}let le=0;function de(L){const I=[];for(const H of L)H.hasOwnProperty("_id")||Object.defineProperty(H,"_id",{value:le++}),I.push(H);return I}function ne(L,I,H){var ce;const U=new Date;return L=L.replace(/^image\//,"").toLowerCase(),`${R.useFolderNameForZip&&((ce=String(H).match(/^\/?([^/]+)\//))==null?void 0:ce[1])||"avif2jpg"}-
    ${U.getFullYear().toString().substring(2)}
    ${String((U.getMonth()+1)*100+U.getDate()).padStart(4,"0")}
    ${String(U.getHours()*1e4+U.getMinutes()*100+U.getSeconds()).padStart(6,"0")}
    -
    ${L+(/jpe?g|webp/i.test(L)?I:"")}
  `.replace(/\s/g,"")}async function F(){const L="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",I=document.createElement("img"),H=gn(I).then(()=>!0,()=>!1);I.src=L,await H||o.warning({title:"Unsupported",positiveText:"OK",maskClosable:!1,content:g("avifUnsupported")})}function k(){(!b||f<2||!Promise.any)&&(D=!0),p("multi-thread-count",D?0:f)}return(L,I)=>{const H=ze,U=be,ae=Ie,Y=Re,ce=He,ke=wt;return P(),ee(xe,null,[n(ae,{justify:"center",align:"center"},{default:t(()=>{var re;return[!e($)&&((re=A.input)!=null&&re.length)?(P(),V(U,{key:0,trigger:"hover",placement:"top","keep-alive-on-hover":!1,duration:0,delay:50},{trigger:t(()=>[n(H,{onClick:B,round:""},{default:t(()=>[C(r(e(g)("convertAgain")),1)]),_:1})]),default:t(()=>{var Ce;return[h("div",{innerHTML:e(g)("reconvertTip",(Ce=A.input)==null?void 0:Ce.length)},null,8,Pl)]}),_:1})):se("",!0)]}),_:1}),n(ke,{ref:"processingModal",show:e(z),"onUpdate:show":I[2]||(I[2]=re=>Ee(z)?z.value=re:null),closable:e(m),"close-on-esc":!1,preset:"dialog","display-directive":"show",onClick:I[3]||(I[3]=re=>{e(c).destroyAll(),e(i).destroyAll()}),onMaskClick:I[4]||(I[4]=re=>{e(c).destroyAll(),e(i).destroyAll()}),onClose:O,onEsc:ge,title:e(w),type:e(M),"mask-closable":!1,"on-after-leave":Q,class:"processing-dialog"},{default:t(()=>[n(ce,{vertical:"",style:{"flex-grow":"1"}},{default:t(()=>[h("div",Ol,[e(S)?(P(),V(Ml,{key:e(v),processing:e($),status:e(u),interval:x,onAllZipsClicked:I[0]||(I[0]=re=>Ee(q)?q.value=!0:q=!0),onDemandZipErrors:e(E),onDemandImage:Ae},null,8,["processing","status","onDemandZipErrors"])):se("",!0)]),n(ce,{justify:"end"},{default:t(()=>[e($)?(P(),V(H,{key:0,disabled:e(y),ref:"cancelbutton",round:"",size:"large",onClick:I[1]||(I[1]=re=>y.value=!0)},{default:t(()=>[n(Y,{show:e(y)&&!e(m),size:"small"},{default:t(()=>[C(r(e(g)("cancel")),1)]),_:1},8,["show"])]),_:1},8,["disabled"])):e(m)?(P(),V(H,{key:1,onClick:O,round:"",size:"large",style:{"font-size":"small","margin-top":"1em"}},{default:t(()=>[C(r(e(g)("close")),1)]),_:1})):se("",!0)]),_:1})]),_:1})]),_:1},8,["show","closable","title","type"])],64)}}}),Dl="/avif2jpeg/dist/avif.png",vn=a=>(xt("data-v-892702c9"),a=a(),At(),a),Nl={class:"container-1"},jl=vn(()=>h("span",null,"Drag & Drop",-1)),Rl={style:{position:"relative"}},Zl={style:{position:"absolute","font-size":"0.5em",right:"-3.5em",bottom:"-1.5em","white-space":"nowrap"}},Bl={style:{color:"#666666"}},Hl=vn(()=>h("img",{src:Dl,class:"avif"},null,-1)),Wl=["innerHTML"],Vl={style:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","font-size":"xx-small","white-space":"nowrap"}},ql=_e({__name:"droptarget",props:{forbidden:{type:Boolean},dropTarget:{}},emits:["drop"],setup(a,{emit:s}){Be(Oe);const g=a,o=s,i=Ka(),c=_(!1),l=_(0),f=_("");Se(()=>{b(g.dropTarget||document)});function b(A){document.ondragstart=p=>p.preventDefault(),document.ondragover=p=>p.preventDefault(),A.ondrop=async p=>{var y;if(p.preventDefault(),c.value||g.forbidden)return;c.value=!0,l.value=0,f.value="";let $;try{const m=[...p.dataTransfer.items].map(v=>v.webkitGetAsEntry());i.start(),$=await x(m),i.finish()}catch{$=[...((y=p.dataTransfer)==null?void 0:y.files)??[]],i.error()}c.value&&(c.value=!1,o("drop",$))}}async function x(A,p){p=p||[];for(const $ of A)if($.isFile){const y=await new Promise(m=>$.file(v=>m(v)));Object.defineProperty(y,"webkitRelativePath",{value:$.fullPath}),p.push(y),l.value++}else if($.isDirectory){f.value=$.fullPath;const y=$.createReader();do{const m=await new Promise(v=>y.readEntries(z=>v(z)));if(!m.length)break;await x(m,p)}while(!0)}return p}return(A,p)=>{const $=ve,y=Ie,m=Xe,v=be,z=wt;return P(),ee(xe,null,[h("div",Nl,[n(v,{to:!1,"display-directive":"show",trigger:"hover",duration:0,delay:0,placement:"left"},{trigger:t(()=>[n(y,{vertical:"",class:"container-2"},{default:t(()=>[n(y,{align:"center",wrap:!1,class:"container-3"},{default:t(()=>[n(y,{align:"center"},{default:t(()=>[n($,{size:"64",color:"white"},{default:t(()=>[n(e(Qa))]),_:1})]),_:1}),n(y,{vertical:"",align:"center",wrap:!1,style:{"font-weight":"bold","font-size":"1em","line-height":"90%","white-space":"nowrap"}},{default:t(()=>[jl,h("span",Rl,[C(" AVIF Images "),h("span",Zl,[C(" or "),n(m,{placement:"bottom-end"},{trigger:t(()=>[h("span",Bl,[n($,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(St))]),_:1}),C(" Folders ")])]),default:t(()=>[C(" You can drag and drop your local folders ")]),_:1})])])]),_:1}),n(y,null,{default:t(()=>[Hl]),_:1})]),_:1})]),_:1})]),default:t(()=>[h("h3",{innerHTML:A.$t("droptarget"),style:{"max-width":"200px","text-align":"center","word-break":"keep-all","overflow-wrap":"break-word"}},null,8,Wl)]),_:1})]),n(z,{show:e(c),"onUpdate:show":p[0]||(p[0]=S=>Ee(c)?c.value=S:null),closable:!0,preset:"dialog",title:"Parsing dropped items.",type:"info","mask-closable":!1,"negative-text":A.$t("cancel")},{default:t(()=>[n(y,{vertical:"",align:"center"},{default:t(()=>[h("div",Vl,r(e(f)),1),h("div",null,"found "+r(e(l))+" files",1)]),_:1})]),_:1},8,["show","negative-text"])],64)}}}),Gl=Me(ql,[["__scopeId","data-v-892702c9"]]),hn=a=>(xt("data-v-8f1ca735"),a=a(),At(),a),Kl={class:"container-1"},Ql={class:"container-2"},Yl=["innerHTML"],Jl=["innerHTML"],Xl={style:{"padding-left":"1em"}},ei=hn(()=>h("br",null,null,-1)),ti=hn(()=>h("ul",null,[h("li",null,"Each extension must begin with a period. "),h("li",null,"Separate each extension with a comma. "),h("li",null,"Use alphameric characters.")],-1)),ni=["innerHTML"],ai=["accept"],oi=_e({__name:"file-selector",props:ht({expanded:{type:Boolean},target:{},userExtensions:{},forbidden:{type:Boolean}},{disableNotifyingFolderSelect:{type:Boolean},disableNotifyingFolderSelectModifiers:{}}),emits:ht(["input","on-change-accept","update:target","update:userExtensions","update:expanded"],["update:disableNotifyingFolderSelect"]),setup(a,{emit:s}){const g=st(),{t:o}=Fe(),i=Be(Oe),c=["avif_only","all_images","all_files","edit_type"],l=a,f=s,b=_(0),x=_(!1),A=_(!1),p=he(()=>O(v.value)),$=he(()=>z.value.split(",").every(E=>/^\s*(\.[\w\-]+)*\s*$/.test(E))?"success":"error"),y=he(()=>!l.forbidden&&!A.value),m=he({get:()=>l.expanded,set:B=>{f("update:expanded",B)}}),v=he({get:()=>c.indexOf(l.target)>=0?l.target:c[0],set:B=>{f("update:target",B)}}),z=he({get:()=>l.userExtensions,set:B=>{f("update:userExtensions",B)}}),S=Te(a,"disableNotifyingFolderSelect"),w=_(null),M=_(null),u=_(q());ye(v,B=>{f("on-change-accept",p.value)}),Se(()=>{});async function D(B){if(B===M.value&&!S.value){let E=!1;if(await new Promise(W=>{g.info({title:o("loadfolderNotifyingTitle"),positiveText:o("Continue"),negativeText:o("Cancel"),onAfterLeave:()=>W(E),onPositiveClick:()=>E=!0,content:()=>K("div",[K("p",{},o("loadfolderNotifyingMessageTerm1")),K("div",[K(Yt,{width:250,style:{border:"3px solid gray"},src:"/avif2jpeg/dist//notification-folder.png"})]),K("p",{},o("loadfolderNotifyingMessageTerm2")),K("p",[K(an,{onUpdateChecked:Q=>S.value=Q,checked:S.value},()=>o("checkboxTextDontShowThis"))])])})}),!E){S.value=!1;return}}B.click()}function N(){}function T(B){const W=[...B.target.files];w.value.value="",M.value.value="",ge(W)}function q(){return"webkitdirectory"in document.createElement("input")}function O(B){switch(B){case"avif_only":return".avif, .webp";case"all_images":return".jpg, .jpeg, .jfif, .pjpeg, .pjp, .gif, .png, .webp, .avif, .bmp, .apng, .ico";case"edit_type":return z.value;case"all_files":default:return".*"}}async function Ae(B){const E=String(p.value).toLowerCase().replace(/\s+/g,"");if(E&&p.value!==".*"){const W=E.split(",");B=B.filter(Q=>W.includes(Q.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),B.length||await new Promise(Q=>{g.error({title:"Images Not Found",positiveText:"OK",onAfterLeave:Q,content:()=>K("div",[K(on,{description:"NO IMAGES"}),`${o("noimage")}`,K("br"),p.value])})})}return B}async function ge(B){A.value=!0,B=await Ae(B),b.value=B.length,B.length>0&&f("input",B),A.value=!1}return(B,E)=>{const W=ve,Q=kt,te=ze,ue=be,le=Ie,de=no,ne=Ya,F=Ja,k=Xe,L=Xa,I=Tt,H=It;return P(),ee(xe,null,[h("div",Kl,[h("div",Ql,[n(le,{vertical:"",align:"center",justify:"center",inline:""},{default:t(()=>[n(le,{align:"center",justify:"space-around"},{default:t(()=>[n(Q,{value:e(b),max:999,offset:[-8,0],color:"#999999",style:{"margin-right":"1em"}},{default:t(()=>[n(W,{size:"4em",color:"#CCCCCC"},{default:t(()=>[n(e(eo))]),_:1})]),_:1},8,["value"]),n(le,{vertical:"",align:"stretch",justify:"center"},{default:t(()=>[n(ue,{to:!1,"display-directive":"show",show:e(i).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(i).LANDSCAPE.value?"right":"top",duration:0,delay:0,"z-index":10},{trigger:t(()=>[n(te,{disabled:!e(y),onClick:E[0]||(E[0]=U=>D(e(w))),round:"",style:{width:"100%","background-color":"white"}},{icon:t(()=>[n(W,{size:"large",color:"gray"},{default:t(()=>[n(e(sn))]),_:1})]),default:t(()=>[C(" "+r(B.$t("loadbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[h("div",{innerHTML:B.$t("loadbuttontooltip")},null,8,Yl)]),_:1},8,["show","placement"]),!e(i).IS_SP&&e(u)||e(i).SSR?(P(),V(ue,{key:0,to:!1,"display-directive":"show",trigger:"hover",placement:"left","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:e(i).showTooltipsBeforeMounted.value},{trigger:t(()=>[n(te,{disabled:!e(y),onClick:E[1]||(E[1]=U=>D(e(M))),round:"",style:{width:"100%","background-color":"white"}},{icon:t(()=>[n(W,{size:"large",color:"gray"},{default:t(()=>[n(e(St))]),_:1})]),default:t(()=>[C(" "+r(B.$t("loadfolderbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[h("div",{innerHTML:B.$t("loadfoldertooltip")},null,8,Jl)]),_:1},8,["show"])):se("",!0)]),_:1})]),_:1}),h("div",{class:Qe({"expand-ext-list-container":e(m)})},[n(H,{"display-directive":"show","expanded-names":e(m)?["extItem"]:"","on-update:expanded-names":U=>{m.value=!!(""+U)},class:Qe({"expand-ext-list":e(m)})},{"header-extra":t(()=>[n(W,{size:"large"},{default:t(()=>[n(e(to))]),_:1})]),default:t(()=>[n(I,{title:B.$t("fileTypeRadioTitle"),name:"extItem"},{default:t(()=>[n(L,{value:e(v),"onUpdate:value":E[5]||(E[5]=U=>Ee(v)?v.value=U:null),name:"filetyperadios",size:"small"},{default:t(()=>[n(le,{vertical:"",style:{"padding-left":"1em"}},{default:t(()=>[(P(),ee(xe,null,je(c,U=>n(ue,{key:U,trigger:"hover","keep-alive-on-hover":!1,"z-index":5,placement:"left",style:{"max-width":"200px"},duration:0,delay:0},{trigger:t(()=>[n(de,{value:U},{default:t(()=>[C(r(B.$t("fileTypeRadioOptions."+U)),1)]),_:2},1032,["value"])]),default:t(()=>[C(" "+r(O(U).replace(/,/g,", ")),1)]),_:2},1024)),64)),n(ue,{trigger:"hover","keep-alive-on-hover":!1,placement:"bottom-start",show:e(x),duration:0,delay:0},{trigger:t(()=>[h("div",Xl,[n(k,{trigger:"manual",placement:"right-end",show:e(v)==="edit_type"&&e($)!=="success"&&!!e(x)},{trigger:t(()=>[n(ne,{value:e(z),"onUpdate:value":E[2]||(E[2]=U=>Ee(z)?z.value=U:null),status:e($),disabled:e(v)!=="edit_type",onFocus:E[3]||(E[3]=U=>x.value=!0),onBlur:E[4]||(E[4]=U=>x.value=void 0),clearable:!0,size:"small",placeholder:".jpg, .gif, .png",spellcheck:"false"},null,8,["value","status","disabled"])]),default:t(()=>[n(F,{type:"error","show-icon":!0,title:"Validation error"},{default:t(()=>[C(" Please correct the extension list."),ei,ti]),_:1})]),_:1},8,["show"])])]),default:t(()=>[h("span",{innerHTML:B.$t("editAcceptTypes")},null,8,ni)]),_:1},8,["show"])]),_:1})]),_:1},8,["value"])]),_:1},8,["title"])]),_:1},8,["expanded-names","on-update:expanded-names","class"])],2),e(i).IS_SP?se("",!0):(P(),V(Gl,{key:0,onDrop:ge,forbidden:!e(y)},null,8,["forbidden"]))]),_:1})])]),h("input",{ref_key:"fileinput",ref:w,onInput:T,onCancel:N,type:"file",multiple:"",accept:e(p),style:{display:"none"}},null,40,ai),h("input",{ref_key:"folderinput",ref:M,webkitdirectory:"",directory:"",onInput:T,onCancel:N,type:"file",style:{display:"none"}},null,544)],64)}}}),li=Me(oi,[["__scopeId","data-v-8f1ca735"]]),ii={style:{"white-space":"nowrap"}},si=_e({__name:"settings-output",props:{quality:{},format:{}},emits:["update:format","update:quality"],setup(a,{emit:s}){const g=a,o=s,{t:i}=Fe(),c=Be(Oe),l=_([]),f=["image/jpeg","image/png","image/gif","image/bmp","image/avif","image/webp"],b=he({get:()=>g.format,set:m=>{m=$(m),o("update:format",m)}}),x=he({get:()=>g.quality,set:m=>{o("update:quality",m)}}),A=he(()=>/png|bmp/i.test(b.value)),p=_(null);Se(()=>{y()});function $(m){return l.value.indexOf(m)<0&&(m=l.value[0]),m}function y(){for(const m of f)p.value.toDataURL(m).indexOf(m)>=0&&l.value.push(m);l.value.length===0&&l.value.push(f[0])}return(m,v)=>{const z=ve,S=rn,w=Ie,M=be,u=zt,D=un;return P(),ee(xe,null,[n(w,{justify:"center"},{default:t(()=>[n(w,{vertical:""},{default:t(()=>[n(M,{to:!1,"display-directive":"show",show:e(c).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(c).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(w,{align:"center"},{default:t(()=>[n(z,null,{default:t(()=>[n(e(sn))]),_:1}),C(r(e(i)("settings.imageType"))+": ",1),n(S,{value:b.value,"onUpdate:value":v[0]||(v[0]=N=>b.value=N),options:l.value.map(N=>({value:N,label:N})),"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),_:1})]),default:t(()=>[C(" "+r(e(i)("settings.imageTypeTooltip")),1)]),_:1},8,["show","placement"]),n(M,{to:!1,"display-directive":"show",show:e(c).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(c).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(w,{align:"center"},{default:t(()=>[n(w,{align:"start",wrap:!1},{default:t(()=>[n(z,null,{default:t(()=>[n(e(ln))]),_:1}),h("span",ii,r(e(i)("settings.quality"))+":",1),n(w,{align:"center",justify:"space-between"},{default:t(()=>[n(u,{tooltip:!1,value:x.value,"onUpdate:value":v[1]||(v[1]=N=>x.value=N),step:1,style:{width:"120px"},disabled:A.value},null,8,["value","disabled"]),n(D,{value:x.value,"onUpdate:value":v[2]||(v[2]=N=>x.value=N),step:"1",min:"0",max:"100",disabled:A.value,style:{width:"90px"},size:"small"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:t(()=>[C(" "+r(e(i)("settings.qualitytooltip")),1)]),_:1},8,["show","placement"])]),_:1})]),_:1}),h("canvas",{ref_key:"canvas",ref:p,width:"1",height:"1",style:{display:"none"}},null,512)],64)}}}),ri={style:{width:"4em","text-align":"left"}},ui={style:{width:"4em","text-align":"left"}},jt=100,Rt=2e3,Zt=4096,Bt=4096,di=100,ci=100,pi=_e({__name:"settings-adv",props:ht({threadMax:{}},{expanded:{type:Boolean,required:!0},expandedModifiers:{},multithread:{type:Boolean,required:!0},multithreadModifiers:{},threadCount:{required:!0},threadCountModifiers:{},maxZipSize:{required:!0},maxZipSizeModifiers:{},retainExt:{type:Boolean,required:!0},retainExtModifiers:{},useFolderNameForZip:{type:Boolean,required:!0},useFolderNameForZipModifiers:{},shrinkImage:{type:Boolean,required:!0},shrinkImageModifiers:{},maxWidth:{required:!0},maxWidthModifiers:{},maxHeight:{required:!0},maxHeightModifiers:{}}),emits:["update:expanded","update:multithread","update:threadCount","update:maxZipSize","update:retainExt","update:useFolderNameForZip","update:shrinkImage","update:maxWidth","update:maxHeight"],setup(a){const s={trigger:"hover",placement:"left",keepAliveOnHover:!1,duration:0,delay:0,style:"max-width: 20vw;"},g=Te(a,"expanded"),o=Te(a,"multithread"),i=Te(a,"threadCount"),c=Te(a,"maxZipSize"),l=Te(a,"retainExt"),f=Te(a,"useFolderNameForZip"),b=Te(a,"shrinkImage"),x=Te(a,"maxWidth"),A=Te(a,"maxHeight"),p=a;ye([i,()=>p.threadMax],()=>{p.threadMax>1&&typeof i.value>"u"&&(i.value=p.threadMax)}),ye(()=>p.threadMax,()=>{p.threadMax>1||(o.value=!1)},{immediate:!0});const $=he(()=>o.value&&p.threadMax>1);return(y,m)=>{const v=ve,z=ze,S=ao,w=He,M=zt,u=un,D=Tt,N=It;return P(),V(w,{justify:"center"},{default:t(()=>[n(N,{"display-directive":"show","default-expanded-names":g.value?["collapitem"]:"","on-update:expanded-names":T=>g.value=!!String(T),"trigger-areas":["arrow","main"],class:Qe(["settings-body",g.value?"expand-adv-settings":""])},nn({arrow:t(()=>[n(v,{style:oe(g.value&&{top:"8px"})},{default:t(()=>[n(e(oo))]),_:1},8,["style"]),n(v,null,{default:t(()=>[n(e(lo))]),_:1})]),default:t(()=>[n(D,{title:y.$t("settings.advancedSettings"),name:"collapitem"},{default:t(()=>[n(w,{vertical:"",style:{"padding-left":"2em"}},{default:t(()=>[n(e(be),qe(Ge(s)),{trigger:t(()=>[n(w,{vertical:""},{default:t(()=>[n(w,{wrap:!1,align:"center"},{default:t(()=>[n(z,{text:"",disabled:!y.threadMax,style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:m[0]||(m[0]=T=>o.value=!o.value)},{icon:t(()=>[n(v,null,{default:t(()=>[n(e(io))]),_:1})]),default:t(()=>[C(" "+r(y.$t("settings.enableMultiThreads")),1)]),_:1},8,["disabled"]),n(S,{value:o.value,"onUpdate:value":m[1]||(m[1]=T=>o.value=T),disabled:!y.threadMax,size:"small"},null,8,["value","disabled"])]),_:1}),n(w,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(M,{value:i.value,"onUpdate:value":m[2]||(m[2]=T=>i.value=T),disabled:!y.threadMax||!o.value,step:1,min:2,max:y.threadMax,style:{width:"120px"}},null,8,["value","disabled","max"]),n(u,{size:"tiny",value:i.value,"onUpdate:value":m[3]||(m[3]=T=>i.value=T),disabled:!y.threadMax||!o.value,step:1,min:2,max:y.threadMax,style:{width:"10em"}},{suffix:t(()=>[C(r(y.$t("threads",i.value)),1)]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[C(" "+r(y.$t("settings.multiThreadsTooltip")),1)]),_:1},16),n(e(be),qe(Ge(s)),{trigger:t(()=>[n(w,{vertical:""},{default:t(()=>[n(w,{wrap:!1,align:"center"},{default:t(()=>[n(z,{text:"",focusable:!1,style:{"white-space":"nowrap","font-size":"smaller"}},{icon:t(()=>[n(v,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(so))]),_:1})]),default:t(()=>[C(" "+r(y.$t("settings.maxZipFileSize"))+": ",1)]),_:1})]),_:1}),n(w,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(M,{tooltip:!1,value:c.value,"onUpdate:value":m[4]||(m[4]=T=>c.value=T),step:1,min:jt,max:Rt,style:{width:"120px"}},null,8,["value"]),n(u,{size:"tiny",value:c.value,"onUpdate:value":m[5]||(m[5]=T=>c.value=T),step:"1",min:jt,max:Rt,style:{width:"10em"}},{suffix:t(()=>[C("(MB)")]),_:1},8,["value"])]),_:1})]),_:1})]),default:t(()=>[C(" "+r(y.$t("settings.maxZipFileSizeTooltip")),1)]),_:1},16),n(e(be),qe(Ge(s)),{trigger:t(()=>[n(w,{wrap:!1,align:"center"},{default:t(()=>[n(z,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:m[6]||(m[6]=T=>f.value=!f.value)},{icon:t(()=>[n(v,null,{default:t(()=>[n(e(St))]),_:1})]),default:t(()=>[C(" "+r(y.$t("settings.useFolderNameForZip")),1)]),_:1}),n(S,{value:f.value,"onUpdate:value":m[7]||(m[7]=T=>f.value=T),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[C(" "+r(y.$t("settings.useFolderNameForZipTooltip")),1)]),_:1},16),n(e(be),qe(Ge(s)),{trigger:t(()=>[n(w,{wrap:!1,align:"center"},{default:t(()=>[n(z,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:m[8]||(m[8]=T=>l.value=!l.value)},{icon:t(()=>[n(v,null,{default:t(()=>[n(e(tn))]),_:1})]),default:t(()=>[C(" "+r(y.$t("settings.retainOriginalExtension")),1)]),_:1}),n(S,{value:l.value,"onUpdate:value":m[9]||(m[9]=T=>l.value=T),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[C(" "+r(y.$t("settings.retainExtTooltip")),1)]),_:1},16),n(e(be),qe(Ge(s)),{trigger:t(()=>[n(w,{vertical:""},{default:t(()=>[n(w,{wrap:!1,align:"center"},{default:t(()=>[n(z,{disabled:!e($),text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:m[10]||(m[10]=T=>b.value=!b.value)},{icon:t(()=>[n(v,null,{default:t(()=>[n(e(ro))]),_:1})]),default:t(()=>[C(" "+r(y.$t("settings.shrinkImage")),1)]),_:1},8,["disabled"]),n(S,{disabled:!e($),value:b.value,"onUpdate:value":m[11]||(m[11]=T=>b.value=T),size:"small"},null,8,["disabled","value"])]),_:1}),n(w,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(M,{value:x.value,"onUpdate:value":m[12]||(m[12]=T=>x.value=T),disabled:!b.value||!e($),step:1,min:di,max:Zt,style:{width:"120px"}},null,8,["value","disabled"]),n(u,{size:"tiny",value:x.value,"onUpdate:value":m[13]||(m[13]=T=>x.value=T),disabled:!b.value||!e($),step:1,min:8,max:Zt*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[h("span",ri,r(y.$t("width")),1)]),suffix:t(()=>[C("px")]),_:1},8,["value","disabled","max"])]),_:1}),n(w,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(M,{value:A.value,"onUpdate:value":m[14]||(m[14]=T=>A.value=T),disabled:!b.value||!e($),step:1,min:ci,max:Bt,style:{width:"120px"}},null,8,["value","disabled"]),n(u,{size:"tiny",value:A.value,"onUpdate:value":m[15]||(m[15]=T=>A.value=T),disabled:!b.value||!e($),step:1,min:8,max:Bt*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[h("span",ui,r(y.$t("height")),1)]),suffix:t(()=>[C("px")]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[C(" "+r(y.$t("settings.shrinkImageTooltip")),1)]),_:1},16)]),_:1})]),_:1},8,["title"])]),_:2},[g.value?{name:"header-extra",fn:t(()=>[n(e(be),{"keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(z,{onClick:e(ko),size:"tiny",style:{"font-size":"xx-small"}},{default:t(()=>[C(r(y.$t("reset")),1)]),_:1},8,["onClick"])]),default:t(()=>[C(" "+r(y.$t("settings.resetButtonTooltip")),1)]),_:1})]),key:"0"}:void 0]),1032,["default-expanded-names","on-update:expanded-names","class"])]),_:1})}}}),fi=Me(pi,[["__scopeId","data-v-0da126eb"]]),gi={},mi={style:{color:"gray","padding-left":"20px"}},vi=["innerHTML"];function hi(a,s){const g=bt,o=Ie;return P(),V(o,{vertical:"",justify:"end"},{default:t(()=>[n(g,{style:{margin:"0px"}}),n(o,{justify:"center"},{default:t(()=>[h("ul",mi,[(P(!0),ee(xe,null,je(a.$tm("descriptions"),i=>(P(),ee("li",{key:i,style:{"text-align":"left"},innerHTML:i},null,8,vi))),128))])]),_:1})]),_:1})}const _i=Me(gi,[["render",hi]]),yi="modulepreload",wi=function(a){return"/avif2jpeg/dist/"+a},Ht={},fe=function(s,g,o){let i=Promise.resolve();if(g&&g.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),f=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(g.map(b=>{if(b=wi(b),b in Ht)return;Ht[b]=!0;const x=b.endsWith(".css"),A=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${A}`))return;const p=document.createElement("link");if(p.rel=x?"stylesheet":yi,x||(p.as="script"),p.crossOrigin="",p.href=b,f&&p.setAttribute("nonce",f),document.head.appendChild(p),x)return new Promise(($,y)=>{p.addEventListener("load",$),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${b}`)))})}))}function c(l){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=l,window.dispatchEvent(f),!f.defaultPrevented)throw l}return i.then(l=>{for(const f of l||[])f.status==="rejected"&&c(f.reason);return s().catch(c)})},_n="English",yn="üá¨üáß",wn='AVIF to JPEG "Offline" Batch Converter',bn="It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",xn="Drag & Drop AVIF Images to Convert",An=["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data is sent to any server</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.'],kn="Select your language",zn="Choose Target File Extentions",Tn={avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types",edit_type:"Edit File Extension List"},In="Input a list of comma separated file extentions to load.<br>e.g.) .jpg,.gif,.png",Sn="Load Images",Cn="Select your images from a dialog window.<br>*Multiple selection allowed.",$n="Load a Whole Folder",Ln=`Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>*It will show "Upload" button, but it actually doesn't upload anything to any server.`,En="Converting images",Fn="Aborted",Mn="Some files failed to convert",Pn="Completed",On="Currently Busy",Un="No files with the extentions were found.",Dn="Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",Nn="Cancel",jn="Save",Rn="Close",Zn="Open",Bn="Re-convert",Hn="Convert previous selected {n} @:files again",Wn="File | Files",Vn="thread | threads",qn="You have not saved the converted images yet.",Gn="Data have not been saved",Kn="Open Source",Qn="Open the converted image",Yn="Copied to clipboard",Jn="The converted image was copied to your clipboard as DataURL.",Xn="Copy the converted image as DataURL",ea="Convert Again",ta={expandLogTooltip:"Displaying the entire log may severely reduce conversion speed.",expandLog:"Show entire log",autoScroll:"Auto scroll",showOnlyErrors:"Show only errors",log:"Log",outInRate:"Out / In Ratio",elapsedTime:"Elapsed Time",multiThreading:"Multi-Threading",outputSettings:"Output Settings",totalSize:"Total Size",totalFiles:"Number of Files",confirmDownloadMessage:"It will start to download {0} zip files.",inputSize:"Input Size",outputSize:"Output Size",filterSuccess:"Hide completed item",progressErrors:"Failed items",progressStarted:"Started Items",progressTotal:"Total number of files",zippingProgress:"Zipping progress",zipped:"ZIPPED",openFailedList:"Open failed file list",zipFailedList:"Pack failed files into Zips",table:{index:"index",status:"status",core:"thread",details:"file"},saveFailedList:"Save failed file list",done:"done",convertedZips:"successfully completed ZIP",progressSuccess:"Completed Files",downloadConvertedImage:"Download Converted Image",failureZippingFailedFiles:"Failure while zipping the failed files.",browseConvertedImages:"Browse converted images",index:"Index",Original:"Original",Converted:"Converted",saveAllZipsTooltip:"Save all ZIP files"},na={maxZipFileSize:"Max zip file size",retainExtTooltip:"New extension will be appended to original extension",retainOriginalExtension:"Keep Original File Extension",qualitytooltip:"Set image quality for output",quality:"Image Quality",maxZipFileSizeTooltip:"Set smaller value if memory problems occur.",ignoreExtTooltip:'Try to load files that don"t have image file extension',ignoreFileExtensions:"Load All File Types",imageTypeTooltip:"Choose image format for output",imageType:"Image Type",advancedSettings:"Advanced Settings",enableMultiThreads:"Enable multi-threading",resetButtonTooltip:"Restore all settings to default.",multiThreadsTooltip:"Convert images in multi-threaded",shrinkImageTooltip:"If the image dimensions are larger than the specified value, shrink the image to that value",shrinkImage:"Shrink images that exceed the following dimensions",useFolderNameForZip:"Use dropped folder name for the zip file",useFolderNameForZipTooltip:"If a folder is dropped or selected, its name is used as the name of the output ZIP file"},aa="Disabled",oa="Download",la="Reset",ia="Back",sa="Failed",ra="Success",ua="Previous version",da=`
Height`,ca="Width",pa="Don't show this message again",fa="About the warning when selecting a folder",ga="OK",ma={},va="Most web browsers will display a warning like the image below when you select a folder.",ha="You must press the ‚ÄúUpload‚Äù button here to load all the images in the folder, but the data loaded by this application is never actually uploaded to the server.",_a="Continue",ya="Cancel",wa={lang:_n,flags:yn,title:wn,metaDescription:bn,droptarget:xn,descriptions:An,selectLanguage:kn,fileTypeRadioTitle:zn,fileTypeRadioOptions:Tn,editAcceptTypes:In,loadbutton:Sn,loadbuttontooltip:Cn,loadfolderbutton:$n,loadfoldertooltip:Ln,processing:En,aborted:Fn,incomplete:Mn,completed:Pn,interfered:On,noimage:Un,avifUnsupported:Dn,cancel:Nn,save:jn,close:Rn,open:Zn,reconvert:Bn,reconvertTip:Hn,files:Wn,threads:Vn,confirmCloseDialog:qn,confirmCloseDialogTitle:Gn,githubOpenSource:Kn,convertedImageUrlTooltip:Qn,copiedDataURLDialogTitle:Yn,copiedDataURLMessage:Jn,convertedImageDataUrlTooltip:Xn,convertAgain:ea,status:ta,settings:na,disabled:aa,Download:oa,reset:la,back:ia,failed:sa,success:ra,previousVersion:ua,height:da,width:ca,checkboxTextDontShowThis:pa,loadfolderNotifyingTitle:fa,OK:ga,loadfolderNotifyingMessage:ma,loadfolderNotifyingMessageTerm1:va,loadfolderNotifyingMessageTerm2:ha,Continue:_a,Cancel:ya},bi=Object.freeze(Object.defineProperty({__proto__:null,Cancel:ya,Continue:_a,Download:oa,OK:ga,aborted:Fn,avifUnsupported:Dn,back:ia,cancel:Nn,checkboxTextDontShowThis:pa,close:Rn,completed:Pn,confirmCloseDialog:qn,confirmCloseDialogTitle:Gn,convertAgain:ea,convertedImageDataUrlTooltip:Xn,convertedImageUrlTooltip:Qn,copiedDataURLDialogTitle:Yn,copiedDataURLMessage:Jn,default:wa,descriptions:An,disabled:aa,droptarget:xn,editAcceptTypes:In,failed:sa,fileTypeRadioOptions:Tn,fileTypeRadioTitle:zn,files:Wn,flags:yn,githubOpenSource:Kn,height:da,incomplete:Mn,interfered:On,lang:_n,loadbutton:Sn,loadbuttontooltip:Cn,loadfolderNotifyingMessage:ma,loadfolderNotifyingMessageTerm1:va,loadfolderNotifyingMessageTerm2:ha,loadfolderNotifyingTitle:fa,loadfolderbutton:$n,loadfoldertooltip:Ln,metaDescription:bn,noimage:Un,open:Zn,previousVersion:ua,processing:En,reconvert:Bn,reconvertTip:Hn,reset:la,save:jn,selectLanguage:kn,settings:na,status:ta,success:ra,threads:Vn,title:wn,width:ca},Symbol.toStringTag,{value:"Module"})),xi="Chinese",Ai="Ukrainian",ki="Turkish",zi="Russian",Ti="Portuguese",Ii="Polish",Si="Dutch",Ci="Korean",$i="Japanese",Li="Italian",Ei="Indonesian",Fi="Hindi",Mi="French",Pi="Spanish",Oi="English",Ui="German",Di="Arabic",Ni={zh:xi,"zh-hant":"Chinese(hant)",uk:Ai,tr:ki,ru:zi,pt:Ti,pl:Ii,nl:Si,ko:Ci,ja:$i,it:Li,id:Ei,hi:Fi,fr:Mi,es:Pi,en:Oi,de:Ui,ar:Di},ot=[],ba={en:wa},Ct={},Wt=Object.assign({"./locales/ar.json":()=>fe(()=>import("./ar-Djvw1pEN.js"),[]),"./locales/de.json":()=>fe(()=>import("./de-DAueTlXX.js"),[]),"./locales/en.json":()=>fe(()=>Promise.resolve().then(()=>bi),void 0),"./locales/es.json":()=>fe(()=>import("./es-NB7-NTzo.js"),[]),"./locales/fr.json":()=>fe(()=>import("./fr-P0exlcwl.js"),[]),"./locales/hi.json":()=>fe(()=>import("./hi-Dkuuesh6.js"),[]),"./locales/id.json":()=>fe(()=>import("./id-DjFEq9_1.js"),[]),"./locales/it.json":()=>fe(()=>import("./it-BVSkVAiG.js"),[]),"./locales/ja.json":()=>fe(()=>import("./ja-eOMG5wzb.js"),[]),"./locales/ko.json":()=>fe(()=>import("./ko-4BNuP_0y.js"),[]),"./locales/nl.json":()=>fe(()=>import("./nl-FaWRGh3Z.js"),[]),"./locales/pl.json":()=>fe(()=>import("./pl-DMP-u-92.js"),[]),"./locales/pt.json":()=>fe(()=>import("./pt-D8_VMRVU.js"),[]),"./locales/ru.json":()=>fe(()=>import("./ru-C_Y0pSGn.js"),[]),"./locales/tr.json":()=>fe(()=>import("./tr-CCx0LQBV.js"),[]),"./locales/uk.json":()=>fe(()=>import("./uk-BOmB3chh.js"),[]),"./locales/zh-hant.json":()=>fe(()=>import("./zh-hant-C3HyUb7H.js"),[]),"./locales/zh.json":()=>fe(()=>import("./zh-CUCdA89I.js"),[])});var Vt;for(const a in Wt){const s=(Vt=a.match(/\/([a-z]{2}(?:-[a-z]+)?)\.json$/i))==null?void 0:Vt[1];s&&(ot.push(s),!(s in ba)&&(Ct[s]=Wt[a]))}let yt=Ri();yt in Ct||(yt="en");const lt=uo({legacy:!1,globalInjection:!0,locale:yt,fallbackLocale:"en",messages:ba,warnHtmlMessage:!1,missingWarn:!1,fallbackWarn:!1});async function ji(a){if(lt.global.availableLocales.indexOf(a)>=0)return;const s=await Ct[a]();lt.global.setLocaleMessage(a,s),await Ke()}function Ri(){const a=location.pathname;return String(a.match(/[^/]+(?=\/?$)/)||"").toLowerCase()}const Zi=["innerHTML"],Bi=_e({__name:"switch-lang",emits:["lang-ready","lang-change"],async setup(a,{emit:s}){let g,o;const i=Be(Oe),c=Gt(),{locale:l,t:f}=Fe(),b=s,x=Object.entries(Ni).map(([v,z])=>({label:z,value:v}));x.sort((v,z)=>{const S=v.label,w=z.label;return S>w?1:S<w?-1:0}),Se(()=>{c.afterEach((v,z,S)=>{p(),i.switchToolTipVisibility()})}),Xt(async()=>{}),[g,o]=co(()=>p()),await g,o();async function A(v){(v!==l.value||lt.global.availableLocales.indexOf(v)===-1)&&(b("lang-change",v),await ji(v),l.value=v,document.title=f("title"),await Ke()),b("lang-ready",v)}async function p(){const v=c.currentRoute.value.path||"",z=String(v.match(new RegExp("(?<=^\\/)[^/]+"))||"");z&&ot.includes(z)?(await A(z),l.value=z):await $()}async function $(){const v=y().toLowerCase(),z=v.split(/[-_]/)[0];if(ot.includes(z)){let S=z;if(z==="zh")switch(v){case"zh-hant":case"zh-mo":case"zh-hk":case"zh-tw":S="zh-hant"}await A(S)}}function y(){const v=window.navigator;return v.language||v.userLanguage||v.browserLanguage}function m(v){c.push("/"+v+"/")}return(v,z)=>{const S=ve,w=rn,M=be;return P(),V(M,{to:!1,"display-directive":"show",show:e(i).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(i).LANDSCAPE.value?"left":"bottom",duration:0,delay:50},{trigger:t(()=>[n(w,{ref:"langselect",size:"tiny",style:{width:"100%"},"consistent-menu-width":!1,options:e(x),"_v-model:value":"locale",value:e(l),"onUpdate:value":m},{arrow:t(()=>[n(S,null,{default:t(()=>[n(e(po))]),_:1})]),_:1},8,["options","value"])]),default:t(()=>[h("div",{innerHTML:v.$t("selectLanguage")},null,8,Zi)]),_:1},8,["show","placement"])}}}),Hi=h("span",null,"CONVERT TOüëá",-1),Oe=Symbol("global variables"),Wi=_e({__name:"Avif2Jpeg",emits:["ready"],setup(a,{emit:s}){Fe();const g=s,o=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),i=_(null),c=_(2);let l=_(void 0);const f=_(!0),b=_(!1),x=_(!1),A=_(!1);fo(Oe,{showTooltipsBeforeMounted:l,LANDSCAPE:f,IS_SP:o,switchToolTipVisibility:z,SSR:!1}),Se(()=>{S(),window.addEventListener("resize",S),z(),setTimeout(()=>x.value=!0,3e3)});const p=200;let $=0,y=!0;function m(){A.value=!1,$=Date.now()}function v(){const M=y?0:Math.max(0,p-(Date.now()-$));y=!1,setTimeout(()=>A.value=!0,M),g("ready")}async function z(){}function S(){const M=document.body.clientWidth,u=document.body.clientHeight;f.value=M*.75>u||M>900}function w(M){i.value=M}return(M,u)=>{const D=Ie,N=ve,T=Xe,q=He;return P(),V(q,{vertical:"",align:"stretch",justify:"start",style:{height:"100%",position:"relative"}},{default:t(()=>[n(Po,null,{"lang-switch":t(()=>[(P(),V(go,null,{default:t(()=>[n(Bi,{onLangChange:m,onLangReady:v})]),_:1}))]),_:1}),n(De,{name:"fade"},{default:t(()=>[e(A)?(P(),V(q,{key:0,vertical:"",align:"stretch",justify:"space-between",style:{height:"100%"}},{default:t(()=>[n(Do),n(D,{justify:"center"},{default:t(()=>[n(li,{expanded:e(R).expandExtButtons,"onUpdate:expanded":u[0]||(u[0]=O=>e(R).expandExtButtons=O),target:e(R).acceptTypeValue,"onUpdate:target":u[1]||(u[1]=O=>e(R).acceptTypeValue=O),userExtensions:e(R).editedAcceptTypes,"onUpdate:userExtensions":u[2]||(u[2]=O=>e(R).editedAcceptTypes=O),"disable-notifying-folder-select":e(R).disableNotifyingFolderSelect,"onUpdate:disableNotifyingFolderSelect":u[3]||(u[3]=O=>e(R).disableNotifyingFolderSelect=O),forbidden:e(b),onInput:w},null,8,["expanded","target","userExtensions","disable-notifying-folder-select","forbidden"])]),_:1}),n(Ul,{input:e(i),format:e(R).imageFormat,quality:e(R).imageQuality,"retain-extension":e(R).retainExtension,maxZipSizeMB:e(R).maxZipSizeMB,threads:e(R).multithread?e(R).threadCount:0,onStart:u[4]||(u[4]=O=>b.value=!0),onEnd:u[5]||(u[5]=O=>b.value=!1),onMultiThreadCount:u[6]||(u[6]=O=>c.value=O)},null,8,["input","format","quality","retain-extension","maxZipSizeMB","threads"]),n(D,{vertical:"",align:"center"},{default:t(()=>[n(T,{trigger:"manual",placement:"top","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(N,{size:"4vh",color:"#DADADA",style:{margin:"0px"}},{default:t(()=>[n(e(mo))]),_:1})]),default:t(()=>[Hi]),_:1})]),_:1}),n(D,{vertical:"",align:"center"},{default:t(()=>[n(si,{format:e(R).imageFormat,"onUpdate:format":u[7]||(u[7]=O=>e(R).imageFormat=O),quality:e(R).imageQuality,"onUpdate:quality":u[8]||(u[8]=O=>e(R).imageQuality=O)},null,8,["format","quality"]),n(fi,{"retain-ext":e(R).retainExtension,"onUpdate:retainExt":u[9]||(u[9]=O=>e(R).retainExtension=O),"use-folder-name-for-zip":e(R).useFolderNameForZip,"onUpdate:useFolderNameForZip":u[10]||(u[10]=O=>e(R).useFolderNameForZip=O),"max-zip-size":e(R).maxZipSizeMB,"onUpdate:maxZipSize":u[11]||(u[11]=O=>e(R).maxZipSizeMB=O),expanded:e(R).expandAdvSettings,"onUpdate:expanded":u[12]||(u[12]=O=>e(R).expandAdvSettings=O),multithread:e(R).multithread,"onUpdate:multithread":u[13]||(u[13]=O=>e(R).multithread=O),"thread-count":e(R).threadCount,"onUpdate:threadCount":u[14]||(u[14]=O=>e(R).threadCount=O),"thread-max":e(c)||0,"shrink-image":e(R).shrinkImage,"onUpdate:shrinkImage":u[15]||(u[15]=O=>e(R).shrinkImage=O),"max-width":e(R).maxWidth,"onUpdate:maxWidth":u[16]||(u[16]=O=>e(R).maxWidth=O),"max-height":e(R).maxHeight,"onUpdate:maxHeight":u[17]||(u[17]=O=>e(R).maxHeight=O)},null,8,["retain-ext","use-folder-name-for-zip","max-zip-size","expanded","multithread","thread-count","thread-max","shrink-image","max-width","max-height"])]),_:1}),n(_i)]),_:1})):se("",!0)]),_:1})]),_:1})}}}),$t=_e({__name:"App",setup(a){const s={Statistic:{valueFontSize:"1em"},Popover:{borderRadius:"0.4em",boxShadow:"2px 2px 5px 0px #555555"},Tooltip:{color:"#000000AA"},Image:{toolbarColor:"#00000099"}},g=_(!0);return Se(()=>{g.value=!1}),(o,i)=>{const c=ho,l=_o,f=yo,b=wo,x=bo,A=vo;return P(),V(A,{"theme-overrides":s,style:{width:"100%",height:"100%"}},{default:t(()=>[n(x,null,{default:t(()=>[n(b,{placement:"top-right",max:20},{default:t(()=>[n(f,{placement:"top-left",closable:!0,max:50},{default:t(()=>[n(l,null,{default:t(()=>[n(c,null,{default:t(()=>[n(Wi,{class:Qe({hide:e(g)})},null,8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),xa=[{path:"/",name:"Home",component:$t}];for(const a of ot)xa.push({path:"/"+a+"/",strict:!0,name:a,component:$t});xo($t,{routes:xa,base:"/avif2jpeg/dist/"},({app:a,router:s,routes:g,isClient:o,initialState:i})=>{a.use(lt)});
