var aa=Object.defineProperty;var la=(s,l,i)=>l in s?aa(s,l,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[l]=i;var et=(s,l,i)=>la(s,typeof l!="symbol"?l+"":l,i);import{r as _,a as xt,d as ke,i as Ye,c as ne,o as P,_ as Ie,u as e,w as t,b as L,t as c,e as w,f as n,g as Ae,N as be,L as sa,h as ia,j as X,k as Re,l as Qe,m as le,n as ra,p as ua,q as ca,s as ve,v as cn,x as dn,y as pn,z as Se,A as ze,B as Le,C as Ft,D as Ze,E as Ge,F as da,G as pa,H as He,I as Tt,J as ue,K as tt,T as Xe,M as fn,O as Ve,P as Ut,Q as ut,R as It,S as nt,U as vt,V as fa,W as Pe,X as ot,Y as ga,Z as Kt,$ as Yt,a0 as gn,a1 as ma,a2 as St,a3 as va,a4 as ha,a5 as Mt,a6 as _a,a7 as Qt,a8 as ct,a9 as wa,aa as De,ab as mn,ac as ya,ad as ba,ae as at,af as Fe,ag as za,ah as ht,ai as At,aj as ka,ak as We,al as xa,am as vn,an as Pt,ao as hn,ap as Ta,aq as Xt,ar as _n,as as Ia,at as Sa,au as Aa,av as wn,aw as La,ax as Ca,ay as yn,az as $a,aA as Rt,aB as bn,aC as Ea,aD as Fa,aE as zn,aF as Pa,aG as lt,aH as st,aI as Oa,aJ as Ua,aK as Ma,aL as Ra,aM as Da,aN as Na,aO as Ba,aP as ja,aQ as Za,aR as Ha,aS as Va,aT as Wa,aU as qa,aV as Ga,aW as Ka,aX as Ya,aY as Qa,aZ as Xa}from"./vendor-BgqkfPiU.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function i(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=i(o);fetch(o.href,a)}})();const Ue=_(navigator.hardwareConcurrency?Math.min(navigator.hardwareConcurrency,12):0),it={threadCount:{min:2,max:Math.max(2,Ue.value)}},Ja={imageFormat:"image/jpeg",imageQuality:90,expandExtButtons:!1,acceptTypeValue:void 0,editedAcceptTypes:"",expandAdvSettings:!1,retainExtension:!1,maxZipSizeMB:1e3,useFolderNameForZip:!1,multithread:!0,threadCount:Ue.value,shrinkImage:!1,maxWidth:4096,maxHeight:4096,disableNotifyingFolderSelect:!1,changeLogCheckedDate:0},Z=xt(kn({}));function el(){kn(Z)}function kn(s){return Object.assign(s,Ja)}const xn="avif2jpeg",Lt=JSON.parse(localStorage.getItem(xn)||"{}");for(const s in Z)if(Lt.hasOwnProperty(s)&&Lt[s]!==void 0){let l=Lt[s];it.hasOwnProperty(s)&&(it[s].min>l&&(l=it[s].min),it[s].max<l&&(l=it[s].max)),Z[s]=l}const Tn=()=>{const s={};for(const l in Z)s[l]=Z[l];localStorage.setItem(xn,JSON.stringify(s)),console.log(Z.changeLogCheckedDate)};window.addEventListener("beforeunload",Tn);function tl(){localStorage.clear(),window.removeEventListener("beforeunload",Tn)}const nl={href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-weight":"bolder"}},ol=ke({__name:"github",setup(s){const l=Ye(qe);return(i,r)=>{const o=be,a=Ae,u=Ie;return P(),ne(u,{to:!1,"display-directive":"show",show:e(l).showTooltipsBeforeMounted.value,trigger:"hover",duration:0,delay:0},{trigger:t(()=>[w("a",nl,[n(a,{align:"center",size:0},{default:t(()=>[n(o,{size:"1.2em"},{default:t(()=>[n(e(sa))]),_:1}),r[0]||(r[0]=L("GitHub "))]),_:1})])]),default:t(()=>[L(" "+c(i.$t("githubOpenSource")),1)]),_:1},8,["show"])}}}),al=1,ll=10,sl=22,il="",ft={major:al,minor:ll,build:sl,tag:il},rl={style:{"font-size":"x-small","user-select":"none"}},ul=ke({__name:"version",setup(s){const l=["0.0.118"],i=`${ft.major}.${ft.minor}.${ft.build}${ft.tag}`,r=l.map(g=>({label:`v${g}`,key:g,value:g}));function o(g){const{key:m,label:p}=g,y=u(m),b=X("a",{href:y},p),v=X("div",null,b);return X("div",null,v)}function a(g){location.href=u(g)}function u(g){return`/avif2jpeg/old/${g}/`}return(g,m)=>{const p=ia;return P(),ne(p,{"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start",options:e(r),"render-label":o,"onUpdate:value":a},{header:t(()=>[w("span",rl,c(g.$t("previousVersion")),1)]),default:t(()=>[w("span",{style:{cursor:"pointer"}},"v"+c(i))]),_:1},8,["options"])}}}),cl={key:0,style:{color:"red"}},dl=["innerHTML"],pl=ke({__name:"changelog",props:{url:{}},setup(s){const l=s,i=_("fetching..."),r=_(!1);Re(()=>a(l.url));let o=0;async function a(g){const m=await fetch(g,{headers:{Accept:"application/vnd.github.v3+json"}}).then(p=>p.ok?p.text():null);i.value="",m&&(console.log(m),i.value=m.replace(/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2}) \+\d+$/mg,(p,y)=>{const b=new Date(p),v=b.getTime(),f=b.toLocaleString();let d="";return v>Z.changeLogCheckedDate&&(r.value=!0,v>o&&(o=v),d="update"),`<span class="date ${d}">${f}</span>`}))}function u(){o>Z.changeLogCheckedDate&&(Z.changeLogCheckedDate=o),r.value=!1}return(g,m)=>{const p=be,y=Ae,b=Qe;return P(),ne(b,{trigger:"click",placement:"bottom","arrow-point-to-center":"","onUpdate:show":u,style:{"margin-left":"-1em","max-width":"80%","white-space":"initial"}},{trigger:t(()=>[n(y,{align:"center",size:1,style:{cursor:"pointer"}},{default:t(()=>[n(p,{component:e(ra),size:"1.5em",color:e(r)?"blue":"silver",style:{transition:"color 0.5s"}},null,8,["component","color"]),L(" "+c(g.$t("changelog")),1)]),_:1})]),default:t(()=>[e(i)?(P(),le("pre",{key:1,innerHTML:e(i),class:"commits"},null,8,dl)):(P(),le("div",cl," connection error "))]),_:1})}}}),fl=ke({__name:"header",setup(s){const l=ua();return(i,r)=>{const o=ca("router-link"),a=Ae,u=dn;return P(),ne(a,{vertical:"",justify:"start"},{default:t(()=>[n(a,{justify:"space-between",align:"center",wrap:!1},{default:t(()=>[n(a,{align:"center"},{default:t(()=>[n(ol),n(pl,{url:"/avif2jpeg/dist/commits.txt"}),n(ul),n(a,{style:{"font-size":"1em"}},{default:t(()=>[e(l).path!=="/"?(P(),ne(o,{key:0,to:"/",style:{color:"black"}},{default:t(()=>r[0]||(r[0]=[L("HOME")])),_:1})):ve("",!0)]),_:1})]),_:1}),n(a,{align:"end"},{default:t(()=>[cn(i.$slots,"lang-switch")]),_:3})]),_:3}),n(u,{style:{margin:"0px"}})]),_:3})}}}),gl={style:{padding:"0px",margin:"0px","text-align":"center"}},ml=ke({__name:"title",setup(s){const l=pn();return Se(()=>{const i=l.currentRoute.value.path||"";return!String(i.match(new RegExp("(?<=^\\/)[^/]+"))||"")}),(i,r)=>{const o=Ae;return P(),ne(o,{align:"center",justify:"center",style:{margin:"0px"}},{default:t(()=>[w("h1",gl,c(i.$t("title")),1)]),_:1})}}}),Jt=new Set,vl=new Set,hl=new Set,_t=new Map;function _l(s){const l=_t.get(s);if(!l){console.warn("the worker was already released.",s.id);return}_t.delete(s),l(),gt==null||gt(),gt=null}function wl(){for(const s of _t.keys())_l(s)}let gt=null;function In(){wl();for(const s of Jt)s.onmessage=null,s.terminate();Jt.clear(),vl.clear(),hl.clear(),_t.clear()}function yl(s){return new Worker("/avif2jpeg/dist/assets/worker.zip-BpG-kYFu.js",{name:s==null?void 0:s.name})}function bl(s){return new Worker("/avif2jpeg/dist/assets/worker.loader-hdSA9Vyi.js",{name:s==null?void 0:s.name})}const zl=1e3*10;let Ke;const Ne=new Map,wt=new Map,yt=new Map;let Dt,te,Nt,bt,mt,Sn,An,Ln,Cn,dt;function Ct(s){if({files:mt,completedFileIdSet:Dt,ConvStats:te,canceled:Nt,props:bt,format:Sn,quality:An,outputExt:Ln,imageType:Cn,message:dt}=s||{},Ke=null,Ne.clear(),wt.clear(),yt.clear(),wt.clear(),yt.clear(),s)for(const i in s)delete s[i]}async function kl(s){Ct(s),Dt.clear();let l;try{l=await xl()}catch{return Ct(),{exception:new Error("worker-load-error"),callbackToClearConverter:new Function,callbackToGenerateFailedZips:new Function}}const[i,r]=l;Ke=r;const o=new Promise(v=>{r.onmessage=f=>{const d=f.data,{action:z}=d;switch(z){case"squeeze-zip":case"zip-squeeze-error":v(void 0);break}}}),a=new Promise(v=>{i.onmessage=f=>{const{data:{action:d}}=f;d==="close-loader"&&v()}}),u=mt.map(v=>v._id);mt.forEach(v=>wt.set(v._id,v));const g=ze(Nt,v=>{if(!v)return;g();const f={action:"cancel-convert"};i.postMessage(f)}),m={action:"start-convert",list:mt,fileIdList:u,outputQuality:An,outputType:Sn,threads:bt.threads,maxSize:Z.shrinkImage?{width:Z.maxWidth,height:Z.maxHeight}:null};i.postMessage(m),await a,console.log("end loader worker"),r.postMessage({action:"squeeze"}),await o,console.log("end zip worker"),g();const p=()=>{In(),r.onmessage=null,r.terminate(),i.onmessage=null,i.terminate(),Ct()};let y=!1;return{callbackToClearConverter:p,callbackToGenerateFailedZips:async v=>{y||(y=!0,await Fl(v,r,{},te))}}}async function xl(){In();const s=new bl,l=new yl,i=new Promise((u,g)=>{const m=f=>{l.removeEventListener("message",b),s.removeEventListener("message",b),clearTimeout(v),f?(console.log("workers are avialble"),u(f)):(console.error("couldn't get responses from workers"),g(f))};let p=!1,y=!1;const b=f=>{f.target===l&&(console.log("got a message from zip worker"),p=!0),f.target===s&&(console.log("got a message from loader worker"),y=!0),p&&y&&m(!0)};let v=0;l.addEventListener("message",b),s.addEventListener("message",b),v=window.setTimeout(()=>m(!1),zl)}),{port1:r,port2:o}=new MessageChannel,a={action:"set-zip-port"};return l.postMessage({action:"set-port-loader"},[r]),s.postMessage(a,[o]),console.log("test workers' availability"),await i,l.postMessage({action:"set-config",zipSize:bt.maxZipSizeMB*1024*1024,keepExt:bt.retainExtension,outputExt:Ln,imageType:Cn}),s.addEventListener("message",Il),l.addEventListener("message",Tl),[s,l]}const Tl=s=>{const l=s.data,{action:i}=l;switch(i){case"add-zip-completed":{const{fileId:u,entireIndex:g,storedPath:m}=l;return}case"respond-image":{const{url:u,index:g,path:m,size:p,fileId:y}=l;te.convertedImageUrl=u,te.convertedImageSize=p,te.convertedImageIndex=g,te.convertedImageName=m;let b="",v=0,f="";const d=Ne.get(y);if(y>=0){const z=wt.get(y);b=URL.createObjectURL(z),v=z.size,f=z.webkitRelativePath||z.name}te.convertedImageOrgUrl=b,te.convertedImageOrgSize=v,te.convertedImageOrgName=f,te.convertedImageShrinked=d==null?void 0:d.shrinked;return}case"respond-delete":{const{index:u,success:g,fileId:m}=l;Ne.get(m).command="❌deleted",Ne.get(m).completed=!1;return}}switch(i){case"error-push-filelist-zip":const{path:u}=l;te.failedZipDone=!0,dt.error(`an error occurred "${u}"`,{duration:3e3});return}const{size:r,count:o}=l,a="url"in s.data?s.data.url:"";switch(i){case"push-zip":te.zips.push({url:a,size:r,count:o}),te.zippedTotalCount+=o,te.zippedTotalSize+=r;break;case"squeeze-zip":o>0&&(te.zips.push({url:a,size:r,count:o}),te.zippedTotalCount+=o,te.zippedTotalSize+=r);break;case"push-filelist":te.failedFileZippedCount++;break;case"squeeze-filelist-zip":te.failedZipDone=!0;case"push-filelist-zip":console.log("push-filelist-zip",o),te.failedZips.push({url:a,size:r,count:o}),console.log(o);break;case"zip-error":case"zip-squeeze-error":te.zippingErrorCount+=o;break}},Il=s=>{s.target;const{data:l}=s,{action:i}=l;switch(i){case"list-start":break;case"list-end":break;case"file-start":{const{index:r,path:o,fileId:a}=l;Al(r,o,a);break}case"file-load":{const{thumbnail:r,width:o,height:a,fileId:u,workerId:g,inputsize:m}=l,p=Ne.get(u);p.core=g,p.command="🖼️loaded",p.width=o,p.height=a,p.size=m,r&&(te.thumbnail=r);break}case"file-converted":{const{index:r,path:o,fileId:a,shrinked:u,outputWidth:g,outputHeight:m,outputsize:p}=l,y=Ne.get(a);y.command="🔃converted",y.shrinked??(y.shrinked=u),y.outputWidth=g,y.outputHeight=m,y.outputSize=p,te.converted++;break}case"file-completed":{const{inputsize:r,outputsize:o,fileId:a,entireIndex:u,storedPath:g}=l,m=Ne.get(a);m&&(m.command="✅completed",m.completed=!0,m.fileId=a),te.inputTotalSize+=r,te.outputTotalSize+=o,te.done++,te.success++,Dt.add(a),m.zippedIndex=u,te.ziplogs[u]={fileId:a,storedPath:g};break}case"file-retry":{const{index:r,path:o,fileId:a}=l;Ll(r,o,a);break}case"file-error":{const{index:r,path:o,fileId:a}=l;Cl(r,o,a);break}case"file-canceled":{const{fileId:r,path:o}=l;$l(r);break}}};let Sl=0;function Al(s,l,i){const r={key:Sl++,core:-1,index:s,path:l,command:"➡️started"};Ne.set(i,r),te.logs.push(r),yt.has(i)?console.warn(`retry "${l}".`):Nt.value||te.startedCount++}function Ll(s,l,i){const r=Ne.get(i);r.command="⚠️retrying",r.error=!0,dt.warning(`retrying "${l}"`,{duration:3e3}),te.retried++,yt.set(i,1)}function Cl(s,l,i){console.error(`failed to load "${l}". the image may be corrupted or cannot be read by some reason.`);const r=Ne.get(i);te.done++,te.failure++,r.command="❗failed",r.error=!0,dt.error(`failed to load "${l}"`,{duration:5e3})}function $l(s){const l=Ne.get(s);te.done++,te.failure++,l.command="❗canceled",l.error=!0}function El(s){Ke==null||Ke.postMessage({action:"request-image",index:s})}function $t(s){Ke==null||Ke.postMessage({action:"delete-image",index:s})}async function Fl(s,l,i,r){let o=0;for(const a of s){const u=(a.webkitRelativePath||a.name).replace(/^\//,"");if(r.failedZipDone)break;if(i.value)return;o-r.failedFileZippedCount>20&&await new Promise(g=>setTimeout(g,10)),l.postMessage({action:"add-filelist",file:a,path:u}),o++}if(r.failedZipDone){dt.error("Zipping error files was aborted",{duration:5e3});return}l.postMessage({action:"squeeze-filelist"})}function je(s,l=2){const i=Math.sign(s);s=Math.abs(s);const r=["Bytes","KB","MB","GB"],o=s?Math.floor(Math.log(s)/Math.log(1024)):0;return`${(s/Math.pow(1024,o)*i).toFixed(l)}${r[o]}`}function $n(s,l=100,i=!1){l=typeof l=="number"?{width:l,height:l}:l;const{width:r,height:o}=l;let{width:a,height:u}=s;const g=a/u,m=r/o;return g>=m?(a=i?Math.min(r,a):r,u=a/g|0):(u=i?Math.min(o,u):o,a=u*g|0),{width:a,height:u}}class Pl{constructor(){et(this,"_currentFileCount",0);et(this,"_currentZipIndex",0);et(this,"_totalFileCount",0);et(this,"_zipLengthSumList",[]);et(this,"_pathBank",{})}increase(l){return l&&(this._pathBank[l]=[this._zipLengthSumList.length,this._currentFileCount]),this._currentFileCount++,this._totalFileCount++}split(){this._zipLengthSumList.push(this._totalFileCount),this._currentZipIndex++,this._currentFileCount=0}get(l){if(typeof l=="number"){let i=this._zipLengthSumList.findIndex((a,u)=>l<a);i===-1&&(i=this._zipLengthSumList.length);const r=this._zipLengthSumList[i-1]||0,o=l-r;return[i,o]}else{const i=this._pathBank[String(l)];if(i)return i}return null}getZipIndex(){return this._currentZipIndex}getIndex(){return this._totalFileCount}}function Ol(s){return new Promise(l=>setTimeout(l,s))}function Ul(s,l=0){const i=_(s);return ze(i,r=>{r!==void 0&&Le(()=>{setTimeout(()=>i.value=void 0,l)})},{immediate:!0}),i}let rt;async function Ml(s,l,i,r,o){let a="";const u=document.createElement("canvas"),g=u.getContext("2d");let m=new Ft;const p=[m],y=new Pl,b=i.format,v=i.quality/100,f=[...b.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),d=s.length,z=i.maxZipSizeMB*1024*1024;let I=0,$=null,x="",k="",R=0,H=0,D=0,h=0,B=0,N=!1;rt=E=>{const[j,oe]=y.get(E),ce=p[j],de=ce.get(oe,b);o.convertedImageIndex=E,o.convertedImageName=ce.getPathByIndex(oe),o.convertedImageUrl=URL.createObjectURL(de),o.convertedImageSize=de.size;let ge="",J=0,G="";const he=ae[E];ge=URL.createObjectURL(he),J=he.size,G=he.webkitRelativePath||he.name,o.convertedImageOrgUrl=ge,o.convertedImageOrgSize=J,o.convertedImageOrgName=G};const ae=[];for(const E of s){if(r.value)break;const j=E.name;let oe="";const ce=E.size,de=(E.webkitRelativePath||E.relativePath||j).replace(/^\//,""),ge=document.createElement("img"),J={key:D++,core:-1,index:I++,path:de,command:"➡️start"};o.startedCount=I,o.logs.push(J),o.logs.length-1,a&&(URL.revokeObjectURL(a),a=""),a=URL.createObjectURL(E),k=a,R=E.size,ge.src=a;const G=await En(ge).then(()=>!0).catch(()=>!1);if(!ge.complete||!G||r.value){o.done++,o.failure++,J.command="❗failed";continue}const he=ge.width,O=ge.height;u.width=he,u.height=O,g.drawImage(ge,0,0,he,O,0,0,he,O),J.command="🖼️imgload",J.width=he,J.height=O,J.size=E.size,o.thumbnail=ge;const q=await new Promise(ie=>{const me=Ce=>{$=Ce,ie(Ce)};u.toBlob(me,b,v)});if(r.value)break;if(!q){console.log("failed to toBlob",j),o.failure++;continue}H=q.size,o.converted++,J.outputSize=H;let Y="";if(B+H>=z){try{await m.wait(),Y=await m.url()}catch(ie){N=!0,console.warn(ie.message,B),alert("memory problem occurred");break}o.zips.push({url:Y,size:B,count:h}),o.zippedTotalCount+=h,o.zippedTotalSize+=B,B=0,h=0,y.split(),m=new Ft,p.push(m)}B+=H;const K=de||j;for(let ie=1;ie<255&&(oe=K.replace(i.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+(ie>1?`(${ie})`:"")+"."+f,!!m.has(oe));ie++);o.done++;try{h++,m.add(oe,q)}catch(ie){console.error(ie.message);continue}y.increase(),ae.push(E),o.inputTotalSize+=ce,o.outputTotalSize+=H,o.ziplogs.push({fileId:E._id,storedPath:oe}),x=oe,J.zippedIndex=o.success,o.success++,J.command="✅completed",J.completed=!0,J.fileId=E._id,l.add(E._id)}if(o.success>0)if(d===1)$&&(o.convertedImageIndex=0,o.convertedImageName=x.replace(/^.*\/(?=[^/]+$)/,"").replace(i.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+f,o.convertedImageUrl=URL.createObjectURL($),o.convertedImageOrgUrl=k,o.convertedImageOrgSize=R);else try{if(N)throw new Error("terminated zipping process for memory problems");await m.wait();const E=await m.url();o.zips.push({url:E,count:h,size:B}),o.zippedTotalCount+=h,o.zippedTotalSize+=B}catch(E){console.error(E.message)}const M={value:!1},fe=()=>{M.value=!0,p.forEach(E=>E.clear()),p.length=0,ae.length=0,rt=null};let Oe=!1;return{callbackToClearConverter:fe,callbackToGenerateFailedZips:async E=>{Oe||(Oe=!0,Dl(E,z,o,M))}}}function Rl(s){rt==null||rt(s)}async function Dl(s,l,i,r){let o=0,a=0,u=new Ft;for(let g=0;g<s.length;g++){const m=s[g],p=(m.webkitRelativePath||m.name).replace(/^\//,"");if(r.value)return;try{await u.add(p,m)}catch{alert(`an error occurred during access to "${p}"`);break}if(a+=m.size,o++,i.failedFileZippedCount++,a>=l||g===s.length-1){await u.zip();const y=await u.url();i.failedZips.push({url:y,size:a,count:o}),u.clear(),a=0,o=0}}i.failedZipDone=!0}function En(s){if(typeof s.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((l,i)=>{s.onload=l,s.onerror=i})}const Nl=["href","download","title"],Bl='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',jl=ke({__name:"thumbnail",props:{src:{},width:{},height:{},maxWidth:{default:100},maxHeight:{default:100},expand:{type:Boolean,default:!1},loading:{type:Boolean},fileName:{},allowNext:{type:Boolean},allowPrev:{type:Boolean},hidden:{type:Boolean}},emits:["load","error","next","prev"],setup(s,{expose:l,emit:i}){const{t:r}=Ze(),o=s,a=i,u=_();_();const g=_(!0),m=_(""),p=_(o.width||100),y=_(o.height||100),b=_(!1),v=xt({width:p.value+"px",height:y.value+"px",minWidth:"50px",minHeight:"50px"});Ge(()=>{var k,R,H;(R=(k=u.value)==null?void 0:k.previewInstRef)==null||R.setPreviewSrc(Bl),URL.revokeObjectURL((((H=u.value)==null?void 0:H.imageRef)||{}).src),u.value=null});const f=_(!0);da(()=>{f.value=!1}),pa(()=>{f.value=!0}),ze(o,(k,R)=>{v.width=(o.width||100)+"px",v.height=(o.height||100)+"px"}),ze(()=>o.src,(k,R)=>{f.value&&I(k)},{immediate:!0}),l({download:$,openPreview:x,active:f});async function d(k){const R=k.target,H=R.naturalWidth,D=R.naturalHeight,{width:h,height:B}=$n({width:H,height:D},{width:o.maxWidth||100,height:o.maxHeight||100},o.expand);p.value=h,y.value=B,a("load",{src:R.src,width:H,height:D}),g.value=!1,await new Promise(N=>setTimeout(N,100)),!g.value&&(b.value=!0)}function z(k){const R=k.target;a("error",R.src)}async function I(k){g.value=!0,b.value=!1,m.value=k,console.log("changeSrc:",m.value)}function $(){const k=document.createElement("a");k.href=m.value,k.download=o.fileName,k.click()}function x(){var k;(k=u.value)==null||k.click()}return(k,R)=>{const H=fn,D=Ut,h=Ae,B=Tt;return He((P(),le("div",null,[n(e(Ie),null,{trigger:t(()=>[n(B,{show:e(g)||o.loading},{default:t(()=>[n(h,{justify:"center",align:"center",style:ue([e(v),{"line-height":"0px"}])},{default:t(()=>[w("a",{href:e(m),onClick:R[0]||(R[0]=tt(()=>{},["left","prevent"])),target:"_blank",download:o.fileName,title:o.fileName},[n(Xe,{mode:"in-out"},{default:t(()=>[He(n(H,{ref_key:"nImageRef",ref:u,"show-toolbar-tooltip":"",onLoad:d,onError:z,src:e(m),width:e(p),height:e(y),style:{border:"1px solid silver"}},null,8,["src","width","height"]),[[Ve,e(b)]])]),_:1})],8,Nl),e(g)||o.loading?(P(),ne(D,{key:0})):ve("",!0)]),_:1},8,["style"])]),_:1},8,["show"])]),default:t(()=>[L(" "+c(o.fileName),1)]),_:1})],512)),[[Ve,!k.hidden]])}}}),Be=(s,l)=>{const i=s.__vccOpts||s;for(const[r,o]of l)i[r]=o;return i},en=Be(jl,[["__scopeId","data-v-f1ec09c6"]]),Zl=["href","download","title"],Hl={class:"left-num"},Vl={class:"right-num"},Wl=["href","download","title"],ql={class:"left-num"},Gl={class:"right-num"},Kl=["href","download"],Yl=ke({__name:"image-viewer",props:{url:{},originalUrl:{},name:{},originalName:{},size:{},originalSize:{},length:{},index:{},isSingle:{type:Boolean},variousInfo:{}},emits:["demand-image","delete-image","close"],setup(s,{expose:l,emit:i}){const r=Ye(qe),o=s,a=i;l({download:O,cleanup:re,openPreview:ee,isPreviewing(){return h.value},changeIndex(S){f.value=S}});const u=ut(),{t:g}=Ze();It();const m=_(),p=_(),y=_(),b=nt("viewerItemContainer"),v=_(!0),f=_(Math.max(o.index,0)+1),d=_(1),z=_(1),I=_(""),$=_(""),x=_(1),k=_(1),R=_(!1),H=_(!1),D=_(!1),h=Se(()=>{var S,C;return(C=(S=y.value)==null?void 0:S.previewInstRef)==null?void 0:C.displayed}),B=Se(()=>{var S,C;return((C=(S=y==null?void 0:y.value)==null?void 0:S.previewInstRef)==null?void 0:C.previewSrc)===I.value}),N=Se(()=>f.value<o.length),ae=Se(()=>f.value>1),M=_("viewer-item-init"),fe=_(0),Oe=_(!0);_({width:"auto",height:"auto"});const we=_(!1);Re(()=>{document.body.addEventListener("keydown",J),document.body.addEventListener("keydown",ge),ce(f.value-1),de()}),Ge(()=>{clearTimeout(E),document.body.removeEventListener("keydown",J),document.body.removeEventListener("keydown",ge),we.value=!0}),vt(()=>{URL.revokeObjectURL(o.url),URL.revokeObjectURL(o.originalUrl)});let E=-1;ze(f,(S,C)=>{f.value<1||f.value>o.length||S===C||(clearTimeout(E),S>C?M.value="viewer-item-next":M.value="viewer-item-prev",E=setTimeout(()=>{o.index!==f.value-1&&(fe.value=v.value?fe.value:~fe.value,Oe.value=!1,ce(f.value-1))},50))});let j="",oe="";ze(()=>o.url,()=>{var U,T;let S="";o.index===0&&v.value?(v.value=!1,f.value=1,S=o.url):o.index===f.value-1?(v.value=!1,R.value=!1,S=o.url):(URL.revokeObjectURL(o.url),URL.revokeObjectURL(o.originalUrl));const C=j,V=oe;if(URL.revokeObjectURL(C),URL.revokeObjectURL(V),j=o.url,oe=o.originalUrl,S){try{if((T=(U=y.value)==null?void 0:U.previewInstRef)!=null&&T.displayed){B.value?y.value.previewInstRef.setPreviewSrc(S):y.value.previewInstRef.setPreviewSrc(o.originalUrl);try{const A=y.value.previewInstRef.displayed;y.value.previewInstRef.handleAfterLeave(),y.value.previewInstRef.displayed=A}catch(A){console.error(A)}}}catch{}I.value=S,$.value=o.originalUrl}},{immediate:!0});function ce(S){R.value=!0,H.value=!1,D.value=!1,Le(()=>a("demand-image",S))}function de(){if(!r.IS_SP)return;let S=b.value.$el,C=0,V=0,U=0,T=0,A=0;const se=Q=>{C=Q.touches[0].pageX,V=Q.touches[0].pageY,A=Date.now()};S.addEventListener("touchstart",se);const pe=Q=>{U=Q.touches[0].pageX,T=Q.touches[0].pageY,_e()};window.addEventListener("touchmove",pe);const W=()=>{_e();const Q=U-C,Me=Math.abs(Q),Ee=T-V,Je=Math.abs(Ee);Me<Je||Me<30||Y(Q>0?-1:1)};window.addEventListener("touchend",W);const _e=()=>{const Q=Date.now();Q-A>500&&(C=U,V=T),A=Q};Ge(()=>{S.removeEventListener("touchstart",se),window.removeEventListener("touchmove",pe),window.removeEventListener("touchend",W),S=null})}function ge(S){var C,V,U,T;if(S.key==="Escape")try{(V=(C=y.value)==null?void 0:C.previewInstRef)!=null&&V.displayed&&(S.stopPropagation(),(T=(U=y.value)==null?void 0:U.previewInstRef)==null||T.toggleShow(!1))}catch{}}function J(S){switch(S.code){case"ArrowRight":Y(1);break;case"ArrowLeft":Y(-1);break;case"Home":f.value=1;break;case"End":f.value=o.length;break;case"Space":case"Enter":case"NumpadEnter":if(!h.value)return;ie();break;case"ArrowUp":case"ArrowDown":default:return}S.stopPropagation(),S.preventDefault()}function G({width:S,height:C}){d.value=S,z.value=C,H.value=!0}function he({width:S,height:C}){x.value=S,k.value=C,D.value=!0}function O(){B.value?m.value.download():p.value.download()}async function q(S){try{const C=await fetch(S).then(V=>V.blob()).then(V=>new Promise(U=>{const T=new FileReader;T.onload=U,T.readAsDataURL(V)})).then(V=>V.target.result);navigator.clipboard.writeText(C),u.info({title:g("copiedDataURLDialogTitle"),content:()=>X("div",[X("div",g("copiedDataURLMessage"))]),positiveText:"OK"})}catch(C){console.error(C),u.error({title:"failed to copy Data URL",content:"could not copy Data URL",positiveText:"OK"})}}function Y(S){S>0?f.value=Math.min(o.length,f.value+S)|0:S<0&&(f.value=Math.max(1,f.value+S)|0)}let K="";const ie=()=>{var C,V,U,T;K=(U=window.getComputedStyle((V=(C=y==null?void 0:y.value)==null?void 0:C.previewInstRef)==null?void 0:V.previewRef))==null?void 0:U.transform;const S=B.value;(T=y==null?void 0:y.value)==null||T.next(),Le(()=>{var A;B.value===S&&((A=y==null?void 0:y.value)==null||A.next())})};function me(){try{Le(()=>y.value.previewInstRef.previewRef.style.transform=K)}catch{}}function Ce({nodes:S}){const C=X(Mt,{color:B.value?"green":"gray",offset:[-20,-12],value:B.value?g("status.Converted"):g("status.Original")},()=>X(Pe,{round:!0,onClick(){ie()},textColor:"white",size:"small",style:{marginLeft:"4px"}},{icon:()=>X(B.value?va:ha)}));S.next=X(Pe,{onClick(){Y(1)},disabled:!N.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>X(Yt)}),S.prev=X(Pe,{onClick(){Y(-1)},disabled:!ae.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>X(_a)});try{const V=S.download.children;V.default=()=>g("save");const U=V.trigger();U.props.onClick=O,V.trigger=()=>U}catch{}return F(),[C,...Object.values(S)]}const $e="#pathbox-"+String(Math.random()).substring(2);let ye;function F(){var S,C,V;try{if(ye=(V=(C=(S=y.value)==null?void 0:S.previewInstRef)==null?void 0:C.previewWrapperRef)==null?void 0:V.parentNode,!ye||ye.querySelector($e))return;let U=X("div",{id:$e,onMousedown:T=>{T.stopPropagation()},className:"__preview-injected-pathbox"+(B.value?" converted":"")},[X("div",`${String(f.value).padStart(String(o.length).length,"0")}/${String(o.length).padStart(String(o.length).length,"0")}`),X("div",je(B.value?o.size:o.originalSize,0)),X("div",B.value?o.name:o.originalName)]);Qt(U,ye),U=null}catch(U){console.error(U)}}Ge(()=>{ye&&(Qt(null,ye),ye=null)});function ee(){m.value.openPreview()}function re(){}return(S,C)=>{const V=be,U=Ae,T=gn,A=Qe,se=St,pe=fa;return P(),ne(U,{justify:"center",align:"stretch",vertical:"",style:ue([{visibility:v.value?"hidden":"visible"},{overflow:"visible"}]),class:"body",ref:"body"},{default:t(()=>[n(pe,{ref_key:"nImageGroupRef",ref:y,"show-toolbar-tooltip":"","render-toolbar":Ce,onPreviewNext:me},{default:t(()=>[n(U,{wrap:!1,align:"center",justify:"space-between",style:{overflow:"visible"}},{default:t(()=>[n(e(Pe),{onClick:C[0]||(C[0]=W=>Y(-1)),bordered:!1,disabled:!e(ae),class:ot({"thumb-arrow":!0,pale:!e(ae)}),title:S.$t("Prev")},{icon:t(()=>[n(V,{size:"30"},{default:t(()=>[n(e(ga))]),_:1})]),_:1},8,["disabled","class","title"]),n(U,{justify:"center",ref_key:"viewerItemContainer",ref:b,class:"viewer-item-container",style:{width:"100%"}},{default:t(()=>[n(Xe,{name:M.value},{default:t(()=>[(P(),ne(U,{vertical:"",key:fe.value},{default:t(()=>[n(U,{align:"center",wrap:!1},{default:t(()=>[n(U,{vertical:""},{default:t(()=>[n(U,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(U,{align:"center",justify:"center",vertical:"",class:"original-thumb"},{default:t(()=>[w("a",{href:S.originalUrl,onClick:C[4]||(C[4]=tt(W=>{p.value.openPreview()},["prevent"])),download:S.originalName,title:S.originalName,class:"imglink"},[n(U,{align:"center",justify:"center",wrap:!1},{default:t(()=>[n(en,{ref:W=>{W!=null&&W.active&&(p.value=W)},src:$.value,width:1,"max-width":1,"max-height":1,loading:R.value,"file-name":S.originalName,"allow-next":f.value<o.length,"allow-prev":f.value>1,onLoad:he,onNext:C[1]||(C[1]=W=>Y(1)),onPrev:C[2]||(C[2]=W=>Y(-1)),hidden:!0},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(U,{vertical:"",align:"center"},{default:t(()=>[n(U,{class:"imglink-label"},{default:t(()=>[L(c(e(g)("status.Original")),1)]),_:1}),n(U,{justify:"center",class:"img-size",wrap:!1,size:2},{default:t(()=>[w("span",Hl,c(D.value?x.value:"?"),1),C[11]||(C[11]=L(" × ")),w("span",Vl,c(D.value?k.value:"?"),1)]),_:1}),n(U,{justify:"center"},{default:t(()=>[C[3]||(Kt(-1,!0),(C[3]=n(U,null,{default:t(()=>[L(c(D.value?e(je)(o.originalSize,0):"?"),1)]),_:1})).cacheIndex=3,Kt(1),C[3])]),_:1})]),_:1})]),_:1})],8,Zl)]),_:1}),n(U,{vertical:"",align:"center",class:"original-thumb"},{default:t(()=>[n(V,{size:"20",color:"silver",component:e(Yt)},null,8,["component"])]),_:1}),w("a",{href:I.value,onClick:C[5]||(C[5]=tt(W=>ee(),["prevent"])),download:o.name,title:o.name,class:"imglink"},[n(U,{vertical:"",align:"center",justify:"center"},{default:t(()=>[n(U,{class:"imglink-label"},{default:t(()=>[L(c(e(g)("status.Converted")),1)]),_:1}),n(U,{vertical:"",align:"center",justify:"center",size:0},{default:t(()=>[n(U,{justify:"center"},{default:t(()=>{var W;return[n(U,{wrap:!1,style:ue((W=o.variousInfo)!=null&&W.shrinked?{color:"blue"}:{}),class:"img-size",size:2},{default:t(()=>[w("span",ql,c(H.value?d.value:"?"),1),C[12]||(C[12]=L(" × ")),w("span",Gl,c(H.value?z.value:"?"),1)]),_:1},8,["style"])]}),_:1})]),_:1}),n(U,{justify:"center"},{default:t(()=>[L(c(H.value?e(je)(o.size,0):"?"),1)]),_:1})]),_:1})],8,Wl)]),_:1}),n(U,{ref:"fileNameContainer",justify:"center",align:"center",class:"pathbox",title:o.name,style:{overflow:"hidden"}},{default:t(()=>[n(T,{"x-scrollable":!0,trigger:"hover",style:{"text-align":"center","font-size":"smaller",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},{default:t(()=>[L(c(H.value?o.name:"?"),1)]),_:1})]),_:1},8,["title"])]),_:1}),n(U,{vertical:"",style:{overflow:"visible"}},{default:t(()=>[n(en,{ref:W=>{W!=null&&W.active&&(m.value=W)},src:I.value,width:142,"max-width":140,"max-height":100,loading:R.value,"file-name":o.name,"allow-next":f.value<o.length,"allow-prev":f.value>1,onLoad:G,onNext:C[6]||(C[6]=W=>Y(1)),onPrev:C[7]||(C[7]=W=>Y(-1))},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(U,{justify:"center",align:"center",wrap:!1},{default:t(()=>[n(A,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[w("a",{href:o.url,ref:"saveImg",target:"_blank",download:o.name,style:{"line-height":"1em"}},[n(e(Pe),{disabled:!H.value,round:"",size:"tiny"},{default:t(()=>[L(c(S.$t("save")),1)]),_:1},8,["disabled"])],8,Kl)]),default:t(()=>[L(" "+c(S.$t("save")),1)]),_:1}),n(A,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(e(Pe),{disabled:!H.value,onClick:C[8]||(C[8]=W=>q(o.url)),round:"",size:"tiny"},{default:t(()=>C[13]||(C[13]=[L("DataURL")])),_:1},8,["disabled"])]),default:t(()=>[L(" "+c(S.$t("convertedImageDataUrlTooltip")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1},8,["name"])]),_:1},512),n(e(Pe),{bordered:!1,onClick:C[9]||(C[9]=W=>Y(1)),disabled:!e(N),class:ot({"thumb-arrow":!0,next:!0,pale:!e(N)}),title:S.$t("Next")},{icon:t(()=>[n(V,{size:"30"},{default:t(()=>[n(e(ma))]),_:1})]),_:1},8,["disabled","class","title"])]),_:1}),S.isSingle?ve("",!0):(P(),ne(U,{key:0,justify:"center",align:"center",wrap:!1,size:4},{default:t(()=>[n(se,{value:f.value,"onUpdate:value":C[10]||(C[10]=W=>f.value=W),tooltip:!1,step:1,min:1,max:o.length,keyboard:!1,class:"index-slider"},null,8,["value","max"]),n(U,{class:"index",align:"center",justify:"center",wrap:!1,size:3},{default:t(()=>[n(U,null,{default:t(()=>[L(c(e(g)("status.index"))+":",1)]),_:1}),n(U,{justify:"end",align:"center",class:"counter"},{default:t(()=>[L(c(f.value),1)]),_:1}),n(U,null,{default:t(()=>C[14]||(C[14]=[L("/")])),_:1}),n(U,{justify:"start",align:"center",class:"counter"},{default:t(()=>[L(c(o.length),1)]),_:1})]),_:1})]),_:1}))]),_:1},512)]),_:1},8,["style"])}}}),Ql=Be(Yl,[["__scopeId","data-v-1394ec38"]]),Xl={key:0},Jl={style:{}},es=ke({__name:"status.progress",props:{successPerc:{},elapsedTime:{},threads:{},fileType:{},shrink:{},zipSize:{},inputTotalSize:{},outputTotalSize:{},rateColor:{},difColor:{},totalSizeDifStr:{}},setup(s){return(l,i)=>{const r=Ae,o=wa,a=ct;return P(),ne(a,{name:"progress",style:{"white-space":"nowrap"}},{header:t(({collapsed:u})=>[n(r,null,{default:t(()=>[L(c(l.$t("status.Progress"))+" ",1),u?(P(),le(De,{key:0},[L(" ("+c(l.successPerc|0)+"%) ",1)],64)):ve("",!0)]),_:2},1024)]),default:t(()=>[n(r,{justify:"center",align:"center",wrap:!1,style:{"white-space":"nowrap","margin-top":"-2em","padding-bottom":"5px"}},{default:t(()=>[n(r,{vertical:"",justify:"center",class:"left-column"},{default:t(()=>[n(o,{"tabular-nums":"",label:l.$t("status.elapsedTime")},{default:t(()=>[n(r,null,{default:t(()=>[L(c(l.elapsedTime),1)]),_:1})]),_:1},8,["label"]),n(o,{"tabular-nums":"",label:l.$t("status.multiThreading")},{default:t(()=>[n(r,{style:ue({color:l.threads?"":"red",fontSize:"0.7rem"})},{default:t(()=>[L(c(l.threads?l.$rt("{n} @:threads",l.threads):l.$t("disabled")),1)]),_:1},8,["style"])]),_:1},8,["label"]),n(o,{"tabular-nums":"",label:l.$t("status.outputSettings")},{default:t(()=>[n(r,{vertical:"",justify:"end",style:{"font-size":"0.6rem","line-height":"0.6rem"}},{default:t(()=>[w("div",null,c(l.$t("settings.imageType"))+": "+c(l.fileType),1),l.shrink?(P(),le("div",Xl,[L(c(l.$t("status.Shrinking"))+": ",1),w("span",Jl,c(l.shrink[0])+"×"+c(l.shrink[1]),1)])):ve("",!0),w("div",null,"Zip: "+c(l.zipSize)+"MB",1)]),_:1})]),_:1},8,["label"])]),_:1}),cn(l.$slots,"center",{},void 0,!0),n(r,{vertical:"",style:{height:"100%"},justify:"center",class:"right-column"},{default:t(()=>[n(o,{"tabular-nums":"",label:l.$t("status.inputSize")},{default:t(()=>[n(r,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[L(c((l.inputTotalSize/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(o,{"tabular-nums":"",label:l.$t("status.outputSize")},{default:t(()=>[n(r,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[L(c((l.outputTotalSize/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(o,{"tabular-nums":"",label:l.$t("status.outInRate")},{default:t(()=>[n(r,{vertical:"",align:"end",justify:"start",style:{"font-size":"0.8em","font-family":"v-mono","line-height":"50%"}},{default:t(()=>[w("span",{style:ue({color:l.rateColor,fontSize:"larger"})},"× "+c((l.outputTotalSize/l.inputTotalSize||1).toFixed(2)),5),w("span",{style:ue({color:l.difColor})},"("+c(l.totalSizeDifStr)+")",5)]),_:1})]),_:1},8,["label"])]),_:1})]),_:3})]),_:3})}}}),ts=Be(es,[["__scopeId","data-v-9430175b"]]),ns={class:"status-table"},os={class:"started"},as={class:"mini-counter"},ls={class:"failure"},ss={class:"mini-counter"},is={colspan:"2"},rs={class:"completed"},us={class:"main-counter"},cs={class:"total"},ds={class:"main-counter"},ps=ke({__name:"status.progress-center",props:{processing:{type:Boolean},interval:{},statusColor:{},success:{},successTo:{},successFrom:{},index:{},length:{},failure:{},retried:{},successPercTo:{},successPercFrom:{}},setup(s){const l=s,i=It(),r=_(i.value.successColor),o=_(!1);return ze(()=>l.processing,a=>{a||(l.success===l.length?o.value=!0:r.value=i.value.errorColor)}),(a,u)=>{const g=Qe,m=be,p=ba,y=Ae,b=mn;return P(),ne(b,{type:"multiple-circle","stroke-width":2,percentage:[a.successTo/a.length*100|0,a.index/a.length*100|0],color:[e(i).successColor,a.statusColor],"rail-style":[{stroke:e(r),opacity:.3}],style:{width:"12em"}},{default:t(()=>[n(y,{vertical:"",align:"center",justify:"center",size:0,style:{"white-space":"nowrap"},wrap:!1,"wrap-item":!1},{default:t(()=>[w("table",ns,[w("tbody",null,[w("tr",os,[w("td",null,c(a.$t("status.started"))+":",1),w("td",as,[n(g,{trigger:"hover",style:ue({color:e(i).infoColor}),placement:"left"},{trigger:t(()=>[w("span",{style:ue({color:e(i).infoColor})},c(a.index.toLocaleString("en-us")),5)]),default:t(()=>[L(" "+c(a.$t("status.progressStarted"))+" ("+c(a.index.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])])]),w("tr",ls,[w("td",null,c(a.$t("status.failure"))+":",1),w("td",ss,[n(g,{trigger:"hover",style:ue({color:e(i).errorColor}),placement:"left"},{trigger:t(()=>[w("span",{style:ue({color:e(i).errorColor})},c(a.failure.toLocaleString("en-us")),5)]),default:t(()=>[L(" "+c(a.$t("status.progressErrors"))+" ("+c(a.failure.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"]),a.retried>0?(P(),ne(g,{key:0,trigger:"hover",style:ue({color:e(i).warningColor}),placement:"left"},{trigger:t(()=>[w("span",{style:ue({color:e(i).warningColor})}," ("+c(a.retried.toLocaleString("en-us"))+") ",5)]),default:t(()=>[L(" "+c(a.$t("status.progressRetries"))+" ("+c(a.retried.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):ve("",!0)])]),w("tr",null,[w("td",is,[n(y,{size:0,align:"center",justify:"center",style:ue({color:a.processing?a.statusColor:e(r)}),wrap:!1,class:"percent"},{default:t(()=>[e(o)?(P(),ne(m,{key:0,component:e(ya)},null,8,["component"])):ve("",!0),n(p,{duration:a.interval*3|0,from:a.successPercFrom|0,to:a.successPercTo|0,active:!0},null,8,["duration","from","to"]),u[0]||(u[0]=L("% "))]),_:1},8,["style"])])]),w("tr",rs,[w("td",null,c(a.$t("status.success"))+":",1),w("td",us,[n(g,{trigger:"hover",duration:0,delay:0,style:ue({color:e(i).successColor}),placement:"bottom"},{trigger:t(()=>[w("span",{style:ue({color:e(i).successColor})},[n(p,{duration:a.interval*3|0,from:a.successFrom,to:a.successTo,active:!0,"show-separator":!0},null,8,["duration","from","to"])],4)]),default:t(()=>[L(" "+c(a.$t("status.progressSuccess"))+" ("+c(a.successTo.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])])]),w("tr",cs,[w("td",null,c(a.$t("status.all"))+":",1),w("td",ds,[n(g,{trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:t(()=>[L(c(a.length.toLocaleString("en-us")),1)]),default:t(()=>[L(" "+c(a.$t("status.progressTotal"))+" ("+c(a.length.toLocaleString("en-us"))+") ",1)]),_:1})])])])])]),_:1})]),_:1},8,["percentage","color","rail-style"])}}}),fs={key:0,class:"log-table",ref:"table"},gs={class:"log-tr label"},ms=["title"],vs={style:{"min-width":"7em"},class:"log-th"},hs={style:{"padding-left":"2em"},class:"log-th"},_s={ref:"tbody"},ws=["onClick","onDblclick"],ys={class:"log-td"},bs={class:"log-td"},zs={class:"log-td"},ks={class:"log-td"},xs={key:0,class:"log-td log-extra",style:{"padding-left":"0.5em"}},Ts={key:0},Is={key:1,style:{color:"blue"}},Ss={key:1},tn=3,nn=3e3,As=100,Ls=ke({__name:"status.log",props:at({processing:{type:Boolean},opened:{type:Boolean},previewCollapsed:{type:Boolean},logs:{},imageIndex:{},thumbnail:{}},{expanded:{type:Boolean,required:!1},expandedModifiers:{},"auto-scroll":{type:Boolean,required:!1},"auto-scrollModifiers":{},order:{required:!1,default:"processed"},orderModifiers:{}}),emits:at(["open-preview","change-index"],["update:expanded","update:auto-scroll","update:order"]),setup(s,{emit:l}){const{t:i}=Ze(),r={W:160,H:80},o=s,a=Fe(s,"expanded"),u=Fe(s,"auto-scroll"),g=l;nt("table");const m=nt("tbody"),p=_(),y=_(null),b=_(null),v=_(80),f=_(200),d=Se(()=>{let T=o.logs;switch(R.value){case"success":T=T.filter(A=>A.completed);break;case"error":T=T.filter(A=>!A.completed);break}return T}),z=Ul(!1),$=_([{type:"group",label:()=>i("status.sort"),key:"sort",children:[{label:()=>i("status.sortByStart"),value:"processed"},{label:()=>i("status.sortByCompletion"),value:"zipped"},{label:()=>i("status.sortByName"),value:"name"},{label:()=>i("status.sortBySize"),value:"size"},{label:()=>i("status.sortByOutputSize"),value:"outputsize"},{label:()=>i("status.sortByStatus"),value:"status"}]}]),x=Fe(s,"order");ze(x,ye);const k=[{label:()=>i("status.showAll"),value:""},{label:()=>i("status.showOnlySuccess"),value:"success"},{label:()=>i("status.showOnlyError"),value:"error"}],R=_(k[0].value);Re(()=>{N=za(),fe(),window.addEventListener("resize",()=>fe());const T=new ResizeObserver(()=>fe());T.observe(N.parent.parent.vnode.el),Ge(()=>{window.removeEventListener("resize",()=>fe()),T.disconnect()})}),Ge(()=>{H==null||H.close(),clearTimeout(B),clearTimeout(he),clearTimeout(we)});let H;ze(()=>[o.thumbnail,o.opened],()=>{if(!o.thumbnail||!o.opened||o.thumbnail===H)return;const{width:T,height:A}=$n(o.thumbnail,{width:r.W,height:r.H});b.value.width=T,b.value.height=A,b.value.style.width=T+"px",b.value.style.height=A+"px",o.thumbnail instanceof HTMLImageElement?b.value.getContext("2d").drawImage(o.thumbnail,0,0,T,A):(b.value.getContext("bitmaprenderer").transferFromImageBitmap(o.thumbnail),H=o.thumbnail,o.thumbnail.close())});let D=0;ze(()=>o.imageIndex,T=>h(T));async function h(T){var _e;const A=T||o.imageIndex;let se=d.value.findIndex(Q=>Q.zippedIndex===A);se===-1&&(se=A);const pe=se<de.value,W=se>de.value+ge.value;if(pe||W){const Q=se*J-(W?v.value:0);(_e=p.value)==null||_e.scrollTo({behavior:"instant",top:Q,left:S}),await Le(),K(!0),await Le()}Le(()=>{var Me,Ee;let Q=y.value;Q&&(D>se&&(Q=Q.previousSibling||Q,Q instanceof HTMLElement||((Me=p.value)==null||Me.scrollTo(S,0),Q=null)),(Ee=Q==null?void 0:Q.scrollIntoView)==null||Ee.call(Q,{behavior:"instant",block:"nearest"}),D=se)})}ze(()=>o.opened,T=>{Le(()=>{T&&(h(),K())})});let B,N;const ae=_(document.documentElement.clientHeight),M=_(100);function fe(T){clearTimeout(B),B=setTimeout(()=>{if(!o.opened)return;const A=p.value.$parent.$el.offsetHeight,se=window.innerHeight-N.parent.parent.parent.parent.vnode.el.offsetHeight-8,pe=Math.max(200,A+se);ae.value=document.documentElement.clientHeight,M.value=Math.max(100,pe),!(!o.opened||!a.value)&&(v.value=Math.max(pe,f.value))},100)}function Oe(T){T&&(j(!0),fe(),z.value=!0)}let we=0,E=!1;function j(T=!1){if(!E){if(we){E=!0;return}Le(()=>{!T&&!u.value||(p.value.scrollTo({behavior:"instant",top:o.logs.length*50,left:S}),we=window.setTimeout(()=>{we=0,E&&(E=!1,j())},As))})}}const oe=_({height:"0px"}),ce=_({height:"0px"}),de=_(0),ge=Se(()=>v.value/J+tn*2|0);let J=15,G=0,he=0,O=0,q=-999,Y=-1;function K(T){const A=Date.now();if(T!==!0){if(he)return;if(A-O<30){he=window.setTimeout(()=>{he=0,K()},30-(A-O));return}}O=A,G||(G=m.value.rows[1].offsetHeight,J=G);const se=d.value.length,W=p.value.scrollbarInstRef.containerRef.scrollTop;if(!T&&se===Y&&Math.abs(W-q)<J*.5)return;q=W,Y=se;const _e=Math.max(0,(W/J|0)-tn);de.value=_e,oe.value.height=_e*J+"px",ce.value.height=Math.max(0,se-(_e+ge.value))*J+"px"}function ie(){var T;(T=p.value)==null||T.scrollTo(0,0),K()}ze(()=>o.logs,()=>{o.opened&&(Le(K),u.value&&j(),$e())}),ze(()=>o.opened,T=>{T&&K()});let me=0,Ce=0;function $e(){if(x.value==="processed"||!x.value)return;const T=Date.now();if(T-Ce<nn){if(me)return;me=window.setTimeout($e,nn-(T-Ce));return}me=0,Ce=T,ye()}function ye(){switch(console.log("sortList",x.value),x.value){case"zipped":o.logs.sort((T,A)=>T.zippedIndex-A.zippedIndex);break;case"status":o.logs.sort((T,A)=>T.command>A.command?1:-1);break;case"name":o.logs.sort((T,A)=>T.path>A.path?1:-1);break;case"size":o.logs.sort((T,A)=>T.size-A.size);break;case"outputsize":o.logs.sort((T,A)=>T.outputSize-A.outputSize);break;case"processed":default:o.logs.sort((T,A)=>T.index-A.index);break}}function F(T){const A=o.logs,se=A.findIndex(Ee=>Ee.zippedIndex===o.imageIndex);let pe=0,W=1;switch(T.code){case"ArrowUp":pe=-1;break;case"ArrowDown":pe=1;break;case"PageUp":pe=-1,W=v.value/J|0;break;case"PageDown":pe=1,W=v.value/J|0;break;case"Enter":case"NumpadEnter":if(se>=0&&o.previewCollapsed){Le(()=>g("open-preview")),T.stopPropagation(),T.preventDefault();return}break;default:return}let _e=se,Q=-1;const Me=A.length;do{if(_e+=pe,_e<0||_e>Me-1||_e===se)break;if(A[_e].completed){if(Q=_e,--W>0)continue;break}}while(!0);if(Q>=0){const Ee=A[Q];g("change-index",!0,Ee.path,Ee.fileId,Ee.zippedIndex),T.preventDefault()}}let ee=-1,re=-1,S=0,C=!1;function V(T){var pe,W,_e,Q;if(console.log("onLogTableScroll",(pe=T.target)==null?void 0:pe.scrollLeft,(W=T.target)==null?void 0:W.scrollTop),K(),C){C=!1;return}const{scrollLeft:A=0,scrollTop:se=0}=(Q=(_e=p.value)==null?void 0:_e.scrollbarInstRef)==null?void 0:Q.containerRef;(A!==ee||ee<0)&&(se===re||re<0)&&(S=A,console.log(S,"storedLogTableScrollLeft")),ee=A,re=se,Le(()=>{var Ee,Je;C=!0;const Me=(Je=(Ee=p.value)==null?void 0:Ee.scrollbarInstRef)==null?void 0:Je.containerRef;Me&&(Me.scrollLeft=S)})}function U(T){u.value=!1}return(T,A)=>{const se=Tt,pe=Ae,W=be,_e=At,Q=vn,Me=Ie,Ee=St,Je=Qe,qo=Ut,Go=ct;return P(),ne(Go,{name:"log",style:{"white-space":"nowrap"}},{header:t(()=>[n(pe,{align:"center",wrap:!1},{default:t(()=>[L(c(T.$t("status.Log")),1),He(n(se,{size:16},null,512),[[Ve,T.processing&&!o.opened]])]),_:1})]),"header-extra":t(()=>[He(n(pe,{align:"center",justify:"end",wrap:!0,style:{"margin-top":"0.2em","margin-left":"0.5em"}},{default:t(()=>[n(_e,{value:x.value,"onUpdate:value":[A[0]||(A[0]=Te=>x.value=Te),ye],options:e($),style:{width:"auto"},"consistent-menu-width":!1,"show-on-focus":!1,size:"tiny"},{arrow:t(()=>[n(W,{component:e(ka)},null,8,["component"])]),_:1},8,["value","options"]),n(_e,{value:e(R),"onUpdate:value":[A[1]||(A[1]=Te=>We(R)?R.value=Te:null),A[2]||(A[2]=Te=>ie())],options:k,placeholder:T.$t("status.filterLogSelect"),size:"tiny",style:{width:"auto"},"consistent-menu-width":!1,"show-on-focus":!1},{arrow:t(()=>[n(W,{component:e(xa)},null,8,["component"])]),_:1},8,["value","placeholder"]),n(Q,{key:"b",checked:u.value,"onUpdate:checked":[A[3]||(A[3]=Te=>u.value=Te),A[4]||(A[4]=Te=>Te&&j(!0))],size:"small",style:{"font-size":"0.9em"}},{default:t(()=>[L(c(T.$t("status.autoScroll")),1)]),_:1},8,["checked"]),n(Je,{trigger:"hover",show:e(z),disabled:!a.value,placement:"top",delay:0,duration:1e3},{trigger:t(()=>[n(Me,{style:{"max-width":"30em"},disabled:!0},{trigger:t(()=>[n(Q,{size:"small",checked:a.value,"onUpdate:checked":[A[5]||(A[5]=Te=>a.value=Te),Oe],style:{"font-size":"0.9em"}},{default:t(()=>[L(c(T.$t("status.expandLog")),1)]),_:1},8,["checked"])]),default:t(()=>[L(c(T.$t("status.expandLog")),1)]),_:1})]),default:t(()=>[n(pe,{wrap:!1,align:"center",style:{"font-size":"0.8em"}},{default:t(()=>[n(Ee,{value:e(f),"onUpdate:value":A[6]||(A[6]=Te=>We(f)?f.value=Te:null),onUpdateValue:A[7]||(A[7]=Te=>fe()),disabled:!a.value,"format-tooltip":Te=>`Log size: ${Te}`,tooltip:!0,step:1,min:e(M),max:e(ae),style:{"z-index":"3",width:"100px"}},null,8,["value","disabled","format-tooltip","min","max"])]),_:1})]),_:1},8,["show","disabled"])]),_:1},512),[[Ve,o.opened]])]),default:t(()=>[n(pe,{wrap:!1,align:"stretch",class:ot({"log-container":1,"expand-log":a.value}),style:ue(a.value?{height:e(v)+"px"}:{height:"110px"}),onKeydown:F,tabindex:"-1"},{default:t(()=>[n(e(gn),{ref_key:"scrollref",ref:p,distance:10,"x-scrollable":!0,onMousedownCapture:U,onWheel:A[8]||(A[8]=Te=>u.value=!1),onScroll:V,load:"handleLogLoad",trigger:"none",style:ue([{"z-index":"2","padding-right":"10px",height:"100%"},a.value?{height:e(v)+"px"}:{}]),size:50},{default:t(()=>[o.opened?(P(),le("table",fs,[w("thead",null,[w("tr",gs,[w("th",{class:"log-th",title:T.$t("status.table.core")},"th",8,ms),A[9]||(A[9]=w("th",{class:"log-th"},"no.",-1)),w("th",vs,c(T.$t("status.table.status")),1),w("th",hs,c(T.$t("status.table.details")),1),A[10]||(A[10]=w("th",{class:"log-th"},"size",-1))])]),w("tbody",_s,[w("tr",{style:ue(e(oe))},null,4),(P(!0),le(De,null,ht(e(d).slice(e(de),e(de)+e(ge)),({index:Te,key:Ko,command:Yo,path:Zt,core:Ht,zippedIndex:pt,completed:Vt,fileId:Qo,shrinked:Xo,width:Wt,height:Jo,outputWidth:ea,outputHeight:ta,size:na,outputSize:qt},oa)=>(P(),le("tr",{key:Ko,class:ot({"log-tr":1,completed:Vt,selected:T.imageIndex===pt,stripe:oa%2}),ref_for:!0,ref:Gt=>{T.imageIndex===pt&&(y.value=Gt)},onClick:Gt=>g("change-index",Vt,Zt,Qo,pt),onDblclick:()=>{T.imageIndex===pt&&g("open-preview")}},[w("td",ys,c(Ht>=0?Ht+1:"-"),1),w("td",bs,c(Te+1),1),w("td",zs,c(Yo),1),w("td",ks,c(Zt),1),Wt?(P(),le("td",xs,[L(c(`[${Wt}×${Jo}] (${e(je)(na,0)})`)+" ",1),qt?(P(),le("span",Ts,[A[11]||(A[11]=L(" → ")),w("span",null," ("+c(e(je)(qt,0))+") ",1)])):ve("",!0),Xo?(P(),le("span",Is,c(` [${ea}×${ta}]`),1)):ve("",!0)])):(P(),le("td",Ss))],42,ws))),128)),w("tr",{style:ue(e(ce))},null,4)],512)],512)):ve("",!0),A[12]||(A[12]=w("div",{style:{height:"1em"}},null,-1))]),_:1},8,["style"]),n(pe,{style:ue([{"align-self":"center",position:"absolute","z-index":"0","margin-top":"10px",right:"0.1em","line-height":"0px"},{width:r.W+"px",height:r.H+"px"}]),justify:"center",align:"center"},{default:t(()=>[n(se,{size:"small",show:T.processing},{default:t(()=>[o.thumbnail===void 0?(P(),ne(qo,{key:0,description:"EMPTY"})):ve("",!0),He(w("canvas",{ref_key:"thumbcanvas",ref:b,width:"106",height:"80",style:ue({border:"1px solid gray",filter:T.processing?"":"opacity(0.35)"})},null,4),[[Ve,o.thumbnail!==void 0]])]),_:1},8,["show"])]),_:1},8,["style"])]),_:1},8,["class","style"])]),_:1})}}}),Cs={class:"container"},$s={__name:"zipicon",setup(s){return(l,i)=>(P(),le("span",Cs,[n(e(be),null,{default:t(()=>[n(e(Pt))]),_:1}),i[0]||(i[0]=w("span",{class:"text"},"ZIP",-1))]))}},Es=Be($s,[["__scopeId","data-v-8b8df2f0"]]),Fs=["innerHTML"],Ps={style:{margin:"1px"}},Os=["href","download","onClick"],Us={key:0,style:{position:"relative"}},Ms=["href","download"],Rs=["href","download"],Ds={key:0,style:{margin:"1px"}},Ns=["href","download","onClick"],Bs=ke({__name:"status.result",props:{processing:{type:Boolean},listLength:{},zippingFlag:{type:Boolean},converted:{},success:{},zippedTotalCount:{},zippedTotalSize:{},baseZipName:{},zips:{},unconvertedListText:{},unconvertedFileCount:{},unconvertedTotalSize:{},failedZips:{},failedZipDone:{type:Boolean},failedToCreateFailedZip:{type:Boolean},failedFileZippedCount:{},imgUrl:{},imgName:{},type:{}},emits:["all-zips-clicked","demand-zip-errors"],setup(s,{emit:l}){const i=ut(),{t:r}=Ze(),o=It(),a=s,u=l,g=_(!1),m=_([]),p=_([]),y=_(void 0),b=Se(()=>[{key:"open",label:r("status.openFailedList"),icon:()=>X(be,()=>X(hn)),onSelect(){d()}},{key:"download",label:r("status.saveFailedList"),icon:()=>X(be,()=>X(Ta)),onSelect(){d(!0)}},{key:"zip",label:`${r("status.zipFailedList")}`+(a.failedZipDone?`(✔${r("status.done")})`:""),icon:()=>X(Tt,{show:g.value&&!a.failedZipDone,size:"small"},()=>X(be,()=>X(Pt))),disabled:g.value,onSelect(z){return g.value=!0,u("demand-zip-errors"),!1}}]);ze([()=>a.zips.length,()=>a.failedZips.length],()=>{{m.value.length>a.zips.length&&(m.value.length=0);let z=0;const I=a.zips.length===1&&a.zippedTotalCount===a.listLength;for(let $=m.value.length;$<a.zips.length;$++){const x=a.zips[$],k=a.baseZipName+(I?"":"-"+String($+1).padStart(2,"0"))+".zip";z+=x.size,m.value[$]={url:x.url,size:x.size,number:I?0:$+1,sizeByUnit:je(x.size),name:k,count:x.count,clicked:!1}}}{p.value.length>a.failedZips.length&&(p.value.length=0);let z=0;const I=a.failedZipDone&&a.failedZips.length===1;for(let $=p.value.length;$<a.failedZips.length;$++){const x=a.failedZips[$],k=a.baseZipName+"-error"+(I?"":"-"+String($+1).padStart(2,"0"))+".zip";z+=x.size,p.value[$]={url:x.url,size:x.size,number:I?0:$+1,sizeByUnit:je(x.size),name:k,count:x.count,clicked:!1}}}});function v(z,I=!1){const{url:$,name:x}=z;if(I){const k=document.createElement("a");k.href=$,k.download=x,k.click()}z.clicked||(z.clicked=!0,a.processing||m.value.every(k=>k.clicked)&&u("all-zips-clicked"))}async function f(z){if(a.zippingFlag){if(m.value.length>=2&&!await new Promise((x,k)=>i.warning({title:r("Download"),content:r("status.confirmDownloadMessage",[m.value.length]),positiveText:"OK",negativeText:r("cancel"),onPositiveClick:()=>x(!0),onNegativeClick:()=>k()})))return;const I=m.value;for(const $ of I)v($,!0)}}function d(z=!1){const I=new Blob([a.unconvertedListText],{type:"text/plain;charset=utf8"}),$=URL.createObjectURL(I),x=document.createElement("a");x.href=$,x.target="_blank",z&&(x.download=a.baseZipName+"-error.txt"),x.click()}return(z,I)=>{const $=mn,x=Qe,k=Pe,R=Ae,H=Es,D=Mt,h=Ia,B=ct;return P(),ne(B,{name:"output",style:{"white-space":"nowrap"},disabled:""},{header:t(()=>[w("span",{style:{color:"black"},innerHTML:z.$t("status.Output")},null,8,Fs)]),default:t(()=>[n(R,{wrap:!1,vertical:"",style:{"margin-top":"-1.3em"}},{default:t(()=>[n(R,{justify:"center"},{default:t(()=>[He(n(R,{vertical:"",align:"center"},{default:t(()=>[n(x,{placement:"left"},{trigger:t(()=>[n($,{type:"line","indicator-placement":"inside",color:"lime","rail-color":"rgba(99, 255, 99, 0.5)","indicator-text-color":a.zippedTotalCount===z.listLength?"white":"green",processing:a.processing,percentage:a.zippedTotalCount/z.listLength*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[w("span",Ps,c(a.zippedTotalCount/z.listLength*100|0)+"% "+c(z.$t("status.zippingProgress"))+" ("+c(a.zippedTotalCount)+"/"+c(a.converted)+")",1)]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[L(" "+c(z.$t("status.zippingProgress"))+" ("+c(a.zippedTotalCount/a.listLength*100|0)+"%) ",1)]),_:1}),n(Xe,{name:"zipcontainer"},{default:t(()=>[e(m).length>=2||a.processing?(P(),ne(Xt,{key:0,name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(P(!0),le(De,null,ht(e(m),(N,ae)=>(P(),le("span",{key:ae},[n(x,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[w("a",{href:N.url,download:N.name,class:"in-button-anchor",onClick:M=>v(N)},[n(k,{class:"zip-button",size:"tiny",color:N.clicked?"#050":"lime","text-color":N.clicked?"gray":"white",onClick:tt(M=>v(N),["stop"]),round:""},{default:t(()=>[n(e(be),{size:"tiny"},{default:t(()=>[n(e(Pt))]),_:1}),L("ZIP"+c(N.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Os)]),default:t(()=>[w("div",{style:ue({color:e(o).successColor})},[w("div",null,"ZIP "+c(N.number||"")+" ("+c(z.$t("success"))+")",1),w("div",null,c(N.name),1),w("div",null,c(N.sizeByUnit),1),w("div",null,c(z.$rt("{n} @:files",N.count)),1)],4)]),_:2},1024)]))),128))]),_:1})):ve("",!0)]),_:1})]),_:1},512),[[Ve,z.zippingFlag]])]),_:1}),n(Xe,null,{default:t(()=>[He(n(R,{justify:"center",align:"center"},{default:t(()=>[n(x,{trigger:"hover",duration:0,delay:0,placement:"left",style:ue({color:"white",backgroundColor:e(o).successColor}),"arrow-style":{backgroundColor:e(o).successColor}},{trigger:t(()=>[n(Xe,{name:"save"},{default:t(()=>[z.success>0?(P(),le("span",Us,[n(D,{value:z.zippingFlag?a.zippedTotalCount.toLocaleString("en-us"):a.type.replace(/\(.+\)/,""),color:e(o).successColorHover,offset:[-20,-3]},{default:t(()=>[z.zippingFlag?(P(),ne(k,{key:0,size:"medium",onClick:f,color:e(o).successColor,round:""},{default:t(()=>[e(m).length?(P(),le("a",{key:0,href:e(m)[0].url,download:e(m)[0].name,class:"in-button-anchor",onClick:I[0]||(I[0]=tt(()=>{},["prevent"]))},[n(H),L(" × "+c(e(m).length)+" "+c(z.$t("status.saveAll")),1)],8,Ms)):ve("",!0)]),_:1},8,["color"])):(P(),le("a",{key:1,href:a.imgUrl,download:a.imgName,class:"in-button-anchor"},[n(k,{size:"medium",color:e(o).successColor,round:""},{default:t(()=>[n(e(be),{size:"tiny",component:e(_n)},null,8,["component"]),L(" "+c(z.$t("save")),1)]),_:1},8,["color"])],8,Rs))]),_:1},8,["value","color"])])):ve("",!0)]),_:1})]),default:t(()=>[a.listLength>=2?(P(),le(De,{key:0},[w("div",null,c(e(r)("success"))+": "+c(z.zippedTotalCount.toLocaleString()),1),w("div",null,c(e(r)("status.totalSize"))+": "+c(e(je)(a.zippedTotalSize)),1),w("div",null,"ZIP × "+c(e(m).length),1),w("div",null,c(e(r)("status.saveAllZipsTooltip")),1)],64)):(P(),le(De,{key:1},[L(c(z.$t("status.downloadConvertedImage",e(m).length)),1)],64))]),_:1},8,["style","arrow-style"]),!a.processing&&a.success!==z.listLength?(P(),ne(h,{key:0,options:e(b),onSelect:I[1]||(I[1]=(N,ae)=>{var M;return(M=e(b).find(({key:fe})=>N===fe))==null?void 0:M.onSelect()}),"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start"},{default:t(()=>[n(x,{show:e(y),duration:0,delay:0,placement:"right",style:ue({color:"white",backgroundColor:e(o).errorColor}),"arrow-style":{backgroundColor:e(o).errorColor}},{trigger:t(()=>[n(D,{value:a.unconvertedFileCount.toLocaleString(),color:e(o).errorColorHover,offset:[-0,-3]},{default:t(()=>[n(k,{size:"small",color:e(o).errorColor},{default:t(()=>[n(e(be),{size:"medium",style:{"vertical-align":"middle"},component:e(Sa)},null,8,["component"])]),_:1},8,["color"])]),_:1},8,["value","color"])]),default:t(()=>[w("div",null,[w("div",null,c(e(r)("failed"))+": "+c(a.unconvertedFileCount.toLocaleString()),1),w("div",null,c(e(r)("status.totalSize"))+": "+c(e(je)(a.unconvertedTotalSize)),1)])]),_:1},8,["show","style","arrow-style"])]),_:1},8,["options"])):ve("",!0)]),_:1},512),[[Ve,!a.processing]])]),_:1}),n(Xe,{name:"zipcontainer"},{default:t(()=>[He(n(R,{vertical:"",align:"center"},{default:t(()=>[n(x,{placement:"left"},{trigger:t(()=>[n($,{type:"line","indicator-placement":"inside",color:"red","rail-color":"rgba(255, 0, 0, 0.5)","indicator-text-color":a.failedFileZippedCount===a.unconvertedFileCount?"white":"#500",processing:e(g)&&!a.failedZipDone&&!a.failedToCreateFailedZip,percentage:a.failedFileZippedCount/a.unconvertedFileCount*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[a.failedToCreateFailedZip?(P(),le("div",{key:1,style:ue({color:e(o).errorColor})},c(z.$t("status.failureZippingFailedFiles")),5)):(P(),le("span",Ds,c(a.failedFileZippedCount/a.unconvertedFileCount*100|0)+"% "+c(z.$t("status.zipped"))+" ("+c(a.failedFileZippedCount)+"/"+c(a.unconvertedFileCount)+")",1))]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[L(" "+c(z.$t("status.zippingProgress"))+" ("+c(a.failedFileZippedCount/a.unconvertedFileCount*100|0)+"%) ",1)]),_:1}),n(Xt,{name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(P(!0),le(De,null,ht(e(p),(N,ae)=>(P(),le("span",{key:ae},[n(x,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[w("a",{href:N.url,download:N.name,class:"in-button-anchor",onClick:M=>v(N)},[n(k,{class:"zip-button",size:"tiny",color:N.clicked?"#551122":"#F00","text-color":N.clicked?"gray":"white",onClick:tt(M=>v(N),["stop"]),round:""},{default:t(()=>[n(e(be),{size:"tiny",component:e(Aa)},null,8,["component"]),L("ZIP"+c(N.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Ns)]),default:t(()=>[w("div",{style:ue({color:e(o).errorColor})},[w("div",null,"ZIP "+c(N.number||"")+" ("+c(z.$t("failed"))+")",1),w("div",null,c(N.name),1),w("div",null,c(N.sizeByUnit),1),w("div",null,c(z.$rt("{n} @:files",N.count)),1)],4)]),_:2},1024)]))),128))]),_:1})]),_:1},512),[[Ve,e(g)]])]),_:1})]),_:1})]),_:1})}}}),js=Be(Bs,[["__scopeId","data-v-566320e7"]]),Zs=ke({__name:"status",props:{processing:{type:Boolean},status:{},interval:{}},emits:["all-zips-clicked","demand-zip-errors","demand-image","delete-image"],setup(s,{expose:l,emit:i}){const r={itemMargin:"1px",titlePadding:"2px",titleFontSize:"0.8rem"};ut();const{t:o}=Ze(),a=It(),u=s,g=i;l({cleanup:ye});const m=_(!1),p=_([]),y=_(!1),b=_(!1),v=_([0,0]),f=_([0,0]),d=_([0,0]),z=_([0,0]),I=_([0,0]),$=_([0,0]),x=_(0),k=_(0),R=_([0,0]),H=_(0),D=_(a.value.infoColor),h=_("#000000"),B=_("#000000"),N=_(0),ae=_(0),M=_(""),fe=_("00:00:00"),Oe=_(null),we=_(["progress","log","output"]),E=F=>we.value.includes(F),j=F=>we.value.push(F),oe=F=>{const ee=we.value.findIndex(re=>re===F);ee>=0&&we.value.splice(ee,1)},ce=Se(()=>we.value.includes("log")),de=_(!1),ge=_(!0),J=_("processed"),G=xt({name:"",originalName:"",size:0,url:"",originalUrl:"",originalSize:0,dataUrl:"",index:0,various:{shrinked:!1}}),he=nt("body"),O=nt("imageViewer");Re(()=>{ze(u.status,()=>ie(),{deep:!1});let F=0;const ee=()=>{if(F)return;const re=Date.now();fe.value="00:00:00",F=window.setInterval(()=>{const S=(Date.now()-re)/1e3;fe.value=`${String(S/3600|0).padStart(2,"0")}:${String(S/60%60|0).padStart(2,"0")}:${String(S%60|0).padStart(2,"0")}`},300)};ee(),b.value=!0,ze(()=>u.processing,(re,S)=>{re||me(),re?(ee(),p.value.length=0,m.value=!1,y.value=!1):(clearInterval(F),F=0)}),Ge(()=>{clearInterval(F),clearTimeout(K)}),vt(()=>clearInterval(F))}),Ge(()=>{ye()}),vt(()=>{clearTimeout(K)});const q=u.interval||100;let Y=!1,K=0;function ie(){if(Y)return;if(K){Y=!0;return}K=window.setTimeout(()=>{K=0,Y&&(Y=!1,ie())},q);const F=u.status;m.value=F.length>=2,f.value[1]=f.value[0],f.value[0]=F.startedCount,d.value[1]=d.value[0],d.value[0]=F.success,z.value[1]=z.value[0],z.value[0]=F.failure,I.value[1]=I.value[0],I.value[0]=F.done,$.value[1]=$.value[0],$.value[0]=F.converted,x.value=F.retried,k.value=F.length,R.value[1]=R.value[0],R.value[0]=F.zippedTotalCount,N.value=F.inputTotalSize,ae.value=F.outputTotalSize,H.value=F.failedFileZippedCount;const ee=ae.value-N.value;M.value=(ee>=0?"+ ":"")+je(ee);const re=ae.value/N.value,S=(256|Math.min(255,Math.max(0,re-1.5)*255|0)).toString(16).substring(1);h.value="#"+S+"0000";const C=1024*1024,V=(256|Math.min(255,Math.max(0,ee/1024/C)*255|0)).toString(16).substring(1);B.value="#"+V+"0000",v.value[1]=v.value[0],v.value[0]=d.value[0]/k.value*100,(ce.value||!u.processing)&&(p.value=p.value.concat(F.logs),F.logs.length=0),Oe.value=F.thumbnail,u.processing?D.value=z.value[0]?a.value.errorColor:x.value?a.value.warningColor:a.value.infoColor:b.value=!1,F.convertedImageUrl!==G.url&&(G.url=F.convertedImageUrl,G.name=F.convertedImageName,G.dataUrl=F.convertedImageDataUrl,G.size=F.convertedImageSize||F.outputTotalSize,G.originalSize=F.convertedImageOrgSize,G.originalName=F.convertedImageOrgName,G.index=F.convertedImageIndex,G.originalUrl=F.convertedImageOrgUrl,G.various={shrinked:F.convertedImageShrinked})}function me(){const F=u.status;D.value=u.status.success===u.status.length?a.value.successColor:a.value.errorColor,J.value==="processed"&&(J.value="zipped"),F.success>0&&(ge.value||oe("log"),j("preview"))}async function Ce(F,ee,re,S){var V;if(!F)return;const C=S;console.log(F,ee,re,S,"completed, path, fileId, zippedIndex"),console.log(C,u.status.ziplogs[C]),E("preview")||(j("preview"),await Le()),(V=O.value)==null||V.changeIndex(C+1),await Le(()=>{var U;try{(U=O.value)==null||U.$el.scrollIntoView({behavior:"instant",block:"nearest"})}catch{}})}const $e=_(!1);function ye(){$e.value=!0,URL.revokeObjectURL(G.url),URL.revokeObjectURL(G.originalName),G.originalUrl="",G.url="",G.index=0,u.status.logs.length=0,p.value.length=0}return(F,ee)=>{const re=Ae,S=ct,C=wn;return P(),ne(re,{ref_key:"body",ref:he,vertical:"",justify:"center"},{default:t(()=>[n(C,{"display-directive":"show","trigger-areas":["arrow","main"],"expanded-names":e(we),"onUpdate:expandedNames":ee[5]||(ee[5]=V=>We(we)?we.value=V:null),"theme-overrides":r},{default:t(()=>[n(ts,{"elapsed-time":e(fe),"success-perc":e(v)[0],"input-total-size":e(N),"output-total-size":e(ae),"file-type":u.status.type,shrink:u.status.shrink,threads:u.status.threads,"zip-size":u.status.zipSize,"rate-color":e(h),"dif-color":e(B),"total-size-dif-str":e(M)},{center:t(()=>[e($e)?ve("",!0):(P(),ne(ps,{key:0,index:e(f)[0],success:e(d)[0],length:F.status.length,"success-to":e(d)[0],"success-from":e(d)[1],failure:e(z)[0],"success-perc-to":e(v)[0],"success-perc-from":e(v)[1],retried:e(x),processing:e(b),interval:e(q),"status-color":e(D),class:"center-column"},null,8,["index","success","length","success-to","success-from","failure","success-perc-to","success-perc-from","retried","processing","interval","status-color"]))]),_:1},8,["elapsed-time","success-perc","input-total-size","output-total-size","file-type","shrink","threads","zip-size","rate-color","dif-color","total-size-dif-str"]),n(Ls,{processing:e(b),"image-index":e(G).index,thumbnail:e(Oe),opened:e(ce),"preview-collapsed":E("preview"),logs:e(p),expanded:e(de),"auto-scroll":e(ge),order:e(J),onChangeIndex:Ce,onOpenPreview:ee[0]||(ee[0]=V=>{var U;return(U=e(O))==null?void 0:U.openPreview()}),name:"log",style:{"white-space":"nowrap"}},null,8,["processing","image-index","thumbnail","opened","preview-collapsed","logs","expanded","auto-scroll","order"]),n(S,{title:F.$t("status.PreviewImage"),name:"preview",style:{"white-space":"nowrap"},disabled:!(e(d)[0]>0)},{default:t(()=>[n(re,{justify:"center",align:"center",vertical:"",style:{"margin-top":"-1em"}},{default:t(()=>[n(Ql,{"_v-else-if":"imageViewerStarted && status.success > 0 /*&& (props.status.threads || !zippingFlag)*/ && !cleaningUp",ref_key:"imageViewer",ref:O,url:e(G).url,size:e(G).size,"original-url":e(G).originalUrl,"original-size":e(G).originalSize,name:e(G).name,originalName:e(G).originalName,length:e(d)[0],index:e(G).index,"various-info":e(G).various,"is-single":!e(m),onDemandImage:ee[1]||(ee[1]=V=>g("demand-image",V)),on_deleteImage:ee[2]||(ee[2]=V=>g("delete-image",V)),_close:"imageViewerStarted=false"},null,8,["url","size","original-url","original-size","name","originalName","length","index","various-info","is-single"])]),_:1})]),_:1},8,["title","disabled"]),n(js,{processing:e(b),"list-length":e(k),zippingFlag:e(m),zips:u.status.zips,"img-url":e(G).url,"img-name":e(G).name,success:e(d)[0],failure:e(z)[0],done:e(I)[0],converted:e($)[0],retried:e(x),"zipped-total-count":e(R)[0],"zipped-total-size":u.status.zippedTotalSize,"base-zip-name":u.status.baseZipName,"failed-file-zipped-count":e(H),"failed-to-create-failed-zip":u.status.failedToCreateFailedZip,"failed-zip-done":u.status.failedZipDone,"failed-zips":u.status.failedZips,"unconverted-file-count":u.status.unconvertedFileCount,"unconverted-list-text":u.status.unconvertedListText,"unconverted-total-size":u.status.unconvertedTotalSize,type:u.status.type,onAllZipsClicked:ee[3]||(ee[3]=V=>g("all-zips-clicked")),onDemandZipErrors:ee[4]||(ee[4]=V=>g("demand-zip-errors"))},null,8,["processing","list-length","zippingFlag","zips","img-url","img-name","success","failure","done","converted","retried","zipped-total-count","zipped-total-size","base-zip-name","failed-file-zipped-count","failed-to-create-failed-zip","failed-zip-done","failed-zips","unconverted-file-count","unconverted-list-text","unconverted-total-size","type"])]),_:1},8,["expanded-names"])]),_:1},512)}}}),Hs=Be(Zs,[["__scopeId","data-v-5b714e18"]]),Vs=["innerHTML"],Ws=ke({__name:"converter",props:at({input:{},format:{},quality:{},retainExtension:{type:Boolean},maxZipSizeMB:{},threads:{}},{showNote:{type:Boolean},showNoteModifiers:{}}),emits:at(["start","end"],["update:showNote"]),setup(s,{emit:l}){Ye(qe);const{t:i}=Ze(),r=ut(),o=La(),a=10,u=navigator.hardwareConcurrency,g=typeof OffscreenCanvas=="function",m=100,p=s,y=Fe(s,"showNote"),b=l,v=_(!1),f=_(!1),d=_(!1),z=_(!1),I=_(!1),$=_(()=>"initializing"),x=_("info"),k=xt(oe()),R=nt("stat"),H=_(0);let D=!1,h=()=>{},B,N=0,ae=!1;ze(()=>p.input,O=>{O!=null&&O.length&&de(O)}),ze(z,O=>{document.body.style.overflowY=O?"hidden":"auto"}),Re(async()=>{await G(),he()});async function M(){let O=!0;if(N>a*1e3&&!ae&&k.success>0&&(O=!1,await new Promise(q=>{r.warning({title:i("confirmCloseDialogTitle"),autoFocus:!0,maskClosable:!1,positiveText:i("close"),negativeText:i("back"),onPositiveClick:()=>O=!0,onAfterLeave:q,content:i("confirmCloseDialog")})})),!O)return!1;o.destroyAll(),z.value=!1,y.value=!1}function fe(O){B==null||B(O),console.log(O,"demanded")}function Oe(O){$t==null||$t(O),console.log(O,"delete")}function we(){!f.value&&v.value?f.value=!0:M()}function E(){de(p.input)}let j=_(()=>{});function oe(O){const q={logs:[],ziplogs:[],startedCount:0,converted:0,success:0,failure:0,retried:0,done:0,length:0,zippedTotalCount:0,zippingErrorCount:0,zippedTotalSize:0,processing:!1,zips:[],inputTotalSize:0,outputTotalSize:0,thumbnail:null,baseZipName:"testzipname",type:"image/any",startedTime:Date.now(),convertedImageDataUrl:"",convertedImageName:"",convertedImageUrl:"",convertedImageOrgUrl:"",convertedImageIndex:-1,convertedImageShrinked:!1,zipSize:p.maxZipSizeMB,shrink:Z.multithread&&Z.shrinkImage?[Z.maxWidth,Z.maxHeight]:void 0,unconvertedListText:"",failedZipDone:!1,failedZips:[],unconvertedFileCount:0,unconvertedTotalSize:0,failedFileZippedCount:0,failedToCreateFailedZip:!1};return Object.assign(O||{},q)}function ce(){I.value=!1,URL.revokeObjectURL(k.convertedImageUrl),URL.revokeObjectURL(k.convertedImageOrgUrl);for(const O of k.zips)URL.revokeObjectURL(O.url);k.zips.length=0;for(const O of k.failedZips)URL.revokeObjectURL(O.url);k.failedZips.length=0,oe(k),h(),h=()=>{},B=null,ae=!1,d.value=!1,f.value=!1}async function de(O){if(v.value){r.error({title:"Busy",positiveText:"OK",content:i("interfered")});return}z.value&&(H.value^=1);let q=O.concat();oe(k),ce(),z.value=!0,I.value=!0,v.value=!0,k.processing=!0,x.value="info",$.value=()=>i("processing");const Y=new Set,K=p.format,ie=p.quality,me=[...K.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),Ce=J(K,ie,q[0].webkitRelativePath);k.length=q.length,k.baseZipName=Ce,k.type=K.replace(/image\//,"").toUpperCase()+(/jpe?g|webp/i.test(K)?" ("+ie+")":""),k.threads=D?0:p.threads;const $e=Date.now();b("start");let ye,F,ee;if(!D&&p.threads>=2?(B=El,ee=await kl({files:q,completedFileIdSet:Y,ConvStats:k,canceled:f,props:p,imageType:K,quality:ie,outputExt:me,format:K,message:o})):(B=Rl,ee=await Ml(q,Y,p,f,k)),{exception:F,callbackToGenerateFailedZips:ye,callbackToClearConverter:h}=ee,F){let re;switch(F.message){case"worker-load-error":re=i("errMsgWorkerLoadError");break;default:re="unexpected error"}r.error({title:"Error",autoFocus:!0,maskClosable:!1,closable:!1,content:()=>X("div",[X("p",re),X(Pe,{onClick(){location.reload()}},i("Reload"))])})}if(k.success===k.length?(x.value="success",$.value=()=>i("completed")):(x.value="error",$.value=()=>f.value?i("aborted"):i("incomplete")),Y.size!==q.length){const re=ge(O,Y);j.value=()=>{!re||!re.length||ye(re)}}v.value=!1,k.processing=!1,d.value=!0,q.length=0,N=Date.now()-$e,b("end")}function ge(O,q){const Y=[],K=[];let ie=0;for(const me of O)q.has(me._id)||(Y.push(me),K.push(me.webkitRelativePath||me.relativePath||me.name),ie+=me.size);return K.length&&(k.unconvertedListText=K.join(`
`),k.unconvertedFileCount=Y.length,k.unconvertedTotalSize=ie),Y}function J(O,q,Y){var $e;const K=new Date;O=O.replace(/^image\//,"").toLowerCase();const ie=Z.useFolderNameForZip&&(($e=String(Y).match(/^\/?([^/]+)\//))==null?void 0:$e[1])||"avif2jpg",me=`
    ${K.getFullYear().toString().substring(2)}
    ${String((K.getMonth()+1)*100+K.getDate()).padStart(4,"0")}
    ${String(K.getHours()*1e4+K.getMinutes()*100+K.getSeconds()).padStart(6,"0")}
    -
    ${O+(/jpe?g|webp/i.test(O)?q:"")}
  `.replace(/\s/g,"");return`${ie}-${me}`.replace(/\s+/g," ")}async function G(){const O="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",q=document.createElement("img"),Y=En(q).then(()=>!0,()=>!1);q.src=O,await Y||r.warning({title:"Unsupported",positiveText:"OK",maskClosable:!1,content:i("avifUnsupported")})}function he(){(!g||u<2||!Promise.any)&&(D=!0),D&&(Ue.value=0)}return(O,q)=>{var ye;const Y=be,K=Mt,ie=Ie,me=Ae,Ce=Tt,$e=yn;return P(),le(De,null,[!e(v)&&((ye=p.input)!=null&&ye.length)?(P(),ne(me,{key:0,justify:"center",align:"center",style:{"margin-top":"0.4em"}},{default:t(()=>[n(ie,{trigger:"hover",placement:"top","keep-alive-on-hover":!1,duration:0,delay:50},{trigger:t(()=>{var F;return[n(K,{value:((F=O.input)==null?void 0:F.length)||0,offset:[-12,-5],color:"#99999966"},{default:t(()=>[n(e(Pe),{onClick:E,round:"",size:"medium"},{icon:t(()=>[n(Y,{size:"1.2em",color:"#CCCCCC"},{default:t(()=>[n(e(Ca))]),_:1})]),default:t(()=>[L(" "+c(e(i)("convertAgain")),1)]),_:1})]),_:1},8,["value"])]}),default:t(()=>{var F;return[w("div",{innerHTML:e(i)("reconvertTip",(F=p.input)==null?void 0:F.length)},null,8,Vs)]}),_:1})]),_:1})):ve("",!0),n($e,{ref:"processingModal","display-directive":"show",show:e(z),"onUpdate:show":q[2]||(q[2]=F=>We(z)?z.value=F:null),closable:e(d),"close-on-esc":!1,preset:"dialog",onClick:q[3]||(q[3]=F=>{e(o).destroyAll()}),onMaskClick:q[4]||(q[4]=F=>{e(o).destroyAll()}),onClose:M,onEsc:we,title:e($),type:e(x),"mask-closable":!1,onAfterLeave:ce,onBeforeLeave:q[5]||(q[5]=F=>{e(R).cleanup()}),class:"processing-dialog"},{default:t(()=>[n(me,{vertical:"",style:{"flex-grow":"1"}},{default:t(()=>[e(I)?(P(),ne(Hs,{ref_key:"stat",ref:R,key:e(H),processing:e(v),status:e(k),interval:m,onAllZipsClicked:q[0]||(q[0]=F=>We(ae)?ae.value=!0:ae=!0),onDemandZipErrors:e(j),onDemandImage:fe,onDeleteImage:Oe},null,8,["processing","status","onDemandZipErrors"])):ve("",!0),n(me,{justify:"end",align:"center",wrap:!1},{default:t(()=>[e(v)?(P(),ne(e(Pe),{key:0,disabled:e(f),ref:"cancelbutton",round:"",size:"large",onClick:q[1]||(q[1]=F=>f.value=!0)},{default:t(()=>[n(Ce,{show:e(f)&&!e(d),size:"small"},{default:t(()=>[L(c(e(i)("cancel")),1)]),_:1},8,["show"])]),_:1},8,["disabled"])):e(d)?(P(),ne(e(Pe),{key:1,onClick:M,round:"",size:"large"},{default:t(()=>[L(c(e(i)("close")),1)]),_:1})):ve("",!0)]),_:1})]),_:1})]),_:1},8,["show","closable","title","type"])],64)}}}),qs="/avif2jpeg/dist/avif.png",Gs={class:"container-1"},Ks={style:{position:"relative"}},Ys={style:{position:"absolute","font-size":"0.5em",right:"-3.5em",bottom:"-1.5em","white-space":"nowrap"}},Qs={style:{color:"#666666"}},Xs=["innerHTML"],Js={style:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","font-size":"xx-small","white-space":"nowrap"}},ei=ke({__name:"droptarget",props:{forbidden:{type:Boolean},dropTarget:{}},emits:["drop"],setup(s,{emit:l}){Ye(qe);const i=s,r=l,o=$a(),a=_(!1),u=_(0),g=_("");Re(()=>{m(i.dropTarget||document)});function m(y){document.ondragstart=b=>b.preventDefault(),document.ondragover=b=>b.preventDefault(),y.ondrop=async b=>{var f;if(b.preventDefault(),a.value||i.forbidden)return;a.value=!0,u.value=0,g.value="";let v;try{const d=[...b.dataTransfer.items].map(z=>z.webkitGetAsEntry());o.start(),v=await p(d),o.finish()}catch{v=[...((f=b.dataTransfer)==null?void 0:f.files)??[]],o.error()}a.value&&(a.value=!1,r("drop",v))}}async function p(y,b){b=b||[];for(const v of y)if(v.isFile){const f=await new Promise(d=>v.file(z=>d(z)));Object.defineProperty(f,"webkitRelativePath",{value:v.fullPath}),b.push(f),u.value++}else if(v.isDirectory){g.value=v.fullPath;const f=v.createReader();do{const d=await new Promise(z=>f.readEntries(I=>z(I)));if(!d.length)break;await p(d,b)}while(!0)}return b}return(y,b)=>{const v=be,f=Qe,d=Ae,z=Ie,I=yn;return P(),le("div",Gs,[n(z,{to:!1,"display-directive":"show",trigger:"hover",duration:0,delay:0,placement:"bottom-end"},{trigger:t(()=>[n(d,{vertical:"",class:"container-2"},{default:t(()=>[n(d,{align:"center",wrap:!1,class:"container-3"},{default:t(()=>[n(d,{vertical:"",align:"center",wrap:!1,style:{"font-weight":"bold","font-size":"1em","line-height":"90%","white-space":"nowrap"}},{default:t(()=>[b[5]||(b[5]=w("span",null,"Drag & Drop",-1)),w("span",Ks,[b[4]||(b[4]=L(" AVIF Images ")),w("span",Ys,[b[3]||(b[3]=L(" or ")),n(f,{placement:"bottom-end"},{trigger:t(()=>[w("span",Qs,[n(v,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Rt))]),_:1}),b[1]||(b[1]=L(" Folders "))])]),default:t(()=>[b[2]||(b[2]=L(" You can drag and drop your local folders "))]),_:1})])])]),_:1}),n(d,null,{default:t(()=>b[6]||(b[6]=[w("img",{src:qs,class:"avif"},null,-1)])),_:1})]),_:1})]),_:1})]),default:t(()=>[w("h3",{innerHTML:y.$t("droptarget"),style:{"max-width":"200px","text-align":"center","word-break":"keep-all","overflow-wrap":"break-word"}},null,8,Xs)]),_:1}),n(I,{show:e(a),"onUpdate:show":b[0]||(b[0]=$=>We(a)?a.value=$:null),closable:!0,preset:"dialog",title:"Parsing dropped items.",type:"info","mask-closable":!1,"negative-text":y.$t("cancel")},{default:t(()=>[n(d,{vertical:"",align:"center"},{default:t(()=>[w("div",Js,c(e(g)),1),w("div",null,"found "+c(e(u))+" files",1)]),_:1})]),_:1},8,["show","negative-text"])])}}}),ti=Be(ei,[["__scopeId","data-v-963c44a5"]]),ni={class:"container-1"},oi={class:"container-2"},ai=["innerHTML"],li=["innerHTML"],si={style:{"white-space":"nowrap"}},ii={style:{"padding-left":"1em"}},ri=["innerHTML"],ui=["accept"],ci=ke({__name:"file-selector",props:at({target:{},userExtensions:{},forbidden:{type:Boolean}},{expanded:{type:Boolean,required:!1},expandedModifiers:{},disableNotifyingFolderSelect:{type:Boolean},disableNotifyingFolderSelectModifiers:{}}),emits:at(["input","click","cancel","on-change-accept","update:target","update:userExtensions"],["update:expanded","update:disableNotifyingFolderSelect"]),setup(s,{emit:l}){const i=ut(),{t:r}=Ze(),o=Ye(qe),a=["avif_only","all_images","all_files","edit_type"],u=[];for(const E of a)u.push({label:()=>r("fileTypeRadioOptions."+E),value:E});const g=({node:E,option:j})=>X(Ie,{placement:"right"},{trigger:()=>E,default:()=>ae(j.value).replace(/,/g,", ")}),m=s,p=l,y=_(0),b=_(!1),v=_(!1),f=Se(()=>ae(I.value)),d=Se(()=>$.value.split(",").every(j=>/^\s*(\.[\w\-]+)*\s*$/.test(j))?"success":"error"),z=Se(()=>!m.forbidden&&!v.value);Fe(s,"expanded");const I=Se({get:()=>a.indexOf(m.target)>=0?m.target:a[0],set:E=>{p("update:target",E)}}),$=Se({get:()=>m.userExtensions,set:E=>{p("update:userExtensions",E)}}),x=Fe(s,"disableNotifyingFolderSelect"),k=_(null),R=_(null),H=_(N());ze(I,E=>{p("on-change-accept",f.value)}),Re(()=>{});async function D(E){if(p("click"),E===R.value&&!x.value){let j=!1;if(await new Promise(oe=>{i.info({title:r("loadfolderNotifyingTitle"),positiveText:r("Continue"),negativeText:r("Cancel"),onAfterLeave:()=>oe(j),onPositiveClick:()=>j=!0,content:()=>X("div",[X("p",{},r("loadfolderNotifyingMessageTerm1")),X("div",[X(fn,{width:250,style:{border:"3px solid gray"},src:"/avif2jpeg/dist//notification-folder.png"})]),X("p",{},r("loadfolderNotifyingMessageTerm2")),X("p",[X(vn,{onUpdateChecked:ce=>x.value=ce,checked:x.value},()=>r("checkboxTextDontShowThis"))])])})}),!j){x.value=!1,p("cancel");return}}E.click()}function h(){p("cancel")}function B(E){const oe=[...E.target.files];k.value.value="",R.value.value="",fe(oe)}function N(){return"webkitdirectory"in document.createElement("input")}function ae(E){switch(E){case"avif_only":return".avif, .webp";case"all_images":return".jpg, .jpeg, .jfif, .pjpeg, .pjp, .gif, .png, .webp, .avif, .bmp, .apng, .ico";case"edit_type":return $.value;case"all_files":default:return".*"}}async function M(E){const j=String(f.value).toLowerCase().replace(/\s+/g,"");if(j&&f.value!==".*"){const oe=j.split(",");E=E.filter(ce=>oe.includes(ce.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),E.length||(await new Promise(ce=>{i.error({title:"Images Not Found",positiveText:"OK",onAfterLeave:ce,content:()=>X("div",[X(Ut,{description:"NO IMAGES"}),`${r("noimage")}`,X("br"),f.value])})}),h())}return E}async function fe(E){v.value=!0,E=await M(E),y.value=E.length,E.length>0&&p("input",we(E)),v.value=!1}let Oe=0;function we(E){const j=[];for(const oe of E)oe.hasOwnProperty("_id")||Object.defineProperty(oe,"_id",{value:Oe++}),j.push(oe);return j}return(E,j)=>{const oe=be,ce=Pe,de=Ae,ge=At,J=Fa,G=Ea,he=Qe;return P(),le(De,null,[w("div",ni,[w("div",oi,[n(de,{vertical:"",align:"center",justify:"center",inline:"",size:"large"},{default:t(()=>[n(de,{align:"center",justify:"space-around",class:"main-buttons"},{default:t(()=>[n(de,{vertical:"",align:"stretch",justify:"center"},{default:t(()=>[n(e(Ie),{to:!1,"display-directive":"show",show:e(o).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(o).LANDSCAPE.value?"right":"top",duration:0,delay:0,"z-index":10},{trigger:t(()=>[n(ce,{disabled:!e(z),size:"large",onClick:j[0]||(j[0]=O=>D(e(k))),round:"",style:{width:"100%","background-color":"white","font-size":"1.5em"}},{icon:t(()=>[n(oe,{size:"large",color:"gray"},{default:t(()=>[n(e(bn))]),_:1})]),default:t(()=>[L(" "+c(E.$t("loadbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[w("div",{innerHTML:E.$t("loadbuttontooltip")},null,8,ai)]),_:1},8,["show","placement"]),!e(o).IS_SP&&e(H)||e(o).SSR?(P(),le(De,{key:0},[n(de,{align:"center",justify:"center",style:{color:"gray",margin:"0em"}},{default:t(()=>[L(c(E.$t("or")),1)]),_:1}),n(e(Ie),{to:!1,"display-directive":"show",trigger:"hover",placement:"left","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:e(o).showTooltipsBeforeMounted.value},{trigger:t(()=>[n(ce,{disabled:!e(z),size:"large",onClick:j[1]||(j[1]=O=>D(e(R))),round:"",style:{width:"100%","background-color":"white","font-size":"1.5em"}},{icon:t(()=>[n(oe,{size:"large",color:"gray"},{default:t(()=>[n(e(Rt))]),_:1})]),default:t(()=>[L(" "+c(E.$t("loadfolderbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[w("div",{innerHTML:E.$t("loadfoldertooltip")},null,8,li)]),_:1},8,["show"])],64)):ve("",!0)]),_:1}),e(o).IS_SP?ve("",!0):(P(),ne(ti,{key:0,onDrop:fe,forbidden:!e(z),class:"drop-target"},null,8,["forbidden"]))]),_:1}),n(de,{vertical:""},{default:t(()=>[n(de,{wrap:e(o).IS_SP,align:"center",justify:"stretch"},{default:t(()=>[w("span",si,c(E.$t("TargetFileTypeExt"))+": ",1),n(e(Ie),{"keep-alive-on-hover":!1,placement:"right",style:{"max-width":"200px"},duration:0,delay:0},{trigger:t(()=>[n(ge,{trigger:"click",width:"trigger",size:"small",value:e(I),"onUpdate:value":j[2]||(j[2]=O=>We(I)?I.value=O:null),options:u,"render-option":g,"consistent-menu-width":!1},null,8,["value"])]),default:t(()=>[L(" "+c(ae(e(I)).replace(/,/g,", ")),1)]),_:1})]),_:1},8,["wrap"]),e(I)==="edit_type"?(P(),ne(e(Ie),{key:0,trigger:"hover","keep-alive-on-hover":!1,placement:"bottom-start",show:e(b),duration:0,delay:0},{trigger:t(()=>[w("div",ii,[n(he,{trigger:"manual",placement:"right-end",show:e(I)==="edit_type"&&e(d)!=="success"&&!!e(b)},{trigger:t(()=>[n(J,{value:e($),"onUpdate:value":j[3]||(j[3]=O=>We($)?$.value=O:null),status:e(d),disabled:e(I)!=="edit_type",onFocus:j[4]||(j[4]=O=>b.value=!0),onBlur:j[5]||(j[5]=O=>b.value=void 0),clearable:!0,size:"small",placeholder:".jpg, .gif, .png",spellcheck:"false"},null,8,["value","status","disabled"])]),default:t(()=>[n(G,{type:"error","show-icon":!0,title:"Validation error"},{default:t(()=>j[6]||(j[6]=[L(" Please correct the extension list."),w("br",null,null,-1),w("ul",null,[w("li",null,"Each extension must begin with a period. "),w("li",null,"Separate each extension with a comma. "),w("li",null,"Use alphameric characters.")],-1)])),_:1})]),_:1},8,["show"])])]),default:t(()=>[w("span",{innerHTML:E.$t("editAcceptTypes")},null,8,ri)]),_:1},8,["show"])):ve("",!0)]),_:1})]),_:1})])]),w("input",{ref_key:"fileinput",ref:k,onInput:B,onCancel:h,type:"file",multiple:"",accept:e(f),style:{display:"none"}},null,40,ui),w("input",{ref_key:"folderinput",ref:R,webkitdirectory:"",directory:"",onInput:B,onCancel:h,type:"file",style:{display:"none"}},null,544)],64)}}}),di=Be(ci,[["__scopeId","data-v-e613e1ac"]]),pi={style:{"white-space":"nowrap"}},fi=ke({__name:"settings-output",props:{quality:{},format:{}},emits:["update:format","update:quality"],setup(s,{emit:l}){const i=s,r=l,{t:o}=Ze(),a=Ye(qe),u=_([]),g=["image/jpeg","image/png","image/gif","image/bmp","image/avif","image/webp"],m=Se({get:()=>i.format,set:d=>{d=v(d),r("update:format",d)}}),p=Se({get:()=>i.quality,set:d=>{r("update:quality",d)}}),y=Se(()=>/png|bmp/i.test(m.value)),b=_(null);Re(()=>{f()});function v(d){return u.value.indexOf(d)<0&&(d=u.value[0]),d}function f(){for(const d of g)b.value.toDataURL(d).indexOf(d)>=0&&u.value.push(d);u.value.length===0&&u.value.push(g[0])}return(d,z)=>{const I=be,$=At,x=Ae,k=Ie,R=St,H=zn;return P(),le(De,null,[n(x,{justify:"center",class:"body"},{default:t(()=>[n(x,{vertical:""},{default:t(()=>[n(k,{to:!1,"display-directive":"show",show:e(a).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(a).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(x,{align:"center",wrap:!1},{default:t(()=>[n(I,null,{default:t(()=>[n(e(bn))]),_:1}),L(c(e(o)("settings.imageType"))+": ",1),n($,{value:m.value,"onUpdate:value":z[0]||(z[0]=D=>m.value=D),options:u.value.map(D=>({value:D,label:D})),"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),_:1})]),default:t(()=>[L(" "+c(e(o)("settings.imageTypeTooltip")),1)]),_:1},8,["show","placement"]),n(k,{to:!1,"display-directive":"show",show:e(a).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(a).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(x,{align:"center"},{default:t(()=>[n(x,{align:"start",wrap:!1},{default:t(()=>[n(I,null,{default:t(()=>[n(e(_n))]),_:1}),w("span",pi,c(e(o)("settings.quality"))+":",1),n(x,{align:"center",justify:"space-between"},{default:t(()=>[n(R,{tooltip:!1,value:p.value,"onUpdate:value":z[1]||(z[1]=D=>p.value=D),step:1,style:{width:"120px"},disabled:y.value},null,8,["value","disabled"]),n(H,{onBlur:z[2]||(z[2]=D=>p.value??(p.value=0)),value:p.value,"onUpdate:value":z[3]||(z[3]=D=>p.value=D),step:"1",min:"0",max:"100",disabled:y.value,style:{width:"90px"},size:"small"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:t(()=>[L(" "+c(e(o)("settings.qualitytooltip")),1)]),_:1},8,["show","placement"])]),_:1})]),_:1}),w("canvas",{ref_key:"canvas",ref:b,width:"1",height:"1",style:{display:"none"}},null,512)],64)}}}),gi=Be(fi,[["__scopeId","data-v-060333f5"]]),mi={style:{width:"4em","text-align":"left"}},vi={style:{width:"4em","text-align":"left"}},Et=100,on=2e3,an=4096,ln=4096,hi=100,_i=100,wi=ke({__name:"settings-adv",props:{expanded:{type:Boolean,required:!1},expandedModifiers:{},multithread:{type:Boolean,required:!0},multithreadModifiers:{},threadCount:{required:!0},threadCountModifiers:{},maxZipSize:{required:!0},maxZipSizeModifiers:{},retainExt:{type:Boolean,required:!0},retainExtModifiers:{},useFolderNameForZip:{type:Boolean,required:!0},useFolderNameForZipModifiers:{},shrinkImage:{type:Boolean,required:!0},shrinkImageModifiers:{},maxWidth:{required:!0},maxWidthModifiers:{},maxHeight:{required:!0},maxHeightModifiers:{}},emits:["update:expanded","update:multithread","update:threadCount","update:maxZipSize","update:retainExt","update:useFolderNameForZip","update:shrinkImage","update:maxWidth","update:maxHeight"],setup(s){const l=Ye(qe),i={trigger:"hover",placement:"left",keepAliveOnHover:!1,duration:0,delay:0,style:"max-width: 20vw;"},r=Fe(s,"expanded"),o=Fe(s,"multithread"),a=Fe(s,"threadCount"),u=Fe(s,"maxZipSize"),g=Fe(s,"retainExt"),m=Fe(s,"useFolderNameForZip"),p=Fe(s,"shrinkImage"),y=Fe(s,"maxWidth"),b=Fe(s,"maxHeight");ze(Ue,f=>{f>1||(o.value=!1),a.value>f&&(a.value=f)},{immediate:!0});const v=Se(()=>o.value&&Ue.value>1);return Re(()=>{Ue.value>1&&typeof a.value>"u"&&(a.value=Math.max(Ue.value,2))}),(f,d)=>{const z=be,I=Pe,$=Ua,x=Ae,k=St,R=zn,H=ct,D=wn;return P(),ne(x,{justify:"center"},{default:t(()=>[n(D,{"display-directive":"show","default-expanded-names":r.value?["collapitem"]:"","on-update:expanded-names":h=>r.value=!!String(h),"trigger-areas":["arrow","main"],class:ot(["settings-body",r.value?"expand-adv-settings":""])},Pa({arrow:t(()=>[n(z,{style:ue(r.value&&{top:"8px"})},{default:t(()=>[n(e(Da))]),_:1},8,["style"]),n(z,null,{default:t(()=>[n(e(Na))]),_:1})]),default:t(()=>[n(H,{title:f.$t("settings.advancedSettings"),name:"collapitem"},{default:t(()=>[n(x,{vertical:"",style:{"padding-left":"2em"}},{default:t(()=>[n(e(Ie),lt(st(i)),{trigger:t(()=>[n(x,{vertical:""},{default:t(()=>[n(x,{wrap:!1,align:"center"},{default:t(()=>[n(I,{text:"",disabled:!e(Ue),style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:d[1]||(d[1]=h=>o.value=!o.value)},{icon:t(()=>[n(z,null,{default:t(()=>[n(e(Oa))]),_:1})]),default:t(()=>[L(" "+c(f.$t("settings.enableMultiThreads")),1)]),_:1},8,["disabled"]),n($,{value:o.value,"onUpdate:value":d[2]||(d[2]=h=>o.value=h),disabled:!e(Ue),size:"small"},null,8,["value","disabled"])]),_:1}),n(x,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(k,{value:a.value,"onUpdate:value":d[3]||(d[3]=h=>a.value=h),disabled:!e(Ue)||!o.value,step:1,min:2,max:e(Ue),style:{width:"120px"}},null,8,["value","disabled","max"]),n(R,{onBlur:d[4]||(d[4]=h=>a.value??(a.value=2)),size:"tiny",value:a.value,"onUpdate:value":d[5]||(d[5]=h=>a.value=h),disabled:!e(Ue)||!o.value,step:1,min:2,max:e(Ue),style:{width:"10em"}},{suffix:t(()=>[L(c(f.$t("threads",a.value)),1)]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[L(" "+c(f.$t("settings.multiThreadsTooltip")),1)]),_:1},16),n(e(Ie),lt(st(i)),{trigger:t(()=>[n(x,{vertical:""},{default:t(()=>[n(x,{wrap:!1,align:"center"},{default:t(()=>[n(I,{text:"",focusable:!1,style:{"white-space":"nowrap","font-size":"smaller"}},{icon:t(()=>[n(z,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Ma))]),_:1})]),default:t(()=>[L(" "+c(f.$t("settings.maxZipFileSize"))+": ",1)]),_:1})]),_:1}),n(x,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(k,{tooltip:!1,value:u.value,"onUpdate:value":d[6]||(d[6]=h=>u.value=h),step:1,min:Et,max:on,style:{width:"120px"}},null,8,["value"]),n(R,{onBlur:d[7]||(d[7]=h=>u.value??(u.value=Et)),size:"tiny",value:u.value,"onUpdate:value":d[8]||(d[8]=h=>u.value=h),step:"1",min:Et,max:on,style:{width:"10em"}},{suffix:t(()=>d[21]||(d[21]=[L("(MB)")])),_:1},8,["value"])]),_:1})]),_:1})]),default:t(()=>[L(" "+c(f.$t("settings.maxZipFileSizeTooltip")),1)]),_:1},16),n(e(Ie),lt(st(i)),{trigger:t(()=>[n(x,{wrap:!1,align:"center"},{default:t(()=>[n(I,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:d[9]||(d[9]=h=>m.value=!m.value)},{icon:t(()=>[n(z,null,{default:t(()=>[n(e(Rt))]),_:1})]),default:t(()=>[L(" "+c(f.$t("settings.useFolderNameForZip")),1)]),_:1}),n($,{value:m.value,"onUpdate:value":d[10]||(d[10]=h=>m.value=h),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[L(" "+c(f.$t("settings.useFolderNameForZipTooltip")),1)]),_:1},16),n(e(Ie),lt(st(i)),{trigger:t(()=>[n(x,{wrap:!1,align:"center"},{default:t(()=>[n(I,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:d[11]||(d[11]=h=>g.value=!g.value)},{icon:t(()=>[n(z,null,{default:t(()=>[n(e(hn))]),_:1})]),default:t(()=>[L(" "+c(f.$t("settings.retainOriginalExtension")),1)]),_:1}),n($,{value:g.value,"onUpdate:value":d[12]||(d[12]=h=>g.value=h),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[L(" "+c(f.$t("settings.retainExtTooltip")),1)]),_:1},16),n(e(Ie),lt(st(i)),{trigger:t(()=>[n(x,{vertical:""},{default:t(()=>[n(x,{wrap:!1,align:"center"},{default:t(()=>[n(I,{disabled:!v.value,text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:d[13]||(d[13]=h=>p.value=!p.value)},{icon:t(()=>[n(z,null,{default:t(()=>[n(e(Ra))]),_:1})]),default:t(()=>[L(" "+c(f.$t("settings.shrinkImage")),1)]),_:1},8,["disabled"]),n($,{disabled:!v.value,value:p.value,"onUpdate:value":d[14]||(d[14]=h=>p.value=h),size:"small"},null,8,["disabled","value"])]),_:1}),n(x,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(k,{value:y.value,"onUpdate:value":d[15]||(d[15]=h=>y.value=h),disabled:!p.value||!v.value,step:1,min:hi,max:an,style:{width:"120px"}},null,8,["value","disabled"]),n(R,{size:"tiny",onBlur:d[16]||(d[16]=h=>y.value??(y.value=8)),value:y.value,"onUpdate:value":d[17]||(d[17]=h=>y.value=h),disabled:!p.value||!v.value,step:1,min:8,max:an*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[w("span",mi,c(f.$t("width")),1)]),suffix:t(()=>d[22]||(d[22]=[L("px")])),_:1},8,["value","disabled","max"])]),_:1}),n(x,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(k,{value:b.value,"onUpdate:value":d[18]||(d[18]=h=>b.value=h),disabled:!p.value||!v.value,step:1,min:_i,max:ln,style:{width:"120px"}},null,8,["value","disabled"]),n(R,{size:"tiny",onBlur:d[19]||(d[19]=h=>b.value??(b.value=8)),value:b.value,"onUpdate:value":d[20]||(d[20]=h=>b.value=h),disabled:!p.value||!v.value,step:1,min:8,max:ln*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[w("span",vi,c(f.$t("height")),1)]),suffix:t(()=>d[23]||(d[23]=[L("px")])),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[L(" "+c(f.$t("settings.shrinkImageTooltip")),1)]),_:1},16)]),_:1})]),_:1},8,["title"])]),_:2},[r.value?{name:"header-extra",fn:t(()=>[n(e(Ie),{"keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(I,{onClick:e(el),size:"tiny",style:{"font-size":"xx-small"}},{default:t(()=>[L(c(f.$t("reset")),1)]),_:1},8,["onClick"])]),default:t(()=>[L(" "+c(f.$t("settings.resetButtonTooltip")),1)]),_:1}),e(l).IS_DEV?(P(),le("button",{key:0,onClick:d[0]||(d[0]=h=>e(tl)())},"delcfg")):ve("",!0)]),key:"0"}:void 0]),1032,["default-expanded-names","on-update:expanded-names","class"])]),_:1})}}}),yi=Be(wi,[["__scopeId","data-v-31f045db"]]),bi={},zi={style:{color:"gray","padding-left":"20px"}},ki=["innerHTML"];function xi(s,l){const i=dn,r=Ae;return P(),ne(r,{vertical:"",justify:"end"},{default:t(()=>[n(i,{style:{margin:"0px"}}),n(r,{justify:"center"},{default:t(()=>[w("ul",zi,[(P(!0),le(De,null,ht(s.$tm("descriptions"),o=>(P(),le("li",{key:o,style:{"text-align":"left"},innerHTML:o},null,8,ki))),128))])]),_:1})]),_:1})}const Ti=Be(bi,[["render",xi]]),Ii="modulepreload",Si=function(s){return"/avif2jpeg/dist/"+s},sn={},xe=function(l,i,r){let o=Promise.resolve();if(i&&i.length>0){let u=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),m=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));o=u(i.map(p=>{if(p=Si(p),p in sn)return;sn[p]=!0;const y=p.endsWith(".css"),b=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${b}`))return;const v=document.createElement("link");if(v.rel=y?"stylesheet":Ii,y||(v.as="script"),v.crossOrigin="",v.href=p,m&&v.setAttribute("nonce",m),document.head.appendChild(v),y)return new Promise((f,d)=>{v.addEventListener("load",f),v.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(u){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=u,window.dispatchEvent(g),!g.defaultPrevented)throw u}return o.then(u=>{for(const g of u||[])g.status==="rejected"&&a(g.reason);return l().catch(a)})},Fn="English",Pn="🇬🇧",On='AVIF to JPEG "Offline" Batch Converter',Un="It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",Mn="Drag & Drop AVIF Images to Convert",Rn=["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data is sent to any server</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.'],Dn="Select your language",Nn="Choose Target File Extentions",Bn={avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types",edit_type:"Edit File Extension List"},jn="Input a list of comma separated file extentions to load.<br>e.g.) .jpg,.gif,.png",Zn="Load Images",Hn="Select your images from a dialog window.<br>*Multiple selection allowed.",Vn="Load a Whole Folder",Wn=`Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>*It will show "Upload" button, but it actually doesn't upload anything to any server.`,qn="Converting images",Gn="Aborted",Kn="Some files failed to convert",Yn="Completed",Qn="Currently Busy",Xn="No files with the extentions were found.",Jn="Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",eo="Cancel",to="Save",no="Close",oo="Open",ao="Re-convert",lo="Convert previous selected {n} @:files again",so="File | Files",io="thread | threads",ro="You have not saved the converted images yet.",uo="Data have not been saved",co="Open Source",po="Open the converted image",fo="Copied to clipboard",go="The converted image was copied to your clipboard as DataURL.",mo="Copy the converted image as DataURL",vo="Convert Again",ho={expandLogTooltip:"Displaying the entire log may severely reduce conversion speed.",showOnlyErrors:"Show only errors",outInRate:"Out / In Ratio",elapsedTime:"Elapsed Time",multiThreading:"Multi-Threading",outputSettings:"Output Settings",totalSize:"Total Size",totalFiles:"Number of Files",confirmDownloadMessage:"It will start to download {0} zip files.",inputSize:"Input Size",outputSize:"Output Size",filterSuccess:"Hide completed item",progressErrors:"Failed items",progressStarted:"Started Items",progressTotal:"Total number of files",zippingProgress:"Zipping progress",zipped:"ZIPPED",openFailedList:"Open failed file list",zipFailedList:"Pack failed files into Zips",table:{index:"index",status:"status",core:"thread",details:"file"},saveFailedList:"Save failed file list",done:"done",convertedZips:"successfully completed ZIP",progressSuccess:"Completed Files",downloadConvertedImage:"Download Converted Image",failureZippingFailedFiles:"Failure while zipping the failed files.",browseConvertedImages:"Browse converted images",index:"Index",Original:"Original",Converted:"Converted",saveAllZipsTooltip:"Save all ZIP files",Shrinked:"Shrinked",Shrinking:"Shrinking",saveAll:"Save All",progressRetries:"Retrying files",success:"success",started:"started",total:"total",files:"files",failure:"failure",all:"all",filterLogSelect:"filter",showOnlySuccess:"Only successes",showOnlyError:"Only errors",showAll:"Show all",Progress:"Progress",PreviewImage:"Preview Images",Log:"Log",log:"Log",Output:"Output Results",expandLog:"expand log size",autoScroll:"auto-scroll",sortByStatus:"status",sort:"Sort list by",sortByName:"name",sortBySize:"size",sortByOutputSize:"size(output)",sortByStart:"starting order",sortByCompletion:"output order"},_o={maxZipFileSize:"Max zip file size",retainExtTooltip:"New extension will be appended to original extension",retainOriginalExtension:"Keep Original File Extension",qualitytooltip:"Set image quality for output",quality:"Image Quality",maxZipFileSizeTooltip:"Set smaller value if memory problems occur.",ignoreExtTooltip:'Try to load files that don"t have image file extension',ignoreFileExtensions:"Load All File Types",imageTypeTooltip:"Choose image format for output",imageType:"Image Type",advancedSettings:"Advanced Settings",enableMultiThreads:"Enable multi-threading",resetButtonTooltip:"Restore all settings to default.",multiThreadsTooltip:"Convert images in multi-threaded",shrinkImageTooltip:"If the image dimensions are larger than the specified value, shrink the image to that value",shrinkImage:"Shrink images that exceed the following dimensions",useFolderNameForZip:"Use dropped folder name for the zip file",useFolderNameForZipTooltip:"If a folder is dropped or selected, its name is used as the name of the output ZIP file"},wo="Disabled",yo="Download",bo="Reset",zo="Back",ko="Failed",xo="Success",To="Previous version",Io=`
Height`,So="Width",Ao="Don't show this message again",Lo="About the warning when selecting a folder",Co="OK",$o={},Eo="You must press the “Upload” button here to load all the images in the folder, but the data loaded by this application is never actually uploaded to the server.",Fo="Continue",Po="Cancel",Oo="When you select a folder instead of a file as input on a website, major web browsers will display a warning like the image below.",Uo="This page may be an outdated version. Please reload the page.",Mo="Reload",Ro='If the conversion process frequently fails and an “Out of Memory” message appears, try reducing or disabling the number of "multi-threads" in the "Advanced Settings".',Do="Next",No="Previous",Bo="or",jo="Target File Extensions",Zo="Changelog",Ho={lang:Fn,flags:Pn,title:On,metaDescription:Un,droptarget:Mn,descriptions:Rn,selectLanguage:Dn,fileTypeRadioTitle:Nn,fileTypeRadioOptions:Bn,editAcceptTypes:jn,loadbutton:Zn,loadbuttontooltip:Hn,loadfolderbutton:Vn,loadfoldertooltip:Wn,processing:qn,aborted:Gn,incomplete:Kn,completed:Yn,interfered:Qn,noimage:Xn,avifUnsupported:Jn,cancel:eo,save:to,close:no,open:oo,reconvert:ao,reconvertTip:lo,files:so,threads:io,confirmCloseDialog:ro,confirmCloseDialogTitle:uo,githubOpenSource:co,convertedImageUrlTooltip:po,copiedDataURLDialogTitle:fo,copiedDataURLMessage:go,convertedImageDataUrlTooltip:mo,convertAgain:vo,status:ho,settings:_o,disabled:wo,Download:yo,reset:bo,back:zo,failed:ko,success:xo,previousVersion:To,height:Io,width:So,checkboxTextDontShowThis:Ao,loadfolderNotifyingTitle:Lo,OK:Co,loadfolderNotifyingMessage:$o,loadfolderNotifyingMessageTerm2:Eo,Continue:Fo,Cancel:Po,loadfolderNotifyingMessageTerm1:Oo,errMsgWorkerLoadError:Uo,Reload:Mo,annotationOutOfMemory:Ro,Next:Do,Prev:No,or:Bo,TargetFileTypeExt:jo,changelog:Zo},Ai=Object.freeze(Object.defineProperty({__proto__:null,Cancel:Po,Continue:Fo,Download:yo,Next:Do,OK:Co,Prev:No,Reload:Mo,TargetFileTypeExt:jo,aborted:Gn,annotationOutOfMemory:Ro,avifUnsupported:Jn,back:zo,cancel:eo,changelog:Zo,checkboxTextDontShowThis:Ao,close:no,completed:Yn,confirmCloseDialog:ro,confirmCloseDialogTitle:uo,convertAgain:vo,convertedImageDataUrlTooltip:mo,convertedImageUrlTooltip:po,copiedDataURLDialogTitle:fo,copiedDataURLMessage:go,default:Ho,descriptions:Rn,disabled:wo,droptarget:Mn,editAcceptTypes:jn,errMsgWorkerLoadError:Uo,failed:ko,fileTypeRadioOptions:Bn,fileTypeRadioTitle:Nn,files:so,flags:Pn,githubOpenSource:co,height:Io,incomplete:Kn,interfered:Qn,lang:Fn,loadbutton:Zn,loadbuttontooltip:Hn,loadfolderNotifyingMessage:$o,loadfolderNotifyingMessageTerm1:Oo,loadfolderNotifyingMessageTerm2:Eo,loadfolderNotifyingTitle:Lo,loadfolderbutton:Vn,loadfoldertooltip:Wn,metaDescription:Un,noimage:Xn,open:oo,or:Bo,previousVersion:To,processing:qn,reconvert:ao,reconvertTip:lo,reset:bo,save:to,selectLanguage:Dn,settings:_o,status:ho,success:xo,threads:io,title:On,width:So},Symbol.toStringTag,{value:"Module"})),Li="Arabic",Ci="German",$i="English",Ei="Spanish",Fi="Finnish",Pi="French",Oi="Hindi",Ui="Indonesian",Mi="Italian",Ri="Japanese",Di="Korean",Ni="Dutch",Bi="Polish",ji="Portuguese",Zi="Russian",Hi="Turkish",Vi="Ukrainian",Wi="Chinese",qi={ar:Li,de:Ci,en:$i,es:Ei,fi:Fi,fr:Pi,hi:Oi,id:Ui,it:Mi,ja:Ri,ko:Di,nl:Ni,pl:Bi,pt:ji,ru:Zi,tr:Hi,uk:Vi,"zh-hant":"Chinese(hant)",zh:Wi},zt=[],Vo={en:Ho},Bt={},rn=Object.assign({"./locales/ar.json":()=>xe(()=>import("./ar-Bs-dVZYB.js"),[]),"./locales/de.json":()=>xe(()=>import("./de-BQPc6VLI.js"),[]),"./locales/en.json":()=>xe(()=>Promise.resolve().then(()=>Ai),void 0),"./locales/es.json":()=>xe(()=>import("./es-CqBg_y9a.js"),[]),"./locales/fi.json":()=>xe(()=>import("./fi-Ds7g1iCb.js"),[]),"./locales/fr.json":()=>xe(()=>import("./fr-D8EtgegO.js"),[]),"./locales/hi.json":()=>xe(()=>import("./hi-Ezqk50Rr.js"),[]),"./locales/id.json":()=>xe(()=>import("./id-BsMMe9nO.js"),[]),"./locales/it.json":()=>xe(()=>import("./it-BdKCrqWM.js"),[]),"./locales/ja.json":()=>xe(()=>import("./ja-C5lmyrcu.js"),[]),"./locales/ko.json":()=>xe(()=>import("./ko-CNwBvC5L.js"),[]),"./locales/nl.json":()=>xe(()=>import("./nl-C-Lgg7BA.js"),[]),"./locales/pl.json":()=>xe(()=>import("./pl-OSkpSBPS.js"),[]),"./locales/pt.json":()=>xe(()=>import("./pt-BO4nYfyj.js"),[]),"./locales/ru.json":()=>xe(()=>import("./ru-DEYnX-lF.js"),[]),"./locales/tr.json":()=>xe(()=>import("./tr-XAfWKbVj.js"),[]),"./locales/uk.json":()=>xe(()=>import("./uk-f9rkog-K.js"),[]),"./locales/zh-hant.json":()=>xe(()=>import("./zh-hant-eBVV34fF.js"),[]),"./locales/zh.json":()=>xe(()=>import("./zh-k4YjZC5w.js"),[])});var un;for(const s in rn){const l=(un=s.match(/\/([a-z]{2}(?:-[a-z]+)?)\.json$/i))==null?void 0:un[1];l&&(zt.push(l),!(l in Vo)&&(Bt[l]=rn[s]))}let Ot=Ki();Ot in Bt||(Ot="en");const kt=Ba({legacy:!1,globalInjection:!0,locale:Ot,fallbackLocale:"en",messages:Vo,warnHtmlMessage:!1,missingWarn:!1,fallbackWarn:!1});async function Gi(s){if(kt.global.availableLocales.indexOf(s)>=0)return;const l=await Bt[s]();kt.global.setLocaleMessage(s,l),await Le()}function Ki(){const s=location.pathname;return String(s.match(/[^/]+(?=\/?$)/)||"").toLowerCase()}const Yi=["innerHTML"],Qi=ke({__name:"switch-lang",props:{delay:{}},emits:["lang-ready","lang-change"],async setup(s,{emit:l}){let i,r;const o=Ye(qe),a=pn(),{locale:u,t:g}=Ze(),m=s,p=l,y=Object.entries(qi).map(([I,$])=>({label:$,value:I}));y.sort((I,$)=>{const x=I.label,k=$.label;return x>k?1:x<k?-1:0}),Re(()=>{a.afterEach((I,$,x)=>{v(),o.switchToolTipVisibility()})}),[i,r]=ja(()=>v()),await i,r();async function b(I){(I!==u.value||kt.global.availableLocales.indexOf(I)===-1)&&(p("lang-change",I),await Ol(m.delay),await Gi(I),u.value=I,document.title=g("title"),await Le()),p("lang-ready",I)}async function v(){const I=a.currentRoute.value.path||"",$=String(I.match(new RegExp("(?<=^\\/)[^/]+"))||"");$&&zt.includes($)?(await b($),u.value=$):await f()}async function f(){const I=d().toLowerCase(),$=I.split(/[-_]/)[0];if(zt.includes($)){let x=$;if($==="zh")switch(I){case"zh-hant":case"zh-mo":case"zh-hk":case"zh-tw":x="zh-hant"}await b(x)}}function d(){const I=window.navigator;return I.language||I.userLanguage||I.browserLanguage}function z(I){console.log(`changeRoute: ${a.currentRoute.value.fullPath} => ${I}`),a.push("/"+I+"/")}return(I,$)=>{const x=be,k=At,R=Ie;return P(),ne(R,{to:!1,"display-directive":"show",show:e(o).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(o).LANDSCAPE.value?"left":"bottom",duration:0,delay:50},{trigger:t(()=>[n(k,{ref:"langselect",size:"tiny",style:{width:"auto"},"consistent-menu-width":!1,options:e(y),"_v-model:value":"locale",value:e(u),"onUpdate:value":z},{arrow:t(()=>[n(x,null,{default:t(()=>[n(e(Za))]),_:1})]),_:1},8,["options","value"])]),default:t(()=>[w("div",{innerHTML:I.$t("selectLanguage")},null,8,Yi)]),_:1},8,["show","placement"])}}}),qe=Symbol("global variables"),Xi=ke({__name:"Avif2Jpeg",emits:["ready"],setup(s,{emit:l}){const{t:i,locale:r}=Ze(),o=200,a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),u=!1,g=_(null);_(0);let m=_(void 0);const p=_(!0),y=_(!1),b=_(!1),v=_(!1),f=_(!0),d=_(!1);Wa(qe,{showTooltipsBeforeMounted:m,LANDSCAPE:p,IS_SP:a,IS_DEV:u,switchToolTipVisibility:x,SSR:!1}),Re(()=>{k(),window.addEventListener("resize",k),x(),setTimeout(()=>b.value=!0,3e3)}),vt(()=>{window.removeEventListener("resize",k)});let z=0;function I(){v.value=!1,z=Date.now()}function $(){const D=f.value?0:Math.max(0,o-(Date.now()-z));f.value=!1,Le(()=>{setTimeout(()=>v.value=!0,D)})}async function x(){}function k(){const D=document.body.clientWidth,h=document.body.clientHeight;p.value=D*.75>h||D>900}function R(D){g.value=D}function H(D){d.value=D}return(D,h)=>{const B=Ae,N=be,ae=Qe;return P(),ne(B,{vertical:"",align:"stretch",class:"avif2jpeg"},{default:t(()=>[n(fl,null,{"lang-switch":t(()=>[(P(),ne(Ha,null,{default:t(()=>[n(Qi,{onLangChange:I,onLangReady:$,delay:e(f)?0:o},null,8,["delay"])]),_:1}))]),_:1}),n(Xe,{name:"fade"},{default:t(()=>[He(n(B,{vertical:"",align:"stretch",justify:"space-between",style:{height:"100%"}},{default:t(()=>[n(B,{justify:"space-around",vertical:"",style:{height:"100%"}},{default:t(()=>[n(ml),n(B,{justify:"center"},{default:t(()=>[n(di,{"_v-model_expanded":"UserSettings.expandExtButtons",target:e(Z).acceptTypeValue,"onUpdate:target":h[0]||(h[0]=M=>e(Z).acceptTypeValue=M),userExtensions:e(Z).editedAcceptTypes,"onUpdate:userExtensions":h[1]||(h[1]=M=>e(Z).editedAcceptTypes=M),"disable-notifying-folder-select":e(Z).disableNotifyingFolderSelect,"onUpdate:disableNotifyingFolderSelect":h[2]||(h[2]=M=>e(Z).disableNotifyingFolderSelect=M),forbidden:e(y),onInput:R,onClick:h[3]||(h[3]=M=>H(!0)),onCancel:h[4]||(h[4]=M=>H(!1))},null,8,["target","userExtensions","disable-notifying-folder-select","forbidden"])]),_:1}),n(Ws,{input:e(g),format:e(Z).imageFormat,quality:e(Z).imageQuality,"retain-extension":e(Z).retainExtension,maxZipSizeMB:e(Z).maxZipSizeMB,threads:e(Z).multithread?e(Z).threadCount:0,"show-note":e(d),"onUpdate:showNote":h[5]||(h[5]=M=>We(d)?d.value=M:null),onStart:h[6]||(h[6]=M=>y.value=!0),onEnd:h[7]||(h[7]=M=>y.value=!1)},{"lang-switch":t(()=>h[18]||(h[18]=[])),_:1},8,["input","format","quality","retain-extension","maxZipSizeMB","threads","show-note"]),n(B,{vertical:"",align:"center"},{default:t(()=>[n(ae,{trigger:"manual",placement:"top","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(N,{size:"5vh",color:"#DADADA",style:{margin:"0px"}},{default:t(()=>[n(e(Va))]),_:1})]),default:t(()=>[h[19]||(h[19]=w("span",null,"CONVERT TO👇",-1))]),_:1})]),_:1}),n(B,{vertical:"",align:"center"},{default:t(()=>[n(gi,{format:e(Z).imageFormat,"onUpdate:format":h[8]||(h[8]=M=>e(Z).imageFormat=M),quality:e(Z).imageQuality,"onUpdate:quality":h[9]||(h[9]=M=>e(Z).imageQuality=M)},null,8,["format","quality"]),n(yi,{"retain-ext":e(Z).retainExtension,"onUpdate:retainExt":h[10]||(h[10]=M=>e(Z).retainExtension=M),"use-folder-name-for-zip":e(Z).useFolderNameForZip,"onUpdate:useFolderNameForZip":h[11]||(h[11]=M=>e(Z).useFolderNameForZip=M),"max-zip-size":e(Z).maxZipSizeMB,"onUpdate:maxZipSize":h[12]||(h[12]=M=>e(Z).maxZipSizeMB=M),"_v-model:expanded":"UserSettings.expandAdvSettings",multithread:e(Z).multithread,"onUpdate:multithread":h[13]||(h[13]=M=>e(Z).multithread=M),"thread-count":e(Z).threadCount,"onUpdate:threadCount":h[14]||(h[14]=M=>e(Z).threadCount=M),"_:thread-max":"availableThreadCount","shrink-image":e(Z).shrinkImage,"onUpdate:shrinkImage":h[15]||(h[15]=M=>e(Z).shrinkImage=M),"max-width":e(Z).maxWidth,"onUpdate:maxWidth":h[16]||(h[16]=M=>e(Z).maxWidth=M),"max-height":e(Z).maxHeight,"onUpdate:maxHeight":h[17]||(h[17]=M=>e(Z).maxHeight=M)},null,8,["retain-ext","use-folder-name-for-zip","max-zip-size","multithread","thread-count","shrink-image","max-width","max-height"])]),_:1}),n(Ti)]),_:1})]),_:1},512),[[Ve,e(v)]])]),_:1})]),_:1})}}}),jt=ke({__name:"App",setup(s){const l={Statistic:{valueFontSize:"1em"},Popover:{borderRadius:"0.4em",boxShadow:"2px 2px 5px 0px #555555"},Tooltip:{},Image:{toolbarColor:"#00000099"}},i=_(!0);return Re(()=>{i.value=!1}),(r,o)=>{const a=Ya,u=Ka,g=Ga,m=qa,p=Qa;return P(),ne(p,{"theme-overrides":l,style:{width:"100%",height:"100%"}},{default:t(()=>[n(m,null,{default:t(()=>[n(g,{placement:"top-left",closable:!0,max:50},{default:t(()=>[n(u,null,{default:t(()=>[n(a,null,{default:t(()=>[n(Xi,{class:ot({hide:e(i)})},null,8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),Wo=[{path:"/",name:"Home",component:jt}];for(const s of zt)Wo.push({path:"/"+s+"/",strict:!0,name:s,component:jt});Xa(jt,{routes:Wo,base:"/avif2jpeg/dist/"},({app:s,router:l,routes:i,isClient:r,initialState:o})=>{s.use(kt)});
