var So=Object.defineProperty;var Co=(o,i,c)=>i in o?So(o,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):o[i]=c;var St=(o,i,c)=>Co(o,typeof i!="symbol"?i+"":i,c);import{r as ot,d as _e,i as Ze,o as I,c as N,w as t,a as n,u as e,b as S,t as p,N as ve,_ as jt,e as $e,L as $o,f as b,g as Q,h as y,F as we,j as Ue,B as Ce,k as vt,l as ie,m as Lo,n as Eo,p as Ie,q as _t,s as Ot,v as de,x as Po,y as Ae,z as dt,A as pt,C as ht,D as yt,E as Le,G as ke,H as Mo,T as Oe,I as Ut,J as Bt,K as Ee,M as J,O as Rt,P as Zt,Q as Fo,R as Ne,S as Be,U as at,V as Nt,W as X,X as Ke,Y as Vt,Z as wt,$ as Do,a0 as Ht,a1 as jo,a2 as bt,a3 as Wt,a4 as ut,a5 as be,a6 as We,a7 as Oo,a8 as Uo,a9 as Bo,aa as Ro,ab as Zo,ac as qt,ad as At,ae as zt,af as Gt,ag as No,ah as Kt,ai as Vo,aj as Ho,ak as Wo,al as qo,am as Go,an as Ko,ao as Qt,ap as Qo,aq as Yo,ar as Jo,as as Xo,at as Yt,au as ea,av as ta,aw as Jt,ax as Xt,ay as na,az as oa,aA as aa,aB as la,aC as sa,aD as ia,aE as ra,aF as ua,aG as ca,aH as da,aI as pa,aJ as fa,aK as ga,aL as ma,aM as va,aN as _a,aO as ha,aP as ya,aQ as wa}from"./vendor-tSSXSPT4.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))d(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&d(l)}).observe(document,{childList:!0,subtree:!0});function c(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(a){if(a.ep)return;a.ep=!0;const r=c(a);fetch(a.href,r)}})();const ba={imageFormat:"image/jpeg",imageQuality:90,expandExtButtons:!1,acceptTypeValue:void 0,editedAcceptTypes:"",expandAdvSettings:!1,retainExtension:!1,maxZipSizeMB:1e3,multithread:!0,threadCount:void 0},H=ot(en({}));function Aa(){en(H)}function en(o){return Object.assign(o,ba)}const tn="avif2jpeg",ct=JSON.parse(localStorage.getItem(tn)||"{}");for(const o in H)ct.hasOwnProperty(o)&&ct[o]!==void 0&&(H[o]=ct[o]);window.addEventListener("unload",()=>{const o={};for(const i in H)o[i]=H[i];localStorage.setItem(tn,JSON.stringify(o))});const za=_e({__name:"github",setup(o){const i=Ze(Me);return(c,d)=>{const a=ve,r=jt,l=$e;return I(),N(l,{to:!1,"display-directive":"show",show:e(i).showTooltipsBeforeMounted.value,trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(r,{href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-size":"small","font-weight":"bolder"}},{default:t(()=>[n(a,null,{default:t(()=>[n(e($o))]),_:1}),S("GitHub")]),_:1})]),default:t(()=>[S(" "+p(c.$t("githubOpenSource")),1)]),_:1},8,["show"])}}}),xa=y("h3",null,"Used Framework and Libraries",-1),ka=["href"],Ta=_e({__name:"licenses",setup(o){const i=b(!1),c={Vue:"https://github.com/vuejs/core/blob/main/LICENSE",Vite:"https://github.com/vitejs/vite/blob/main/LICENSE","Vite SSG":"https://github.com/antfu/vite-ssg/blob/main/LICENSE","Naive UI":"https://github.com/TuSimple/naive-ui/blob/main/LICENSE",Ionicons:"https://github.com/ionic-team/ionicons/blob/main/LICENSE"};return(d,a)=>{const r=Ce;return I(),Q(we,null,[n(r,{text:"",onClick:a[0]||(a[0]=l=>i.value=!0),style:{color:"black","font-size":"small"}},{default:t(()=>[S("Licenses")]),_:1}),n(e(vt),{preset:"dialog",ref:"dialog",show:i.value,"onUpdate:show":a[1]||(a[1]=l=>i.value=l),"positive-text":"OK",title:"Licenses"},{default:t(()=>[xa,y("ul",null,[(I(),Q(we,null,Ue(c,(l,m)=>y("li",null,[y("a",{href:l},p(m),9,ka)])),64))])]),_:1},8,["show"])],64)}}}),Ia=1,Sa=5,Ca=5,$a="",et={major:Ia,minor:Sa,build:Ca,tag:$a},La={style:{"font-size":"x-small","user-select":"none"}},Ea=_e({__name:"version",setup(o){const i=["0.0.118"],c=`${et.major}.${et.minor}.${et.build}${et.tag}`,d=i.map(m=>({label:`v${m}`,key:m,value:m}));function a(m){const{key:w,label:f}=m,_=l(w),v=ie("a",{href:_},f),x=ie("div",null,v);return ie("div",null,x)}function r(m){location.href=l(m)}function l(m){return`/avif2jpeg/old/${m}/`}return(m,w)=>{const f=Lo;return I(),N(f,{"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start",options:e(d),"render-label":a,"onUpdate:value":r},{header:t(()=>[y("span",La,p(m.$t("previousVersion")),1)]),default:t(()=>[y("span",{style:{cursor:"pointer"}},"v"+p(c))]),_:1},8,["options"])}}}),Pa=_e({__name:"header",setup(o){return(i,c)=>{const d=Ie,a=_t;return I(),N(d,{vertical:"",justify:"start"},{default:t(()=>[n(d,{justify:"space-between",style:{"box-sizing":"border-box",padding:"4px",margin:"0px"}},{default:t(()=>[n(d,{align:"start"},{default:t(()=>[n(za),n(Ea),n(d,{align:"center"},{default:t(()=>[n(Ta)]),_:1})]),_:1}),n(d,{align:"end",style:{"font-size":"x-small"}},{default:t(()=>[Eo(i.$slots,"lang-switch")]),_:3})]),_:3}),n(a,{style:{margin:"0px"}})]),_:3})}}}),Ma={style:{padding:"0px",margin:"0px","text-align":"center"}},Fa={key:0},Da=_e({__name:"title",setup(o){const i=Ot(),c=de(()=>{const d=i.currentRoute.value.path||"";return!String(d.match(new RegExp("(?<=^\\/)[^/]+"))||"")});return(d,a)=>{const r=jt,l=Po("router-link"),m=Ie;return I(),N(m,{align:"center",justify:"center",style:{margin:"0px"}},{default:t(()=>[y("h1",Ma,[e(c)?(I(),Q("span",Fa,p(d.$t("title")),1)):(I(),N(l,{key:1,to:"../",custom:""},{default:t(({navigate:w,href:f})=>[n(r,{href:f,onClick:w,style:{color:"black","word-break":"keep-all","overflow-wrap":"break-word"}},{default:t(()=>[S(p(d.$t("title")),1)]),_:2},1032,["href","onClick"])]),_:1}))])]),_:1})}}});function ja(o){return new Worker("/avif2jpeg/dist/assets/worker.canvas-CcITlExL.js",{name:o==null?void 0:o.name})}let nn=0;class Oa extends ja{constructor(){super(...arguments);St(this,"id",nn++)}release(){st(this)}}const ft=[],Re=new Set,qe=new Map,Ge=new Map,lt=new Set;function Ua(o,i){const c=new Oa;ft.push(c);{const d=Promise.resolve(c);Re.add(d),qe.set(c,d)}return c}function Ba(o){const i=new Promise(c=>{Ge.set(o,c)});Re.add(i),qe.set(o,i),lt.add(o)}async function Ra(){let o,i;do o=await Promise.any(Re);while(lt.has(o));return i=qe.get(o),qe.delete(o),Re.delete(i),Ba(o),o}function st(o){const i=Ge.get(o);i&&(Ge.delete(o),lt.delete(o),i(o))}function on(){for(const o of Ge.keys())st(o)}async function Ct(){return await Promise.all(Re)}function $t(){on();for(const o of ft)o.terminate();ft.length=0,Re.clear(),qe.clear(),Ge.clear(),lt.clear(),nn=0}function Za(o){return new Worker("/avif2jpeg/dist/assets/worker.zip-DbLGSA5z.js",{name:o==null?void 0:o.name})}const Na=1,Va=10,Ha=1024*1024*4,Wa=100;async function qa(o,i,c,d,a,r,l,m,w,f,_,v){const x=new Map,T=new Map,k=Math.min(c.threads-1,l.length);$t();const g=new Za,z=Ga(g,o,i,m);g.postMessage({action:"set-config",zipSize:c.maxZipSizeMB*1024*1024,keepExt:c.retainExtension,outputExt:_,imageType:v});const O=Ka(o,i,d,a,r,l,m,T,x);for(let F=0;F<k;F++){const Z=Ua();Z.onmessage=O;const{port1:te,port2:he}=new MessageChannel;g.postMessage({action:"set-port"},[te]),Z.postMessage({},[he])}const P=Ae(i,F=>{F&&(P(),on())});o.demandImage=F=>{g.postMessage({action:"request-image",index:F})};const s=l.length===1;let h=0,A=0,M="",E=0;for(;E<l.length;){const F=await Ra();if(i.value){st(F);break}const Z=[];let te=!1;const he=l.length-E,pe=Math.min(E+Math.max(Math.min(Va,he/c.threads|0),1),l.length);let fe=0,ue=!1;const ne=Date.now();for(ne-A>Wa&&(A=ne,ue=!0);E<pe&&!(fe>Ha);E++){const oe=l[E],W=oe._id;fe+=oe.size,te=E===l.length-1,x.has(W)||x.set(W,oe),Z.push({index:E,file:oe,fileId:W,outputPath:M,type:w,quality:f/100,demandThumbnail:ue||te,demandImage:s,webkitRelativePath:oe.webkitRelativePath}),oe.webkitRelativePath||oe.name,T.has(oe)||(h++,o.index=h),ue=!1}if(F.postMessage(Z),te&&(await Ct(),i.value))break}if(await Ct(),!i.value){let F;await new Promise(Z=>{F=Ae([()=>o.done,i],()=>{(o.done>=h||i.value)&&Z(void 0)},{immediate:!0})}),F()}s||(g.postMessage({action:"squeeze"}),await z),P();const L={value:!1},re=()=>{L.value=!0,$t(),g.terminate()};let D=!1;return{callbackToClearConverter:re,callbackToGenerateFailedZips:async F=>{D||(D=!0,await Qa(F,g,L,o))}}}function Ga(o,i,c,d){return new Promise(r=>{o.onmessage=l=>{const m=l.data,{action:w}=m;if(w==="add-zip-completed"){const{fileId:x}=m;i.done++,i.success++,d.add(x);return}if(w==="respond-image"){const{url:x,index:T,path:k,size:g}=m;i.convertedImageUrl=x,i.convertedImageSize=g,i.convertedImageIndex=T,i.convertedImageName=k;return}const{size:f,count:_}=m,v="url"in l.data?l.data.url:"";switch(w){case"push-zip":i.zips.push({url:v,size:f,count:_}),i.zippedTotalCount+=_,i.zippedTotalSize+=f;break;case"squeeze-zip":_>0&&(i.zips.push({url:v,size:f,count:_}),i.zippedTotalCount+=_,i.zippedTotalSize+=f),r(void 0);break;case"push-filelist":i.failedFileZippedCount++;break;case"squeeze-filelist-zip":i.failedZipDone=!0;case"push-filelist-zip":i.failedZips.push({url:v,size:f,count:_});break;case"zip-error":case"zip-squeeze-error":i.zippingErrorCount+=_,w==="zip-squeeze-error"&&r(void 0);break}}})}function Ka(o,i,c,d,a,r,l,m,w,f){let _=0;const v=b(new Map),x=b(new Map);return k=>{const g=k.target,{data:z}=k,{action:O}=z;if(i.value)switch(O){case"file-canceled":o.done++;return}switch(O){case"list-start":break;case"file-start":{const{index:P,path:$,fileId:s}=z,h={key:_++,core:g.id,index:P,path:$,command:"‚û°Ô∏èstarted"};v.value.set(g.id,h),o.logs.push(h);break}case"file-load":{const{thumbnail:P,width:$,height:s}=z;v.value.get(g.id).command="üñºÔ∏èloaded",P&&(o.thumbnail=P);break}case"file-converted":{const{index:P,path:$,fileId:s,image:h}=z,A=v.value.get(g.id);if(A.command="üîÉconverted",x.value.set(s,A),o.converted++,!h)break;const{width:M,height:E}=z;c.convertedImageBlob=h,c.convertedImageWidth=M,c.convertedImageHeight=E,c.convertedImageName=$,o.done++,o.success++}case"file-completed":{const{inputsize:P,outputsize:$,fileId:s}=z;o.inputTotalSize+=P,o.outputTotalSize+=$;const h=x.value.get(s);h&&(h.command="‚úÖcompleted",h.completed=!0);break}case"file-error":{const{index:P,path:$,fileId:s}=z,h=w.get(s);if(!h)throw new Error(`the file doesn't exist in the Map. "${s}":"${$}"`);const A=m.get(h)||0,M=v.value.get(g.id);A<Na?(m.set(h,A+1),r.push(h),M.command="‚ö†Ô∏èretrying",M.error=!0,d.warning(`retrying "${$}"`,{duration:3e3})):(o.done++,o.failure++,M.command="‚ùófailed",M.error=!0,a.error({content:`failed to load "${$}"`,duration:5e3}));break}case"file-canceled":{const{fileId:P,path:$}=z,s=x.value.get(P);o.done++,o.failure++,s.command="‚ùózip-aborted",s.error=!0;break}case"list-end":{st(g);break}}}}async function Qa(o,i,c,d){let a=0;for(const r of o){const l=(r.webkitRelativePath||r.name).replace(/^\//,"");if(c.value)return;a-d.failedFileZippedCount>20&&await new Promise(m=>setTimeout(m,10)),i.postMessage({action:"add-filelist",file:r,path:l}),a++}i.postMessage({action:"squeeze-filelist"})}async function Ya(o,i,c,d,a,r){let l="";const m=document.createElement("canvas"),w=m.getContext("2d");let f=new dt;const _=d.format,v=d.quality/100,x=[..._.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),T=o.length,k=d.maxZipSizeMB*1024*1024;let g=0,z=null,O="",P=0,$=0,s=0,h=0,A=0,M=0,E=!1;for(const F of o){if(a.value)break;const Z=F.name;let te="";const he=F.size,pe=(F.webkitRelativePath||F.relativePath||Z).replace(/^\//,""),fe=document.createElement("img");g++;const ue={key:h++,core:-1,index:g,path:pe,command:"‚û°Ô∏èstart"};r.index=g,r.logs.push(ue),r.logs.length-1;let ne;l&&(URL.revokeObjectURL(l),l=""),l=URL.createObjectURL(F),fe.src=l;const oe=await gt(fe).then(()=>!0).catch(()=>!1);if(!fe.complete||!oe||a.value){r.done++,r.failure++,ue.command="‚ùófailed";continue}const W=fe.width,ge=fe.height;if(m.width=W,m.height=ge,P=W,$=ge,w.drawImage(fe,0,0,W,ge,0,0,W,ge),ue.command="üñºÔ∏èimgload",r.thumbnail=fe,ne=await new Promise(R=>{const ae=Y=>{z=Y,R(Y==null?void 0:Y.arrayBuffer())};m.toBlob(ae,_,v)}),a.value)break;if(!ne){r.failure++;continue}s=ne.byteLength,r.converted++;let U="";if(M+s>=k){try{U=f.url()}catch{E=!0,alert("memory problem occurred");break}r.zips.push({url:U,size:M,count:A}),r.zippedTotalCount+=A,r.zippedTotalSize+=M,M=0,A=0,f.clear(),f=new dt}M+=s;const C=pe||Z;for(let R=1;R<255&&(te=C.replace(d.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+(R>1?`(${R})`:"")+"."+x,!!f.has(te));R++);r.done++;try{A++,f.add(te,ne),r.inputTotalSize+=he,r.outputTotalSize+=s}catch{continue}O=te,r.success++,ue.command="‚úÖcompleted",ue.completed=!0,i.add(F._id)}if(r.success>0)if(T===1)z&&(c.convertedImageBlob=z,c.convertedImageName=O,c.convertedImageWidth=P,c.convertedImageHeight=$);else try{if(E)throw new Error("terminated zipping process for memory problems");const F=f.url();r.zips.push({url:F,count:A,size:M}),r.zippedTotalCount+=A,r.zippedTotalSize+=M}catch{}const L={value:!1},re=()=>{L.value=!0};let D=!1;return{callbackToClearConverter:re,callbackToGenerateFailedZips:async F=>{D||(D=!0,Ja(F,k,r,L))}}}async function Ja(o,i,c,d){let a=0,r=0,l=new dt;for(let m=0;m<o.length;m++){const w=o[m],f=(w.webkitRelativePath||w.name).replace(/^\//,"");let _;try{_=await w.arrayBuffer()}catch{c.failedToCreateFailedZip=!0;return}if(d.value)return;if(l.add(f,_),r+=w.size,a++,c.failedFileZippedCount++,r>=i||m===o.length-1){const v=l.url();c.failedZips.push({url:v,size:r,count:a}),l.clear(),r=0,a=0}}c.failedZipDone=!0}function gt(o){if(typeof o.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((i,c)=>{o.onload=i,o.onerror=c})}const Pe=(o,i)=>{const c=o.__vccOpts||o;for(const[d,a]of i)c[d]=a;return c},Xa=o=>(ht("data-v-5dab19ad"),o=o(),yt(),o),el={class:"container"},tl=Xa(()=>y("span",{class:"text"},"ZIP",-1)),nl={__name:"zipicon",setup(o){return(i,c)=>(I(),Q("span",el,[n(e(ve),null,{default:t(()=>[n(e(pt))]),_:1}),tl]))}},ol=Pe(nl,[["__scopeId","data-v-5dab19ad"]]);function je(o,i=2){const c=Math.sign(o);o=Math.abs(o);const d=["Bytes","KB","MB","GB"],a=o?Math.floor(Math.log(o)/Math.log(1024)):0;return`${(o/Math.pow(1024,a)*c).toFixed(i)}${d[a]}`}function an(o,i=100,c=!1){i=typeof i=="number"?{width:i,height:i}:i;const{width:d,height:a}=i;let{width:r,height:l}=o;const m=r/l,w=d/a;return m>=w?(r=c?Math.min(d,r):d,l=r/m|0):(l=c?Math.min(a,l):a,r=l*m|0),{width:r,height:l}}const al=["href","download","title"],ll=_e({__name:"thumbnail",props:{src:{},width:{},height:{},maxWidth:{default:100},maxHeight:{default:100},expand:{type:Boolean,default:!1},loading:{type:Boolean},fileName:{},allowNext:{type:Boolean},allowPrev:{type:Boolean}},emits:["load","error","next","prev"],setup(o,{expose:i,emit:c}){const{t:d}=Le(),a=o,r=c;i({download:O,openPreview:$});const l=b(),m=b(!0),w=b(""),f=b(100),_=b(100),v=b(!1),x=ot({width:"100px",height:"100px",minWidth:"50px",minHeight:"50px"});Ae(a,(s,h)=>{x.width=(a.width||100)+"px",x.height=(a.height||100)+"px"}),Ae(()=>a.src,()=>{g(a.src)}),ke(()=>{document.body.addEventListener("keydown",P)}),Mo(()=>{document.body.removeEventListener("keydown",P)});async function T(s){const h=s.target,A=h.naturalWidth,M=h.naturalHeight,{width:E,height:L}=an({width:A,height:M},{width:a.maxWidth||100,height:a.maxHeight||100},a.expand);f.value=E,_.value=L,r("load",{src:h.src,width:A,height:M}),m.value=!1,await new Promise(re=>setTimeout(re,100)),!m.value&&(v.value=!0)}function k(s){const h=s.target;r("error",h.src)}async function g(s){var h,A;m.value=!0,v.value=!1,await new Promise(M=>setTimeout(M,150)),w.value=s;try{(A=(h=l.value)==null?void 0:h.previewInstRef)!=null&&A.displayed&&l.value.previewInstRef.setPreviewSrc(s)}catch{}}function z({nodes:s}){s.next=ie(Ce,{onClick(){r("next")},disabled:!a.allowNext,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>ie(Rt)}),s.prev=ie(Ce,{onClick(){r("prev")},disabled:!a.allowPrev,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>ie(Zt)});try{const h=s.download.children;h.default=()=>d("Download");const A=h.trigger();A.props.onClick=O,h.trigger=()=>A}catch{}return Object.values(s)}function O(){const s=document.createElement("a");s.href=w.value,s.download=a.fileName,s.click()}function P(s){var h,A,M,E;if(s.code==="Escape")try{(A=(h=l.value)==null?void 0:h.previewInstRef)!=null&&A.displayed&&(s.stopPropagation(),(E=(M=l.value)==null?void 0:M.previewInstRef)==null||E.toggleShow(!1))}catch{}}function $(){var s,h,A,M;try{(h=(s=l.value)==null?void 0:s.previewInstRef)==null||h.setPreviewSrc(a.src),(M=(A=l.value)==null?void 0:A.previewInstRef)==null||M.toggleShow(!0)}catch{}}return(s,h)=>{const A=Fo,M=Ne,E=Be;return I(),N(E,{show:e(m)||a.loading},{default:t(()=>[n(M,{justify:"center",align:"center",style:J(e(x))},{default:t(()=>[y("a",{href:e(w),onClick:h[0]||(h[0]=Ee(()=>{},["left","prevent"])),target:"_blank",download:a.fileName,title:a.fileName,style:{"line-height":"0px"}},[n(Oe,{mode:"in-out"},{default:t(()=>[Ut(n(A,{ref_key:"nImageRef",ref:l,"show-toolbar-tooltip":"","render-toolbar":z,onLoad:T,onError:k,src:e(w),width:e(f),height:e(_),style:{border:"1px solid silver"}},null,8,["src","width","height"]),[[Bt,e(v)]])]),_:1})],8,al)]),_:1},8,["style"])]),_:1},8,["show"])}}}),sl=Pe(ll,[["__scopeId","data-v-81800cbc"]]),il=["href","download"],rl=["href"],ul=["href"],cl={style:{"font-size":"0.8em"}},dl=_e({__name:"image-viewer",props:{url:{},dataUrl:{},name:{},size:{},length:{},index:{},isSingle:{type:Boolean}},emits:["demand-image"],setup(o,{expose:i,emit:c}){const d=o,a=c;i({download:P});const r=b(),l=at(),{t:m}=Le();Nt();const w=b(!0),f=b(1),_=b(1),v=b(1);b(0);const x=b(""),T=b(!1);let k=b(!1),g=-1;Ae(f,()=>{f.value<1||f.value>d.length||(clearTimeout(g),g=setTimeout(()=>{d.index!==f.value-1&&(a("demand-image",f.value-1),T.value=!0,k.value=!1)},100))}),Ae(()=>d.index,()=>{if(d.index===0&&w.value){w.value=!1,f.value=1,x.value=d.url;return}d.index===f.value-1&&(T.value=!1,x.value=d.url)});let z="";Ae(()=>d.url,()=>{if(d.url!==z){const h=z;setTimeout(()=>URL.revokeObjectURL(h),1e3),z=d.url}d.isSingle&&(w.value=!1,x.value=d.url)}),ke(()=>{d.isSingle||a("demand-image",0)});function O({width:h,height:A}){_.value=h,v.value=A,k.value=!0}function P(){r.value.download()}async function $(h){try{const A=await fetch(h).then(M=>M.blob()).then(M=>new Promise(E=>{const L=new FileReader;L.onload=E,L.readAsDataURL(M)})).then(M=>M.target.result);navigator.clipboard.writeText(A),l.info({title:m("copiedDataURLDialogTitle"),content:()=>ie("div",[ie("div",m("copiedDataURLMessage"))]),positiveText:"OK"})}catch{l.error({title:"failed to copy Data URL",content:"could not copy Data URL",positiveText:"OK"})}}function s(h){h>0&&f.value<d.length&&f.value++,h<0&&f.value>1&&f.value--}return(h,A)=>{const M=Be,E=Ne,L=Ce,re=Ke,D=Vt,q=ve,F=wt;return I(),N(M,{size:"large",show:w.value},{default:t(()=>[n(E,{justify:"center",align:"center",vertical:"",style:J({visibility:w.value?"hidden":"visible"})},{default:t(()=>[n(E,{align:"center",wrap:!1},{default:t(()=>[n(E,{align:"center",justify:"center",vertical:""},{default:t(()=>[n(M,{size:"small",show:!1,_show:T.value||!e(k)},{default:t(()=>[n(sl,{ref_key:"thumbref",ref:r,src:x.value,width:180,"max-width":160,"max-height":100,loading:T.value,"file-name":d.name,"allow-next":f.value<d.length,"allow-prev":f.value>1,onLoad:O,onNext:A[0]||(A[0]=Z=>s(1)),onPrev:A[1]||(A[1]=Z=>s(-1))},null,8,["src","loading","file-name","allow-next","allow-prev"])]),_:1},8,["_show"])]),_:1}),n(E,{vertical:""},{default:t(()=>[n(E,{justify:"center",wrap:!0},{default:t(()=>[d.url&&!h.isSingle?(I(),N(re,{key:0,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:d.url,ref:"saveImg",target:"_blank",download:d.name},[n(L,{round:"",size:"tiny"},{default:t(()=>[S(p(h.$t("save")),1)]),_:1})],8,il)]),default:t(()=>[S(" "+p(h.$t("save")),1)]),_:1})):X("",!0),d.url?(I(),N(re,{key:1,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:d.url,target:"_blank",onClick:A[2]||(A[2]=Ee(Z=>{r.value.openPreview()},["prevent"]))},[n(L,{round:"",size:"tiny"},{default:t(()=>[S(p(h.$t("open")),1)]),_:1})],8,rl)]),default:t(()=>[S(" "+p(h.$t("convertedImageUrlTooltip")),1)]),_:1})):X("",!0),d.url?(I(),N(re,{key:2,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:d.url,target:"_self"},[n(L,{onClick:A[3]||(A[3]=Ee(Z=>$(d.url),["left","prevent","stop"])),round:"",size:"tiny"},{default:t(()=>[S("DataURL")]),_:1})],8,ul)]),default:t(()=>[S(" "+p(h.$t("convertedImageDataUrlTooltip")),1)]),_:1})):X("",!0)]),_:1}),n(E,{justify:"center"},{default:t(()=>[S(p(_.value)+" √ó "+p(v.value),1)]),_:1}),n(E,{justify:"center"},{default:t(()=>[S(p(e(je)(d.size,0)),1)]),_:1})]),_:1})]),_:1}),n(E,{ref:"fileNameContainer",justify:"center",style:{"max-width":"320px"},title:d.name},{default:t(()=>[n(D,{"x-scrollable":!0,trigger:"hover",style:{"font-size":"smaller",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},{default:t(()=>[S(p(d.name),1)]),_:1})]),_:1},8,["title"]),h.isSingle?X("",!0):(I(),N(E,{key:0,style:{"font-family":"v-mono"},align:"center"},{default:t(()=>[y("span",cl,p(e(m)("status.index"))+":",1),S(" "+p(f.value)+" / "+p(d.length),1)]),_:1})),h.isSingle?X("",!0):(I(),N(E,{key:1,align:"center",justify:"center"},{default:t(()=>[n(L,{onClick:A[4]||(A[4]=Z=>s(-1)),disabled:f.value<=1,circle:!0,size:"small"},{icon:t(()=>[n(q,null,{default:t(()=>[n(e(Zt))]),_:1})]),_:1},8,["disabled"]),n(F,{value:f.value,"onUpdate:value":A[5]||(A[5]=Z=>f.value=Z),tooltip:!1,step:1,min:1,max:d.length,style:{width:"180px"}},null,8,["value","max"]),n(L,{onClick:A[6]||(A[6]=Z=>s(1)),disabled:f.value>=h.length,circle:!0,size:"small"},{icon:t(()=>[n(q,null,{default:t(()=>[n(e(Rt))]),_:1})]),_:1},8,["disabled"])]),_:1}))]),_:1},8,["style"])]),_:1},8,["show"])}}}),pl={class:"log-table"},fl={class:"log-tr"},gl={class:"log-th"},ml={class:"log-th"},vl={style:{"min-width":"7em"},class:"log-th"},_l={style:{"padding-left":"2em"},class:"log-th"},hl={class:"log-td"},yl={class:"log-td"},wl={class:"log-td"},bl={class:"log-td"},Al={style:{margin:"1px"}},zl=["href","download","onClick"],xl={key:0,style:{position:"relative"}},kl=["href","download"],Tl=["href","download"],Il={key:0,style:{margin:"1px"}},Sl=["href","download","onClick"],Lt=99999,Cl=100,$l=_e({__name:"status",props:{processing:{type:Boolean},status:{},interval:{}},emits:["all-zips-clicked","demand-zip-errors","demand-image"],setup(o,{emit:i}){const c=at(),{t:d}=Le(),a=Nt(),r={W:160,H:80},l=o,m=i,w=b(!1),f=b([]),_=b(!1),v=b([]),x=b([]),T=b([0,0]),k=b([0,0]),g=b([0,0]),z=b([0,0]),O=b([0,0]),P=b([0,0]),$=b(0),s=b([0,0]),h=b(a.value.infoColor),A=b("#000000"),M=b("#000000"),E=b(0),L=b(0),re=b(""),D=b("00:00:00");b(""),b("");const q=b(void 0),F=b(!1),Z=b(!0),te=b(!1),he=de(()=>F.value?ue.value:fe.value),pe=b("16em"),fe=b(5),ue=b(1e3),ne=b(!0),oe=b(!1),W=ot({name:"",width:0,height:0,size:0,url:"",dataUrl:"",index:-1}),ge=b(null),U=b(null),C=b(),R=b();ke(()=>{Ae(l.status,()=>Te(),{deep:!1}),Ae([U,ne],()=>{if(!U.value||!ne.value)return;const{width:me,height:ye}=an(U.value,{width:r.W,height:r.H});ge.value.width=me,ge.value.height=ye,ge.value.style.width=me+"px",ge.value.style.height=ye+"px",U.value instanceof HTMLImageElement?ge.value.getContext("2d").drawImage(U.value,0,0,me,ye):(ge.value.getContext("bitmaprenderer").transferFromImageBitmap(U.value),U.value=null,l.status.thumbnail=null)});let u=0;const B=()=>{if(u)return;const me=Date.now();D.value="00:00:00",u=window.setInterval(()=>{const ye=(Date.now()-me)/1e3;D.value=`${String(ye/3600|0).padStart(2,"0")}:${String(ye/60%60|0).padStart(2,"0")}:${String(ye%60|0).padStart(2,"0")}`},300)};B(),Ae(()=>l.processing,(me,ye)=>{me?(B(),f.value=[],w.value=!1,_.value=!1,v.value=[],x.value=[]):(clearInterval(u),Te(),u=0),ne.value=!1,oe.value=!0,l.processing||Ve()});const G=Oo();let V;const K=()=>{clearTimeout(V),V=setTimeout(()=>{if(!ne.value||ee)return;const me=C.value.$parent.$el.offsetHeight,ye=window.innerHeight-G.parent.parent.vnode.el.offsetHeight-8;pe.value=me+ye+"px"},100)};K(),window.addEventListener("resize",K);const le=new ResizeObserver(K);le.observe(G.parent.parent.vnode.el);let ee=!1;Do(()=>{ee=!0,le.disconnect(),clearInterval(u),clearTimeout(V),clearTimeout(ce),clearTimeout(Ye)})}),Ae([()=>l.status.zips.length,()=>l.status.failedZips.length],()=>{const u=l.status;{v.value.length>u.zips.length&&(v.value.length=0);let B=0;const G=u.zips.length===1&&u.zippedTotalCount===u.length;for(let V=v.value.length;V<u.zips.length;V++){const K=u.zips[V],le=u.baseZipName+(G?"":"-"+String(V+1).padStart(2,"0"))+".zip";B+=K.size,v.value[V]={url:K.url,size:K.size,number:G?0:V+1,sizeByUnit:je(K.size),name:le,count:K.count,clicked:!1}}}{x.value.length>u.failedZips.length&&(x.value.length=0);let B=0;const G=u.failedZipDone&&u.failedZips.length===1;for(let V=x.value.length;V<u.failedZips.length;V++){const K=u.failedZips[V],le=u.baseZipName+"-error"+(G?"":"-"+String(V+1).padStart(2,"0"))+".zip";B+=K.size,x.value[V]={url:K.url,size:K.size,number:G?0:V+1,sizeByUnit:je(K.size),name:le,count:K.count,clicked:!1}}}});const ae=l.interval||100;let Y=!1,ce=0;function Te(){if(Y)return;if(ce){Y=!0;return}ce=window.setTimeout(()=>{ce=0,Y&&(Y=!1,Te())},ae);const u=l.status;w.value=u.length>=2,k.value[1]=k.value[0],k.value[0]=u.index,g.value[1]=g.value[0],g.value[0]=u.success,z.value[1]=z.value[0],z.value[0]=u.failure,O.value[1]=O.value[0],O.value[0]=u.done,P.value[1]=P.value[0],P.value[0]=u.converted,$.value=u.length,s.value[1]=s.value[0],s.value[0]=u.zippedTotalCount,E.value=u.inputTotalSize,L.value=u.outputTotalSize;const B=L.value-E.value;re.value=(B>=0?"+ ":"")+je(B);const G=L.value/E.value,V=(256|Math.min(255,Math.max(0,G-1.5)*255|0)).toString(16).substring(1);A.value="#"+V+"0000";const K=1024*1024,le=(256|Math.min(255,Math.max(0,B/1024/K)*255|0)).toString(16).substring(1);if(M.value="#"+le+"0000",T.value[1]=T.value[0],T.value[0]=g.value[0]/$.value*100,ne.value||!l.processing){const ee=u.logs.slice(-Lt);f.value.push(...ee);const me=f.value.length-Lt;me>0&&f.value.splice(0,me),Z.value&&ee.length&&Xe(),f.value.length>ue.value&&(ue.value*=2)}u.logs.length=0,U.value=u.thumbnail,l.processing&&(h.value=z.value[0]?a.value.warningColor:a.value.infoColor),u.convertedImageUrl!==W.url&&(W.url=u.convertedImageUrl,W.name=u.convertedImageName,W.dataUrl=u.convertedImageDataUrl,W.size=u.convertedImageSize||u.outputTotalSize,W.width=u.convertedImageWidth,W.height=u.convertedImageHeight,W.index=u.convertedImageIndex)}function Ve(){const u=l.status;h.value=l.status.success===l.status.length?a.value.successColor:a.value.errorColor,u.unconvertedFileCount>0,z.value[0]>0||(g.value[0],$.value)}const ze=de(()=>[{key:"open",label:d("status.openFailedList"),icon:()=>ie(ve,()=>ie(Ht)),onSelect(){Fe()}},{key:"download",label:d("status.saveFailedList"),icon:()=>ie(ve,()=>ie(jo)),onSelect(){Fe(!0)}},{key:"zip",label:`${d("status.zipFailedList")}`+(l.status.failedZipDone?`(‚úî${d("status.done")})`:""),icon:()=>ie(Be,{show:_.value&&!l.status.failedZipDone,size:"small"},()=>ie(ve,()=>ie(pt))),disabled:_.value,onSelect(u){return _.value=!0,m("demand-zip-errors"),!1}}]);function xe(u,B=!1){const{url:G,name:V}=u;if(B){const K=document.createElement("a");K.href=G,K.download=V,K.click()}u.clicked||(u.clicked=!0,l.processing||v.value.every(K=>K.clicked)&&m("all-zips-clicked"))}async function Qe(){if(w.value){if(v.value.length>=2&&!await new Promise((G,V)=>c.warning({title:d("Download"),content:d("status.confirmDownloadMessage",[v.value.length]),positiveText:"OK",negativeText:d("cancel"),onPositiveClick:()=>G(!0),onNegativeClick:()=>V()})))return;const u=v.value;for(const B of u)xe(B,!0)}else R.value.download()}function Fe(u=!1){const B=new Blob([l.status.unconvertedListText],{type:"text/plain;charset=utf8"}),G=URL.createObjectURL(B),V=document.createElement("a");V.href=G,V.target="_blank",u&&(V.download=l.status.baseZipName+"-error.txt"),V.click()}let Ye=0,Je=!1;function Xe(u=!1){if(!Je){if(Ye){Je=!0;return}bt(()=>{!u&&(!F.value||!Z.value)||(C.value.scrollTo({behavior:u?"instant":"smooth",top:f.value.length*50}),Ye=window.setTimeout(()=>{Ye=0,Je&&(Je=!1,Xe())},Cl))})}}return(u,B)=>{const G=Ie,V=Uo,K=Bo,le=Ke,ee=Ne,me=Ro,ye=Zo,it=$e,Ao=qt,zo=At,xo=zt,ko=_t,He=Ce,To=ol,Tt=Gt,Io=No;return I(),N(ee,{vertical:"",justify:"center"},{default:t(()=>[n(G,{justify:"center",align:"center",wrap:!1,style:{"white-space":"nowrap"}},{default:t(()=>[n(G,{vertical:"",justify:"center",class:"left-column"},{default:t(()=>[n(V,{"tabular-nums":"",label:u.$t("status.elapsedTime")},{default:t(()=>[n(G,null,{default:t(()=>[S(p(e(D)),1)]),_:1})]),_:1},8,["label"]),n(V,{"tabular-nums":"",label:u.$t("status.multiThreading")},{default:t(()=>[n(G,{style:J({color:l.status.threads?"":"red"})},{default:t(()=>[S(p(l.status.threads?u.$rt("{n} @:threads",l.status.threads):u.$t("disabled")),1)]),_:1},8,["style"])]),_:1},8,["label"]),n(V,{"tabular-nums":"",label:u.$t("status.outputSettings")},{default:t(()=>[n(G,{vertical:"",justify:"end",style:{"font-size":"smaller","line-height":"1em"}},{default:t(()=>[y("div",null,"Type: "+p(l.status.type),1),y("div",null,"Zip: "+p(l.status.zipSize)+"MB",1)]),_:1})]),_:1},8,["label"])]),_:1}),n(me,{type:"multiple-circle","stroke-width":1,percentage:[e(g)[0]/e($)*100|0,e(k)[0]/e($)*100|0],color:[e(a).successColor,e(h)],"rail-style":[{stroke:u.processing?e(a).successColor:e(h),opacity:.3},{stroke:e(h),opacity:.3}],class:"center-column"},{default:t(()=>[n(G,{vertical:"",align:"center",style:{"font-family":"v-mono","font-size":"xx-large","white-space":"nowrap"},wrap:!1,"wrap-item":!1},{default:t(()=>[y("span",{style:J({color:e(z)[0]?e(h):u.processing?e(a).successColor:e(h)})},[n(K,{duration:e(ae)*3|0,from:e(T)[1]|0,to:e(T)[0]|0,active:!0},null,8,["duration","from","to"]),S("% ")],4),n(ee,{wrap:!1,style:{border:"0px solid"}},{default:t(()=>[n(ee,{vertical:"",size:"small",justify:"end"},{default:t(()=>[n(ee,{justify:"end",wrap:!1},{default:t(()=>[e(z)[0]>0?(I(),N(le,{key:0,trigger:"hover",duration:0,delay:0,style:J({color:e(a).errorColor}),placement:"left"},{trigger:t(()=>[y("span",{style:J({fontSize:"xx-small",color:e(a).errorColor,lineHeight:"0"})}," ("+p(e(z)[0].toLocaleString("en-us"))+") ",5)]),default:t(()=>[S(" "+p(u.$t("status.progressErrors"))+" ("+p(e(z)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):X("",!0),n(le,{trigger:"hover",duration:0,delay:0,style:J({color:e(a).infoColor}),placement:"left"},{trigger:t(()=>[y("span",{style:J({fontSize:"xx-small",color:e(a).infoColor,lineHeight:"0"})},p(e(k)[0].toLocaleString("en-us")),5)]),default:t(()=>[S(" "+p(u.$t("status.progressStarted"))+" ("+p(e(k)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])]),_:1}),n(ee,{justify:"end"},{default:t(()=>[n(le,{trigger:"hover",duration:0,delay:0,style:J({color:e(a).successColor}),placement:"bottom"},{trigger:t(()=>[y("span",{style:J({fontSize:"medium",color:e(a).successColor})},[n(K,{duration:e(ae)*3|0,from:e(g)[1],to:e(g)[0],active:!0,"show-separator":!0},null,8,["duration","from","to"])],4)]),default:t(()=>[S(" "+p(u.$t("status.progressSuccess"))+" ("+p(e(g)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])]),_:1})]),_:1}),n(ee,{align:"end",style:{"font-size":"medium",border:"0px solid"}},{default:t(()=>[n(le,{trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:t(()=>[S(" / "+p(e($).toLocaleString("en-us")),1)]),default:t(()=>[S(" "+p(u.$t("status.progressTotal"))+" ("+p(e($).toLocaleString("en-us"))+") ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["percentage","color","rail-style"]),n(G,{vertical:"",style:{height:"100%"},justify:"center"},{default:t(()=>[n(V,{"tabular-nums":"",label:u.$t("status.inputSize")},{default:t(()=>[n(G,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[S(p((e(E)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(V,{"tabular-nums":"",label:u.$t("status.outputSize")},{default:t(()=>[n(G,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[S(p((e(L)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(V,{"tabular-nums":"",label:u.$t("status.outInRate")},{default:t(()=>[n(G,{vertical:"",align:"end",justify:"start",style:{"font-size":"xx-small","font-family":"v-mono","line-height":"50%"}},{default:t(()=>[y("span",{style:J({color:e(A),fontSize:"larger"})},"√ó "+p((e(L)/e(E)||1).toFixed(2)),5),y("span",{style:J({color:e(M)})},"("+p(e(re))+")",5)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1}),n(xo,{"display-directive":"show","trigger-areas":["arrow","main"],"default-expanded-names":"log-collapse","expanded-names":e(ne)?["log-collapse"]:[],"on-update:expanded-names":j=>{ne.value=!!String(j)}},{default:t(()=>[n(zo,{title:"Log",name:"log-collapse",style:{"white-space":"nowrap"}},Wt({header:t(()=>[n(ee,{align:"center",wrap:!1},{default:t(()=>[S(p(u.$t("status.log")),1),u.processing&&!e(ne)?(I(),N(e(Be),{key:0,size:16})):X("",!0)]),_:1})]),default:t(()=>[n(ee,{wrap:!1,class:We({"log-container":1,"expand-log":e(F)}),align:"stretch",style:J(e(F)?{height:e(pe),maxHeight:e(pe)}:{})},{default:t(()=>[n(e(Vt),{ref_key:"scrollref",ref:C,"x-scrollable":!0,onMouseup:B[5]||(B[5]=j=>Z.value=!1),onWheel:B[6]||(B[6]=j=>Z.value=!1),trigger:"none",style:J([{"z-index":"2","padding-right":"10px","min-height":"7em"},{maxHeight:e(pe)}]),size:50},{default:t(()=>[y("table",pl,[y("tr",fl,[y("th",gl,p(u.$t("status.table.core")),1),y("th",ml,p(u.$t("status.table.index")),1),y("th",vl,p(u.$t("status.table.status")),1),y("th",_l,p(u.$t("status.table.details")),1)]),(I(!0),Q(we,null,Ue((e(te)?e(f).filter(j=>!j.completed):e(f)).slice(-e(he)),({index:j,key:De,command:Se,path:rt,core:It})=>(I(),Q("tr",{key:De,class:"log-tr"},[y("td",hl,p(It>=0?It+1:"-"),1),y("td",yl,p(j+1),1),y("td",wl,p(Se),1),y("td",bl,p(rt),1)]))),128))])]),_:1},8,["style"]),n(ee,{style:J([{"align-self":"center",position:"absolute","z-index":"0","margin-top":"0.5em",right:"0.1em","line-height":"0px"},{width:r.W+"px",height:r.H+"px"}]),justify:"center",align:"center"},{default:t(()=>[n(e(Be),{size:"small",show:u.processing},{default:t(()=>[l.status.thumbnail===void 0?(I(),N(Ao,{key:0,description:"EMPTY"})):X("",!0),Ut(y("canvas",{ref_key:"thumbcanvas",ref:ge,width:"106",height:"80",style:J({border:"1px solid gray",filter:u.processing?"":"opacity(0.35)"})},null,4),[[Bt,l.status.thumbnail!==void 0]])]),_:1},8,["show"])]),_:1},8,["style"])]),_:1},8,["class","style"])]),_:2},[e(ne)?{name:"header-extra",fn:t(()=>[n(ee,{align:"center",wrap:!1},{default:t(()=>[n(ut,null,{default:t(()=>[n(ye,{key:"a",checked:e(te),"onUpdate:checked":B[0]||(B[0]=j=>be(te)?te.value=j:null),size:"small",style:{"font-size":"smaller"},class:"hide-mobile"},{default:t(()=>[S(p(u.$t("status.filterSuccess")),1)]),_:1},8,["checked"]),e(F)?(I(),N(ye,{key:"b",checked:e(Z),"onUpdate:checked":[B[1]||(B[1]=j=>be(Z)?Z.value=j:null),B[2]||(B[2]=j=>j&&Xe(!0))],size:"small",style:{"font-size":"smaller"}},{default:t(()=>[S(p(u.$t("status.autoScroll")),1)]),_:1},8,["checked"])):X("",!0)]),_:1}),n(it,{style:{"max-width":"30em"}},{trigger:t(()=>[n(ye,{size:"small",checked:e(F),"onUpdate:checked":[B[3]||(B[3]=j=>be(F)?F.value=j:null),B[4]||(B[4]=j=>{Z.value=j,Xe(!0)})],style:{"font-size":"smaller"}},{default:t(()=>[S(p(u.$t("status.expandLog")),1)]),_:1},8,["checked"])]),default:t(()=>[S(p(u.$t("status.expandLogTooltip")),1)]),_:1})]),_:1})]),key:"0"}:void 0]),1024)]),_:1},8,["expanded-names","on-update:expanded-names"]),n(ko,{style:{margin:"0.2em"}}),n(ee,{wrap:!1,vertical:""},{default:t(()=>[n(ee,{justify:"center",align:"center",vertical:""},{default:t(()=>[y("div",{class:"singleimage",style:J({maxHeight:e(oe)?"2000px":"100px"})},[!e(oe)&&e(w)&&l.status.threads?(I(),N(He,{key:0,tertiary:"",type:"success",size:"small",disabled:!(u.status.success>0),onClick:B[7]||(B[7]=j=>oe.value=!0)},{default:t(()=>[S(p(u.$t("status.browseConvertedImages")),1)]),_:1},8,["disabled"])):u.status.success>0&&(l.status.threads||!e(w))?(I(),N(dl,{key:1,ref_key:"imageViewer",ref:R,size:e(W).size,url:e(W).url,"data-url":e(W).dataUrl,width:e(W).width,height:e(W).height,name:e(W).name,length:l.status.success,index:e(W).index,"is-single":!e(w),onDemandImage:B[8]||(B[8]=j=>m("demand-image",j))},null,8,["size","url","data-url","width","height","name","length","index","is-single"])):X("",!0)],4)]),_:1}),n(ee,{justify:"center"},{default:t(()=>[e(w)?(I(),N(ee,{key:0,vertical:"",align:"center"},{default:t(()=>[n(le,{placement:"left"},{trigger:t(()=>[n(me,{type:"line","indicator-placement":"inside",color:"lime","rail-color":"rgba(99, 255, 99, 0.5)","indicator-text-color":e(s)[0]===e($)?"white":"green",processing:u.processing,percentage:e(s)[0]/e($)*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[y("span",Al,p(e(s)[0]/e($)*100|0)+"% "+p(u.$t("status.zipped"))+" ("+p(e(s)[0])+"/"+p(e(P)[0])+")",1)]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[S(" "+p(u.$t("status.zippingProgress"))+" ("+p(e(s)[0]/e($)*100|0)+"%) ",1)]),_:1}),n(Oe,{name:"zipcontainer"},{default:t(()=>[e(v).length>=1||l.processing?(I(),N(ut,{key:0,name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(I(!0),Q(we,null,Ue(e(v),(j,De)=>(I(),Q("span",{key:De},[n(le,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:j.url,download:j.name,class:"in-button-anchor",onClick:Se=>xe(j)},[n(He,{class:"zip-button",size:"tiny",color:j.clicked?"#050":"lime","text-color":j.clicked?"gray":"white",onClick:Ee(Se=>xe(j),["stop"]),round:""},{default:t(()=>[n(e(ve),{size:"tiny"},{default:t(()=>[n(e(pt))]),_:1}),S("ZIP"+p(j.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,zl)]),default:t(()=>[y("div",{style:J({color:e(a).successColor})},[y("div",null,"ZIP "+p(j.number||"")+" ("+p(u.$t("success"))+")",1),y("div",null,p(j.name),1),y("div",null,p(j.sizeByUnit),1),y("div",null,p(u.$rt("{n} @:files",j.count)),1)],4)]),_:2},1024)]))),128))]),_:1})):X("",!0)]),_:1})]),_:1})):X("",!0)]),_:1}),n(Oe,null,{default:t(()=>[l.processing?X("",!0):(I(),N(ee,{key:0,justify:"center",align:"center"},{default:t(()=>[n(le,{trigger:"hover",duration:0,delay:0,placement:"left",style:J({color:"white",backgroundColor:e(a).successColor}),"arrow-style":{backgroundColor:e(a).successColor}},{trigger:t(()=>[n(Oe,{name:"save"},{default:t(()=>[e(g)[0]>0?(I(),Q("span",xl,[n(Tt,{value:e(w)?e(s)[0].toLocaleString("en-us"):l.status.type.replace(/\(.+\)/,""),color:e(a).successColorHover,offset:[-20,-3]},{default:t(()=>[n(He,{size:"medium",onClick:Qe,color:e(a).successColor,round:""},{default:t(()=>[e(w)?(I(),Q(we,{key:0},[e(v).length?(I(),Q("a",{key:0,href:e(v)[0].url,download:e(v)[0].name,class:"in-button-anchor",onClick:B[9]||(B[9]=Ee(()=>{},["prevent"]))},[n(To),S(" √ó "+p(e(v).length)+" "+p(u.$t("save")),1)],8,kl)):X("",!0)],64)):(I(),Q("a",{key:1,href:e(W).url,download:e(W).name,class:"in-button-anchor",onClick:B[10]||(B[10]=Ee(()=>{},["prevent"]))},[n(e(ve),{size:"tiny"},{default:t(()=>[n(e(Kt))]),_:1}),S(" "+p(u.$t("save")),1)],8,Tl))]),_:1},8,["color"])]),_:1},8,["value","color"])])):X("",!0)]),_:1})]),default:t(()=>[u.status.length>=2?(I(),Q(we,{key:0},[y("div",null,p(e(d)("success"))+": "+p(e(s)[0].toLocaleString()),1),y("div",null,p(e(d)("status.totalSize"))+": "+p(e(je)(u.status.zippedTotalSize)),1),y("div",null,"ZIP √ó "+p(e(v).length),1)],64)):(I(),Q(we,{key:1},[S(p(u.$t("status.downloadConvertedImage")),1)],64))]),_:1},8,["style","arrow-style"]),!u.processing&&u.status.success!==e($)?(I(),N(Io,{key:0,options:e(ze),onSelect:B[11]||(B[11]=(j,De)=>{var Se;return(Se=e(ze).find(({key:rt})=>j===rt))==null?void 0:Se.onSelect()}),"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start"},{default:t(()=>[n(le,{show:e(q),duration:0,delay:0,placement:"right",style:J({color:"white",backgroundColor:e(a).errorColor}),"arrow-style":{backgroundColor:e(a).errorColor}},{trigger:t(()=>[n(Tt,{value:u.status.unconvertedFileCount.toLocaleString(),color:e(a).errorColorHover,offset:[-0,-3]},{default:t(()=>[n(He,{size:"small",color:e(a).errorColor},{default:t(()=>[n(e(ve),{size:"medium",style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Vo))]),_:1})]),_:1},8,["color"])]),_:1},8,["value","color"])]),default:t(()=>[y("div",null,[y("div",null,p(e(d)("failed"))+": "+p(u.status.unconvertedFileCount.toLocaleString()),1),y("div",null,p(e(d)("status.totalSize"))+": "+p(e(je)(u.status.unconvertedTotalSize)),1)])]),_:1},8,["show","style","arrow-style"])]),_:1},8,["options"])):X("",!0)]),_:1}))]),_:1}),n(Oe,{name:"zipcontainer"},{default:t(()=>[e(_)?(I(),N(ee,{key:0,vertical:"",align:"center"},{default:t(()=>[n(le,{placement:"left"},{trigger:t(()=>[n(me,{type:"line","indicator-placement":"inside",color:"red","rail-color":"rgba(255, 0, 0, 0.5)","indicator-text-color":u.status.failedFileZippedCount===u.status.unconvertedFileCount?"white":"#500",processing:e(_)&&!u.status.failedZipDone&&!u.status.failedToCreateFailedZip,percentage:u.status.failedFileZippedCount/u.status.unconvertedFileCount*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[u.status.failedToCreateFailedZip?(I(),Q("div",{key:1,style:J({color:e(a).errorColor})},p(u.$t("status.failureZippingFailedFiles")),5)):(I(),Q("span",Il,p(u.status.failedFileZippedCount/u.status.unconvertedFileCount*100|0)+"% "+p(u.$t("status.zipped"))+" ("+p(u.status.failedFileZippedCount)+"/"+p(u.status.unconvertedFileCount)+")",1))]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[S(" "+p(u.$t("status.zippingProgress"))+" ("+p(u.status.failedFileZippedCount/u.status.unconvertedFileCount*100|0)+"%) ",1)]),_:1}),n(ut,{name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(I(!0),Q(we,null,Ue(e(x),(j,De)=>(I(),Q("span",{key:De},[n(le,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:j.url,download:j.name,class:"in-button-anchor",onClick:Se=>xe(j)},[n(He,{class:"zip-button",size:"tiny",color:j.clicked?"#551122":"#F00","text-color":j.clicked?"gray":"white",onClick:Ee(Se=>xe(j),["stop"]),round:""},{default:t(()=>[n(e(ve),{size:"tiny"},{default:t(()=>[n(e(Ho))]),_:1}),S("ZIP"+p(j.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Sl)]),default:t(()=>[y("div",{style:J({color:e(a).errorColor})},[y("div",null,"ZIP "+p(j.number||"")+" ("+p(u.$t("failed"))+")",1),y("div",null,p(j.name),1),y("div",null,p(j.sizeByUnit),1),y("div",null,p(u.$rt("{n} @:files",j.count)),1)],4)]),_:2},1024)]))),128))]),_:1})]),_:1})):X("",!0)]),_:1})]),_:1})]),_:1})}}}),Ll=Pe($l,[["__scopeId","data-v-2c68d313"]]),El=["innerHTML"],Pl={style:{"flex-grow":"1"}},Ml=_e({__name:"converter",props:{input:{},format:{},quality:{},retainExtension:{type:Boolean},maxZipSizeMB:{},threads:{}},emits:["start","end","multi-thread-count"],setup(o,{emit:i}){Ze(Me);const{t:c}=Le(),d=at(),a=Wo(),r=qo(),l=10,m=navigator.hardwareConcurrency,w=typeof OffscreenCanvas=="function",f=300,_=o,v=i,x=b(!1),T=b(!1),k=b(!1),g=b(0),z=b(!1),O=b(!1),P=b("initializing"),$=b("info"),s=ot(Z());let h=!1,A=()=>{},M=0,E=!1;Ae(()=>_.input,U=>{U!=null&&U.length&&he(U)}),ke(async()=>{await W(),ge()});function L(){if(M>l*1e3&&!E&&s.success>0)return d.warning({title:c("confirmCloseDialogTitle"),autoFocus:!0,maskClosable:!1,positiveText:c("close"),negativeText:c("back"),onPositiveClick(){z.value=!1,r.destroyAll(),a.destroyAll()},onNegativeClick(){},content:c("confirmCloseDialog")}),!1;r.destroyAll(),a.destroyAll(),z.value=!1}function re(U){s.demandImage(U)}function D(){!T.value&&x.value?T.value=!0:L()}function q(){he(_.input)}let F=b(()=>{});function Z(U){const C={logs:[],index:0,converted:0,success:0,failure:0,done:0,length:0,zippedTotalCount:0,zippingErrorCount:0,zippedTotalSize:0,processing:!1,zips:[],inputTotalSize:0,outputTotalSize:0,thumbnail:null,baseZipName:"testzipname",type:"image/any",startedTime:Date.now(),convertedImageDataUrl:"",convertedImageName:"",convertedImageUrl:"",zipSize:_.maxZipSizeMB,unconvertedListText:"",failedZipDone:!1,failedZips:[],unconvertedFileCount:0,unconvertedTotalSize:0,failedFileZippedCount:0,failedToCreateFailedZip:!1,demandImage:()=>{}};return Object.assign(U||{},C)}function te(){O.value=!1,URL.revokeObjectURL(s.convertedImageUrl);for(const U of s.zips)URL.revokeObjectURL(U.url);s.zips.length=0;for(const U of s.failedZips)URL.revokeObjectURL(U.url);s.failedZips.length=0,Z(s),A(),A=()=>{},E=!1,k.value=!1,T.value=!1}async function he(U){if(x.value){d.error({title:"Busy",positiveText:"OK",content:c("interfered")});return}let C=ne(U);Z(s),te();const R={convertedImageBlob:null,convertedImageWidth:0,convertedImageHeight:0,convertedImageName:""};g.value++,z.value=!0,O.value=!0,x.value=!0,s.processing=!0,$.value="info",P.value=c("processing");const ae=new Set,Y=_.format,ce=_.quality,Te=[...Y.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),Ve=oe(Y,ce);s.length=C.length,s.baseZipName=Ve,s.type=Y.replace(/image\//,"").toUpperCase()+(/jpe?g|webp/i.test(Y)?" ("+ce+")":""),s.threads=h?0:_.threads;const ze=Date.now();v("start");const xe=C.concat();let Qe;if({callbackToGenerateFailedZips:Qe,callbackToClearConverter:A}=!h&&_.threads>=2?await qa(s,T,_,R,a,r,xe,ae,Y,ce,Te,Y):await Ya(xe,ae,R,_,T,s),s.length===1&&await pe(Te,R),s.success===s.length?($.value="success",P.value=c("completed")):($.value="error",P.value=T.value?c("aborted"):c("incomplete")),ae.size!==C.length){const Fe=fe(C,ae);F.value=()=>{!Fe||!Fe.length||Qe(Fe)}}x.value=!1,s.processing=!1,k.value=!0,M=Date.now()-ze,v("end")}async function pe(U,C){if(C.convertedImageBlob){const R=new FileReader;R.readAsDataURL(C.convertedImageBlob);const ae=await gt(R).then(Y=>Y.target.result);s.convertedImageName=C.convertedImageName.replace(/^.*\/(?=[^/]+$)/,"").replace(_.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+U,s.convertedImageUrl=URL.createObjectURL(C.convertedImageBlob),s.convertedImageDataUrl=ae,s.convertedImageWidth=C.convertedImageWidth,s.convertedImageHeight=C.convertedImageHeight}}function fe(U,C){const R=[],ae=[];let Y=0;for(const ce of U)C.has(ce._id)||(R.push(ce),ae.push(ce.webkitRelativePath||ce.relativePath||ce.name),Y+=ce.size);return ae.length&&(s.unconvertedListText=ae.join(`
`),s.unconvertedFileCount=R.length,s.unconvertedTotalSize=Y),R}let ue=0;function ne(U){const C=[];for(const R of U)R.hasOwnProperty("_id")||Object.defineProperty(R,"_id",{value:ue++}),C.push(R);return C}function oe(U,C){const R=new Date;return U=U.replace(/^image\//,"").toLowerCase(),`avif2jpg-
    ${R.getFullYear().toString().substring(2)}
    ${String((R.getMonth()+1)*100+R.getDate()).padStart(4,"0")}
    ${String(R.getHours()*1e4+R.getMinutes()*100+R.getSeconds()).padStart(6,"0")}
    -
    ${U+(/jpe?g|webp/i.test(U)?C:"")}
  `.replace(/\s/g,"")}async function W(){const U="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",C=document.createElement("img"),R=gt(C).then(()=>!0,()=>!1);C.src=U,await R||d.warning({title:"Unsupported",positiveText:"OK",maskClosable:!1,content:c("avifUnsupported")})}function ge(){(!w||m<2||!Promise.any)&&(h=!0),v("multi-thread-count",h?0:m)}return(U,C)=>{const R=Ce,ae=$e,Y=Ie,ce=Be,Te=Ne,Ve=vt;return I(),Q(we,null,[n(Y,{justify:"center",align:"center"},{default:t(()=>{var ze;return[!e(x)&&((ze=_.input)!=null&&ze.length)?(I(),N(ae,{key:0,trigger:"hover",placement:"top","keep-alive-on-hover":!1,duration:0,delay:50},{trigger:t(()=>[n(R,{onClick:q,round:""},{default:t(()=>[S(p(e(c)("convertAgain")),1)]),_:1})]),default:t(()=>{var xe;return[y("div",{innerHTML:e(c)("reconvertTip",(xe=_.input)==null?void 0:xe.length)},null,8,El)]}),_:1})):X("",!0)]}),_:1}),n(Ve,{ref:"processingModal",show:e(z),"onUpdate:show":C[2]||(C[2]=ze=>be(z)?z.value=ze:null),closable:e(k),"close-on-esc":!1,preset:"dialog","display-directive":"show",onClick:C[3]||(C[3]=ze=>{e(r).destroyAll(),e(a).destroyAll()}),onMaskClick:C[4]||(C[4]=ze=>{e(r).destroyAll(),e(a).destroyAll()}),onClose:L,onEsc:D,title:e(P),type:e($),"mask-closable":!1,"on-after-leave":te,class:"processing-dialog"},{default:t(()=>[n(Te,{vertical:"",style:{"flex-grow":"1"}},{default:t(()=>[y("div",Pl,[e(O)?(I(),N(Ll,{key:e(g),processing:e(x),status:e(s),interval:f,onAllZipsClicked:C[0]||(C[0]=ze=>be(E)?E.value=!0:E=!0),onDemandZipErrors:e(F),onDemandImage:re},null,8,["processing","status","onDemandZipErrors"])):X("",!0)]),n(Te,{justify:"end"},{default:t(()=>[e(x)?(I(),N(R,{key:0,disabled:e(T),ref:"cancelbutton",round:"",size:"large",onClick:C[1]||(C[1]=ze=>T.value=!0)},{default:t(()=>[n(ce,{show:e(T)&&!e(k),size:"small"},{default:t(()=>[S(p(e(c)("cancel")),1)]),_:1},8,["show"])]),_:1},8,["disabled"])):e(k)?(I(),N(R,{key:1,onClick:L,round:"",size:"large",style:{"font-size":"small","margin-top":"1em"}},{default:t(()=>[S(p(e(c)("close")),1)]),_:1})):X("",!0)]),_:1})]),_:1})]),_:1},8,["show","closable","title","type"])],64)}}}),Fl="/avif2jpeg/dist/avif.png",ln=o=>(ht("data-v-61ec1790"),o=o(),yt(),o),Dl={class:"container-1"},jl=ln(()=>y("span",null,"Drag & Drop",-1)),Ol={style:{position:"relative"}},Ul={style:{position:"absolute","font-size":"small",right:"-3.5em",bottom:"-1.1em","white-space":"nowrap"}},Bl={style:{color:"#666666","font-size":"smaller"}},Rl=ln(()=>y("img",{src:Fl,class:"avif"},null,-1)),Zl=["innerHTML"],Nl={style:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","font-size":"xx-small","white-space":"nowrap"}},Vl=_e({__name:"droptarget",props:{forbidden:{type:Boolean},dropTarget:{}},emits:["drop"],setup(o,{emit:i}){Ze(Me);const c=o,d=i,a=Go(),r=b(!1),l=b(0),m=b("");ke(()=>{w(c.dropTarget||document)});function w(_){document.ondragstart=v=>v.preventDefault(),document.ondragover=v=>v.preventDefault(),_.ondrop=async v=>{var T;if(v.preventDefault(),r.value||c.forbidden)return;r.value=!0,l.value=0,m.value="";let x;try{const k=[...v.dataTransfer.items].map(g=>g.webkitGetAsEntry());a.start(),x=await f(k),a.finish()}catch{x=[...((T=v.dataTransfer)==null?void 0:T.files)??[]],a.error()}r.value&&(r.value=!1,d("drop",x))}}async function f(_,v){v=v||[];for(const x of _)if(x.isFile){const T=await new Promise(k=>x.file(g=>k(g)));Object.defineProperty(T,"webkitRelativePath",{value:x.fullPath}),v.push(T),l.value++}else if(x.isDirectory){m.value=x.fullPath;const T=x.createReader();do{const k=await new Promise(g=>T.readEntries(z=>g(z)));if(!k.length)break;await f(k,v)}while(!0)}return v}return(_,v)=>{const x=ve,T=Ie,k=Ke,g=$e,z=vt;return I(),Q(we,null,[y("div",Dl,[n(g,{to:!1,"display-directive":"show",trigger:"hover",duration:0,delay:0,placement:"left"},{trigger:t(()=>[n(T,{vertical:"",class:"container-2"},{default:t(()=>[n(T,{align:"center",wrap:!1,class:"container-3"},{default:t(()=>[n(T,{align:"center"},{default:t(()=>[n(x,{size:"64",color:"white"},{default:t(()=>[n(e(Ko))]),_:1})]),_:1}),n(T,{vertical:"",align:"center",wrap:!1,style:{"font-weight":"bold","font-size":"x-large","line-height":"90%","white-space":"nowrap"}},{default:t(()=>[jl,y("span",Ol,[S(" AVIF Images "),y("span",Ul,[S(" or "),n(k,{placement:"bottom-end"},{trigger:t(()=>[y("span",Bl,[n(x,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Qt))]),_:1}),S(" Folders ")])]),default:t(()=>[S(" You can drag and drop your local folders ")]),_:1})])])]),_:1}),n(T,null,{default:t(()=>[Rl]),_:1})]),_:1})]),_:1})]),default:t(()=>[y("h3",{innerHTML:_.$t("droptarget"),style:{"max-width":"200px","text-align":"center","word-break":"keep-all","overflow-wrap":"break-word"}},null,8,Zl)]),_:1})]),n(z,{show:e(r),"onUpdate:show":v[0]||(v[0]=O=>be(r)?r.value=O:null),closable:!0,preset:"dialog",title:"Parsing dropped items.",type:"info","mask-closable":!1,"negative-text":_.$t("cancel")},{default:t(()=>[n(T,{vertical:"",align:"center"},{default:t(()=>[y("div",Nl,p(e(m)),1),y("div",null,"found "+p(e(l))+" files",1)]),_:1})]),_:1},8,["show","negative-text"])],64)}}}),Hl=Pe(Vl,[["__scopeId","data-v-61ec1790"]]),sn=o=>(ht("data-v-977d699f"),o=o(),yt(),o),Wl={class:"container-1"},ql={class:"container-2"},Gl=["innerHTML"],Kl=["innerHTML"],Ql={style:{"padding-left":"1em"}},Yl=sn(()=>y("br",null,null,-1)),Jl=sn(()=>y("ul",null,[y("li",null,"Each extension must begin with a period. "),y("li",null,"Separate each extension with a comma. "),y("li",null,"Use alphameric characters.")],-1)),Xl=["innerHTML"],es=["accept"],ts=_e({__name:"file-selector",props:{expanded:{type:Boolean},target:{},userExtensions:{},forbidden:{type:Boolean}},emits:["input","on-change-accept","update:target","update:userExtensions","update:expanded"],setup(o,{emit:i}){const c=at(),{t:d}=Le(),a=Ze(Me),r=["avif_only","all_images","all_files","edit_type"],l=o,m=i,w=b(0),f=b(!1),_=b(!1),v=de(()=>E(g.value)),x=de(()=>z.value.split(",").every(q=>/^\s*(\.[\w\-]+)*\s*$/.test(q))?"success":"error"),T=de(()=>!l.forbidden&&!_.value),k=de({get:()=>l.expanded,set:D=>{m("update:expanded",D)}}),g=de({get:()=>r.indexOf(l.target)>=0?l.target:r[0],set:D=>{m("update:target",D)}}),z=de({get:()=>l.userExtensions,set:D=>{m("update:userExtensions",D)}}),O=b(null),P=b(null),$=b(M());Ae(g,D=>{m("on-change-accept",v.value)}),ke(()=>{});function s(D){D.click()}function h(){}function A(D){const F=[...D.target.files];O.value.value="",P.value.value="",re(F)}function M(){return"webkitdirectory"in document.createElement("input")}function E(D){switch(D){case"avif_only":return".avif, .webp";case"all_images":return".jpg, .jpeg, .jfif, .pjpeg, .pjp, .gif, .png, .webp, .avif, .bmp, .apng, .ico";case"edit_type":return z.value;case"all_files":default:return".*"}}async function L(D){const q=String(v.value).toLowerCase().replace(/\s+/g,"");if(q&&v.value!==".*"){const F=q.split(",");D=D.filter(Z=>F.includes(Z.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),D.length||await new Promise(Z=>{c.error({title:"Images Not Found",positiveText:"OK",onAfterLeave:Z,content:()=>ie("div",[ie(qt,{description:"NO IMAGES"}),`${d("noimage")}`,ie("br"),v.value])})})}return D}async function re(D){_.value=!0,D=await L(D),w.value=D.length,D.length>0&&m("input",D),_.value=!1}return(D,q)=>{const F=ve,Z=Gt,te=Ce,he=$e,pe=Ie,fe=ta,ue=Qo,ne=Yo,oe=Ke,W=Jo,ge=At,U=zt;return I(),Q(we,null,[y("div",Wl,[y("div",ql,[n(pe,{vertical:"",align:"center",justify:"center",inline:""},{default:t(()=>[n(pe,{align:"center",justify:"space-around"},{default:t(()=>[n(Z,{value:e(w),max:999,offset:[-8,0],color:"#999999",style:{"margin-right":"1em"}},{default:t(()=>[n(F,{size:"4em",color:"#CCCCCC"},{default:t(()=>[n(e(Xo))]),_:1})]),_:1},8,["value"]),n(pe,{vertical:"",align:"stretch",justify:"center"},{default:t(()=>[n(he,{to:!1,"display-directive":"show",show:e(a).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(a).LANDSCAPE.value?"right":"top",duration:0,delay:0,"z-index":10},{trigger:t(()=>[n(te,{disabled:!e(T),onClick:q[0]||(q[0]=C=>s(e(O))),round:"",style:{width:"100%"},color:"white","text-color":"black"},{icon:t(()=>[n(F,{size:"large",color:"gray"},{default:t(()=>[n(e(Yt))]),_:1})]),default:t(()=>[S(" "+p(D.$t("loadbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[y("div",{innerHTML:D.$t("loadbuttontooltip")},null,8,Gl)]),_:1},8,["show","placement"]),!e(a).IS_SP&&e($)||e(a).SSR?(I(),N(he,{key:0,to:!1,"display-directive":"show",trigger:"hover",placement:"left","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:e(a).showTooltipsBeforeMounted.value},{trigger:t(()=>[n(te,{disabled:!e(T),onClick:q[1]||(q[1]=C=>s(e(P))),round:"",style:{width:"100%"},color:"white","text-color":"black"},{icon:t(()=>[n(F,{size:"large",color:"gray"},{default:t(()=>[n(e(Qt))]),_:1})]),default:t(()=>[S(" "+p(D.$t("loadfolderbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[y("div",{innerHTML:D.$t("loadfoldertooltip")},null,8,Kl)]),_:1},8,["show"])):X("",!0)]),_:1})]),_:1}),y("div",{class:We({"expand-ext-list-container":e(k)})},[n(U,{"display-directive":"show","expanded-names":e(k)?["extItem"]:"","on-update:expanded-names":C=>{k.value=!!(""+C)},class:We({"expand-ext-list":e(k)})},{"header-extra":t(()=>[n(F,{size:"large"},{default:t(()=>[n(e(ea))]),_:1})]),default:t(()=>[n(ge,{title:D.$t("fileTypeRadioTitle"),name:"extItem"},{default:t(()=>[n(W,{value:e(g),"onUpdate:value":q[5]||(q[5]=C=>be(g)?g.value=C:null),name:"filetyperadios",size:"small"},{default:t(()=>[n(pe,{vertical:"",style:{"padding-left":"1em"}},{default:t(()=>[(I(),Q(we,null,Ue(r,C=>n(he,{key:C,trigger:"hover","keep-alive-on-hover":!1,"z-index":5,placement:"left",style:{"max-width":"200px"},duration:0,delay:0},{trigger:t(()=>[n(fe,{value:C},{default:t(()=>[S(p(D.$t("fileTypeRadioOptions."+C)),1)]),_:2},1032,["value"])]),default:t(()=>[S(" "+p(E(C).replace(/,/g,", ")),1)]),_:2},1024)),64)),n(he,{trigger:"hover","keep-alive-on-hover":!1,placement:"bottom-start",show:e(f),duration:0,delay:0},{trigger:t(()=>[y("div",Ql,[n(oe,{trigger:"manual",placement:"right-end",show:e(g)==="edit_type"&&e(x)!=="success"&&!!e(f)},{trigger:t(()=>[n(ue,{value:e(z),"onUpdate:value":q[2]||(q[2]=C=>be(z)?z.value=C:null),status:e(x),disabled:e(g)!=="edit_type",onFocus:q[3]||(q[3]=C=>f.value=!0),onBlur:q[4]||(q[4]=C=>f.value=void 0),clearable:!0,size:"small",placeholder:".jpg, .gif, .png",spellcheck:"false"},null,8,["value","status","disabled"])]),default:t(()=>[n(ne,{type:"error","show-icon":!0,title:"Validation error"},{default:t(()=>[S(" Please correct the extension list."),Yl,Jl]),_:1})]),_:1},8,["show"])])]),default:t(()=>[y("span",{innerHTML:D.$t("editAcceptTypes")},null,8,Xl)]),_:1},8,["show"])]),_:1})]),_:1},8,["value"])]),_:1},8,["title"])]),_:1},8,["expanded-names","on-update:expanded-names","class"])],2),e(a).IS_SP?X("",!0):(I(),N(Hl,{key:0,onDrop:re,forbidden:!e(T)},null,8,["forbidden"]))]),_:1})])]),y("input",{ref_key:"fileinput",ref:O,onInput:A,onCancel:h,type:"file",multiple:"",accept:e(v),style:{display:"none"}},null,40,es),y("input",{ref_key:"folderinput",ref:P,webkitdirectory:"",directory:"",onInput:A,onCancel:h,type:"file",style:{display:"none"}},null,544)],64)}}}),ns=Pe(ts,[["__scopeId","data-v-977d699f"]]),os={style:{"white-space":"nowrap"}},as=_e({__name:"settings-output",props:{quality:{},format:{}},emits:["update:format","update:quality"],setup(o,{emit:i}){const c=o,d=i,{t:a}=Le(),r=Ze(Me),l=b([]),m=["image/jpeg","image/png","image/gif","image/bmp","image/avif","image/webp"],w=de({get:()=>c.format,set:k=>{k=x(k),d("update:format",k)}}),f=de({get:()=>c.quality,set:k=>{d("update:quality",k)}}),_=de(()=>/png|bmp/i.test(w.value)),v=b(null);ke(()=>{T()});function x(k){return l.value.indexOf(k)<0&&(k=l.value[0]),k}function T(){for(const k of m)v.value.toDataURL(k).indexOf(k)>=0&&l.value.push(k);l.value.length===0&&l.value.push(m[0])}return(k,g)=>{const z=ve,O=Jt,P=Ie,$=$e,s=wt,h=Xt;return I(),Q(we,null,[n(P,{justify:"center"},{default:t(()=>[n(P,{vertical:""},{default:t(()=>[n($,{to:!1,"display-directive":"show",show:e(r).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(r).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(P,{align:"center"},{default:t(()=>[n(z,null,{default:t(()=>[n(e(Yt))]),_:1}),S(p(e(a)("settings.imageType"))+": ",1),n(O,{value:w.value,"onUpdate:value":g[0]||(g[0]=A=>w.value=A),options:l.value.map(A=>({value:A,label:A})),"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),_:1})]),default:t(()=>[S(" "+p(e(a)("settings.imageTypeTooltip")),1)]),_:1},8,["show","placement"]),n($,{to:!1,"display-directive":"show",show:e(r).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(r).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(P,{align:"center"},{default:t(()=>[n(P,{align:"start",wrap:!1},{default:t(()=>[n(z,null,{default:t(()=>[n(e(Kt))]),_:1}),y("span",os,p(e(a)("settings.quality"))+":",1),n(P,{align:"center",justify:"space-between"},{default:t(()=>[n(s,{tooltip:!1,value:f.value,"onUpdate:value":g[1]||(g[1]=A=>f.value=A),step:1,style:{width:"120px"},disabled:_.value},null,8,["value","disabled"]),n(h,{value:f.value,"onUpdate:value":g[2]||(g[2]=A=>f.value=A),step:"1",min:"0",max:"100",disabled:_.value,style:{width:"90px"},size:"small"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:t(()=>[S(" "+p(e(a)("settings.qualitytooltip")),1)]),_:1},8,["show","placement"])]),_:1})]),_:1}),y("canvas",{ref_key:"canvas",ref:v,width:"1",height:"1",style:{display:"none"}},null,512)],64)}}}),Et=100,Pt=2e3,ls=_e({__name:"settings-adv",props:{expanded:{type:Boolean},retainExt:{type:Boolean},maxZipSize:{},multithread:{type:Boolean},threadCount:{},threadMax:{}},emits:["update:expanded","update:retainExt","update:maxZipSize","update:multithread","update:threadCount"],setup(o,{emit:i}){const c=o,d=i,a=de({get:()=>c.expanded,set:f=>{d("update:expanded",f)}}),r=de({get:()=>c.retainExt,set:f=>{d("update:retainExt",f)}}),l=de({get:()=>c.maxZipSize,set:f=>{d("update:maxZipSize",f)}}),m=de({get:()=>c.multithread,set:f=>{d("update:multithread",f)}}),w=de({get:()=>typeof c.threadCount>"u"?c.threadMax:c.threadCount,set:f=>{d("update:threadCount",f)}});return Ae(()=>[c.threadMax,c.threadCount],([f])=>{f>1&&typeof c.threadCount>"u"&&(w.value=f)}),(f,_)=>{const v=ve,x=Ce,T=$e,k=na,g=Ne,z=wt,O=Xt,P=At,$=zt;return I(),N(g,{justify:"center"},{default:t(()=>[n($,{"display-directive":"show","default-expanded-names":e(a)?["collapitem"]:"","on-update:expanded-names":s=>a.value=!!String(s),"trigger-areas":["arrow","main"],class:We(["settings-body",e(a)?"expand-adv-settings":""])},Wt({arrow:t(()=>[n(v,{style:J(e(a)&&{top:"8px"})},{default:t(()=>[n(e(oa))]),_:1},8,["style"]),n(v,null,{default:t(()=>[n(e(aa))]),_:1})]),default:t(()=>[n(P,{title:f.$t("settings.advancedSettings"),name:"collapitem"},{default:t(()=>[n(g,{vertical:"",style:{"padding-left":"2em"}},{default:t(()=>[n(T,{trigger:"hover",placement:"left","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(g,{wrap:!1,align:"center"},{default:t(()=>[n(x,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:_[0]||(_[0]=s=>r.value=!e(r))},{icon:t(()=>[n(v,null,{default:t(()=>[n(e(Ht))]),_:1})]),default:t(()=>[S(" "+p(f.$t("settings.retainOriginalExtension")),1)]),_:1}),n(k,{value:e(r),"onUpdate:value":_[1]||(_[1]=s=>be(r)?r.value=s:null),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[S(" "+p(f.$t("settings.retainExtTooltip")),1)]),_:1}),n(T,{trigger:"hover",placement:"left","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(g,{vertical:""},{default:t(()=>[n(g,{wrap:!1,align:"center"},{default:t(()=>[n(x,{text:"",focusable:!1,style:{"white-space":"nowrap","font-size":"smaller"}},{icon:t(()=>[n(v,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(la))]),_:1})]),default:t(()=>[S(" "+p(f.$t("settings.maxZipFileSize"))+": ",1)]),_:1})]),_:1}),n(g,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(z,{tooltip:!1,value:e(l),"onUpdate:value":_[2]||(_[2]=s=>be(l)?l.value=s:null),step:1,min:Et,max:Pt,style:{width:"120px"}},null,8,["value"]),n(O,{size:"tiny",value:e(l),"onUpdate:value":_[3]||(_[3]=s=>be(l)?l.value=s:null),step:"1",min:Et,max:Pt,style:{width:"10em"}},{suffix:t(()=>[S("(MB)")]),_:1},8,["value"])]),_:1})]),_:1})]),default:t(()=>[S(" "+p(f.$t("settings.maxZipFileSizeTooltip")),1)]),_:1}),n(T,{trigger:"hover",placement:"left","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(g,{vertical:""},{default:t(()=>[n(g,{wrap:!1,align:"center"},{default:t(()=>[n(x,{text:"",disabled:!c.threadMax,style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:_[4]||(_[4]=s=>m.value=!e(m))},{icon:t(()=>[n(v,null,{default:t(()=>[n(e(sa))]),_:1})]),default:t(()=>[S(" "+p(f.$t("settings.enableMultiThreads")),1)]),_:1},8,["disabled"]),n(k,{value:e(m),"onUpdate:value":_[5]||(_[5]=s=>be(m)?m.value=s:null),disabled:!c.threadMax,size:"small"},null,8,["value","disabled"])]),_:1}),n(g,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(z,{value:e(w),"onUpdate:value":_[6]||(_[6]=s=>be(w)?w.value=s:null),disabled:!c.threadMax||!e(m),step:1,min:2,max:c.threadMax,style:{width:"120px"}},null,8,["value","disabled","max"]),n(O,{size:"tiny",value:e(w),"onUpdate:value":_[7]||(_[7]=s=>be(w)?w.value=s:null),disabled:!c.threadMax||!e(m),step:1,min:2,max:c.threadMax,style:{width:"10em"}},{suffix:t(()=>[S(p(f.$t("threads",e(w))),1)]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[S(" "+p(f.$t("settings.multiThreadsTooltip")),1)]),_:1})]),_:1})]),_:1},8,["title"])]),_:2},[e(a)?{name:"header-extra",fn:t(()=>[n(T,{"keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(x,{onClick:e(Aa),size:"tiny",style:{"font-size":"xx-small"}},{default:t(()=>[S(p(f.$t("reset")),1)]),_:1},8,["onClick"])]),default:t(()=>[S(" "+p(f.$t("settings.resetButtonTooltip")),1)]),_:1})]),key:"0"}:void 0]),1032,["default-expanded-names","on-update:expanded-names","class"])]),_:1})}}}),ss=Pe(ls,[["__scopeId","data-v-69ab40d5"]]),is={},rs={style:{color:"gray","padding-left":"20px"}},us=["innerHTML"];function cs(o,i){const c=_t,d=Ie;return I(),N(d,{vertical:"",justify:"end"},{default:t(()=>[n(c,{style:{margin:"0px"}}),n(d,{justify:"center"},{default:t(()=>[y("ul",rs,[(I(!0),Q(we,null,Ue(o.$tm("descriptions"),a=>(I(),Q("li",{key:a,style:{"text-align":"left"},innerHTML:a},null,8,us))),128))])]),_:1})]),_:1})}const ds=Pe(is,[["render",cs]]),ps="modulepreload",fs=function(o){return"/avif2jpeg/dist/"+o},Mt={},se=function(i,c,d){let a=Promise.resolve();if(c&&c.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),m=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(c.map(w=>{if(w=fs(w),w in Mt)return;Mt[w]=!0;const f=w.endsWith(".css"),_=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${w}"]${_}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":ps,f||(v.as="script"),v.crossOrigin="",v.href=w,m&&v.setAttribute("nonce",m),document.head.appendChild(v),f)return new Promise((x,T)=>{v.addEventListener("load",x),v.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${w}`)))})}))}function r(l){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=l,window.dispatchEvent(m),!m.defaultPrevented)throw l}return a.then(l=>{for(const m of l||[])m.status==="rejected"&&r(m.reason);return i().catch(r)})},rn="English",un="üá¨üáß",cn='AVIF to JPEG "Offline" Batch Converter',dn="It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",pn="Drag & Drop AVIF Images to Convert",fn=["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data is sent to any server</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.'],gn="Select your language",mn="Choose Target File Extentions",vn={avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types",edit_type:"Edit File Extension List"},_n="Input a list of comma separated file extentions to load.<br>e.g.) .jpg,.gif,.png",hn="Load Images",yn="Select your images from a dialog window.<br>*Multiple selection allowed.",wn="Load a Whole Folder",bn=`Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>*It will show "Upload" button, but it actually doesn't upload anything to any server.`,An="Converting images",zn="Aborted",xn="Some files failed to convert",kn="Completed",Tn="Currently Busy",In="No files with the extentions were found.",Sn="Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",Cn="Cancel",$n="Save",Ln="Close",En="Open",Pn="Re-convert",Mn="Convert previous selected {n} @:files again",Fn="File | Files",Dn="thread | threads",jn="You have not saved the converted images yet.",On="Data have not been saved",Un="Open Source",Bn="Open the converted image",Rn="Copied to clipboard",Zn="The converted image was copied to your clipboard as DataURL.",Nn="Copy the converted image as DataURL",Vn="Convert Again",Hn={expandLogTooltip:"Displaying the entire log may severely reduce conversion speed.",expandLog:"Show entire log",autoScroll:"Auto scroll",showOnlyErrors:"Show only errors",log:"Log",outInRate:"Out / In Ratio",elapsedTime:"Elapsed Time",multiThreading:"Multi-Threading",outputSettings:"Output Settings",totalSize:"Total Size",totalFiles:"Number of Files",confirmDownloadMessage:"It will start to download {0} zip files.",inputSize:"Input Size",outputSize:"Output Size",filterSuccess:"Hide completed item",progressErrors:"Failed items",progressStarted:"Started Items",progressTotal:"Total number of files",zippingProgress:"Zipping progress",zipped:"ZIPPED",openFailedList:"Open failed file list",zipFailedList:"Pack failed files into Zips",table:{index:"index",status:"status",core:"thread",details:"file"},saveFailedList:"Save failed file list",done:"done",convertedZips:"successfully completed ZIP",progressSuccess:"Completed Files",downloadConvertedImage:"Download Converted Image",failureZippingFailedFiles:"Failure while zipping the failed files.",browseConvertedImages:"Browse converted images",index:"Index"},Wn={maxZipFileSize:"Max zip file size",retainExtTooltip:"New extension will be appended to original extension",retainOriginalExtension:"Keep Original File Extension",qualitytooltip:"Set image quality for output",quality:"Image Quality",maxZipFileSizeTooltip:"Set smaller value if memory problems occur.",ignoreExtTooltip:'Try to load files that don"t have image file extension',ignoreFileExtensions:"Load All File Types",imageTypeTooltip:"Choose image format for output",imageType:"Image Type",advancedSettings:"Advanced Settings",enableMultiThreads:"Enable multi-threading",resetButtonTooltip:"Restore all settings to default.",multiThreadsTooltip:"Convert images in multi-threaded"},qn="Disabled",Gn="Download",Kn="Reset",Qn="Back",Yn="Failed",Jn="Success",Xn="Previous version",eo={lang:rn,flags:un,title:cn,metaDescription:dn,droptarget:pn,descriptions:fn,selectLanguage:gn,fileTypeRadioTitle:mn,fileTypeRadioOptions:vn,editAcceptTypes:_n,loadbutton:hn,loadbuttontooltip:yn,loadfolderbutton:wn,loadfoldertooltip:bn,processing:An,aborted:zn,incomplete:xn,completed:kn,interfered:Tn,noimage:In,avifUnsupported:Sn,cancel:Cn,save:$n,close:Ln,open:En,reconvert:Pn,reconvertTip:Mn,files:Fn,threads:Dn,confirmCloseDialog:jn,confirmCloseDialogTitle:On,githubOpenSource:Un,convertedImageUrlTooltip:Bn,copiedDataURLDialogTitle:Rn,copiedDataURLMessage:Zn,convertedImageDataUrlTooltip:Nn,convertAgain:Vn,status:Hn,settings:Wn,disabled:qn,Download:Gn,reset:Kn,back:Qn,failed:Yn,success:Jn,previousVersion:Xn},gs=Object.freeze(Object.defineProperty({__proto__:null,Download:Gn,aborted:zn,avifUnsupported:Sn,back:Qn,cancel:Cn,close:Ln,completed:kn,confirmCloseDialog:jn,confirmCloseDialogTitle:On,convertAgain:Vn,convertedImageDataUrlTooltip:Nn,convertedImageUrlTooltip:Bn,copiedDataURLDialogTitle:Rn,copiedDataURLMessage:Zn,default:eo,descriptions:fn,disabled:qn,droptarget:pn,editAcceptTypes:_n,failed:Yn,fileTypeRadioOptions:vn,fileTypeRadioTitle:mn,files:Fn,flags:un,githubOpenSource:Un,incomplete:xn,interfered:Tn,lang:rn,loadbutton:hn,loadbuttontooltip:yn,loadfolderbutton:wn,loadfoldertooltip:bn,metaDescription:dn,noimage:In,open:En,previousVersion:Xn,processing:An,reconvert:Pn,reconvertTip:Mn,reset:Kn,save:$n,selectLanguage:gn,settings:Wn,status:Hn,success:Jn,threads:Dn,title:cn},Symbol.toStringTag,{value:"Module"})),to="Japanese",no="Chinese",oo="Ukrainian",ao="Turkish",lo="Russian",so="Portuguese",io="Polish",ro="Dutch",uo="Korean",co="Italian",po="Indonesian",fo="Hindi",go="French",mo="Spanish",vo="English",_o="German",ho="Arabic",yo={ja:to,zh:no,"zh-hant":"Chinese(hant)",uk:oo,tr:ao,ru:lo,pt:so,pl:io,nl:ro,ko:uo,it:co,id:po,hi:fo,fr:go,es:mo,en:vo,de:_o,ar:ho},ms=Object.freeze(Object.defineProperty({__proto__:null,ar:ho,de:_o,default:yo,en:vo,es:mo,fr:go,hi:fo,id:po,it:co,ja:to,ko:uo,nl:ro,pl:io,pt:so,ru:lo,tr:ao,uk:oo,zh:no},Symbol.toStringTag,{value:"Module"})),tt=[],wo={en:eo},xt={},Ft=Object.assign({"./locales/ar.json":()=>se(()=>import("./ar-BK5Z4_Ed.js"),[]),"./locales/de.json":()=>se(()=>import("./de-CBiMyTLM.js"),[]),"./locales/en.json":()=>se(()=>Promise.resolve().then(()=>gs),void 0),"./locales/es.json":()=>se(()=>import("./es-06B2tm50.js"),[]),"./locales/fr.json":()=>se(()=>import("./fr-DrJ3bmfp.js"),[]),"./locales/hi.json":()=>se(()=>import("./hi-Bkb3cLVu.js"),[]),"./locales/id.json":()=>se(()=>import("./id-ivcoh-Ec.js"),[]),"./locales/it.json":()=>se(()=>import("./it-XEMQFe6E.js"),[]),"./locales/ja.json":()=>se(()=>import("./ja-C6jnvmCo.js"),[]),"./locales/ko.json":()=>se(()=>import("./ko-VJSkptVr.js"),[]),"./locales/langlist.json":()=>se(()=>Promise.resolve().then(()=>ms),void 0),"./locales/nl.json":()=>se(()=>import("./nl-DCLfsfBW.js"),[]),"./locales/pl.json":()=>se(()=>import("./pl-D_pDciFv.js"),[]),"./locales/pt.json":()=>se(()=>import("./pt-B7B4dS-y.js"),[]),"./locales/ru.json":()=>se(()=>import("./ru-l9fSx8zH.js"),[]),"./locales/tr.json":()=>se(()=>import("./tr-Cg1DKcVd.js"),[]),"./locales/uk.json":()=>se(()=>import("./uk-B_p2jGkh.js"),[]),"./locales/zh-hant.json":()=>se(()=>import("./zh-hant-BRbKmTxx.js"),[]),"./locales/zh.json":()=>se(()=>import("./zh-DYNcCzHg.js"),[])});var Dt;for(const o in Ft){const i=(Dt=o.match(/\/([a-z]{2}(?:-[a-z]+)?)\.json$/i))==null?void 0:Dt[1];i&&(tt.push(i),!(i in wo)&&(xt[i]=Ft[o]))}let mt=_s();mt in xt||(mt="en");const nt=ia({legacy:!1,globalInjection:!0,locale:mt,fallbackLocale:"en",messages:wo,warnHtmlMessage:!1,missingWarn:!1,fallbackWarn:!1});async function vs(o){if(nt.global.availableLocales.indexOf(o)>=0)return;const i=await xt[o]();nt.global.setLocaleMessage(o,i),await bt()}function _s(){const o=location.pathname;return String(o.match(/[^/]+(?=\/?$)/)||"").toLowerCase()}const hs=["innerHTML"],ys=_e({__name:"switch-lang",emits:["lang-ready","lang-change"],async setup(o,{emit:i}){let c,d;const a=Ze(Me),r=Ot(),{locale:l,t:m}=Le(),w=i,f=Object.entries(yo).map(([g,z])=>({label:z,value:g}));f.sort((g,z)=>{const O=g.label,P=z.label;return O>P?1:O<P?-1:0}),ke(()=>{r.afterEach((g,z,O)=>{v(),a.switchToolTipVisibility()})}),ra(async()=>{}),[c,d]=ua(()=>v()),await c,d();async function _(g){(g!==l.value||nt.global.availableLocales.indexOf(g)===-1)&&(w("lang-change",g),await vs(g),l.value=g,document.title=m("title"),await bt()),w("lang-ready",g)}async function v(){const g=r.currentRoute.value.path||"",z=String(g.match(new RegExp("(?<=^\\/)[^/]+"))||"");z&&tt.includes(z)?(await _(z),l.value=z):await x()}async function x(){const g=T().toLowerCase(),z=g.split(/[-_]/)[0];if(tt.includes(z)){let O=z;if(z==="zh")switch(g){case"zh-hant":case"zh-mo":case"zh-hk":case"zh-tw":O="zh-hant"}await _(O)}}function T(){const g=window.navigator;return g.language||g.userLanguage||g.browserLanguage}function k(g){r.push("/"+g+"/")}return(g,z)=>{const O=ve,P=Jt,$=$e;return I(),N($,{to:!1,"display-directive":"show",show:e(a).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(a).LANDSCAPE.value?"left":"bottom",duration:0,delay:50},{trigger:t(()=>[n(P,{ref:"langselect",size:"tiny",style:{width:"100%"},"consistent-menu-width":!1,options:e(f),"_v-model:value":"locale",value:e(l),"onUpdate:value":k},{arrow:t(()=>[n(O,null,{default:t(()=>[n(e(ca))]),_:1})]),_:1},8,["options","value"])]),default:t(()=>[y("div",{innerHTML:g.$t("selectLanguage")},null,8,hs)]),_:1},8,["show","placement"])}}}),ws=y("span",null,"CONVERT TOüëá",-1),Me=Symbol("global variables"),bs=_e({__name:"Avif2Jpeg",emits:["ready"],setup(o,{emit:i}){Le();const c=i,d=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),a=b(null),r=b(2);let l=b(void 0);const m=b(!0),w=b(!1),f=b(!1),_=b(!1);da(Me,{showTooltipsBeforeMounted:l,LANDSCAPE:m,IS_SP:d,switchToolTipVisibility:z,SSR:!1}),ke(()=>{O(),window.addEventListener("resize",O),z(),setTimeout(()=>f.value=!0,3e3)});const v=200;let x=0,T=!0;function k(){_.value=!1,x=Date.now()}function g(){const $=T?0:Math.max(0,v-(Date.now()-x));T=!1,setTimeout(()=>_.value=!0,$),c("ready")}async function z(){}function O(){const $=document.body.clientWidth,s=document.body.clientHeight;m.value=$*.75>s||$>900}function P($){a.value=$}return($,s)=>{const h=Ie,A=ve,M=Ke,E=Ne;return I(),N(E,{vertical:"",align:"stretch",justify:"start",style:{height:"100%",position:"relative"}},{default:t(()=>[n(Pa,null,{"lang-switch":t(()=>[(I(),N(pa,null,{default:t(()=>[n(ys,{onLangChange:k,onLangReady:g})]),_:1}))]),_:1}),n(Oe,{name:"fade"},{default:t(()=>[e(_)?(I(),N(E,{key:0,vertical:"",align:"stretch",justify:"space-between",style:{height:"100%"}},{default:t(()=>[n(Da),n(h,{justify:"center"},{default:t(()=>[n(ns,{expanded:e(H).expandExtButtons,"onUpdate:expanded":s[0]||(s[0]=L=>e(H).expandExtButtons=L),target:e(H).acceptTypeValue,"onUpdate:target":s[1]||(s[1]=L=>e(H).acceptTypeValue=L),userExtensions:e(H).editedAcceptTypes,"onUpdate:userExtensions":s[2]||(s[2]=L=>e(H).editedAcceptTypes=L),forbidden:e(w),onInput:P},null,8,["expanded","target","userExtensions","forbidden"])]),_:1}),n(Ml,{input:e(a),format:e(H).imageFormat,quality:e(H).imageQuality,"retain-extension":e(H).retainExtension,maxZipSizeMB:e(H).maxZipSizeMB,threads:e(H).multithread?e(H).threadCount:0,onStart:s[3]||(s[3]=L=>w.value=!0),onEnd:s[4]||(s[4]=L=>w.value=!1),onMultiThreadCount:s[5]||(s[5]=L=>r.value=L)},null,8,["input","format","quality","retain-extension","maxZipSizeMB","threads"]),n(h,{vertical:"",align:"center"},{default:t(()=>[n(M,{trigger:"manual",placement:"top","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(A,{size:"4vh",color:"#DADADA",style:{margin:"0px"}},{default:t(()=>[n(e(fa))]),_:1})]),default:t(()=>[ws]),_:1})]),_:1}),n(h,{vertical:"",align:"center"},{default:t(()=>[n(as,{format:e(H).imageFormat,"onUpdate:format":s[6]||(s[6]=L=>e(H).imageFormat=L),quality:e(H).imageQuality,"onUpdate:quality":s[7]||(s[7]=L=>e(H).imageQuality=L)},null,8,["format","quality"]),n(ss,{"retain-ext":e(H).retainExtension,"onUpdate:retainExt":s[8]||(s[8]=L=>e(H).retainExtension=L),"max-zip-size":e(H).maxZipSizeMB,"onUpdate:maxZipSize":s[9]||(s[9]=L=>e(H).maxZipSizeMB=L),expanded:e(H).expandAdvSettings,"onUpdate:expanded":s[10]||(s[10]=L=>e(H).expandAdvSettings=L),multithread:e(H).multithread,"onUpdate:multithread":s[11]||(s[11]=L=>e(H).multithread=L),"thread-count":e(H).threadCount,"onUpdate:threadCount":s[12]||(s[12]=L=>e(H).threadCount=L),"thread-max":e(r)||0},null,8,["retain-ext","max-zip-size","expanded","multithread","thread-count","thread-max"])]),_:1}),n(ds)]),_:1})):X("",!0)]),_:1})]),_:1})}}}),kt=_e({__name:"App",setup(o){const i={Statistic:{valueFontSize:"1em"},Popover:{borderRadius:"0.4em",boxShadow:"2px 2px 5px 0px #555555"},Tooltip:{color:"#000000AA"},Image:{toolbarColor:"#00000099"}},c=b(!0);return ke(()=>{c.value=!1}),(d,a)=>{const r=ma,l=va,m=_a,w=ha,f=ya,_=ga;return I(),N(_,{"theme-overrides":i,style:{width:"100%",height:"100%"}},{default:t(()=>[n(f,null,{default:t(()=>[n(w,{placement:"top-right",max:20},{default:t(()=>[n(m,{placement:"top-left",closable:!0,max:50},{default:t(()=>[n(l,null,{default:t(()=>[n(r,null,{default:t(()=>[n(bs,{class:We({hide:e(c)})},null,8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),bo=[{path:"/",name:"Home",component:kt}];for(const o of tt)bo.push({path:"/"+o+"/",strict:!0,name:o,component:kt});wa(kt,{routes:bo,base:"/avif2jpeg/dist/"},({app:o,router:i,routes:c,isClient:d,initialState:a})=>{o.use(nt)});
