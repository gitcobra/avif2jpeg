var ca=Object.defineProperty;var pa=(l,i,u)=>i in l?ca(l,i,{enumerable:!0,configurable:!0,writable:!0,value:u}):l[i]=u;var Ve=(l,i,u)=>pa(l,typeof i!="symbol"?i+"":i,u);import{r as w,a as $t,d as be,i as rt,c as ne,o as U,_ as we,u as t,w as e,b as T,t as d,e as n,f as wn,N as _e,L as fa,g as ae,B as Te,h as Wt,j as _,F as $e,k as mt,l as ga,m as Q,n as Ee,p as ma,q as Ht,s as yn,v as xe,x as va,y as Ie,z as Dt,A as jt,C as Ke,D as _t,E as ha,G as _a,H as Ne,I as Re,J as vt,K as le,M as ve,O as Ge,T as qe,P as bn,Q as Vt,R as Et,S as qt,U as ht,V as De,W as kn,X as lt,Y as wa,Z as wt,$ as ya,a0 as sn,a1 as rn,a2 as zn,a3 as ut,a4 as ba,a5 as Gt,a6 as ka,a7 as An,a8 as za,a9 as Aa,aa as Kt,ab as Ta,ac as Tn,ad as xa,ae as Ia,af as un,ag as xn,ah as Sa,ai as Ca,aj as In,ak as Sn,al as Pt,am as Cn,an as Ze,ao as Ln,ap as La,aq as $a,ar as Ea,as as It,at as Fa,au as Ua,av as Ue,aw as Oa,ax as Pa,ay as Yt,az as $n,aA as Xt,aB as Ma,aC as En,aD as Na,aE as ct,aF as pt,aG as Ra,aH as Da,aI as ja,aJ as Ba,aK as Za,aL as Wa,aM as Ha,aN as Va,aO as qa,aP as Ga,aQ as Ka,aR as Ya,aS as Xa,aT as Qa,aU as Ja,aV as el,aW as tl,aX as nl,aY as ol,aZ as al}from"./vendor-DtAJ3Rvp.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const p of a.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function u(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=u(o);fetch(o.href,a)}})();const Le=w(navigator.hardwareConcurrency?Math.min(navigator.hardwareConcurrency,12):0),ft={threadCount:{min:2,max:Math.max(2,Le.value)}},ll={imageFormat:"image/jpeg",imageQuality:90,expandExtButtons:!1,acceptTypeValue:void 0,editedAcceptTypes:"",expandAdvSettings:!1,retainExtension:!1,maxZipSizeMB:1e3,useFolderNameForZip:!1,multithread:!0,threadCount:Le.value,shrinkImage:!1,maxWidth:4096,maxHeight:4096,disableNotifyingFolderSelect:!1},B=$t(Fn({}));function sl(){Fn(B)}function Fn(l){return Object.assign(l,ll)}const Un="avif2jpeg",Mt=JSON.parse(localStorage.getItem(Un)||"{}");for(const l in B)if(Mt.hasOwnProperty(l)&&Mt[l]!==void 0){let i=Mt[l];ft.hasOwnProperty(l)&&(ft[l].min>i&&(i=ft[l].min),ft[l].max<i&&(i=ft[l].max)),B[l]=i}const il=()=>{const l={};for(const i in B)l[i]=B[i];localStorage.setItem(Un,JSON.stringify(l))};window.addEventListener("beforeunload",il);const rl=be({__name:"github",setup(l){const i=rt(nt);return(u,s)=>{const o=_e,a=wn,p=we;return U(),ne(p,{to:!1,"display-directive":"show",show:t(i).showTooltipsBeforeMounted.value,trigger:"hover",duration:0,delay:0},{trigger:e(()=>[n(a,{href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-size":"small","font-weight":"bolder"}},{default:e(()=>[n(o,null,{default:e(()=>[n(t(fa))]),_:1}),s[0]||(s[0]=T("GitHub"))]),_:1})]),default:e(()=>[T(" "+d(u.$t("githubOpenSource")),1)]),_:1},8,["show"])}}}),ul=["href"],dl=be({__name:"licenses",setup(l){const i=w(!1),u={Vue:"https://github.com/vuejs/core/blob/main/LICENSE",Vite:"https://github.com/vitejs/vite/blob/main/LICENSE","Vite SSG":"https://github.com/antfu/vite-ssg/blob/main/LICENSE","Naive UI":"https://github.com/TuSimple/naive-ui/blob/main/LICENSE",Ionicons:"https://github.com/ionic-team/ionicons/blob/main/LICENSE"};return(s,o)=>{const a=Te;return U(),ae($e,null,[n(a,{text:"",onClick:o[0]||(o[0]=p=>i.value=!0),style:{color:"black","font-size":"small"}},{default:e(()=>o[2]||(o[2]=[T("Licenses")])),_:1}),n(t(Wt),{preset:"dialog",ref:"dialog",show:i.value,"onUpdate:show":o[1]||(o[1]=p=>i.value=p),"positive-text":"OK",title:"Licenses"},{default:e(()=>[o[3]||(o[3]=_("h3",null,"Used Framework and Libraries",-1)),_("ul",null,[(U(),ae($e,null,mt(u,(p,c)=>_("li",null,[_("a",{href:p},d(c),9,ul)])),64))])]),_:1},8,["show"])],64)}}}),cl=1,pl=8,fl=17,gl="",xt={major:cl,minor:pl,build:fl,tag:gl},ml={style:{"font-size":"x-small","user-select":"none"}},vl=be({__name:"version",setup(l){const i=["0.0.118"],u=`${xt.major}.${xt.minor}.${xt.build}${xt.tag}`,s=i.map(c=>({label:`v${c}`,key:c,value:c}));function o(c){const{key:h,label:g}=c,k=p(h),m=Q("a",{href:k},g),r=Q("div",null,m);return Q("div",null,r)}function a(c){location.href=p(c)}function p(c){return`/avif2jpeg/old/${c}/`}return(c,h)=>{const g=ga;return U(),ne(g,{"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start",options:t(s),"render-label":o,"onUpdate:value":a},{header:e(()=>[_("span",ml,d(c.$t("previousVersion")),1)]),default:e(()=>[_("span",{style:{cursor:"pointer"}},"v"+d(u))]),_:1},8,["options"])}}}),hl=be({__name:"header",setup(l){return(i,u)=>{const s=Ee,o=Ht;return U(),ne(s,{vertical:"",justify:"start"},{default:e(()=>[n(s,{justify:"space-between",align:"center"},{default:e(()=>[n(s,{align:"center"},{default:e(()=>[n(rl),n(vl),n(dl)]),_:1}),n(s,{align:"end",style:{"font-size":"x-small"}},{default:e(()=>[ma(i.$slots,"lang-switch")]),_:3})]),_:3}),n(o,{style:{margin:"0px"}})]),_:3})}}}),_l={style:{padding:"0px",margin:"0px","text-align":"center"}},wl={key:0},yl=be({__name:"title",setup(l){const i=yn(),u=xe(()=>{const s=i.currentRoute.value.path||"";return!String(s.match(new RegExp("(?<=^\\/)[^/]+"))||"")});return(s,o)=>{const a=wn,p=va("router-link"),c=Ee;return U(),ne(c,{align:"center",justify:"center",style:{margin:"0px"}},{default:e(()=>[_("h1",_l,[t(u)?(U(),ae("span",wl,d(s.$t("title")),1)):(U(),ne(p,{key:1,to:"../",custom:""},{default:e(({navigate:h,href:g})=>[n(a,{href:g,onClick:h,style:{color:"black","word-break":"keep-all","overflow-wrap":"break-word"}},{default:e(()=>[T(d(s.$t("title")),1)]),_:2},1032,["href","onClick"])]),_:1}))])]),_:1})}}});function bl(l){return new Worker("/avif2jpeg/dist/assets/worker.canvas-ByxzuV0b.js",{name:l==null?void 0:l.name})}let On=0;class kl extends bl{constructor(u){super();Ve(this,"id",On++);Ve(this,"priority");this.priority=u||!1}release(){Ft(this)}}class zl extends Promise{constructor(){super(...arguments);Ve(this,"wid",-1)}}const Bt=new Set,st=new Set,et=new Set,yt=new Map,Pn=[];function Al(l){const i=new kl;return Bt.add(i),Mn(i,l),Ft(i),l&&Pn.push(i.id),i}function Mn(l,i){const u=i?et:st,s=new zl(o=>{yt.set(l,()=>o([l,s,!!i]))});s.wid=l.id,u.add(s)}async function Tl(l){let i;if(!l)i=new Set([...et,...st]);else if(typeof l=="number"){const a=Pn.slice(0,l);i=new Set([...et].filter(p=>a.includes(p.wid)))}else i=l?et:st;const[u,s,o]=await Promise.any(i);return(o?et:st).delete(s),Mn(u,o),u}function Ft(l){const i=yt.get(l);i&&(yt.delete(l),i())}function xl(){for(const l of yt.keys())Ft(l)}async function dn(){return await Promise.all([...st,...et])}function Nn(){xl();for(const l of Bt)l.onmessage=null,l.terminate();Bt.clear(),st.clear(),et.clear(),yt.clear(),On=0}function Il(l){return new Worker("/avif2jpeg/dist/assets/worker.zip-D4CHLUmx.js",{name:l==null?void 0:l.name})}const Sl=1e3*10,Cl=1,Qt=2e3*2e3*5,Ll=5,$l=2,El=Qt*1,cn=Qt*6,Fl=300,bt=new Map,St=new Map;let gt=0;const tt=new Map,it=new Map,kt=new Map,zt=new Map;let Jt,ee,Oe,At,Be,Rn,Dn,jn,Bn,Zn,Wn;function Nt(l){({files:Be,completedFileIdSet:Jt,ConvStats:ee,canceled:Oe,props:At,format:Rn,quality:Dn,outputExt:jn,imageType:Bn,message:Zn,notification:Wn}=l||{}),bt.clear(),St.clear(),tt.clear(),it.clear(),kt.clear(),zt.clear(),it.clear(),kt.clear(),zt.clear()}async function Ul(l){Nt(l),Jt.clear();const i=Math.min(At.threads-1,Be.length),u=Math.min(Ll,i),s=Ml(ee,Oe);let o;try{o=await Ol(i,u,s)}catch{return Nt(),{exception:new Error("worker-load-error"),callbackToClearConverter:new Function,callbackToGenerateFailedZips:new Function}}const a=Pl(o),p=Ie(Oe,C=>{C&&p()});ee.demandImage=C=>{o.postMessage({action:"request-image",index:C})};const h=Be.length===1;let g=0,k=0,m="",r=0;for(gt=0,bt.clear();r<Be.length;){if(gt>cn&&!Oe.value){await new Promise(V=>setTimeout(V,100));continue}const C=[],x=[];let $=!1;const Z=Be.length-r,H=Math.min(r+Math.max(Math.min($l,Z/At.threads|0),1),Be.length);let b=0,S=!1;for(;r<H&&!((b>El||gt>cn)&&!Oe.value);r++){const V=Be[r],re=V.webkitRelativePath||V.name,N=St.get(V);S=S||!!N;const ke=0;Oe.value;const ue=V._id;if(b+=V.size,$=r===Be.length-1,it.has(ue)||it.set(ue,V),Hn(r,re,ue),kt.has(V)||(g++,ee.index=g),Oe.value){qn(ue);continue}let ze;try{ze=await createImageBitmap(V)}catch{Vn(r,re,ue);continue}x.push(ze);const z=ze.width*ze.height*4;b+=z+V.size,gt+=z+V.size;let O=!1;const J=Date.now();J-k>Fl&&(k=J,O=!0),C.push({index:r,bitmap:ze,file:V,fileId:ue,outputPath:m,type:Rn,quality:Dn/100,demandThumbnail:O||$,isSingleImage:h,maxSize:B.shrinkImage?{width:B.maxWidth,height:B.maxHeight}:null,retriedTime:St.get(V)||0,webkitRelativePath:V.webkitRelativePath}),O=!1}let q;if(C.length){const V=b>Qt;q=await Tl(u>0&&(S?1:V)),bt.set(q,b)}if(q&&(q.postMessage(C,x),x.forEach(V=>V.close()),x.length=0),$&&(await dn(),Oe.value))break}if(!Oe.value){let C;await new Promise(x=>{C=Ie([()=>ee.done,Oe],()=>{(ee.done>=g||Oe.value)&&x(void 0)},{immediate:!0})}),C()}p(),o.postMessage({action:"squeeze"}),await a,await dn();const v={value:!1},I=()=>{v.value=!0,Nn(),o.onmessage=null,o.terminate(),Nt()};let y=!1;return{callbackToClearConverter:I,callbackToGenerateFailedZips:async C=>{y||(y=!0,await Rl(C,o,v,ee))}}}async function Ol(l,i,u){Nn();const s=new Il;s.postMessage({action:"set-config",zipSize:At.maxZipSizeMB*1024*1024,keepExt:At.retainExtension,outputExt:jn,imageType:Bn});let o;for(let p=0;p<l;p++){const c=Al(i>p);o??(o=c),c.onmessage=u;const{port1:h,port2:g}=new MessageChannel;s.postMessage({action:"set-port"},[h]),c.postMessage({},[g])}return await new Promise((p,c)=>{const h=v=>{s.removeEventListener("message",m),o.removeEventListener("message",m),clearTimeout(r),v?p(v):c(v)};let g=!1,k=!1;const m=v=>{v.target===s&&(g=!0),v.target===o&&(k=!0),g&&k&&h(!0)};let r=0;s.addEventListener("message",m),o.addEventListener("message",m),r=window.setTimeout(()=>h(!1),Sl)}),s}function Pl(l){return new Promise(u=>{l.onmessage=s=>{var g;const o=s.data,{action:a}=o;if(a==="add-zip-completed"){const{fileId:k}=o;ee.done++,ee.success++,Jt.add(k);return}if(a==="respond-image"){const{url:k,index:m,path:r,size:v,fileId:I}=o;ee.convertedImageUrl=k,ee.convertedImageSize=v,ee.convertedImageIndex=m,ee.convertedImageName=r,ee.convertedImageFileId=I;let y="",L=0,C="";if(I>=0){const x=it.get(I);y=URL.createObjectURL(x),L=x.size,C=x.name}ee.convertedImageOrgUrl=y,ee.convertedImageOrgSize=L,ee.convertedImageOrgName=C,ee.convertedImageShrinked=(g=zt.get(I))==null?void 0:g.shrinked;return}const{size:p,count:c}=o,h="url"in s.data?s.data.url:"";switch(a){case"push-zip":ee.zips.push({url:h,size:p,count:c}),ee.zippedTotalCount+=c,ee.zippedTotalSize+=p;break;case"squeeze-zip":c>0&&(ee.zips.push({url:h,size:p,count:c}),ee.zippedTotalCount+=c,ee.zippedTotalSize+=p),u(void 0);break;case"push-filelist":ee.failedFileZippedCount++;break;case"squeeze-filelist-zip":ee.failedZipDone=!0;case"push-filelist-zip":ee.failedZips.push({url:h,size:p,count:c});break;case"zip-error":case"zip-squeeze-error":ee.zippingErrorCount+=c,a==="zip-squeeze-error"&&u(void 0);break}}})}function Ml(l,i,u,s){return a=>{const p=a.target,{data:c}=a,{action:h}=c;switch(i.value,h){case"list-start":break;case"file-start":{const{index:g,path:k,fileId:m}=c;Hn(g,k,m);break}case"file-load":{const{thumbnail:g,width:k,height:m,fileId:r,shrinked:v}=c,I=tt.get(r);I.core=p.id,I.command="🖼️loaded",g&&(l.thumbnail=g);let y=zt.get(r);y||(y={},zt.set(r,y)),y.shrinked??(y.shrinked=v);break}case"file-converted":{const{index:g,path:k,fileId:m}=c,r=tt.get(m);r.command="🔃converted",l.converted++;break}case"file-completed":{const{inputsize:g,outputsize:k,fileId:m}=c,r=tt.get(m);r&&(r.command="✅completed",r.completed=!0),l.inputTotalSize+=g,l.outputTotalSize+=k;break}case"file-error":{const{index:g,path:k,fileId:m}=c;Vn(g,k,m);break}case"file-canceled":{const{fileId:g,path:k}=c;qn(g);break}case"list-end":{Ft(p),gt-=bt.get(p)||0,bt.delete(p);break}}}}let Nl=0;function Hn(l,i,u){const s={key:Nl++,core:-1,index:l,path:i,command:"➡️started"};tt.set(u,s),ee.logs.push(s)}function Vn(l,i,u){const s=it.get(u);if(!s)throw new Error(`the file doesn't exist in the Map. "${u}":"${i}"`);const o=kt.get(s)||0,a=tt.get(u);o<Cl?(kt.set(s,o+1),Be.push(s),St.set(s,Date.now()),a.command="⚠️retrying",a.error=!0,Zn.warning(`retrying "${i}"`,{duration:3e3}),ee.retried++):(ee.done++,ee.failure++,a.command="❗failed",a.error=!0,Wn.error({content:`failed to load "${i}"`,duration:5e3}))}function qn(l){const i=tt.get(l);ee.done++,i.command="❗canceled",i.error=!0}async function Rl(l,i,u,s){let o=0;for(const a of l){const p=(a.webkitRelativePath||a.name).replace(/^\//,"");if(u.value)return;o-s.failedFileZippedCount>20&&await new Promise(c=>setTimeout(c,10)),i.postMessage({action:"add-filelist",file:a,path:p}),o++}i.postMessage({action:"squeeze-filelist"})}function Je(l,i=2){const u=Math.sign(l);l=Math.abs(l);const s=["Bytes","KB","MB","GB"],o=l?Math.floor(Math.log(l)/Math.log(1024)):0;return`${(l/Math.pow(1024,o)*u).toFixed(i)}${s[o]}`}function Gn(l,i=100,u=!1){i=typeof i=="number"?{width:i,height:i}:i;const{width:s,height:o}=i;let{width:a,height:p}=l;const c=a/p,h=s/o;return c>=h?(a=u?Math.min(s,a):s,p=a/c|0):(p=u?Math.min(o,p):o,a=p*c|0),{width:a,height:p}}class Dl{constructor(){Ve(this,"_currentFileCount",0);Ve(this,"_totalFileCount",0);Ve(this,"_zipLengthSumList",[]);Ve(this,"_pathBank",{})}increase(i){i&&(this._pathBank[i]=[this._zipLengthSumList.length,this._currentFileCount]),this._currentFileCount++,this._totalFileCount++}split(){this._zipLengthSumList.push(this._totalFileCount),this._currentFileCount=0}get(i){if(typeof i=="number"){let u=this._zipLengthSumList.findIndex((a,p)=>i<a);u===-1&&(u=this._zipLengthSumList.length);const s=this._zipLengthSumList[u-1]||0,o=i-s;return[u,o]}else{const u=this._pathBank[String(i)];if(u)return u}return null}}async function jl(l,i,u,s,o){let a="";const p=document.createElement("canvas"),c=p.getContext("2d");let h=new Dt;const g=[h],k=new Dl,m=u.format,r=u.quality/100,v=[...m.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),I=l.length,y=u.maxZipSizeMB*1024*1024;let L=0,C=null,x="",$="",Z=0,H=0,b=0,S=0,q=0,V=!1;const re=[];o.demandImage=z=>{const[O,J]=k.get(z),de=g[O];o.convertedImageIndex=z,o.convertedImageName=de.getPathByIndex(J),o.convertedImageUrl=URL.createObjectURL(new Blob([de.get(J)],{type:m}));let ce="",M=0,R="";const K=re[z];ce=URL.createObjectURL(K),M=K.size,R=K.name,o.convertedImageOrgUrl=ce,o.convertedImageOrgSize=M,o.convertedImageOrgName=R};for(const z of l){if(s.value)break;const O=z.name;let J="";const de=z.size,ce=(z.webkitRelativePath||z.relativePath||O).replace(/^\//,""),M=document.createElement("img");L++;const R={key:b++,core:-1,index:L,path:ce,command:"➡️start"};o.index=L,o.logs.push(R),o.logs.length-1,a&&(URL.revokeObjectURL(a),a=""),a=URL.createObjectURL(z),$=a,Z=z.size,M.src=a;const K=await Kn(M).then(()=>!0).catch(()=>!1);if(!M.complete||!K||s.value){o.done++,o.failure++,R.command="❗failed";continue}const W=M.width,P=M.height;p.width=W,p.height=P,c.drawImage(M,0,0,W,P,0,0,W,P),R.command="🖼️imgload",o.thumbnail=M;const se=await new Promise(fe=>{const ie=E=>{C=E,fe(E)};p.toBlob(ie,m,r)});if(s.value)break;if(!se){o.failure++;continue}H=se.size,o.converted++;let ye="";if(q+H>=y){try{await h.wait(),ye=h.url()}catch{V=!0,alert("memory problem occurred");break}o.zips.push({url:ye,size:q,count:S}),o.zippedTotalCount+=S,o.zippedTotalSize+=q,q=0,S=0,k.split(),h=new Dt,g.push(h)}q+=H;const pe=ce||O;for(let fe=1;fe<255&&(J=pe.replace(u.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+(fe>1?`(${fe})`:"")+"."+v,!!h.has(J));fe++);o.done++;try{S++,h.add(J,se),k.increase(),re.push(z),o.inputTotalSize+=de,o.outputTotalSize+=H}catch{continue}x=J,o.success++,R.command="✅completed",R.completed=!0,i.add(z._id)}if(o.success>0)if(I===1)C&&(o.convertedImageIndex=0,o.convertedImageName=x.replace(/^.*\/(?=[^/]+$)/,"").replace(u.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+v,o.convertedImageUrl=URL.createObjectURL(C),o.convertedImageOrgUrl=$,o.convertedImageOrgSize=Z);else try{if(V)throw new Error("terminated zipping process for memory problems");await h.wait();const z=h.url();o.zips.push({url:z,count:S,size:q}),o.zippedTotalCount+=S,o.zippedTotalSize+=q}catch{}const N={value:!1},ke=()=>{N.value=!0,g.forEach(z=>z.clear()),g.length=0,re.length=0};let ue=!1;return{callbackToClearConverter:ke,callbackToGenerateFailedZips:async z=>{ue||(ue=!0,Bl(z,y,o,N))}}}async function Bl(l,i,u,s){let o=0,a=0,p=new Dt;for(let c=0;c<l.length;c++){const h=l[c],g=(h.webkitRelativePath||h.name).replace(/^\//,"");if(s.value)return;if(await p.add(g,h),a+=h.size,o++,u.failedFileZippedCount++,a>=i||c===l.length-1){await p.zip();const k=p.url();u.failedZips.push({url:k,size:a,count:o}),p.clear(),a=0,o=0}}u.failedZipDone=!0}function Kn(l){if(typeof l.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((i,u)=>{l.onload=i,l.onerror=u})}const je=(l,i)=>{const u=l.__vccOpts||l;for(const[s,o]of i)u[s]=o;return u},Zl={class:"container"},Wl={__name:"zipicon",setup(l){return(i,u)=>(U(),ae("span",Zl,[n(t(_e),null,{default:e(()=>[n(t(jt))]),_:1}),u[0]||(u[0]=_("span",{class:"text"},"ZIP",-1))]))}},Hl=je(Wl,[["__scopeId","data-v-5dab19ad"]]),Vl=["href","download","title"],ql='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',Gl=be({__name:"thumbnail",props:{src:{},width:{},height:{},maxWidth:{default:100},maxHeight:{default:100},expand:{type:Boolean,default:!1},loading:{type:Boolean},fileName:{},allowNext:{type:Boolean},allowPrev:{type:Boolean},hidden:{type:Boolean}},emits:["load","error","next","prev"],setup(l,{expose:i,emit:u}){const{t:s}=Ke(),o=l,a=u,p=w();w();const c=w(!0),h=w(""),g=w(o.width||100),k=w(o.height||100),m=w(!1),r=$t({width:g.value+"px",height:k.value+"px",minWidth:"50px",minHeight:"50px"});_t(()=>{var $,Z,H;(Z=($=p.value)==null?void 0:$.previewInstRef)==null||Z.setPreviewSrc(ql),URL.revokeObjectURL((((H=p.value)==null?void 0:H.imageRef)||{}).src),p.value=null});const v=w(!0);ha(()=>{v.value=!1}),_a(()=>{v.value=!0}),Ie(o,($,Z)=>{r.width=(o.width||100)+"px",r.height=(o.height||100)+"px"}),Ie(()=>o.src,($,Z)=>{v.value&&L($)},{immediate:!0}),i({download:C,openPreview:x,active:v});async function I($){const Z=$.target,H=Z.naturalWidth,b=Z.naturalHeight,{width:S,height:q}=Gn({width:H,height:b},{width:o.maxWidth||100,height:o.maxHeight||100},o.expand);g.value=S,k.value=q,a("load",{src:Z.src,width:H,height:b}),c.value=!1,await new Promise(V=>setTimeout(V,100)),!c.value&&(m.value=!0)}function y($){const Z=$.target;a("error",Z.src)}async function L($){c.value=!0,m.value=!1,h.value=$}function C(){const $=document.createElement("a");$.href=h.value,$.download=o.fileName,$.click()}function x(){var $;($=p.value)==null||$.click()}return($,Z)=>{const H=bn,b=Vt,S=Ee,q=vt;return Ne((U(),ae("div",null,[n(t(we),null,{trigger:e(()=>[n(q,{show:t(c)||o.loading},{default:e(()=>[n(S,{justify:"center",align:"center",style:le(t(r))},{default:e(()=>[_("a",{"_v-show":"!(imgloading || props.loading)",href:t(h),onClick:Z[0]||(Z[0]=Ge(()=>{},["left","prevent"])),target:"_blank",download:o.fileName,title:o.fileName,style:{"line-height":"0px"}},[n(qe,{mode:"in-out"},{default:e(()=>[Ne(n(H,{ref_key:"nImageRef",ref:p,"show-toolbar-tooltip":"",onLoad:I,onError:y,src:t(h),width:t(g),height:t(k),style:{border:"1px solid silver"}},null,8,["src","width","height"]),[[Re,t(m)]])]),_:1})],8,Vl),t(c)||o.loading?(U(),ne(b,{key:0})):ve("",!0)]),_:1},8,["style"])]),_:1},8,["show"])]),default:e(()=>[T(" "+d(o.fileName),1)]),_:1})],512)),[[Re,!$.hidden]])}}}),pn=je(Gl,[["__scopeId","data-v-dbebbe1a"]]),Kl=["href","download","title"],Yl={class:"left-num"},Xl={class:"right-num"},Ql=["href","download","title"],Jl={class:"left-num"},es={class:"right-num"},ts=["href","download"],ns=be({__name:"image-viewer",props:{url:{},originalUrl:{},name:{},originalName:{},size:{},originalSize:{},length:{},index:{},isSingle:{type:Boolean},variousInfo:{}},emits:["demand-image","close"],setup(l,{expose:i,emit:u}){const s=l,o=u;i({download:R,cleanup:ie});const a=Et(),{t:p}=Ke();qt();const c=w(),h=w(),g=w(),k=ht("viewerItemContainer"),m=w(!0),r=w(Math.max(s.index,0)+1),v=w(1),I=w(1),y=w(""),L=w(1),C=w(1),x=w(!1),$=w(!1),Z=w(!1),H=xe(()=>{var E,A;return((A=(E=g==null?void 0:g.value)==null?void 0:E.previewInstRef)==null?void 0:A.previewSrc)===y.value}),b=xe(()=>r.value<s.length),S=xe(()=>r.value>1),q=w("viewer-item-init"),V=w(0),re=w(!0);w({width:"auto",height:"auto"});const N=w(!1);De(()=>{document.body.addEventListener("keydown",de),document.body.addEventListener("keydown",J),z(r.value-1),O()}),_t(()=>{clearTimeout(ke),document.body.removeEventListener("keydown",de),document.body.removeEventListener("keydown",J),N.value=!0}),kn(()=>{URL.revokeObjectURL(s.url),URL.revokeObjectURL(s.originalUrl)});let ke=-1;Ie(r,(E,A)=>{r.value<1||r.value>s.length||(clearTimeout(ke),E>A?q.value="viewer-item-next":q.value="viewer-item-prev",V.value=m.value?V.value:~V.value,ke=setTimeout(()=>{s.index!==r.value-1&&(re.value=!1,z(r.value-1))},50))});let ue="",ze="";Ie(()=>s.url,()=>{var F,ge;let E="";s.index===0&&m.value?(m.value=!1,r.value=1,E=s.url):s.index===r.value-1?(m.value=!1,x.value=!1,E=s.url):(URL.revokeObjectURL(s.url),URL.revokeObjectURL(s.originalUrl));const A=ue,te=ze;if(URL.revokeObjectURL(A),URL.revokeObjectURL(te),ue=s.url,ze=s.originalUrl,E){try{(ge=(F=g.value)==null?void 0:F.previewInstRef)!=null&&ge.displayed&&(H.value?g.value.previewInstRef.setPreviewSrc(E):g.value.previewInstRef.setPreviewSrc(s.originalUrl))}catch{}y.value=E}},{immediate:!0});function z(E){x.value=!0,$.value=!1,Z.value=!1,lt(()=>o("demand-image",E))}function O(){let E=k.value.$el,A=0,te=0,F=0,ge=0,he=0;const Pe=Ae=>{A=Ae.touches[0].pageX,te=Ae.touches[0].pageY,he=Date.now()};E.addEventListener("touchstart",Pe);const Ce=Ae=>{F=Ae.touches[0].pageX,ge=Ae.touches[0].pageY,We()};window.addEventListener("touchmove",Ce);const X=()=>{We();const Ae=F-A,Ye=Math.abs(Ae),Xe=ge-te,Tt=Math.abs(Xe);Ye<Tt||Ye<20||W(Ae>0?-1:1)};window.addEventListener("touchend",X);const We=()=>{const Ae=Date.now();Ae-he>500&&(A=F,te=ge),he=Ae};_t(()=>{E.removeEventListener("touchstart",Pe),E.removeEventListener("touchmove",Ce),E.removeEventListener("touchend",X),E=null})}function J(E){var A,te,F,ge;if(E.key==="Escape")try{(te=(A=g.value)==null?void 0:A.previewInstRef)!=null&&te.displayed&&(E.stopPropagation(),(ge=(F=g.value)==null?void 0:F.previewInstRef)==null||ge.toggleShow(!1))}catch{}}function de(E){var A,te;switch(E.key){case"ArrowRight":case"PageDown":case"ArrowDown":W(1);break;case"ArrowLeft":case"PageUp":case"ArrowUp":W(-1);break;case"Home":r.value=1;break;case"End":r.value=s.length;break;case" ":case"Enter":se();break;default:return}E.stopPropagation(),(te=(A=g.value)==null?void 0:A.previewInstRef)!=null&&te.displayed&&E.preventDefault()}function ce({width:E,height:A}){v.value=E,I.value=A,$.value=!0}function M({width:E,height:A}){L.value=E,C.value=A,Z.value=!0}function R(){H.value?c.value.download():h.value.download()}async function K(E){try{const A=await fetch(E).then(F=>F.blob()).then(F=>new Promise(ge=>{const he=new FileReader;he.onload=ge,he.readAsDataURL(F)})).then(F=>F.target.result);navigator.clipboard.writeText(A);const te=F=>{F.target.focus(),F.target.select()};a.info({title:p("copiedDataURLDialogTitle"),content:()=>Q("div",[Q("div",p("copiedDataURLMessage")),Q(An,{onFocus:te,onClick:te,type:"textarea",value:A,readonly:!0,size:"small",style:{marginTop:"2em",fontSize:"x-small"}})]),positiveText:"OK"})}catch{a.error({title:"failed to copy Data URL",content:"could not copy Data URL",positiveText:"OK"})}}function W(E){E>0&&r.value<s.length?r.value++:E<0&&r.value>1&&r.value--}let P="";const se=()=>{var A,te,F,ge,he,Pe;P=(F=window.getComputedStyle((te=(A=g==null?void 0:g.value)==null?void 0:A.previewInstRef)==null?void 0:te.previewRef))==null?void 0:F.transform;const E=H.value;(Pe=(he=(ge=g==null?void 0:g.value)==null?void 0:ge.previewInstRef)==null?void 0:he.handleSwitchNext)==null||Pe.call(he),lt(()=>{var Ce,X,We;H.value===E&&((We=(X=(Ce=g==null?void 0:g.value)==null?void 0:Ce.previewInstRef)==null?void 0:X.handleSwitchNext)==null||We.call(X))})};function ye(){try{lt(()=>g.value.previewInstRef.previewRef.style.transform=P)}catch{}}function pe({nodes:E}){const A=Q(Kt,{color:H.value?"green":"gray",offset:[-20,-12],value:(H.value?p("status.Converted"):p("status.Original"))+" "+r.value},()=>Q(Te,{round:!0,onClick(){se()},textColor:"white",size:"small",style:{marginLeft:"4px"}},{icon:()=>Q(H.value?za:Aa)}));E.next=Q(Te,{onClick(){W(1)},disabled:!b.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>Q(rn)}),E.prev=Q(Te,{onClick(){W(-1)},disabled:!S.value,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>Q(Ta)});try{const te=E.download.children;te.default=()=>p("save");const F=te.trigger();F.props.onClick=R,te.trigger=()=>F}catch{}return[A,...Object.values(E)]}function fe(){c.value.openPreview()}function ie(){}return(E,A)=>{const te=_e,F=Ee,ge=zn,he=ut,Pe=Gt,Ce=wa;return U(),ne(F,{justify:"center",align:"center",vertical:"",style:le({visibility:m.value?"hidden":"visible"}),class:"body",ref:"body"},{default:e(()=>[n(Ce,{ref_key:"nImageGroupRef",ref:g,"show-toolbar-tooltip":"","render-toolbar":pe,onPreviewNext:ye},{default:e(()=>[n(F,{wrap:!1,align:"center",justify:"center"},{default:e(()=>[n(t(Te),{onClick:A[0]||(A[0]=X=>W(-1)),disabled:!t(S),block:"",class:wt({"thumb-arrow":!0,pale:!t(S)}),title:E.$t("Prev")},{icon:e(()=>[n(te,{size:"30"},{default:e(()=>[n(t(ya))]),_:1})]),_:1},8,["disabled","class","title"]),n(F,{justify:"center",ref_key:"viewerItemContainer",ref:k,class:"viewer-item-container"},{default:e(()=>[n(qe,{name:q.value},{default:e(()=>[(U(),ne(F,{vertical:"",key:V.value,"_v-show":"viewerItemVisibility"},{default:e(()=>[n(F,{align:"center",wrap:!1},{default:e(()=>[n(F,{vertical:"",align:"center"},{default:e(()=>[n(F,{align:"center",justify:"center",wrap:!1},{default:e(()=>[n(F,{align:"center",justify:"center",vertical:"",class:"original-thumb"},{default:e(()=>[_("a",{href:E.originalUrl,onClick:A[4]||(A[4]=Ge(X=>{h.value.openPreview()},["prevent"])),download:E.originalName,title:E.originalName,class:"imglink"},[n(F,{align:"center",justify:"center",wrap:!1},{default:e(()=>[n(pn,{ref:X=>{X!=null&&X.active&&(h.value=X)},src:E.originalUrl,width:1,"max-width":1,"max-height":1,loading:x.value,"file-name":E.originalName,"allow-next":r.value<s.length,"allow-prev":r.value>1,onLoad:M,onNext:A[1]||(A[1]=X=>W(1)),onPrev:A[2]||(A[2]=X=>W(-1)),hidden:!0},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(F,{vertical:"",align:"center"},{default:e(()=>[n(F,{class:"imglink-label"},{default:e(()=>[T(d(t(p)("status.Original")),1)]),_:1}),n(F,{justify:"center",class:"img-size",wrap:!1},{default:e(()=>[_("span",Yl,d(Z.value?L.value:"?"),1),A[13]||(A[13]=T(" × ")),_("span",Xl,d(Z.value?C.value:"?"),1)]),_:1}),n(F,{justify:"center"},{default:e(()=>[A[3]||(sn(-1,!0),(A[3]=n(F,null,{default:e(()=>[T(d(Z.value?t(Je)(s.originalSize,0):"?"),1)]),_:1})).cacheIndex=3,sn(1),A[3])]),_:1})]),_:1})]),_:1})],8,Kl)]),_:1}),n(F,{style:{margin:"1em"},class:"original-thumb"},{default:e(()=>[n(te,{size:"20",color:"silver"},{default:e(()=>[n(t(rn))]),_:1})]),_:1}),_("a",{href:y.value,onClick:A[5]||(A[5]=Ge(X=>fe(),["prevent"])),download:s.name,title:s.name,class:"imglink"},[n(F,{vertical:"",align:"center",justify:"center"},{default:e(()=>[n(F,{class:"imglink-label"},{default:e(()=>[T(d(t(p)("status.Converted")),1)]),_:1}),n(F,{vertical:"",align:"center",justify:"center",size:0},{default:e(()=>[n(F,{justify:"center"},{default:e(()=>{var X;return[n(F,{wrap:!1,style:le((X=s.variousInfo)!=null&&X.shrinked?{color:"blue"}:{}),class:"img-size"},{default:e(()=>[_("span",Jl,d($.value?v.value:"?"),1),A[14]||(A[14]=T(" × ")),_("span",es,d($.value?I.value:"?"),1)]),_:1},8,["style"])]}),_:1})]),_:1}),n(F,{justify:"center"},{default:e(()=>[T(d($.value?t(Je)(s.size,0):"?"),1)]),_:1})]),_:1})],8,Ql)]),_:1}),n(F,{ref:"fileNameContainer",align:"center",class:"pathbox",title:s.name},{default:e(()=>[n(ge,{"x-scrollable":!0,trigger:"hover",style:{"font-size":"smaller",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},{default:e(()=>[T(d($.value?s.name:"?"),1)]),_:1})]),_:1},8,["title"])]),_:1}),n(F,{vertical:""},{default:e(()=>[n(pn,{ref:X=>{X!=null&&X.active&&(c.value=X)},src:y.value,width:142,"max-width":140,"max-height":100,loading:x.value,"file-name":s.name,"allow-next":r.value<s.length,"allow-prev":r.value>1,onLoad:ce,onNext:A[6]||(A[6]=X=>W(1)),onPrev:A[7]||(A[7]=X=>W(-1))},null,8,["src","loading","file-name","allow-next","allow-prev"]),n(F,{justify:"center",wrap:!0},{default:e(()=>[n(he,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:e(()=>[_("a",{href:s.url,ref:"saveImg",target:"_blank",download:s.name},[n(t(Te),{disabled:!$.value,round:"",size:"tiny"},{default:e(()=>[T(d(E.$t("save")),1)]),_:1},8,["disabled"])],8,ts)]),default:e(()=>[T(" "+d(E.$t("save")),1)]),_:1}),n(he,{"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:e(()=>[n(t(Te),{disabled:!$.value,onClick:A[8]||(A[8]=X=>K(s.url)),round:"",size:"tiny"},{default:e(()=>A[15]||(A[15]=[T("DataURL")])),_:1},8,["disabled"])]),default:e(()=>[T(" "+d(E.$t("convertedImageDataUrlTooltip")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1},8,["name"])]),_:1},512),n(t(Te),{onClick:A[9]||(A[9]=X=>W(1)),disabled:!t(b),block:"",class:wt({"thumb-arrow":!0,next:!0,pale:!t(b)}),title:E.$t("Next")},{icon:e(()=>[n(te,{size:"30"},{default:e(()=>[n(t(ba))]),_:1})]),_:1},8,["disabled","class","title"])]),_:1}),Ne(n(F,{style:{width:"100%"},wrap:!1},{default:e(()=>[n(Pe,{value:r.value,"onUpdate:value":A[10]||(A[10]=X=>r.value=X),tooltip:!1,step:1,min:1,max:s.length,onKeydown:A[11]||(A[11]=Ge(()=>{},["prevent","stop"])),class:"index-slider"},null,8,["value","max"]),n(F,{class:"index",align:"center",justify:"center",wrap:!1,size:3},{default:e(()=>[n(F,null,{default:e(()=>[T(d(t(p)("status.index"))+":",1)]),_:1}),n(F,{justify:"end",align:"center",class:"counter"},{default:e(()=>[T(d(r.value),1)]),_:1}),n(F,null,{default:e(()=>A[16]||(A[16]=[T("/")])),_:1}),n(F,{justify:"start",align:"center",class:"counter"},{default:e(()=>[T(d(s.length),1)]),_:1})]),_:1})]),_:1},512),[[Re,!E.isSingle]]),n(t(Te),{onClick:A[12]||(A[12]=X=>{o("close")}),circle:"",size:"tiny",color:"silver",class:"close-button",title:E.$t("close")},{icon:e(()=>[n(te,{size:"12"},{default:e(()=>[n(t(ka))]),_:1})]),_:1},8,["title"])]),_:1},512)]),_:1},8,["style"])}}}),os=je(ns,[["__scopeId","data-v-fdbd81d0"]]),as={class:"status-table"},ls={class:"started"},ss={class:"completed"},is={style:{"font-size":"medium"}},rs={class:"total"},us={style:{"font-size":"medium"}},ds=be({__name:"status.center-column",props:{processing:{type:Boolean},interval:{},statusColor:{},success:{},successTo:{},successFrom:{},index:{},length:{},failure:{},retried:{},successPercTo:{},successPercFrom:{}},setup(l){const i=l,u=qt(),s=w(u.value.successColor),o=w(!1);return Ie(()=>i.processing,a=>{a||(i.success===i.length?o.value=!0:s.value=u.value.errorColor)}),(a,p)=>{const c=_e,h=Ia,g=Ee,k=ut,m=Tn;return U(),ne(m,{type:"multiple-circle","stroke-width":2,percentage:[a.successTo/a.length*100|0,a.index/a.length*100|0],color:[t(u).successColor,a.statusColor],"rail-style":[{stroke:t(s),opacity:.3}]},{default:e(()=>[n(g,{vertical:"",align:"center",justify:"center",size:0,style:{"font-family":"v-mono","white-space":"nowrap"},wrap:!1,"wrap-item":!1},{default:e(()=>[n(g,{size:0,align:"center",style:le({color:a.processing?a.statusColor:t(s),fontSize:"1.4em"}),wrap:!1},{default:e(()=>[t(o)?(U(),ne(c,{key:0},{default:e(()=>[n(t(xa))]),_:1})):ve("",!0),n(h,{duration:a.interval*3|0,from:a.successPercFrom|0,to:a.successPercTo|0,active:!0},null,8,["duration","from","to"]),p[0]||(p[0]=T("% "))]),_:1},8,["style"]),_("table",as,[_("tbody",null,[_("tr",ls,[_("td",null,d(a.$t("status.started"))+":",1),_("td",null,[n(k,{trigger:"hover",style:le({color:t(u).infoColor}),placement:"left"},{trigger:e(()=>[_("span",{style:le({fontSize:"xx-small",color:a.statusColor,lineHeight:"0"})},d(a.index.toLocaleString("en-us")),5)]),default:e(()=>[T(" "+d(a.$t("status.progressStarted"))+" ("+d(a.index.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"]),a.retried>0?(U(),ne(k,{key:0,trigger:"hover",style:le({color:t(u).warningColor}),placement:"left"},{trigger:e(()=>[_("span",{style:le({fontSize:"xx-small",color:t(u).warningColor,lineHeight:"0"})}," ("+d(a.retried.toLocaleString("en-us"))+") ",5)]),default:e(()=>[T(" "+d(a.$t("status.progressRetries"))+" ("+d(a.retried.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):ve("",!0),a.failure>0?(U(),ne(k,{key:1,trigger:"hover",style:le({color:t(u).errorColor}),placement:"left"},{trigger:e(()=>[_("span",{style:le({fontSize:"xx-small",color:t(u).errorColor,lineHeight:"0"})}," ("+d(a.failure.toLocaleString("en-us"))+") ",5)]),default:e(()=>[T(" "+d(a.$t("status.progressErrors"))+" ("+d(a.failure.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):ve("",!0)])]),_("tr",ss,[_("td",null,d(a.$t("status.success"))+":",1),_("td",is,[n(k,{trigger:"hover",duration:0,delay:0,style:le({color:t(u).successColor}),placement:"bottom"},{trigger:e(()=>[_("span",{style:le({color:t(u).successColor})},[n(h,{duration:a.interval*3|0,from:a.successFrom,to:a.successTo,active:!0,"show-separator":!0},null,8,["duration","from","to"])],4)]),default:e(()=>[T(" "+d(a.$t("status.progressSuccess"))+" ("+d(a.successTo.toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])])]),_("tr",rs,[_("td",null,d(a.$t("status.files"))+":",1),_("td",us,[n(k,{trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:e(()=>[T(d(a.length.toLocaleString("en-us")),1)]),default:e(()=>[T(" "+d(a.$t("status.progressTotal"))+" ("+d(a.length.toLocaleString("en-us"))+") ",1)]),_:1})])])])])]),_:1})]),_:1},8,["percentage","color","rail-style"])}}}),cs=je(ds,[["__scopeId","data-v-6a54ac11"]]),ps={key:0},fs={style:{"font-size":"smaller"}},gs={key:0,class:"log-table",ref:"table"},ms={class:"log-tr"},vs={class:"log-th"},hs={class:"log-th"},_s={style:{"min-width":"7em"},class:"log-th"},ws={style:{"padding-left":"2em"},class:"log-th"},ys={class:"log-td"},bs={class:"log-td"},ks={class:"log-td"},zs={class:"log-td"},As={style:{margin:"1px"}},Ts=["href","download","onClick"],xs={key:0,style:{position:"relative"}},Is=["href","download"],Ss=["href","download"],Cs={key:0,style:{margin:"1px"}},Ls=["href","download","onClick"],$s=99999,Es=250,Fs=100,Us=be({__name:"status",props:{processing:{type:Boolean},status:{},interval:{}},emits:["all-zips-clicked","demand-zip-errors","demand-image"],setup(l,{expose:i,emit:u}){const s=Et(),{t:o}=Ke(),a=qt(),p={W:160,H:80},c=l,h=u,g=w(!1),k=w([]),m=w(!1);ht("table");const r=w([]),v=w([]),I=w([0,0]),y=w([0,0]),L=w([0,0]),C=w([0,0]),x=w([0,0]),$=w([0,0]),Z=w(0),H=w(0),b=w([0,0]),S=w(a.value.infoColor),q=w("#000000"),V=w("#000000"),re=w(0),N=w(0),ke=w(""),ue=w("00:00:00");w(""),w("");const ze=w(void 0),z=w(!1),O=w(!0),J=w(!1),de=xe(()=>z.value?R.value:M.value),ce=w("16em"),M=w(5),R=w(1e3),K=w(!0),W=w(!1),P=$t({name:"",originalName:"",size:0,url:"",originalUrl:"",originalSize:0,dataUrl:"",index:0,various:{shrinked:!1}}),se=ht("body"),ye=w(null),pe=w(null),fe=w(),ie=ht("imageViewer");i({cleanup:nn}),De(()=>{Ie(c.status,()=>F(),{deep:!1}),Ie([pe,K],()=>{if(!pe.value||!K.value)return;const{width:Se,height:Fe}=Gn(pe.value,{width:p.W,height:p.H});ye.value.width=Se,ye.value.height=Fe,ye.value.style.width=Se+"px",ye.value.style.height=Fe+"px",pe.value instanceof HTMLImageElement?ye.value.getContext("2d").drawImage(pe.value,0,0,Se,Fe):(ye.value.getContext("bitmaprenderer").transferFromImageBitmap(pe.value),pe.value.close(),pe.value=null,c.status.thumbnail=null)});let f=0;const j=()=>{if(f)return;const Se=Date.now();ue.value="00:00:00",f=window.setInterval(()=>{const Fe=(Date.now()-Se)/1e3;ue.value=`${String(Fe/3600|0).padStart(2,"0")}:${String(Fe/60%60|0).padStart(2,"0")}:${String(Fe%60|0).padStart(2,"0")}`},300)};j(),Ie(()=>c.processing,(Se,Fe)=>{Se?(j(),k.value=[],g.value=!1,m.value=!1,r.value=[],v.value=[]):(clearInterval(f),f=0),c.processing||he()});const G=un();let Y;const oe=()=>{clearTimeout(Y),Y=setTimeout(()=>{if(!K.value||Qe)return;const Se=fe.value.$parent.$el.offsetHeight,Fe=window.innerHeight-G.parent.parent.vnode.el.offsetHeight-8;ce.value=Math.max(Se+Fe,Es)+"px"},100)};oe(),window.addEventListener("resize",oe);const Me=new ResizeObserver(oe);Me.observe(G.parent.parent.vnode.el);let Qe=!1;_t(()=>{Qe=!0,Me.disconnect(),clearInterval(f),clearTimeout(Y),clearTimeout(te),clearTimeout(Ae),window.removeEventListener("resize",oe)})}),_t(()=>{nn()}),Ie([()=>c.status.zips.length,()=>c.status.failedZips.length],()=>{const f=c.status;{r.value.length>f.zips.length&&(r.value.length=0);let j=0;const G=f.zips.length===1&&f.zippedTotalCount===f.length;for(let Y=r.value.length;Y<f.zips.length;Y++){const oe=f.zips[Y],Me=f.baseZipName+(G?"":"-"+String(Y+1).padStart(2,"0"))+".zip";j+=oe.size,r.value[Y]={url:oe.url,size:oe.size,number:G?0:Y+1,sizeByUnit:Je(oe.size),name:Me,count:oe.count,clicked:!1}}}{v.value.length>f.failedZips.length&&(v.value.length=0);let j=0;const G=f.failedZipDone&&f.failedZips.length===1;for(let Y=v.value.length;Y<f.failedZips.length;Y++){const oe=f.failedZips[Y],Me=f.baseZipName+"-error"+(G?"":"-"+String(Y+1).padStart(2,"0"))+".zip";j+=oe.size,v.value[Y]={url:oe.url,size:oe.size,number:G?0:Y+1,sizeByUnit:Je(oe.size),name:Me,count:oe.count,clicked:!1}}}});const E=c.interval||100;let A=!1,te=0;function F(){if(A)return;if(te){A=!0;return}te=window.setTimeout(()=>{te=0,A&&(A=!1,F())},E);const f=c.status;g.value=f.length>=2,y.value[1]=y.value[0],y.value[0]=f.index,L.value[1]=L.value[0],L.value[0]=f.success,C.value[1]=C.value[0],C.value[0]=f.failure,x.value[1]=x.value[0],x.value[0]=f.done,$.value[1]=$.value[0],$.value[0]=f.converted,Z.value=f.retried,H.value=f.length,b.value[1]=b.value[0],b.value[0]=f.zippedTotalCount,re.value=f.inputTotalSize,N.value=f.outputTotalSize;const j=N.value-re.value;ke.value=(j>=0?"+ ":"")+Je(j);const G=N.value/re.value,Y=(256|Math.min(255,Math.max(0,G-1.5)*255|0)).toString(16).substring(1);q.value="#"+Y+"0000";const oe=1024*1024,Me=(256|Math.min(255,Math.max(0,j/1024/oe)*255|0)).toString(16).substring(1);if(V.value="#"+Me+"0000",I.value[1]=I.value[0],I.value[0]=L.value[0]/H.value*100,K.value||!c.processing){const Qe=f.logs.slice(-99999);k.value.push(...Qe);const Se=k.value.length-$s;Se>0&&k.value.splice(0,Se),O.value&&Qe.length&&Xe(),k.value.length>R.value&&(R.value*=2)}f.logs.length=0,pe.value=f.thumbnail,c.processing&&(S.value=C.value[0]?a.value.errorColor:Z.value?a.value.warningColor:a.value.infoColor),f.convertedImageUrl!==P.url&&(P.url=f.convertedImageUrl,P.name=f.convertedImageName,P.dataUrl=f.convertedImageDataUrl,P.size=f.convertedImageSize||f.outputTotalSize,P.originalSize=f.convertedImageOrgSize,P.originalName=f.convertedImageOrgName,P.index=f.convertedImageIndex,P.originalUrl=f.convertedImageOrgUrl,P.various={shrinked:f.convertedImageShrinked})}let ge=un();function he(){c.status,S.value=c.status.success===c.status.length?a.value.successColor:a.value.errorColor,z.value||(K.value=!1,z.value=!0),W.value=!0,K.value&&(setTimeout(Xe,500),ge.proxy.$forceUpdate(),ge=null),F()}const Pe=xe(()=>[{key:"open",label:o("status.openFailedList"),icon:()=>Q(_e,()=>Q(xn)),onSelect(){We()}},{key:"download",label:o("status.saveFailedList"),icon:()=>Q(_e,()=>Q(Sa)),onSelect(){We(!0)}},{key:"zip",label:`${o("status.zipFailedList")}`+(c.status.failedZipDone?`(✔${o("status.done")})`:""),icon:()=>Q(vt,{show:m.value&&!c.status.failedZipDone,size:"small"},()=>Q(_e,()=>Q(jt))),disabled:m.value,onSelect(f){return m.value=!0,h("demand-zip-errors"),!1}}]);function Ce(f,j=!1){const{url:G,name:Y}=f;if(j){const oe=document.createElement("a");oe.href=G,oe.download=Y,oe.click()}f.clicked||(f.clicked=!0,c.processing||r.value.every(oe=>oe.clicked)&&h("all-zips-clicked"))}async function X(){if(g.value){if(r.value.length>=2&&!await new Promise((G,Y)=>s.warning({title:o("Download"),content:o("status.confirmDownloadMessage",[r.value.length]),positiveText:"OK",negativeText:o("cancel"),onPositiveClick:()=>G(!0),onNegativeClick:()=>Y()})))return;const f=r.value;for(const j of f)Ce(j,!0)}else ie.value.download()}function We(f=!1){const j=new Blob([c.status.unconvertedListText],{type:"text/plain;charset=utf8"}),G=URL.createObjectURL(j),Y=document.createElement("a");Y.href=G,Y.target="_blank",f&&(Y.download=c.status.baseZipName+"-error.txt"),Y.click()}let Ae=0,Ye=!1;function Xe(f=!1){if(!Ye){if(Ae){Ye=!0;return}lt(()=>{!f&&(!z.value||!O.value)||(fe.value.scrollTo({behavior:"instant",top:k.value.length*50}),Ae=window.setTimeout(()=>{Ae=0,Ye&&(Ye=!1,Xe())},Fs))})}}const Tt=w(!1);function nn(){Tt.value=!0,URL.revokeObjectURL(P.url),URL.revokeObjectURL(P.originalName),P.originalUrl="",P.url="",P.index=0,c.status.logs.length=0,k.value.length=0,v.value.length=0,r.value.length=0,z.value=!1,W.value=!1}return(f,j)=>{const G=Ee,Y=Ca,oe=Cn,Me=we,Qe=Vt,Se=Sn,Fe=In,Ut=Ht,dt=Te,on=Tn,ot=ut,ua=Hl,an=Kt,da=La;return U(),ne(G,{ref_key:"body",ref:se,vertical:"",justify:"center"},{default:e(()=>[n(G,{justify:"center",align:"center",wrap:!1,style:{"white-space":"nowrap"}},{default:e(()=>[n(G,{vertical:"",justify:"center",class:"left-column"},{default:e(()=>[n(Y,{"tabular-nums":"",label:f.$t("status.elapsedTime")},{default:e(()=>[n(G,null,{default:e(()=>[T(d(t(ue)),1)]),_:1})]),_:1},8,["label"]),n(Y,{"tabular-nums":"",label:f.$t("status.multiThreading")},{default:e(()=>[n(G,{style:le({color:c.status.threads?"":"red",fontSize:"smaller"})},{default:e(()=>[T(d(c.status.threads?f.$rt("{n} @:threads",c.status.threads):f.$t("disabled")),1)]),_:1},8,["style"])]),_:1},8,["label"]),n(Y,{"tabular-nums":"",label:f.$t("status.outputSettings")},{default:e(()=>[n(G,{vertical:"",justify:"end",style:{"font-size":"smaller","line-height":"1em"}},{default:e(()=>[_("div",null,d(f.$t("settings.imageType"))+": "+d(c.status.type),1),f.status.shrink?(U(),ae("div",ps,[T(d(f.$t("status.Shrinking"))+": ",1),_("span",fs,d(f.status.shrink[0])+"×"+d(f.status.shrink[1]),1)])):ve("",!0),_("div",null,"Zip: "+d(c.status.zipSize)+"MB",1)]),_:1})]),_:1},8,["label"])]),_:1}),n(cs,{index:t(y)[0],success:f.status.success,length:f.status.length,"success-to":t(L)[0],"success-from":t(L)[1],failure:t(C)[0],"success-perc-to":t(I)[0],"success-perc-from":t(I)[1],retried:t(Z),processing:f.processing,interval:t(E),"status-color":t(S),class:"center-column"},null,8,["index","success","length","success-to","success-from","failure","success-perc-to","success-perc-from","retried","processing","interval","status-color"]),n(G,{vertical:"",style:{height:"100%"},justify:"center"},{default:e(()=>[n(Y,{"tabular-nums":"",label:f.$t("status.inputSize")},{default:e(()=>[n(G,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:e(()=>[T(d((t(re)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(Y,{"tabular-nums":"",label:f.$t("status.outputSize")},{default:e(()=>[n(G,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:e(()=>[T(d((t(N)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(Y,{"tabular-nums":"",label:f.$t("status.outInRate")},{default:e(()=>[n(G,{vertical:"",align:"end",justify:"start",style:{"font-size":"xx-small","font-family":"v-mono","line-height":"50%"}},{default:e(()=>[_("span",{style:le({color:t(q),fontSize:"larger"})},"× "+d((t(N)/t(re)||1).toFixed(2)),5),_("span",{style:le({color:t(V)})},"("+d(t(ke))+")",5)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1}),n(Fe,{"display-directive":"show","trigger-areas":["arrow","main"],"default-expanded-names":"log-collapse","expanded-names":t(K)?["log-collapse"]:[],onUpdateExpandedNames:j[7]||(j[7]=D=>{K.value=!!String(D)})},{default:e(()=>[n(Se,{title:"Log",name:"log-collapse",style:{"white-space":"nowrap"}},{header:e(()=>[n(G,{align:"center",wrap:!1},{default:e(()=>[T(d(f.$t("status.log")),1),Ne(n(t(vt),{size:16},null,512),[[Re,f.processing&&!t(K)]])]),_:1})]),"header-extra":e(()=>[Ne(n(G,{align:"center",wrap:!1},{default:e(()=>[n(Pt,null,{default:e(()=>[n(oe,{key:"a",checked:t(J),"onUpdate:checked":j[0]||(j[0]=D=>Ze(J)?J.value=D:null),size:"small",style:{"font-size":"smaller"},class:"hide-mobile"},{default:e(()=>[T(d(f.$t("status.filterSuccess")),1)]),_:1},8,["checked"]),Ne(n(oe,{key:"b",checked:t(O),"onUpdate:checked":[j[1]||(j[1]=D=>Ze(O)?O.value=D:null),j[2]||(j[2]=D=>D&&Xe(!0))],size:"small",style:{"font-size":"smaller"}},{default:e(()=>[T(d(f.$t("status.autoScroll")),1)]),_:1},8,["checked"]),[[Re,t(z)]])]),_:1}),n(Me,{style:{"max-width":"30em"}},{trigger:e(()=>[n(oe,{size:"small",checked:t(z),"onUpdate:checked":[j[3]||(j[3]=D=>Ze(z)?z.value=D:null),j[4]||(j[4]=D=>{O.value=D,Xe(!0)})],style:{"font-size":"smaller"}},{default:e(()=>[T(d(f.$t("status.expandLog")),1)]),_:1},8,["checked"])]),default:e(()=>[T(d(f.$t("status.expandLogTooltip")),1)]),_:1})]),_:1},512),[[Re,t(K)]])]),default:e(()=>[n(G,{wrap:!1,class:wt({"log-container":1,"expand-log":t(z)}),align:"stretch",style:le(t(z)?{height:t(ce),maxHeight:t(ce)}:{})},{default:e(()=>[n(t(zn),{ref_key:"scrollref",ref:fe,"x-scrollable":!0,onMouseup:j[5]||(j[5]=D=>O.value=!1),onWheel:j[6]||(j[6]=D=>O.value=!1),trigger:"none",style:le([{"z-index":"2","padding-right":"10px","min-height":"7em"},{maxHeight:t(ce)}]),size:50},{default:e(()=>[t(K)?(U(),ae("table",gs,[_("tbody",null,[_("tr",ms,[_("th",vs,d(f.$t("status.table.core")),1),_("th",hs,d(f.$t("status.table.index")),1),_("th",_s,d(f.$t("status.table.status")),1),_("th",ws,d(f.$t("status.table.details")),1)]),(U(!0),ae($e,null,mt((t(J)?t(k).filter(D=>!D.completed):t(k)).slice(-t(de)),({index:D,key:at,command:He,path:Ot,core:ln})=>(U(),ae("tr",{key:at,class:"log-tr"},[_("td",ys,d(ln>=0?ln+1:"-"),1),_("td",bs,d(D+1),1),_("td",ks,d(He),1),_("td",zs,d(Ot),1)]))),128))])],512)):ve("",!0)]),_:1},8,["style"]),n(G,{style:le([{"align-self":"center",position:"absolute","z-index":"0","margin-top":"0.5em",right:"0.1em","line-height":"0px"},{width:p.W+"px",height:p.H+"px"}]),justify:"center",align:"center"},{default:e(()=>[n(t(vt),{size:"small",show:f.processing},{default:e(()=>[c.status.thumbnail===void 0?(U(),ne(Qe,{key:0,description:"EMPTY"})):ve("",!0),Ne(_("canvas",{ref_key:"thumbcanvas",ref:ye,width:"106",height:"80",style:le({border:"1px solid gray",filter:f.processing?"":"opacity(0.35)"})},null,4),[[Re,c.status.thumbnail!==void 0]])]),_:1},8,["show"])]),_:1},8,["style"])]),_:1},8,["class","style"])]),_:1})]),_:1},8,["expanded-names"]),n(Ut,{style:{margin:"0.2em"}}),n(G,{wrap:!1,vertical:""},{default:e(()=>[n(G,{justify:"center",align:"center",vertical:""},{default:e(()=>[n(qe,null,{default:e(()=>[t(W)?t(W)&&f.status.success>0&&!t(Tt)?(U(),ne(os,{key:1,ref_key:"imageViewer",ref:ie,url:t(P).url,size:t(P).size,"original-url":t(P).originalUrl,"original-size":t(P).originalSize,name:t(P).name,originalName:t(P).originalName,length:c.status.success,index:t(P).index,"various-info":t(P).various,"is-single":!t(g),onDemandImage:j[9]||(j[9]=D=>h("demand-image",D)),onClose:j[10]||(j[10]=D=>W.value=!1)},null,8,["url","size","original-url","original-size","name","originalName","length","index","various-info","is-single"])):ve("",!0):(U(),ne(dt,{key:0,tertiary:"",type:"success",size:"small",disabled:!(f.status.success>0),onClick:j[8]||(j[8]=D=>W.value=!0)},{default:e(()=>[T(d(f.$t("status.browseConvertedImages")),1)]),_:1},8,["disabled"]))]),_:1})]),_:1}),n(G,{justify:"center"},{default:e(()=>[Ne(n(G,{vertical:"",align:"center"},{default:e(()=>[n(ot,{placement:"left"},{trigger:e(()=>[n(on,{type:"line","indicator-placement":"inside",color:"lime","rail-color":"rgba(99, 255, 99, 0.5)","indicator-text-color":t(b)[0]===t(H)?"white":"green",processing:f.processing,percentage:t(b)[0]/t(H)*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:e(()=>[_("span",As,d(t(b)[0]/t(H)*100|0)+"% "+d(f.$t("status.zipped"))+" ("+d(t(b)[0])+"/"+d(t($)[0])+")",1)]),_:1},8,["indicator-text-color","processing","percentage"])]),default:e(()=>[T(" "+d(f.$t("status.zippingProgress"))+" ("+d(t(b)[0]/t(H)*100|0)+"%) ",1)]),_:1}),n(qe,{name:"zipcontainer"},{default:e(()=>[t(r).length>=1||c.processing?(U(),ne(Pt,{key:0,name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:e(()=>[(U(!0),ae($e,null,mt(t(r),(D,at)=>(U(),ae("span",{key:at},[n(ot,{trigger:"hover",duration:0,delay:0},{trigger:e(()=>[_("a",{href:D.url,download:D.name,class:"in-button-anchor",onClick:He=>Ce(D)},[n(dt,{class:"zip-button",size:"tiny",color:D.clicked?"#050":"lime","text-color":D.clicked?"gray":"white",onClick:Ge(He=>Ce(D),["stop"]),round:""},{default:e(()=>[n(t(_e),{size:"tiny"},{default:e(()=>[n(t(jt))]),_:1}),T("ZIP"+d(D.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Ts)]),default:e(()=>[_("div",{style:le({color:t(a).successColor})},[_("div",null,"ZIP "+d(D.number||"")+" ("+d(f.$t("success"))+")",1),_("div",null,d(D.name),1),_("div",null,d(D.sizeByUnit),1),_("div",null,d(f.$rt("{n} @:files",D.count)),1)],4)]),_:2},1024)]))),128))]),_:1})):ve("",!0)]),_:1})]),_:1},512),[[Re,t(g)]])]),_:1}),n(qe,null,{default:e(()=>[Ne(n(G,{justify:"center",align:"center"},{default:e(()=>[n(ot,{trigger:"hover",duration:0,delay:0,placement:"left",style:le({color:"white",backgroundColor:t(a).successColor}),"arrow-style":{backgroundColor:t(a).successColor}},{trigger:e(()=>[n(qe,{name:"save"},{default:e(()=>[t(L)[0]>0?(U(),ae("span",xs,[n(an,{value:t(g)?t(b)[0].toLocaleString("en-us"):c.status.type.replace(/\(.+\)/,""),color:t(a).successColorHover,offset:[-20,-3]},{default:e(()=>[n(dt,{size:"medium",onClick:X,color:t(a).successColor,round:""},{default:e(()=>[t(g)?(U(),ae($e,{key:0},[t(r).length?(U(),ae("a",{key:0,href:t(r)[0].url,download:t(r)[0].name,class:"in-button-anchor",onClick:j[11]||(j[11]=Ge(()=>{},["prevent"]))},[n(ua),T(" × "+d(t(r).length)+" "+d(f.$t("status.saveAll")),1)],8,Is)):ve("",!0)],64)):(U(),ae("a",{key:1,href:t(P).url,download:t(P).name,class:"in-button-anchor",onClick:j[12]||(j[12]=Ge(()=>{},["prevent"]))},[n(t(_e),{size:"tiny"},{default:e(()=>[n(t(Ln))]),_:1}),T(" "+d(f.$t("save")),1)],8,Ss))]),_:1},8,["color"])]),_:1},8,["value","color"])])):ve("",!0)]),_:1})]),default:e(()=>[f.status.length>=2?(U(),ae($e,{key:0},[_("div",null,d(t(o)("success"))+": "+d(t(b)[0].toLocaleString()),1),_("div",null,d(t(o)("status.totalSize"))+": "+d(t(Je)(f.status.zippedTotalSize)),1),_("div",null,"ZIP × "+d(t(r).length),1),_("div",null,d(t(o)("status.saveAllZipsTooltip")),1)],64)):(U(),ae($e,{key:1},[T(d(f.$t("status.downloadConvertedImage",t(r).length)),1)],64))]),_:1},8,["style","arrow-style"]),!f.processing&&f.status.success!==t(H)?(U(),ne(da,{key:0,options:t(Pe),onSelect:j[13]||(j[13]=(D,at)=>{var He;return(He=t(Pe).find(({key:Ot})=>D===Ot))==null?void 0:He.onSelect()}),"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start"},{default:e(()=>[n(ot,{show:t(ze),duration:0,delay:0,placement:"right",style:le({color:"white",backgroundColor:t(a).errorColor}),"arrow-style":{backgroundColor:t(a).errorColor}},{trigger:e(()=>[n(an,{value:f.status.unconvertedFileCount.toLocaleString(),color:t(a).errorColorHover,offset:[-0,-3]},{default:e(()=>[n(dt,{size:"small",color:t(a).errorColor},{default:e(()=>[n(t(_e),{size:"medium",style:{"vertical-align":"middle"}},{default:e(()=>[n(t($a))]),_:1})]),_:1},8,["color"])]),_:1},8,["value","color"])]),default:e(()=>[_("div",null,[_("div",null,d(t(o)("failed"))+": "+d(f.status.unconvertedFileCount.toLocaleString()),1),_("div",null,d(t(o)("status.totalSize"))+": "+d(t(Je)(f.status.unconvertedTotalSize)),1)])]),_:1},8,["show","style","arrow-style"])]),_:1},8,["options"])):ve("",!0)]),_:1},512),[[Re,!c.processing]])]),_:1}),n(qe,{name:"zipcontainer"},{default:e(()=>[Ne(n(G,{vertical:"",align:"center"},{default:e(()=>[n(ot,{placement:"left"},{trigger:e(()=>[n(on,{type:"line","indicator-placement":"inside",color:"red","rail-color":"rgba(255, 0, 0, 0.5)","indicator-text-color":f.status.failedFileZippedCount===f.status.unconvertedFileCount?"white":"#500",processing:t(m)&&!f.status.failedZipDone&&!f.status.failedToCreateFailedZip,percentage:f.status.failedFileZippedCount/f.status.unconvertedFileCount*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:e(()=>[f.status.failedToCreateFailedZip?(U(),ae("div",{key:1,style:le({color:t(a).errorColor})},d(f.$t("status.failureZippingFailedFiles")),5)):(U(),ae("span",Cs,d(f.status.failedFileZippedCount/f.status.unconvertedFileCount*100|0)+"% "+d(f.$t("status.zipped"))+" ("+d(f.status.failedFileZippedCount)+"/"+d(f.status.unconvertedFileCount)+")",1))]),_:1},8,["indicator-text-color","processing","percentage"])]),default:e(()=>[T(" "+d(f.$t("status.zippingProgress"))+" ("+d(f.status.failedFileZippedCount/f.status.unconvertedFileCount*100|0)+"%) ",1)]),_:1}),n(Pt,{name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:e(()=>[(U(!0),ae($e,null,mt(t(v),(D,at)=>(U(),ae("span",{key:at},[n(ot,{trigger:"hover",duration:0,delay:0},{trigger:e(()=>[_("a",{href:D.url,download:D.name,class:"in-button-anchor",onClick:He=>Ce(D)},[n(dt,{class:"zip-button",size:"tiny",color:D.clicked?"#551122":"#F00","text-color":D.clicked?"gray":"white",onClick:Ge(He=>Ce(D),["stop"]),round:""},{default:e(()=>[n(t(_e),{size:"tiny"},{default:e(()=>[n(t(Ea))]),_:1}),T("ZIP"+d(D.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,Ls)]),default:e(()=>[_("div",{style:le({color:t(a).errorColor})},[_("div",null,"ZIP "+d(D.number||"")+" ("+d(f.$t("failed"))+")",1),_("div",null,d(D.name),1),_("div",null,d(D.sizeByUnit),1),_("div",null,d(f.$rt("{n} @:files",D.count)),1)],4)]),_:2},1024)]))),128))]),_:1})]),_:1},512),[[Re,t(m)]])]),_:1})]),_:1})]),_:1},512)}}}),Os=je(Us,[["__scopeId","data-v-d47951d5"]]),Ps=["innerHTML"],Ms=10,Ns=100,Rs=be({__name:"converter",props:It({input:{},format:{},quality:{},retainExtension:{type:Boolean},maxZipSizeMB:{},threads:{}},{showNote:{type:Boolean},showNoteModifiers:{}}),emits:It(["start","end"],["update:showNote"]),setup(l,{emit:i}){rt(nt);const{t:u}=Ke(),s=Et(),o=Fa(),a=Ua(),p=navigator.hardwareConcurrency,c=typeof OffscreenCanvas=="function",h=l,g=Ue(l,"showNote"),k=i,m=w(!1),r=w(!1),v=w(!1),I=w(!1),y=w(!1),L=w("initializing"),C=w("info"),x=$t(ue()),$=ht("stat");let Z=!1,H=()=>{},b=0,S=!1;Ie(()=>h.input,M=>{M!=null&&M.length&&z(M)}),Ie(I,M=>{document.body.style.overflowY=M?"hidden":"auto"}),De(async()=>{await de(),ce()});async function q(){let M=!0;if(b>Ms*1e3&&!S&&x.success>0&&(M=!1,await new Promise(R=>{s.warning({title:u("confirmCloseDialogTitle"),autoFocus:!0,maskClosable:!1,positiveText:u("close"),negativeText:u("back"),onPositiveClick:()=>M=!0,onAfterLeave:R,content:u("confirmCloseDialog")})})),!M)return!1;a.destroyAll(),o.destroyAll(),I.value=!1,g.value=!1}function V(M){x.demandImage(M)}function re(){!r.value&&m.value?r.value=!0:q()}function N(){z(h.input)}let ke=w(()=>{});function ue(M){const R={logs:[],index:0,converted:0,success:0,failure:0,retried:0,done:0,length:0,zippedTotalCount:0,zippingErrorCount:0,zippedTotalSize:0,processing:!1,zips:[],inputTotalSize:0,outputTotalSize:0,thumbnail:null,baseZipName:"testzipname",type:"image/any",startedTime:Date.now(),convertedImageDataUrl:"",convertedImageName:"",convertedImageUrl:"",convertedImageOrgUrl:"",convertedImageIndex:-1,convertedImageFileId:-1,convertedImageShrinked:!1,zipSize:h.maxZipSizeMB,shrink:B.multithread&&B.shrinkImage?[B.maxWidth,B.maxHeight]:void 0,unconvertedListText:"",failedZipDone:!1,failedZips:[],unconvertedFileCount:0,unconvertedTotalSize:0,failedFileZippedCount:0,failedToCreateFailedZip:!1,demandImage:()=>{}};return Object.assign(M||{},R)}function ze(){y.value=!1,URL.revokeObjectURL(x.convertedImageUrl),URL.revokeObjectURL(x.convertedImageOrgUrl);for(const M of x.zips)URL.revokeObjectURL(M.url);x.zips.length=0;for(const M of x.failedZips)URL.revokeObjectURL(M.url);x.failedZips.length=0,ue(x),H(),H=()=>{},S=!1,v.value=!1,r.value=!1}async function z(M){if(m.value){s.error({title:"Busy",positiveText:"OK",content:u("interfered")});return}let R=M.concat();ue(x),ze(),I.value=!0,y.value=!0,m.value=!0,x.processing=!0,C.value="info",L.value=u("processing");const K=new Set,W=h.format,P=h.quality,se=[...W.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),ye=J(W,P,R[0].webkitRelativePath);x.length=R.length,x.baseZipName=ye,x.type=W.replace(/image\//,"").toUpperCase()+(/jpe?g|webp/i.test(W)?" ("+P+")":""),x.threads=Z?0:h.threads;const pe=Date.now();k("start");let fe,ie;if({exception:ie,callbackToGenerateFailedZips:fe,callbackToClearConverter:H}=!Z&&h.threads>=2?await Ul({files:R,completedFileIdSet:K,ConvStats:x,canceled:r,props:h,imageType:W,quality:P,outputExt:se,format:W,message:o,notification:a}):await jl(R,K,h,r,x),ie){let A;switch(ie.message){case"worker-load-error":A=u("errMsgWorkerLoadError");break;default:A="unexpected error"}s.error({title:"Error",autoFocus:!0,maskClosable:!1,closable:!1,content:()=>Q("div",[Q("p",A),Q(Te,{onClick(){location.reload()}},u("Reload"))])})}if(x.length,x.success===x.length?(C.value="success",L.value=u("completed")):(C.value="error",L.value=r.value?u("aborted"):u("incomplete")),K.size!==R.length){const A=O(M,K);ke.value=()=>{!A||!A.length||fe(A)}}m.value=!1,x.processing=!1,v.value=!0,R.length=0,b=Date.now()-pe,k("end")}function O(M,R){const K=[],W=[];let P=0;for(const se of M)R.has(se._id)||(K.push(se),W.push(se.webkitRelativePath||se.relativePath||se.name),P+=se.size);return W.length&&(x.unconvertedListText=W.join(`
`),x.unconvertedFileCount=K.length,x.unconvertedTotalSize=P),K}function J(M,R,K){var pe;const W=new Date;M=M.replace(/^image\//,"").toLowerCase();const P=B.useFolderNameForZip&&((pe=String(K).match(/^\/?([^/]+)\//))==null?void 0:pe[1])||"avif2jpg",se=`
    ${W.getFullYear().toString().substring(2)}
    ${String((W.getMonth()+1)*100+W.getDate()).padStart(4,"0")}
    ${String(W.getHours()*1e4+W.getMinutes()*100+W.getSeconds()).padStart(6,"0")}
    -
    ${M+(/jpe?g|webp/i.test(M)?R:"")}
  `.replace(/\s/g,"");return`${P}-${se}`.replace(/\s+/g," ")}async function de(){const M="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",R=document.createElement("img"),K=Kn(R).then(()=>!0,()=>!1);R.src=M,await K||s.warning({title:"Unsupported",positiveText:"OK",maskClosable:!1,content:u("avifUnsupported")})}function ce(){(!c||p<2||!Promise.any)&&(Z=!0),Z&&(Le.value=0)}return(M,R)=>{var fe;const K=_e,W=Kt,P=we,se=Ee,ye=vt,pe=Wt;return U(),ae($e,null,[!t(m)&&((fe=h.input)!=null&&fe.length)?(U(),ne(se,{key:0,justify:"center",align:"center",style:{"margin-top":"0.4em"}},{default:e(()=>[n(P,{trigger:"hover",placement:"top","keep-alive-on-hover":!1,duration:0,delay:50},{trigger:e(()=>{var ie;return[n(W,{value:((ie=M.input)==null?void 0:ie.length)||0,offset:[-12,-5],color:"#99999966"},{default:e(()=>[n(t(Te),{onClick:N,round:""},{icon:e(()=>[n(K,{size:"1.5em",color:"#CCCCCC"},{default:e(()=>[n(t(Oa))]),_:1})]),default:e(()=>[T(" "+d(t(u)("convertAgain")),1)]),_:1})]),_:1},8,["value"])]}),default:e(()=>{var ie;return[_("div",{innerHTML:t(u)("reconvertTip",(ie=h.input)==null?void 0:ie.length)},null,8,Ps)]}),_:1})]),_:1})):ve("",!0),n(pe,{ref:"processingModal","display-directive":"show",show:t(I),"onUpdate:show":R[2]||(R[2]=ie=>Ze(I)?I.value=ie:null),closable:t(v),"close-on-esc":!1,preset:"dialog",onClick:R[3]||(R[3]=ie=>{t(a).destroyAll(),t(o).destroyAll()}),onMaskClick:R[4]||(R[4]=ie=>{t(a).destroyAll(),t(o).destroyAll()}),onClose:q,onEsc:re,title:t(L),type:t(C),"mask-closable":!1,onAfterLeave:ze,onBeforeLeave:R[5]||(R[5]=ie=>t($).cleanup()),class:"processing-dialog"},{default:e(()=>[n(se,{vertical:"",style:{"flex-grow":"1"}},{default:e(()=>[t(y)?(U(),ne(Os,{key:0,ref_key:"stat",ref:$,processing:t(m),status:t(x),interval:Ns,onAllZipsClicked:R[0]||(R[0]=ie=>Ze(S)?S.value=!0:S=!0),onDemandZipErrors:t(ke),onDemandImage:V},null,8,["processing","status","onDemandZipErrors"])):ve("",!0),n(se,{justify:"end"},{default:e(()=>[t(m)?(U(),ne(t(Te),{key:0,disabled:t(r),ref:"cancelbutton",round:"",size:"large",onClick:R[1]||(R[1]=ie=>r.value=!0)},{default:e(()=>[n(ye,{show:t(r)&&!t(v),size:"small"},{default:e(()=>[T(d(t(u)("cancel")),1)]),_:1},8,["show"])]),_:1},8,["disabled"])):t(v)?(U(),ne(t(Te),{key:1,onClick:q,round:"",size:"large",style:{"font-size":"small","margin-top":"1em"}},{default:e(()=>[T(d(t(u)("close")),1)]),_:1})):ve("",!0)]),_:1})]),_:1})]),_:1},8,["show","closable","title","type"])],64)}}}),Ds="/avif2jpeg/dist/avif.png",js={class:"container-1"},Bs={style:{position:"relative"}},Zs={style:{position:"absolute","font-size":"0.5em",right:"-3.5em",bottom:"-1.5em","white-space":"nowrap"}},Ws={style:{color:"#666666"}},Hs=["innerHTML"],Vs={style:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","font-size":"xx-small","white-space":"nowrap"}},qs=be({__name:"droptarget",props:{forbidden:{type:Boolean},dropTarget:{}},emits:["drop"],setup(l,{emit:i}){rt(nt);const u=l,s=i,o=Pa(),a=w(!1),p=w(0),c=w("");De(()=>{h(u.dropTarget||document)});function h(k){document.ondragstart=m=>m.preventDefault(),document.ondragover=m=>m.preventDefault(),k.ondrop=async m=>{var v;if(m.preventDefault(),a.value||u.forbidden)return;a.value=!0,p.value=0,c.value="";let r;try{const I=[...m.dataTransfer.items].map(y=>y.webkitGetAsEntry());o.start(),r=await g(I),o.finish()}catch{r=[...((v=m.dataTransfer)==null?void 0:v.files)??[]],o.error()}a.value&&(a.value=!1,s("drop",r))}}async function g(k,m){m=m||[];for(const r of k)if(r.isFile){const v=await new Promise(I=>r.file(y=>I(y)));Object.defineProperty(v,"webkitRelativePath",{value:r.fullPath}),m.push(v),p.value++}else if(r.isDirectory){c.value=r.fullPath;const v=r.createReader();do{const I=await new Promise(y=>v.readEntries(L=>y(L)));if(!I.length)break;await g(I,m)}while(!0)}return m}return(k,m)=>{const r=_e,v=ut,I=Ee,y=we,L=Wt;return U(),ae("div",js,[n(y,{to:!1,"display-directive":"show",trigger:"hover",duration:0,delay:0,placement:"bottom-end"},{trigger:e(()=>[n(I,{vertical:"",class:"container-2"},{default:e(()=>[n(I,{align:"center",wrap:!1,class:"container-3"},{default:e(()=>[n(I,{vertical:"",align:"center",wrap:!1,style:{"font-weight":"bold","font-size":"1em","line-height":"90%","white-space":"nowrap"}},{default:e(()=>[m[5]||(m[5]=_("span",null,"Drag & Drop",-1)),_("span",Bs,[m[4]||(m[4]=T(" AVIF Images ")),_("span",Zs,[m[3]||(m[3]=T(" or ")),n(v,{placement:"bottom-end"},{trigger:e(()=>[_("span",Ws,[n(r,{style:{"vertical-align":"middle"}},{default:e(()=>[n(t(Yt))]),_:1}),m[1]||(m[1]=T(" Folders "))])]),default:e(()=>[m[2]||(m[2]=T(" You can drag and drop your local folders "))]),_:1})])])]),_:1}),n(I,null,{default:e(()=>m[6]||(m[6]=[_("img",{src:Ds,class:"avif"},null,-1)])),_:1})]),_:1})]),_:1})]),default:e(()=>[_("h3",{innerHTML:k.$t("droptarget"),style:{"max-width":"200px","text-align":"center","word-break":"keep-all","overflow-wrap":"break-word"}},null,8,Hs)]),_:1}),n(L,{show:t(a),"onUpdate:show":m[0]||(m[0]=C=>Ze(a)?a.value=C:null),closable:!0,preset:"dialog",title:"Parsing dropped items.",type:"info","mask-closable":!1,"negative-text":k.$t("cancel")},{default:e(()=>[n(I,{vertical:"",align:"center"},{default:e(()=>[_("div",Vs,d(t(c)),1),_("div",null,"found "+d(t(p))+" files",1)]),_:1})]),_:1},8,["show","negative-text"])])}}}),Gs=je(qs,[["__scopeId","data-v-d17987b7"]]),Ks={class:"container-1"},Ys={class:"container-2"},Xs=["innerHTML"],Qs=["innerHTML"],Js={style:{"white-space":"nowrap"}},ei={style:{"padding-left":"1em"}},ti=["innerHTML"],ni=["accept"],oi=be({__name:"file-selector",props:It({target:{},userExtensions:{},forbidden:{type:Boolean}},{expanded:{type:Boolean,required:!1},expandedModifiers:{},disableNotifyingFolderSelect:{type:Boolean},disableNotifyingFolderSelectModifiers:{}}),emits:It(["input","click","cancel","on-change-accept","update:target","update:userExtensions"],["update:expanded","update:disableNotifyingFolderSelect"]),setup(l,{emit:i}){const u=Et(),{t:s}=Ke(),o=rt(nt),a=["avif_only","all_images","all_files","edit_type"],p=[];for(const z of a)p.push({label:()=>s("fileTypeRadioOptions."+z),value:z});const c=({node:z,option:O})=>Q(we,{placement:"right"},{trigger:()=>z,default:()=>re(O.value).replace(/,/g,", ")}),h=l,g=i,k=w(0),m=w(!1),r=w(!1),v=xe(()=>re(L.value)),I=xe(()=>C.value.split(",").every(O=>/^\s*(\.[\w\-]+)*\s*$/.test(O))?"success":"error"),y=xe(()=>!h.forbidden&&!r.value);Ue(l,"expanded");const L=xe({get:()=>a.indexOf(h.target)>=0?h.target:a[0],set:z=>{g("update:target",z)}}),C=xe({get:()=>h.userExtensions,set:z=>{g("update:userExtensions",z)}}),x=Ue(l,"disableNotifyingFolderSelect"),$=w(null),Z=w(null),H=w(V());Ie(L,z=>{g("on-change-accept",v.value)}),De(()=>{});async function b(z){if(g("click"),z===Z.value&&!x.value){let O=!1;if(await new Promise(J=>{u.info({title:s("loadfolderNotifyingTitle"),positiveText:s("Continue"),negativeText:s("Cancel"),onAfterLeave:()=>J(O),onPositiveClick:()=>O=!0,content:()=>Q("div",[Q("p",{},s("loadfolderNotifyingMessageTerm1")),Q("div",[Q(bn,{width:250,style:{border:"3px solid gray"},src:"/avif2jpeg/dist//notification-folder.png"})]),Q("p",{},s("loadfolderNotifyingMessageTerm2")),Q("p",[Q(Cn,{onUpdateChecked:de=>x.value=de,checked:x.value},()=>s("checkboxTextDontShowThis"))])])})}),!O){x.value=!1,g("cancel");return}}z.click()}function S(){g("cancel")}function q(z){const J=[...z.target.files];$.value.value="",Z.value.value="",ke(J)}function V(){return"webkitdirectory"in document.createElement("input")}function re(z){switch(z){case"avif_only":return".avif, .webp";case"all_images":return".jpg, .jpeg, .jfif, .pjpeg, .pjp, .gif, .png, .webp, .avif, .bmp, .apng, .ico";case"edit_type":return C.value;case"all_files":default:return".*"}}async function N(z){const O=String(v.value).toLowerCase().replace(/\s+/g,"");if(O&&v.value!==".*"){const J=O.split(",");z=z.filter(de=>J.includes(de.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),z.length||(await new Promise(de=>{u.error({title:"Images Not Found",positiveText:"OK",onAfterLeave:de,content:()=>Q("div",[Q(Vt,{description:"NO IMAGES"}),`${s("noimage")}`,Q("br"),v.value])})}),S())}return z}async function ke(z){r.value=!0,z=await N(z),k.value=z.length,z.length>0&&g("input",ze(z)),r.value=!1}let ue=0;function ze(z){const O=[];for(const J of z)J.hasOwnProperty("_id")||Object.defineProperty(J,"_id",{value:ue++}),O.push(J);return O}return(z,O)=>{const J=_e,de=Te,ce=Ee,M=Xt,R=An,K=Ma,W=ut;return U(),ae($e,null,[_("div",Ks,[_("div",Ys,[n(ce,{vertical:"",align:"center",justify:"center",inline:"",size:"large"},{default:e(()=>[n(ce,{align:"center",justify:"space-around",class:"main-buttons"},{default:e(()=>[n(ce,{vertical:"",align:"stretch",justify:"center"},{default:e(()=>[n(t(we),{to:!1,"display-directive":"show",show:t(o).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:t(o).LANDSCAPE.value?"right":"top",duration:0,delay:0,"z-index":10},{trigger:e(()=>[n(de,{disabled:!t(y),size:"large",onClick:O[0]||(O[0]=P=>b(t($))),round:"",style:{width:"100%","background-color":"white","font-size":"large"}},{icon:e(()=>[n(J,{size:"large",color:"gray"},{default:e(()=>[n(t($n))]),_:1})]),default:e(()=>[T(" "+d(z.$t("loadbutton")),1)]),_:1},8,["disabled"])]),default:e(()=>[_("div",{innerHTML:z.$t("loadbuttontooltip")},null,8,Xs)]),_:1},8,["show","placement"]),!t(o).IS_SP&&t(H)||t(o).SSR?(U(),ae($e,{key:0},[n(ce,{align:"center",justify:"center",style:{color:"gray",margin:"0em"}},{default:e(()=>[T(d(z.$t("or")),1)]),_:1}),n(t(we),{to:!1,"display-directive":"show",trigger:"hover",placement:"left","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:t(o).showTooltipsBeforeMounted.value},{trigger:e(()=>[n(de,{disabled:!t(y),size:"large",onClick:O[1]||(O[1]=P=>b(t(Z))),round:"",style:{width:"100%","background-color":"white","font-size":"large"}},{icon:e(()=>[n(J,{size:"large",color:"gray"},{default:e(()=>[n(t(Yt))]),_:1})]),default:e(()=>[T(" "+d(z.$t("loadfolderbutton")),1)]),_:1},8,["disabled"])]),default:e(()=>[_("div",{innerHTML:z.$t("loadfoldertooltip")},null,8,Qs)]),_:1},8,["show"])],64)):ve("",!0)]),_:1}),t(o).IS_SP?ve("",!0):(U(),ne(Gs,{key:0,onDrop:ke,forbidden:!t(y),class:"drop-target"},null,8,["forbidden"]))]),_:1}),n(ce,{vertical:""},{default:e(()=>[n(ce,{wrap:t(o).IS_SP,align:"center",justify:"stretch"},{default:e(()=>[_("span",Js,d(z.$t("TargetFileTypeExt"))+": ",1),n(t(we),{"keep-alive-on-hover":!1,placement:"right",style:{"max-width":"200px"},duration:0,delay:0},{trigger:e(()=>[n(M,{trigger:"click",width:"trigger",size:"small",value:t(L),"onUpdate:value":O[2]||(O[2]=P=>Ze(L)?L.value=P:null),options:p,"render-option":c,"consistent-menu-width":!1},null,8,["value"])]),default:e(()=>[T(" "+d(re(t(L)).replace(/,/g,", ")),1)]),_:1})]),_:1},8,["wrap"]),t(L)==="edit_type"?(U(),ne(t(we),{key:0,trigger:"hover","keep-alive-on-hover":!1,placement:"bottom-start",show:t(m),duration:0,delay:0},{trigger:e(()=>[_("div",ei,[n(W,{trigger:"manual",placement:"right-end",show:t(L)==="edit_type"&&t(I)!=="success"&&!!t(m)},{trigger:e(()=>[n(R,{value:t(C),"onUpdate:value":O[3]||(O[3]=P=>Ze(C)?C.value=P:null),status:t(I),disabled:t(L)!=="edit_type",onFocus:O[4]||(O[4]=P=>m.value=!0),onBlur:O[5]||(O[5]=P=>m.value=void 0),clearable:!0,size:"small",placeholder:".jpg, .gif, .png",spellcheck:"false"},null,8,["value","status","disabled"])]),default:e(()=>[n(K,{type:"error","show-icon":!0,title:"Validation error"},{default:e(()=>O[6]||(O[6]=[T(" Please correct the extension list."),_("br",null,null,-1),_("ul",null,[_("li",null,"Each extension must begin with a period. "),_("li",null,"Separate each extension with a comma. "),_("li",null,"Use alphameric characters.")],-1)])),_:1})]),_:1},8,["show"])])]),default:e(()=>[_("span",{innerHTML:z.$t("editAcceptTypes")},null,8,ti)]),_:1},8,["show"])):ve("",!0)]),_:1})]),_:1})])]),_("input",{ref_key:"fileinput",ref:$,onInput:q,onCancel:S,type:"file",multiple:"",accept:t(v),style:{display:"none"}},null,40,ni),_("input",{ref_key:"folderinput",ref:Z,webkitdirectory:"",directory:"",onInput:q,onCancel:S,type:"file",style:{display:"none"}},null,544)],64)}}}),ai=je(oi,[["__scopeId","data-v-863e9e5f"]]),li={style:{"white-space":"nowrap"}},si=be({__name:"settings-output",props:{quality:{},format:{}},emits:["update:format","update:quality"],setup(l,{emit:i}){const u=l,s=i,{t:o}=Ke(),a=rt(nt),p=w([]),c=["image/jpeg","image/png","image/gif","image/bmp","image/avif","image/webp"],h=xe({get:()=>u.format,set:I=>{I=r(I),s("update:format",I)}}),g=xe({get:()=>u.quality,set:I=>{s("update:quality",I)}}),k=xe(()=>/png|bmp/i.test(h.value)),m=w(null);De(()=>{v()});function r(I){return p.value.indexOf(I)<0&&(I=p.value[0]),I}function v(){for(const I of c)m.value.toDataURL(I).indexOf(I)>=0&&p.value.push(I);p.value.length===0&&p.value.push(c[0])}return(I,y)=>{const L=_e,C=Xt,x=Ee,$=we,Z=Gt,H=En;return U(),ae($e,null,[n(x,{justify:"center",class:"body"},{default:e(()=>[n(x,{vertical:""},{default:e(()=>[n($,{to:!1,"display-directive":"show",show:t(a).showTooltipsBeforeMounted.value,trigger:"hover",placement:t(a).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:e(()=>[n(x,{align:"center",wrap:!1},{default:e(()=>[n(L,null,{default:e(()=>[n(t($n))]),_:1}),T(d(t(o)("settings.imageType"))+": ",1),n(C,{value:h.value,"onUpdate:value":y[0]||(y[0]=b=>h.value=b),options:p.value.map(b=>({value:b,label:b})),"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),_:1})]),default:e(()=>[T(" "+d(t(o)("settings.imageTypeTooltip")),1)]),_:1},8,["show","placement"]),n($,{to:!1,"display-directive":"show",show:t(a).showTooltipsBeforeMounted.value,trigger:"hover",placement:t(a).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:e(()=>[n(x,{align:"center"},{default:e(()=>[n(x,{align:"start",wrap:!1},{default:e(()=>[n(L,null,{default:e(()=>[n(t(Ln))]),_:1}),_("span",li,d(t(o)("settings.quality"))+":",1),n(x,{align:"center",justify:"space-between"},{default:e(()=>[n(Z,{tooltip:!1,value:g.value,"onUpdate:value":y[1]||(y[1]=b=>g.value=b),step:1,style:{width:"120px"},disabled:k.value},null,8,["value","disabled"]),n(H,{onBlur:y[2]||(y[2]=b=>g.value??(g.value=0)),value:g.value,"onUpdate:value":y[3]||(y[3]=b=>g.value=b),step:"1",min:"0",max:"100",disabled:k.value,style:{width:"90px"},size:"small"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:e(()=>[T(" "+d(t(o)("settings.qualitytooltip")),1)]),_:1},8,["show","placement"])]),_:1})]),_:1}),_("canvas",{ref_key:"canvas",ref:m,width:"1",height:"1",style:{display:"none"}},null,512)],64)}}}),ii=je(si,[["__scopeId","data-v-d5c6e189"]]),ri={style:{width:"4em","text-align":"left"}},ui={style:{width:"4em","text-align":"left"}},Rt=100,fn=2e3,gn=4096,mn=4096,di=100,ci=100,pi=be({__name:"settings-adv",props:{expanded:{type:Boolean,required:!1},expandedModifiers:{},multithread:{type:Boolean,required:!0},multithreadModifiers:{},threadCount:{required:!0},threadCountModifiers:{},maxZipSize:{required:!0},maxZipSizeModifiers:{},retainExt:{type:Boolean,required:!0},retainExtModifiers:{},useFolderNameForZip:{type:Boolean,required:!0},useFolderNameForZipModifiers:{},shrinkImage:{type:Boolean,required:!0},shrinkImageModifiers:{},maxWidth:{required:!0},maxWidthModifiers:{},maxHeight:{required:!0},maxHeightModifiers:{}},emits:["update:expanded","update:multithread","update:threadCount","update:maxZipSize","update:retainExt","update:useFolderNameForZip","update:shrinkImage","update:maxWidth","update:maxHeight"],setup(l){const i={trigger:"hover",placement:"left",keepAliveOnHover:!1,duration:0,delay:0,style:"max-width: 20vw;"},u=Ue(l,"expanded"),s=Ue(l,"multithread"),o=Ue(l,"threadCount"),a=Ue(l,"maxZipSize"),p=Ue(l,"retainExt"),c=Ue(l,"useFolderNameForZip"),h=Ue(l,"shrinkImage"),g=Ue(l,"maxWidth"),k=Ue(l,"maxHeight");Ie(Le,r=>{r>1||(s.value=!1),o.value>r&&(o.value=r)},{immediate:!0});const m=xe(()=>s.value&&Le.value>1);return De(()=>{Le.value>1&&typeof o.value>"u"&&(o.value=Math.max(Le.value,2))}),(r,v)=>{const I=_e,y=Te,L=Da,C=Ee,x=Gt,$=En,Z=Sn,H=In;return U(),ne(C,{justify:"center"},{default:e(()=>[n(H,{"display-directive":"show","default-expanded-names":u.value?["collapitem"]:"","on-update:expanded-names":b=>u.value=!!String(b),"trigger-areas":["arrow","main"],class:wt(["settings-body",u.value?"expand-adv-settings":""])},Na({arrow:e(()=>[n(I,{style:le(u.value&&{top:"8px"})},{default:e(()=>[n(t(Za))]),_:1},8,["style"]),n(I,null,{default:e(()=>[n(t(Wa))]),_:1})]),default:e(()=>[n(Z,{title:r.$t("settings.advancedSettings"),name:"collapitem"},{default:e(()=>[n(C,{vertical:"",style:{"padding-left":"2em"}},{default:e(()=>[n(t(we),ct(pt(i)),{trigger:e(()=>[n(C,{vertical:""},{default:e(()=>[n(C,{wrap:!1,align:"center"},{default:e(()=>[n(y,{text:"",disabled:!t(Le),style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:v[0]||(v[0]=b=>s.value=!s.value)},{icon:e(()=>[n(I,null,{default:e(()=>[n(t(Ra))]),_:1})]),default:e(()=>[T(" "+d(r.$t("settings.enableMultiThreads")),1)]),_:1},8,["disabled"]),n(L,{value:s.value,"onUpdate:value":v[1]||(v[1]=b=>s.value=b),disabled:!t(Le),size:"small"},null,8,["value","disabled"])]),_:1}),n(C,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:e(()=>[n(x,{value:o.value,"onUpdate:value":v[2]||(v[2]=b=>o.value=b),disabled:!t(Le)||!s.value,step:1,min:2,max:t(Le),style:{width:"120px"}},null,8,["value","disabled","max"]),n($,{onBlur:v[3]||(v[3]=b=>o.value??(o.value=2)),size:"tiny",value:o.value,"onUpdate:value":v[4]||(v[4]=b=>o.value=b),disabled:!t(Le)||!s.value,step:1,min:2,max:t(Le),style:{width:"10em"}},{suffix:e(()=>[T(d(r.$t("threads",o.value)),1)]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:e(()=>[T(" "+d(r.$t("settings.multiThreadsTooltip")),1)]),_:1},16),n(t(we),ct(pt(i)),{trigger:e(()=>[n(C,{vertical:""},{default:e(()=>[n(C,{wrap:!1,align:"center"},{default:e(()=>[n(y,{text:"",focusable:!1,style:{"white-space":"nowrap","font-size":"smaller"}},{icon:e(()=>[n(I,{style:{"vertical-align":"middle"}},{default:e(()=>[n(t(ja))]),_:1})]),default:e(()=>[T(" "+d(r.$t("settings.maxZipFileSize"))+": ",1)]),_:1})]),_:1}),n(C,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:e(()=>[n(x,{tooltip:!1,value:a.value,"onUpdate:value":v[5]||(v[5]=b=>a.value=b),step:1,min:Rt,max:fn,style:{width:"120px"}},null,8,["value"]),n($,{onBlur:v[6]||(v[6]=b=>a.value??(a.value=Rt)),size:"tiny",value:a.value,"onUpdate:value":v[7]||(v[7]=b=>a.value=b),step:"1",min:Rt,max:fn,style:{width:"10em"}},{suffix:e(()=>v[20]||(v[20]=[T("(MB)")])),_:1},8,["value"])]),_:1})]),_:1})]),default:e(()=>[T(" "+d(r.$t("settings.maxZipFileSizeTooltip")),1)]),_:1},16),n(t(we),ct(pt(i)),{trigger:e(()=>[n(C,{wrap:!1,align:"center"},{default:e(()=>[n(y,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:v[8]||(v[8]=b=>c.value=!c.value)},{icon:e(()=>[n(I,null,{default:e(()=>[n(t(Yt))]),_:1})]),default:e(()=>[T(" "+d(r.$t("settings.useFolderNameForZip")),1)]),_:1}),n(L,{value:c.value,"onUpdate:value":v[9]||(v[9]=b=>c.value=b),size:"small"},null,8,["value"])]),_:1})]),default:e(()=>[T(" "+d(r.$t("settings.useFolderNameForZipTooltip")),1)]),_:1},16),n(t(we),ct(pt(i)),{trigger:e(()=>[n(C,{wrap:!1,align:"center"},{default:e(()=>[n(y,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:v[10]||(v[10]=b=>p.value=!p.value)},{icon:e(()=>[n(I,null,{default:e(()=>[n(t(xn))]),_:1})]),default:e(()=>[T(" "+d(r.$t("settings.retainOriginalExtension")),1)]),_:1}),n(L,{value:p.value,"onUpdate:value":v[11]||(v[11]=b=>p.value=b),size:"small"},null,8,["value"])]),_:1})]),default:e(()=>[T(" "+d(r.$t("settings.retainExtTooltip")),1)]),_:1},16),n(t(we),ct(pt(i)),{trigger:e(()=>[n(C,{vertical:""},{default:e(()=>[n(C,{wrap:!1,align:"center"},{default:e(()=>[n(y,{disabled:!m.value,text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:v[12]||(v[12]=b=>h.value=!h.value)},{icon:e(()=>[n(I,null,{default:e(()=>[n(t(Ba))]),_:1})]),default:e(()=>[T(" "+d(r.$t("settings.shrinkImage")),1)]),_:1},8,["disabled"]),n(L,{disabled:!m.value,value:h.value,"onUpdate:value":v[13]||(v[13]=b=>h.value=b),size:"small"},null,8,["disabled","value"])]),_:1}),n(C,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:e(()=>[n(x,{value:g.value,"onUpdate:value":v[14]||(v[14]=b=>g.value=b),disabled:!h.value||!m.value,step:1,min:di,max:gn,style:{width:"120px"}},null,8,["value","disabled"]),n($,{size:"tiny",onBlur:v[15]||(v[15]=b=>g.value??(g.value=8)),value:g.value,"onUpdate:value":v[16]||(v[16]=b=>g.value=b),disabled:!h.value||!m.value,step:1,min:8,max:gn*4,style:{"max-width":"15em","text-align":"right"}},{prefix:e(()=>[_("span",ri,d(r.$t("width")),1)]),suffix:e(()=>v[21]||(v[21]=[T("px")])),_:1},8,["value","disabled","max"])]),_:1}),n(C,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:e(()=>[n(x,{value:k.value,"onUpdate:value":v[17]||(v[17]=b=>k.value=b),disabled:!h.value||!m.value,step:1,min:ci,max:mn,style:{width:"120px"}},null,8,["value","disabled"]),n($,{size:"tiny",onBlur:v[18]||(v[18]=b=>k.value??(k.value=8)),value:k.value,"onUpdate:value":v[19]||(v[19]=b=>k.value=b),disabled:!h.value||!m.value,step:1,min:8,max:mn*4,style:{"max-width":"15em","text-align":"right"}},{prefix:e(()=>[_("span",ui,d(r.$t("height")),1)]),suffix:e(()=>v[22]||(v[22]=[T("px")])),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:e(()=>[T(" "+d(r.$t("settings.shrinkImageTooltip")),1)]),_:1},16)]),_:1})]),_:1},8,["title"])]),_:2},[u.value?{name:"header-extra",fn:e(()=>[n(t(we),{"keep-alive-on-hover":!1,duration:0,delay:0},{trigger:e(()=>[n(y,{onClick:t(sl),size:"tiny",style:{"font-size":"xx-small"}},{default:e(()=>[T(d(r.$t("reset")),1)]),_:1},8,["onClick"])]),default:e(()=>[T(" "+d(r.$t("settings.resetButtonTooltip")),1)]),_:1})]),key:"0"}:void 0]),1032,["default-expanded-names","on-update:expanded-names","class"])]),_:1})}}}),fi=je(pi,[["__scopeId","data-v-706f0515"]]),gi={},mi={style:{color:"gray","padding-left":"20px"}},vi=["innerHTML"];function hi(l,i){const u=Ht,s=Ee;return U(),ne(s,{vertical:"",justify:"end"},{default:e(()=>[n(u,{style:{margin:"0px"}}),n(s,{justify:"center"},{default:e(()=>[_("ul",mi,[(U(!0),ae($e,null,mt(l.$tm("descriptions"),o=>(U(),ae("li",{key:o,style:{"text-align":"left"},innerHTML:o},null,8,vi))),128))])]),_:1})]),_:1})}const _i=je(gi,[["render",hi]]),wi="modulepreload",yi=function(l){return"/avif2jpeg/dist/"+l},vn={},me=function(i,u,s){let o=Promise.resolve();if(u&&u.length>0){document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),c=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));o=Promise.allSettled(u.map(h=>{if(h=yi(h),h in vn)return;vn[h]=!0;const g=h.endsWith(".css"),k=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${k}`))return;const m=document.createElement("link");if(m.rel=g?"stylesheet":wi,g||(m.as="script"),m.crossOrigin="",m.href=h,c&&m.setAttribute("nonce",c),document.head.appendChild(m),g)return new Promise((r,v)=>{m.addEventListener("load",r),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(p){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=p,window.dispatchEvent(c),!c.defaultPrevented)throw p}return o.then(p=>{for(const c of p||[])c.status==="rejected"&&a(c.reason);return i().catch(a)})},Yn="English",Xn="🇬🇧",Qn='AVIF to JPEG "Offline" Batch Converter',Jn="It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",eo="Drag & Drop AVIF Images to Convert",to=["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data is sent to any server</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.'],no="Select your language",oo="Choose Target File Extentions",ao={avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types",edit_type:"Edit File Extension List"},lo="Input a list of comma separated file extentions to load.<br>e.g.) .jpg,.gif,.png",so="Load Images",io="Select your images from a dialog window.<br>*Multiple selection allowed.",ro="Load a Whole Folder",uo=`Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>*It will show "Upload" button, but it actually doesn't upload anything to any server.`,co="Converting images",po="Aborted",fo="Some files failed to convert",go="Completed",mo="Currently Busy",vo="No files with the extentions were found.",ho="Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",_o="Cancel",wo="Save",yo="Close",bo="Open",ko="Re-convert",zo="Convert previous selected {n} @:files again",Ao="File | Files",To="thread | threads",xo="You have not saved the converted images yet.",Io="Data have not been saved",So="Open Source",Co="Open the converted image",Lo="Copied to clipboard",$o="The converted image was copied to your clipboard as DataURL.",Eo="Copy the converted image as DataURL",Fo="Convert Again",Uo={expandLogTooltip:"Displaying the entire log may severely reduce conversion speed.",expandLog:"Show entire log",autoScroll:"Auto scroll",showOnlyErrors:"Show only errors",log:"Log",outInRate:"Out / In Ratio",elapsedTime:"Elapsed Time",multiThreading:"Multi-Threading",outputSettings:"Output Settings",totalSize:"Total Size",totalFiles:"Number of Files",confirmDownloadMessage:"It will start to download {0} zip files.",inputSize:"Input Size",outputSize:"Output Size",filterSuccess:"Hide completed item",progressErrors:"Failed items",progressStarted:"Started Items",progressTotal:"Total number of files",zippingProgress:"Zipping progress",zipped:"ZIPPED",openFailedList:"Open failed file list",zipFailedList:"Pack failed files into Zips",table:{index:"index",status:"status",core:"thread",details:"file"},saveFailedList:"Save failed file list",done:"done",convertedZips:"successfully completed ZIP",progressSuccess:"Completed Files",downloadConvertedImage:"Download Converted Image",failureZippingFailedFiles:"Failure while zipping the failed files.",browseConvertedImages:"Browse converted images",index:"Index",Original:"Original",Converted:"Converted",saveAllZipsTooltip:"Save all ZIP files",Shrinked:"Shrinked",Shrinking:"Shrinking",saveAll:"Save All",progressRetries:"Retrying files",success:"success",started:"started",total:"total",files:"files"},Oo={maxZipFileSize:"Max zip file size",retainExtTooltip:"New extension will be appended to original extension",retainOriginalExtension:"Keep Original File Extension",qualitytooltip:"Set image quality for output",quality:"Image Quality",maxZipFileSizeTooltip:"Set smaller value if memory problems occur.",ignoreExtTooltip:'Try to load files that don"t have image file extension',ignoreFileExtensions:"Load All File Types",imageTypeTooltip:"Choose image format for output",imageType:"Image Type",advancedSettings:"Advanced Settings",enableMultiThreads:"Enable multi-threading",resetButtonTooltip:"Restore all settings to default.",multiThreadsTooltip:"Convert images in multi-threaded",shrinkImageTooltip:"If the image dimensions are larger than the specified value, shrink the image to that value",shrinkImage:"Shrink images that exceed the following dimensions",useFolderNameForZip:"Use dropped folder name for the zip file",useFolderNameForZipTooltip:"If a folder is dropped or selected, its name is used as the name of the output ZIP file"},Po="Disabled",Mo="Download",No="Reset",Ro="Back",Do="Failed",jo="Success",Bo="Previous version",Zo=`
Height`,Wo="Width",Ho="Don't show this message again",Vo="About the warning when selecting a folder",qo="OK",Go={},Ko="You must press the “Upload” button here to load all the images in the folder, but the data loaded by this application is never actually uploaded to the server.",Yo="Continue",Xo="Cancel",Qo="When you select a folder instead of a file as input on a website, major web browsers will display a warning like the image below.",Jo="This page may be an outdated version. Please reload the page.",ea="Reload",ta='If the conversion process frequently fails and an “Out of Memory” message appears, try reducing or disabling the number of "multi-threads" in the "Advanced Settings".',na="Next",oa="Previous",aa="or",la="Target File Extensions",sa={lang:Yn,flags:Xn,title:Qn,metaDescription:Jn,droptarget:eo,descriptions:to,selectLanguage:no,fileTypeRadioTitle:oo,fileTypeRadioOptions:ao,editAcceptTypes:lo,loadbutton:so,loadbuttontooltip:io,loadfolderbutton:ro,loadfoldertooltip:uo,processing:co,aborted:po,incomplete:fo,completed:go,interfered:mo,noimage:vo,avifUnsupported:ho,cancel:_o,save:wo,close:yo,open:bo,reconvert:ko,reconvertTip:zo,files:Ao,threads:To,confirmCloseDialog:xo,confirmCloseDialogTitle:Io,githubOpenSource:So,convertedImageUrlTooltip:Co,copiedDataURLDialogTitle:Lo,copiedDataURLMessage:$o,convertedImageDataUrlTooltip:Eo,convertAgain:Fo,status:Uo,settings:Oo,disabled:Po,Download:Mo,reset:No,back:Ro,failed:Do,success:jo,previousVersion:Bo,height:Zo,width:Wo,checkboxTextDontShowThis:Ho,loadfolderNotifyingTitle:Vo,OK:qo,loadfolderNotifyingMessage:Go,loadfolderNotifyingMessageTerm2:Ko,Continue:Yo,Cancel:Xo,loadfolderNotifyingMessageTerm1:Qo,errMsgWorkerLoadError:Jo,Reload:ea,annotationOutOfMemory:ta,Next:na,Prev:oa,or:aa,TargetFileTypeExt:la},bi=Object.freeze(Object.defineProperty({__proto__:null,Cancel:Xo,Continue:Yo,Download:Mo,Next:na,OK:qo,Prev:oa,Reload:ea,TargetFileTypeExt:la,aborted:po,annotationOutOfMemory:ta,avifUnsupported:ho,back:Ro,cancel:_o,checkboxTextDontShowThis:Ho,close:yo,completed:go,confirmCloseDialog:xo,confirmCloseDialogTitle:Io,convertAgain:Fo,convertedImageDataUrlTooltip:Eo,convertedImageUrlTooltip:Co,copiedDataURLDialogTitle:Lo,copiedDataURLMessage:$o,default:sa,descriptions:to,disabled:Po,droptarget:eo,editAcceptTypes:lo,errMsgWorkerLoadError:Jo,failed:Do,fileTypeRadioOptions:ao,fileTypeRadioTitle:oo,files:Ao,flags:Xn,githubOpenSource:So,height:Zo,incomplete:fo,interfered:mo,lang:Yn,loadbutton:so,loadbuttontooltip:io,loadfolderNotifyingMessage:Go,loadfolderNotifyingMessageTerm1:Qo,loadfolderNotifyingMessageTerm2:Ko,loadfolderNotifyingTitle:Vo,loadfolderbutton:ro,loadfoldertooltip:uo,metaDescription:Jn,noimage:vo,open:bo,or:aa,previousVersion:Bo,processing:co,reconvert:ko,reconvertTip:zo,reset:No,save:wo,selectLanguage:no,settings:Oo,status:Uo,success:jo,threads:To,title:Qn,width:Wo},Symbol.toStringTag,{value:"Module"})),ki="Arabic",zi="German",Ai="English",Ti="Spanish",xi="Finnish",Ii="French",Si="Hindi",Ci="Indonesian",Li="Italian",$i="Japanese",Ei="Korean",Fi="Dutch",Ui="Polish",Oi="Portuguese",Pi="Russian",Mi="Turkish",Ni="Ukrainian",Ri="Chinese",Di={ar:ki,de:zi,en:Ai,es:Ti,fi:xi,fr:Ii,hi:Si,id:Ci,it:Li,ja:$i,ko:Ei,nl:Fi,pl:Ui,pt:Oi,ru:Pi,tr:Mi,uk:Ni,"zh-hant":"Chinese(hant)",zh:Ri},Ct=[],ia={en:sa},en={},hn=Object.assign({"./locales/ar.json":()=>me(()=>import("./ar-R1nWn6FE.js"),[]),"./locales/de.json":()=>me(()=>import("./de-BQGs2pL0.js"),[]),"./locales/en.json":()=>me(()=>Promise.resolve().then(()=>bi),void 0),"./locales/es.json":()=>me(()=>import("./es-hNFH7CpH.js"),[]),"./locales/fi.json":()=>me(()=>import("./fi-BlW9_Dlc.js"),[]),"./locales/fr.json":()=>me(()=>import("./fr-7Yf_xj9t.js"),[]),"./locales/hi.json":()=>me(()=>import("./hi-BKWJrdmz.js"),[]),"./locales/id.json":()=>me(()=>import("./id-CiMytmiw.js"),[]),"./locales/it.json":()=>me(()=>import("./it-CgS7wTTn.js"),[]),"./locales/ja.json":()=>me(()=>import("./ja-wB-x4xsc.js"),[]),"./locales/ko.json":()=>me(()=>import("./ko-Bv8ld06G.js"),[]),"./locales/nl.json":()=>me(()=>import("./nl-Bz24Wvu0.js"),[]),"./locales/pl.json":()=>me(()=>import("./pl-0tUdSb8Q.js"),[]),"./locales/pt.json":()=>me(()=>import("./pt-tZDqszsz.js"),[]),"./locales/ru.json":()=>me(()=>import("./ru-D-zV02m3.js"),[]),"./locales/tr.json":()=>me(()=>import("./tr-hDjZ1tCY.js"),[]),"./locales/uk.json":()=>me(()=>import("./uk-BpKnjUhd.js"),[]),"./locales/zh-hant.json":()=>me(()=>import("./zh-hant-DcmolfSj.js"),[]),"./locales/zh.json":()=>me(()=>import("./zh-qpBVarT7.js"),[])});var _n;for(const l in hn){const i=(_n=l.match(/\/([a-z]{2}(?:-[a-z]+)?)\.json$/i))==null?void 0:_n[1];i&&(Ct.push(i),!(i in ia)&&(en[i]=hn[l]))}let Zt=Bi();Zt in en||(Zt="en");const Lt=Ha({legacy:!1,globalInjection:!0,locale:Zt,fallbackLocale:"en",messages:ia,warnHtmlMessage:!1,missingWarn:!1,fallbackWarn:!1});async function ji(l){if(Lt.global.availableLocales.indexOf(l)>=0)return;const i=await en[l]();Lt.global.setLocaleMessage(l,i),await lt()}function Bi(){const l=location.pathname;return String(l.match(/[^/]+(?=\/?$)/)||"").toLowerCase()}const Zi=["innerHTML"],Wi=be({__name:"switch-lang",emits:["lang-ready","lang-change"],async setup(l,{emit:i}){let u,s;const o=rt(nt),a=yn(),{locale:p,t:c}=Ke(),h=i,g=Object.entries(Di).map(([y,L])=>({label:L,value:y}));g.sort((y,L)=>{const C=y.label,x=L.label;return C>x?1:C<x?-1:0}),De(()=>{a.afterEach((y,L,C)=>{m(),o.switchToolTipVisibility()})}),Va(async()=>{}),[u,s]=qa(()=>m()),await u,s();async function k(y){(y!==p.value||Lt.global.availableLocales.indexOf(y)===-1)&&(h("lang-change",y),await ji(y),p.value=y,document.title=c("title"),await lt()),h("lang-ready",y)}async function m(){const y=a.currentRoute.value.path||"",L=String(y.match(new RegExp("(?<=^\\/)[^/]+"))||"");L&&Ct.includes(L)?(await k(L),p.value=L):await r()}async function r(){const y=v().toLowerCase(),L=y.split(/[-_]/)[0];if(Ct.includes(L)){let C=L;if(L==="zh")switch(y){case"zh-hant":case"zh-mo":case"zh-hk":case"zh-tw":C="zh-hant"}await k(C)}}function v(){const y=window.navigator;return y.language||y.userLanguage||y.browserLanguage}function I(y){a.push("/"+y+"/")}return(y,L)=>{const C=_e,x=Xt,$=we;return U(),ne($,{to:!1,"display-directive":"show",show:t(o).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:t(o).LANDSCAPE.value?"left":"bottom",duration:0,delay:50},{trigger:e(()=>[n(x,{ref:"langselect",size:"tiny",style:{width:"100%"},"consistent-menu-width":!1,options:t(g),"_v-model:value":"locale",value:t(p),"onUpdate:value":I},{arrow:e(()=>[n(C,null,{default:e(()=>[n(t(Ga))]),_:1})]),_:1},8,["options","value"])]),default:e(()=>[_("div",{innerHTML:y.$t("selectLanguage")},null,8,Zi)]),_:1},8,["show","placement"])}}}),nt=Symbol("global variables"),Hi=be({__name:"Avif2Jpeg",emits:["ready"],setup(l,{emit:i}){const{t:u,locale:s}=Ke(),o=i,a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),p=w(null);w(0);let c=w(void 0);const h=w(!0),g=w(!1),k=w(!1),m=w(!1),r=w(!1);Xa(nt,{showTooltipsBeforeMounted:c,LANDSCAPE:h,IS_SP:a,switchToolTipVisibility:x,SSR:!1}),De(()=>{$(),window.addEventListener("resize",$),x(),setTimeout(()=>k.value=!0,3e3)}),kn(()=>{window.removeEventListener("resize",$)});const v=200;let I=0,y=!0;function L(){m.value=!1,I=Date.now()}function C(){const b=y?0:Math.max(0,v-(Date.now()-I));y=!1,setTimeout(()=>m.value=!0,b),o("ready")}async function x(){}function $(){const b=document.body.clientWidth,S=document.body.clientHeight;h.value=b*.75>S||b>900}function Z(b){p.value=b}function H(b){r.value=b}return(b,S)=>{const q=Ee,V=_e,re=ut;return U(),ne(q,{vertical:"",align:"stretch",class:"avif2jpeg"},{default:e(()=>[n(hl,null,{"lang-switch":e(()=>[(U(),ne(Ka,null,{default:e(()=>[n(Wi,{onLangChange:L,onLangReady:C})]),_:1}))]),_:1}),n(qe,{name:"fade"},{default:e(()=>[t(m)?(U(),ne(q,{key:0,vertical:"",align:"stretch",justify:"space-between",style:{height:"100%"}},{default:e(()=>[n(q,{justify:"space-around",vertical:"",style:{height:"100%"}},{default:e(()=>[n(yl),n(q,{justify:"center"},{default:e(()=>[n(ai,{"_v-model:expanded":"UserSettings.expandExtButtons",target:t(B).acceptTypeValue,"onUpdate:target":S[0]||(S[0]=N=>t(B).acceptTypeValue=N),userExtensions:t(B).editedAcceptTypes,"onUpdate:userExtensions":S[1]||(S[1]=N=>t(B).editedAcceptTypes=N),"disable-notifying-folder-select":t(B).disableNotifyingFolderSelect,"onUpdate:disableNotifyingFolderSelect":S[2]||(S[2]=N=>t(B).disableNotifyingFolderSelect=N),forbidden:t(g),onInput:Z,onClick:S[3]||(S[3]=N=>H(!0)),onCancel:S[4]||(S[4]=N=>H(!1))},null,8,["target","userExtensions","disable-notifying-folder-select","forbidden"])]),_:1}),n(Rs,{input:t(p),format:t(B).imageFormat,quality:t(B).imageQuality,"retain-extension":t(B).retainExtension,maxZipSizeMB:t(B).maxZipSizeMB,threads:t(B).multithread?t(B).threadCount:0,"show-note":t(r),"onUpdate:showNote":S[5]||(S[5]=N=>Ze(r)?r.value=N:null),onStart:S[6]||(S[6]=N=>g.value=!0),onEnd:S[7]||(S[7]=N=>g.value=!1),"_:multi-thread-count":"val => availableThreadCount = val"},null,8,["input","format","quality","retain-extension","maxZipSizeMB","threads","show-note"]),n(q,{vertical:"",align:"center"},{default:e(()=>[n(re,{trigger:"manual",placement:"top","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:e(()=>[n(V,{size:"5vh",color:"#DADADA",style:{margin:"0px"}},{default:e(()=>[n(t(Ya))]),_:1})]),default:e(()=>[S[18]||(S[18]=_("span",null,"CONVERT TO👇",-1))]),_:1})]),_:1}),n(q,{vertical:"",align:"center"},{default:e(()=>[n(ii,{format:t(B).imageFormat,"onUpdate:format":S[8]||(S[8]=N=>t(B).imageFormat=N),quality:t(B).imageQuality,"onUpdate:quality":S[9]||(S[9]=N=>t(B).imageQuality=N)},null,8,["format","quality"]),n(fi,{"retain-ext":t(B).retainExtension,"onUpdate:retainExt":S[10]||(S[10]=N=>t(B).retainExtension=N),"use-folder-name-for-zip":t(B).useFolderNameForZip,"onUpdate:useFolderNameForZip":S[11]||(S[11]=N=>t(B).useFolderNameForZip=N),"max-zip-size":t(B).maxZipSizeMB,"onUpdate:maxZipSize":S[12]||(S[12]=N=>t(B).maxZipSizeMB=N),"_v-model:expanded":"UserSettings.expandAdvSettings",multithread:t(B).multithread,"onUpdate:multithread":S[13]||(S[13]=N=>t(B).multithread=N),"thread-count":t(B).threadCount,"onUpdate:threadCount":S[14]||(S[14]=N=>t(B).threadCount=N),"_:thread-max":"availableThreadCount","shrink-image":t(B).shrinkImage,"onUpdate:shrinkImage":S[15]||(S[15]=N=>t(B).shrinkImage=N),"max-width":t(B).maxWidth,"onUpdate:maxWidth":S[16]||(S[16]=N=>t(B).maxWidth=N),"max-height":t(B).maxHeight,"onUpdate:maxHeight":S[17]||(S[17]=N=>t(B).maxHeight=N)},null,8,["retain-ext","use-folder-name-for-zip","max-zip-size","multithread","thread-count","shrink-image","max-width","max-height"])]),_:1}),n(_i)]),_:1})]),_:1})):ve("",!0)]),_:1})]),_:1})}}}),tn=be({__name:"App",setup(l){const i={Statistic:{valueFontSize:"1em"},Popover:{borderRadius:"0.4em",boxShadow:"2px 2px 5px 0px #555555"},Tooltip:{},Image:{toolbarColor:"#00000099"}},u=w(!0);return De(()=>{u.value=!1}),(s,o)=>{const a=nl,p=tl,c=el,h=Ja,g=Qa,k=ol;return U(),ne(k,{"theme-overrides":i,style:{width:"100%",height:"100%"}},{default:e(()=>[n(g,null,{default:e(()=>[n(h,{placement:"top-right",max:20},{default:e(()=>[n(c,{placement:"top-left",closable:!0,max:50},{default:e(()=>[n(p,null,{default:e(()=>[n(a,null,{default:e(()=>[n(Hi,{class:wt({hide:t(u)})},null,8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),ra=[{path:"/",name:"Home",component:tn}];for(const l of Ct)ra.push({path:"/"+l+"/",strict:!0,name:l,component:tn});al(tn,{routes:ra,base:"/avif2jpeg/dist/"},({app:l,router:i,routes:u,isClient:s,initialState:o})=>{l.use(Lt)});
