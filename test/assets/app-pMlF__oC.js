var _o=Object.defineProperty;var yo=(o,i,p)=>i in o?_o(o,i,{enumerable:!0,configurable:!0,writable:!0,value:p}):o[i]=p;var Et=(o,i,p)=>yo(o,typeof i!="symbol"?i+"":i,p);import{r as st,d as ve,i as Ne,o as C,c as N,w as t,a as n,u as e,b as $,t as c,N as ge,_ as Ht,e as xe,L as wo,f as x,g as Y,h as y,F as we,j as je,B as Le,k as yt,l as se,m as bo,n as xo,p as $e,q as wt,s as Wt,v as Ae,x as Ao,y as ye,z as mt,A as gt,C as bt,D as xt,E as Ee,G as Te,H as ko,T as Be,I as Vt,J as qt,K as Fe,M as X,O as Gt,P as Kt,Q as zo,R as He,S as Ze,U as it,V as Qt,W as ee,X as Je,Y as Yt,Z as At,$ as To,a0 as Jt,a1 as Io,a2 as kt,a3 as Xt,a4 as pt,a5 as Ce,a6 as Ke,a7 as $o,a8 as So,a9 as Co,aa as Lo,ab as Eo,ac as en,ad as zt,ae as Tt,af as tn,ag as Fo,ah as nn,ai as Mo,aj as Po,ak as Uo,al as Do,am as Oo,an as Bo,ao as It,ap as jo,aq as Zo,ar as Ro,as as No,at as on,au as Ho,av as Wo,aw as an,ax as ln,ay as Vo,az as Ie,aA as qe,aB as Ge,aC as qo,aD as Go,aE as Ko,aF as Qo,aG as Yo,aH as Jo,aI as Xo,aJ as ea,aK as ta,aL as na,aM as oa,aN as aa,aO as la,aP as sa,aQ as ia,aR as ra,aS as ua,aT as da,aU as ca,aV as pa}from"./vendor-DC4nrSKQ.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))d(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&d(l)}).observe(document,{childList:!0,subtree:!0});function p(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(a){if(a.ep)return;a.ep=!0;const r=p(a);fetch(a.href,r)}})();const fa={imageFormat:"image/jpeg",imageQuality:90,expandExtButtons:!1,acceptTypeValue:void 0,editedAcceptTypes:"",expandAdvSettings:!1,retainExtension:!1,maxZipSizeMB:1e3,useFolderNameForZip:!1,multithread:!0,threadCount:void 0,shrinkImage:!1,maxWidth:4096,maxHeight:4096},B=st(sn({}));function ma(){sn(B)}function sn(o){return Object.assign(o,fa)}const rn="avif2jpeg",ft=JSON.parse(localStorage.getItem(rn)||"{}");for(const o in B)ft.hasOwnProperty(o)&&ft[o]!==void 0&&(B[o]=ft[o]);window.addEventListener("unload",()=>{const o={};for(const i in B)o[i]=B[i];localStorage.setItem(rn,JSON.stringify(o))});const ga=ve({__name:"github",setup(o){const i=Ne(Pe);return(p,d)=>{const a=ge,r=Ht,l=xe;return C(),N(l,{to:!1,"display-directive":"show",show:e(i).showTooltipsBeforeMounted.value,trigger:"hover",duration:0,delay:0},{trigger:t(()=>[n(r,{href:"https://github.com/gitcobra/avif2jpeg",style:{color:"black","font-size":"small","font-weight":"bolder"}},{default:t(()=>[n(a,null,{default:t(()=>[n(e(wo))]),_:1}),$("GitHub")]),_:1})]),default:t(()=>[$(" "+c(p.$t("githubOpenSource")),1)]),_:1},8,["show"])}}}),va=y("h3",null,"Used Framework and Libraries",-1),ha=["href"],_a=ve({__name:"licenses",setup(o){const i=x(!1),p={Vue:"https://github.com/vuejs/core/blob/main/LICENSE",Vite:"https://github.com/vitejs/vite/blob/main/LICENSE","Vite SSG":"https://github.com/antfu/vite-ssg/blob/main/LICENSE","Naive UI":"https://github.com/TuSimple/naive-ui/blob/main/LICENSE",Ionicons:"https://github.com/ionic-team/ionicons/blob/main/LICENSE"};return(d,a)=>{const r=Le;return C(),Y(we,null,[n(r,{text:"",onClick:a[0]||(a[0]=l=>i.value=!0),style:{color:"black","font-size":"small"}},{default:t(()=>[$("Licenses")]),_:1}),n(e(yt),{preset:"dialog",ref:"dialog",show:i.value,"onUpdate:show":a[1]||(a[1]=l=>i.value=l),"positive-text":"OK",title:"Licenses"},{default:t(()=>[va,y("ul",null,[(C(),Y(we,null,je(p,(l,g)=>y("li",null,[y("a",{href:l},c(g),9,ha)])),64))])]),_:1},8,["show"])],64)}}}),ya=1,wa=6,ba=1,xa="",ot={major:ya,minor:wa,build:ba,tag:xa},Aa={style:{"font-size":"x-small","user-select":"none"}},ka=ve({__name:"version",setup(o){const i=["0.0.118"],p=`${ot.major}.${ot.minor}.${ot.build}${ot.tag}`,d=i.map(g=>({label:`v${g}`,key:g,value:g}));function a(g){const{key:w,label:h}=g,k=l(w),v=se("a",{href:k},h),I=se("div",null,v);return se("div",null,I)}function r(g){location.href=l(g)}function l(g){return`/avif2jpeg/old/${g}/`}return(g,w)=>{const h=bo;return C(),N(h,{"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start",options:e(d),"render-label":a,"onUpdate:value":r},{header:t(()=>[y("span",Aa,c(g.$t("previousVersion")),1)]),default:t(()=>[y("span",{style:{cursor:"pointer"}},"v"+c(p))]),_:1},8,["options"])}}}),za=ve({__name:"header",setup(o){return(i,p)=>{const d=$e,a=wt;return C(),N(d,{vertical:"",justify:"start"},{default:t(()=>[n(d,{justify:"space-between",style:{"box-sizing":"border-box",padding:"4px",margin:"0px"}},{default:t(()=>[n(d,{align:"start"},{default:t(()=>[n(ga),n(ka),n(d,{align:"center"},{default:t(()=>[n(_a)]),_:1})]),_:1}),n(d,{align:"end",style:{"font-size":"x-small"}},{default:t(()=>[xo(i.$slots,"lang-switch")]),_:3})]),_:3}),n(a,{style:{margin:"0px"}})]),_:3})}}}),Ta={style:{padding:"0px",margin:"0px","text-align":"center"}},Ia={key:0},$a=ve({__name:"title",setup(o){const i=Wt(),p=Ae(()=>{const d=i.currentRoute.value.path||"";return!String(d.match(new RegExp("(?<=^\\/)[^/]+"))||"")});return(d,a)=>{const r=Ht,l=Ao("router-link"),g=$e;return C(),N(g,{align:"center",justify:"center",style:{margin:"0px"}},{default:t(()=>[y("h1",Ta,[e(p)?(C(),Y("span",Ia,c(d.$t("title")),1)):(C(),N(l,{key:1,to:"../",custom:""},{default:t(({navigate:w,href:h})=>[n(r,{href:h,onClick:w,style:{color:"black","word-break":"keep-all","overflow-wrap":"break-word"}},{default:t(()=>[$(c(d.$t("title")),1)]),_:2},1032,["href","onClick"])]),_:1}))])]),_:1})}}});function Sa(o){return new Worker("/avif2jpeg/test/assets/worker.canvas-Ep9Ri8iT.js",{name:o==null?void 0:o.name})}let un=0;class Ca extends Sa{constructor(){super(...arguments);Et(this,"id",un++)}release(){ut(this)}}const vt=[],Re=new Set,Qe=new Map,Ye=new Map,rt=new Set;function La(o,i){const p=new Ca;vt.push(p);{const d=Promise.resolve(p);Re.add(d),Qe.set(p,d)}return p}function Ea(o){const i=new Promise(p=>{Ye.set(o,p)});Re.add(i),Qe.set(o,i),rt.add(o)}async function Fa(){let o,i;do o=await Promise.any(Re);while(rt.has(o));return i=Qe.get(o),Qe.delete(o),Re.delete(i),Ea(o),o}function ut(o){const i=Ye.get(o);i&&(Ye.delete(o),rt.delete(o),i(o))}function dn(){for(const o of Ye.keys())ut(o)}async function Ft(){return await Promise.all(Re)}function Mt(){dn();for(const o of vt)o.terminate();vt.length=0,Re.clear(),Qe.clear(),Ye.clear(),rt.clear(),un=0}function Ma(o){return new Worker("/avif2jpeg/test/assets/worker.zip-BO6d13OK.js",{name:o==null?void 0:o.name})}const Pt=1,Pa=10,Ua=1024*1024*4,Da=100;async function Oa(o,i,p,d,a,r,l,g,w,h,k,v){const I=new Map,b=new Map,m=Math.min(p.threads-1,l.length);Mt();const f=new Ma,T=Ba(f,o,i,g);f.postMessage({action:"set-config",zipSize:p.maxZipSizeMB*1024*1024,keepExt:p.retainExtension,outputExt:k,imageType:v});const O=ja(o,i,d,a,r,l,g,b,I);for(let P=0;P<m;P++){const R=La();R.onmessage=O;const{port1:ne,port2:he}=new MessageChannel;f.postMessage({action:"set-port"},[ne]),R.postMessage({},[he])}const S=ye(i,P=>{P&&(S(),dn())});o.demandImage=P=>{f.postMessage({action:"request-image",index:P})};const s=l.length===1;let _=0,z=0,A="",M=0;for(;M<l.length;){const P=await Fa();if(i.value){ut(P);break}const R=[];let ne=!1;const he=l.length-M,ce=Math.min(M+Math.max(Math.min(Pa,he/p.threads|0),1),l.length);let me=0,pe=!1;const oe=Date.now();for(oe-z>Da&&(z=oe,pe=!0);M<ce&&!(me>Ua);M++){const ae=l[M],V=ae._id;me+=ae.size,ne=M===l.length-1,I.has(V)||I.set(V,ae),R.push({index:M,file:ae,fileId:V,outputPath:A,type:w,quality:h/100,demandThumbnail:pe||ne,demandImage:s,maxSize:B.shrinkImage?{width:B.maxWidth,height:B.maxHeight}:null,webkitRelativePath:ae.webkitRelativePath});const ie=ae.webkitRelativePath||ae.name;b.has(ae)?console.warn(`retry "${ie}".`):(_++,o.index=_),pe=!1}if(P.postMessage(R),ne&&(await Ft(),i.value))break}if(console.log("end file loop"),await Ft(),console.log("resolved all workers"),!i.value){let P;await new Promise(R=>{P=ye([()=>o.done,i],()=>{(o.done>=_||i.value)&&R(void 0)},{immediate:!0})}),P(),console.log("processed all files")}s||(f.postMessage({action:"squeeze"}),await T),S();const L={value:!1},de=()=>{L.value=!0,Mt(),f.terminate()};let U=!1;return{callbackToClearConverter:de,callbackToGenerateFailedZips:async P=>{U||(U=!0,await Za(P,f,L,o))}}}function Ba(o,i,p,d){return new Promise(r=>{o.onmessage=l=>{const g=l.data,{action:w}=g;if(w==="add-zip-completed"){const{fileId:I}=g;i.done++,i.success++,d.add(I);return}if(w==="respond-image"){const{url:I,index:b,path:m,size:f}=g;i.convertedImageUrl=I,i.convertedImageSize=f,i.convertedImageIndex=b,i.convertedImageName=m;return}const{size:h,count:k}=g,v="url"in l.data?l.data.url:"";switch(w){case"push-zip":i.zips.push({url:v,size:h,count:k}),i.zippedTotalCount+=k,i.zippedTotalSize+=h;break;case"squeeze-zip":k>0&&(i.zips.push({url:v,size:h,count:k}),i.zippedTotalCount+=k,i.zippedTotalSize+=h),r(void 0);break;case"push-filelist":i.failedFileZippedCount++;break;case"squeeze-filelist-zip":i.failedZipDone=!0;case"push-filelist-zip":console.log("push-filelist-zip",k),i.failedZips.push({url:v,size:h,count:k});break;case"zip-error":case"zip-squeeze-error":i.zippingErrorCount+=k,w==="zip-squeeze-error"&&r(void 0);break}}})}function ja(o,i,p,d,a,r,l,g,w,h){let k=0;const v=x(new Map),I=x(new Map);return m=>{const f=m.target,{data:T}=m,{action:O}=T;if(i.value)switch(O){case"file-canceled":console.log("file-canceled"),o.done++;return}switch(O){case"list-start":console.log(`list started on worker ${f.id}`);break;case"file-start":{const{index:S,path:E,fileId:s}=T,_={key:k++,core:f.id,index:S,path:E,command:"‚û°Ô∏èstarted"};v.value.set(f.id,_),o.logs.push(_);break}case"file-load":{const{thumbnail:S,width:E,height:s}=T;v.value.get(f.id).command="üñºÔ∏èloaded",S&&(o.thumbnail=S);break}case"file-converted":{const{index:S,path:E,fileId:s,image:_}=T,z=v.value.get(f.id);if(z.command="üîÉconverted",I.value.set(s,z),o.converted++,!_)break;const{width:A,height:M}=T;p.convertedImageBlob=_,p.convertedImageWidth=A,p.convertedImageHeight=M,p.convertedImageName=E,o.done++,o.success++}case"file-completed":{const{inputsize:S,outputsize:E,fileId:s}=T;o.inputTotalSize+=S,o.outputTotalSize+=E;const _=I.value.get(s);_&&(_.command="‚úÖcompleted",_.completed=!0);break}case"file-error":{const{index:S,path:E,fileId:s}=T,_=w.get(s);if(!_)throw new Error(`the file doesn't exist in the Map. "${s}":"${E}"`);const z=g.get(_)||0,A=v.value.get(f.id);z<Pt?(g.set(_,z+1),r.push(_),console.error(`worker ${f.id} threw an error when loading "${E}". retrying the file.`),A.command="‚ö†Ô∏èretrying",A.error=!0,d.warning(`retrying "${E}"`,{duration:3e3})):(console.error(`failed to load "${E}" after ${Pt} retries. the image may be corrupted or cannot be read by some reason.`),o.done++,o.failure++,A.command="‚ùófailed",A.error=!0,a.error({content:`failed to load "${E}"`,duration:5e3}));break}case"file-canceled":{const{fileId:S,path:E}=T,s=I.value.get(S);o.done++,o.failure++,s.command="‚ùózip-aborted",s.error=!0;break}case"list-end":{ut(f);break}}}}async function Za(o,i,p,d){let a=0;for(const r of o){const l=(r.webkitRelativePath||r.name).replace(/^\//,"");if(p.value)return;a-d.failedFileZippedCount>20&&await new Promise(g=>setTimeout(g,10)),i.postMessage({action:"add-filelist",file:r,path:l}),a++}i.postMessage({action:"squeeze-filelist"})}async function Ra(o,i,p,d,a,r){let l="";const g=document.createElement("canvas"),w=g.getContext("2d");let h=new mt;const k=d.format,v=d.quality/100,I=[...k.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),b=o.length,m=d.maxZipSizeMB*1024*1024;let f=0,T=null,O="",S=0,E=0,s=0,_=0,z=0,A=0,M=!1;for(const P of o){if(a.value)break;const R=P.name;let ne="";const he=P.size,ce=(P.webkitRelativePath||P.relativePath||R).replace(/^\//,""),me=document.createElement("img");f++;const pe={key:_++,core:-1,index:f,path:ce,command:"‚û°Ô∏èstart"};r.index=f,r.logs.push(pe),r.logs.length-1;let oe;l&&(URL.revokeObjectURL(l),l=""),l=URL.createObjectURL(P),me.src=l;const ae=await ht(me).then(()=>!0).catch(()=>!1);if(!me.complete||!ae||a.value){r.done++,r.failure++,pe.command="‚ùófailed";continue}const V=me.width,ie=me.height;if(g.width=V,g.height=ie,S=V,E=ie,w.drawImage(me,0,0,V,ie,0,0,V,ie),pe.command="üñºÔ∏èimgload",r.thumbnail=me,oe=await new Promise(H=>{const Q=J=>{T=J,H(J==null?void 0:J.arrayBuffer())};g.toBlob(Q,k,v)}),a.value)break;if(!oe){console.log("failed to toBlob",R),r.failure++;continue}s=oe.byteLength,r.converted++;let j="";if(A+s>=m){try{j=h.url()}catch(H){M=!0,console.warn(H.message,A),alert("memory problem occurred");break}r.zips.push({url:j,size:A,count:z}),r.zippedTotalCount+=z,r.zippedTotalSize+=A,A=0,z=0,h.clear(),h=new mt}A+=s;const F=ce||R;for(let H=1;H<255&&(ne=F.replace(d.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+(H>1?`(${H})`:"")+"."+I,!!h.has(ne));H++);r.done++;try{z++,h.add(ne,oe),r.inputTotalSize+=he,r.outputTotalSize+=s}catch(H){console.error(H.message);continue}O=ne,r.success++,pe.command="‚úÖcompleted",pe.completed=!0,i.add(P._id)}if(r.success>0)if(b===1)T&&(p.convertedImageBlob=T,p.convertedImageName=O,p.convertedImageWidth=S,p.convertedImageHeight=E);else try{if(M)throw new Error("terminated zipping process for memory problems");const P=h.url();r.zips.push({url:P,count:z,size:A}),r.zippedTotalCount+=z,r.zippedTotalSize+=A}catch(P){console.error(P.message)}const L={value:!1},de=()=>{L.value=!0};let U=!1;return{callbackToClearConverter:de,callbackToGenerateFailedZips:async P=>{U||(U=!0,Na(P,m,r,L))}}}async function Na(o,i,p,d){let a=0,r=0,l=new mt;for(let g=0;g<o.length;g++){const w=o[g],h=(w.webkitRelativePath||w.name).replace(/^\//,"");let k;try{k=await w.arrayBuffer()}catch{console.warn(h),p.failedToCreateFailedZip=!0;return}if(d.value)return;if(l.add(h,k),r+=w.size,a++,p.failedFileZippedCount++,r>=i||g===o.length-1){const v=l.url();p.failedZips.push({url:v,size:r,count:a}),l.clear(),r=0,a=0}}p.failedZipDone=!0}function ht(o){if(typeof o.onload>"u")throw new Error(`it doesn't have "onload" property.`);return new Promise((i,p)=>{o.onload=i,o.onerror=p})}const Me=(o,i)=>{const p=o.__vccOpts||o;for(const[d,a]of i)p[d]=a;return p},Ha=o=>(bt("data-v-5dab19ad"),o=o(),xt(),o),Wa={class:"container"},Va=Ha(()=>y("span",{class:"text"},"ZIP",-1)),qa={__name:"zipicon",setup(o){return(i,p)=>(C(),Y("span",Wa,[n(e(ge),null,{default:t(()=>[n(e(gt))]),_:1}),Va]))}},Ga=Me(qa,[["__scopeId","data-v-5dab19ad"]]);function Oe(o,i=2){const p=Math.sign(o);o=Math.abs(o);const d=["Bytes","KB","MB","GB"],a=o?Math.floor(Math.log(o)/Math.log(1024)):0;return`${(o/Math.pow(1024,a)*p).toFixed(i)}${d[a]}`}function cn(o,i=100,p=!1){i=typeof i=="number"?{width:i,height:i}:i;const{width:d,height:a}=i;let{width:r,height:l}=o;const g=r/l,w=d/a;return g>=w?(r=p?Math.min(d,r):d,l=r/g|0):(l=p?Math.min(a,l):a,r=l*g|0),{width:r,height:l}}const Ka=["href","download","title"],Qa=ve({__name:"thumbnail",props:{src:{},width:{},height:{},maxWidth:{default:100},maxHeight:{default:100},expand:{type:Boolean,default:!1},loading:{type:Boolean},fileName:{},allowNext:{type:Boolean},allowPrev:{type:Boolean}},emits:["load","error","next","prev"],setup(o,{expose:i,emit:p}){const{t:d}=Ee(),a=o,r=p;i({download:O,openPreview:E});const l=x(),g=x(!0),w=x(""),h=x(100),k=x(100),v=x(!1),I=st({width:"100px",height:"100px",minWidth:"50px",minHeight:"50px"});ye(a,(s,_)=>{I.width=(a.width||100)+"px",I.height=(a.height||100)+"px"}),ye(()=>a.src,()=>{f(a.src)}),Te(()=>{document.body.addEventListener("keydown",S)}),ko(()=>{document.body.removeEventListener("keydown",S)});async function b(s){const _=s.target,z=_.naturalWidth,A=_.naturalHeight,{width:M,height:L}=cn({width:z,height:A},{width:a.maxWidth||100,height:a.maxHeight||100},a.expand);h.value=M,k.value=L,r("load",{src:_.src,width:z,height:A}),g.value=!1,await new Promise(de=>setTimeout(de,100)),!g.value&&(v.value=!0)}function m(s){const _=s.target;r("error",_.src)}async function f(s){var _,z;g.value=!0,v.value=!1,await new Promise(A=>setTimeout(A,150)),w.value=s;try{(z=(_=l.value)==null?void 0:_.previewInstRef)!=null&&z.displayed&&l.value.previewInstRef.setPreviewSrc(s)}catch{}}function T({nodes:s}){s.next=se(Le,{onClick(){r("next")},disabled:!a.allowNext,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>se(Gt)}),s.prev=se(Le,{onClick(){r("prev")},disabled:!a.allowPrev,circle:!0,textColor:"white",size:"tiny",style:{marginLeft:"4px"}},{icon:()=>se(Kt)});try{const _=s.download.children;_.default=()=>d("save");const z=_.trigger();z.props.onClick=O,_.trigger=()=>z}catch{}return Object.values(s)}function O(){const s=document.createElement("a");s.href=w.value,s.download=a.fileName,s.click()}function S(s){var _,z,A,M;if(s.code==="Escape")try{(z=(_=l.value)==null?void 0:_.previewInstRef)!=null&&z.displayed&&(s.stopPropagation(),(M=(A=l.value)==null?void 0:A.previewInstRef)==null||M.toggleShow(!1))}catch{}}function E(){var s,_,z,A;try{(_=(s=l.value)==null?void 0:s.previewInstRef)==null||_.setPreviewSrc(a.src),(A=(z=l.value)==null?void 0:z.previewInstRef)==null||A.toggleShow(!0)}catch{}}return(s,_)=>{const z=zo,A=He,M=Ze;return C(),N(M,{show:e(g)||a.loading},{default:t(()=>[n(A,{justify:"center",align:"center",style:X(e(I))},{default:t(()=>[y("a",{href:e(w),onClick:_[0]||(_[0]=Fe(()=>{},["left","prevent"])),target:"_blank",download:a.fileName,title:a.fileName,style:{"line-height":"0px"}},[n(Be,{mode:"in-out"},{default:t(()=>[Vt(n(z,{ref_key:"nImageRef",ref:l,"show-toolbar-tooltip":"","render-toolbar":T,onLoad:b,onError:m,src:e(w),width:e(h),height:e(k),style:{border:"1px solid silver"}},null,8,["src","width","height"]),[[qt,e(v)]])]),_:1})],8,Ka)]),_:1},8,["style"])]),_:1},8,["show"])}}}),Ya=Me(Qa,[["__scopeId","data-v-dfc4aa5a"]]),Ja=["href","download"],Xa=["href"],el=["href"],tl={style:{"font-size":"0.8em"}},nl=ve({__name:"image-viewer",props:{url:{},dataUrl:{},name:{},size:{},length:{},index:{},isSingle:{type:Boolean}},emits:["demand-image"],setup(o,{expose:i,emit:p}){const d=o,a=p;i({download:S});const r=x(),l=it(),{t:g}=Ee();Qt();const w=x(!0),h=x(1),k=x(1),v=x(1);x(0);const I=x(""),b=x(!1);let m=x(!1),f=-1;ye(h,()=>{h.value<1||h.value>d.length||(clearTimeout(f),f=setTimeout(()=>{d.index!==h.value-1&&(a("demand-image",h.value-1),b.value=!0,m.value=!1)},100))}),ye(()=>d.index,()=>{if(d.index===0&&w.value){w.value=!1,h.value=1,I.value=d.url;return}d.index===h.value-1&&(b.value=!1,I.value=d.url)});let T="";ye(()=>d.url,()=>{if(d.url!==T){const _=T;setTimeout(()=>URL.revokeObjectURL(_),1e3),T=d.url}d.isSingle&&(w.value=!1,I.value=d.url)}),Te(()=>{d.isSingle||a("demand-image",0)});function O({width:_,height:z}){k.value=_,v.value=z,m.value=!0}function S(){r.value.download()}async function E(_){try{const z=await fetch(_).then(A=>A.blob()).then(A=>new Promise(M=>{const L=new FileReader;L.onload=M,L.readAsDataURL(A)})).then(A=>A.target.result);navigator.clipboard.writeText(z),l.info({title:g("copiedDataURLDialogTitle"),content:()=>se("div",[se("div",g("copiedDataURLMessage"))]),positiveText:"OK"})}catch(z){console.error(z),l.error({title:"failed to copy Data URL",content:"could not copy Data URL",positiveText:"OK"})}}function s(_){_>0&&h.value<d.length&&h.value++,_<0&&h.value>1&&h.value--}return(_,z)=>{const A=Ze,M=He,L=Le,de=Je,U=Yt,q=ge,P=At;return C(),N(A,{size:"large",show:w.value},{default:t(()=>[n(M,{justify:"center",align:"center",vertical:"",style:X({visibility:w.value?"hidden":"visible"})},{default:t(()=>[n(M,{align:"center",wrap:!1},{default:t(()=>[n(M,{align:"center",justify:"center",vertical:""},{default:t(()=>[n(A,{size:"small",show:!1,_show:b.value||!e(m)},{default:t(()=>[n(Ya,{ref_key:"thumbref",ref:r,src:I.value,width:180,"max-width":160,"max-height":100,loading:b.value,"file-name":d.name,"allow-next":h.value<d.length,"allow-prev":h.value>1,onLoad:O,onNext:z[0]||(z[0]=R=>s(1)),onPrev:z[1]||(z[1]=R=>s(-1))},null,8,["src","loading","file-name","allow-next","allow-prev"])]),_:1},8,["_show"])]),_:1}),n(M,{vertical:""},{default:t(()=>[n(M,{justify:"center",wrap:!0},{default:t(()=>[d.url&&!_.isSingle?(C(),N(de,{key:0,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:d.url,ref:"saveImg",target:"_blank",download:d.name},[n(L,{round:"",size:"tiny"},{default:t(()=>[$(c(_.$t("save")),1)]),_:1})],8,Ja)]),default:t(()=>[$(" "+c(_.$t("save")),1)]),_:1})):ee("",!0),d.url?(C(),N(de,{key:1,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:d.url,target:"_blank",onClick:z[2]||(z[2]=Fe(R=>{r.value.openPreview()},["prevent"]))},[n(L,{round:"",size:"tiny"},{default:t(()=>[$(c(_.$t("open")),1)]),_:1})],8,Xa)]),default:t(()=>[$(" "+c(_.$t("convertedImageUrlTooltip")),1)]),_:1})):ee("",!0),d.url?(C(),N(de,{key:2,"display-directive":"show",trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:d.url,target:"_self"},[n(L,{onClick:z[3]||(z[3]=Fe(R=>E(d.url),["left","prevent","stop"])),round:"",size:"tiny"},{default:t(()=>[$("DataURL")]),_:1})],8,el)]),default:t(()=>[$(" "+c(_.$t("convertedImageDataUrlTooltip")),1)]),_:1})):ee("",!0)]),_:1}),n(M,{justify:"center"},{default:t(()=>[$(c(k.value)+" √ó "+c(v.value),1)]),_:1}),n(M,{justify:"center"},{default:t(()=>[$(c(e(Oe)(d.size,0)),1)]),_:1})]),_:1})]),_:1}),n(M,{ref:"fileNameContainer",justify:"center",style:{"max-width":"320px"},title:d.name},{default:t(()=>[n(U,{"x-scrollable":!0,trigger:"hover",style:{"font-size":"smaller",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},{default:t(()=>[$(c(d.name),1)]),_:1})]),_:1},8,["title"]),_.isSingle?ee("",!0):(C(),N(M,{key:0,style:{"font-family":"v-mono"},align:"center"},{default:t(()=>[y("span",tl,c(e(g)("status.index"))+":",1),$(" "+c(h.value)+" / "+c(d.length),1)]),_:1})),_.isSingle?ee("",!0):(C(),N(M,{key:1,align:"center",justify:"center"},{default:t(()=>[n(L,{onClick:z[4]||(z[4]=R=>s(-1)),disabled:h.value<=1,circle:!0,size:"small"},{icon:t(()=>[n(q,null,{default:t(()=>[n(e(Kt))]),_:1})]),_:1},8,["disabled"]),n(P,{value:h.value,"onUpdate:value":z[5]||(z[5]=R=>h.value=R),tooltip:!1,step:1,min:1,max:d.length,style:{width:"180px"}},null,8,["value","max"]),n(L,{onClick:z[6]||(z[6]=R=>s(1)),disabled:h.value>=_.length,circle:!0,size:"small"},{icon:t(()=>[n(q,null,{default:t(()=>[n(e(Gt))]),_:1})]),_:1},8,["disabled"])]),_:1}))]),_:1},8,["style"])]),_:1},8,["show"])}}}),ol={class:"log-table"},al={class:"log-tr"},ll={class:"log-th"},sl={class:"log-th"},il={style:{"min-width":"7em"},class:"log-th"},rl={style:{"padding-left":"2em"},class:"log-th"},ul={class:"log-td"},dl={class:"log-td"},cl={class:"log-td"},pl={class:"log-td"},fl={style:{margin:"1px"}},ml=["href","download","onClick"],gl={key:0,style:{position:"relative"}},vl=["href","download"],hl=["href","download"],_l={key:0,style:{margin:"1px"}},yl=["href","download","onClick"],Ut=99999,wl=100,bl=ve({__name:"status",props:{processing:{type:Boolean},status:{},interval:{}},emits:["all-zips-clicked","demand-zip-errors","demand-image"],setup(o,{emit:i}){const p=it(),{t:d}=Ee(),a=Qt(),r={W:160,H:80},l=o,g=i,w=x(!1),h=x([]),k=x(!1),v=x([]),I=x([]),b=x([0,0]),m=x([0,0]),f=x([0,0]),T=x([0,0]),O=x([0,0]),S=x([0,0]),E=x(0),s=x([0,0]),_=x(a.value.infoColor),z=x("#000000"),A=x("#000000"),M=x(0),L=x(0),de=x(""),U=x("00:00:00");x(""),x("");const q=x(void 0),P=x(!1),R=x(!0),ne=x(!1),he=Ae(()=>P.value?pe.value:me.value),ce=x("16em"),me=x(5),pe=x(1e3),oe=x(!0),ae=x(!1),V=st({name:"",width:0,height:0,size:0,url:"",dataUrl:"",index:-1}),ie=x(null),j=x(null),F=x(),H=x();Te(()=>{ye(l.status,()=>ke(),{deep:!1}),ye([j,oe],()=>{if(!j.value||!oe.value)return;const{width:fe,height:_e}=cn(j.value,{width:r.W,height:r.H});ie.value.width=fe,ie.value.height=_e,ie.value.style.width=fe+"px",ie.value.style.height=_e+"px",j.value instanceof HTMLImageElement?ie.value.getContext("2d").drawImage(j.value,0,0,fe,_e):(ie.value.getContext("bitmaprenderer").transferFromImageBitmap(j.value),j.value=null,l.status.thumbnail=null)});let u=0;const Z=()=>{if(u)return;const fe=Date.now();U.value="00:00:00",u=window.setInterval(()=>{const _e=(Date.now()-fe)/1e3;U.value=`${String(_e/3600|0).padStart(2,"0")}:${String(_e/60%60|0).padStart(2,"0")}:${String(_e%60|0).padStart(2,"0")}`},300)};Z(),ye(()=>l.processing,(fe,_e)=>{fe?(Z(),h.value=[],w.value=!1,k.value=!1,v.value=[],I.value=[]):(clearInterval(u),ke(),u=0),oe.value=!1,ae.value=!0,l.processing||We()});const G=$o();let W;const K=()=>{clearTimeout(W),W=setTimeout(()=>{if(!oe.value||te)return;const fe=F.value.$parent.$el.offsetHeight,_e=window.innerHeight-G.parent.parent.vnode.el.offsetHeight-8;ce.value=Math.max(fe+_e,50)+"px",console.log(fe,_e,ce.value)},100)};K(),window.addEventListener("resize",K);const le=new ResizeObserver(K);le.observe(G.parent.parent.vnode.el);let te=!1;To(()=>{te=!0,le.disconnect(),clearInterval(u),clearTimeout(W),clearTimeout(re),clearTimeout(et),window.removeEventListener("resize",K)})}),ye([()=>l.status.zips.length,()=>l.status.failedZips.length],()=>{const u=l.status;{v.value.length>u.zips.length&&(v.value.length=0);let Z=0;const G=u.zips.length===1&&u.zippedTotalCount===u.length;for(let W=v.value.length;W<u.zips.length;W++){const K=u.zips[W],le=u.baseZipName+(G?"":"-"+String(W+1).padStart(2,"0"))+".zip";Z+=K.size,v.value[W]={url:K.url,size:K.size,number:G?0:W+1,sizeByUnit:Oe(K.size),name:le,count:K.count,clicked:!1}}}{I.value.length>u.failedZips.length&&(I.value.length=0);let Z=0;const G=u.failedZipDone&&u.failedZips.length===1;for(let W=I.value.length;W<u.failedZips.length;W++){const K=u.failedZips[W],le=u.baseZipName+"-error"+(G?"":"-"+String(W+1).padStart(2,"0"))+".zip";Z+=K.size,I.value[W]={url:K.url,size:K.size,number:G?0:W+1,sizeByUnit:Oe(K.size),name:le,count:K.count,clicked:!1}}}});const Q=l.interval||100;let J=!1,re=0;function ke(){if(J)return;if(re){J=!0;return}re=window.setTimeout(()=>{re=0,J&&(J=!1,ke())},Q);const u=l.status;w.value=u.length>=2,m.value[1]=m.value[0],m.value[0]=u.index,f.value[1]=f.value[0],f.value[0]=u.success,T.value[1]=T.value[0],T.value[0]=u.failure,O.value[1]=O.value[0],O.value[0]=u.done,S.value[1]=S.value[0],S.value[0]=u.converted,E.value=u.length,s.value[1]=s.value[0],s.value[0]=u.zippedTotalCount,M.value=u.inputTotalSize,L.value=u.outputTotalSize;const Z=L.value-M.value;de.value=(Z>=0?"+ ":"")+Oe(Z);const G=L.value/M.value,W=(256|Math.min(255,Math.max(0,G-1.5)*255|0)).toString(16).substring(1);z.value="#"+W+"0000";const K=1024*1024,le=(256|Math.min(255,Math.max(0,Z/1024/K)*255|0)).toString(16).substring(1);if(A.value="#"+le+"0000",b.value[1]=b.value[0],b.value[0]=f.value[0]/E.value*100,oe.value||!l.processing){const te=u.logs.slice(-Ut);h.value.push(...te);const fe=h.value.length-Ut;fe>0&&h.value.splice(0,fe),R.value&&te.length&&nt(),h.value.length>pe.value&&(pe.value*=2)}u.logs.length=0,j.value=u.thumbnail,l.processing&&(_.value=T.value[0]?a.value.warningColor:a.value.infoColor),u.convertedImageUrl!==V.url&&(V.url=u.convertedImageUrl,V.name=u.convertedImageName,V.dataUrl=u.convertedImageDataUrl,V.size=u.convertedImageSize||u.outputTotalSize,V.width=u.convertedImageWidth,V.height=u.convertedImageHeight,V.index=u.convertedImageIndex)}function We(){const u=l.status;_.value=l.status.success===l.status.length?a.value.successColor:a.value.errorColor,u.unconvertedFileCount>0,T.value[0]>0||(f.value[0],E.value)}const be=Ae(()=>[{key:"open",label:d("status.openFailedList"),icon:()=>se(ge,()=>se(Jt)),onSelect(){Ue()}},{key:"download",label:d("status.saveFailedList"),icon:()=>se(ge,()=>se(Io)),onSelect(){Ue(!0)}},{key:"zip",label:`${d("status.zipFailedList")}`+(l.status.failedZipDone?`(‚úî${d("status.done")})`:""),icon:()=>se(Ze,{show:k.value&&!l.status.failedZipDone,size:"small"},()=>se(ge,()=>se(gt))),disabled:k.value,onSelect(u){return k.value=!0,g("demand-zip-errors"),!1}}]);function ze(u,Z=!1){const{url:G,name:W}=u;if(Z){const K=document.createElement("a");K.href=G,K.download=W,K.click()}u.clicked||(u.clicked=!0,l.processing||v.value.every(K=>K.clicked)&&g("all-zips-clicked"))}async function Xe(){if(w.value){if(v.value.length>=2&&!await new Promise((G,W)=>p.warning({title:d("Download"),content:d("status.confirmDownloadMessage",[v.value.length]),positiveText:"OK",negativeText:d("cancel"),onPositiveClick:()=>G(!0),onNegativeClick:()=>W()})))return;const u=v.value;for(const Z of u)ze(Z,!0)}else H.value.download()}function Ue(u=!1){const Z=new Blob([l.status.unconvertedListText],{type:"text/plain;charset=utf8"}),G=URL.createObjectURL(Z),W=document.createElement("a");W.href=G,W.target="_blank",u&&(W.download=l.status.baseZipName+"-error.txt"),W.click()}let et=0,tt=!1;function nt(u=!1){if(!tt){if(et){tt=!0;return}kt(()=>{!u&&(!P.value||!R.value)||(F.value.scrollTo({behavior:u?"instant":"smooth",top:h.value.length*50}),et=window.setTimeout(()=>{et=0,tt&&(tt=!1,nt())},wl))})}}return(u,Z)=>{const G=$e,W=So,K=Co,le=Je,te=He,fe=Lo,_e=Eo,dt=xe,po=en,fo=zt,mo=Tt,go=wt,Ve=Le,vo=Ga,Ct=tn,ho=Fo;return C(),N(te,{vertical:"",justify:"center"},{default:t(()=>[n(G,{justify:"center",align:"center",wrap:!1,style:{"white-space":"nowrap"}},{default:t(()=>[n(G,{vertical:"",justify:"center",class:"left-column"},{default:t(()=>[n(W,{"tabular-nums":"",label:u.$t("status.elapsedTime")},{default:t(()=>[n(G,null,{default:t(()=>[$(c(e(U)),1)]),_:1})]),_:1},8,["label"]),n(W,{"tabular-nums":"",label:u.$t("status.multiThreading")},{default:t(()=>[n(G,{style:X({color:l.status.threads?"":"red"})},{default:t(()=>[$(c(l.status.threads?u.$rt("{n} @:threads",l.status.threads):u.$t("disabled")),1)]),_:1},8,["style"])]),_:1},8,["label"]),n(W,{"tabular-nums":"",label:u.$t("status.outputSettings")},{default:t(()=>[n(G,{vertical:"",justify:"end",style:{"font-size":"smaller","line-height":"1em"}},{default:t(()=>[y("div",null,"Type: "+c(l.status.type),1),y("div",null,"Zip: "+c(l.status.zipSize)+"MB",1)]),_:1})]),_:1},8,["label"])]),_:1}),n(fe,{type:"multiple-circle","stroke-width":1,percentage:[e(f)[0]/e(E)*100|0,e(m)[0]/e(E)*100|0],color:[e(a).successColor,e(_)],"rail-style":[{stroke:u.processing?e(a).successColor:e(_),opacity:.3},{stroke:e(_),opacity:.3}],class:"center-column"},{default:t(()=>[n(G,{vertical:"",align:"center",style:{"font-family":"v-mono","font-size":"xx-large","white-space":"nowrap"},wrap:!1,"wrap-item":!1},{default:t(()=>[y("span",{style:X({color:e(T)[0]?e(_):u.processing?e(a).successColor:e(_)})},[n(K,{duration:e(Q)*3|0,from:e(b)[1]|0,to:e(b)[0]|0,active:!0},null,8,["duration","from","to"]),$("% ")],4),n(te,{wrap:!1,style:{border:"0px solid"}},{default:t(()=>[n(te,{vertical:"",size:"small",justify:"end"},{default:t(()=>[n(te,{justify:"end",wrap:!1},{default:t(()=>[e(T)[0]>0?(C(),N(le,{key:0,trigger:"hover",duration:0,delay:0,style:X({color:e(a).errorColor}),placement:"left"},{trigger:t(()=>[y("span",{style:X({fontSize:"xx-small",color:e(a).errorColor,lineHeight:"0"})}," ("+c(e(T)[0].toLocaleString("en-us"))+") ",5)]),default:t(()=>[$(" "+c(u.$t("status.progressErrors"))+" ("+c(e(T)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])):ee("",!0),n(le,{trigger:"hover",duration:0,delay:0,style:X({color:e(a).infoColor}),placement:"left"},{trigger:t(()=>[y("span",{style:X({fontSize:"xx-small",color:e(a).infoColor,lineHeight:"0"})},c(e(m)[0].toLocaleString("en-us")),5)]),default:t(()=>[$(" "+c(u.$t("status.progressStarted"))+" ("+c(e(m)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])]),_:1}),n(te,{justify:"end"},{default:t(()=>[n(le,{trigger:"hover",duration:0,delay:0,style:X({color:e(a).successColor}),placement:"bottom"},{trigger:t(()=>[y("span",{style:X({fontSize:"medium",color:e(a).successColor})},[n(K,{duration:e(Q)*3|0,from:e(f)[1],to:e(f)[0],active:!0,"show-separator":!0},null,8,["duration","from","to"])],4)]),default:t(()=>[$(" "+c(u.$t("status.progressSuccess"))+" ("+c(e(f)[0].toLocaleString("en-us"))+") ",1)]),_:1},8,["style"])]),_:1})]),_:1}),n(te,{align:"end",style:{"font-size":"medium",border:"0px solid"}},{default:t(()=>[n(le,{trigger:"hover",duration:0,delay:0,placement:"bottom"},{trigger:t(()=>[$(" / "+c(e(E).toLocaleString("en-us")),1)]),default:t(()=>[$(" "+c(u.$t("status.progressTotal"))+" ("+c(e(E).toLocaleString("en-us"))+") ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["percentage","color","rail-style"]),n(G,{vertical:"",style:{height:"100%"},justify:"center"},{default:t(()=>[n(W,{"tabular-nums":"",label:u.$t("status.inputSize")},{default:t(()=>[n(G,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[$(c((e(M)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(W,{"tabular-nums":"",label:u.$t("status.outputSize")},{default:t(()=>[n(G,{justify:"end",wrap:!1,style:{"font-family":"v-mono"}},{default:t(()=>[$(c((e(L)/1024|0).toLocaleString("en-us"))+" KB",1)]),_:1})]),_:1},8,["label"]),n(W,{"tabular-nums":"",label:u.$t("status.outInRate")},{default:t(()=>[n(G,{vertical:"",align:"end",justify:"start",style:{"font-size":"xx-small","font-family":"v-mono","line-height":"50%"}},{default:t(()=>[y("span",{style:X({color:e(z),fontSize:"larger"})},"√ó "+c((e(L)/e(M)||1).toFixed(2)),5),y("span",{style:X({color:e(A)})},"("+c(e(de))+")",5)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1}),n(mo,{"display-directive":"show","trigger-areas":["arrow","main"],"default-expanded-names":"log-collapse","expanded-names":e(oe)?["log-collapse"]:[],"on-update:expanded-names":D=>{oe.value=!!String(D)}},{default:t(()=>[n(fo,{title:"Log",name:"log-collapse",style:{"white-space":"nowrap"}},Xt({header:t(()=>[n(te,{align:"center",wrap:!1},{default:t(()=>[$(c(u.$t("status.log")),1),u.processing&&!e(oe)?(C(),N(e(Ze),{key:0,size:16})):ee("",!0)]),_:1})]),default:t(()=>[n(te,{wrap:!1,class:Ke({"log-container":1,"expand-log":e(P)}),align:"stretch",style:X(e(P)?{height:e(ce),maxHeight:e(ce)}:{})},{default:t(()=>[n(e(Yt),{ref_key:"scrollref",ref:F,"x-scrollable":!0,onMouseup:Z[5]||(Z[5]=D=>R.value=!1),onWheel:Z[6]||(Z[6]=D=>R.value=!1),trigger:"none",style:X([{"z-index":"2","padding-right":"10px","min-height":"7em"},{maxHeight:e(ce)}]),size:50},{default:t(()=>[y("table",ol,[y("tr",al,[y("th",ll,c(u.$t("status.table.core")),1),y("th",sl,c(u.$t("status.table.index")),1),y("th",il,c(u.$t("status.table.status")),1),y("th",rl,c(u.$t("status.table.details")),1)]),(C(!0),Y(we,null,je((e(ne)?e(h).filter(D=>!D.completed):e(h)).slice(-e(he)),({index:D,key:De,command:Se,path:ct,core:Lt})=>(C(),Y("tr",{key:De,class:"log-tr"},[y("td",ul,c(Lt>=0?Lt+1:"-"),1),y("td",dl,c(D+1),1),y("td",cl,c(Se),1),y("td",pl,c(ct),1)]))),128))])]),_:1},8,["style"]),n(te,{style:X([{"align-self":"center",position:"absolute","z-index":"0","margin-top":"0.5em",right:"0.1em","line-height":"0px"},{width:r.W+"px",height:r.H+"px"}]),justify:"center",align:"center"},{default:t(()=>[n(e(Ze),{size:"small",show:u.processing},{default:t(()=>[l.status.thumbnail===void 0?(C(),N(po,{key:0,description:"EMPTY"})):ee("",!0),Vt(y("canvas",{ref_key:"thumbcanvas",ref:ie,width:"106",height:"80",style:X({border:"1px solid gray",filter:u.processing?"":"opacity(0.35)"})},null,4),[[qt,l.status.thumbnail!==void 0]])]),_:1},8,["show"])]),_:1},8,["style"])]),_:1},8,["class","style"])]),_:2},[e(oe)?{name:"header-extra",fn:t(()=>[n(te,{align:"center",wrap:!1},{default:t(()=>[n(pt,null,{default:t(()=>[n(_e,{key:"a",checked:e(ne),"onUpdate:checked":Z[0]||(Z[0]=D=>Ce(ne)?ne.value=D:null),size:"small",style:{"font-size":"smaller"},class:"hide-mobile"},{default:t(()=>[$(c(u.$t("status.filterSuccess")),1)]),_:1},8,["checked"]),e(P)?(C(),N(_e,{key:"b",checked:e(R),"onUpdate:checked":[Z[1]||(Z[1]=D=>Ce(R)?R.value=D:null),Z[2]||(Z[2]=D=>D&&nt(!0))],size:"small",style:{"font-size":"smaller"}},{default:t(()=>[$(c(u.$t("status.autoScroll")),1)]),_:1},8,["checked"])):ee("",!0)]),_:1}),n(dt,{style:{"max-width":"30em"}},{trigger:t(()=>[n(_e,{size:"small",checked:e(P),"onUpdate:checked":[Z[3]||(Z[3]=D=>Ce(P)?P.value=D:null),Z[4]||(Z[4]=D=>{R.value=D,nt(!0)})],style:{"font-size":"smaller"}},{default:t(()=>[$(c(u.$t("status.expandLog")),1)]),_:1},8,["checked"])]),default:t(()=>[$(c(u.$t("status.expandLogTooltip")),1)]),_:1})]),_:1})]),key:"0"}:void 0]),1024)]),_:1},8,["expanded-names","on-update:expanded-names"]),n(go,{style:{margin:"0.2em"}}),n(te,{wrap:!1,vertical:""},{default:t(()=>[n(te,{justify:"center",align:"center",vertical:""},{default:t(()=>[y("div",{class:"singleimage",style:X({maxHeight:e(ae)?"2000px":"100px"})},[!e(ae)&&e(w)&&l.status.threads?(C(),N(Ve,{key:0,tertiary:"",type:"success",size:"small",disabled:!(u.status.success>0),onClick:Z[7]||(Z[7]=D=>ae.value=!0)},{default:t(()=>[$(c(u.$t("status.browseConvertedImages")),1)]),_:1},8,["disabled"])):u.status.success>0&&(l.status.threads||!e(w))?(C(),N(nl,{key:1,ref_key:"imageViewer",ref:H,size:e(V).size,url:e(V).url,"data-url":e(V).dataUrl,width:e(V).width,height:e(V).height,name:e(V).name,length:l.status.success,index:e(V).index,"is-single":!e(w),onDemandImage:Z[8]||(Z[8]=D=>g("demand-image",D))},null,8,["size","url","data-url","width","height","name","length","index","is-single"])):ee("",!0)],4)]),_:1}),n(te,{justify:"center"},{default:t(()=>[e(w)?(C(),N(te,{key:0,vertical:"",align:"center"},{default:t(()=>[n(le,{placement:"left"},{trigger:t(()=>[n(fe,{type:"line","indicator-placement":"inside",color:"lime","rail-color":"rgba(99, 255, 99, 0.5)","indicator-text-color":e(s)[0]===e(E)?"white":"green",processing:u.processing,percentage:e(s)[0]/e(E)*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[y("span",fl,c(e(s)[0]/e(E)*100|0)+"% "+c(u.$t("status.zipped"))+" ("+c(e(s)[0])+"/"+c(e(S)[0])+")",1)]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[$(" "+c(u.$t("status.zippingProgress"))+" ("+c(e(s)[0]/e(E)*100|0)+"%) ",1)]),_:1}),n(Be,{name:"zipcontainer"},{default:t(()=>[e(v).length>=1||l.processing?(C(),N(pt,{key:0,name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(C(!0),Y(we,null,je(e(v),(D,De)=>(C(),Y("span",{key:De},[n(le,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:D.url,download:D.name,class:"in-button-anchor",onClick:Se=>ze(D)},[n(Ve,{class:"zip-button",size:"tiny",color:D.clicked?"#050":"lime","text-color":D.clicked?"gray":"white",onClick:Fe(Se=>ze(D),["stop"]),round:""},{default:t(()=>[n(e(ge),{size:"tiny"},{default:t(()=>[n(e(gt))]),_:1}),$("ZIP"+c(D.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,ml)]),default:t(()=>[y("div",{style:X({color:e(a).successColor})},[y("div",null,"ZIP "+c(D.number||"")+" ("+c(u.$t("success"))+")",1),y("div",null,c(D.name),1),y("div",null,c(D.sizeByUnit),1),y("div",null,c(u.$rt("{n} @:files",D.count)),1)],4)]),_:2},1024)]))),128))]),_:1})):ee("",!0)]),_:1})]),_:1})):ee("",!0)]),_:1}),n(Be,null,{default:t(()=>[l.processing?ee("",!0):(C(),N(te,{key:0,justify:"center",align:"center"},{default:t(()=>[n(le,{trigger:"hover",duration:0,delay:0,placement:"left",style:X({color:"white",backgroundColor:e(a).successColor}),"arrow-style":{backgroundColor:e(a).successColor}},{trigger:t(()=>[n(Be,{name:"save"},{default:t(()=>[e(f)[0]>0?(C(),Y("span",gl,[n(Ct,{value:e(w)?e(s)[0].toLocaleString("en-us"):l.status.type.replace(/\(.+\)/,""),color:e(a).successColorHover,offset:[-20,-3]},{default:t(()=>[n(Ve,{size:"medium",onClick:Xe,color:e(a).successColor,round:""},{default:t(()=>[e(w)?(C(),Y(we,{key:0},[e(v).length?(C(),Y("a",{key:0,href:e(v)[0].url,download:e(v)[0].name,class:"in-button-anchor",onClick:Z[9]||(Z[9]=Fe(()=>{},["prevent"]))},[n(vo),$(" √ó "+c(e(v).length)+" "+c(u.$t("save")),1)],8,vl)):ee("",!0)],64)):(C(),Y("a",{key:1,href:e(V).url,download:e(V).name,class:"in-button-anchor",onClick:Z[10]||(Z[10]=Fe(()=>{},["prevent"]))},[n(e(ge),{size:"tiny"},{default:t(()=>[n(e(nn))]),_:1}),$(" "+c(u.$t("save")),1)],8,hl))]),_:1},8,["color"])]),_:1},8,["value","color"])])):ee("",!0)]),_:1})]),default:t(()=>[u.status.length>=2?(C(),Y(we,{key:0},[y("div",null,c(e(d)("success"))+": "+c(e(s)[0].toLocaleString()),1),y("div",null,c(e(d)("status.totalSize"))+": "+c(e(Oe)(u.status.zippedTotalSize)),1),y("div",null,"ZIP √ó "+c(e(v).length),1)],64)):(C(),Y(we,{key:1},[$(c(u.$t("status.downloadConvertedImage")),1)],64))]),_:1},8,["style","arrow-style"]),!u.processing&&u.status.success!==e(E)?(C(),N(ho,{key:0,options:e(be),onSelect:Z[11]||(Z[11]=(D,De)=>{var Se;return(Se=e(be).find(({key:ct})=>D===ct))==null?void 0:Se.onSelect()}),"show-arrow":!0,trigger:"click",size:"small",placement:"bottom-start"},{default:t(()=>[n(le,{show:e(q),duration:0,delay:0,placement:"right",style:X({color:"white",backgroundColor:e(a).errorColor}),"arrow-style":{backgroundColor:e(a).errorColor}},{trigger:t(()=>[n(Ct,{value:u.status.unconvertedFileCount.toLocaleString(),color:e(a).errorColorHover,offset:[-0,-3]},{default:t(()=>[n(Ve,{size:"small",color:e(a).errorColor},{default:t(()=>[n(e(ge),{size:"medium",style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Mo))]),_:1})]),_:1},8,["color"])]),_:1},8,["value","color"])]),default:t(()=>[y("div",null,[y("div",null,c(e(d)("failed"))+": "+c(u.status.unconvertedFileCount.toLocaleString()),1),y("div",null,c(e(d)("status.totalSize"))+": "+c(e(Oe)(u.status.unconvertedTotalSize)),1)])]),_:1},8,["show","style","arrow-style"])]),_:1},8,["options"])):ee("",!0)]),_:1}))]),_:1}),n(Be,{name:"zipcontainer"},{default:t(()=>[e(k)?(C(),N(te,{key:0,vertical:"",align:"center"},{default:t(()=>[n(le,{placement:"left"},{trigger:t(()=>[n(fe,{type:"line","indicator-placement":"inside",color:"red","rail-color":"rgba(255, 0, 0, 0.5)","indicator-text-color":u.status.failedFileZippedCount===u.status.unconvertedFileCount?"white":"#500",processing:e(k)&&!u.status.failedZipDone&&!u.status.failedToCreateFailedZip,percentage:u.status.failedFileZippedCount/u.status.unconvertedFileCount*100|0,style:{width:"300px","font-weight":"bold","font-family":"v-mono"}},{default:t(()=>[u.status.failedToCreateFailedZip?(C(),Y("div",{key:1,style:X({color:e(a).errorColor})},c(u.$t("status.failureZippingFailedFiles")),5)):(C(),Y("span",_l,c(u.status.failedFileZippedCount/u.status.unconvertedFileCount*100|0)+"% "+c(u.$t("status.zipped"))+" ("+c(u.status.failedFileZippedCount)+"/"+c(u.status.unconvertedFileCount)+")",1))]),_:1},8,["indicator-text-color","processing","percentage"])]),default:t(()=>[$(" "+c(u.$t("status.zippingProgress"))+" ("+c(u.status.failedFileZippedCount/u.status.unconvertedFileCount*100|0)+"%) ",1)]),_:1}),n(pt,{name:"zips",class:"zip-buttons-parent",tag:"n-flex"},{default:t(()=>[(C(!0),Y(we,null,je(e(I),(D,De)=>(C(),Y("span",{key:De},[n(le,{trigger:"hover",duration:0,delay:0},{trigger:t(()=>[y("a",{href:D.url,download:D.name,class:"in-button-anchor",onClick:Se=>ze(D)},[n(Ve,{class:"zip-button",size:"tiny",color:D.clicked?"#551122":"#F00","text-color":D.clicked?"gray":"white",onClick:Fe(Se=>ze(D),["stop"]),round:""},{default:t(()=>[n(e(ge),{size:"tiny"},{default:t(()=>[n(e(Po))]),_:1}),$("ZIP"+c(D.number||""),1)]),_:2},1032,["color","text-color","onClick"])],8,yl)]),default:t(()=>[y("div",{style:X({color:e(a).errorColor})},[y("div",null,"ZIP "+c(D.number||"")+" ("+c(u.$t("failed"))+")",1),y("div",null,c(D.name),1),y("div",null,c(D.sizeByUnit),1),y("div",null,c(u.$rt("{n} @:files",D.count)),1)],4)]),_:2},1024)]))),128))]),_:1})]),_:1})):ee("",!0)]),_:1})]),_:1})]),_:1})}}}),xl=Me(bl,[["__scopeId","data-v-e8aa8ebd"]]),Al=["innerHTML"],kl={style:{"flex-grow":"1"}},zl=ve({__name:"converter",props:{input:{},format:{},quality:{},retainExtension:{type:Boolean},maxZipSizeMB:{},threads:{}},emits:["start","end","multi-thread-count"],setup(o,{emit:i}){Ne(Pe);const{t:p}=Ee(),d=it(),a=Uo(),r=Do(),l=10,g=navigator.hardwareConcurrency,w=typeof OffscreenCanvas=="function",h=300,k=o,v=i,I=x(!1),b=x(!1),m=x(!1),f=x(0),T=x(!1),O=x(!1),S=x("initializing"),E=x("info"),s=st(R());let _=!1,z=()=>{},A=0,M=!1;ye(()=>k.input,j=>{j!=null&&j.length&&he(j)}),Te(async()=>{await V(),ie()});function L(){if(A>l*1e3&&!M&&s.success>0)return d.warning({title:p("confirmCloseDialogTitle"),autoFocus:!0,maskClosable:!1,positiveText:p("close"),negativeText:p("back"),onPositiveClick(){T.value=!1,r.destroyAll(),a.destroyAll()},onNegativeClick(){},content:p("confirmCloseDialog")}),!1;r.destroyAll(),a.destroyAll(),T.value=!1}function de(j){s.demandImage(j)}function U(){!b.value&&I.value?b.value=!0:L()}function q(){he(k.input)}let P=x(()=>{});function R(j){const F={logs:[],index:0,converted:0,success:0,failure:0,done:0,length:0,zippedTotalCount:0,zippingErrorCount:0,zippedTotalSize:0,processing:!1,zips:[],inputTotalSize:0,outputTotalSize:0,thumbnail:null,baseZipName:"testzipname",type:"image/any",startedTime:Date.now(),convertedImageDataUrl:"",convertedImageName:"",convertedImageUrl:"",zipSize:k.maxZipSizeMB,unconvertedListText:"",failedZipDone:!1,failedZips:[],unconvertedFileCount:0,unconvertedTotalSize:0,failedFileZippedCount:0,failedToCreateFailedZip:!1,demandImage:()=>{}};return Object.assign(j||{},F)}function ne(){O.value=!1,URL.revokeObjectURL(s.convertedImageUrl);for(const j of s.zips)URL.revokeObjectURL(j.url);s.zips.length=0;for(const j of s.failedZips)URL.revokeObjectURL(j.url);s.failedZips.length=0,R(s),z(),z=()=>{},M=!1,m.value=!1,b.value=!1}async function he(j){if(I.value){d.error({title:"Busy",positiveText:"OK",content:p("interfered")});return}let F=oe(j);R(s),ne();const H={convertedImageBlob:null,convertedImageWidth:0,convertedImageHeight:0,convertedImageName:""};f.value++,T.value=!0,O.value=!0,I.value=!0,s.processing=!0,E.value="info",S.value=p("processing");const Q=new Set,J=k.format,re=k.quality,ke=[...J.matchAll(/.+\/(.+)/g)][0][1].replace(/jpeg/,"jpg"),We=ae(J,re,F[0].webkitRelativePath);s.length=F.length,s.baseZipName=We,s.type=J.replace(/image\//,"").toUpperCase()+(/jpe?g|webp/i.test(J)?" ("+re+")":""),s.threads=_?0:k.threads;const be=Date.now();v("start");const ze=F.concat();let Xe;if({callbackToGenerateFailedZips:Xe,callbackToClearConverter:z}=!_&&k.threads>=2?await Oa(s,b,k,H,a,r,ze,Q,J,re,ke,J):await Ra(ze,Q,H,k,b,s),s.length===1&&await ce(ke,H),s.success===s.length?(E.value="success",S.value=p("completed")):(E.value="error",S.value=b.value?p("aborted"):p("incomplete")),Q.size!==F.length){const Ue=me(F,Q);P.value=()=>{!Ue||!Ue.length||Xe(Ue)}}I.value=!1,s.processing=!1,m.value=!0,A=Date.now()-be,v("end")}async function ce(j,F){if(F.convertedImageBlob){const H=new FileReader;H.readAsDataURL(F.convertedImageBlob);const Q=await ht(H).then(J=>J.target.result);s.convertedImageName=F.convertedImageName.replace(/^.*\/(?=[^/]+$)/,"").replace(k.retainExtension?"":/\.(jpe?g|gif|png|avif|webp|bmp)$/i,"")+"."+j,s.convertedImageUrl=URL.createObjectURL(F.convertedImageBlob),s.convertedImageDataUrl=Q,s.convertedImageWidth=F.convertedImageWidth,s.convertedImageHeight=F.convertedImageHeight}}function me(j,F){const H=[],Q=[];let J=0;for(const re of j)F.has(re._id)||(H.push(re),Q.push(re.webkitRelativePath||re.relativePath||re.name),J+=re.size);return Q.length&&(s.unconvertedListText=Q.join(`
`),s.unconvertedFileCount=H.length,s.unconvertedTotalSize=J),H}let pe=0;function oe(j){const F=[];for(const H of j)H.hasOwnProperty("_id")||Object.defineProperty(H,"_id",{value:pe++}),F.push(H);return F}function ae(j,F,H){var ke;const Q=new Date;return j=j.replace(/^image\//,"").toLowerCase(),`${B.useFolderNameForZip&&((ke=String(H).match(/^\/?([^/]+)\//))==null?void 0:ke[1])||"avif2jpg"}-
    ${Q.getFullYear().toString().substring(2)}
    ${String((Q.getMonth()+1)*100+Q.getDate()).padStart(4,"0")}
    ${String(Q.getHours()*1e4+Q.getMinutes()*100+Q.getSeconds()).padStart(6,"0")}
    -
    ${j+(/jpe?g|webp/i.test(j)?F:"")}
  `.replace(/\s/g,"")}async function V(){const j="data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAPJtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEWAAEAAAAgAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAHFpcHJwAAAAUmlwY28AAAAUaXNwZQAAAAAAAAAIAAAACAAAABBwYXNwAAAAAQAAAAEAAAAWYXYxQ4EgAAAKCDgIv2kBDQAgAAAAEHBpeGkAAAAAAwgICAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAKG1kYXQKCDgIv2kBDQAgMhQWQAAASAAADAZuZXHwA9LzjNWygA==",F=document.createElement("img"),H=ht(F).then(()=>!0,()=>!1);F.src=j,await H||d.warning({title:"Unsupported",positiveText:"OK",maskClosable:!1,content:p("avifUnsupported")})}function ie(){(!w||g<2||!Promise.any)&&(_=!0),v("multi-thread-count",_?0:g)}return(j,F)=>{const H=Le,Q=xe,J=$e,re=Ze,ke=He,We=yt;return C(),Y(we,null,[n(J,{justify:"center",align:"center"},{default:t(()=>{var be;return[!e(I)&&((be=k.input)!=null&&be.length)?(C(),N(Q,{key:0,trigger:"hover",placement:"top","keep-alive-on-hover":!1,duration:0,delay:50},{trigger:t(()=>[n(H,{onClick:q,round:""},{default:t(()=>[$(c(e(p)("convertAgain")),1)]),_:1})]),default:t(()=>{var ze;return[y("div",{innerHTML:e(p)("reconvertTip",(ze=k.input)==null?void 0:ze.length)},null,8,Al)]}),_:1})):ee("",!0)]}),_:1}),n(We,{ref:"processingModal",show:e(T),"onUpdate:show":F[2]||(F[2]=be=>Ce(T)?T.value=be:null),closable:e(m),"close-on-esc":!1,preset:"dialog","display-directive":"show",onClick:F[3]||(F[3]=be=>{e(r).destroyAll(),e(a).destroyAll()}),onMaskClick:F[4]||(F[4]=be=>{e(r).destroyAll(),e(a).destroyAll()}),onClose:L,onEsc:U,title:e(S),type:e(E),"mask-closable":!1,"on-after-leave":ne,class:"processing-dialog"},{default:t(()=>[n(ke,{vertical:"",style:{"flex-grow":"1"}},{default:t(()=>[y("div",kl,[e(O)?(C(),N(xl,{key:e(f),processing:e(I),status:e(s),interval:h,onAllZipsClicked:F[0]||(F[0]=be=>Ce(M)?M.value=!0:M=!0),onDemandZipErrors:e(P),onDemandImage:de},null,8,["processing","status","onDemandZipErrors"])):ee("",!0)]),n(ke,{justify:"end"},{default:t(()=>[e(I)?(C(),N(H,{key:0,disabled:e(b),ref:"cancelbutton",round:"",size:"large",onClick:F[1]||(F[1]=be=>b.value=!0)},{default:t(()=>[n(re,{show:e(b)&&!e(m),size:"small"},{default:t(()=>[$(c(e(p)("cancel")),1)]),_:1},8,["show"])]),_:1},8,["disabled"])):e(m)?(C(),N(H,{key:1,onClick:L,round:"",size:"large",style:{"font-size":"small","margin-top":"1em"}},{default:t(()=>[$(c(e(p)("close")),1)]),_:1})):ee("",!0)]),_:1})]),_:1})]),_:1},8,["show","closable","title","type"])],64)}}}),Tl="/avif2jpeg/test/avif.png",pn=o=>(bt("data-v-892702c9"),o=o(),xt(),o),Il={class:"container-1"},$l=pn(()=>y("span",null,"Drag & Drop",-1)),Sl={style:{position:"relative"}},Cl={style:{position:"absolute","font-size":"0.5em",right:"-3.5em",bottom:"-1.5em","white-space":"nowrap"}},Ll={style:{color:"#666666"}},El=pn(()=>y("img",{src:Tl,class:"avif"},null,-1)),Fl=["innerHTML"],Ml={style:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","font-size":"xx-small","white-space":"nowrap"}},Pl=ve({__name:"droptarget",props:{forbidden:{type:Boolean},dropTarget:{}},emits:["drop"],setup(o,{emit:i}){Ne(Pe);const p=o,d=i,a=Oo(),r=x(!1),l=x(0),g=x("");Te(()=>{w(p.dropTarget||document)});function w(k){document.ondragstart=v=>v.preventDefault(),document.ondragover=v=>v.preventDefault(),k.ondrop=async v=>{var b;if(v.preventDefault(),r.value||p.forbidden)return;r.value=!0,l.value=0,g.value="";let I;try{const m=[...v.dataTransfer.items].map(f=>f.webkitGetAsEntry());a.start(),I=await h(m),a.finish()}catch{I=[...((b=v.dataTransfer)==null?void 0:b.files)??[]],a.error()}r.value&&(r.value=!1,d("drop",I))}}async function h(k,v){v=v||[];for(const I of k)if(I.isFile){const b=await new Promise(m=>I.file(f=>m(f)));Object.defineProperty(b,"webkitRelativePath",{value:I.fullPath}),v.push(b),l.value++}else if(I.isDirectory){g.value=I.fullPath;const b=I.createReader();do{const m=await new Promise(f=>b.readEntries(T=>f(T)));if(!m.length)break;await h(m,v)}while(!0)}return v}return(k,v)=>{const I=ge,b=$e,m=Je,f=xe,T=yt;return C(),Y(we,null,[y("div",Il,[n(f,{to:!1,"display-directive":"show",trigger:"hover",duration:0,delay:0,placement:"left"},{trigger:t(()=>[n(b,{vertical:"",class:"container-2"},{default:t(()=>[n(b,{align:"center",wrap:!1,class:"container-3"},{default:t(()=>[n(b,{align:"center"},{default:t(()=>[n(I,{size:"64",color:"white"},{default:t(()=>[n(e(Bo))]),_:1})]),_:1}),n(b,{vertical:"",align:"center",wrap:!1,style:{"font-weight":"bold","font-size":"1em","line-height":"90%","white-space":"nowrap"}},{default:t(()=>[$l,y("span",Sl,[$(" AVIF Images "),y("span",Cl,[$(" or "),n(m,{placement:"bottom-end"},{trigger:t(()=>[y("span",Ll,[n(I,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(It))]),_:1}),$(" Folders ")])]),default:t(()=>[$(" You can drag and drop your local folders ")]),_:1})])])]),_:1}),n(b,null,{default:t(()=>[El]),_:1})]),_:1})]),_:1})]),default:t(()=>[y("h3",{innerHTML:k.$t("droptarget"),style:{"max-width":"200px","text-align":"center","word-break":"keep-all","overflow-wrap":"break-word"}},null,8,Fl)]),_:1})]),n(T,{show:e(r),"onUpdate:show":v[0]||(v[0]=O=>Ce(r)?r.value=O:null),closable:!0,preset:"dialog",title:"Parsing dropped items.",type:"info","mask-closable":!1,"negative-text":k.$t("cancel")},{default:t(()=>[n(b,{vertical:"",align:"center"},{default:t(()=>[y("div",Ml,c(e(g)),1),y("div",null,"found "+c(e(l))+" files",1)]),_:1})]),_:1},8,["show","negative-text"])],64)}}}),Ul=Me(Pl,[["__scopeId","data-v-892702c9"]]),fn=o=>(bt("data-v-977d699f"),o=o(),xt(),o),Dl={class:"container-1"},Ol={class:"container-2"},Bl=["innerHTML"],jl=["innerHTML"],Zl={style:{"padding-left":"1em"}},Rl=fn(()=>y("br",null,null,-1)),Nl=fn(()=>y("ul",null,[y("li",null,"Each extension must begin with a period. "),y("li",null,"Separate each extension with a comma. "),y("li",null,"Use alphameric characters.")],-1)),Hl=["innerHTML"],Wl=["accept"],Vl=ve({__name:"file-selector",props:{expanded:{type:Boolean},target:{},userExtensions:{},forbidden:{type:Boolean}},emits:["input","on-change-accept","update:target","update:userExtensions","update:expanded"],setup(o,{emit:i}){const p=it(),{t:d}=Ee(),a=Ne(Pe),r=["avif_only","all_images","all_files","edit_type"],l=o,g=i,w=x(0),h=x(!1),k=x(!1),v=Ae(()=>M(f.value)),I=Ae(()=>T.value.split(",").every(q=>/^\s*(\.[\w\-]+)*\s*$/.test(q))?"success":"error"),b=Ae(()=>!l.forbidden&&!k.value),m=Ae({get:()=>l.expanded,set:U=>{g("update:expanded",U)}}),f=Ae({get:()=>r.indexOf(l.target)>=0?l.target:r[0],set:U=>{g("update:target",U)}}),T=Ae({get:()=>l.userExtensions,set:U=>{g("update:userExtensions",U)}}),O=x(null),S=x(null),E=x(A());ye(f,U=>{g("on-change-accept",v.value)}),Te(()=>{});function s(U){U.click()}function _(){}function z(U){const P=[...U.target.files];O.value.value="",S.value.value="",de(P)}function A(){return"webkitdirectory"in document.createElement("input")}function M(U){switch(U){case"avif_only":return".avif, .webp";case"all_images":return".jpg, .jpeg, .jfif, .pjpeg, .pjp, .gif, .png, .webp, .avif, .bmp, .apng, .ico";case"edit_type":return T.value;case"all_files":default:return".*"}}async function L(U){const q=String(v.value).toLowerCase().replace(/\s+/g,"");if(q&&v.value!==".*"){const P=q.split(",");U=U.filter(R=>P.includes(R.name.replace(/^.+(\.[^.]+)$/,"$1").toLowerCase())),U.length||await new Promise(R=>{p.error({title:"Images Not Found",positiveText:"OK",onAfterLeave:R,content:()=>se("div",[se(en,{description:"NO IMAGES"}),`${d("noimage")}`,se("br"),v.value])})})}return U}async function de(U){k.value=!0,U=await L(U),w.value=U.length,U.length>0&&g("input",U),k.value=!1}return(U,q)=>{const P=ge,R=tn,ne=Le,he=xe,ce=$e,me=Wo,pe=jo,oe=Zo,ae=Je,V=Ro,ie=zt,j=Tt;return C(),Y(we,null,[y("div",Dl,[y("div",Ol,[n(ce,{vertical:"",align:"center",justify:"center",inline:""},{default:t(()=>[n(ce,{align:"center",justify:"space-around"},{default:t(()=>[n(R,{value:e(w),max:999,offset:[-8,0],color:"#999999",style:{"margin-right":"1em"}},{default:t(()=>[n(P,{size:"4em",color:"#CCCCCC"},{default:t(()=>[n(e(No))]),_:1})]),_:1},8,["value"]),n(ce,{vertical:"",align:"stretch",justify:"center"},{default:t(()=>[n(he,{to:!1,"display-directive":"show",show:e(a).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(a).LANDSCAPE.value?"right":"top",duration:0,delay:0,"z-index":10},{trigger:t(()=>[n(ne,{disabled:!e(b),onClick:q[0]||(q[0]=F=>s(e(O))),round:"",style:{width:"100%"},color:"white","text-color":"black"},{icon:t(()=>[n(P,{size:"large",color:"gray"},{default:t(()=>[n(e(on))]),_:1})]),default:t(()=>[$(" "+c(U.$t("loadbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[y("div",{innerHTML:U.$t("loadbuttontooltip")},null,8,Bl)]),_:1},8,["show","placement"]),!e(a).IS_SP&&e(E)||e(a).SSR?(C(),N(he,{key:0,to:!1,"display-directive":"show",trigger:"hover",placement:"left","keep-alive-on-hover":!1,style:{"max-width":"40vw"},duration:0,delay:0,"z-index":10,show:e(a).showTooltipsBeforeMounted.value},{trigger:t(()=>[n(ne,{disabled:!e(b),onClick:q[1]||(q[1]=F=>s(e(S))),round:"",style:{width:"100%"},color:"white","text-color":"black"},{icon:t(()=>[n(P,{size:"large",color:"gray"},{default:t(()=>[n(e(It))]),_:1})]),default:t(()=>[$(" "+c(U.$t("loadfolderbutton")),1)]),_:1},8,["disabled"])]),default:t(()=>[y("div",{innerHTML:U.$t("loadfoldertooltip")},null,8,jl)]),_:1},8,["show"])):ee("",!0)]),_:1})]),_:1}),y("div",{class:Ke({"expand-ext-list-container":e(m)})},[n(j,{"display-directive":"show","expanded-names":e(m)?["extItem"]:"","on-update:expanded-names":F=>{m.value=!!(""+F)},class:Ke({"expand-ext-list":e(m)})},{"header-extra":t(()=>[n(P,{size:"large"},{default:t(()=>[n(e(Ho))]),_:1})]),default:t(()=>[n(ie,{title:U.$t("fileTypeRadioTitle"),name:"extItem"},{default:t(()=>[n(V,{value:e(f),"onUpdate:value":q[5]||(q[5]=F=>Ce(f)?f.value=F:null),name:"filetyperadios",size:"small"},{default:t(()=>[n(ce,{vertical:"",style:{"padding-left":"1em"}},{default:t(()=>[(C(),Y(we,null,je(r,F=>n(he,{key:F,trigger:"hover","keep-alive-on-hover":!1,"z-index":5,placement:"left",style:{"max-width":"200px"},duration:0,delay:0},{trigger:t(()=>[n(me,{value:F},{default:t(()=>[$(c(U.$t("fileTypeRadioOptions."+F)),1)]),_:2},1032,["value"])]),default:t(()=>[$(" "+c(M(F).replace(/,/g,", ")),1)]),_:2},1024)),64)),n(he,{trigger:"hover","keep-alive-on-hover":!1,placement:"bottom-start",show:e(h),duration:0,delay:0},{trigger:t(()=>[y("div",Zl,[n(ae,{trigger:"manual",placement:"right-end",show:e(f)==="edit_type"&&e(I)!=="success"&&!!e(h)},{trigger:t(()=>[n(pe,{value:e(T),"onUpdate:value":q[2]||(q[2]=F=>Ce(T)?T.value=F:null),status:e(I),disabled:e(f)!=="edit_type",onFocus:q[3]||(q[3]=F=>h.value=!0),onBlur:q[4]||(q[4]=F=>h.value=void 0),clearable:!0,size:"small",placeholder:".jpg, .gif, .png",spellcheck:"false"},null,8,["value","status","disabled"])]),default:t(()=>[n(oe,{type:"error","show-icon":!0,title:"Validation error"},{default:t(()=>[$(" Please correct the extension list."),Rl,Nl]),_:1})]),_:1},8,["show"])])]),default:t(()=>[y("span",{innerHTML:U.$t("editAcceptTypes")},null,8,Hl)]),_:1},8,["show"])]),_:1})]),_:1},8,["value"])]),_:1},8,["title"])]),_:1},8,["expanded-names","on-update:expanded-names","class"])],2),e(a).IS_SP?ee("",!0):(C(),N(Ul,{key:0,onDrop:de,forbidden:!e(b)},null,8,["forbidden"]))]),_:1})])]),y("input",{ref_key:"fileinput",ref:O,onInput:z,onCancel:_,type:"file",multiple:"",accept:e(v),style:{display:"none"}},null,40,Wl),y("input",{ref_key:"folderinput",ref:S,webkitdirectory:"",directory:"",onInput:z,onCancel:_,type:"file",style:{display:"none"}},null,544)],64)}}}),ql=Me(Vl,[["__scopeId","data-v-977d699f"]]),Gl={style:{"white-space":"nowrap"}},Kl=ve({__name:"settings-output",props:{quality:{},format:{}},emits:["update:format","update:quality"],setup(o,{emit:i}){const p=o,d=i,{t:a}=Ee(),r=Ne(Pe),l=x([]),g=["image/jpeg","image/png","image/gif","image/bmp","image/avif","image/webp"],w=Ae({get:()=>p.format,set:m=>{m=I(m),d("update:format",m)}}),h=Ae({get:()=>p.quality,set:m=>{d("update:quality",m)}}),k=Ae(()=>/png|bmp/i.test(w.value)),v=x(null);Te(()=>{b()});function I(m){return l.value.indexOf(m)<0&&(m=l.value[0]),m}function b(){for(const m of g)v.value.toDataURL(m).indexOf(m)>=0&&l.value.push(m);l.value.length===0&&l.value.push(g[0])}return(m,f)=>{const T=ge,O=an,S=$e,E=xe,s=At,_=ln;return C(),Y(we,null,[n(S,{justify:"center"},{default:t(()=>[n(S,{vertical:""},{default:t(()=>[n(E,{to:!1,"display-directive":"show",show:e(r).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(r).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(S,{align:"center"},{default:t(()=>[n(T,null,{default:t(()=>[n(e(on))]),_:1}),$(c(e(a)("settings.imageType"))+": ",1),n(O,{value:w.value,"onUpdate:value":f[0]||(f[0]=z=>w.value=z),options:l.value.map(z=>({value:z,label:z})),"consistent-menu-width":!1,size:"small"},null,8,["value","options"])]),_:1})]),default:t(()=>[$(" "+c(e(a)("settings.imageTypeTooltip")),1)]),_:1},8,["show","placement"]),n(E,{to:!1,"display-directive":"show",show:e(r).showTooltipsBeforeMounted.value,trigger:"hover",placement:e(r).LANDSCAPE.value?"left":"top-start","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(S,{align:"center"},{default:t(()=>[n(S,{align:"start",wrap:!1},{default:t(()=>[n(T,null,{default:t(()=>[n(e(nn))]),_:1}),y("span",Gl,c(e(a)("settings.quality"))+":",1),n(S,{align:"center",justify:"space-between"},{default:t(()=>[n(s,{tooltip:!1,value:h.value,"onUpdate:value":f[1]||(f[1]=z=>h.value=z),step:1,style:{width:"120px"},disabled:k.value},null,8,["value","disabled"]),n(_,{value:h.value,"onUpdate:value":f[2]||(f[2]=z=>h.value=z),step:"1",min:"0",max:"100",disabled:k.value,style:{width:"90px"},size:"small"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),default:t(()=>[$(" "+c(e(a)("settings.qualitytooltip")),1)]),_:1},8,["show","placement"])]),_:1})]),_:1}),y("canvas",{ref_key:"canvas",ref:v,width:"1",height:"1",style:{display:"none"}},null,512)],64)}}}),Ql={style:{width:"4em","text-align":"left"}},Yl={style:{width:"4em","text-align":"left"}},Dt=100,Ot=2e3,Bt=8192,jt=8192,Jl=100,Xl=100,es=ve({__name:"settings-adv",props:Vo({threadMax:{}},{expanded:{type:Boolean,required:!0},expandedModifiers:{},multithread:{type:Boolean,required:!0},multithreadModifiers:{},threadCount:{required:!0},threadCountModifiers:{},maxZipSize:{required:!0},maxZipSizeModifiers:{},retainExt:{type:Boolean,required:!0},retainExtModifiers:{},useFolderNameForZip:{type:Boolean,required:!0},useFolderNameForZipModifiers:{},shrinkImage:{type:Boolean,required:!0},shrinkImageModifiers:{},maxWidth:{required:!0},maxWidthModifiers:{},maxHeight:{required:!0},maxHeightModifiers:{}}),emits:["update:expanded","update:multithread","update:threadCount","update:maxZipSize","update:retainExt","update:useFolderNameForZip","update:shrinkImage","update:maxWidth","update:maxHeight"],setup(o){const i={trigger:"hover",placement:"left",keepAliveOnHover:!1,duration:0,delay:0},p=Ie(o,"expanded"),d=Ie(o,"multithread"),a=Ie(o,"threadCount"),r=Ie(o,"maxZipSize"),l=Ie(o,"retainExt"),g=Ie(o,"useFolderNameForZip"),w=Ie(o,"shrinkImage"),h=Ie(o,"maxWidth"),k=Ie(o,"maxHeight"),v=o;ye([a,()=>v.threadMax],()=>{v.threadMax>1&&typeof a.value>"u"&&(a.value=v.threadMax)}),ye(()=>v.threadMax,()=>{v.threadMax>1||(d.value=!1)},{immediate:!0});const I=Ae(()=>d.value&&v.threadMax>1);return(b,m)=>{const f=ge,T=Le,O=qo,S=He,E=At,s=ln,_=zt,z=Tt;return C(),N(S,{justify:"center"},{default:t(()=>[n(z,{"display-directive":"show","default-expanded-names":p.value?["collapitem"]:"","on-update:expanded-names":A=>p.value=!!String(A),"trigger-areas":["arrow","main"],class:Ke(["settings-body",p.value?"expand-adv-settings":""])},Xt({arrow:t(()=>[n(f,{style:X(p.value&&{top:"8px"})},{default:t(()=>[n(e(Go))]),_:1},8,["style"]),n(f,null,{default:t(()=>[n(e(Ko))]),_:1})]),default:t(()=>[n(_,{title:b.$t("settings.advancedSettings"),name:"collapitem"},{default:t(()=>[n(S,{vertical:"",style:{"padding-left":"2em"}},{default:t(()=>[n(e(xe),qe(Ge(i)),{trigger:t(()=>[n(S,{vertical:""},{default:t(()=>[n(S,{wrap:!1,align:"center"},{default:t(()=>[n(T,{text:"",disabled:!b.threadMax,style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:m[0]||(m[0]=A=>d.value=!d.value)},{icon:t(()=>[n(f,null,{default:t(()=>[n(e(Qo))]),_:1})]),default:t(()=>[$(" "+c(b.$t("settings.enableMultiThreads")),1)]),_:1},8,["disabled"]),n(O,{value:d.value,"onUpdate:value":m[1]||(m[1]=A=>d.value=A),disabled:!b.threadMax,size:"small"},null,8,["value","disabled"])]),_:1}),n(S,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(E,{value:a.value,"onUpdate:value":m[2]||(m[2]=A=>a.value=A),disabled:!b.threadMax||!d.value,step:1,min:2,max:b.threadMax,style:{width:"120px"}},null,8,["value","disabled","max"]),n(s,{size:"tiny",value:a.value,"onUpdate:value":m[3]||(m[3]=A=>a.value=A),disabled:!b.threadMax||!d.value,step:1,min:2,max:b.threadMax,style:{width:"10em"}},{suffix:t(()=>[$(c(b.$t("threads",a.value)),1)]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[$(" "+c(b.$t("settings.multiThreadsTooltip")),1)]),_:1},16),n(e(xe),qe(Ge(i)),{trigger:t(()=>[n(S,{vertical:""},{default:t(()=>[n(S,{wrap:!1,align:"center"},{default:t(()=>[n(T,{text:"",focusable:!1,style:{"white-space":"nowrap","font-size":"smaller"}},{icon:t(()=>[n(f,{style:{"vertical-align":"middle"}},{default:t(()=>[n(e(Yo))]),_:1})]),default:t(()=>[$(" "+c(b.$t("settings.maxZipFileSize"))+": ",1)]),_:1})]),_:1}),n(S,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(E,{tooltip:!1,value:r.value,"onUpdate:value":m[4]||(m[4]=A=>r.value=A),step:1,min:Dt,max:Ot,style:{width:"120px"}},null,8,["value"]),n(s,{size:"tiny",value:r.value,"onUpdate:value":m[5]||(m[5]=A=>r.value=A),step:"1",min:Dt,max:Ot,style:{width:"10em"}},{suffix:t(()=>[$("(MB)")]),_:1},8,["value"])]),_:1})]),_:1})]),default:t(()=>[$(" "+c(b.$t("settings.maxZipFileSizeTooltip")),1)]),_:1},16),n(e(xe),qe(Ge(i)),{trigger:t(()=>[n(S,{wrap:!1,align:"center"},{default:t(()=>[n(T,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:m[6]||(m[6]=A=>g.value=!g.value)},{icon:t(()=>[n(f,null,{default:t(()=>[n(e(It))]),_:1})]),default:t(()=>[$(" "+c(b.$t("settings.useFolderNameForZip")),1)]),_:1}),n(O,{value:g.value,"onUpdate:value":m[7]||(m[7]=A=>g.value=A),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[$(" "+c(b.$t("settings.useFolderNameForZipTooltip")),1)]),_:1},16),n(e(xe),qe(Ge(i)),{trigger:t(()=>[n(S,{wrap:!1,align:"center"},{default:t(()=>[n(T,{text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:m[8]||(m[8]=A=>l.value=!l.value)},{icon:t(()=>[n(f,null,{default:t(()=>[n(e(Jt))]),_:1})]),default:t(()=>[$(" "+c(b.$t("settings.retainOriginalExtension")),1)]),_:1}),n(O,{value:l.value,"onUpdate:value":m[9]||(m[9]=A=>l.value=A),size:"small"},null,8,["value"])]),_:1})]),default:t(()=>[$(" "+c(b.$t("settings.retainExtTooltip")),1)]),_:1},16),n(e(xe),qe(Ge(i)),{trigger:t(()=>[n(S,{vertical:""},{default:t(()=>[n(S,{wrap:!1,align:"center"},{default:t(()=>[n(T,{disabled:!e(I),text:"",style:{"font-size":"smaller"},bordered:!1,focusable:!1,onClick:m[10]||(m[10]=A=>w.value=!w.value)},{icon:t(()=>[n(f,null,{default:t(()=>[n(e(Jo))]),_:1})]),default:t(()=>[$(" "+c(b.$t("settings.shrinkImage")),1)]),_:1},8,["disabled"]),n(O,{disabled:!e(I),value:w.value,"onUpdate:value":m[11]||(m[11]=A=>w.value=A),size:"small"},null,8,["disabled","value"])]),_:1}),n(S,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(E,{value:h.value,"onUpdate:value":m[12]||(m[12]=A=>h.value=A),disabled:!w.value||!e(I),step:1,min:Jl,max:Bt,style:{width:"120px"}},null,8,["value","disabled"]),n(s,{size:"tiny",value:h.value,"onUpdate:value":m[13]||(m[13]=A=>h.value=A),disabled:!w.value||!e(I),step:1,min:8,max:Bt*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[y("span",Ql,c(b.$t("width")),1)]),suffix:t(()=>[$("px")]),_:1},8,["value","disabled","max"])]),_:1}),n(S,{wrap:!1,align:"center",style:{"padding-left":"2em"}},{default:t(()=>[n(E,{value:k.value,"onUpdate:value":m[14]||(m[14]=A=>k.value=A),disabled:!w.value||!e(I),step:1,min:Xl,max:jt,style:{width:"120px"}},null,8,["value","disabled"]),n(s,{size:"tiny",value:k.value,"onUpdate:value":m[15]||(m[15]=A=>k.value=A),disabled:!w.value||!e(I),step:1,min:8,max:jt*4,style:{"max-width":"15em","text-align":"right"}},{prefix:t(()=>[y("span",Yl,c(b.$t("height")),1)]),suffix:t(()=>[$("px")]),_:1},8,["value","disabled","max"])]),_:1})]),_:1})]),default:t(()=>[$(" "+c(b.$t("settings.shrinkImageTooltip")),1)]),_:1},16)]),_:1})]),_:1},8,["title"])]),_:2},[p.value?{name:"header-extra",fn:t(()=>[n(e(xe),{"keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(T,{onClick:e(ma),size:"tiny",style:{"font-size":"xx-small"}},{default:t(()=>[$(c(b.$t("reset")),1)]),_:1},8,["onClick"])]),default:t(()=>[$(" "+c(b.$t("settings.resetButtonTooltip")),1)]),_:1})]),key:"0"}:void 0]),1032,["default-expanded-names","on-update:expanded-names","class"])]),_:1})}}}),ts=Me(es,[["__scopeId","data-v-51901b3c"]]),ns={},os={style:{color:"gray","padding-left":"20px"}},as=["innerHTML"];function ls(o,i){const p=wt,d=$e;return C(),N(d,{vertical:"",justify:"end"},{default:t(()=>[n(p,{style:{margin:"0px"}}),n(d,{justify:"center"},{default:t(()=>[y("ul",os,[(C(!0),Y(we,null,je(o.$tm("descriptions"),a=>(C(),Y("li",{key:a,style:{"text-align":"left"},innerHTML:a},null,8,as))),128))])]),_:1})]),_:1})}const ss=Me(ns,[["render",ls]]),is="modulepreload",rs=function(o){return"/avif2jpeg/test/"+o},Zt={},ue=function(i,p,d){let a=Promise.resolve();if(p&&p.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),g=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(p.map(w=>{if(w=rs(w),w in Zt)return;Zt[w]=!0;const h=w.endsWith(".css"),k=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${w}"]${k}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":is,h||(v.as="script"),v.crossOrigin="",v.href=w,g&&v.setAttribute("nonce",g),document.head.appendChild(v),h)return new Promise((I,b)=>{v.addEventListener("load",I),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${w}`)))})}))}function r(l){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=l,window.dispatchEvent(g),!g.defaultPrevented)throw l}return a.then(l=>{for(const g of l||[])g.status==="rejected"&&r(g.reason);return i().catch(r)})},mn="English",gn="üá¨üáß",vn='AVIF to JPEG "Offline" Batch Converter',hn="It is a free web application to convert AVIF or WebP images to other common image formats such as JPEG or PNG without server communication.",_n="Drag & Drop AVIF Images to Convert",yn=["This is a free web application to batch convert AVIF(or WebP, etc) images to common image formats such as JPEG, PNG.","It uses a browser's built-in function for the conversions, so <strong>no data is sent to any server</strong>.","The converted images will be output as <strong>a zip file</strong> when multiple images are loaded.",'Requires <a href="https://caniuse.com/avif" target="_self" style="color:red">latest</a> version of Firefox or Chrome to load AVIF images.'],wn="Select your language",bn="Choose Target File Extentions",xn={avif_only:'Only ".avif" or ".webp"',all_images:"All Image Types",all_files:"All Types",edit_type:"Edit File Extension List"},An="Input a list of comma separated file extentions to load.<br>e.g.) .jpg,.gif,.png",kn="Load Images",zn="Select your images from a dialog window.<br>*Multiple selection allowed.",Tn="Load a Whole Folder",In=`Convert all images in the selected folder and its subfolders, and add the converted images to a ZIP archive with relative path.<br>*It will show "Upload" button, but it actually doesn't upload anything to any server.`,$n="Converting images",Sn="Aborted",Cn="Some files failed to convert",Ln="Completed",En="Currently Busy",Fn="No files with the extentions were found.",Mn="Your browser does not support AVIF format. Please use latest version of Firefox or Chrome to convert AVIF images.",Pn="Cancel",Un="Save",Dn="Close",On="Open",Bn="Re-convert",jn="Convert previous selected {n} @:files again",Zn="File | Files",Rn="thread | threads",Nn="You have not saved the converted images yet.",Hn="Data have not been saved",Wn="Open Source",Vn="Open the converted image",qn="Copied to clipboard",Gn="The converted image was copied to your clipboard as DataURL.",Kn="Copy the converted image as DataURL",Qn="Convert Again",Yn={expandLogTooltip:"Displaying the entire log may severely reduce conversion speed.",expandLog:"Show entire log",autoScroll:"Auto scroll",showOnlyErrors:"Show only errors",log:"Log",outInRate:"Out / In Ratio",elapsedTime:"Elapsed Time",multiThreading:"Multi-Threading",outputSettings:"Output Settings",totalSize:"Total Size",totalFiles:"Number of Files",confirmDownloadMessage:"It will start to download {0} zip files.",inputSize:"Input Size",outputSize:"Output Size",filterSuccess:"Hide completed item",progressErrors:"Failed items",progressStarted:"Started Items",progressTotal:"Total number of files",zippingProgress:"Zipping progress",zipped:"ZIPPED",openFailedList:"Open failed file list",zipFailedList:"Pack failed files into Zips",table:{index:"index",status:"status",core:"thread",details:"file"},saveFailedList:"Save failed file list",done:"done",convertedZips:"successfully completed ZIP",progressSuccess:"Completed Files",downloadConvertedImage:"Download Converted Image",failureZippingFailedFiles:"Failure while zipping the failed files.",browseConvertedImages:"Browse converted images",index:"Index"},Jn={maxZipFileSize:"Max zip file size",retainExtTooltip:"New extension will be appended to original extension",retainOriginalExtension:"Keep Original File Extension",qualitytooltip:"Set image quality for output",quality:"Image Quality",maxZipFileSizeTooltip:"Set smaller value if memory problems occur.",ignoreExtTooltip:'Try to load files that don"t have image file extension',ignoreFileExtensions:"Load All File Types",imageTypeTooltip:"Choose image format for output",imageType:"Image Type",advancedSettings:"Advanced Settings",enableMultiThreads:"Enable multi-threading",resetButtonTooltip:"Restore all settings to default.",multiThreadsTooltip:"Convert images in multi-threaded",shrinkImageTooltip:"If the image dimensions are larger than the specified value, shrink the image to that value",shrinkImage:"Shrink images that exceed the following dimensions",useFolderNameForZip:"Use dropped folder name for the zip file",useFolderNameForZipTooltip:"If a folder is dropped or selected, its name is used as the name of the output ZIP file"},Xn="Disabled",eo="Download",to="Reset",no="Back",oo="Failed",ao="Success",lo="Previous version",so=`
Height`,io="Width",ro={lang:mn,flags:gn,title:vn,metaDescription:hn,droptarget:_n,descriptions:yn,selectLanguage:wn,fileTypeRadioTitle:bn,fileTypeRadioOptions:xn,editAcceptTypes:An,loadbutton:kn,loadbuttontooltip:zn,loadfolderbutton:Tn,loadfoldertooltip:In,processing:$n,aborted:Sn,incomplete:Cn,completed:Ln,interfered:En,noimage:Fn,avifUnsupported:Mn,cancel:Pn,save:Un,close:Dn,open:On,reconvert:Bn,reconvertTip:jn,files:Zn,threads:Rn,confirmCloseDialog:Nn,confirmCloseDialogTitle:Hn,githubOpenSource:Wn,convertedImageUrlTooltip:Vn,copiedDataURLDialogTitle:qn,copiedDataURLMessage:Gn,convertedImageDataUrlTooltip:Kn,convertAgain:Qn,status:Yn,settings:Jn,disabled:Xn,Download:eo,reset:to,back:no,failed:oo,success:ao,previousVersion:lo,height:so,width:io},us=Object.freeze(Object.defineProperty({__proto__:null,Download:eo,aborted:Sn,avifUnsupported:Mn,back:no,cancel:Pn,close:Dn,completed:Ln,confirmCloseDialog:Nn,confirmCloseDialogTitle:Hn,convertAgain:Qn,convertedImageDataUrlTooltip:Kn,convertedImageUrlTooltip:Vn,copiedDataURLDialogTitle:qn,copiedDataURLMessage:Gn,default:ro,descriptions:yn,disabled:Xn,droptarget:_n,editAcceptTypes:An,failed:oo,fileTypeRadioOptions:xn,fileTypeRadioTitle:bn,files:Zn,flags:gn,githubOpenSource:Wn,height:so,incomplete:Cn,interfered:En,lang:mn,loadbutton:kn,loadbuttontooltip:zn,loadfolderbutton:Tn,loadfoldertooltip:In,metaDescription:hn,noimage:Fn,open:On,previousVersion:lo,processing:$n,reconvert:Bn,reconvertTip:jn,reset:to,save:Un,selectLanguage:wn,settings:Jn,status:Yn,success:ao,threads:Rn,title:vn,width:io},Symbol.toStringTag,{value:"Module"})),ds="Chinese",cs="Ukrainian",ps="Turkish",fs="Russian",ms="Portuguese",gs="Polish",vs="Dutch",hs="Korean",_s="Japanese",ys="Italian",ws="Indonesian",bs="Hindi",xs="French",As="Spanish",ks="English",zs="German",Ts="Arabic",Is={zh:ds,"zh-hant":"Chinese(hant)",uk:cs,tr:ps,ru:fs,pt:ms,pl:gs,nl:vs,ko:hs,ja:_s,it:ys,id:ws,hi:bs,fr:xs,es:As,en:ks,de:zs,ar:Ts},at=[],uo={en:ro},$t={},Rt=Object.assign({"./locales/ar.json":()=>ue(()=>import("./ar-BprJ2nPp.js"),[]),"./locales/de.json":()=>ue(()=>import("./de-Ci9uz2fH.js"),[]),"./locales/en.json":()=>ue(()=>Promise.resolve().then(()=>us),void 0),"./locales/es.json":()=>ue(()=>import("./es-BhuYmPwQ.js"),[]),"./locales/fr.json":()=>ue(()=>import("./fr-C9e9WDpm.js"),[]),"./locales/hi.json":()=>ue(()=>import("./hi-B0-7fCTL.js"),[]),"./locales/id.json":()=>ue(()=>import("./id-C_dgnwNQ.js"),[]),"./locales/it.json":()=>ue(()=>import("./it--ItnRWpv.js"),[]),"./locales/ja.json":()=>ue(()=>import("./ja-9JgP_Bbi.js"),[]),"./locales/ko.json":()=>ue(()=>import("./ko-DXPoxmJG.js"),[]),"./locales/nl.json":()=>ue(()=>import("./nl-DZRM93Op.js"),[]),"./locales/pl.json":()=>ue(()=>import("./pl-9PnNHCus.js"),[]),"./locales/pt.json":()=>ue(()=>import("./pt-BdOjqQuA.js"),[]),"./locales/ru.json":()=>ue(()=>import("./ru-DAipZeIt.js"),[]),"./locales/tr.json":()=>ue(()=>import("./tr-CuFghH_2.js"),[]),"./locales/uk.json":()=>ue(()=>import("./uk-BiCMTaLR.js"),[]),"./locales/zh-hant.json":()=>ue(()=>import("./zh-hant-zZJSXfZ-.js"),[]),"./locales/zh.json":()=>ue(()=>import("./zh-yjjyZqJ7.js"),[])});var Nt;for(const o in Rt){const i=(Nt=o.match(/\/([a-z]{2}(?:-[a-z]+)?)\.json$/i))==null?void 0:Nt[1];i&&(at.push(i),!(i in uo)&&($t[i]=Rt[o]))}let _t=Ss();_t in $t||(_t="en");const lt=Xo({legacy:!1,globalInjection:!0,locale:_t,fallbackLocale:"en",messages:uo,warnHtmlMessage:!1,missingWarn:!1,fallbackWarn:!1});async function $s(o){if(lt.global.availableLocales.indexOf(o)>=0)return;const i=await $t[o]();lt.global.setLocaleMessage(o,i),await kt()}function Ss(){const o=location.pathname;return String(o.match(/[^/]+(?=\/?$)/)||"").toLowerCase()}const Cs=["innerHTML"],Ls=ve({__name:"switch-lang",emits:["lang-ready","lang-change"],async setup(o,{emit:i}){let p,d;const a=Ne(Pe),r=Wt(),{locale:l,t:g}=Ee(),w=i,h=Object.entries(Is).map(([f,T])=>({label:T,value:f}));h.sort((f,T)=>{const O=f.label,S=T.label;return O>S?1:O<S?-1:0}),Te(()=>{r.afterEach((f,T,O)=>{v(),a.switchToolTipVisibility()})}),ea(async()=>{}),[p,d]=ta(()=>v()),await p,d();async function k(f){(f!==l.value||lt.global.availableLocales.indexOf(f)===-1)&&(w("lang-change",f),await $s(f),l.value=f,document.title=g("title"),await kt()),w("lang-ready",f)}async function v(){const f=r.currentRoute.value.path||"",T=String(f.match(new RegExp("(?<=^\\/)[^/]+"))||"");T&&at.includes(T)?(await k(T),l.value=T):await I()}async function I(){const f=b().toLowerCase(),T=f.split(/[-_]/)[0];if(at.includes(T)){let O=T;if(T==="zh")switch(f){case"zh-hant":case"zh-mo":case"zh-hk":case"zh-tw":O="zh-hant"}await k(O)}}function b(){const f=window.navigator;return f.language||f.userLanguage||f.browserLanguage}function m(f){console.log(`changeRoute: ${r.currentRoute.value.fullPath} => ${f}`),r.push("/"+f+"/")}return(f,T)=>{const O=ge,S=an,E=xe;return C(),N(E,{to:!1,"display-directive":"show",show:e(a).showTooltipsBeforeMounted.value,trigger:"hover","keep-alive-on-hover":!1,placement:e(a).LANDSCAPE.value?"left":"bottom",duration:0,delay:50},{trigger:t(()=>[n(S,{ref:"langselect",size:"tiny",style:{width:"100%"},"consistent-menu-width":!1,options:e(h),"_v-model:value":"locale",value:e(l),"onUpdate:value":m},{arrow:t(()=>[n(O,null,{default:t(()=>[n(e(na))]),_:1})]),_:1},8,["options","value"])]),default:t(()=>[y("div",{innerHTML:f.$t("selectLanguage")},null,8,Cs)]),_:1},8,["show","placement"])}}}),Es=y("span",null,"CONVERT TOüëá",-1),Pe=Symbol("global variables"),Fs=ve({__name:"Avif2Jpeg",emits:["ready"],setup(o,{emit:i}){Ee();const p=i,d=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/.test(navigator.userAgent),a=x(null),r=x(2);let l=x(void 0);const g=x(!0),w=x(!1),h=x(!1),k=x(!1);oa(Pe,{showTooltipsBeforeMounted:l,LANDSCAPE:g,IS_SP:d,switchToolTipVisibility:T,SSR:!1}),Te(()=>{O(),window.addEventListener("resize",O),T(),setTimeout(()=>h.value=!0,3e3)});const v=200;let I=0,b=!0;function m(){k.value=!1,I=Date.now()}function f(){const E=b?0:Math.max(0,v-(Date.now()-I));b=!1,setTimeout(()=>k.value=!0,E),p("ready")}async function T(){}function O(){const E=document.body.clientWidth,s=document.body.clientHeight;g.value=E*.75>s||E>900}function S(E){a.value=E}return(E,s)=>{const _=$e,z=ge,A=Je,M=He;return C(),N(M,{vertical:"",align:"stretch",justify:"start",style:{height:"100%",position:"relative"}},{default:t(()=>[n(za,null,{"lang-switch":t(()=>[(C(),N(aa,null,{default:t(()=>[n(Ls,{onLangChange:m,onLangReady:f})]),_:1}))]),_:1}),n(Be,{name:"fade"},{default:t(()=>[e(k)?(C(),N(M,{key:0,vertical:"",align:"stretch",justify:"space-between",style:{height:"100%"}},{default:t(()=>[n($a),n(_,{justify:"center"},{default:t(()=>[n(ql,{expanded:e(B).expandExtButtons,"onUpdate:expanded":s[0]||(s[0]=L=>e(B).expandExtButtons=L),target:e(B).acceptTypeValue,"onUpdate:target":s[1]||(s[1]=L=>e(B).acceptTypeValue=L),userExtensions:e(B).editedAcceptTypes,"onUpdate:userExtensions":s[2]||(s[2]=L=>e(B).editedAcceptTypes=L),forbidden:e(w),onInput:S},null,8,["expanded","target","userExtensions","forbidden"])]),_:1}),n(zl,{input:e(a),format:e(B).imageFormat,quality:e(B).imageQuality,"retain-extension":e(B).retainExtension,maxZipSizeMB:e(B).maxZipSizeMB,threads:e(B).multithread?e(B).threadCount:0,onStart:s[3]||(s[3]=L=>w.value=!0),onEnd:s[4]||(s[4]=L=>w.value=!1),onMultiThreadCount:s[5]||(s[5]=L=>r.value=L)},null,8,["input","format","quality","retain-extension","maxZipSizeMB","threads"]),n(_,{vertical:"",align:"center"},{default:t(()=>[n(A,{trigger:"manual",placement:"top","keep-alive-on-hover":!1,duration:0,delay:0},{trigger:t(()=>[n(z,{size:"4vh",color:"#DADADA",style:{margin:"0px"}},{default:t(()=>[n(e(la))]),_:1})]),default:t(()=>[Es]),_:1})]),_:1}),n(_,{vertical:"",align:"center"},{default:t(()=>[n(Kl,{format:e(B).imageFormat,"onUpdate:format":s[6]||(s[6]=L=>e(B).imageFormat=L),quality:e(B).imageQuality,"onUpdate:quality":s[7]||(s[7]=L=>e(B).imageQuality=L)},null,8,["format","quality"]),n(ts,{"retain-ext":e(B).retainExtension,"onUpdate:retainExt":s[8]||(s[8]=L=>e(B).retainExtension=L),"use-folder-name-for-zip":e(B).useFolderNameForZip,"onUpdate:useFolderNameForZip":s[9]||(s[9]=L=>e(B).useFolderNameForZip=L),"max-zip-size":e(B).maxZipSizeMB,"onUpdate:maxZipSize":s[10]||(s[10]=L=>e(B).maxZipSizeMB=L),expanded:e(B).expandAdvSettings,"onUpdate:expanded":s[11]||(s[11]=L=>e(B).expandAdvSettings=L),multithread:e(B).multithread,"onUpdate:multithread":s[12]||(s[12]=L=>e(B).multithread=L),"thread-count":e(B).threadCount,"onUpdate:threadCount":s[13]||(s[13]=L=>e(B).threadCount=L),"thread-max":e(r)||0,"shrink-image":e(B).shrinkImage,"onUpdate:shrinkImage":s[14]||(s[14]=L=>e(B).shrinkImage=L),"max-width":e(B).maxWidth,"onUpdate:maxWidth":s[15]||(s[15]=L=>e(B).maxWidth=L),"max-height":e(B).maxHeight,"onUpdate:maxHeight":s[16]||(s[16]=L=>e(B).maxHeight=L)},null,8,["retain-ext","use-folder-name-for-zip","max-zip-size","expanded","multithread","thread-count","thread-max","shrink-image","max-width","max-height"])]),_:1}),n(ss)]),_:1})):ee("",!0)]),_:1})]),_:1})}}}),St=ve({__name:"App",setup(o){const i={Statistic:{valueFontSize:"1em"},Popover:{borderRadius:"0.4em",boxShadow:"2px 2px 5px 0px #555555"},Tooltip:{color:"#000000AA"},Image:{toolbarColor:"#00000099"}},p=x(!0);return Te(()=>{p.value=!1}),(d,a)=>{const r=ia,l=ra,g=ua,w=da,h=ca,k=sa;return C(),N(k,{"theme-overrides":i,style:{width:"100%",height:"100%"}},{default:t(()=>[n(h,null,{default:t(()=>[n(w,{placement:"top-right",max:20},{default:t(()=>[n(g,{placement:"top-left",closable:!0,max:50},{default:t(()=>[n(l,null,{default:t(()=>[n(r,null,{default:t(()=>[n(Fs,{class:Ke({hide:e(p)})},null,8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),co=[{path:"/",name:"Home",component:St}];for(const o of at)co.push({path:"/"+o+"/",strict:!0,name:o,component:St});pa(St,{routes:co,base:"/avif2jpeg/test/"},({app:o,router:i,routes:p,isClient:d,initialState:a})=>{o.use(lt)});
